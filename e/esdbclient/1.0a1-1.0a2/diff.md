# Comparing `tmp/esdbclient-1.0a1.tar.gz` & `tmp/esdbclient-1.0a2.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "esdbclient-1.0a1.tar", max compression
+gzip compressed data, was "esdbclient-1.0a2.tar", max compression
```

## Comparing `esdbclient-1.0a1.tar` & `esdbclient-1.0a2.tar`

### file list

```diff
@@ -1,33 +1,37 @@
--rw-r--r--   0        0        0     1520 2022-06-23 14:19:18.317032 esdbclient-1.0a1/LICENSE
--rw-r--r--   0        0        0    86403 2023-05-07 12:49:55.444028 esdbclient-1.0a1/README.md
--rw-r--r--   0        0        0      434 2023-02-13 14:52:23.129600 esdbclient-1.0a1/esdbclient/__init__.py
--rw-r--r--   0        0        0    30306 2023-05-06 01:57:28.748219 esdbclient-1.0a1/esdbclient/client.py
--rw-r--r--   0        0        0    10774 2023-05-06 01:57:28.437362 esdbclient-1.0a1/esdbclient/connection.py
--rw-r--r--   0        0        0    52086 2023-05-06 01:57:28.437903 esdbclient-1.0a1/esdbclient/esdbapi.py
--rw-r--r--   0        0        0      800 2023-02-12 00:54:11.521056 esdbclient-1.0a1/esdbclient/events.py
--rw-r--r--   0        0        0     2722 2023-05-06 00:00:09.029052 esdbclient-1.0a1/esdbclient/exceptions.py
--rw-r--r--   0        0        0    13259 2023-05-04 18:02:58.100189 esdbclient-1.0a1/esdbclient/protos/Grpc/cluster_pb2.py
--rw-r--r--   0        0        0    37436 2023-05-04 18:02:58.100620 esdbclient-1.0a1/esdbclient/protos/Grpc/cluster_pb2.pyi
--rw-r--r--   0        0        0    19336 2023-05-04 18:02:58.101022 esdbclient-1.0a1/esdbclient/protos/Grpc/cluster_pb2_grpc.py
--rw-r--r--   0        0        0     1790 2023-05-04 12:45:59.572583 esdbclient-1.0a1/esdbclient/protos/Grpc/code_pb2.py
--rw-r--r--   0        0        0    13555 2023-05-04 12:45:57.273734 esdbclient-1.0a1/esdbclient/protos/Grpc/code_pb2.pyi
--rw-r--r--   0        0        0      158 2023-05-04 12:45:57.195931 esdbclient-1.0a1/esdbclient/protos/Grpc/code_pb2_grpc.py
--rw-r--r--   0        0        0     2817 2023-05-04 18:02:58.101379 esdbclient-1.0a1/esdbclient/protos/Grpc/gossip_pb2.py
--rw-r--r--   0        0        0     5524 2023-05-04 18:02:58.101647 esdbclient-1.0a1/esdbclient/protos/Grpc/gossip_pb2.pyi
--rw-r--r--   0        0        0     2752 2023-05-04 18:02:58.101900 esdbclient-1.0a1/esdbclient/protos/Grpc/gossip_pb2_grpc.py
--rw-r--r--   0        0        0    22467 2023-05-04 12:45:59.544177 esdbclient-1.0a1/esdbclient/protos/Grpc/persistent_pb2.py
--rw-r--r--   0        0        0    73220 2023-05-04 12:45:58.367039 esdbclient-1.0a1/esdbclient/protos/Grpc/persistent_pb2.pyi
--rw-r--r--   0        0        0    15771 2023-05-04 12:45:59.569446 esdbclient-1.0a1/esdbclient/protos/Grpc/persistent_pb2_grpc.py
--rw-r--r--   0        0        0     3782 2023-05-04 12:45:59.547001 esdbclient-1.0a1/esdbclient/protos/Grpc/shared_pb2.py
--rw-r--r--   0        0        0     9874 2023-05-04 12:45:57.428467 esdbclient-1.0a1/esdbclient/protos/Grpc/shared_pb2.pyi
--rw-r--r--   0        0        0      158 2023-05-04 12:45:57.202606 esdbclient-1.0a1/esdbclient/protos/Grpc/shared_pb2_grpc.py
--rw-r--r--   0        0        0     1686 2023-05-04 12:45:59.523110 esdbclient-1.0a1/esdbclient/protos/Grpc/status_pb2.py
--rw-r--r--   0        0        0     2838 2023-05-04 12:45:57.271099 esdbclient-1.0a1/esdbclient/protos/Grpc/status_pb2.pyi
--rw-r--r--   0        0        0      158 2023-05-04 12:45:57.242089 esdbclient-1.0a1/esdbclient/protos/Grpc/status_pb2_grpc.py
--rw-r--r--   0        0        0    19933 2023-05-04 12:45:59.582961 esdbclient-1.0a1/esdbclient/protos/Grpc/streams_pb2.py
--rw-r--r--   0        0        0    71744 2023-05-04 12:45:58.391686 esdbclient-1.0a1/esdbclient/protos/Grpc/streams_pb2.pyi
--rw-r--r--   0        0        0     9787 2023-05-04 12:45:57.418995 esdbclient-1.0a1/esdbclient/protos/Grpc/streams_pb2_grpc.py
--rw-r--r--   0        0        0        0 2022-06-23 14:19:18.321130 esdbclient-1.0a1/esdbclient/py.typed
--rw-r--r--   0        0        0     2614 2023-05-07 12:55:12.001437 esdbclient-1.0a1/pyproject.toml
--rw-r--r--   0        0        0    89564 1970-01-01 00:00:00.000000 esdbclient-1.0a1/setup.py
--rw-r--r--   0        0        0    87733 1970-01-01 00:00:00.000000 esdbclient-1.0a1/PKG-INFO
+-rw-r--r--   0        0        0     1520 2022-06-23 14:19:18.317032 esdbclient-1.0a2/LICENSE
+-rw-r--r--   0        0        0    92729 2023-05-10 19:02:06.187791 esdbclient-1.0a2/README.md
+-rw-r--r--   0        0        0      515 2023-05-10 19:02:05.845353 esdbclient-1.0a2/esdbclient/__init__.py
+-rw-r--r--   0        0        0    13681 2023-05-10 19:02:05.845906 esdbclient-1.0a2/esdbclient/asyncio_client.py
+-rw-r--r--   0        0        0    32692 2023-05-10 19:02:05.846721 esdbclient-1.0a2/esdbclient/client.py
+-rw-r--r--   0        0        0    11556 2023-05-10 19:02:05.847236 esdbclient-1.0a2/esdbclient/connection.py
+-rw-r--r--   0        0        0     2156 2023-05-10 19:02:05.847689 esdbclient-1.0a2/esdbclient/esdbapibase.py
+-rw-r--r--   0        0        0      800 2023-02-12 00:54:11.521056 esdbclient-1.0a2/esdbclient/events.py
+-rw-r--r--   0        0        0     3100 2023-05-09 23:15:53.658421 esdbclient-1.0a2/esdbclient/exceptions.py
+-rw-r--r--   0        0        0     4912 2023-05-10 19:02:05.848113 esdbclient-1.0a2/esdbclient/gossip.py
+-rw-r--r--   0        0        0    23300 2023-05-10 19:02:05.848956 esdbclient-1.0a2/esdbclient/persistent.py
+-rw-r--r--   0        0        0    13401 2023-05-09 15:45:39.784205 esdbclient-1.0a2/esdbclient/protos/Grpc/cluster_pb2.py
+-rw-r--r--   0        0        0    37958 2023-05-09 15:45:38.350807 esdbclient-1.0a2/esdbclient/protos/Grpc/cluster_pb2.pyi
+-rw-r--r--   0        0        0    19336 2023-05-09 15:45:39.761236 esdbclient-1.0a2/esdbclient/protos/Grpc/cluster_pb2_grpc.py
+-rw-r--r--   0        0        0     1790 2023-05-09 15:45:39.793881 esdbclient-1.0a2/esdbclient/protos/Grpc/code_pb2.py
+-rw-r--r--   0        0        0    13555 2023-05-09 15:45:37.813695 esdbclient-1.0a2/esdbclient/protos/Grpc/code_pb2.pyi
+-rw-r--r--   0        0        0      158 2023-05-09 15:45:37.734763 esdbclient-1.0a2/esdbclient/protos/Grpc/code_pb2_grpc.py
+-rw-r--r--   0        0        0     2817 2023-05-09 15:45:39.765118 esdbclient-1.0a2/esdbclient/protos/Grpc/gossip_pb2.py
+-rw-r--r--   0        0        0     5524 2023-05-09 15:45:37.858863 esdbclient-1.0a2/esdbclient/protos/Grpc/gossip_pb2.pyi
+-rw-r--r--   0        0        0     2752 2023-05-09 15:45:39.763073 esdbclient-1.0a2/esdbclient/protos/Grpc/gossip_pb2_grpc.py
+-rw-r--r--   0        0        0    22467 2023-05-09 15:45:39.771649 esdbclient-1.0a2/esdbclient/protos/Grpc/persistent_pb2.py
+-rw-r--r--   0        0        0    73220 2023-05-09 15:45:38.784305 esdbclient-1.0a2/esdbclient/protos/Grpc/persistent_pb2.pyi
+-rw-r--r--   0        0        0    15771 2023-05-09 15:45:39.791304 esdbclient-1.0a2/esdbclient/protos/Grpc/persistent_pb2_grpc.py
+-rw-r--r--   0        0        0     3782 2023-05-09 15:45:39.773845 esdbclient-1.0a2/esdbclient/protos/Grpc/shared_pb2.py
+-rw-r--r--   0        0        0     9874 2023-05-09 15:45:37.963369 esdbclient-1.0a2/esdbclient/protos/Grpc/shared_pb2.pyi
+-rw-r--r--   0        0        0      158 2023-05-09 15:45:37.783977 esdbclient-1.0a2/esdbclient/protos/Grpc/shared_pb2_grpc.py
+-rw-r--r--   0        0        0     1686 2023-05-09 15:45:39.755017 esdbclient-1.0a2/esdbclient/protos/Grpc/status_pb2.py
+-rw-r--r--   0        0        0     2838 2023-05-09 15:45:37.828819 esdbclient-1.0a2/esdbclient/protos/Grpc/status_pb2.pyi
+-rw-r--r--   0        0        0      158 2023-05-09 15:45:37.797991 esdbclient-1.0a2/esdbclient/protos/Grpc/status_pb2_grpc.py
+-rw-r--r--   0        0        0    19933 2023-05-09 15:45:39.801455 esdbclient-1.0a2/esdbclient/protos/Grpc/streams_pb2.py
+-rw-r--r--   0        0        0    71744 2023-05-09 15:45:38.782146 esdbclient-1.0a2/esdbclient/protos/Grpc/streams_pb2.pyi
+-rw-r--r--   0        0        0     9787 2023-05-09 15:45:37.926522 esdbclient-1.0a2/esdbclient/protos/Grpc/streams_pb2_grpc.py
+-rw-r--r--   0        0        0        0 2022-06-23 14:19:18.321130 esdbclient-1.0a2/esdbclient/py.typed
+-rw-r--r--   0        0        0    43278 2023-05-10 19:02:05.850483 esdbclient-1.0a2/esdbclient/streams.py
+-rw-r--r--   0        0        0     2668 2023-05-10 23:33:41.663176 esdbclient-1.0a2/pyproject.toml
+-rw-r--r--   0        0        0    96074 1970-01-01 00:00:00.000000 esdbclient-1.0a2/setup.py
+-rw-r--r--   0        0        0    94059 1970-01-01 00:00:00.000000 esdbclient-1.0a2/PKG-INFO
```

### Comparing `esdbclient-1.0a1/LICENSE` & `esdbclient-1.0a2/LICENSE`

 * *Files identical despite different names*

### Comparing `esdbclient-1.0a1/README.md` & `esdbclient-1.0a2/README.md`

 * *Files 3% similar despite different names*

```diff
@@ -1,5401 +1,5796 @@
-00000000: 2320 5079 7468 6f6e 2067 5250 4320 436c  # Python gRPC Cl
-00000010: 6965 6e74 2066 6f72 2045 7665 6e74 5374  ient for EventSt
-00000020: 6f72 6544 420a 0a54 6869 7320 5b50 7974  oreDB..This [Pyt
-00000030: 686f 6e20 7061 636b 6167 655d 2868 7474  hon package](htt
-00000040: 7073 3a2f 2f70 7970 692e 6f72 672f 7072  ps://pypi.org/pr
-00000050: 6f6a 6563 742f 6573 6462 636c 6965 6e74  oject/esdbclient
-00000060: 2f29 2070 726f 7669 6465 7320 6120 5079  /) provides a Py
-00000070: 7468 6f6e 0a67 5250 4320 636c 6965 6e74  thon.gRPC client
-00000080: 2066 6f72 205b 4576 656e 7453 746f 7265   for [EventStore
-00000090: 4442 5d28 6874 7470 733a 2f2f 7777 772e  DB](https://www.
-000000a0: 6576 656e 7473 746f 7265 2e63 6f6d 2f29  eventstore.com/)
-000000b0: 2e0a 0a54 6869 7320 636c 6965 6e74 2068  ...This client h
-000000c0: 6173 2062 6565 6e20 6465 7665 6c6f 7065  as been develope
-000000d0: 6420 696e 2063 6f6c 6c61 626f 7261 7469  d in collaborati
-000000e0: 6f6e 2077 6974 6820 7468 6520 4576 656e  on with the Even
-000000f0: 7453 746f 7265 4442 0a74 6561 6d2e 2041  tStoreDB.team. A
-00000100: 6c74 686f 7567 6820 6e6f 7420 616c 6c20  lthough not all 
-00000110: 7468 6520 6665 6174 7572 6573 206f 6620  the features of 
-00000120: 4576 656e 7453 746f 7265 4442 2061 7265  EventStoreDB are
-00000130: 2073 7570 706f 7274 6564 0a62 7920 7468   supported.by th
-00000140: 6973 2063 6c69 656e 742c 206d 616e 7920  is client, many 
-00000150: 6f66 2074 6865 206d 6f73 7420 7573 6566  of the most usef
-00000160: 756c 206f 6e65 7320 6172 6520 7072 6573  ul ones are pres
-00000170: 656e 7465 640a 696e 2061 6e20 6561 7379  ented.in an easy
-00000180: 2d74 6f2d 7573 6520 696e 7465 7266 6163  -to-use interfac
-00000190: 652e 0a0a 5468 6973 2063 6c69 656e 7420  e...This client 
-000001a0: 6861 7320 6265 656e 2074 6573 7465 6420  has been tested 
-000001b0: 746f 2077 6f72 6b20 7769 7468 2045 7665  to work with Eve
-000001c0: 6e74 5374 6f72 6544 4220 4c54 5320 7665  ntStoreDB LTS ve
-000001d0: 7273 696f 6e73 2032 312e 3130 2c0a 7769  rsions 21.10,.wi
-000001e0: 7468 6f75 7420 616e 6420 7769 7468 6f75  thout and withou
-000001f0: 7420 5353 4c2f 544c 532c 2061 6e64 2077  t SSL/TLS, and w
-00000200: 6974 6820 5079 7468 6f6e 2076 6572 7369  ith Python versi
-00000210: 6f6e 7320 332e 3720 746f 2033 2e31 312e  ons 3.7 to 3.11.
-00000220: 2054 6865 7265 0a69 7320 3130 3025 2074   There.is 100% t
-00000230: 6573 7420 636f 7665 7261 6765 2e20 5468  est coverage. Th
-00000240: 6520 636f 6465 2068 6173 2074 7970 696e  e code has typin
-00000250: 6720 616e 6e6f 7461 7469 6f6e 732c 2063  g annotations, c
-00000260: 6865 636b 6564 2077 6974 6820 6d79 7079  hecked with mypy
-00000270: 2e0a 5468 6520 636f 6465 2069 7320 666f  ..The code is fo
-00000280: 726d 6174 7465 6420 7769 7468 2062 6c61  rmatted with bla
-00000290: 636b 2061 6e64 2069 736f 7274 2c20 616e  ck and isort, an
-000002a0: 6420 6368 6563 6b65 6420 7769 7468 2066  d checked with f
-000002b0: 6c61 6b65 382e 2050 6f65 7472 790a 6973  lake8. Poetry.is
-000002c0: 2075 7365 6420 666f 7220 7061 636b 6167   used for packag
-000002d0: 6520 6d61 6e61 6765 6d65 6e74 2064 7572  e management dur
-000002e0: 696e 6720 6465 7665 6c6f 706d 656e 742c  ing development,
-000002f0: 2061 6e64 2066 6f72 2062 7569 6c64 696e   and for buildin
-00000300: 6720 616e 640a 7075 626c 6973 6869 6e67  g and.publishing
-00000310: 2064 6973 7472 6962 7574 696f 6e73 2074   distributions t
-00000320: 6f20 5b50 7950 495d 2868 7474 7073 3a2f  o [PyPI](https:/
-00000330: 2f70 7970 692e 6f72 672f 7072 6f6a 6563  /pypi.org/projec
-00000340: 742f 6573 6462 636c 6965 6e74 2f29 2e0a  t/esdbclient/)..
-00000350: 0a23 2320 5379 6e6f 7073 6973 0a0a 5468  .## Synopsis..Th
-00000360: 6520 6045 5344 4243 6c69 656e 7460 2063  e `ESDBClient` c
-00000370: 6c61 7373 2063 616e 2062 6520 696d 706f  lass can be impo
-00000380: 7274 6564 2066 726f 6d20 7468 6520 6065  rted from the `e
-00000390: 7364 6263 6c69 656e 7460 2070 6163 6b61  sdbclient` packa
-000003a0: 6765 2e0a 0a54 6f20 7275 6e20 7468 6520  ge...To run the 
-000003b0: 636c 6965 6e74 2c20 796f 7520 7769 6c6c  client, you will
-000003c0: 206e 6565 6420 6120 636f 6e6e 6563 7469   need a connecti
-000003d0: 6f6e 2073 7472 696e 6720 5552 492e 2041  on string URI. A
-000003e0: 6e64 2c20 746f 0a63 6f6e 6e65 6374 2074  nd, to.connect t
-000003f0: 6f20 6120 2273 6563 7572 6522 2045 7665  o a "secure" Eve
-00000400: 6e74 5374 6f72 6544 4220 7365 7276 6572  ntStoreDB server
-00000410: 2c20 796f 7520 7769 6c6c 2061 6c73 6f20  , you will also 
-00000420: 6e65 6564 2061 6e0a 5353 4c2f 544c 5320  need an.SSL/TLS 
-00000430: 6365 7274 6966 6963 6174 652e 0a0a 5072  certificate...Pr
-00000440: 6f62 6162 6c79 2074 6865 2074 6872 6565  obably the three
-00000450: 206d 6f73 7420 7573 6566 756c 206d 6574   most useful met
-00000460: 686f 6473 206f 6620 6045 5344 4243 6c69  hods of `ESDBCli
-00000470: 656e 7460 2061 7265 3a0a 0a2a 2060 6170  ent` are:..* `ap
-00000480: 7065 6e64 5f65 7665 6e74 7328 2960 2054  pend_events()` T
-00000490: 6869 7320 6d65 7468 6f64 2063 616e 2062  his method can b
-000004a0: 6520 7573 6564 2074 6f20 7265 636f 7264  e used to record
-000004b0: 0a65 7665 6e74 7320 696e 2061 2070 6172  .events in a par
-000004c0: 7469 6375 6c61 7220 2273 7472 6561 6d22  ticular "stream"
-000004d0: 2e20 5468 6973 2069 7320 7573 6566 756c  . This is useful
-000004e0: 2077 6865 6e20 6578 6563 7574 696e 6720   when executing 
-000004f0: 6120 636f 6d6d 616e 640a 696e 2061 6e20  a command.in an 
-00000500: 6170 706c 6963 6174 696f 6e2e 2045 6974  application. Eit
-00000510: 6865 7220 616c 6c20 6f72 206e 6f6e 6520  her all or none 
-00000520: 6f66 2074 6865 2065 7665 6e74 7320 7769  of the events wi
-00000530: 6c6c 2062 6520 7265 636f 7264 6564 2e0a  ll be recorded..
-00000540: 0a2a 2060 7265 6164 5f73 7472 6561 6d5f  .* `read_stream_
-00000550: 6576 656e 7473 2829 6020 5468 6973 206d  events()` This m
-00000560: 6574 686f 6420 6361 6e20 6265 2075 7365  ethod can be use
-00000570: 6420 746f 2072 6574 7269 6576 6520 616c  d to retrieve al
-00000580: 6c20 7468 6520 7265 636f 7264 6564 0a65  l the recorded.e
-00000590: 7665 6e74 7320 696e 2061 2022 7374 7265  vents in a "stre
-000005a0: 616d 222e 2054 6869 7320 6973 2075 7365  am". This is use
-000005b0: 6675 6c20 666f 7220 7265 636f 6e73 7472  ful for reconstr
-000005c0: 7563 7469 6e67 2061 6e20 6167 6772 6567  ucting an aggreg
-000005d0: 6174 6520 6265 666f 7265 0a65 7865 6375  ate before.execu
-000005e0: 7469 6e67 2061 2063 6f6d 6d61 6e64 2069  ting a command i
-000005f0: 6e20 616e 2061 7070 6c69 6361 7469 6f6e  n an application
-00000600: 2e0a 0a2a 2060 7375 6273 6372 6962 655f  ...* `subscribe_
-00000610: 616c 6c5f 6576 656e 7473 2829 6020 5468  all_events()` Th
-00000620: 6973 206d 6574 686f 6420 6361 6e20 6265  is method can be
-00000630: 2075 7365 6420 746f 2072 6563 6569 7665   used to receive
-00000640: 2061 6c6c 2072 6563 6f72 6465 640a 6576   all recorded.ev
-00000650: 656e 7473 2061 6372 6f73 7320 616c 6c20  ents across all 
-00000660: 2273 7472 6561 6d73 222e 2054 6869 7320  "streams". This 
-00000670: 6973 2075 7365 6675 6c20 696e 2065 7665  is useful in eve
-00000680: 6e74 2d70 726f 6365 7373 696e 6720 636f  nt-processing co
-00000690: 6d70 6f6e 656e 7473 2c0a 616e 6420 7375  mponents,.and su
-000006a0: 7070 6f72 7473 2070 726f 6365 7373 696e  pports processin
-000006b0: 6720 6576 656e 7473 2077 6974 6820 2265  g events with "e
-000006c0: 7861 6374 6c79 2d6f 6e63 6522 2073 656d  xactly-once" sem
-000006d0: 616e 7469 6373 2e0a 0a54 6865 2065 7861  antics...The exa
-000006e0: 6d70 6c65 2062 656c 6f77 2075 7365 7320  mple below uses 
-000006f0: 616e 2022 696e 7365 6375 7265 2220 4576  an "insecure" Ev
-00000700: 656e 7453 746f 7265 4442 2073 6572 7665  entStoreDB serve
-00000710: 7220 7275 6e6e 696e 6720 6c6f 6361 6c6c  r running locall
-00000720: 7920 6f6e 2070 6f72 7420 3231 3134 2e0a  y on port 2114..
-00000730: 0a60 6060 7079 7468 6f6e 0a69 6d70 6f72  .```python.impor
-00000740: 7420 6573 6462 636c 6965 6e74 2c20 7575  t esdbclient, uu
-00000750: 6964 0a0a 0a23 2043 6f6e 7374 7275 6374  id...# Construct
-00000760: 2045 5344 4243 6c69 656e 7420 7769 7468   ESDBClient with
-00000770: 2061 6e20 4576 656e 7453 746f 7265 4442   an EventStoreDB
-00000780: 2055 5249 2e0a 0a63 6c69 656e 7420 3d20   URI...client = 
-00000790: 6573 6462 636c 6965 6e74 2e45 5344 4243  esdbclient.ESDBC
-000007a0: 6c69 656e 7428 7572 693d 2265 7364 623a  lient(uri="esdb:
-000007b0: 2f2f 6c6f 6361 6c68 6f73 743a 3231 3134  //localhost:2114
-000007c0: 3f54 6c73 3d66 616c 7365 2229 0a0a 0a23  ?Tls=false")...#
-000007d0: 2041 7070 656e 6420 6576 656e 7473 2074   Append events t
-000007e0: 6f20 6120 6e65 7720 7374 7265 616d 2e0a  o a new stream..
-000007f0: 0a73 7472 6561 6d5f 6e61 6d65 203d 2073  .stream_name = s
-00000800: 7472 2875 7569 642e 7575 6964 3428 2929  tr(uuid.uuid4())
-00000810: 0a0a 6576 656e 7431 203d 2065 7364 6263  ..event1 = esdbc
-00000820: 6c69 656e 742e 4e65 7745 7665 6e74 2874  lient.NewEvent(t
-00000830: 7970 653d 274f 7264 6572 4372 6561 7465  ype='OrderCreate
-00000840: 6427 2c20 6461 7461 3d62 2764 6174 6131  d', data=b'data1
-00000850: 2729 0a0a 636c 6965 6e74 2e61 7070 656e  ')..client.appen
-00000860: 645f 6576 656e 7473 280a 2020 2020 7374  d_events(.    st
-00000870: 7265 616d 5f6e 616d 653d 7374 7265 616d  ream_name=stream
-00000880: 5f6e 616d 652c 0a20 2020 2065 7870 6563  _name,.    expec
-00000890: 7465 645f 706f 7369 7469 6f6e 3d4e 6f6e  ted_position=Non
-000008a0: 652c 0a20 2020 2065 7665 6e74 733d 5b65  e,.    events=[e
-000008b0: 7665 6e74 315d 2c0a 290a 0a0a 2320 4170  vent1],.)...# Ap
-000008c0: 7065 6e64 206d 6f72 6520 6576 656e 7473  pend more events
-000008d0: 2074 6f20 616e 2065 7869 7374 696e 6720   to an existing 
-000008e0: 7374 7265 616d 2e0a 0a65 7665 6e74 3220  stream...event2 
-000008f0: 3d20 6573 6462 636c 6965 6e74 2e4e 6577  = esdbclient.New
-00000900: 4576 656e 7428 7479 7065 3d27 4f72 6465  Event(type='Orde
-00000910: 7255 7064 6174 6564 272c 2064 6174 613d  rUpdated', data=
-00000920: 6227 6461 7461 3227 290a 6576 656e 7433  b'data2').event3
-00000930: 203d 2065 7364 6263 6c69 656e 742e 4e65   = esdbclient.Ne
-00000940: 7745 7665 6e74 2874 7970 653d 274f 7264  wEvent(type='Ord
-00000950: 6572 4465 6c65 7465 6427 2c20 6461 7461  erDeleted', data
-00000960: 3d62 2764 6174 6133 2729 0a0a 636c 6965  =b'data3')..clie
-00000970: 6e74 2e61 7070 656e 645f 6576 656e 7473  nt.append_events
-00000980: 280a 2020 2020 7374 7265 616d 5f6e 616d  (.    stream_nam
-00000990: 653d 7374 7265 616d 5f6e 616d 652c 0a20  e=stream_name,. 
-000009a0: 2020 2065 7870 6563 7465 645f 706f 7369     expected_posi
-000009b0: 7469 6f6e 3d30 2c0a 2020 2020 6576 656e  tion=0,.    even
-000009c0: 7473 3d5b 6576 656e 7432 2c20 6576 656e  ts=[event2, even
-000009d0: 7433 5d2c 0a29 0a0a 0a23 2052 6561 6420  t3],.)...# Read 
-000009e0: 616c 6c20 6576 656e 7473 2072 6563 6f72  all events recor
-000009f0: 6465 6420 696e 2061 2073 7472 6561 6d2e  ded in a stream.
-00000a00: 0a0a 7265 636f 7264 6564 203d 206c 6973  ..recorded = lis
-00000a10: 7428 0a20 2020 2063 6c69 656e 742e 7265  t(.    client.re
-00000a20: 6164 5f73 7472 6561 6d5f 6576 656e 7473  ad_stream_events
-00000a30: 280a 2020 2020 2020 2020 7374 7265 616d  (.        stream
-00000a40: 5f6e 616d 653d 7374 7265 616d 5f6e 616d  _name=stream_nam
-00000a50: 650a 2020 2020 290a 290a 0a61 7373 6572  e.    ).)..asser
-00000a60: 7420 6c65 6e28 7265 636f 7264 6564 2920  t len(recorded) 
-00000a70: 3d3d 2033 0a61 7373 6572 7420 7265 636f  == 3.assert reco
-00000a80: 7264 6564 5b30 5d2e 6461 7461 203d 3d20  rded[0].data == 
-00000a90: 6576 656e 7431 2e64 6174 610a 6173 7365  event1.data.asse
-00000aa0: 7274 2072 6563 6f72 6465 645b 315d 2e64  rt recorded[1].d
-00000ab0: 6174 6120 3d3d 2065 7665 6e74 322e 6461  ata == event2.da
-00000ac0: 7461 0a61 7373 6572 7420 7265 636f 7264  ta.assert record
-00000ad0: 6564 5b32 5d2e 6461 7461 203d 3d20 6576  ed[2].data == ev
-00000ae0: 656e 7433 2e64 6174 610a 6173 7365 7274  ent3.data.assert
-00000af0: 2072 6563 6f72 6465 645b 305d 2e74 7970   recorded[0].typ
-00000b00: 6520 3d3d 2065 7665 6e74 312e 7479 7065  e == event1.type
-00000b10: 0a61 7373 6572 7420 7265 636f 7264 6564  .assert recorded
-00000b20: 5b31 5d2e 7479 7065 203d 3d20 6576 656e  [1].type == even
-00000b30: 7432 2e74 7970 650a 6173 7365 7274 2072  t2.type.assert r
-00000b40: 6563 6f72 6465 645b 325d 2e74 7970 6520  ecorded[2].type 
-00000b50: 3d3d 2065 7665 6e74 332e 7479 7065 0a0a  == event3.type..
-00000b60: 0a23 2049 6e20 616e 2065 7665 6e74 2d70  .# In an event-p
-00000b70: 726f 6365 7373 696e 6720 636f 6d70 6f6e  rocessing compon
-00000b80: 656e 742c 2075 7365 2061 2022 6361 7463  ent, use a "catc
-00000b90: 682d 7570 2220 7375 6273 6372 6970 7469  h-up" subscripti
-00000ba0: 6f6e 0a23 2074 6f20 7265 6365 6976 6520  on.# to receive 
-00000bb0: 616c 6c20 6576 656e 7473 2061 6372 6f73  all events acros
-00000bc0: 7320 616c 6c20 7374 7265 616d 732c 2069  s all streams, i
-00000bd0: 6e63 6c75 6469 6e67 2065 7665 6e74 7320  ncluding events 
-00000be0: 7468 6174 0a23 2068 6176 6520 6e6f 7420  that.# have not 
-00000bf0: 7965 7420 6265 656e 2072 6563 6f72 6465  yet been recorde
-00000c00: 642c 2073 7461 7274 696e 6720 6672 6f6d  d, starting from
-00000c10: 2074 6865 2063 6f6d 706f 6e65 6e74 2773   the component's
-00000c20: 206c 6173 740a 2320 7361 7665 6420 2263   last.# saved "c
-00000c30: 6f6d 6d69 7420 706f 7369 7469 6f6e 222e  ommit position".
-00000c40: 0a0a 6c61 7374 5f73 6176 6564 5f63 6f6d  ..last_saved_com
-00000c50: 6d69 745f 706f 7369 7469 6f6e 203d 2030  mit_position = 0
-00000c60: 0a0a 7375 6273 6372 6970 7469 6f6e 203d  ..subscription =
-00000c70: 2063 6c69 656e 742e 7375 6273 6372 6962   client.subscrib
-00000c80: 655f 616c 6c5f 6576 656e 7473 280a 2020  e_all_events(.  
-00000c90: 2020 636f 6d6d 6974 5f70 6f73 6974 696f    commit_positio
-00000ca0: 6e3d 6c61 7374 5f73 6176 6564 5f63 6f6d  n=last_saved_com
-00000cb0: 6d69 745f 706f 7369 7469 6f6e 0a29 0a0a  mit_position.)..
-00000cc0: 2320 546f 2069 6d70 6c65 6d65 6e74 2022  # To implement "
-00000cd0: 6578 6163 746c 792d 6f6e 6365 2220 7365  exactly-once" se
-00000ce0: 6d61 6e74 6963 732c 2069 7465 7261 7465  mantics, iterate
-00000cf0: 206f 7665 7220 7468 650a 2320 2263 6174   over the.# "cat
-00000d00: 6368 2d75 7022 2073 7562 7363 7269 7074  ch-up" subscript
-00000d10: 696f 6e2e 2050 726f 6365 7373 2065 6163  ion. Process eac
-00000d20: 6820 7265 6365 6976 6564 2065 7665 6e74  h received event
-00000d30: 2c0a 2320 696e 2074 7572 6e2c 2074 6872  ,.# in turn, thr
-00000d40: 6f75 6768 2061 6e20 6576 656e 742d 7072  ough an event-pr
-00000d50: 6f63 6573 7369 6e67 2070 6f6c 6963 792e  ocessing policy.
-00000d60: 2053 6176 6520 7468 650a 2320 7661 6c75   Save the.# valu
-00000d70: 6520 6f66 2074 6865 2063 6f6d 6d69 745f  e of the commit_
-00000d80: 706f 7369 7469 6f6e 2061 7474 7269 6275  position attribu
-00000d90: 7465 206f 6620 7468 6520 7072 6f63 6573  te of the proces
-00000da0: 7365 640a 2320 6576 656e 7420 7769 7468  sed.# event with
-00000db0: 206e 6577 2073 7461 7465 2067 656e 6572   new state gener
-00000dc0: 6174 6564 2062 7920 7468 6520 706f 6c69  ated by the poli
-00000dd0: 6379 2069 6e20 7468 6520 7361 6d65 0a23  cy in the same.#
-00000de0: 2061 746f 6d69 6320 7472 616e 7361 6374   atomic transact
-00000df0: 696f 6e2e 2055 7365 2074 6865 206c 6173  ion. Use the las
-00000e00: 7420 7361 7665 6420 2263 6f6d 6d69 7420  t saved "commit 
-00000e10: 706f 7369 7469 6f6e 220a 2320 7768 656e  position".# when
-00000e20: 2072 6573 7461 7274 696e 6720 7468 6520   restarting the 
-00000e30: 2263 6174 6368 2d75 7022 2073 7562 7363  "catch-up" subsc
-00000e40: 7269 7074 696f 6e2e 0a0a 7265 6365 6976  ription...receiv
-00000e50: 6564 203d 205b 5d0a 666f 7220 6576 656e  ed = [].for even
-00000e60: 7420 696e 2073 7562 7363 7269 7074 696f  t in subscriptio
-00000e70: 6e3a 0a20 2020 2072 6563 6569 7665 642e  n:.    received.
-00000e80: 6170 7065 6e64 2865 7665 6e74 290a 2020  append(event).  
-00000e90: 2020 6966 2065 7665 6e74 2e69 6420 3d3d    if event.id ==
-00000ea0: 2065 7665 6e74 332e 6964 3a0a 2020 2020   event3.id:.    
-00000eb0: 2020 2020 6272 6561 6b0a 0a61 7373 6572      break..asser
-00000ec0: 7420 7265 6365 6976 6564 5b2d 335d 2e64  t received[-3].d
-00000ed0: 6174 6120 3d3d 2065 7665 6e74 312e 6461  ata == event1.da
-00000ee0: 7461 0a61 7373 6572 7420 7265 6365 6976  ta.assert receiv
-00000ef0: 6564 5b2d 325d 2e64 6174 6120 3d3d 2065  ed[-2].data == e
-00000f00: 7665 6e74 322e 6461 7461 0a61 7373 6572  vent2.data.asser
-00000f10: 7420 7265 6365 6976 6564 5b2d 315d 2e64  t received[-1].d
-00000f20: 6174 6120 3d3d 2065 7665 6e74 332e 6461  ata == event3.da
-00000f30: 7461 0a61 7373 6572 7420 7265 6365 6976  ta.assert receiv
-00000f40: 6564 5b2d 335d 2e74 7970 6520 3d3d 2065  ed[-3].type == e
-00000f50: 7665 6e74 312e 7479 7065 0a61 7373 6572  vent1.type.asser
-00000f60: 7420 7265 6365 6976 6564 5b2d 325d 2e74  t received[-2].t
-00000f70: 7970 6520 3d3d 2065 7665 6e74 322e 7479  ype == event2.ty
-00000f80: 7065 0a61 7373 6572 7420 7265 6365 6976  pe.assert receiv
-00000f90: 6564 5b2d 315d 2e74 7970 6520 3d3d 2065  ed[-1].type == e
-00000fa0: 7665 6e74 332e 7479 7065 0a0a 6173 7365  vent3.type..asse
-00000fb0: 7274 2072 6563 6569 7665 645b 2d33 5d2e  rt received[-3].
-00000fc0: 636f 6d6d 6974 5f70 6f73 6974 696f 6e20  commit_position 
-00000fd0: 3e20 300a 6173 7365 7274 2072 6563 6569  > 0.assert recei
-00000fe0: 7665 645b 2d32 5d2e 636f 6d6d 6974 5f70  ved[-2].commit_p
-00000ff0: 6f73 6974 696f 6e20 3e20 7265 6365 6976  osition > receiv
-00001000: 6564 5b2d 335d 2e63 6f6d 6d69 745f 706f  ed[-3].commit_po
-00001010: 7369 7469 6f6e 0a61 7373 6572 7420 7265  sition.assert re
-00001020: 6365 6976 6564 5b2d 315d 2e63 6f6d 6d69  ceived[-1].commi
-00001030: 745f 706f 7369 7469 6f6e 203e 2072 6563  t_position > rec
-00001040: 6569 7665 645b 2d32 5d2e 636f 6d6d 6974  eived[-2].commit
-00001050: 5f70 6f73 6974 696f 6e0a 0a0a 2320 436c  _position...# Cl
-00001060: 6f73 6520 7468 6520 636c 6965 6e74 2061  ose the client a
-00001070: 6674 6572 2075 7365 2e0a 0a63 6c69 656e  fter use...clien
-00001080: 742e 636c 6f73 6528 290a 6060 600a 0a53  t.close().```..S
-00001090: 6565 2062 656c 6f77 2066 6f72 206d 6f72  ee below for mor
-000010a0: 6520 6465 7461 696c 732e 0a0a 466f 7220  e details...For 
-000010b0: 616e 2065 7861 6d70 6c65 206f 6620 7573  an example of us
-000010c0: 6167 652c 2073 6565 2074 6865 205b 6576  age, see the [ev
-000010d0: 656e 7473 6f75 7263 696e 672d 6576 656e  entsourcing-even
-000010e0: 7473 746f 7265 6462 5d28 0a68 7474 7073  tstoredb](.https
-000010f0: 3a2f 2f67 6974 6875 622e 636f 6d2f 7079  ://github.com/py
-00001100: 6576 656e 7473 6f75 7263 696e 672f 6576  eventsourcing/ev
-00001110: 656e 7473 6f75 7263 696e 672d 6576 656e  entsourcing-even
-00001120: 7473 746f 7265 6462 2920 7061 636b 6167  tstoredb) packag
-00001130: 652e 0a0a 2323 2054 6162 6c65 206f 6620  e...## Table of 
-00001140: 636f 6e74 656e 7473 0a0a 3c21 2d2d 2054  contents..<!-- T
-00001150: 4f43 202d 2d3e 0a2a 205b 496e 7374 616c  OC -->.* [Instal
-00001160: 6c20 7061 636b 6167 655d 2823 696e 7374  l package](#inst
-00001170: 616c 6c2d 7061 636b 6167 6529 0a20 202a  all-package).  *
-00001180: 205b 4672 6f6d 2050 7950 495d 2823 6672   [From PyPI](#fr
-00001190: 6f6d 2d70 7970 6929 0a20 202a 205b 5769  om-pypi).  * [Wi
-000011a0: 7468 2050 6f65 7472 795d 2823 7769 7468  th Poetry](#with
-000011b0: 2d70 6f65 7472 7929 0a2a 205b 4576 656e  -poetry).* [Even
-000011c0: 7453 746f 7265 4442 2073 6572 7665 725d  tStoreDB server]
-000011d0: 2823 6576 656e 7473 746f 7265 6462 2d73  (#eventstoredb-s
-000011e0: 6572 7665 7229 0a20 202a 205b 5275 6e20  erver).  * [Run 
-000011f0: 636f 6e74 6169 6e65 725d 2823 7275 6e2d  container](#run-
-00001200: 636f 6e74 6169 6e65 7229 0a20 202a 205b  container).  * [
-00001210: 5374 6f70 2063 6f6e 7461 696e 6572 5d28  Stop container](
-00001220: 2373 746f 702d 636f 6e74 6169 6e65 7229  #stop-container)
-00001230: 0a2a 205b 4576 656e 7453 746f 7265 4442  .* [EventStoreDB
-00001240: 2063 6c69 656e 745d 2823 6576 656e 7473   client](#events
-00001250: 746f 7265 6462 2d63 6c69 656e 7429 0a20  toredb-client). 
-00001260: 202a 205b 496d 706f 7274 2063 6c61 7373   * [Import class
-00001270: 5d28 2369 6d70 6f72 742d 636c 6173 7329  ](#import-class)
-00001280: 0a20 202a 205b 436f 6e73 7472 7563 7420  .  * [Construct 
-00001290: 636c 6965 6e74 5d28 2363 6f6e 7374 7275  client](#constru
-000012a0: 6374 2d63 6c69 656e 7429 0a2a 205b 5374  ct-client).* [St
-000012b0: 7265 616d 735d 2823 7374 7265 616d 7329  reams](#streams)
-000012c0: 0a20 202a 205b 4170 7065 6e64 2065 7665  .  * [Append eve
-000012d0: 6e74 735d 2823 6170 7065 6e64 2d65 7665  nts](#append-eve
-000012e0: 6e74 7329 0a20 202a 205b 4170 7065 6e64  nts).  * [Append
-000012f0: 2065 7665 6e74 5d28 2361 7070 656e 642d   event](#append-
-00001300: 6576 656e 7429 0a20 202a 205b 4964 656d  event).  * [Idem
-00001310: 706f 7465 6e74 2061 7070 656e 6420 6f70  potent append op
-00001320: 6572 6174 696f 6e73 5d28 2369 6465 6d70  erations](#idemp
-00001330: 6f74 656e 742d 6170 7065 6e64 2d6f 7065  otent-append-ope
-00001340: 7261 7469 6f6e 7329 0a20 202a 205b 5265  rations).  * [Re
-00001350: 6164 2073 7472 6561 6d20 6576 656e 7473  ad stream events
-00001360: 5d28 2372 6561 642d 7374 7265 616d 2d65  ](#read-stream-e
-00001370: 7665 6e74 7329 0a20 202a 205b 5265 6164  vents).  * [Read
-00001380: 2061 6c6c 2065 7665 6e74 735d 2823 7265   all events](#re
-00001390: 6164 2d61 6c6c 2d65 7665 6e74 7329 0a20  ad-all-events). 
-000013a0: 202a 205b 4765 7420 6375 7272 656e 7420   * [Get current 
-000013b0: 7374 7265 616d 2070 6f73 6974 696f 6e5d  stream position]
-000013c0: 2823 6765 742d 6375 7272 656e 742d 7374  (#get-current-st
-000013d0: 7265 616d 2d70 6f73 6974 696f 6e29 0a20  ream-position). 
-000013e0: 202a 205b 4765 7420 6375 7272 656e 7420   * [Get current 
-000013f0: 636f 6d6d 6974 2070 6f73 6974 696f 6e5d  commit position]
-00001400: 2823 6765 742d 6375 7272 656e 742d 636f  (#get-current-co
-00001410: 6d6d 6974 2d70 6f73 6974 696f 6e29 0a20  mmit-position). 
-00001420: 202a 205b 4765 7420 7374 7265 616d 206d   * [Get stream m
-00001430: 6574 6164 6174 615d 2823 6765 742d 7374  etadata](#get-st
-00001440: 7265 616d 2d6d 6574 6164 6174 6129 0a20  ream-metadata). 
-00001450: 202a 205b 5365 7420 7374 7265 616d 206d   * [Set stream m
-00001460: 6574 6164 6174 615d 2823 7365 742d 7374  etadata](#set-st
-00001470: 7265 616d 2d6d 6574 6164 6174 6129 0a20  ream-metadata). 
-00001480: 202a 205b 4465 6c65 7465 2073 7472 6561   * [Delete strea
-00001490: 6d5d 2823 6465 6c65 7465 2d73 7472 6561  m](#delete-strea
-000014a0: 6d29 0a20 202a 205b 546f 6d62 7374 6f6e  m).  * [Tombston
-000014b0: 6520 7374 7265 616d 5d28 2374 6f6d 6273  e stream](#tombs
-000014c0: 746f 6e65 2d73 7472 6561 6d29 0a2a 205b  tone-stream).* [
-000014d0: 4361 7463 682d 7570 2073 7562 7363 7269  Catch-up subscri
-000014e0: 7074 696f 6e73 5d28 2363 6174 6368 2d75  ptions](#catch-u
-000014f0: 702d 7375 6273 6372 6970 7469 6f6e 7329  p-subscriptions)
-00001500: 0a20 202a 205b 486f 7720 746f 2069 6d70  .  * [How to imp
-00001510: 6c65 6d65 6e74 2065 7861 6374 6c79 2d6f  lement exactly-o
-00001520: 6e63 6520 6576 656e 7420 7072 6f63 6573  nce event proces
-00001530: 7369 6e67 5d28 2368 6f77 2d74 6f2d 696d  sing](#how-to-im
-00001540: 706c 656d 656e 742d 6578 6163 746c 792d  plement-exactly-
-00001550: 6f6e 6365 2d65 7665 6e74 2d70 726f 6365  once-event-proce
-00001560: 7373 696e 6729 0a20 202a 205b 5375 6273  ssing).  * [Subs
-00001570: 6372 6962 6520 616c 6c20 6576 656e 7473  cribe all events
-00001580: 5d28 2373 7562 7363 7269 6265 2d61 6c6c  ](#subscribe-all
-00001590: 2d65 7665 6e74 7329 0a20 202a 205b 5375  -events).  * [Su
-000015a0: 6273 6372 6962 6520 7374 7265 616d 2065  bscribe stream e
-000015b0: 7665 6e74 735d 2823 7375 6273 6372 6962  vents](#subscrib
-000015c0: 652d 7374 7265 616d 2d65 7665 6e74 7329  e-stream-events)
-000015d0: 0a2a 205b 5065 7273 6973 7465 6e74 2073  .* [Persistent s
-000015e0: 7562 7363 7269 7074 696f 6e73 5d28 2370  ubscriptions](#p
-000015f0: 6572 7369 7374 656e 742d 7375 6273 6372  ersistent-subscr
-00001600: 6970 7469 6f6e 7329 0a20 202a 205b 4372  iptions).  * [Cr
-00001610: 6561 7465 2073 7562 7363 7269 7074 696f  eate subscriptio
-00001620: 6e5d 2823 6372 6561 7465 2d73 7562 7363  n](#create-subsc
-00001630: 7269 7074 696f 6e29 0a20 202a 205b 5265  ription).  * [Re
-00001640: 6164 2073 7562 7363 7269 7074 696f 6e5d  ad subscription]
-00001650: 2823 7265 6164 2d73 7562 7363 7269 7074  (#read-subscript
-00001660: 696f 6e29 0a20 202a 205b 4765 7420 7375  ion).  * [Get su
-00001670: 6273 6372 6970 7469 6f6e 2069 6e66 6f5d  bscription info]
-00001680: 2823 6765 742d 7375 6273 6372 6970 7469  (#get-subscripti
-00001690: 6f6e 2d69 6e66 6f29 0a20 202a 205b 4c69  on-info).  * [Li
-000016a0: 7374 2073 7562 7363 7269 7074 696f 6e73  st subscriptions
-000016b0: 5d28 236c 6973 742d 7375 6273 6372 6970  ](#list-subscrip
-000016c0: 7469 6f6e 7329 0a20 202a 205b 4465 6c65  tions).  * [Dele
-000016d0: 7465 2073 7562 7363 7269 7074 696f 6e5d  te subscription]
-000016e0: 2823 6465 6c65 7465 2d73 7562 7363 7269  (#delete-subscri
-000016f0: 7074 696f 6e29 0a20 202a 205b 4372 6561  ption).  * [Crea
-00001700: 7465 2073 7472 6561 6d20 7375 6273 6372  te stream subscr
-00001710: 6970 7469 6f6e 5d28 2363 7265 6174 652d  iption](#create-
-00001720: 7374 7265 616d 2d73 7562 7363 7269 7074  stream-subscript
-00001730: 696f 6e29 0a20 202a 205b 5265 6164 2073  ion).  * [Read s
-00001740: 7472 6561 6d20 7375 6273 6372 6970 7469  tream subscripti
-00001750: 6f6e 5d28 2372 6561 642d 7374 7265 616d  on](#read-stream
-00001760: 2d73 7562 7363 7269 7074 696f 6e29 0a20  -subscription). 
-00001770: 202a 205b 4765 7420 7374 7265 616d 2073   * [Get stream s
-00001780: 7562 7363 7269 7074 696f 6e20 696e 666f  ubscription info
-00001790: 5d28 2367 6574 2d73 7472 6561 6d2d 7375  ](#get-stream-su
-000017a0: 6273 6372 6970 7469 6f6e 2d69 6e66 6f29  bscription-info)
-000017b0: 0a20 202a 205b 4c69 7374 2073 7472 6561  .  * [List strea
-000017c0: 6d20 7375 6273 6372 6970 7469 6f6e 735d  m subscriptions]
-000017d0: 2823 6c69 7374 2d73 7472 6561 6d2d 7375  (#list-stream-su
-000017e0: 6273 6372 6970 7469 6f6e 7329 0a20 202a  bscriptions).  *
-000017f0: 205b 4465 6c65 7465 2073 7472 6561 6d20   [Delete stream 
-00001800: 7375 6273 6372 6970 7469 6f6e 5d28 2364  subscription](#d
-00001810: 656c 6574 652d 7374 7265 616d 2d73 7562  elete-stream-sub
-00001820: 7363 7269 7074 696f 6e29 0a2a 205b 436f  scription).* [Co
-00001830: 6e6e 6563 7469 6f6e 5d28 2363 6f6e 6e65  nnection](#conne
-00001840: 6374 696f 6e29 0a20 202a 205b 5265 636f  ction).  * [Reco
-00001850: 6e6e 6563 745d 2823 7265 636f 6e6e 6563  nnect](#reconnec
-00001860: 7429 0a20 202a 205b 436c 6f73 655d 2823  t).  * [Close](#
-00001870: 636c 6f73 6529 0a2a 205b 4e6f 7465 735d  close).* [Notes]
-00001880: 2823 6e6f 7465 7329 0a20 202a 205b 436f  (#notes).  * [Co
-00001890: 6e6e 6563 7469 6f6e 2073 7472 696e 6773  nnection strings
-000018a0: 5d28 2363 6f6e 6e65 6374 696f 6e2d 7374  ](#connection-st
-000018b0: 7269 6e67 7329 0a20 202a 205b 5265 6775  rings).  * [Regu
-000018c0: 6c61 7220 6578 7072 6573 7369 6f6e 2066  lar expression f
-000018d0: 696c 7465 7273 5d28 2372 6567 756c 6172  ilters](#regular
-000018e0: 2d65 7870 7265 7373 696f 6e2d 6669 6c74  -expression-filt
-000018f0: 6572 7329 0a20 202a 205b 4e65 7720 6576  ers).  * [New ev
-00001900: 656e 7420 6f62 6a65 6374 735d 2823 6e65  ent objects](#ne
-00001910: 772d 6576 656e 742d 6f62 6a65 6374 7329  w-event-objects)
-00001920: 0a20 202a 205b 5265 636f 7264 6564 2065  .  * [Recorded e
-00001930: 7665 6e74 206f 626a 6563 7473 5d28 2372  vent objects](#r
-00001940: 6563 6f72 6465 642d 6576 656e 742d 6f62  ecorded-event-ob
-00001950: 6a65 6374 7329 0a2a 205b 436f 6e74 7269  jects).* [Contri
-00001960: 6275 746f 7273 5d28 2363 6f6e 7472 6962  butors](#contrib
-00001970: 7574 6f72 7329 0a20 202a 205b 496e 7374  utors).  * [Inst
-00001980: 616c 6c20 506f 6574 7279 5d28 2369 6e73  all Poetry](#ins
-00001990: 7461 6c6c 2d70 6f65 7472 7929 0a20 202a  tall-poetry).  *
-000019a0: 205b 5365 7475 7020 666f 7220 5079 4368   [Setup for PyCh
-000019b0: 6172 6d20 7573 6572 735d 2823 7365 7475  arm users](#setu
-000019c0: 702d 666f 722d 7079 6368 6172 6d2d 7573  p-for-pycharm-us
-000019d0: 6572 7329 0a20 202a 205b 5365 7475 7020  ers).  * [Setup 
-000019e0: 6672 6f6d 2063 6f6d 6d61 6e64 206c 696e  from command lin
-000019f0: 655d 2823 7365 7475 702d 6672 6f6d 2d63  e](#setup-from-c
-00001a00: 6f6d 6d61 6e64 2d6c 696e 6529 0a20 202a  ommand-line).  *
-00001a10: 205b 5072 6f6a 6563 7420 4d61 6b65 6669   [Project Makefi
-00001a20: 6c65 2063 6f6d 6d61 6e64 735d 2823 7072  le commands](#pr
-00001a30: 6f6a 6563 742d 6d61 6b65 6669 6c65 2d63  oject-makefile-c
-00001a40: 6f6d 6d61 6e64 7329 0a3c 212d 2d20 544f  ommands).<!-- TO
-00001a50: 4320 2d2d 3e0a 0a23 2320 496e 7374 616c  C -->..## Instal
-00001a60: 6c20 7061 636b 6167 650a 0a49 7420 6973  l package..It is
-00001a70: 2072 6563 6f6d 6d65 6e64 6564 2074 6f20   recommended to 
-00001a80: 696e 7374 616c 6c20 5079 7468 6f6e 2070  install Python p
-00001a90: 6163 6b61 6765 7320 696e 746f 2061 2050  ackages into a P
-00001aa0: 7974 686f 6e20 7669 7274 7561 6c20 656e  ython virtual en
-00001ab0: 7669 726f 6e6d 656e 742e 0a0a 2323 2320  vironment...### 
-00001ac0: 4672 6f6d 2050 7950 490a 0a59 6f75 2063  From PyPI..You c
-00001ad0: 616e 2075 7365 2070 6970 2074 6f20 696e  an use pip to in
-00001ae0: 7374 616c 6c20 7468 6973 2070 6163 6b61  stall this packa
-00001af0: 6765 2064 6972 6563 746c 7920 6672 6f6d  ge directly from
-00001b00: 0a5b 7468 6520 5079 7468 6f6e 2050 6163  .[the Python Pac
-00001b10: 6b61 6765 2049 6e64 6578 5d28 6874 7470  kage Index](http
-00001b20: 733a 2f2f 7079 7069 2e6f 7267 2f70 726f  s://pypi.org/pro
-00001b30: 6a65 6374 2f65 7364 6263 6c69 656e 742f  ject/esdbclient/
-00001b40: 292e 0a0a 2020 2020 2420 7069 7020 696e  )...    $ pip in
-00001b50: 7374 616c 6c20 6573 6462 636c 6965 6e74  stall esdbclient
-00001b60: 0a0a 2323 2320 5769 7468 2050 6f65 7472  ..### With Poetr
-00001b70: 790a 0a59 6f75 2063 616e 2075 7365 2050  y..You can use P
-00001b80: 6f65 7472 7920 746f 2061 6464 2074 6869  oetry to add thi
-00001b90: 7320 7061 636b 6167 6520 746f 2079 6f75  s package to you
-00001ba0: 7220 7079 7072 6f6a 6563 742e 746f 6d6c  r pyproject.toml
-00001bb0: 2061 6e64 2069 6e73 7461 6c6c 2069 742e   and install it.
-00001bc0: 0a0a 2020 2020 2420 706f 6574 7279 2061  ..    $ poetry a
-00001bd0: 6464 2065 7364 6263 6c69 656e 740a 0a23  dd esdbclient..#
-00001be0: 2320 4576 656e 7453 746f 7265 4442 2073  # EventStoreDB s
-00001bf0: 6572 7665 720a 0a54 6865 2045 7665 6e74  erver..The Event
-00001c00: 5374 6f72 6544 4220 7365 7276 6572 2063  StoreDB server c
-00001c10: 616e 2062 6520 7275 6e20 6c6f 6361 6c6c  an be run locall
-00001c20: 7920 7573 696e 6720 7468 6520 6f66 6669  y using the offi
-00001c30: 6369 616c 2044 6f63 6b65 7220 636f 6e74  cial Docker cont
-00001c40: 6169 6e65 7220 696d 6167 652e 0a0a 2323  ainer image...##
-00001c50: 2320 5275 6e20 636f 6e74 6169 6e65 720a  # Run container.
-00001c60: 0a46 6f72 2064 6576 656c 6f70 6d65 6e74  .For development
-00001c70: 2c20 796f 7520 6361 6e20 7275 6e20 6120  , you can run a 
-00001c80: 2273 6563 7572 6522 2045 7665 6e74 5374  "secure" EventSt
-00001c90: 6f72 6544 4220 7365 7276 6572 2075 7369  oreDB server usi
-00001ca0: 6e67 2074 6865 2066 6f6c 6c6f 7769 6e67  ng the following
-00001cb0: 2063 6f6d 6d61 6e64 2e0a 0a20 2020 2024   command...    $
-00001cc0: 2064 6f63 6b65 7220 7275 6e20 2d64 202d   docker run -d -
-00001cd0: 2d6e 616d 6520 6576 656e 7473 746f 7265  -name eventstore
-00001ce0: 6462 2d73 6563 7572 6520 2d69 7420 2d70  db-secure -it -p
-00001cf0: 2032 3131 333a 3231 3133 202d 2d65 6e76   2113:2113 --env
-00001d00: 2022 484f 4d45 3d2f 746d 7022 2065 7665   "HOME=/tmp" eve
-00001d10: 6e74 7374 6f72 652f 6576 656e 7473 746f  ntstore/eventsto
-00001d20: 7265 3a32 312e 3130 2e39 2d62 7573 7465  re:21.10.9-buste
-00001d30: 722d 736c 696d 202d 2d64 6576 0a0a 5468  r-slim --dev..Th
-00001d40: 6520 636f 6e6e 6563 7469 6f6e 2073 7472  e connection str
-00001d50: 696e 6720 666f 7220 7468 6973 2022 7365  ing for this "se
-00001d60: 6375 7265 2220 4576 656e 7453 746f 7265  cure" EventStore
-00001d70: 4442 2073 6572 7665 7220 776f 756c 6420  DB server would 
-00001d80: 6265 3a0a 0a20 2020 2065 7364 623a 2f2f  be:..    esdb://
-00001d90: 6164 6d69 6e3a 6368 616e 6765 6974 406c  admin:changeit@l
-00001da0: 6f63 616c 686f 7374 3a32 3131 330a 0a41  ocalhost:2113..A
-00001db0: 7320 7765 2077 696c 6c20 7365 652c 2074  s we will see, t
-00001dc0: 6865 2063 6c69 656e 7420 6e65 6564 7320  he client needs 
-00001dd0: 616e 2045 7665 6e74 5374 6f72 6544 4220  an EventStoreDB 
-00001de0: 636f 6e6e 6563 7469 6f6e 2073 7472 696e  connection strin
-00001df0: 6720 6173 2074 6865 2076 616c 7565 206f  g as the value o
-00001e00: 660a 6974 7320 6075 7269 6020 636f 6e73  f.its `uri` cons
-00001e10: 7472 7563 746f 7220 6172 6775 6d65 6e74  tructor argument
-00001e20: 2e0a 0a54 6f20 636f 6e6e 6563 7420 746f  ...To connect to
-00001e30: 2061 2022 7365 6375 7265 2220 7365 7276   a "secure" serv
-00001e40: 6572 2c20 796f 7520 7769 6c6c 2075 7375  er, you will usu
-00001e50: 7361 6c6c 7920 6e65 6564 2074 6f20 696e  sally need to in
-00001e60: 636c 7564 6520 6120 2275 7365 726e 616d  clude a "usernam
-00001e70: 6522 0a61 6e64 2061 2022 7061 7373 776f  e".and a "passwo
-00001e80: 7264 2220 696e 2074 6865 2063 6f6e 6e65  rd" in the conne
-00001e90: 6374 696f 6e20 7374 7269 6e67 2c20 736f  ction string, so
-00001ea0: 2074 6861 7420 7468 6520 7365 7276 6572   that the server
-00001eb0: 2063 616e 2061 7574 6865 6e74 6963 6174   can authenticat
-00001ec0: 6520 7468 650a 636c 6965 6e74 2e20 5468  e the.client. Th
-00001ed0: 6520 6465 6661 756c 7420 7573 6572 6e61  e default userna
-00001ee0: 6d65 2069 7320 2261 646d 696e 2220 616e  me is "admin" an
-00001ef0: 6420 7468 6520 6465 6661 756c 7420 7061  d the default pa
-00001f00: 7373 776f 7264 2069 7320 2263 6861 6e67  ssword is "chang
-00001f10: 6569 7422 2e0a 0a53 6565 2074 6865 204e  eit"...See the N
-00001f20: 6f74 6573 2073 6563 7469 6f6e 2062 656c  otes section bel
-00001f30: 6f77 2066 6f72 206d 6f72 6520 696e 666f  ow for more info
-00001f40: 726d 6174 696f 6e20 6162 6f75 7420 4576  rmation about Ev
-00001f50: 656e 7453 746f 7265 4442 2063 6f6e 6e65  entStoreDB conne
-00001f60: 6374 696f 6e20 7374 7269 6e67 732e 0a0a  ction strings...
-00001f70: 546f 2063 6f6e 6e65 6374 2074 6f20 6120  To connect to a 
-00001f80: 2273 6563 7572 6522 2073 6572 7665 722c  "secure" server,
-00001f90: 2079 6f75 2077 696c 6c20 616c 736f 206e   you will also n
-00001fa0: 6565 6420 616e 2053 534c 2f54 4c53 2063  eed an SSL/TLS c
-00001fb0: 6572 7469 6669 6361 7465 2c20 736f 2074  ertificate, so t
-00001fc0: 6861 7420 7468 650a 636c 6965 6e74 2063  hat the.client c
-00001fd0: 616e 2061 7574 6865 6e74 6963 6174 6520  an authenticate 
-00001fe0: 7468 6520 7365 7276 6572 2e20 466f 7220  the server. For 
-00001ff0: 6465 7665 6c6f 706d 656e 742c 2079 6f75  development, you
-00002000: 2063 616e 2065 6974 6865 7220 7573 6520   can either use 
-00002010: 7468 6520 5353 4c2f 544c 530a 6365 7274  the SSL/TLS.cert
-00002020: 6966 6963 6174 6520 6f66 2074 6865 2063  ificate of the c
-00002030: 6572 7469 6669 6361 7465 2061 7574 686f  ertificate autho
-00002040: 7269 7479 2075 7365 6420 746f 2063 7265  rity used to cre
-00002050: 6174 6520 7468 6520 7365 7276 6572 2773  ate the server's
-00002060: 2063 6572 7469 6669 6361 7465 2c20 6f72   certificate, or
-00002070: 0a77 6865 6e20 7573 696e 6720 6120 7369  .when using a si
-00002080: 6e67 6c65 2d6e 6f64 6520 636c 7573 7465  ngle-node cluste
-00002090: 722c 2079 6f75 2063 616e 2067 6574 2074  r, you can get t
-000020a0: 6865 2063 6572 7469 6669 6361 7465 2066  he certificate f
-000020b0: 726f 6d20 7468 6520 7365 7276 6572 2e20  rom the server. 
-000020c0: 596f 7520 6361 6e0a 6765 7420 7468 6520  You can.get the 
-000020d0: 7365 7276 6572 2063 6572 7469 6669 6361  server certifica
-000020e0: 7465 2077 6974 6820 7468 6520 666f 6c6c  te with the foll
-000020f0: 6f77 696e 6720 5079 7468 6f6e 2063 6f64  owing Python cod
-00002100: 652e 0a0a 4173 2077 6520 7769 6c6c 2073  e...As we will s
-00002110: 6565 2c20 7768 656e 2063 6f6e 6e65 6374  ee, when connect
-00002120: 696e 6720 746f 2061 2022 7365 6375 7265  ing to a "secure
-00002130: 2220 7365 7276 6572 2c20 7468 6520 636c  " server, the cl
-00002140: 6965 6e74 206e 6565 6473 2061 6e20 5353  ient needs an SS
-00002150: 4c2f 544c 530a 6365 7274 6966 6963 6174  L/TLS.certificat
-00002160: 6520 6173 2074 6865 2076 616c 7565 206f  e as the value o
-00002170: 6620 6974 7320 6072 6f6f 745f 6365 7274  f its `root_cert
-00002180: 6966 6963 6174 6573 6020 636f 6e73 7472  ificates` constr
-00002190: 7563 746f 7220 6172 6775 6d65 6e74 2e0a  uctor argument..
-000021a0: 0a0a 6060 6070 7974 686f 6e0a 696d 706f  ..```python.impo
-000021b0: 7274 2073 736c 0a0a 0a73 6572 7665 725f  rt ssl...server_
-000021c0: 6365 7274 6966 6963 6174 6520 3d20 7373  certificate = ss
-000021d0: 6c2e 6765 745f 7365 7276 6572 5f63 6572  l.get_server_cer
-000021e0: 7469 6669 6361 7465 2861 6464 723d 2827  tificate(addr=('
-000021f0: 6c6f 6361 6c68 6f73 7427 2c20 3231 3133  localhost', 2113
-00002200: 2929 0a60 6060 0a0a 596f 7520 6361 6e20  )).```..You can 
-00002210: 616c 736f 2073 7461 7274 2061 6e20 2269  also start an "i
-00002220: 6e73 6563 7572 6522 2073 6572 7665 7220  nsecure" server 
-00002230: 7573 696e 6720 7468 6520 666f 6c6c 6f77  using the follow
-00002240: 696e 6720 636f 6d6d 616e 642e 0a0a 2020  ing command...  
-00002250: 2020 2420 646f 636b 6572 2072 756e 202d    $ docker run -
-00002260: 6420 2d2d 6e61 6d65 2065 7665 6e74 7374  d --name eventst
-00002270: 6f72 6564 622d 696e 7365 6375 7265 202d  oredb-insecure -
-00002280: 6974 202d 7020 3231 3134 3a32 3131 3320  it -p 2114:2113 
-00002290: 6576 656e 7473 746f 7265 2f65 7665 6e74  eventstore/event
-000022a0: 7374 6f72 653a 3231 2e31 302e 392d 6275  store:21.10.9-bu
-000022b0: 7374 6572 2d73 6c69 6d20 2d2d 696e 7365  ster-slim --inse
-000022c0: 6375 7265 0a0a 5468 6520 636f 6e6e 6563  cure..The connec
-000022d0: 7469 6f6e 2073 7472 696e 6720 5552 4920  tion string URI 
-000022e0: 666f 7220 7468 6973 2022 696e 7365 6375  for this "insecu
-000022f0: 7265 2220 7365 7276 6572 2077 6f75 6c64  re" server would
-00002300: 2062 653a 0a0a 2020 2020 6573 6462 3a2f   be:..    esdb:/
-00002310: 2f6c 6f63 616c 686f 7374 3a32 3131 343f  /localhost:2114?
-00002320: 546c 733d 6661 6c73 650a 0a41 7320 7765  Tls=false..As we
-00002330: 2077 696c 6c20 7365 652c 2077 6865 6e20   will see, when 
-00002340: 636f 6e6e 6563 7469 6e67 2074 6f20 616e  connecting to an
-00002350: 2022 696e 7365 6375 7265 2220 7365 7276   "insecure" serv
-00002360: 6572 2c20 7468 6572 6520 6973 206e 6f20  er, there is no 
-00002370: 6e65 6564 2074 6f20 696e 636c 7564 650a  need to include.
-00002380: 6120 2275 7365 726e 616d 6522 2061 6e64  a "username" and
-00002390: 2061 2022 7061 7373 776f 7264 2220 696e   a "password" in
-000023a0: 2074 6865 2063 6f6e 6e65 6374 696f 6e20   the connection 
-000023b0: 7374 7269 6e67 2e20 4966 2079 6f75 2064  string. If you d
-000023c0: 6f2c 2074 6865 7365 2076 616c 7565 7320  o, these values 
-000023d0: 7769 6c6c 0a62 6520 6967 6e6f 7265 6420  will.be ignored 
-000023e0: 6279 2074 6865 2063 6c69 656e 742c 2073  by the client, s
-000023f0: 6f20 7468 6174 2074 6865 7920 7769 6c6c  o that they will
-00002400: 206e 6f74 2062 6520 7365 6e74 2074 6f20   not be sent to 
-00002410: 7468 6520 7365 7276 6572 206f 7665 7220  the server over 
-00002420: 616e 0a69 6e73 6563 7572 6520 6368 616e  an.insecure chan
-00002430: 6e65 6c2e 0a0a 506c 6561 7365 206e 6f74  nel...Please not
-00002440: 652c 2074 6865 2022 696e 7365 6375 7265  e, the "insecure
-00002450: 2220 636f 6e6e 6563 7469 6f6e 2073 7472  " connection str
-00002460: 696e 6720 7573 6573 2074 6865 2071 7565  ing uses the que
-00002470: 7279 2073 7472 696e 6720 603f 546c 733d  ry string `?Tls=
-00002480: 6661 6c73 6560 2e20 5468 650a 7661 6c75  false`. The.valu
-00002490: 6520 6f66 2074 6869 7320 6669 656c 6420  e of this field 
-000024a0: 6973 2062 7920 6465 6661 756c 7420 6074  is by default `t
-000024b0: 7275 6560 2e20 5365 6520 7468 6520 4e6f  rue`. See the No
-000024c0: 7465 7320 7365 6374 696f 6e20 6265 6c6f  tes section belo
-000024d0: 7720 666f 7220 6d6f 7265 0a69 6e66 6f72  w for more.infor
-000024e0: 6d61 7469 6f6e 2061 626f 7574 2045 7665  mation about Eve
-000024f0: 6e74 5374 6f72 6544 4220 636f 6e6e 6563  ntStoreDB connec
-00002500: 7469 6f6e 2073 7472 696e 6773 2061 6e64  tion strings and
-00002510: 2074 6865 2066 6965 6c64 7320 7468 6174   the fields that
-00002520: 2063 616e 2062 6520 7573 6564 0a69 6e20   can be used.in 
-00002530: 7468 6520 7175 6572 7920 7374 7269 6e67  the query string
-00002540: 2074 6f20 7370 6563 6966 7920 636f 6e6e   to specify conn
-00002550: 6563 7469 6f6e 206f 7074 696f 6e73 2e0a  ection options..
-00002560: 0a23 2323 2053 746f 7020 636f 6e74 6169  .### Stop contai
-00002570: 6e65 720a 0a54 6f20 7374 6f70 2061 6e64  ner..To stop and
-00002580: 2072 656d 6f76 6520 7468 6520 2273 6563   remove the "sec
-00002590: 7572 6522 2063 6f6e 7461 696e 6572 2c20  ure" container, 
-000025a0: 7573 6520 7468 6520 666f 6c6c 6f77 696e  use the followin
-000025b0: 6720 446f 636b 6572 2063 6f6d 6d61 6e64  g Docker command
-000025c0: 732e 0a0a 2020 2020 2420 646f 636b 6572  s...    $ docker
-000025d0: 2073 746f 7020 6576 656e 7473 746f 7265   stop eventstore
-000025e0: 6462 2d73 6563 7572 650a 0924 2064 6f63  db-secure..$ doc
-000025f0: 6b65 7220 726d 2065 7665 6e74 7374 6f72  ker rm eventstor
-00002600: 6564 622d 7365 6375 7265 0a0a 546f 2073  edb-secure..To s
-00002610: 746f 7020 616e 6420 7265 6d6f 7665 2074  top and remove t
-00002620: 6865 2022 696e 7365 6375 7265 2220 636f  he "insecure" co
-00002630: 6e74 6169 6e65 722c 2075 7365 2074 6865  ntainer, use the
-00002640: 2066 6f6c 6c6f 7769 6e67 2044 6f63 6b65   following Docke
-00002650: 7220 636f 6d6d 616e 6473 2e0a 0a20 2020  r commands...   
-00002660: 2024 2064 6f63 6b65 7220 7374 6f70 2065   $ docker stop e
-00002670: 7665 6e74 7374 6f72 6564 622d 696e 7365  ventstoredb-inse
-00002680: 6375 7265 0a09 2420 646f 636b 6572 2072  cure..$ docker r
-00002690: 6d20 6576 656e 7473 746f 7265 6462 2d69  m eventstoredb-i
-000026a0: 6e73 6563 7572 650a 0a0a 2323 2045 7665  nsecure...## Eve
-000026b0: 6e74 5374 6f72 6544 4220 636c 6965 6e74  ntStoreDB client
-000026c0: 0a0a 5468 6973 2045 7665 6e74 5374 6f72  ..This EventStor
-000026d0: 6544 4220 636c 6965 6e74 2069 7320 696d  eDB client is im
-000026e0: 706c 656d 656e 7465 6420 696e 2074 6865  plemented in the
-000026f0: 2060 6573 6462 636c 6965 6e74 6020 7061   `esdbclient` pa
-00002700: 636b 6167 6520 7769 7468 0a74 6865 2060  ckage with.the `
-00002710: 4553 4442 436c 6965 6e74 6020 636c 6173  ESDBClient` clas
-00002720: 732e 0a0a 2323 2320 496d 706f 7274 2063  s...### Import c
-00002730: 6c61 7373 0a0a 5468 6520 6045 5344 4243  lass..The `ESDBC
-00002740: 6c69 656e 7460 2063 6c61 7373 2063 616e  lient` class can
-00002750: 2062 6520 696d 706f 7274 6564 2066 726f   be imported fro
-00002760: 6d20 7468 6520 6065 7364 6263 6c69 656e  m the `esdbclien
-00002770: 7460 2070 6163 6b61 6765 2e0a 0a60 6060  t` package...```
-00002780: 7079 7468 6f6e 0a66 726f 6d20 6573 6462  python.from esdb
-00002790: 636c 6965 6e74 2069 6d70 6f72 7420 4553  client import ES
-000027a0: 4442 436c 6965 6e74 0a60 6060 0a0a 2323  DBClient.```..##
-000027b0: 2320 436f 6e73 7472 7563 7420 636c 6965  # Construct clie
-000027c0: 6e74 0a0a 5468 6520 6045 5344 4243 6c69  nt..The `ESDBCli
-000027d0: 656e 7460 2063 6c61 7373 2063 616e 2062  ent` class can b
-000027e0: 6520 636f 6e73 7472 7563 7465 6420 7769  e constructed wi
-000027f0: 7468 2061 2060 7572 6960 2061 7267 756d  th a `uri` argum
-00002800: 656e 742c 2077 6869 6368 2069 7320 7265  ent, which is re
-00002810: 7175 6972 6564 2e0a 416e 642c 2074 6f20  quired..And, to 
-00002820: 636f 6e6e 6563 7420 746f 2061 2022 7365  connect to a "se
-00002830: 6375 7265 2220 4576 656e 7453 746f 7265  cure" EventStore
-00002840: 4442 2073 6572 7665 722c 2074 6865 206f  DB server, the o
-00002850: 7074 696f 6e61 6c20 6072 6f6f 745f 6365  ptional `root_ce
-00002860: 7274 6966 6963 6174 6573 600a 6172 6775  rtificates`.argu
-00002870: 6d65 6e74 2069 7320 616c 736f 2072 6571  ment is also req
-00002880: 7569 7265 642e 0a0a 5468 6520 6075 7269  uired...The `uri
-00002890: 6020 6172 6775 6d65 6e74 2069 7320 6578  ` argument is ex
-000028a0: 7065 6374 6564 2074 6f20 6265 2061 6e20  pected to be an 
-000028b0: 4576 656e 7453 746f 7265 4442 2063 6f6e  EventStoreDB con
-000028c0: 6e65 6374 696f 6e20 7374 7269 6e67 2055  nection string U
-000028d0: 5249 2074 6861 740a 636f 6e66 6f72 6d73  RI that.conforms
-000028e0: 2077 6974 6820 7468 6520 7374 616e 6461   with the standa
-000028f0: 7264 2045 7665 6e74 5374 6f72 6544 4220  rd EventStoreDB 
-00002900: 2265 7364 6222 206f 7220 2265 7364 622b  "esdb" or "esdb+
-00002910: 6469 7363 6f76 6572 2220 5552 4920 7363  discover" URI sc
-00002920: 6865 6d65 732e 2054 6865 0a73 796e 7461  hemes. The.synta
-00002930: 7820 616e 6420 7365 6d61 6e74 6963 7320  x and semantics 
-00002940: 6f66 2045 7665 6e74 5374 6f72 6544 4220  of EventStoreDB 
-00002950: 636f 6e6e 6563 7469 6f6e 2073 7472 696e  connection strin
-00002960: 6773 2061 7265 2065 7870 6c61 696e 6564  gs are explained
-00002970: 2069 6e20 7468 6520 4e6f 7465 730a 7365   in the Notes.se
-00002980: 6374 696f 6e20 6265 6c6f 772e 0a0a 466f  ction below...Fo
-00002990: 7220 6578 616d 706c 652c 2074 6865 2066  r example, the f
-000029a0: 6f6c 6c6f 7769 6e67 2063 6f6e 6e65 6374  ollowing connect
-000029b0: 696f 6e20 7374 7269 6e67 2073 7065 6369  ion string speci
-000029c0: 6669 6573 2074 6861 7420 7468 6520 636c  fies that the cl
-000029d0: 6965 6e74 2073 686f 756c 640a 6174 7465  ient should.atte
-000029e0: 6d70 7420 746f 2063 7265 6165 2061 2022  mpt to creae a "
-000029f0: 7365 6375 7265 2220 636f 6e6e 6563 7469  secure" connecti
-00002a00: 6f6e 2074 6f20 706f 7274 2032 3131 3320  on to port 2113 
-00002a10: 6f6e 2022 6c6f 6361 6c68 6f73 7422 2c20  on "localhost", 
-00002a20: 616e 6420 7573 6520 7468 650a 6372 6564  and use the.cred
-00002a30: 656e 7469 616c 7320 2275 7365 726e 616d  entials "usernam
-00002a40: 6522 2061 6e64 2022 7061 7373 776f 7264  e" and "password
-00002a50: 2220 7768 656e 206d 616b 696e 6720 6361  " when making ca
-00002a60: 6c6c 7320 746f 2074 6865 2073 6572 7665  lls to the serve
-00002a70: 722e 0a0a 2020 2020 6573 6462 3a2f 2f75  r...    esdb://u
-00002a80: 7365 726e 616d 653a 7061 7373 776f 7264  sername:password
-00002a90: 406c 6f63 616c 686f 7374 3a32 3131 330a  @localhost:2113.
-00002aa0: 0a54 6865 2063 6c69 656e 7420 6d75 7374  .The client must
-00002ab0: 2062 6520 636f 6e66 6967 7572 6564 2074   be configured t
-00002ac0: 6f20 6372 6561 7465 2061 2022 7365 6375  o create a "secu
-00002ad0: 7265 2220 636f 6e6e 6563 7469 6f6e 2074  re" connection t
-00002ae0: 6f20 6120 2273 6563 7572 6522 2073 6572  o a "secure" ser
-00002af0: 7665 722c 0a61 6e64 2061 6e20 2269 6e73  ver,.and an "ins
-00002b00: 6563 7572 6522 2063 6f6e 6e65 6374 696f  ecure" connectio
-00002b10: 6e20 746f 2061 6e20 2269 6e73 6563 7572  n to an "insecur
-00002b20: 6522 2073 6572 7665 722e 2042 7920 6465  e" server. By de
-00002b30: 6661 756c 742c 2074 6865 2063 6c69 656e  fault, the clien
-00002b40: 7420 7769 6c6c 0a61 7474 656d 7074 2074  t will.attempt t
-00002b50: 6f20 6372 6561 7465 2061 2022 7365 6375  o create a "secu
-00002b60: 7265 2220 636f 6e6e 6563 7469 6f6e 2e20  re" connection. 
-00002b70: 416e 6420 736f 2c20 7768 656e 2075 7369  And so, when usi
-00002b80: 6e67 2061 6e20 2269 6e73 6563 7572 6522  ng an "insecure"
-00002b90: 2073 6572 7665 722c 0a74 6865 2063 6f6e   server,.the con
-00002ba0: 6e65 6374 696f 6e20 7374 7269 6e67 206d  nection string m
-00002bb0: 7573 7420 7370 6563 6966 7920 7468 6174  ust specify that
-00002bc0: 2074 6865 2063 6c69 656e 7420 7368 6f75   the client shou
-00002bd0: 6c64 2061 7474 656d 7074 2074 6f20 6d61  ld attempt to ma
-00002be0: 6b65 2061 6e20 2269 6e73 6563 7572 6522  ke an "insecure"
-00002bf0: 0a63 6f6e 6e65 6374 696f 6e2e 0a0a 5468  .connection...Th
-00002c00: 6520 666f 6c6c 6f77 696e 6720 636f 6e6e  e following conn
-00002c10: 6563 7469 6f6e 2073 7472 696e 6720 7370  ection string sp
-00002c20: 6563 6966 6965 7320 7468 6174 2074 6865  ecifies that the
-00002c30: 2063 6c69 656e 7420 7368 6f75 6c64 0a61   client should.a
-00002c40: 7474 656d 7074 2074 6f20 6372 6561 6520  ttempt to creae 
-00002c50: 616e 2022 696e 7365 6375 7265 2220 636f  an "insecure" co
-00002c60: 6e6e 6563 7469 6f6e 2074 6f20 706f 7274  nnection to port
-00002c70: 2032 3131 3420 6f6e 2022 6c6f 6361 6c68   2114 on "localh
-00002c80: 6f73 7422 2e0a 5768 656e 2063 6f6e 6e65  ost"..When conne
-00002c90: 6374 696e 6720 746f 2061 6e20 2269 6e73  cting to an "ins
-00002ca0: 6563 7572 6522 2073 6572 7665 722c 2074  ecure" server, t
-00002cb0: 6865 2063 6c69 656e 7420 7769 6c6c 2069  he client will i
-00002cc0: 676e 6f72 6520 616e 790a 7573 6572 6e61  gnore any.userna
-00002cd0: 6d65 2061 6e64 2070 6173 7377 6f72 6420  me and password 
-00002ce0: 696e 666f 726d 6174 696f 6e20 696e 636c  information incl
-00002cf0: 7564 6564 2069 6e20 7468 6520 636f 6e6e  uded in the conn
-00002d00: 6563 7469 6f6e 2073 7472 696e 672e 0a0a  ection string...
-00002d10: 2020 2020 6573 6462 3a2f 2f6c 6f63 616c      esdb://local
-00002d20: 686f 7374 3a32 3131 343f 546c 733d 6661  host:2114?Tls=fa
-00002d30: 6c73 650a 0a55 6e6c 6573 7320 7468 6520  lse..Unless the 
-00002d40: 636f 6e6e 6563 7469 6f6e 2073 7472 696e  connection strin
-00002d50: 6720 5552 4920 696e 636c 7564 6573 2074  g URI includes t
-00002d60: 6865 2066 6965 6c64 2d76 616c 7565 2060  he field-value `
-00002d70: 546c 733d 6661 6c73 6560 2069 6e0a 7468  Tls=false` in.th
-00002d80: 6520 7175 6572 7920 7374 7269 6e67 2c20  e query string, 
-00002d90: 7468 6520 6072 6f6f 745f 6365 7274 6966  the `root_certif
-00002da0: 6963 6174 6573 6020 636f 6e73 7472 7563  icates` construc
-00002db0: 746f 7220 6172 6775 6d65 6e74 2069 7320  tor argument is 
-00002dc0: 616c 736f 2072 6571 7569 7265 642e 0a0a  also required...
-00002dd0: 5768 656e 2063 6f6e 6e65 6374 696e 6720  When connecting 
-00002de0: 746f 2061 2022 7365 6375 7265 2220 7365  to a "secure" se
-00002df0: 7276 6572 2c20 7468 6520 6072 6f6f 745f  rver, the `root_
-00002e00: 6365 7274 6966 6963 6174 6573 6020 6172  certificates` ar
-00002e10: 6775 6d65 6e74 2069 7320 6578 7065 6374  gument is expect
-00002e20: 6564 2074 6f0a 6265 2061 2050 7974 686f  ed to.be a Pytho
-00002e30: 6e20 6073 7472 6020 636f 6e74 6169 6e69  n `str` containi
-00002e40: 6e67 2050 454d 2065 6e63 6f64 6564 2053  ng PEM encoded S
-00002e50: 534c 2f54 4c53 2072 6f6f 7420 6365 7274  SL/TLS root cert
-00002e60: 6966 6963 6174 6573 2c20 616e 6420 6974  ificates, and it
-00002e70: 2069 7320 7573 6564 2066 6f72 0a61 7574   is used for.aut
-00002e80: 6865 6e74 6963 6174 696e 6720 7468 6520  henticating the 
-00002e90: 7365 7276 6572 2074 6f20 7468 6520 636c  server to the cl
-00002ea0: 6965 6e74 2e20 5468 6973 2076 616c 7565  ient. This value
-00002eb0: 2069 7320 7061 7373 6564 2064 6972 6563   is passed direc
-00002ec0: 746c 7920 746f 0a60 6772 7063 2e73 736c  tly to.`grpc.ssl
-00002ed0: 5f63 6861 6e6e 656c 5f63 7265 6465 6e74  _channel_credent
-00002ee0: 6961 6c73 2829 602e 2049 7420 6973 2063  ials()`. It is c
-00002ef0: 6f6d 6d6f 6e6c 7920 7468 6520 6365 7274  ommonly the cert
-00002f00: 6966 6963 6174 6520 6f66 2074 6865 2063  ificate of the c
-00002f10: 6572 7469 6669 6361 7465 0a61 7574 686f  ertificate.autho
-00002f20: 7269 7479 2074 6861 7420 7761 7320 7265  rity that was re
-00002f30: 7370 6f6e 7369 626c 6520 666f 7220 6765  sponsible for ge
-00002f40: 6e65 7261 7469 6e67 2074 6865 2053 534c  nerating the SSL
-00002f50: 2f54 4c53 2063 6572 7469 6669 6361 7465  /TLS certificate
-00002f60: 2075 7365 6420 6279 2074 6865 0a45 7665   used by the.Eve
-00002f70: 6e74 5374 6f72 6544 4220 7365 7276 6572  ntStoreDB server
-00002f80: 2e20 4275 742c 2061 6c74 6572 6e61 7469  . But, alternati
-00002f90: 7665 6c79 2066 6f72 2064 6576 656c 6f70  vely for develop
-00002fa0: 6d65 6e74 2c20 796f 7520 6361 6e20 7573  ment, you can us
-00002fb0: 6520 7468 6520 7365 7276 6572 2773 0a63  e the server's.c
-00002fc0: 6572 7469 6669 6361 7465 2069 7473 656c  ertificate itsel
-00002fd0: 662e 0a0a 496e 2074 6865 2065 7861 6d70  f...In the examp
-00002fe0: 6c65 2062 656c 6f77 2c20 7468 6520 636f  le below, the co
-00002ff0: 6e73 7472 7563 746f 7220 6172 6775 6d65  nstructor argume
-00003000: 6e74 2076 616c 7565 7320 6172 6520 7461  nt values are ta
-00003010: 6b65 6e20 6672 6f6d 2074 6865 206f 7065  ken from the ope
-00003020: 7261 7469 6e67 0a73 7973 7465 6d20 656e  rating.system en
-00003030: 7669 726f 6e6d 656e 742e 2054 6869 7320  vironment. This 
-00003040: 6973 2061 2074 7970 6963 616c 2061 7272  is a typical arr
-00003050: 616e 6765 6d65 6e74 2069 6e20 6120 7072  angement in a pr
-00003060: 6f64 7563 7469 6f6e 2065 6e76 6972 6f6e  oduction environ
-00003070: 6d65 6e74 2e0a 0a60 6060 7079 7468 6f6e  ment...```python
-00003080: 0a69 6d70 6f72 7420 6f73 0a0a 636c 6965  .import os..clie
-00003090: 6e74 203d 2045 5344 4243 6c69 656e 7428  nt = ESDBClient(
-000030a0: 0a20 2020 2075 7269 3d6f 732e 6765 7465  .    uri=os.gete
-000030b0: 6e76 2822 4553 4442 5f55 5249 2229 2c0a  nv("ESDB_URI"),.
-000030c0: 2020 2020 726f 6f74 5f63 6572 7469 6669      root_certifi
-000030d0: 6361 7465 733d 6f73 2e67 6574 656e 7628  cates=os.getenv(
-000030e0: 2245 5344 425f 524f 4f54 5f43 4552 5449  "ESDB_ROOT_CERTI
-000030f0: 4649 4341 5445 5322 292c 0a29 0a60 6060  FICATES"),.).```
-00003100: 0a0a 0a23 2320 5374 7265 616d 730a 0a49  ...## Streams..I
-00003110: 6e20 4576 656e 7453 746f 7265 4442 2c20  n EventStoreDB, 
-00003120: 6120 2273 7472 6561 6d22 2069 7320 6120  a "stream" is a 
-00003130: 7365 7175 656e 6365 206f 6620 7265 636f  sequence of reco
-00003140: 7264 6564 2065 7665 6e74 7320 7468 6174  rded events that
-00003150: 2061 6c6c 2068 6176 650a 7468 6520 7361   all have.the sa
-00003160: 6d65 2022 7374 7265 616d 206e 616d 6522  me "stream name"
-00003170: 2e20 5468 6572 6520 7769 6c6c 206e 6f72  . There will nor
-00003180: 6d61 6c6c 7920 6265 206d 616e 7920 7374  mally be many st
-00003190: 7265 616d 7320 696e 2061 2064 6174 6162  reams in a datab
-000031a0: 6173 652e 0a45 6163 6820 7265 636f 7264  ase..Each record
-000031b0: 6564 2065 7665 6e74 2068 6173 2061 2022  ed event has a "
-000031c0: 7374 7265 616d 2070 6f73 6974 696f 6e22  stream position"
-000031d0: 2069 6e20 6974 7320 7374 7265 616d 2c20   in its stream, 
-000031e0: 616e 6420 6120 2263 6f6d 6d69 7420 706f  and a "commit po
-000031f0: 7369 7469 6f6e 220a 696e 2074 6865 2064  sition".in the d
-00003200: 6174 6162 6173 652e 2054 6865 2073 7472  atabase. The str
-00003210: 6561 6d20 706f 7369 7469 6f6e 7320 6f66  eam positions of
-00003220: 2074 6865 2072 6563 6f72 6465 6420 6576   the recorded ev
-00003230: 656e 7473 2069 6e20 6120 7374 7265 616d  ents in a stream
-00003240: 2069 7320 6120 6761 706c 6573 730a 7365   is a gapless.se
-00003250: 7175 656e 6365 2073 7461 7274 696e 6720  quence starting 
-00003260: 6672 6f6d 207a 6572 6f2e 2054 6865 2063  from zero. The c
-00003270: 6f6d 6d69 7420 706f 7369 7469 6f6e 7320  ommit positions 
-00003280: 6f66 2074 6865 2072 6563 6f72 6465 6420  of the recorded 
-00003290: 6576 656e 7473 2069 6e20 7468 6520 6461  events in the da
-000032a0: 7461 6261 7365 0a66 6f72 6d20 6120 7365  tabase.form a se
-000032b0: 7175 656e 6365 2074 6861 7420 6973 206e  quence that is n
-000032c0: 6f74 2067 6170 6c65 7373 2e0a 0a54 6865  ot gapless...The
-000032d0: 206d 6574 686f 6473 2060 6170 7065 6e64   methods `append
-000032e0: 5f65 7665 6e74 7328 2960 2c20 6072 6561  _events()`, `rea
-000032f0: 645f 7374 7265 616d 5f65 7665 6e74 7328  d_stream_events(
-00003300: 2960 2061 6e64 2060 7265 6164 5f61 6c6c  )` and `read_all
-00003310: 5f65 7665 6e74 7328 2960 2063 616e 0a62  _events()` can.b
-00003320: 6520 7573 6564 2074 6f20 7265 636f 7264  e used to record
-00003330: 2061 6e64 2072 6561 6420 6576 656e 7473   and read events
-00003340: 2069 6e20 7468 6520 6461 7461 6261 7365   in the database
-00003350: 2e0a 0a23 2323 2041 7070 656e 6420 6576  ...### Append ev
-00003360: 656e 7473 0a0a 5468 6520 6061 7070 656e  ents..The `appen
-00003370: 645f 6576 656e 7473 2829 6020 6d65 7468  d_events()` meth
-00003380: 6f64 2063 616e 2062 6520 7573 6564 2074  od can be used t
-00003390: 6f20 7772 6974 6520 6120 7365 7175 656e  o write a sequen
-000033a0: 6365 206f 6620 6e65 7720 6576 656e 7473  ce of new events
-000033b0: 2061 746f 6d69 6361 6c6c 790a 746f 2061   atomically.to a
-000033c0: 2022 7374 7265 616d 222e 2057 7269 7469   "stream". Writi
-000033d0: 6e67 206e 6577 2065 7665 6e74 7320 6569  ng new events ei
-000033e0: 7468 6572 2063 7265 6174 6573 2061 2073  ther creates a s
-000033f0: 7472 6561 6d2c 206f 7220 6170 7065 6e64  tream, or append
-00003400: 7320 6576 656e 7473 2074 6f20 7468 6520  s events to the 
-00003410: 656e 640a 6f66 2061 2073 7472 6561 6d2e  end.of a stream.
-00003420: 2054 6869 7320 6d65 7468 6f64 2069 7320   This method is 
-00003430: 6964 656d 706f 7465 6e74 2028 7365 6520  idempotent (see 
-00003440: 6265 6c6f 7729 2e0a 0a54 6869 7320 6d65  below)...This me
-00003450: 7468 6f64 2063 616e 2062 6520 7573 6564  thod can be used
-00003460: 2074 6f20 7265 636f 7264 2061 746f 6d69   to record atomi
-00003470: 6361 6c6c 7920 616c 6c20 7468 6520 6e65  cally all the ne
-00003480: 770a 6576 656e 7473 2074 6861 7420 6172  w.events that ar
-00003490: 6520 6765 6e65 7261 7465 6420 7768 656e  e generated when
-000034a0: 2065 7865 6375 7469 6e67 2061 2063 6f6d   executing a com
-000034b0: 6d61 6e64 2069 6e20 616e 2061 7070 6c69  mand in an appli
-000034c0: 6361 7469 6f6e 2e0a 0a54 6872 6565 2061  cation...Three a
-000034d0: 7267 756d 656e 7473 2061 7265 2072 6571  rguments are req
-000034e0: 7569 7265 642c 2060 7374 7265 616d 5f6e  uired, `stream_n
-000034f0: 616d 6560 2c20 6065 7870 6563 7465 645f  ame`, `expected_
-00003500: 706f 7369 7469 6f6e 600a 616e 6420 6065  position`.and `e
-00003510: 7665 6e74 7360 2e0a 0a54 6865 2060 7374  vents`...The `st
-00003520: 7265 616d 5f6e 616d 6560 2061 7267 756d  ream_name` argum
-00003530: 656e 7420 6973 2072 6571 7569 7265 642c  ent is required,
-00003540: 2061 6e64 2069 7320 6578 7065 6374 6564   and is expected
-00003550: 2074 6f20 6265 2061 2050 7974 686f 6e0a   to be a Python.
-00003560: 6073 7472 6020 6f62 6a65 6374 2074 6861  `str` object tha
-00003570: 7420 756e 6971 7565 6c79 2069 6465 6e74  t uniquely ident
-00003580: 6966 6965 7320 7468 6520 7374 7265 616d  ifies the stream
-00003590: 2069 6e20 7468 6520 6461 7461 6261 7365   in the database
-000035a0: 2e0a 0a54 6865 2060 6578 7065 6374 6564  ...The `expected
-000035b0: 5f70 6f73 6974 696f 6e60 2061 7267 756d  _position` argum
-000035c0: 656e 7420 6973 2072 6571 7569 7265 642c  ent is required,
-000035d0: 2069 7320 6578 7065 6374 6564 2074 6f20   is expected to 
-000035e0: 6265 3a20 604e 6f6e 6560 0a69 6620 6576  be: `None`.if ev
-000035f0: 656e 7473 2061 7265 2062 6569 6e67 2077  ents are being w
-00003600: 7269 7474 656e 2074 6f20 6120 6e65 7720  ritten to a new 
-00003610: 7374 7265 616d 2c20 616e 6420 6f74 6865  stream, and othe
-00003620: 7277 6973 6520 616e 2050 7974 686f 6e20  rwise an Python 
-00003630: 6069 6e74 600a 6571 7561 6c20 746f 2074  `int`.equal to t
-00003640: 6865 2070 6f73 6974 696f 6e20 696e 2074  he position in t
-00003650: 6865 2073 7472 6561 6d20 6f66 2074 6865  he stream of the
-00003660: 206c 6173 7420 7265 636f 7264 6564 2065   last recorded e
-00003670: 7665 6e74 2069 6e20 7468 6520 7374 7265  vent in the stre
-00003680: 616d 2e0a 0a54 6865 2060 6576 656e 7473  am...The `events
-00003690: 6020 6172 6775 6d65 6e74 2069 7320 7265  ` argument is re
-000036a0: 7175 6972 6564 2c20 616e 6420 6973 2065  quired, and is e
-000036b0: 7870 6563 7465 6420 746f 2062 6520 6120  xpected to be a 
-000036c0: 7365 7175 656e 6365 206f 6620 6e65 770a  sequence of new.
-000036d0: 6576 656e 7420 6f62 6a65 6374 7320 746f  event objects to
-000036e0: 2062 6520 6170 7065 6e64 6564 2074 6f20   be appended to 
-000036f0: 7468 6520 6e61 6d65 6420 7374 7265 616d  the named stream
-00003700: 2e20 5468 6520 604e 6577 4576 656e 7460  . The `NewEvent`
-00003710: 2063 6c61 7373 2073 686f 756c 640a 6265   class should.be
-00003720: 2075 7365 6420 746f 2063 6f6e 7374 7275   used to constru
-00003730: 6374 206e 6577 2065 7665 6e74 206f 626a  ct new event obj
-00003740: 6563 7473 2028 7365 6520 6265 6c6f 7729  ects (see below)
-00003750: 2e0a 0a54 6869 7320 6d65 7468 6f64 2074  ...This method t
-00003760: 616b 6573 2061 6e20 6f70 7469 6f6e 616c  akes an optional
-00003770: 2060 7469 6d65 6f75 7460 2061 7267 756d   `timeout` argum
-00003780: 656e 742c 2077 6869 6368 2069 7320 6120  ent, which is a 
-00003790: 5079 7468 6f6e 2060 666c 6f61 7460 2074  Python `float` t
-000037a0: 6861 7420 7365 7473 0a61 2064 6561 646c  hat sets.a deadl
-000037b0: 696e 6520 666f 7220 7468 6520 636f 6d70  ine for the comp
-000037c0: 6c65 7469 6f6e 206f 6620 7468 6520 6752  letion of the gR
-000037d0: 5043 206f 7065 7261 7469 6f6e 2e0a 0a53  PC operation...S
-000037e0: 7472 6561 6d73 2061 7265 2063 7265 6174  treams are creat
-000037f0: 6564 2062 7920 7772 6974 696e 6720 6576  ed by writing ev
-00003800: 656e 7473 2e20 5468 6520 636f 7272 6563  ents. The correc
-00003810: 7420 7661 6c75 6520 6f66 2074 6865 2060  t value of the `
+00000000: 6672 6f6d 2065 7364 6263 6c69 656e 7420  from esdbclient 
+00000010: 696d 706f 7274 2041 7379 6e63 696f 4553  import AsyncioES
+00000020: 4442 436c 6965 6e74 2320 5079 7468 6f6e  DBClient# Python
+00000030: 2067 5250 4320 436c 6965 6e74 2066 6f72   gRPC Client for
+00000040: 2045 7665 6e74 5374 6f72 6544 420a 0a54   EventStoreDB..T
+00000050: 6869 7320 5b50 7974 686f 6e20 7061 636b  his [Python pack
+00000060: 6167 655d 2868 7474 7073 3a2f 2f70 7970  age](https://pyp
+00000070: 692e 6f72 672f 7072 6f6a 6563 742f 6573  i.org/project/es
+00000080: 6462 636c 6965 6e74 2f29 2070 726f 7669  dbclient/) provi
+00000090: 6465 7320 6120 5079 7468 6f6e 0a67 5250  des a Python.gRP
+000000a0: 4320 636c 6965 6e74 2066 6f72 205b 4576  C client for [Ev
+000000b0: 656e 7453 746f 7265 4442 5d28 6874 7470  entStoreDB](http
+000000c0: 733a 2f2f 7777 772e 6576 656e 7473 746f  s://www.eventsto
+000000d0: 7265 2e63 6f6d 2f29 2e0a 0a54 6869 7320  re.com/)...This 
+000000e0: 636c 6965 6e74 2068 6173 2062 6565 6e20  client has been 
+000000f0: 6465 7665 6c6f 7065 6420 696e 2063 6f6c  developed in col
+00000100: 6c61 626f 7261 7469 6f6e 2077 6974 6820  laboration with 
+00000110: 7468 6520 4576 656e 7453 746f 7265 4442  the EventStoreDB
+00000120: 0a74 6561 6d2e 2041 6c74 686f 7567 6820  .team. Although 
+00000130: 6e6f 7420 616c 6c20 7468 6520 6665 6174  not all the feat
+00000140: 7572 6573 206f 6620 4576 656e 7453 746f  ures of EventSto
+00000150: 7265 4442 2061 7265 2073 7570 706f 7274  reDB are support
+00000160: 6564 0a62 7920 7468 6973 2063 6c69 656e  ed.by this clien
+00000170: 742c 206d 616e 7920 6f66 2074 6865 206d  t, many of the m
+00000180: 6f73 7420 7573 6566 756c 206f 6e65 7320  ost useful ones 
+00000190: 6172 6520 7072 6573 656e 7465 640a 696e  are presented.in
+000001a0: 2061 6e20 6561 7379 2d74 6f2d 7573 6520   an easy-to-use 
+000001b0: 696e 7465 7266 6163 652e 0a0a 5468 6973  interface...This
+000001c0: 2063 6c69 656e 7420 6861 7320 6265 656e   client has been
+000001d0: 2074 6573 7465 6420 746f 2077 6f72 6b20   tested to work 
+000001e0: 7769 7468 2045 7665 6e74 5374 6f72 6544  with EventStoreD
+000001f0: 4220 4c54 5320 7665 7273 696f 6e73 2032  B LTS versions 2
+00000200: 312e 3130 2c0a 7769 7468 6f75 7420 616e  1.10,.without an
+00000210: 6420 7769 7468 6f75 7420 5353 4c2f 544c  d without SSL/TL
+00000220: 532c 2061 6e64 2077 6974 6820 5079 7468  S, and with Pyth
+00000230: 6f6e 2076 6572 7369 6f6e 7320 332e 3720  on versions 3.7 
+00000240: 746f 2033 2e31 312e 2054 6865 7265 0a69  to 3.11. There.i
+00000250: 7320 3130 3025 2074 6573 7420 636f 7665  s 100% test cove
+00000260: 7261 6765 2e20 5468 6520 636f 6465 2068  rage. The code h
+00000270: 6173 2074 7970 696e 6720 616e 6e6f 7461  as typing annota
+00000280: 7469 6f6e 732c 2063 6865 636b 6564 2077  tions, checked w
+00000290: 6974 6820 6d79 7079 2e0a 5468 6520 636f  ith mypy..The co
+000002a0: 6465 2069 7320 666f 726d 6174 7465 6420  de is formatted 
+000002b0: 7769 7468 2062 6c61 636b 2061 6e64 2069  with black and i
+000002c0: 736f 7274 2c20 616e 6420 6368 6563 6b65  sort, and checke
+000002d0: 6420 7769 7468 2066 6c61 6b65 382e 2050  d with flake8. P
+000002e0: 6f65 7472 790a 6973 2075 7365 6420 666f  oetry.is used fo
+000002f0: 7220 7061 636b 6167 6520 6d61 6e61 6765  r package manage
+00000300: 6d65 6e74 2064 7572 696e 6720 6465 7665  ment during deve
+00000310: 6c6f 706d 656e 742c 2061 6e64 2066 6f72  lopment, and for
+00000320: 2062 7569 6c64 696e 6720 616e 640a 7075   building and.pu
+00000330: 626c 6973 6869 6e67 2064 6973 7472 6962  blishing distrib
+00000340: 7574 696f 6e73 2074 6f20 5b50 7950 495d  utions to [PyPI]
+00000350: 2868 7474 7073 3a2f 2f70 7970 692e 6f72  (https://pypi.or
+00000360: 672f 7072 6f6a 6563 742f 6573 6462 636c  g/project/esdbcl
+00000370: 6965 6e74 2f29 2e0a 0a23 2320 5379 6e6f  ient/)...## Syno
+00000380: 7073 6973 0a0a 5468 6520 6045 5344 4243  psis..The `ESDBC
+00000390: 6c69 656e 7460 2063 6c61 7373 2063 616e  lient` class can
+000003a0: 2062 6520 696d 706f 7274 6564 2066 726f   be imported fro
+000003b0: 6d20 7468 6520 6065 7364 6263 6c69 656e  m the `esdbclien
+000003c0: 7460 2070 6163 6b61 6765 2e0a 0a54 6f20  t` package...To 
+000003d0: 7275 6e20 7468 6520 636c 6965 6e74 2c20  run the client, 
+000003e0: 796f 7520 7769 6c6c 206e 6565 6420 6120  you will need a 
+000003f0: 636f 6e6e 6563 7469 6f6e 2073 7472 696e  connection strin
+00000400: 6720 5552 492e 2041 6e64 2c20 746f 0a63  g URI. And, to.c
+00000410: 6f6e 6e65 6374 2074 6f20 6120 2273 6563  onnect to a "sec
+00000420: 7572 6522 2045 7665 6e74 5374 6f72 6544  ure" EventStoreD
+00000430: 4220 7365 7276 6572 2c20 796f 7520 7769  B server, you wi
+00000440: 6c6c 2061 6c73 6f20 6e65 6564 2061 6e0a  ll also need an.
+00000450: 5353 4c2f 544c 5320 6365 7274 6966 6963  SSL/TLS certific
+00000460: 6174 652e 0a0a 5072 6f62 6162 6c79 2074  ate...Probably t
+00000470: 6865 2074 6872 6565 206d 6f73 7420 7573  he three most us
+00000480: 6566 756c 206d 6574 686f 6473 206f 6620  eful methods of 
+00000490: 6045 5344 4243 6c69 656e 7460 2061 7265  `ESDBClient` are
+000004a0: 3a0a 0a2a 2060 6170 7065 6e64 5f65 7665  :..* `append_eve
+000004b0: 6e74 7328 2960 2054 6869 7320 6d65 7468  nts()` This meth
+000004c0: 6f64 2063 616e 2062 6520 7573 6564 2074  od can be used t
+000004d0: 6f20 7265 636f 7264 0a65 7665 6e74 7320  o record.events 
+000004e0: 696e 2061 2070 6172 7469 6375 6c61 7220  in a particular 
+000004f0: 2273 7472 6561 6d22 2e20 5468 6973 2069  "stream". This i
+00000500: 7320 7573 6566 756c 2077 6865 6e20 6578  s useful when ex
+00000510: 6563 7574 696e 6720 6120 636f 6d6d 616e  ecuting a comman
+00000520: 640a 696e 2061 6e20 6170 706c 6963 6174  d.in an applicat
+00000530: 696f 6e2e 2045 6974 6865 7220 616c 6c20  ion. Either all 
+00000540: 6f72 206e 6f6e 6520 6f66 2074 6865 2065  or none of the e
+00000550: 7665 6e74 7320 7769 6c6c 2062 6520 7265  vents will be re
+00000560: 636f 7264 6564 2e0a 0a2a 2060 7265 6164  corded...* `read
+00000570: 5f73 7472 6561 6d5f 6576 656e 7473 2829  _stream_events()
+00000580: 6020 5468 6973 206d 6574 686f 6420 6361  ` This method ca
+00000590: 6e20 6265 2075 7365 6420 746f 2072 6574  n be used to ret
+000005a0: 7269 6576 6520 616c 6c20 7468 6520 7265  rieve all the re
+000005b0: 636f 7264 6564 0a65 7665 6e74 7320 696e  corded.events in
+000005c0: 2061 2022 7374 7265 616d 222e 2054 6869   a "stream". Thi
+000005d0: 7320 6973 2075 7365 6675 6c20 666f 7220  s is useful for 
+000005e0: 7265 636f 6e73 7472 7563 7469 6e67 2061  reconstructing a
+000005f0: 6e20 6167 6772 6567 6174 6520 6265 666f  n aggregate befo
+00000600: 7265 0a65 7865 6375 7469 6e67 2061 2063  re.executing a c
+00000610: 6f6d 6d61 6e64 2069 6e20 616e 2061 7070  ommand in an app
+00000620: 6c69 6361 7469 6f6e 2e0a 0a2a 2060 7375  lication...* `su
+00000630: 6273 6372 6962 655f 616c 6c5f 6576 656e  bscribe_all_even
+00000640: 7473 2829 6020 5468 6973 206d 6574 686f  ts()` This metho
+00000650: 6420 6361 6e20 6265 2075 7365 6420 746f  d can be used to
+00000660: 2072 6563 6569 7665 2061 6c6c 2072 6563   receive all rec
+00000670: 6f72 6465 640a 6576 656e 7473 2061 6372  orded.events acr
+00000680: 6f73 7320 616c 6c20 2273 7472 6561 6d73  oss all "streams
+00000690: 222e 2054 6869 7320 6973 2075 7365 6675  ". This is usefu
+000006a0: 6c20 696e 2065 7665 6e74 2d70 726f 6365  l in event-proce
+000006b0: 7373 696e 6720 636f 6d70 6f6e 656e 7473  ssing components
+000006c0: 2c0a 616e 6420 7375 7070 6f72 7473 2070  ,.and supports p
+000006d0: 726f 6365 7373 696e 6720 6576 656e 7473  rocessing events
+000006e0: 2077 6974 6820 2265 7861 6374 6c79 2d6f   with "exactly-o
+000006f0: 6e63 6522 2073 656d 616e 7469 6373 2e0a  nce" semantics..
+00000700: 0a54 6865 2065 7861 6d70 6c65 2062 656c  .The example bel
+00000710: 6f77 2075 7365 7320 616e 2022 696e 7365  ow uses an "inse
+00000720: 6375 7265 2220 4576 656e 7453 746f 7265  cure" EventStore
+00000730: 4442 2073 6572 7665 7220 7275 6e6e 696e  DB server runnin
+00000740: 6720 6c6f 6361 6c6c 7920 6f6e 2070 6f72  g locally on por
+00000750: 7420 3231 3134 2e0a 0a60 6060 7079 7468  t 2114...```pyth
+00000760: 6f6e 0a69 6d70 6f72 7420 6573 6462 636c  on.import esdbcl
+00000770: 6965 6e74 2c20 7575 6964 0a0a 0a23 2043  ient, uuid...# C
+00000780: 6f6e 7374 7275 6374 2045 5344 4243 6c69  onstruct ESDBCli
+00000790: 656e 7420 7769 7468 2061 6e20 4576 656e  ent with an Even
+000007a0: 7453 746f 7265 4442 2055 5249 2e0a 0a63  tStoreDB URI...c
+000007b0: 6c69 656e 7420 3d20 6573 6462 636c 6965  lient = esdbclie
+000007c0: 6e74 2e45 5344 4243 6c69 656e 7428 7572  nt.ESDBClient(ur
+000007d0: 693d 2265 7364 623a 2f2f 6c6f 6361 6c68  i="esdb://localh
+000007e0: 6f73 743a 3231 3134 3f54 6c73 3d66 616c  ost:2114?Tls=fal
+000007f0: 7365 2229 0a0a 0a23 2041 7070 656e 6420  se")...# Append 
+00000800: 6576 656e 7473 2074 6f20 6120 6e65 7720  events to a new 
+00000810: 7374 7265 616d 2e0a 0a73 7472 6561 6d5f  stream...stream_
+00000820: 6e61 6d65 203d 2073 7472 2875 7569 642e  name = str(uuid.
+00000830: 7575 6964 3428 2929 0a0a 6576 656e 7431  uuid4())..event1
+00000840: 203d 2065 7364 6263 6c69 656e 742e 4e65   = esdbclient.Ne
+00000850: 7745 7665 6e74 2874 7970 653d 274f 7264  wEvent(type='Ord
+00000860: 6572 4372 6561 7465 6427 2c20 6461 7461  erCreated', data
+00000870: 3d62 2764 6174 6131 2729 0a0a 636c 6965  =b'data1')..clie
+00000880: 6e74 2e61 7070 656e 645f 6576 656e 7473  nt.append_events
+00000890: 280a 2020 2020 7374 7265 616d 5f6e 616d  (.    stream_nam
+000008a0: 653d 7374 7265 616d 5f6e 616d 652c 0a20  e=stream_name,. 
+000008b0: 2020 2065 7870 6563 7465 645f 706f 7369     expected_posi
+000008c0: 7469 6f6e 3d4e 6f6e 652c 0a20 2020 2065  tion=None,.    e
+000008d0: 7665 6e74 733d 5b65 7665 6e74 315d 2c0a  vents=[event1],.
+000008e0: 290a 0a0a 2320 4170 7065 6e64 206d 6f72  )...# Append mor
+000008f0: 6520 6576 656e 7473 2074 6f20 616e 2065  e events to an e
+00000900: 7869 7374 696e 6720 7374 7265 616d 2e0a  xisting stream..
+00000910: 0a65 7665 6e74 3220 3d20 6573 6462 636c  .event2 = esdbcl
+00000920: 6965 6e74 2e4e 6577 4576 656e 7428 7479  ient.NewEvent(ty
+00000930: 7065 3d27 4f72 6465 7255 7064 6174 6564  pe='OrderUpdated
+00000940: 272c 2064 6174 613d 6227 6461 7461 3227  ', data=b'data2'
+00000950: 290a 6576 656e 7433 203d 2065 7364 6263  ).event3 = esdbc
+00000960: 6c69 656e 742e 4e65 7745 7665 6e74 2874  lient.NewEvent(t
+00000970: 7970 653d 274f 7264 6572 4465 6c65 7465  ype='OrderDelete
+00000980: 6427 2c20 6461 7461 3d62 2764 6174 6133  d', data=b'data3
+00000990: 2729 0a0a 636c 6965 6e74 2e61 7070 656e  ')..client.appen
+000009a0: 645f 6576 656e 7473 280a 2020 2020 7374  d_events(.    st
+000009b0: 7265 616d 5f6e 616d 653d 7374 7265 616d  ream_name=stream
+000009c0: 5f6e 616d 652c 0a20 2020 2065 7870 6563  _name,.    expec
+000009d0: 7465 645f 706f 7369 7469 6f6e 3d30 2c0a  ted_position=0,.
+000009e0: 2020 2020 6576 656e 7473 3d5b 6576 656e      events=[even
+000009f0: 7432 2c20 6576 656e 7433 5d2c 0a29 0a0a  t2, event3],.)..
+00000a00: 0a23 2052 6561 6420 616c 6c20 6576 656e  .# Read all even
+00000a10: 7473 2072 6563 6f72 6465 6420 696e 2061  ts recorded in a
+00000a20: 2073 7472 6561 6d2e 0a0a 7265 636f 7264   stream...record
+00000a30: 6564 203d 2063 6c69 656e 742e 7265 6164  ed = client.read
+00000a40: 5f73 7472 6561 6d5f 6576 656e 7473 280a  _stream_events(.
+00000a50: 2020 2020 7374 7265 616d 5f6e 616d 653d      stream_name=
+00000a60: 7374 7265 616d 5f6e 616d 650a 290a 0a61  stream_name.)..a
+00000a70: 7373 6572 7420 6c65 6e28 7265 636f 7264  ssert len(record
+00000a80: 6564 2920 3d3d 2033 0a61 7373 6572 7420  ed) == 3.assert 
+00000a90: 7265 636f 7264 6564 5b30 5d2e 6461 7461  recorded[0].data
+00000aa0: 203d 3d20 6576 656e 7431 2e64 6174 610a   == event1.data.
+00000ab0: 6173 7365 7274 2072 6563 6f72 6465 645b  assert recorded[
+00000ac0: 315d 2e64 6174 6120 3d3d 2065 7665 6e74  1].data == event
+00000ad0: 322e 6461 7461 0a61 7373 6572 7420 7265  2.data.assert re
+00000ae0: 636f 7264 6564 5b32 5d2e 6461 7461 203d  corded[2].data =
+00000af0: 3d20 6576 656e 7433 2e64 6174 610a 6173  = event3.data.as
+00000b00: 7365 7274 2072 6563 6f72 6465 645b 305d  sert recorded[0]
+00000b10: 2e74 7970 6520 3d3d 2065 7665 6e74 312e  .type == event1.
+00000b20: 7479 7065 0a61 7373 6572 7420 7265 636f  type.assert reco
+00000b30: 7264 6564 5b31 5d2e 7479 7065 203d 3d20  rded[1].type == 
+00000b40: 6576 656e 7432 2e74 7970 650a 6173 7365  event2.type.asse
+00000b50: 7274 2072 6563 6f72 6465 645b 325d 2e74  rt recorded[2].t
+00000b60: 7970 6520 3d3d 2065 7665 6e74 332e 7479  ype == event3.ty
+00000b70: 7065 0a0a 0a23 2049 6e20 616e 2065 7665  pe...# In an eve
+00000b80: 6e74 2d70 726f 6365 7373 696e 6720 636f  nt-processing co
+00000b90: 6d70 6f6e 656e 742c 2075 7365 2061 2022  mponent, use a "
+00000ba0: 6361 7463 682d 7570 2220 7375 6273 6372  catch-up" subscr
+00000bb0: 6970 7469 6f6e 0a23 2074 6f20 7265 6365  iption.# to rece
+00000bc0: 6976 6520 616c 6c20 6576 656e 7473 2061  ive all events a
+00000bd0: 6372 6f73 7320 616c 6c20 7374 7265 616d  cross all stream
+00000be0: 732c 2069 6e63 6c75 6469 6e67 2065 7665  s, including eve
+00000bf0: 6e74 7320 7468 6174 0a23 2068 6176 6520  nts that.# have 
+00000c00: 6e6f 7420 7965 7420 6265 656e 2072 6563  not yet been rec
+00000c10: 6f72 6465 642c 2073 7461 7274 696e 6720  orded, starting 
+00000c20: 6672 6f6d 2074 6865 2063 6f6d 706f 6e65  from the compone
+00000c30: 6e74 2773 206c 6173 740a 2320 7361 7665  nt's last.# save
+00000c40: 6420 2263 6f6d 6d69 7420 706f 7369 7469  d "commit positi
+00000c50: 6f6e 222e 0a0a 6c61 7374 5f73 6176 6564  on"...last_saved
+00000c60: 5f63 6f6d 6d69 745f 706f 7369 7469 6f6e  _commit_position
+00000c70: 203d 2030 0a0a 7375 6273 6372 6970 7469   = 0..subscripti
+00000c80: 6f6e 203d 2063 6c69 656e 742e 7375 6273  on = client.subs
+00000c90: 6372 6962 655f 616c 6c5f 6576 656e 7473  cribe_all_events
+00000ca0: 280a 2020 2020 636f 6d6d 6974 5f70 6f73  (.    commit_pos
+00000cb0: 6974 696f 6e3d 6c61 7374 5f73 6176 6564  ition=last_saved
+00000cc0: 5f63 6f6d 6d69 745f 706f 7369 7469 6f6e  _commit_position
+00000cd0: 0a29 0a0a 2320 546f 2069 6d70 6c65 6d65  .)..# To impleme
+00000ce0: 6e74 2022 6578 6163 746c 792d 6f6e 6365  nt "exactly-once
+00000cf0: 2220 7365 6d61 6e74 6963 732c 2069 7465  " semantics, ite
+00000d00: 7261 7465 206f 7665 7220 7468 650a 2320  rate over the.# 
+00000d10: 2263 6174 6368 2d75 7022 2073 7562 7363  "catch-up" subsc
+00000d20: 7269 7074 696f 6e2e 2050 726f 6365 7373  ription. Process
+00000d30: 2065 6163 6820 7265 6365 6976 6564 2065   each received e
+00000d40: 7665 6e74 2c0a 2320 696e 2074 7572 6e2c  vent,.# in turn,
+00000d50: 2074 6872 6f75 6768 2061 6e20 6576 656e   through an even
+00000d60: 742d 7072 6f63 6573 7369 6e67 2070 6f6c  t-processing pol
+00000d70: 6963 792e 2053 6176 6520 7468 650a 2320  icy. Save the.# 
+00000d80: 7661 6c75 6520 6f66 2074 6865 2063 6f6d  value of the com
+00000d90: 6d69 745f 706f 7369 7469 6f6e 2061 7474  mit_position att
+00000da0: 7269 6275 7465 206f 6620 7468 6520 7072  ribute of the pr
+00000db0: 6f63 6573 7365 640a 2320 6576 656e 7420  ocessed.# event 
+00000dc0: 7769 7468 206e 6577 2073 7461 7465 2067  with new state g
+00000dd0: 656e 6572 6174 6564 2062 7920 7468 6520  enerated by the 
+00000de0: 706f 6c69 6379 2069 6e20 7468 6520 7361  policy in the sa
+00000df0: 6d65 0a23 2061 746f 6d69 6320 7472 616e  me.# atomic tran
+00000e00: 7361 6374 696f 6e2e 2055 7365 2074 6865  saction. Use the
+00000e10: 206c 6173 7420 7361 7665 6420 2263 6f6d   last saved "com
+00000e20: 6d69 7420 706f 7369 7469 6f6e 220a 2320  mit position".# 
+00000e30: 7768 656e 2072 6573 7461 7274 696e 6720  when restarting 
+00000e40: 7468 6520 2263 6174 6368 2d75 7022 2073  the "catch-up" s
+00000e50: 7562 7363 7269 7074 696f 6e2e 0a0a 7265  ubscription...re
+00000e60: 6365 6976 6564 203d 205b 5d0a 666f 7220  ceived = [].for 
+00000e70: 6576 656e 7420 696e 2073 7562 7363 7269  event in subscri
+00000e80: 7074 696f 6e3a 0a20 2020 2072 6563 6569  ption:.    recei
+00000e90: 7665 642e 6170 7065 6e64 2865 7665 6e74  ved.append(event
+00000ea0: 290a 2020 2020 6966 2065 7665 6e74 2e69  ).    if event.i
+00000eb0: 6420 3d3d 2065 7665 6e74 332e 6964 3a0a  d == event3.id:.
+00000ec0: 2020 2020 2020 2020 6272 6561 6b0a 0a61          break..a
+00000ed0: 7373 6572 7420 7265 6365 6976 6564 5b2d  ssert received[-
+00000ee0: 335d 2e64 6174 6120 3d3d 2065 7665 6e74  3].data == event
+00000ef0: 312e 6461 7461 0a61 7373 6572 7420 7265  1.data.assert re
+00000f00: 6365 6976 6564 5b2d 325d 2e64 6174 6120  ceived[-2].data 
+00000f10: 3d3d 2065 7665 6e74 322e 6461 7461 0a61  == event2.data.a
+00000f20: 7373 6572 7420 7265 6365 6976 6564 5b2d  ssert received[-
+00000f30: 315d 2e64 6174 6120 3d3d 2065 7665 6e74  1].data == event
+00000f40: 332e 6461 7461 0a61 7373 6572 7420 7265  3.data.assert re
+00000f50: 6365 6976 6564 5b2d 335d 2e74 7970 6520  ceived[-3].type 
+00000f60: 3d3d 2065 7665 6e74 312e 7479 7065 0a61  == event1.type.a
+00000f70: 7373 6572 7420 7265 6365 6976 6564 5b2d  ssert received[-
+00000f80: 325d 2e74 7970 6520 3d3d 2065 7665 6e74  2].type == event
+00000f90: 322e 7479 7065 0a61 7373 6572 7420 7265  2.type.assert re
+00000fa0: 6365 6976 6564 5b2d 315d 2e74 7970 6520  ceived[-1].type 
+00000fb0: 3d3d 2065 7665 6e74 332e 7479 7065 0a0a  == event3.type..
+00000fc0: 6173 7365 7274 2072 6563 6569 7665 645b  assert received[
+00000fd0: 2d33 5d2e 636f 6d6d 6974 5f70 6f73 6974  -3].commit_posit
+00000fe0: 696f 6e20 3e20 300a 6173 7365 7274 2072  ion > 0.assert r
+00000ff0: 6563 6569 7665 645b 2d32 5d2e 636f 6d6d  eceived[-2].comm
+00001000: 6974 5f70 6f73 6974 696f 6e20 3e20 7265  it_position > re
+00001010: 6365 6976 6564 5b2d 335d 2e63 6f6d 6d69  ceived[-3].commi
+00001020: 745f 706f 7369 7469 6f6e 0a61 7373 6572  t_position.asser
+00001030: 7420 7265 6365 6976 6564 5b2d 315d 2e63  t received[-1].c
+00001040: 6f6d 6d69 745f 706f 7369 7469 6f6e 203e  ommit_position >
+00001050: 2072 6563 6569 7665 645b 2d32 5d2e 636f   received[-2].co
+00001060: 6d6d 6974 5f70 6f73 6974 696f 6e0a 0a0a  mmit_position...
+00001070: 2320 436c 6f73 6520 7468 6520 636c 6965  # Close the clie
+00001080: 6e74 2061 6674 6572 2075 7365 2e0a 0a63  nt after use...c
+00001090: 6c69 656e 742e 636c 6f73 6528 290a 6060  lient.close().``
+000010a0: 600a 0a53 6565 2062 656c 6f77 2066 6f72  `..See below for
+000010b0: 206d 6f72 6520 6465 7461 696c 732e 0a0a   more details...
+000010c0: 466f 7220 616e 2065 7861 6d70 6c65 206f  For an example o
+000010d0: 6620 7573 6167 652c 2073 6565 2074 6865  f usage, see the
+000010e0: 205b 6576 656e 7473 6f75 7263 696e 672d   [eventsourcing-
+000010f0: 6576 656e 7473 746f 7265 6462 5d28 0a68  eventstoredb](.h
+00001100: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
+00001110: 6d2f 7079 6576 656e 7473 6f75 7263 696e  m/pyeventsourcin
+00001120: 672f 6576 656e 7473 6f75 7263 696e 672d  g/eventsourcing-
+00001130: 6576 656e 7473 746f 7265 6462 2920 7061  eventstoredb) pa
+00001140: 636b 6167 652e 0a0a 2323 2054 6162 6c65  ckage...## Table
+00001150: 206f 6620 636f 6e74 656e 7473 0a0a 3c21   of contents..<!
+00001160: 2d2d 2054 4f43 202d 2d3e 0a2a 205b 496e  -- TOC -->.* [In
+00001170: 7374 616c 6c20 7061 636b 6167 655d 2823  stall package](#
+00001180: 696e 7374 616c 6c2d 7061 636b 6167 6529  install-package)
+00001190: 0a20 202a 205b 4672 6f6d 2050 7950 495d  .  * [From PyPI]
+000011a0: 2823 6672 6f6d 2d70 7970 6929 0a20 202a  (#from-pypi).  *
+000011b0: 205b 5769 7468 2050 6f65 7472 795d 2823   [With Poetry](#
+000011c0: 7769 7468 2d70 6f65 7472 7929 0a2a 205b  with-poetry).* [
+000011d0: 4576 656e 7453 746f 7265 4442 2073 6572  EventStoreDB ser
+000011e0: 7665 725d 2823 6576 656e 7473 746f 7265  ver](#eventstore
+000011f0: 6462 2d73 6572 7665 7229 0a20 202a 205b  db-server).  * [
+00001200: 5275 6e20 636f 6e74 6169 6e65 725d 2823  Run container](#
+00001210: 7275 6e2d 636f 6e74 6169 6e65 7229 0a20  run-container). 
+00001220: 202a 205b 5374 6f70 2063 6f6e 7461 696e   * [Stop contain
+00001230: 6572 5d28 2373 746f 702d 636f 6e74 6169  er](#stop-contai
+00001240: 6e65 7229 0a2a 205b 4576 656e 7453 746f  ner).* [EventSto
+00001250: 7265 4442 2063 6c69 656e 745d 2823 6576  reDB client](#ev
+00001260: 656e 7473 746f 7265 6462 2d63 6c69 656e  entstoredb-clien
+00001270: 7429 0a20 202a 205b 496d 706f 7274 2063  t).  * [Import c
+00001280: 6c61 7373 5d28 2369 6d70 6f72 742d 636c  lass](#import-cl
+00001290: 6173 7329 0a20 202a 205b 436f 6e73 7472  ass).  * [Constr
+000012a0: 7563 7420 636c 6965 6e74 5d28 2363 6f6e  uct client](#con
+000012b0: 7374 7275 6374 2d63 6c69 656e 7429 0a2a  struct-client).*
+000012c0: 205b 5374 7265 616d 735d 2823 7374 7265   [Streams](#stre
+000012d0: 616d 7329 0a20 202a 205b 4170 7065 6e64  ams).  * [Append
+000012e0: 2065 7665 6e74 735d 2823 6170 7065 6e64   events](#append
+000012f0: 2d65 7665 6e74 7329 0a20 202a 205b 4170  -events).  * [Ap
+00001300: 7065 6e64 2065 7665 6e74 5d28 2361 7070  pend event](#app
+00001310: 656e 642d 6576 656e 7429 0a20 202a 205b  end-event).  * [
+00001320: 4964 656d 706f 7465 6e74 2061 7070 656e  Idempotent appen
+00001330: 6420 6f70 6572 6174 696f 6e73 5d28 2369  d operations](#i
+00001340: 6465 6d70 6f74 656e 742d 6170 7065 6e64  dempotent-append
+00001350: 2d6f 7065 7261 7469 6f6e 7329 0a20 202a  -operations).  *
+00001360: 205b 5265 6164 2073 7472 6561 6d20 6576   [Read stream ev
+00001370: 656e 7473 5d28 2372 6561 642d 7374 7265  ents](#read-stre
+00001380: 616d 2d65 7665 6e74 7329 0a20 202a 205b  am-events).  * [
+00001390: 5265 6164 2061 6c6c 2065 7665 6e74 735d  Read all events]
+000013a0: 2823 7265 6164 2d61 6c6c 2d65 7665 6e74  (#read-all-event
+000013b0: 7329 0a20 202a 205b 4765 7420 6375 7272  s).  * [Get curr
+000013c0: 656e 7420 7374 7265 616d 2070 6f73 6974  ent stream posit
+000013d0: 696f 6e5d 2823 6765 742d 6375 7272 656e  ion](#get-curren
+000013e0: 742d 7374 7265 616d 2d70 6f73 6974 696f  t-stream-positio
+000013f0: 6e29 0a20 202a 205b 4765 7420 6375 7272  n).  * [Get curr
+00001400: 656e 7420 636f 6d6d 6974 2070 6f73 6974  ent commit posit
+00001410: 696f 6e5d 2823 6765 742d 6375 7272 656e  ion](#get-curren
+00001420: 742d 636f 6d6d 6974 2d70 6f73 6974 696f  t-commit-positio
+00001430: 6e29 0a20 202a 205b 4765 7420 7374 7265  n).  * [Get stre
+00001440: 616d 206d 6574 6164 6174 615d 2823 6765  am metadata](#ge
+00001450: 742d 7374 7265 616d 2d6d 6574 6164 6174  t-stream-metadat
+00001460: 6129 0a20 202a 205b 5365 7420 7374 7265  a).  * [Set stre
+00001470: 616d 206d 6574 6164 6174 615d 2823 7365  am metadata](#se
+00001480: 742d 7374 7265 616d 2d6d 6574 6164 6174  t-stream-metadat
+00001490: 6129 0a20 202a 205b 4465 6c65 7465 2073  a).  * [Delete s
+000014a0: 7472 6561 6d5d 2823 6465 6c65 7465 2d73  tream](#delete-s
+000014b0: 7472 6561 6d29 0a20 202a 205b 546f 6d62  tream).  * [Tomb
+000014c0: 7374 6f6e 6520 7374 7265 616d 5d28 2374  stone stream](#t
+000014d0: 6f6d 6273 746f 6e65 2d73 7472 6561 6d29  ombstone-stream)
+000014e0: 0a2a 205b 4361 7463 682d 7570 2073 7562  .* [Catch-up sub
+000014f0: 7363 7269 7074 696f 6e73 5d28 2363 6174  scriptions](#cat
+00001500: 6368 2d75 702d 7375 6273 6372 6970 7469  ch-up-subscripti
+00001510: 6f6e 7329 0a20 202a 205b 486f 7720 746f  ons).  * [How to
+00001520: 2069 6d70 6c65 6d65 6e74 2065 7861 6374   implement exact
+00001530: 6c79 2d6f 6e63 6520 6576 656e 7420 7072  ly-once event pr
+00001540: 6f63 6573 7369 6e67 5d28 2368 6f77 2d74  ocessing](#how-t
+00001550: 6f2d 696d 706c 656d 656e 742d 6578 6163  o-implement-exac
+00001560: 746c 792d 6f6e 6365 2d65 7665 6e74 2d70  tly-once-event-p
+00001570: 726f 6365 7373 696e 6729 0a20 202a 205b  rocessing).  * [
+00001580: 5375 6273 6372 6962 6520 616c 6c20 6576  Subscribe all ev
+00001590: 656e 7473 5d28 2373 7562 7363 7269 6265  ents](#subscribe
+000015a0: 2d61 6c6c 2d65 7665 6e74 7329 0a20 202a  -all-events).  *
+000015b0: 205b 5375 6273 6372 6962 6520 7374 7265   [Subscribe stre
+000015c0: 616d 2065 7665 6e74 735d 2823 7375 6273  am events](#subs
+000015d0: 6372 6962 652d 7374 7265 616d 2d65 7665  cribe-stream-eve
+000015e0: 6e74 7329 0a2a 205b 5065 7273 6973 7465  nts).* [Persiste
+000015f0: 6e74 2073 7562 7363 7269 7074 696f 6e73  nt subscriptions
+00001600: 5d28 2370 6572 7369 7374 656e 742d 7375  ](#persistent-su
+00001610: 6273 6372 6970 7469 6f6e 7329 0a20 202a  bscriptions).  *
+00001620: 205b 4372 6561 7465 2073 7562 7363 7269   [Create subscri
+00001630: 7074 696f 6e5d 2823 6372 6561 7465 2d73  ption](#create-s
+00001640: 7562 7363 7269 7074 696f 6e29 0a20 202a  ubscription).  *
+00001650: 205b 5265 6164 2073 7562 7363 7269 7074   [Read subscript
+00001660: 696f 6e5d 2823 7265 6164 2d73 7562 7363  ion](#read-subsc
+00001670: 7269 7074 696f 6e29 0a20 202a 205b 4765  ription).  * [Ge
+00001680: 7420 7375 6273 6372 6970 7469 6f6e 2069  t subscription i
+00001690: 6e66 6f5d 2823 6765 742d 7375 6273 6372  nfo](#get-subscr
+000016a0: 6970 7469 6f6e 2d69 6e66 6f29 0a20 202a  iption-info).  *
+000016b0: 205b 4c69 7374 2073 7562 7363 7269 7074   [List subscript
+000016c0: 696f 6e73 5d28 236c 6973 742d 7375 6273  ions](#list-subs
+000016d0: 6372 6970 7469 6f6e 7329 0a20 202a 205b  criptions).  * [
+000016e0: 4465 6c65 7465 2073 7562 7363 7269 7074  Delete subscript
+000016f0: 696f 6e5d 2823 6465 6c65 7465 2d73 7562  ion](#delete-sub
+00001700: 7363 7269 7074 696f 6e29 0a20 202a 205b  scription).  * [
+00001710: 4372 6561 7465 2073 7472 6561 6d20 7375  Create stream su
+00001720: 6273 6372 6970 7469 6f6e 5d28 2363 7265  bscription](#cre
+00001730: 6174 652d 7374 7265 616d 2d73 7562 7363  ate-stream-subsc
+00001740: 7269 7074 696f 6e29 0a20 202a 205b 5265  ription).  * [Re
+00001750: 6164 2073 7472 6561 6d20 7375 6273 6372  ad stream subscr
+00001760: 6970 7469 6f6e 5d28 2372 6561 642d 7374  iption](#read-st
+00001770: 7265 616d 2d73 7562 7363 7269 7074 696f  ream-subscriptio
+00001780: 6e29 0a20 202a 205b 4765 7420 7374 7265  n).  * [Get stre
+00001790: 616d 2073 7562 7363 7269 7074 696f 6e20  am subscription 
+000017a0: 696e 666f 5d28 2367 6574 2d73 7472 6561  info](#get-strea
+000017b0: 6d2d 7375 6273 6372 6970 7469 6f6e 2d69  m-subscription-i
+000017c0: 6e66 6f29 0a20 202a 205b 4c69 7374 2073  nfo).  * [List s
+000017d0: 7472 6561 6d20 7375 6273 6372 6970 7469  tream subscripti
+000017e0: 6f6e 735d 2823 6c69 7374 2d73 7472 6561  ons](#list-strea
+000017f0: 6d2d 7375 6273 6372 6970 7469 6f6e 7329  m-subscriptions)
+00001800: 0a20 202a 205b 4465 6c65 7465 2073 7472  .  * [Delete str
+00001810: 6561 6d20 7375 6273 6372 6970 7469 6f6e  eam subscription
+00001820: 5d28 2364 656c 6574 652d 7374 7265 616d  ](#delete-stream
+00001830: 2d73 7562 7363 7269 7074 696f 6e29 0a2a  -subscription).*
+00001840: 205b 436f 6e6e 6563 7469 6f6e 5d28 2363   [Connection](#c
+00001850: 6f6e 6e65 6374 696f 6e29 0a20 202a 205b  onnection).  * [
+00001860: 5265 636f 6e6e 6563 745d 2823 7265 636f  Reconnect](#reco
+00001870: 6e6e 6563 7429 0a20 202a 205b 436c 6f73  nnect).  * [Clos
+00001880: 655d 2823 636c 6f73 6529 0a2a 205b 4e6f  e](#close).* [No
+00001890: 7465 735d 2823 6e6f 7465 7329 0a20 202a  tes](#notes).  *
+000018a0: 205b 436f 6e6e 6563 7469 6f6e 2073 7472   [Connection str
+000018b0: 696e 6773 5d28 2363 6f6e 6e65 6374 696f  ings](#connectio
+000018c0: 6e2d 7374 7269 6e67 7329 0a20 202a 205b  n-strings).  * [
+000018d0: 5265 6775 6c61 7220 6578 7072 6573 7369  Regular expressi
+000018e0: 6f6e 2066 696c 7465 7273 5d28 2372 6567  on filters](#reg
+000018f0: 756c 6172 2d65 7870 7265 7373 696f 6e2d  ular-expression-
+00001900: 6669 6c74 6572 7329 0a20 202a 205b 4e65  filters).  * [Ne
+00001910: 7720 6576 656e 7420 6f62 6a65 6374 735d  w event objects]
+00001920: 2823 6e65 772d 6576 656e 742d 6f62 6a65  (#new-event-obje
+00001930: 6374 7329 0a20 202a 205b 5265 636f 7264  cts).  * [Record
+00001940: 6564 2065 7665 6e74 206f 626a 6563 7473  ed event objects
+00001950: 5d28 2372 6563 6f72 6465 642d 6576 656e  ](#recorded-even
+00001960: 742d 6f62 6a65 6374 7329 0a20 202a 205b  t-objects).  * [
+00001970: 4173 796e 6369 6f20 636c 6965 6e74 5d28  Asyncio client](
+00001980: 2361 7379 6e63 696f 2d63 6c69 656e 7429  #asyncio-client)
+00001990: 0a2a 205b 436f 6e74 7269 6275 746f 7273  .* [Contributors
+000019a0: 5d28 2363 6f6e 7472 6962 7574 6f72 7329  ](#contributors)
+000019b0: 0a20 202a 205b 496e 7374 616c 6c20 506f  .  * [Install Po
+000019c0: 6574 7279 5d28 2369 6e73 7461 6c6c 2d70  etry](#install-p
+000019d0: 6f65 7472 7929 0a20 202a 205b 5365 7475  oetry).  * [Setu
+000019e0: 7020 666f 7220 5079 4368 6172 6d20 7573  p for PyCharm us
+000019f0: 6572 735d 2823 7365 7475 702d 666f 722d  ers](#setup-for-
+00001a00: 7079 6368 6172 6d2d 7573 6572 7329 0a20  pycharm-users). 
+00001a10: 202a 205b 5365 7475 7020 6672 6f6d 2063   * [Setup from c
+00001a20: 6f6d 6d61 6e64 206c 696e 655d 2823 7365  ommand line](#se
+00001a30: 7475 702d 6672 6f6d 2d63 6f6d 6d61 6e64  tup-from-command
+00001a40: 2d6c 696e 6529 0a20 202a 205b 5072 6f6a  -line).  * [Proj
+00001a50: 6563 7420 4d61 6b65 6669 6c65 2063 6f6d  ect Makefile com
+00001a60: 6d61 6e64 735d 2823 7072 6f6a 6563 742d  mands](#project-
+00001a70: 6d61 6b65 6669 6c65 2d63 6f6d 6d61 6e64  makefile-command
+00001a80: 7329 0a3c 212d 2d20 544f 4320 2d2d 3e0a  s).<!-- TOC -->.
+00001a90: 0a23 2320 496e 7374 616c 6c20 7061 636b  .## Install pack
+00001aa0: 6167 650a 0a49 7420 6973 2072 6563 6f6d  age..It is recom
+00001ab0: 6d65 6e64 6564 2074 6f20 696e 7374 616c  mended to instal
+00001ac0: 6c20 5079 7468 6f6e 2070 6163 6b61 6765  l Python package
+00001ad0: 7320 696e 746f 2061 2050 7974 686f 6e20  s into a Python 
+00001ae0: 7669 7274 7561 6c20 656e 7669 726f 6e6d  virtual environm
+00001af0: 656e 742e 0a0a 2323 2320 4672 6f6d 2050  ent...### From P
+00001b00: 7950 490a 0a59 6f75 2063 616e 2075 7365  yPI..You can use
+00001b10: 2070 6970 2074 6f20 696e 7374 616c 6c20   pip to install 
+00001b20: 7468 6973 2070 6163 6b61 6765 2064 6972  this package dir
+00001b30: 6563 746c 7920 6672 6f6d 0a5b 7468 6520  ectly from.[the 
+00001b40: 5079 7468 6f6e 2050 6163 6b61 6765 2049  Python Package I
+00001b50: 6e64 6578 5d28 6874 7470 733a 2f2f 7079  ndex](https://py
+00001b60: 7069 2e6f 7267 2f70 726f 6a65 6374 2f65  pi.org/project/e
+00001b70: 7364 6263 6c69 656e 742f 292e 0a0a 2020  sdbclient/)...  
+00001b80: 2020 2420 7069 7020 696e 7374 616c 6c20    $ pip install 
+00001b90: 6573 6462 636c 6965 6e74 0a0a 2323 2320  esdbclient..### 
+00001ba0: 5769 7468 2050 6f65 7472 790a 0a59 6f75  With Poetry..You
+00001bb0: 2063 616e 2075 7365 2050 6f65 7472 7920   can use Poetry 
+00001bc0: 746f 2061 6464 2074 6869 7320 7061 636b  to add this pack
+00001bd0: 6167 6520 746f 2079 6f75 7220 7079 7072  age to your pypr
+00001be0: 6f6a 6563 742e 746f 6d6c 2061 6e64 2069  oject.toml and i
+00001bf0: 6e73 7461 6c6c 2069 742e 0a0a 2020 2020  nstall it...    
+00001c00: 2420 706f 6574 7279 2061 6464 2065 7364  $ poetry add esd
+00001c10: 6263 6c69 656e 740a 0a23 2320 4576 656e  bclient..## Even
+00001c20: 7453 746f 7265 4442 2073 6572 7665 720a  tStoreDB server.
+00001c30: 0a54 6865 2045 7665 6e74 5374 6f72 6544  .The EventStoreD
+00001c40: 4220 7365 7276 6572 2063 616e 2062 6520  B server can be 
+00001c50: 7275 6e20 6c6f 6361 6c6c 7920 7573 696e  run locally usin
+00001c60: 6720 7468 6520 6f66 6669 6369 616c 2044  g the official D
+00001c70: 6f63 6b65 7220 636f 6e74 6169 6e65 7220  ocker container 
+00001c80: 696d 6167 652e 0a0a 2323 2320 5275 6e20  image...### Run 
+00001c90: 636f 6e74 6169 6e65 720a 0a46 6f72 2064  container..For d
+00001ca0: 6576 656c 6f70 6d65 6e74 2c20 796f 7520  evelopment, you 
+00001cb0: 6361 6e20 7275 6e20 6120 2273 6563 7572  can run a "secur
+00001cc0: 6522 2045 7665 6e74 5374 6f72 6544 4220  e" EventStoreDB 
+00001cd0: 7365 7276 6572 2075 7369 6e67 2074 6865  server using the
+00001ce0: 2066 6f6c 6c6f 7769 6e67 2063 6f6d 6d61   following comma
+00001cf0: 6e64 2e0a 0a20 2020 2024 2064 6f63 6b65  nd...    $ docke
+00001d00: 7220 7275 6e20 2d64 202d 2d6e 616d 6520  r run -d --name 
+00001d10: 6576 656e 7473 746f 7265 6462 2d73 6563  eventstoredb-sec
+00001d20: 7572 6520 2d69 7420 2d70 2032 3131 333a  ure -it -p 2113:
+00001d30: 3231 3133 202d 2d65 6e76 2022 484f 4d45  2113 --env "HOME
+00001d40: 3d2f 746d 7022 2065 7665 6e74 7374 6f72  =/tmp" eventstor
+00001d50: 652f 6576 656e 7473 746f 7265 3a32 312e  e/eventstore:21.
+00001d60: 3130 2e39 2d62 7573 7465 722d 736c 696d  10.9-buster-slim
+00001d70: 202d 2d64 6576 0a0a 4173 2077 6520 7769   --dev..As we wi
+00001d80: 6c6c 2073 6565 2c20 7468 6520 636c 6965  ll see, the clie
+00001d90: 6e74 206e 6565 6473 2061 6e20 4576 656e  nt needs an Even
+00001da0: 7453 746f 7265 4442 2063 6f6e 6e65 6374  tStoreDB connect
+00001db0: 696f 6e20 7374 7269 6e67 2055 5249 2061  ion string URI a
+00001dc0: 7320 7468 6520 7661 6c75 6520 6f66 0a69  s the value of.i
+00001dd0: 7473 2060 7572 6960 2063 6f6e 7374 7275  ts `uri` constru
+00001de0: 6374 6f72 2061 7267 756d 656e 742e 2053  ctor argument. S
+00001df0: 6565 2074 6865 204e 6f74 6573 2073 6563  ee the Notes sec
+00001e00: 7469 6f6e 2062 656c 6f77 2066 6f72 2064  tion below for d
+00001e10: 6574 6169 6c65 6420 696e 666f 726d 6174  etailed informat
+00001e20: 696f 6e0a 6162 6f75 7420 4576 656e 7453  ion.about EventS
+00001e30: 746f 7265 4442 2063 6f6e 6e65 6374 696f  toreDB connectio
+00001e40: 6e20 7374 7269 6e67 2055 5249 732e 0a0a  n string URIs...
+00001e50: 5468 6520 636f 6e6e 6563 7469 6f6e 2073  The connection s
+00001e60: 7472 696e 6720 666f 7220 7468 6973 2022  tring for this "
+00001e70: 7365 6375 7265 2220 4576 656e 7453 746f  secure" EventSto
+00001e80: 7265 4442 2073 6572 7665 7220 776f 756c  reDB server woul
+00001e90: 6420 6265 3a0a 0a20 2020 2065 7364 623a  d be:..    esdb:
+00001ea0: 2f2f 6164 6d69 6e3a 6368 616e 6765 6974  //admin:changeit
+00001eb0: 406c 6f63 616c 686f 7374 3a32 3131 330a  @localhost:2113.
+00001ec0: 0a54 6f20 636f 6e6e 6563 7420 746f 2061  .To connect to a
+00001ed0: 2022 7365 6375 7265 2220 7365 7276 6572   "secure" server
+00001ee0: 2c20 796f 7520 7769 6c6c 2075 7375 616c  , you will usual
+00001ef0: 6c79 206e 6565 6420 746f 2069 6e63 6c75  ly need to inclu
+00001f00: 6465 2061 2022 7573 6572 6e61 6d65 220a  de a "username".
+00001f10: 616e 6420 6120 2270 6173 7377 6f72 6422  and a "password"
+00001f20: 2069 6e20 7468 6520 636f 6e6e 6563 7469   in the connecti
+00001f30: 6f6e 2073 7472 696e 672c 2073 6f20 7468  on string, so th
+00001f40: 6174 2074 6865 2073 6572 7665 7220 6361  at the server ca
+00001f50: 6e20 6175 7468 656e 7469 6361 7465 2074  n authenticate t
+00001f60: 6865 0a63 6c69 656e 742e 2054 6865 2064  he.client. The d
+00001f70: 6566 6175 6c74 2075 7365 726e 616d 6520  efault username 
+00001f80: 6973 2022 6164 6d69 6e22 2061 6e64 2074  is "admin" and t
+00001f90: 6865 2064 6566 6175 6c74 2070 6173 7377  he default passw
+00001fa0: 6f72 6420 6973 2022 6368 616e 6765 6974  ord is "changeit
+00001fb0: 222e 0a0a 5768 656e 2063 6f6e 6e65 6374  "...When connect
+00001fc0: 696e 6720 746f 2061 2022 7365 6375 7265  ing to a "secure
+00001fd0: 2220 7365 7276 6572 2c20 7468 6520 636c  " server, the cl
+00001fe0: 6965 6e74 2061 6c73 6f20 6e65 6564 7320  ient also needs 
+00001ff0: 616e 2053 534c 2f54 4c53 0a63 6572 7469  an SSL/TLS.certi
+00002000: 6669 6361 7465 2061 7320 7468 6520 7661  ficate as the va
+00002010: 6c75 6520 6f66 2069 7473 2060 726f 6f74  lue of its `root
+00002020: 5f63 6572 7469 6669 6361 7465 7360 2063  _certificates` c
+00002030: 6f6e 7374 7275 6374 6f72 2061 7267 756d  onstructor argum
+00002040: 656e 742e 2054 6f20 636f 6e6e 6563 740a  ent. To connect.
+00002050: 746f 2061 2022 7365 6375 7265 2220 7365  to a "secure" se
+00002060: 7276 6572 2079 6f75 2077 696c 6c20 6e65  rver you will ne
+00002070: 6564 2061 6e20 5353 4c2f 544c 5320 6365  ed an SSL/TLS ce
+00002080: 7274 6966 6963 6174 6520 736f 2074 6861  rtificate so tha
+00002090: 7420 7468 6520 636c 6965 6e74 2063 616e  t the client can
+000020a0: 0a61 7574 6865 6e74 6963 6174 6520 7468  .authenticate th
+000020b0: 6520 7365 7276 6572 2e20 466f 7220 6465  e server. For de
+000020c0: 7665 6c6f 706d 656e 742c 2079 6f75 2063  velopment, you c
+000020d0: 616e 2065 6974 6865 7220 7573 6520 7468  an either use th
+000020e0: 6520 5353 4c2f 544c 5320 6365 7274 6966  e SSL/TLS certif
+000020f0: 6963 6174 650a 6f66 2074 6865 2063 6572  icate.of the cer
+00002100: 7469 6669 6361 7465 2061 7574 686f 7269  tificate authori
+00002110: 7479 2075 7365 6420 746f 2063 7265 6174  ty used to creat
+00002120: 6520 7468 6520 7365 7276 6572 2773 2063  e the server's c
+00002130: 6572 7469 6669 6361 7465 2c20 6f72 2077  ertificate, or w
+00002140: 6865 6e20 7573 696e 6720 610a 7369 6e67  hen using a.sing
+00002150: 6c65 2d6e 6f64 6520 636c 7573 7465 722c  le-node cluster,
+00002160: 2079 6f75 2063 616e 2075 7365 2074 6865   you can use the
+00002170: 2073 6572 7665 7220 6365 7274 6966 6963   server certific
+00002180: 6174 6520 6974 7365 6c66 2e20 596f 7520  ate itself. You 
+00002190: 6361 6e20 6765 7420 7468 650a 7365 7276  can get the.serv
+000021a0: 6572 2063 6572 7469 6669 6361 7465 2077  er certificate w
+000021b0: 6974 6820 7468 6520 666f 6c6c 6f77 696e  ith the followin
+000021c0: 6720 5079 7468 6f6e 2063 6f64 652e 0a0a  g Python code...
+000021d0: 0a60 6060 7079 7468 6f6e 0a69 6d70 6f72  .```python.impor
+000021e0: 7420 7373 6c0a 0a73 6572 7665 725f 6365  t ssl..server_ce
+000021f0: 7274 6966 6963 6174 6520 3d20 7373 6c2e  rtificate = ssl.
+00002200: 6765 745f 7365 7276 6572 5f63 6572 7469  get_server_certi
+00002210: 6669 6361 7465 2861 6464 723d 2827 6c6f  ficate(addr=('lo
+00002220: 6361 6c68 6f73 7427 2c20 3231 3133 2929  calhost', 2113))
+00002230: 0a60 6060 0a0a 596f 7520 6361 6e20 616c  .```..You can al
+00002240: 736f 2073 7461 7274 2061 6e20 2269 6e73  so start an "ins
+00002250: 6563 7572 6522 2073 6572 7665 7220 7573  ecure" server us
+00002260: 696e 6720 7468 6520 666f 6c6c 6f77 696e  ing the followin
+00002270: 6720 636f 6d6d 616e 642e 0a0a 2020 2020  g command...    
+00002280: 2420 646f 636b 6572 2072 756e 202d 6420  $ docker run -d 
+00002290: 2d2d 6e61 6d65 2065 7665 6e74 7374 6f72  --name eventstor
+000022a0: 6564 622d 696e 7365 6375 7265 202d 6974  edb-insecure -it
+000022b0: 202d 7020 3231 3134 3a32 3131 3320 6576   -p 2114:2113 ev
+000022c0: 656e 7473 746f 7265 2f65 7665 6e74 7374  entstore/eventst
+000022d0: 6f72 653a 3231 2e31 302e 392d 6275 7374  ore:21.10.9-bust
+000022e0: 6572 2d73 6c69 6d20 2d2d 696e 7365 6375  er-slim --insecu
+000022f0: 7265 0a0a 5468 6520 636f 6e6e 6563 7469  re..The connecti
+00002300: 6f6e 2073 7472 696e 6720 5552 4920 666f  on string URI fo
+00002310: 7220 7468 6973 2022 696e 7365 6375 7265  r this "insecure
+00002320: 2220 7365 7276 6572 2077 6f75 6c64 2062  " server would b
+00002330: 653a 0a0a 2020 2020 6573 6462 3a2f 2f6c  e:..    esdb://l
+00002340: 6f63 616c 686f 7374 3a32 3131 343f 546c  ocalhost:2114?Tl
+00002350: 733d 6661 6c73 650a 0a41 7320 7765 2077  s=false..As we w
+00002360: 696c 6c20 7365 652c 2077 6865 6e20 636f  ill see, when co
+00002370: 6e6e 6563 7469 6e67 2074 6f20 616e 2022  nnecting to an "
+00002380: 696e 7365 6375 7265 2220 7365 7276 6572  insecure" server
+00002390: 2c20 7468 6572 6520 6973 206e 6f20 6e65  , there is no ne
+000023a0: 6564 2074 6f20 696e 636c 7564 650a 6120  ed to include.a 
+000023b0: 2275 7365 726e 616d 6522 2061 6e64 2061  "username" and a
+000023c0: 2022 7061 7373 776f 7264 2220 696e 2074   "password" in t
+000023d0: 6865 2063 6f6e 6e65 6374 696f 6e20 7374  he connection st
+000023e0: 7269 6e67 2e20 4966 2079 6f75 2064 6f2c  ring. If you do,
+000023f0: 2074 6865 7365 2076 616c 7565 7320 7769   these values wi
+00002400: 6c6c 0a62 6520 6967 6e6f 7265 6420 6279  ll.be ignored by
+00002410: 2074 6865 2063 6c69 656e 742c 2073 6f20   the client, so 
+00002420: 7468 6174 2074 6865 7920 7769 6c6c 206e  that they will n
+00002430: 6f74 2062 6520 7365 6e74 2074 6f20 7468  ot be sent to th
+00002440: 6520 7365 7276 6572 206f 7665 7220 616e  e server over an
+00002450: 0a69 6e73 6563 7572 6520 6368 616e 6e65  .insecure channe
+00002460: 6c2e 0a0a 506c 6561 7365 206e 6f74 652c  l...Please note,
+00002470: 2074 6865 2022 696e 7365 6375 7265 2220   the "insecure" 
+00002480: 636f 6e6e 6563 7469 6f6e 2073 7472 696e  connection strin
+00002490: 6720 7573 6573 2061 2071 7565 7279 2073  g uses a query s
+000024a0: 7472 696e 6720 7769 7468 2074 6865 2066  tring with the f
+000024b0: 6965 6c64 2d76 616c 7565 0a60 546c 733d  ield-value.`Tls=
+000024c0: 6661 6c73 6560 2e20 5468 6520 7661 6c75  false`. The valu
+000024d0: 6520 6f66 2074 6869 7320 6669 656c 6420  e of this field 
+000024e0: 6973 2062 7920 6465 6661 756c 7420 6074  is by default `t
+000024f0: 7275 6560 2e20 5365 6520 7468 6520 4e6f  rue`. See the No
+00002500: 7465 7320 7365 6374 696f 6e20 6265 6c6f  tes section belo
+00002510: 770a 666f 7220 6d6f 7265 2069 6e66 6f72  w.for more infor
+00002520: 6d61 7469 6f6e 2061 626f 7574 2045 7665  mation about Eve
+00002530: 6e74 5374 6f72 6544 4220 636f 6e6e 6563  ntStoreDB connec
+00002540: 7469 6f6e 2073 7472 696e 6773 2061 6e64  tion strings and
+00002550: 2074 6865 2066 6965 6c64 7320 7468 6174   the fields that
+00002560: 2063 616e 2062 650a 7573 6564 2069 6e20   can be.used in 
+00002570: 7468 6520 7175 6572 7920 7374 7269 6e67  the query string
+00002580: 2074 6f20 7370 6563 6966 7920 636f 6e6e   to specify conn
+00002590: 6563 7469 6f6e 206f 7074 696f 6e73 2e0a  ection options..
+000025a0: 0a23 2323 2053 746f 7020 636f 6e74 6169  .### Stop contai
+000025b0: 6e65 720a 0a54 6f20 7374 6f70 2061 6e64  ner..To stop and
+000025c0: 2072 656d 6f76 6520 7468 6520 2273 6563   remove the "sec
+000025d0: 7572 6522 2063 6f6e 7461 696e 6572 2c20  ure" container, 
+000025e0: 7573 6520 7468 6520 666f 6c6c 6f77 696e  use the followin
+000025f0: 6720 446f 636b 6572 2063 6f6d 6d61 6e64  g Docker command
+00002600: 732e 0a0a 2020 2020 2420 646f 636b 6572  s...    $ docker
+00002610: 2073 746f 7020 6576 656e 7473 746f 7265   stop eventstore
+00002620: 6462 2d73 6563 7572 650a 0924 2064 6f63  db-secure..$ doc
+00002630: 6b65 7220 726d 2065 7665 6e74 7374 6f72  ker rm eventstor
+00002640: 6564 622d 7365 6375 7265 0a0a 546f 2073  edb-secure..To s
+00002650: 746f 7020 616e 6420 7265 6d6f 7665 2074  top and remove t
+00002660: 6865 2022 696e 7365 6375 7265 2220 636f  he "insecure" co
+00002670: 6e74 6169 6e65 722c 2075 7365 2074 6865  ntainer, use the
+00002680: 2066 6f6c 6c6f 7769 6e67 2044 6f63 6b65   following Docke
+00002690: 7220 636f 6d6d 616e 6473 2e0a 0a20 2020  r commands...   
+000026a0: 2024 2064 6f63 6b65 7220 7374 6f70 2065   $ docker stop e
+000026b0: 7665 6e74 7374 6f72 6564 622d 696e 7365  ventstoredb-inse
+000026c0: 6375 7265 0a09 2420 646f 636b 6572 2072  cure..$ docker r
+000026d0: 6d20 6576 656e 7473 746f 7265 6462 2d69  m eventstoredb-i
+000026e0: 6e73 6563 7572 650a 0a0a 2323 2045 7665  nsecure...## Eve
+000026f0: 6e74 5374 6f72 6544 4220 636c 6965 6e74  ntStoreDB client
+00002700: 0a0a 5468 6973 2045 7665 6e74 5374 6f72  ..This EventStor
+00002710: 6544 4220 636c 6965 6e74 2069 7320 696d  eDB client is im
+00002720: 706c 656d 656e 7465 6420 696e 2074 6865  plemented in the
+00002730: 2060 6573 6462 636c 6965 6e74 6020 7061   `esdbclient` pa
+00002740: 636b 6167 6520 7769 7468 0a74 6865 2060  ckage with.the `
+00002750: 4553 4442 436c 6965 6e74 6020 636c 6173  ESDBClient` clas
+00002760: 732e 0a0a 2323 2320 496d 706f 7274 2063  s...### Import c
+00002770: 6c61 7373 0a0a 5468 6520 6045 5344 4243  lass..The `ESDBC
+00002780: 6c69 656e 7460 2063 6c61 7373 2063 616e  lient` class can
+00002790: 2062 6520 696d 706f 7274 6564 2066 726f   be imported fro
+000027a0: 6d20 7468 6520 6065 7364 6263 6c69 656e  m the `esdbclien
+000027b0: 7460 2070 6163 6b61 6765 2e0a 0a60 6060  t` package...```
+000027c0: 7079 7468 6f6e 0a66 726f 6d20 6573 6462  python.from esdb
+000027d0: 636c 6965 6e74 2069 6d70 6f72 7420 4553  client import ES
+000027e0: 4442 436c 6965 6e74 0a60 6060 0a0a 2323  DBClient.```..##
+000027f0: 2320 436f 6e73 7472 7563 7420 636c 6965  # Construct clie
+00002800: 6e74 0a0a 5468 6520 6045 5344 4243 6c69  nt..The `ESDBCli
+00002810: 656e 7460 2063 6c61 7373 2063 616e 2062  ent` class can b
+00002820: 6520 636f 6e73 7472 7563 7465 6420 7769  e constructed wi
+00002830: 7468 2061 2060 7572 6960 2061 7267 756d  th a `uri` argum
+00002840: 656e 742c 2077 6869 6368 2069 7320 7265  ent, which is re
+00002850: 7175 6972 6564 2e0a 416e 642c 2074 6f20  quired..And, to 
+00002860: 636f 6e6e 6563 7420 746f 2061 2022 7365  connect to a "se
+00002870: 6375 7265 2220 4576 656e 7453 746f 7265  cure" EventStore
+00002880: 4442 2073 6572 7665 722c 2074 6865 206f  DB server, the o
+00002890: 7074 696f 6e61 6c20 6072 6f6f 745f 6365  ptional `root_ce
+000028a0: 7274 6966 6963 6174 6573 600a 6172 6775  rtificates`.argu
+000028b0: 6d65 6e74 2069 7320 616c 736f 2072 6571  ment is also req
+000028c0: 7569 7265 642e 0a0a 5468 6520 6075 7269  uired...The `uri
+000028d0: 6020 6172 6775 6d65 6e74 2069 7320 6578  ` argument is ex
+000028e0: 7065 6374 6564 2074 6f20 6265 2061 6e20  pected to be an 
+000028f0: 4576 656e 7453 746f 7265 4442 2063 6f6e  EventStoreDB con
+00002900: 6e65 6374 696f 6e20 7374 7269 6e67 2055  nection string U
+00002910: 5249 2074 6861 740a 636f 6e66 6f72 6d73  RI that.conforms
+00002920: 2077 6974 6820 7468 6520 7374 616e 6461   with the standa
+00002930: 7264 2045 7665 6e74 5374 6f72 6544 4220  rd EventStoreDB 
+00002940: 2265 7364 6222 206f 7220 2265 7364 622b  "esdb" or "esdb+
+00002950: 6469 7363 6f76 6572 2220 5552 4920 7363  discover" URI sc
+00002960: 6865 6d65 732e 2054 6865 0a73 796e 7461  hemes. The.synta
+00002970: 7820 616e 6420 7365 6d61 6e74 6963 7320  x and semantics 
+00002980: 6f66 2045 7665 6e74 5374 6f72 6544 4220  of EventStoreDB 
+00002990: 636f 6e6e 6563 7469 6f6e 2073 7472 696e  connection strin
+000029a0: 6773 2061 7265 2065 7870 6c61 696e 6564  gs are explained
+000029b0: 2069 6e20 7468 6520 4e6f 7465 730a 7365   in the Notes.se
+000029c0: 6374 696f 6e20 6265 6c6f 772e 0a0a 466f  ction below...Fo
+000029d0: 7220 6578 616d 706c 652c 2074 6865 2066  r example, the f
+000029e0: 6f6c 6c6f 7769 6e67 2063 6f6e 6e65 6374  ollowing connect
+000029f0: 696f 6e20 7374 7269 6e67 2073 7065 6369  ion string speci
+00002a00: 6669 6573 2074 6861 7420 7468 6520 636c  fies that the cl
+00002a10: 6965 6e74 2073 686f 756c 640a 6174 7465  ient should.atte
+00002a20: 6d70 7420 746f 2063 7265 6174 6520 6120  mpt to create a 
+00002a30: 2273 6563 7572 6522 2063 6f6e 6e65 6374  "secure" connect
+00002a40: 696f 6e20 746f 2070 6f72 7420 3231 3133  ion to port 2113
+00002a50: 206f 6e20 226c 6f63 616c 686f 7374 222c   on "localhost",
+00002a60: 2061 6e64 2075 7365 2074 6865 0a63 6c69   and use the.cli
+00002a70: 656e 7420 6372 6564 656e 7469 616c 7320  ent credentials 
+00002a80: 2275 7365 726e 616d 6522 2061 6e64 2022  "username" and "
+00002a90: 7061 7373 776f 7264 2220 7768 656e 206d  password" when m
+00002aa0: 616b 696e 6720 6361 6c6c 7320 746f 2074  aking calls to t
+00002ab0: 6865 2073 6572 7665 722e 0a0a 2020 2020  he server...    
+00002ac0: 6573 6462 3a2f 2f75 7365 726e 616d 653a  esdb://username:
+00002ad0: 7061 7373 776f 7264 406c 6f63 616c 686f  password@localho
+00002ae0: 7374 3a32 3131 333f 546c 733d 7472 7565  st:2113?Tls=true
+00002af0: 0a0a 5468 6520 636c 6965 6e74 206d 7573  ..The client mus
+00002b00: 7420 6265 2063 6f6e 6669 6775 7265 6420  t be configured 
+00002b10: 746f 2063 7265 6174 6520 6120 2273 6563  to create a "sec
+00002b20: 7572 6522 2063 6f6e 6e65 6374 696f 6e20  ure" connection 
+00002b30: 746f 2061 2022 7365 6375 7265 2220 7365  to a "secure" se
+00002b40: 7276 6572 2c0a 6f72 2061 6c74 6572 6e61  rver,.or alterna
+00002b50: 7469 7665 6c79 2061 6e20 2269 6e73 6563  tively an "insec
+00002b60: 7572 6522 2063 6f6e 6e65 6374 696f 6e20  ure" connection 
+00002b70: 746f 2061 6e20 2269 6e73 6563 7572 6522  to an "insecure"
+00002b80: 2073 6572 7665 722e 2042 7920 6465 6661   server. By defa
+00002b90: 756c 742c 2074 6865 0a63 6c69 656e 7420  ult, the.client 
+00002ba0: 7769 6c6c 2061 7474 656d 7074 2074 6f20  will attempt to 
+00002bb0: 6372 6561 7465 2061 2022 7365 6375 7265  create a "secure
+00002bc0: 2220 636f 6e6e 6563 7469 6f6e 2e20 416e  " connection. An
+00002bd0: 6420 736f 2c20 7768 656e 2063 6f6e 6e65  d so, when conne
+00002be0: 6374 696e 6720 746f 2061 6e0a 2269 6e73  cting to an."ins
+00002bf0: 6563 7572 6522 2073 6572 7665 722c 2074  ecure" server, t
+00002c00: 6865 2063 6f6e 6e65 6374 696f 6e20 7374  he connection st
+00002c10: 7269 6e67 206d 7573 7420 7370 6563 6966  ring must specif
+00002c20: 7920 7468 6174 2074 6865 2063 6c69 656e  y that the clien
+00002c30: 7420 7368 6f75 6c64 2061 7474 656d 7074  t should attempt
+00002c40: 0a74 6f20 6d61 6b65 2061 6e20 2269 6e73  .to make an "ins
+00002c50: 6563 7572 6522 2063 6f6e 6e65 6374 696f  ecure" connectio
+00002c60: 6e2e 0a0a 5468 6520 666f 6c6c 6f77 696e  n...The followin
+00002c70: 6720 636f 6e6e 6563 7469 6f6e 2073 7472  g connection str
+00002c80: 696e 6720 7370 6563 6966 6965 7320 7468  ing specifies th
+00002c90: 6174 2074 6865 2063 6c69 656e 7420 7368  at the client sh
+00002ca0: 6f75 6c64 0a61 7474 656d 7074 2074 6f20  ould.attempt to 
+00002cb0: 6372 6561 7465 2061 6e20 2269 6e73 6563  create an "insec
+00002cc0: 7572 6522 2063 6f6e 6e65 6374 696f 6e20  ure" connection 
+00002cd0: 746f 2070 6f72 7420 3231 3134 206f 6e20  to port 2114 on 
+00002ce0: 226c 6f63 616c 686f 7374 222e 0a57 6865  "localhost"..Whe
+00002cf0: 6e20 636f 6e6e 6563 7469 6e67 2074 6f20  n connecting to 
+00002d00: 616e 2022 696e 7365 6375 7265 2220 7365  an "insecure" se
+00002d10: 7276 6572 2c20 7468 6520 636c 6965 6e74  rver, the client
+00002d20: 2077 696c 6c20 6967 6e6f 7265 2061 6e79   will ignore any
+00002d30: 0a75 7365 726e 616d 6520 616e 6420 7061  .username and pa
+00002d40: 7373 776f 7264 2069 6e66 6f72 6d61 7469  ssword informati
+00002d50: 6f6e 2069 6e63 6c75 6465 6420 696e 2074  on included in t
+00002d60: 6865 2063 6f6e 6e65 6374 696f 6e20 7374  he connection st
+00002d70: 7269 6e67 2c0a 736f 2074 6861 7420 7573  ring,.so that us
+00002d80: 6572 6e61 6d65 7320 616e 6420 7061 7373  ernames and pass
+00002d90: 776f 7264 7320 6172 6520 6e6f 7420 7365  words are not se
+00002da0: 6e74 206f 7665 7220 616e 2022 696e 7365  nt over an "inse
+00002db0: 6375 7265 2220 636f 6e6e 6563 7469 6f6e  cure" connection
+00002dc0: 2e0a 0a20 2020 2065 7364 623a 2f2f 6c6f  ...    esdb://lo
+00002dd0: 6361 6c68 6f73 743a 3231 3134 3f54 6c73  calhost:2114?Tls
+00002de0: 3d66 616c 7365 0a0a 506c 6561 7365 206e  =false..Please n
+00002df0: 6f74 652c 2074 6865 2022 696e 7365 6375  ote, the "insecu
+00002e00: 7265 2220 636f 6e6e 6563 7469 6f6e 2073  re" connection s
+00002e10: 7472 696e 6720 7573 6573 2061 2071 7565  tring uses a que
+00002e20: 7279 2073 7472 696e 6720 7769 7468 2074  ry string with t
+00002e30: 6865 2066 6965 6c64 2d76 616c 7565 0a60  he field-value.`
+00002e40: 546c 733d 6661 6c73 6560 2e20 5468 6520  Tls=false`. The 
+00002e50: 7661 6c75 6520 6f66 2074 6869 7320 6669  value of this fi
+00002e60: 656c 6420 6973 2062 7920 6465 6661 756c  eld is by defaul
+00002e70: 7420 6074 7275 6560 2e20 556e 6c65 7373  t `true`. Unless
+00002e80: 2074 6865 2063 6f6e 6e65 6374 696f 6e20   the connection 
+00002e90: 7374 7269 6e67 0a55 5249 2069 6e63 6c75  string.URI inclu
+00002ea0: 6465 7320 7468 6520 6669 656c 642d 7661  des the field-va
+00002eb0: 6c75 6520 6054 6c73 3d66 616c 7365 6020  lue `Tls=false` 
+00002ec0: 696e 2074 6865 2071 7565 7279 2073 7472  in the query str
+00002ed0: 696e 672c 2074 6865 2060 726f 6f74 5f63  ing, the `root_c
+00002ee0: 6572 7469 6669 6361 7465 7360 0a63 6f6e  ertificates`.con
+00002ef0: 7374 7275 6374 6f72 2061 7267 756d 656e  structor argumen
+00002f00: 7420 6973 2061 6c73 6f20 7265 7175 6972  t is also requir
+00002f10: 6564 2e0a 0a57 6865 6e20 636f 6e6e 6563  ed...When connec
+00002f20: 7469 6e67 2074 6f20 6120 2273 6563 7572  ting to a "secur
+00002f30: 6522 2073 6572 7665 722c 2074 6865 2060  e" server, the `
+00002f40: 726f 6f74 5f63 6572 7469 6669 6361 7465  root_certificate
+00002f50: 7360 2061 7267 756d 656e 7420 6973 2065  s` argument is e
+00002f60: 7870 6563 7465 6420 746f 0a62 6520 6120  xpected to.be a 
+00002f70: 5079 7468 6f6e 2060 7374 7260 2063 6f6e  Python `str` con
+00002f80: 7461 696e 696e 6720 5045 4d20 656e 636f  taining PEM enco
+00002f90: 6465 6420 5353 4c2f 544c 5320 726f 6f74  ded SSL/TLS root
+00002fa0: 2063 6572 7469 6669 6361 7465 732e 2054   certificates. T
+00002fb0: 6869 7320 7661 6c75 6520 6973 0a70 6173  his value is.pas
+00002fc0: 7365 6420 6469 7265 6374 6c79 2074 6f20  sed directly to 
+00002fd0: 6067 7270 632e 7373 6c5f 6368 616e 6e65  `grpc.ssl_channe
+00002fe0: 6c5f 6372 6564 656e 7469 616c 7328 2960  l_credentials()`
+00002ff0: 2e20 4974 2069 7320 7573 6564 2066 6f72  . It is used for
+00003000: 2061 7574 6865 6e74 6963 6174 696e 6720   authenticating 
+00003010: 7468 650a 7365 7276 6572 2074 6f20 7468  the.server to th
+00003020: 6520 636c 6965 6e74 2e20 4974 2069 7320  e client. It is 
+00003030: 636f 6d6d 6f6e 6c79 2074 6865 2063 6572  commonly the cer
+00003040: 7469 6669 6361 7465 206f 6620 7468 6520  tificate of the 
+00003050: 6365 7274 6966 6963 6174 6520 6175 7468  certificate auth
+00003060: 6f72 6974 7920 7468 6174 0a77 6173 2072  ority that.was r
+00003070: 6573 706f 6e73 6962 6c65 2066 6f72 2067  esponsible for g
+00003080: 656e 6572 6174 696e 6720 7468 6520 5353  enerating the SS
+00003090: 4c2f 544c 5320 6365 7274 6966 6963 6174  L/TLS certificat
+000030a0: 6520 7573 6564 2062 7920 7468 6520 4576  e used by the Ev
+000030b0: 656e 7453 746f 7265 4442 2073 6572 7665  entStoreDB serve
+000030c0: 722e 0a42 7574 2c20 616c 7465 726e 6174  r..But, alternat
+000030d0: 6976 656c 7920 666f 7220 6465 7665 6c6f  ively for develo
+000030e0: 706d 656e 742c 2079 6f75 2063 616e 2075  pment, you can u
+000030f0: 7365 2074 6865 2073 6572 7665 7227 7320  se the server's 
+00003100: 6365 7274 6966 6963 6174 6520 6974 7365  certificate itse
+00003110: 6c66 2e0a 0a49 6e20 7468 6520 6578 616d  lf...In the exam
+00003120: 706c 6520 6265 6c6f 772c 2074 6865 2063  ple below, the c
+00003130: 6f6e 7374 7275 6374 6f72 2061 7267 756d  onstructor argum
+00003140: 656e 7420 7661 6c75 6573 2061 7265 2074  ent values are t
+00003150: 616b 656e 2066 726f 6d20 7468 6520 6f70  aken from the op
+00003160: 6572 6174 696e 670a 7379 7374 656d 2065  erating.system e
+00003170: 6e76 6972 6f6e 6d65 6e74 2e20 5468 6973  nvironment. This
+00003180: 2069 7320 6120 7479 7069 6361 6c20 6172   is a typical ar
+00003190: 7261 6e67 656d 656e 7420 696e 2061 2070  rangement in a p
+000031a0: 726f 6475 6374 696f 6e20 656e 7669 726f  roduction enviro
+000031b0: 6e6d 656e 742e 2049 7420 6973 0a64 6f6e  nment. It is.don
+000031c0: 6520 7468 6973 2077 6179 2068 6572 6520  e this way here 
+000031d0: 736f 2074 6861 7420 7468 6520 636f 6465  so that the code
+000031e0: 2069 6e20 7468 6973 2064 6f63 756d 656e   in this documen
+000031f0: 7461 7469 6f6e 2063 616e 2062 6520 7465  tation can be te
+00003200: 7374 6564 2077 6974 6820 626f 7468 0a61  sted with both.a
+00003210: 2022 7365 6375 7265 2220 616e 6420 616e   "secure" and an
+00003220: 2022 696e 7365 6375 7265 2220 7365 7276   "insecure" serv
+00003230: 6572 2e0a 0a60 6060 7079 7468 6f6e 0a69  er...```python.i
+00003240: 6d70 6f72 7420 6f73 0a0a 636c 6965 6e74  mport os..client
+00003250: 203d 2045 5344 4243 6c69 656e 7428 0a20   = ESDBClient(. 
+00003260: 2020 2075 7269 3d6f 732e 6765 7465 6e76     uri=os.getenv
+00003270: 2822 4553 4442 5f55 5249 2229 2c0a 2020  ("ESDB_URI"),.  
+00003280: 2020 726f 6f74 5f63 6572 7469 6669 6361    root_certifica
+00003290: 7465 733d 6f73 2e67 6574 656e 7628 2245  tes=os.getenv("E
+000032a0: 5344 425f 524f 4f54 5f43 4552 5449 4649  SDB_ROOT_CERTIFI
+000032b0: 4341 5445 5322 292c 0a29 0a60 6060 0a0a  CATES"),.).```..
+000032c0: 5365 6520 7468 6520 4e6f 7465 7320 7365  See the Notes se
+000032d0: 6374 696f 6e20 6265 6c6f 7720 666f 7220  ction below for 
+000032e0: 6465 7461 696c 6564 2069 6e66 6f72 6d61  detailed informa
+000032f0: 7469 6f6e 2061 626f 7574 2045 7665 6e74  tion about Event
+00003300: 5374 6f72 6544 4220 636f 6e6e 6563 7469  StoreDB connecti
+00003310: 6f6e 0a73 7472 696e 6773 2061 6e64 2074  on.strings and t
+00003320: 6865 2066 6965 6c64 7320 7468 6174 2063  he fields that c
+00003330: 616e 2062 6520 7573 6564 2069 6e20 7468  an be used in th
+00003340: 6520 7175 6572 7920 7374 7269 6e67 2074  e query string t
+00003350: 6f20 7370 6563 6966 7920 636f 6e6e 6563  o specify connec
+00003360: 7469 6f6e 0a6f 7074 696f 6e73 2e0a 0a23  tion.options...#
+00003370: 2320 5374 7265 616d 730a 0a49 6e20 4576  # Streams..In Ev
+00003380: 656e 7453 746f 7265 4442 2c20 6120 2273  entStoreDB, a "s
+00003390: 7472 6561 6d22 2069 7320 6120 7365 7175  tream" is a sequ
+000033a0: 656e 6365 206f 6620 7265 636f 7264 6564  ence of recorded
+000033b0: 2065 7665 6e74 7320 7468 6174 2061 6c6c   events that all
+000033c0: 2068 6176 650a 7468 6520 7361 6d65 2022   have.the same "
+000033d0: 7374 7265 616d 206e 616d 6522 2e20 5468  stream name". Th
+000033e0: 6572 6520 7769 6c6c 206e 6f72 6d61 6c6c  ere will normall
+000033f0: 7920 6265 206d 616e 7920 7374 7265 616d  y be many stream
+00003400: 7320 696e 2061 2064 6174 6162 6173 652e  s in a database.
+00003410: 0a45 6163 6820 7265 636f 7264 6564 2065  .Each recorded e
+00003420: 7665 6e74 2068 6173 2061 2022 7374 7265  vent has a "stre
+00003430: 616d 2070 6f73 6974 696f 6e22 2069 6e20  am position" in 
+00003440: 6974 7320 7374 7265 616d 2c20 616e 6420  its stream, and 
+00003450: 6120 2263 6f6d 6d69 7420 706f 7369 7469  a "commit positi
+00003460: 6f6e 220a 696e 2074 6865 2064 6174 6162  on".in the datab
+00003470: 6173 652e 2054 6865 2073 7472 6561 6d20  ase. The stream 
+00003480: 706f 7369 7469 6f6e 7320 6f66 2074 6865  positions of the
+00003490: 2072 6563 6f72 6465 6420 6576 656e 7473   recorded events
+000034a0: 2069 6e20 6120 7374 7265 616d 2069 7320   in a stream is 
+000034b0: 6120 6761 706c 6573 730a 7365 7175 656e  a gapless.sequen
+000034c0: 6365 2073 7461 7274 696e 6720 6672 6f6d  ce starting from
+000034d0: 207a 6572 6f2e 2054 6865 2063 6f6d 6d69   zero. The commi
+000034e0: 7420 706f 7369 7469 6f6e 7320 6f66 2074  t positions of t
+000034f0: 6865 2072 6563 6f72 6465 6420 6576 656e  he recorded even
+00003500: 7473 2069 6e20 7468 6520 6461 7461 6261  ts in the databa
+00003510: 7365 0a66 6f72 6d20 6120 7365 7175 656e  se.form a sequen
+00003520: 6365 2074 6861 7420 6973 206e 6f74 2067  ce that is not g
+00003530: 6170 6c65 7373 2e0a 0a54 6865 206d 6574  apless...The met
+00003540: 686f 6473 2060 6170 7065 6e64 5f65 7665  hods `append_eve
+00003550: 6e74 7328 2960 2c20 6072 6561 645f 7374  nts()`, `read_st
+00003560: 7265 616d 5f65 7665 6e74 7328 2960 2061  ream_events()` a
+00003570: 6e64 2060 7265 6164 5f61 6c6c 5f65 7665  nd `read_all_eve
+00003580: 6e74 7328 2960 2063 616e 0a62 6520 7573  nts()` can.be us
+00003590: 6564 2074 6f20 7265 636f 7264 2061 6e64  ed to record and
+000035a0: 2072 6561 6420 6576 656e 7473 2069 6e20   read events in 
+000035b0: 7468 6520 6461 7461 6261 7365 2e0a 0a23  the database...#
+000035c0: 2323 2041 7070 656e 6420 6576 656e 7473  ## Append events
+000035d0: 0a0a 2a72 6571 7569 7265 7320 6c65 6164  ..*requires lead
+000035e0: 6572 2a0a 0a54 6865 2060 6170 7065 6e64  er*..The `append
+000035f0: 5f65 7665 6e74 7328 2960 206d 6574 686f  _events()` metho
+00003600: 6420 6361 6e20 6265 2075 7365 6420 746f  d can be used to
+00003610: 2077 7269 7465 2061 2073 6571 7565 6e63   write a sequenc
+00003620: 6520 6f66 206e 6577 2065 7665 6e74 7320  e of new events 
+00003630: 6174 6f6d 6963 616c 6c79 0a74 6f20 6120  atomically.to a 
+00003640: 2273 7472 6561 6d22 2e20 5772 6974 696e  "stream". Writin
+00003650: 6720 6e65 7720 6576 656e 7473 2065 6974  g new events eit
+00003660: 6865 7220 6372 6561 7465 7320 6120 7374  her creates a st
+00003670: 7265 616d 2c20 6f72 2061 7070 656e 6473  ream, or appends
+00003680: 2065 7665 6e74 7320 746f 2074 6865 2065   events to the e
+00003690: 6e64 0a6f 6620 6120 7374 7265 616d 2e20  nd.of a stream. 
+000036a0: 5468 6973 206d 6574 686f 6420 6973 2069  This method is i
+000036b0: 6465 6d70 6f74 656e 7420 2873 6565 2062  dempotent (see b
+000036c0: 656c 6f77 292e 0a0a 5468 6973 206d 6574  elow)...This met
+000036d0: 686f 6420 6361 6e20 6265 2075 7365 6420  hod can be used 
+000036e0: 746f 2072 6563 6f72 6420 6174 6f6d 6963  to record atomic
+000036f0: 616c 6c79 2061 6c6c 2074 6865 206e 6577  ally all the new
+00003700: 0a65 7665 6e74 7320 7468 6174 2061 7265  .events that are
+00003710: 2067 656e 6572 6174 6564 2077 6865 6e20   generated when 
+00003720: 6578 6563 7574 696e 6720 6120 636f 6d6d  executing a comm
+00003730: 616e 6420 696e 2061 6e20 6170 706c 6963  and in an applic
+00003740: 6174 696f 6e2e 0a0a 5468 7265 6520 6172  ation...Three ar
+00003750: 6775 6d65 6e74 7320 6172 6520 7265 7175  guments are requ
+00003760: 6972 6564 2c20 6073 7472 6561 6d5f 6e61  ired, `stream_na
+00003770: 6d65 602c 2060 6578 7065 6374 6564 5f70  me`, `expected_p
+00003780: 6f73 6974 696f 6e60 0a61 6e64 2060 6576  osition`.and `ev
+00003790: 656e 7473 602e 0a0a 5468 6520 6073 7472  ents`...The `str
+000037a0: 6561 6d5f 6e61 6d65 6020 6172 6775 6d65  eam_name` argume
+000037b0: 6e74 2069 7320 7265 7175 6972 6564 2c20  nt is required, 
+000037c0: 616e 6420 6973 2065 7870 6563 7465 6420  and is expected 
+000037d0: 746f 2062 6520 6120 5079 7468 6f6e 0a60  to be a Python.`
+000037e0: 7374 7260 2074 6861 7420 756e 6971 7565  str` that unique
+000037f0: 6c79 2069 6465 6e74 6966 6965 7320 7468  ly identifies th
+00003800: 6520 7374 7265 616d 2069 6e20 7468 6520  e stream in the 
+00003810: 6461 7461 6261 7365 2e0a 0a54 6865 2060  database...The `
 00003820: 6578 7065 6374 6564 5f70 6f73 6974 696f  expected_positio
-00003830: 6e60 0a61 7267 756d 656e 7420 7768 656e  n`.argument when
-00003840: 2077 7269 7469 6e67 2074 6865 2066 6972   writing the fir
-00003850: 7374 2065 7665 6e74 206f 6620 6120 6e65  st event of a ne
-00003860: 7720 7374 7265 616d 2069 7320 604e 6f6e  w stream is `Non
-00003870: 6560 2e20 506c 6561 7365 206e 6f74 652c  e`. Please note,
-00003880: 2069 7420 6973 0a6e 6f74 2070 6f73 7369   it is.not possi
-00003890: 626c 6520 746f 2073 6f6d 6568 6f77 2063  ble to somehow c
-000038a0: 7265 6174 6520 616e 2022 656d 7074 7922  reate an "empty"
-000038b0: 2073 7472 6561 6d20 696e 2045 7665 6e74   stream in Event
-000038c0: 5374 6f72 6544 422e 0a0a 5468 6520 7374  StoreDB...The st
-000038d0: 7265 616d 2070 6f73 6974 696f 6e73 206f  ream positions o
-000038e0: 6620 7265 636f 7264 6564 2065 7665 6e74  f recorded event
-000038f0: 7320 696e 2061 2073 7472 6561 6d20 7374  s in a stream st
-00003900: 6172 7420 6672 6f6d 207a 6572 6f2c 2061  art from zero, a
-00003910: 6e64 2066 6f72 6d20 6120 6761 706c 6573  nd form a gaples
-00003920: 730a 7365 7175 656e 6365 206f 6620 696e  s.sequence of in
-00003930: 7465 6765 7273 2e20 5468 6520 7374 7265  tegers. The stre
-00003940: 616d 2070 6f73 6974 696f 6e20 6f66 2074  am position of t
-00003950: 6865 2066 6972 7374 2072 6563 6f72 6465  he first recorde
-00003960: 6420 6576 656e 7420 696e 2061 2073 7472  d event in a str
-00003970: 6561 6d20 6973 0a60 3060 2e20 416e 6420  eam is.`0`. And 
-00003980: 736f 2077 6865 6e20 6170 7065 6e64 696e  so when appendin
-00003990: 6720 7468 6520 7365 636f 6e64 206e 6577  g the second new
-000039a0: 2065 7665 6e74 2074 6f20 6120 7374 7265   event to a stre
-000039b0: 616d 2074 6861 7420 6861 7320 6f6e 6520  am that has one 
-000039c0: 7265 636f 7264 6564 2065 7665 6e74 2c0a  recorded event,.
-000039d0: 7468 6520 636f 7272 6563 7420 7661 6c75  the correct valu
-000039e0: 6520 6f66 2074 6865 2060 6578 7065 6374  e of the `expect
-000039f0: 6564 5f70 6f73 6974 696f 6e60 2061 7267  ed_position` arg
-00003a00: 756d 656e 7420 6973 2060 3060 2e20 5369  ument is `0`. Si
-00003a10: 6d69 6c61 726c 792c 2074 6865 2073 7472  milarly, the str
-00003a20: 6561 6d0a 706f 7369 7469 6f6e 206f 6620  eam.position of 
-00003a30: 7468 6520 7365 636f 6e64 2072 6563 6f72  the second recor
-00003a40: 6465 6420 6576 656e 7420 696e 2061 2073  ded event in a s
-00003a50: 7472 6561 6d20 6973 2060 3160 2c20 616e  tream is `1`, an
-00003a60: 6420 736f 2077 6865 6e20 6170 7065 6e64  d so when append
-00003a70: 696e 6720 7468 650a 7468 6972 6420 6e65  ing the.third ne
-00003a80: 7720 6576 656e 7420 746f 2061 2073 7472  w event to a str
-00003a90: 6561 6d20 7468 6174 2068 6173 2074 776f  eam that has two
-00003aa0: 2072 6563 6f72 6465 6420 6576 656e 7473   recorded events
-00003ab0: 2c20 7468 6520 636f 7272 6563 7420 7661  , the correct va
-00003ac0: 6c75 6520 6f66 2074 6865 0a60 6578 7065  lue of the.`expe
-00003ad0: 6374 6564 5f70 6f73 6974 696f 6e60 2061  cted_position` a
-00003ae0: 7267 756d 656e 7420 6973 2060 3160 2e20  rgument is `1`. 
-00003af0: 416e 6420 736f 206f 6e2e 2e2e 2028 5468  And so on... (Th
-00003b00: 6572 6520 6973 2061 2074 6865 6f72 6574  ere is a theoret
-00003b10: 6963 616c 206d 6178 696d 756d 0a6e 756d  ical maximum.num
-00003b20: 6265 7220 6f66 2072 6563 6f72 6465 6420  ber of recorded 
-00003b30: 6576 656e 7473 2074 6861 7420 616e 7920  events that any 
-00003b40: 7374 7265 616d 2063 616e 2068 6176 652c  stream can have,
-00003b50: 2062 7574 2049 276d 206e 6f74 2073 7572   but I'm not sur
-00003b60: 6520 7768 6174 2069 7420 6973 3b0a 6d61  e what it is;.ma
-00003b70: 7962 6520 392c 3232 332c 3337 322c 3033  ybe 9,223,372,03
-00003b80: 362c 3835 342c 3737 352c 3830 3720 6265  6,854,775,807 be
-00003b90: 6361 7573 6520 6974 2069 7320 696d 706c  cause it is impl
-00003ba0: 656d 656e 7465 6420 6173 2061 2060 6c6f  emented as a `lo
-00003bb0: 6e67 6020 696e 2043 233f 290a 0a49 6620  ng` in C#?)..If 
-00003bc0: 7468 6572 6520 6973 2061 206d 6973 6d61  there is a misma
-00003bd0: 7463 6820 6265 7477 6565 6e20 7468 6520  tch between the 
-00003be0: 6769 7665 6e20 7661 6c75 6520 6f66 2074  given value of t
-00003bf0: 6865 2060 6578 7065 6374 6564 5f70 6f73  he `expected_pos
-00003c00: 6974 696f 6e60 2061 7267 756d 656e 740a  ition` argument.
-00003c10: 616e 6420 7468 6520 706f 7369 7469 6f6e  and the position
-00003c20: 206f 6620 7468 6520 6c61 7374 2072 6563   of the last rec
-00003c30: 6f72 6465 6420 6576 656e 7420 696e 2061  orded event in a
-00003c40: 2073 7472 6561 6d2c 2074 6865 6e20 616e   stream, then an
-00003c50: 2060 4578 7065 6374 6564 506f 7369 7469   `ExpectedPositi
-00003c60: 6f6e 4572 726f 7260 0a65 7863 6570 7469  onError`.excepti
-00003c70: 6f6e 2077 696c 6c20 6265 2072 6169 7365  on will be raise
-00003c80: 642e 2054 6869 7320 6566 6665 6374 6976  d. This effectiv
-00003c90: 656c 7920 6163 636f 6d70 6c69 7368 6573  ely accomplishes
-00003ca0: 206f 7074 696d 6973 7469 6320 636f 6e63   optimistic conc
-00003cb0: 7572 7265 6e63 7920 636f 6e74 726f 6c2e  urrency control.
-00003cc0: 0a0a 4966 2079 6f75 2077 6973 6820 746f  ..If you wish to
-00003cd0: 2064 6973 6162 6c65 206f 7074 696d 6973   disable optimis
-00003ce0: 7469 6320 636f 6e63 7572 7265 6e63 7920  tic concurrency 
-00003cf0: 636f 6e74 726f 6c20 7768 656e 2061 7070  control when app
-00003d00: 656e 6469 6e67 206e 6577 2065 7665 6e74  ending new event
-00003d10: 732c 2079 6f75 0a63 616e 2073 6574 2074  s, you.can set t
-00003d20: 6865 2060 6578 7065 6374 6564 5f70 6f73  he `expected_pos
-00003d30: 6974 696f 6e60 2074 6f20 6120 6e65 6761  ition` to a nega
-00003d40: 7469 7665 2069 6e74 6567 6572 2e0a 0a49  tive integer...I
-00003d50: 6620 796f 7520 6e65 6564 2074 6f20 6469  f you need to di
-00003d60: 7363 6f76 6572 2074 6865 2063 7572 7265  scover the curre
-00003d70: 6e74 2070 6f73 6974 696f 6e20 6f66 2074  nt position of t
-00003d80: 6865 206c 6173 7420 7265 636f 7264 6564  he last recorded
-00003d90: 2065 7665 6e74 2069 6e20 6120 7374 7265   event in a stre
-00003da0: 616d 2c0a 796f 7520 6361 6e20 7573 6520  am,.you can use 
-00003db0: 7468 6520 6067 6574 5f73 7472 6561 6d5f  the `get_stream_
-00003dc0: 706f 7369 7469 6f6e 2829 6020 6d65 7468  position()` meth
-00003dd0: 6f64 2028 7365 6520 6265 6c6f 7729 2e0a  od (see below)..
-00003de0: 0a50 6c65 6173 6520 6e6f 7465 2c20 7468  .Please note, th
-00003df0: 6520 6170 7065 6e64 2065 7665 6e74 7320  e append events 
-00003e00: 6f70 6572 6174 696f 6e20 6973 2061 746f  operation is ato
-00003e10: 6d69 632c 2073 6f20 7468 6174 2065 6974  mic, so that eit
-00003e20: 6865 7220 616c 6c0a 6f72 206e 6f6e 6520  her all.or none 
-00003e30: 6f66 2074 6865 2067 6976 656e 206e 6577  of the given new
-00003e40: 2065 7665 6e74 7320 7769 6c6c 2062 6520   events will be 
-00003e50: 7265 636f 7264 6564 2e20 4279 2064 6573  recorded. By des
-00003e60: 6967 6e2c 2069 7420 6973 206f 6e6c 790a  ign, it is only.
-00003e70: 706f 7373 6962 6c65 2077 6974 6820 4576  possible with Ev
-00003e80: 656e 7453 746f 7265 4442 2074 6f20 6174  entStoreDB to at
-00003e90: 6f6d 6963 616c 6c79 2072 6563 6f72 6420  omically record 
-00003ea0: 6e65 7720 6576 656e 7473 2069 6e20 6f6e  new events in on
-00003eb0: 6520 7374 7265 616d 2e0a 0a49 6e20 7468  e stream...In th
-00003ec0: 6520 6578 616d 706c 6520 6265 6c6f 772c  e example below,
-00003ed0: 2061 206e 6577 2065 7665 6e74 2069 7320   a new event is 
-00003ee0: 6170 7065 6e64 6564 2074 6f20 6120 6e65  appended to a ne
-00003ef0: 7720 7374 7265 616d 2e0a 0a60 6060 7079  w stream...```py
-00003f00: 7468 6f6e 0a66 726f 6d20 7575 6964 2069  thon.from uuid i
-00003f10: 6d70 6f72 7420 7575 6964 340a 0a66 726f  mport uuid4..fro
-00003f20: 6d20 6573 6462 636c 6965 6e74 2069 6d70  m esdbclient imp
-00003f30: 6f72 7420 4e65 7745 7665 6e74 0a0a 2320  ort NewEvent..# 
-00003f40: 436f 6e73 7472 7563 7420 6e65 7720 6576  Construct new ev
-00003f50: 656e 7420 6f62 6a65 6374 2e0a 6576 656e  ent object..even
-00003f60: 7431 203d 204e 6577 4576 656e 7428 7479  t1 = NewEvent(ty
-00003f70: 7065 3d27 4f72 6465 7243 7265 6174 6564  pe='OrderCreated
-00003f80: 272c 2064 6174 613d 6227 6461 7461 3127  ', data=b'data1'
-00003f90: 290a 0a23 2044 6566 696e 6520 7374 7265  )..# Define stre
-00003fa0: 616d 206e 616d 652e 0a73 7472 6561 6d5f  am name..stream_
-00003fb0: 6e61 6d65 3120 3d20 7374 7228 7575 6964  name1 = str(uuid
-00003fc0: 3428 2929 0a0a 2320 4170 7065 6e64 206c  4())..# Append l
-00003fd0: 6973 7420 6f66 2065 7665 6e74 7320 746f  ist of events to
-00003fe0: 206e 6577 2073 7472 6561 6d2e 0a63 6f6d   new stream..com
-00003ff0: 6d69 745f 706f 7369 7469 6f6e 3120 3d20  mit_position1 = 
-00004000: 636c 6965 6e74 2e61 7070 656e 645f 6576  client.append_ev
-00004010: 656e 7473 280a 2020 2020 7374 7265 616d  ents(.    stream
-00004020: 5f6e 616d 653d 7374 7265 616d 5f6e 616d  _name=stream_nam
-00004030: 6531 2c0a 2020 2020 6578 7065 6374 6564  e1,.    expected
-00004040: 5f70 6f73 6974 696f 6e3d 4e6f 6e65 2c0a  _position=None,.
-00004050: 2020 2020 6576 656e 7473 3d5b 6576 656e      events=[even
-00004060: 7431 5d2c 0a29 0a60 6060 0a0a 496e 2074  t1],.).```..In t
-00004070: 6865 2065 7861 6d70 6c65 2062 656c 6f77  he example below
-00004080: 2c20 7477 6f20 7375 6273 6571 7565 6e74  , two subsequent
-00004090: 2065 7665 6e74 7320 6172 6520 6170 7065   events are appe
-000040a0: 6e64 6564 2074 6f20 616e 2065 7869 7374  nded to an exist
-000040b0: 696e 670a 7374 7265 616d 2e0a 0a60 6060  ing.stream...```
-000040c0: 7079 7468 6f6e 0a65 7665 6e74 3220 3d20  python.event2 = 
-000040d0: 4e65 7745 7665 6e74 2874 7970 653d 274f  NewEvent(type='O
-000040e0: 7264 6572 5570 6461 7465 6427 2c20 6461  rderUpdated', da
-000040f0: 7461 3d62 2764 6174 6132 2729 0a65 7665  ta=b'data2').eve
-00004100: 6e74 3320 3d20 4e65 7745 7665 6e74 2874  nt3 = NewEvent(t
-00004110: 7970 653d 274f 7264 6572 4465 6c65 7465  ype='OrderDelete
-00004120: 6427 2c20 6461 7461 3d62 2764 6174 6133  d', data=b'data3
-00004130: 2729 0a0a 636f 6d6d 6974 5f70 6f73 6974  ')..commit_posit
-00004140: 696f 6e32 203d 2063 6c69 656e 742e 6170  ion2 = client.ap
-00004150: 7065 6e64 5f65 7665 6e74 7328 0a20 2020  pend_events(.   
-00004160: 2073 7472 6561 6d5f 6e61 6d65 3d73 7472   stream_name=str
-00004170: 6561 6d5f 6e61 6d65 312c 0a20 2020 2065  eam_name1,.    e
-00004180: 7870 6563 7465 645f 706f 7369 7469 6f6e  xpected_position
-00004190: 3d30 2c0a 2020 2020 6576 656e 7473 3d5b  =0,.    events=[
-000041a0: 6576 656e 7432 2c20 6576 656e 7433 5d2c  event2, event3],
-000041b0: 0a29 0a60 6060 0a0a 4966 2074 6865 206f  .).```..If the o
-000041c0: 7065 7261 7469 6f6e 2069 7320 7375 6363  peration is succ
-000041d0: 6573 7366 756c 2c20 7468 6973 206d 6574  essful, this met
-000041e0: 686f 6420 7265 7475 726e 7320 616e 2069  hod returns an i
-000041f0: 6e74 6567 6572 0a72 6570 7265 7365 6e74  nteger.represent
-00004200: 696e 6720 7468 6520 6f76 6572 616c 6c20  ing the overall 
-00004210: 2263 6f6d 6d69 7420 706f 7369 7469 6f6e  "commit position
-00004220: 2220 6173 2069 7420 7761 7320 7768 656e  " as it was when
-00004230: 2074 6865 206f 7065 7261 7469 6f6e 0a77   the operation.w
-00004240: 6173 2063 6f6d 706c 6574 6564 2e20 4f74  as completed. Ot
-00004250: 6865 7277 6973 652c 2061 6e20 6578 6365  herwise, an exce
-00004260: 7074 696f 6e20 7769 6c6c 2062 6520 7261  ption will be ra
-00004270: 6973 6564 2e0a 0a41 2022 636f 6d6d 6974  ised...A "commit
-00004280: 2070 6f73 6974 696f 6e22 2069 7320 6120   position" is a 
-00004290: 6d6f 6e6f 746f 6e69 6361 6c6c 7920 696e  monotonically in
-000042a0: 6372 6561 7369 6e67 2069 6e74 6567 6572  creasing integer
-000042b0: 2072 6570 7265 7365 6e74 696e 670a 7468   representing.th
-000042c0: 6520 706f 7369 7469 6f6e 206f 6620 7468  e position of th
-000042d0: 6520 7265 636f 7264 6564 2065 7665 6e74  e recorded event
-000042e0: 2069 6e20 6120 2274 6f74 616c 206f 7264   in a "total ord
-000042f0: 6572 2220 6f66 2061 6c6c 2072 6563 6f72  er" of all recor
-00004300: 6465 640a 6576 656e 7473 2069 6e20 7468  ded.events in th
-00004310: 6520 6461 7461 6261 7365 2061 6372 6f73  e database acros
-00004320: 7320 616c 6c20 7374 7265 616d 732e 2049  s all streams. I
-00004330: 7420 6973 2074 6865 2061 6374 7561 6c20  t is the actual 
-00004340: 706f 7369 7469 6f6e 0a6f 6620 7468 6520  position.of the 
-00004350: 6576 656e 7420 7265 636f 7264 206f 6e20  event record on 
-00004360: 6469 736b 2c20 616e 6420 7468 6572 6520  disk, and there 
-00004370: 6172 6520 7573 7561 6c6c 7920 6c61 7267  are usually larg
-00004380: 6520 6469 6666 6572 656e 6365 730a 6265  e differences.be
-00004390: 7477 6565 6e20 7375 6363 6573 7369 7665  tween successive
-000043a0: 2063 6f6d 6d69 7473 2e20 496e 2063 6f6e   commits. In con
-000043b0: 7365 7175 656e 6365 2c20 7468 6520 7365  sequence, the se
-000043c0: 7175 656e 6365 206f 6620 636f 6d6d 6974  quence of commit
-000043d0: 0a70 6f73 6974 696f 6e73 2069 7320 6e6f  .positions is no
-000043e0: 7420 6761 706c 6573 732e 2049 6e64 6565  t gapless. Indee
-000043f0: 642c 2074 6865 7265 2061 7265 2075 7375  d, there are usu
-00004400: 616c 6c79 206c 6172 6765 2064 6966 6665  ally large diffe
-00004410: 7265 6e63 6573 0a62 6574 7765 656e 2074  rences.between t
-00004420: 6865 2063 6f6d 6d69 7420 706f 7369 7469  he commit positi
-00004430: 6f6e 7320 6f66 2073 7563 6365 7373 6976  ons of successiv
-00004440: 6520 7265 636f 7264 6564 2065 7665 6e74  e recorded event
-00004450: 732e 0a0a 5468 6520 2263 6f6d 6d69 7420  s...The "commit 
-00004460: 706f 7369 7469 6f6e 2220 7265 7475 726e  position" return
-00004470: 6564 2062 7920 6061 7070 656e 645f 6576  ed by `append_ev
-00004480: 656e 7473 2829 6020 6973 2074 6861 7420  ents()` is that 
-00004490: 6f66 2074 6865 206c 6173 740a 7265 636f  of the last.reco
-000044a0: 7264 6564 2065 7665 6e74 2069 6e20 7468  rded event in th
-000044b0: 6520 6769 7665 6e20 6261 7463 6820 6f66  e given batch of
-000044c0: 206e 6577 2065 7665 6e74 732e 0a0a 5468   new events...Th
-000044d0: 6520 2263 6f6d 6d69 7420 706f 7369 7469  e "commit positi
-000044e0: 6f6e 2220 7265 7475 726e 6564 2069 6e20  on" returned in 
-000044f0: 7468 6973 2077 6179 2063 616e 2074 6865  this way can the
-00004500: 7265 666f 7265 2062 6520 7573 6564 2074  refore be used t
-00004510: 6f20 7761 6974 0a66 6f72 2061 2064 6f77  o wait.for a dow
-00004520: 6e73 7472 6561 6d20 636f 6d70 6f6e 656e  nstream componen
-00004530: 7420 746f 2068 6176 6520 7072 6f63 6573  t to have proces
-00004540: 7365 6420 616c 6c20 7468 6520 6576 656e  sed all the even
-00004550: 7473 2074 6861 7420 7765 7265 2072 6563  ts that were rec
-00004560: 6f72 6465 642e 0a0a 466f 7220 6578 616d  orded...For exam
-00004570: 706c 652c 2063 6f6e 7369 6465 7220 6120  ple, consider a 
-00004580: 7573 6572 2069 6e74 6572 6661 6365 2063  user interface c
-00004590: 6f6d 6d61 6e64 2074 6861 7420 7265 7375  ommand that resu
-000045a0: 6c74 7320 696e 2074 6865 2072 6563 6f72  lts in the recor
-000045b0: 6469 6e67 0a6f 6620 6e65 7720 6576 656e  ding.of new even
-000045c0: 7473 2c20 616e 6420 6120 7175 6572 7920  ts, and a query 
-000045d0: 696e 746f 2061 6e20 6576 656e 7475 616c  into an eventual
-000045e0: 6c79 2063 6f6e 7369 7374 656e 7420 6d61  ly consistent ma
-000045f0: 7465 7269 616c 697a 6564 0a76 6965 7720  terialized.view 
-00004600: 696e 2061 2064 6f77 6e73 7472 6561 6d20  in a downstream 
-00004610: 636f 6d70 6f6e 656e 7420 7468 6174 2069  component that i
-00004620: 7320 7570 6461 7465 6420 6672 6f6d 2074  s updated from t
-00004630: 6865 7365 2065 7665 6e74 732e 2049 6620  hese events. If 
-00004640: 7468 6520 6e65 770a 6576 656e 7473 2068  the new.events h
-00004650: 6176 6520 6e6f 7420 7965 7420 6265 656e  ave not yet been
-00004660: 2070 726f 6365 7373 6564 2c20 7468 6520   processed, the 
-00004670: 7669 6577 2077 6f75 6c64 2062 6520 7374  view would be st
-00004680: 616c 652e 2054 6865 2022 636f 6d6d 6974  ale. The "commit
-00004690: 2070 6f73 6974 696f 6e22 0a63 616e 2062   position".can b
-000046a0: 6520 7573 6564 2062 7920 7468 6520 7573  e used by the us
-000046b0: 6572 2069 6e74 6572 6661 6365 2074 6f20  er interface to 
-000046c0: 706f 6c6c 2074 6865 2064 6f77 6e73 7472  poll the downstr
-000046d0: 6561 6d20 636f 6d70 6f6e 656e 7420 756e  eam component un
-000046e0: 7469 6c20 6974 2068 6173 0a70 726f 6365  til it has.proce
-000046f0: 7373 6564 2074 686f 7365 206e 6577 2065  ssed those new e
-00004700: 7665 6e74 732c 2061 6674 6572 2077 6869  vents, after whi
-00004710: 6368 2074 696d 6520 7468 6520 7669 6577  ch time the view
-00004720: 2077 696c 6c20 6e6f 7420 6265 2073 7461   will not be sta
-00004730: 6c65 2e0a 0a0a 2323 2320 4170 7065 6e64  le....### Append
-00004740: 2065 7665 6e74 0a0a 5468 6520 6061 7070   event..The `app
-00004750: 656e 645f 6576 656e 7428 2960 206d 6574  end_event()` met
-00004760: 686f 6420 6361 6e20 6265 2075 7365 6420  hod can be used 
-00004770: 746f 2077 7269 7465 2061 2073 696e 676c  to write a singl
-00004780: 6520 6e65 7720 6576 656e 7420 746f 2061  e new event to a
-00004790: 2073 7472 6561 6d2e 0a0a 5468 7265 6520   stream...Three 
-000047a0: 6172 6775 6d65 6e74 7320 6172 6520 7265  arguments are re
-000047b0: 7175 6972 6564 2c20 6073 7472 6561 6d5f  quired, `stream_
-000047c0: 6e61 6d65 602c 2060 6578 7065 6374 6564  name`, `expected
-000047d0: 5f70 6f73 6974 696f 6e60 2061 6e64 2060  _position` and `
-000047e0: 6576 656e 7460 2e0a 0a54 6869 7320 6d65  event`...This me
-000047f0: 7468 6f64 2077 6f72 6b73 2069 6e20 7468  thod works in th
-00004800: 6520 7361 6d65 2077 6179 2061 7320 6061  e same way as `a
-00004810: 7070 656e 645f 6576 656e 7473 2829 602c  ppend_events()`,
-00004820: 2068 6f77 6576 6572 2060 6576 656e 7460   however `event`
-00004830: 2069 7320 6578 7065 6374 6564 0a74 6f20   is expected.to 
-00004840: 6265 2061 2073 696e 676c 6520 604e 6577  be a single `New
-00004850: 4576 656e 7460 2e0a 0a54 6869 7320 6d65  Event`...This me
-00004860: 7468 6f64 2074 616b 6573 2061 6e20 6f70  thod takes an op
-00004870: 7469 6f6e 616c 2060 7469 6d65 6f75 7460  tional `timeout`
-00004880: 2061 7267 756d 656e 742c 2077 6869 6368   argument, which
-00004890: 2069 7320 6120 5079 7468 6f6e 2060 666c   is a Python `fl
-000048a0: 6f61 7460 2074 6861 7420 7365 7473 0a61  oat` that sets.a
-000048b0: 2064 6561 646c 696e 6520 666f 7220 7468   deadline for th
-000048c0: 6520 636f 6d70 6c65 7469 6f6e 206f 6620  e completion of 
-000048d0: 7468 6520 6752 5043 206f 7065 7261 7469  the gRPC operati
-000048e0: 6f6e 2e0a 0a53 696e 6365 2074 6865 2068  on...Since the h
-000048f0: 616e 646c 696e 6720 6f66 2061 2063 6f6d  andling of a com
-00004900: 6d61 6e64 2069 6e20 796f 7572 2061 7070  mand in your app
-00004910: 6c69 6361 7469 6f6e 206d 6179 2072 6573  lication may res
-00004920: 756c 7420 696e 206f 6e65 206f 7220 6d61  ult in one or ma
-00004930: 6e79 0a6e 6577 2065 7665 6e74 732c 2061  ny.new events, a
-00004940: 6e64 2074 6865 2072 6573 756c 7473 206f  nd the results o
-00004950: 6620 6861 6e64 6c69 6e67 2061 2063 6f6d  f handling a com
-00004960: 6d61 6e64 2073 686f 756c 6420 6265 2072  mand should be r
-00004970: 6563 6f72 6465 6420 6174 6f6d 6963 616c  ecorded atomical
-00004980: 6c79 2c0a 616e 6420 7468 6520 7772 6974  ly,.and the writ
-00004990: 696e 6720 6f66 206e 6577 2065 7665 6e74  ing of new event
-000049a0: 7320 6765 6e65 7261 7465 6420 6279 2061  s generated by a
-000049b0: 2063 6f6d 6d61 6e64 2068 616e 646c 6572   command handler
-000049c0: 2069 7320 7573 7561 6c6c 7920 6120 636f   is usually a co
-000049d0: 6e63 6572 6e0a 7468 6174 2069 7320 6661  ncern.that is fa
-000049e0: 6374 6f72 6564 206f 7574 2061 6e64 2075  ctored out and u
-000049f0: 7365 6420 6576 6572 7977 6865 7265 2069  sed everywhere i
-00004a00: 6e20 6120 7072 6f6a 6563 742c 2069 7420  n a project, it 
-00004a10: 6973 2071 7569 7465 2075 7375 616c 2069  is quite usual i
-00004a20: 6e20 6120 7072 6f6a 6563 740a 746f 206f  n a project.to o
-00004a30: 6e6c 7920 7573 6520 6061 7070 656e 645f  nly use `append_
-00004a40: 6576 656e 7473 2829 6020 746f 2072 6563  events()` to rec
-00004a50: 6f72 6420 6e65 7720 6576 656e 7473 2e20  ord new events. 
-00004a60: 466f 7220 7468 6973 2072 6561 736f 6e2c  For this reason,
-00004a70: 2061 6e20 6578 616d 706c 6520 6973 0a6e   an example is.n
-00004a80: 6f74 2070 726f 7669 6465 6420 6865 7265  ot provided here
-00004a90: 2e0a 0a0a 2323 2320 4964 656d 706f 7465  ....### Idempote
-00004aa0: 6e74 2061 7070 656e 6420 6f70 6572 6174  nt append operat
-00004ab0: 696f 6e73 0a0a 536f 6d65 7469 6d65 7320  ions..Sometimes 
-00004ac0: 6974 206d 6179 2068 6170 7065 6e20 7468  it may happen th
-00004ad0: 6174 2061 206e 6577 2065 7665 6e74 2069  at a new event i
-00004ae0: 7320 7375 6363 6573 7366 756c 6c79 2072  s successfully r
-00004af0: 6563 6f72 6465 6420 616e 6420 7468 656e  ecorded and then
-00004b00: 2073 6f6d 6568 6f77 0a74 6865 2063 6f6e   somehow.the con
-00004b10: 6e65 6374 696f 6e20 746f 2074 6865 2064  nection to the d
-00004b20: 6174 6162 6173 6520 6765 7473 2069 6e74  atabase gets int
-00004b30: 6572 7275 7074 6564 2062 6566 6f72 6520  errupted before 
-00004b40: 7468 6520 7375 6363 6573 7366 756c 2063  the successful c
-00004b50: 616c 6c20 6361 6e20 7265 7475 726e 0a73  all can return.s
-00004b60: 7563 6365 7373 6675 6c6c 7920 746f 2074  uccessfully to t
-00004b70: 6865 2063 6c69 656e 742e 2049 6e20 6361  he client. In ca
-00004b80: 7365 206f 6620 616e 2065 7272 6f72 2077  se of an error w
-00004b90: 6865 6e20 6170 7065 6e64 696e 6720 616e  hen appending an
-00004ba0: 2065 7665 6e74 2c20 6974 206d 6179 2062   event, it may b
-00004bb0: 650a 6465 7369 7261 626c 6520 746f 2072  e.desirable to r
-00004bc0: 6574 7279 2061 7070 656e 6469 6e67 2074  etry appending t
-00004bd0: 6865 2073 616d 6520 6576 656e 7420 6174  he same event at
-00004be0: 2074 6865 2073 616d 6520 706f 7369 7469   the same positi
-00004bf0: 6f6e 2e20 4966 2074 6865 2065 7665 6e74  on. If the event
-00004c00: 2077 6173 0a69 6e20 6661 6374 2073 7563   was.in fact suc
-00004c10: 6365 7373 6675 6c6c 7920 7265 636f 7264  cessfully record
-00004c20: 6564 2c20 6974 2069 7320 636f 6e76 656e  ed, it is conven
-00004c30: 6965 6e74 2066 6f72 2074 6865 2072 6574  ient for the ret
-00004c40: 7279 2074 6f20 7265 7475 726e 2073 7563  ry to return suc
-00004c50: 6365 7373 6675 6c6c 790a 7769 7468 6f75  cessfully.withou
-00004c60: 7420 7261 6973 696e 6720 616e 2065 7272  t raising an err
-00004c70: 6f72 2064 7565 2074 6f20 6f70 7469 6d69  or due to optimi
-00004c80: 7374 6963 2063 6f6e 6375 7272 656e 6379  stic concurrency
-00004c90: 2063 6f6e 7472 6f6c 2028 6173 2064 6573   control (as des
-00004ca0: 6372 6962 6564 2061 626f 7665 292e 0a0a  cribed above)...
-00004cb0: 5468 6520 6578 616d 706c 6520 6265 6c6f  The example belo
-00004cc0: 7720 7368 6f77 7320 7468 6520 6061 7070  w shows the `app
-00004cd0: 656e 645f 6576 656e 7473 2829 6020 6d65  end_events()` me
-00004ce0: 7468 6f64 2062 6569 6e67 2063 616c 6c65  thod being calle
-00004cf0: 6420 6167 6169 6e20 7769 7468 0a60 6576  d again with.`ev
-00004d00: 656e 7433 6020 616e 6420 6065 7870 6563  ent3` and `expec
-00004d10: 7465 645f 706f 7369 7469 6f6e 3d32 602e  ted_position=2`.
-00004d20: 2057 6520 6361 6e20 7365 6520 7468 6174   We can see that
-00004d30: 2072 6570 6561 7469 6e67 2074 6865 2063   repeating the c
-00004d40: 616c 6c20 746f 0a60 6170 7065 6e64 5f65  all to.`append_e
-00004d50: 7665 6e74 7328 2960 2072 6574 7572 6e73  vents()` returns
-00004d60: 2073 7563 6365 7373 6675 6c6c 792e 0a0a   successfully...
-00004d70: 6060 6070 7974 686f 6e0a 2320 5265 7472  ```python.# Retr
-00004d80: 7920 6170 7065 6e64 696e 6720 6576 656e  y appending even
-00004d90: 7433 2e0a 636f 6d6d 6974 5f70 6f73 6974  t3..commit_posit
-00004da0: 696f 6e5f 7265 7472 7920 3d20 636c 6965  ion_retry = clie
-00004db0: 6e74 2e61 7070 656e 645f 6576 656e 7473  nt.append_events
-00004dc0: 280a 2020 2020 7374 7265 616d 5f6e 616d  (.    stream_nam
-00004dd0: 653d 7374 7265 616d 5f6e 616d 6531 2c0a  e=stream_name1,.
-00004de0: 2020 2020 6578 7065 6374 6564 5f70 6f73      expected_pos
-00004df0: 6974 696f 6e3d 302c 0a20 2020 2065 7665  ition=0,.    eve
-00004e00: 6e74 733d 5b65 7665 6e74 322c 2065 7665  nts=[event2, eve
-00004e10: 6e74 335d 2c0a 290a 6060 600a 0a57 6520  nt3],.).```..We 
-00004e20: 6361 6e20 7365 6520 7468 6174 2074 6865  can see that the
-00004e30: 2073 616d 6520 636f 6d6d 6974 2070 6f73   same commit pos
-00004e40: 6974 696f 6e20 6973 2072 6574 7572 6e65  ition is returne
-00004e50: 6420 6173 2061 626f 7665 2e0a 0a60 6060  d as above...```
-00004e60: 7079 7468 6f6e 0a61 7373 6572 7420 636f  python.assert co
-00004e70: 6d6d 6974 5f70 6f73 6974 696f 6e5f 7265  mmit_position_re
-00004e80: 7472 7920 3d3d 2063 6f6d 6d69 745f 706f  try == commit_po
-00004e90: 7369 7469 6f6e 320a 6060 600a 0a57 6520  sition2.```..We 
-00004ea0: 6361 6e20 616c 736f 2073 6565 2074 6865  can also see the
-00004eb0: 2073 7472 6561 6d20 6861 7320 6265 656e   stream has been
-00004ec0: 2075 6e63 6861 6e67 6564 2064 6573 7069   unchanged despi
-00004ed0: 7465 2063 616c 6c69 6e67 2074 6865 2061  te calling the a
-00004ee0: 7070 656e 645f 6576 656e 7473 2829 0a74  ppend_events().t
-00004ef0: 7769 6365 2077 6974 6820 7468 6520 7361  wice with the sa
-00004f00: 6d65 2061 7267 756d 656e 7473 2c20 6279  me arguments, by
-00004f10: 2063 616c 6c69 6e67 2060 7265 6164 5f73   calling `read_s
-00004f20: 7472 6561 6d5f 6576 656e 7473 2829 602e  tream_events()`.
-00004f30: 2054 6861 7420 6973 2c20 7468 6572 650a   That is, there.
-00004f40: 6172 6520 7374 696c 6c20 6f6e 6c79 2074  are still only t
-00004f50: 6872 6565 2065 7665 6e74 7320 696e 2074  hree events in t
-00004f60: 6865 2073 7472 6561 6d2e 0a0a 6060 6070  he stream...```p
-00004f70: 7974 686f 6e0a 7265 7370 6f6e 7365 203d  ython.response =
-00004f80: 2063 6c69 656e 742e 7265 6164 5f73 7472   client.read_str
-00004f90: 6561 6d5f 6576 656e 7473 280a 2020 2020  eam_events(.    
-00004fa0: 7374 7265 616d 5f6e 616d 653d 7374 7265  stream_name=stre
-00004fb0: 616d 5f6e 616d 6531 0a29 0a0a 6576 656e  am_name1.)..even
-00004fc0: 7473 203d 206c 6973 7428 7265 7370 6f6e  ts = list(respon
-00004fd0: 7365 290a 6173 7365 7274 206c 656e 2865  se).assert len(e
-00004fe0: 7665 6e74 7329 203d 3d20 330a 6060 600a  vents) == 3.```.
-00004ff0: 0a54 6869 7320 6964 656d 706f 7465 6e74  .This idempotent
-00005000: 2062 6568 6176 696f 7572 2069 7320 6163   behaviour is ac
-00005010: 7469 7661 7465 6420 6265 6361 7573 6520  tivated because 
-00005020: 7468 6520 604e 6577 4576 656e 7460 2063  the `NewEvent` c
-00005030: 6c61 7373 2068 6173 2061 6e20 6069 6460  lass has an `id`
-00005040: 0a61 7474 7269 6275 7465 2074 6861 742c  .attribute that,
-00005050: 2062 7920 6465 6661 756c 742c 2069 7320   by default, is 
-00005060: 6173 7369 676e 6564 2061 206e 6577 2061  assigned a new a
-00005070: 6e64 2075 6e69 7175 6520 7665 7273 696f  nd unique versio
-00005080: 6e2d 3420 5555 4944 2077 6865 6e20 616e  n-4 UUID when an
-00005090: 0a69 6e73 7461 6e63 6520 6f66 2060 4e65  .instance of `Ne
-000050a0: 7745 7665 6e74 6020 6973 2063 6f6e 7374  wEvent` is const
-000050b0: 7275 6374 6564 2e20 4966 2065 7665 6e74  ructed. If event
-000050c0: 7320 7769 7468 2074 6865 2073 616d 6520  s with the same 
-000050d0: 6069 6460 2061 7265 2061 7070 656e 6465  `id` are appende
-000050e0: 640a 6174 2074 6865 2073 616d 6520 6065  d.at the same `e
-000050f0: 7870 6563 7465 645f 706f 7369 7469 6f6e  xpected_position
-00005100: 602c 2074 6865 2073 7472 6561 6d20 7769  `, the stream wi
-00005110: 6c6c 2062 6520 756e 6368 616e 6765 642c  ll be unchanged,
-00005120: 2074 6865 206f 7065 7261 7469 6f6e 2077   the operation w
-00005130: 696c 6c0a 636f 6d70 6c65 7465 2073 7563  ill.complete suc
-00005140: 6365 7373 6675 6c6c 792c 2061 6e64 2074  cessfully, and t
-00005150: 6865 2073 616d 6520 636f 6d6d 6974 2070  he same commit p
-00005160: 6f73 6974 696f 6e20 7769 6c6c 2062 6520  osition will be 
-00005170: 7265 7475 726e 6564 2074 6f20 7468 6520  returned to the 
-00005180: 6361 6c6c 6572 2e0a 0a60 6060 7079 7468  caller...```pyth
-00005190: 6f6e 0a66 726f 6d20 7575 6964 2069 6d70  on.from uuid imp
-000051a0: 6f72 7420 5555 4944 0a0a 0a61 7373 6572  ort UUID...asser
-000051b0: 7420 6973 696e 7374 616e 6365 2865 7665  t isinstance(eve
-000051c0: 6e74 312e 6964 2c20 5555 4944 290a 6173  nt1.id, UUID).as
-000051d0: 7365 7274 2069 7369 6e73 7461 6e63 6528  sert isinstance(
-000051e0: 6576 656e 7432 2e69 642c 2055 5549 4429  event2.id, UUID)
-000051f0: 0a61 7373 6572 7420 6973 696e 7374 616e  .assert isinstan
-00005200: 6365 2865 7665 6e74 332e 6964 2c20 5555  ce(event3.id, UU
-00005210: 4944 290a 0a61 7373 6572 7420 6576 656e  ID)..assert even
-00005220: 7431 2e69 6420 213d 2065 7665 6e74 322e  t1.id != event2.
-00005230: 6964 0a61 7373 6572 7420 6576 656e 7432  id.assert event2
-00005240: 2e69 6420 213d 2065 7665 6e74 332e 6964  .id != event3.id
-00005250: 0a0a 6173 7365 7274 2065 7665 6e74 735b  ..assert events[
-00005260: 305d 2e69 6420 3d3d 2065 7665 6e74 312e  0].id == event1.
-00005270: 6964 0a61 7373 6572 7420 6576 656e 7473  id.assert events
-00005280: 5b31 5d2e 6964 203d 3d20 6576 656e 7432  [1].id == event2
-00005290: 2e69 640a 6173 7365 7274 2065 7665 6e74  .id.assert event
-000052a0: 735b 325d 2e69 6420 3d3d 2065 7665 6e74  s[2].id == event
-000052b0: 332e 6964 0a60 6060 0a0a 4974 2069 7320  3.id.```..It is 
-000052c0: 706f 7373 6962 6c65 2074 6f20 7365 7420  possible to set 
-000052d0: 7468 6520 6069 6460 2063 6f6e 7374 7275  the `id` constru
-000052e0: 6374 6f72 2061 7267 756d 656e 7420 6f66  ctor argument of
-000052f0: 2060 4e65 7745 7665 6e74 6020 7768 656e   `NewEvent` when
-00005300: 2069 6e73 7461 6e74 6961 7469 6e67 0a74   instantiating.t
-00005310: 6865 2060 4e65 7745 7665 6e74 6020 636c  he `NewEvent` cl
-00005320: 6173 732c 2062 7574 2069 6e20 7468 6520  ass, but in the 
-00005330: 6578 616d 706c 6573 2061 626f 7665 2077  examples above w
-00005340: 6520 6861 7665 2062 6565 6e20 7573 696e  e have been usin
-00005350: 6720 7468 6520 6465 6661 756c 740a 6265  g the default.be
-00005360: 6861 7669 6f75 722c 2077 6869 6368 2069  haviour, which i
-00005370: 7320 7468 6174 2074 6865 2060 6964 6020  s that the `id` 
-00005380: 7661 6c75 6520 6973 2067 656e 6572 6174  value is generat
-00005390: 6564 2077 6865 6e20 7468 6520 604e 6577  ed when the `New
-000053a0: 4576 656e 7460 2063 6c61 7373 2069 730a  Event` class is.
-000053b0: 696e 7374 616e 7469 6174 6564 2e0a 0a0a  instantiated....
-000053c0: 2323 2320 5265 6164 2073 7472 6561 6d20  ### Read stream 
-000053d0: 6576 656e 7473 0a0a 5468 6520 6072 6561  events..The `rea
-000053e0: 645f 7374 7265 616d 5f65 7665 6e74 7328  d_stream_events(
-000053f0: 2960 206d 6574 686f 6420 6361 6e20 6265  )` method can be
-00005400: 2075 7365 6420 746f 2072 6561 6420 7468   used to read th
-00005410: 6520 7265 636f 7264 6564 2065 7665 6e74  e recorded event
-00005420: 7320 6f66 2061 2073 7472 6561 6d2e 0a0a  s of a stream...
-00005430: 5468 6973 206d 6574 686f 6420 6361 6e20  This method can 
-00005440: 6265 2075 7365 6420 746f 2072 6574 7269  be used to retri
-00005450: 6576 6520 616c 6c20 7468 6520 7265 636f  eve all the reco
-00005460: 7264 6564 2065 7665 6e74 7320 666f 7220  rded events for 
-00005470: 616e 2061 6767 7265 6761 7465 2062 6566  an aggregate bef
-00005480: 6f72 650a 6578 6563 7574 696e 6720 6120  ore.executing a 
-00005490: 636f 6d6d 616e 6420 696e 2061 6e20 6170  command in an ap
-000054a0: 706c 6963 6174 696f 6e2e 0a0a 5468 6973  plication...This
-000054b0: 206d 6574 686f 6420 6861 7320 6f6e 6520   method has one 
-000054c0: 7265 7175 6972 6564 2061 7267 756d 656e  required argumen
-000054d0: 742c 2060 7374 7265 616d 5f6e 616d 6560  t, `stream_name`
-000054e0: 2c20 7768 6963 6820 6973 2074 6865 206e  , which is the n
-000054f0: 616d 6520 6f66 0a74 6865 2073 7472 6561  ame of.the strea
-00005500: 6d20 6672 6f6d 2077 6869 6368 2074 6f20  m from which to 
-00005510: 7265 6164 2065 7665 6e74 732e 2042 7920  read events. By 
-00005520: 6465 6661 756c 742c 2074 6865 2072 6563  default, the rec
-00005530: 6f72 6465 6420 6576 656e 7473 2069 6e20  orded events in 
-00005540: 7468 650a 7374 7265 616d 2061 7265 2072  the.stream are r
-00005550: 6574 7572 6e65 6420 696e 2074 6865 206f  eturned in the o
-00005560: 7264 6572 2074 6865 7920 7765 7265 2072  rder they were r
-00005570: 6563 6f72 6465 642e 0a0a 5468 6520 6d65  ecorded...The me
-00005580: 7468 6f64 2060 7265 6164 5f73 7472 6561  thod `read_strea
-00005590: 6d5f 6576 656e 7473 2829 6020 616c 736f  m_events()` also
-000055a0: 2073 7570 706f 7274 7320 666f 7572 206f   supports four o
-000055b0: 7074 696f 6e61 6c20 6172 6775 6d65 6e74  ptional argument
-000055c0: 732c 0a60 7374 7265 616d 5f70 6f73 6974  s,.`stream_posit
-000055d0: 696f 6e60 2c20 6062 6163 6b77 6172 6473  ion`, `backwards
-000055e0: 602c 2060 6c69 6d69 7460 2c20 616e 6420  `, `limit`, and 
-000055f0: 6074 696d 656f 7574 602e 0a0a 5468 6520  `timeout`...The 
-00005600: 6f70 7469 6f6e 616c 2060 7374 7265 616d  optional `stream
-00005610: 5f70 6f73 6974 696f 6e60 2061 7267 756d  _position` argum
-00005620: 656e 7420 6973 2061 6e20 6f70 7469 6f6e  ent is an option
-00005630: 616c 2069 6e74 6567 6572 2074 6861 7420  al integer that 
-00005640: 6361 6e20 6265 2075 7365 6420 746f 0a69  can be used to.i
-00005650: 6e64 6963 6174 6520 7468 6520 706f 7369  ndicate the posi
-00005660: 7469 6f6e 2069 6e20 7468 6520 7374 7265  tion in the stre
-00005670: 616d 2066 726f 6d20 7768 6963 6820 746f  am from which to
-00005680: 2073 7461 7274 2072 6561 6469 6e67 2e20   start reading. 
-00005690: 5468 6973 2061 7267 756d 656e 7420 6973  This argument is
-000056a0: 0a60 4e6f 6e65 6020 6279 2064 6566 6175  .`None` by defau
-000056b0: 6c74 2c20 7768 6963 6820 6d65 616e 7320  lt, which means 
-000056c0: 7468 6520 7374 7265 616d 2077 696c 6c20  the stream will 
-000056d0: 6265 2072 6561 6420 6569 7468 6572 2066  be read either f
-000056e0: 726f 6d20 7468 6520 7374 6172 7420 6f66  rom the start of
-000056f0: 2074 6865 0a73 7472 6561 6d20 2874 6865   the.stream (the
-00005700: 2064 6566 6175 6c74 2062 6568 6176 696f   default behavio
-00005710: 7572 292c 206f 7220 6672 6f6d 2074 6865  ur), or from the
-00005720: 2065 6e64 206f 6620 7468 6520 7374 7265   end of the stre
-00005730: 616d 2069 6620 6062 6163 6b77 6172 6473  am if `backwards
-00005740: 6020 6973 0a60 5472 7565 6020 2873 6565  ` is.`True` (see
-00005750: 2062 656c 6f77 292e 2057 6865 6e20 7265   below). When re
-00005760: 6164 696e 6720 6120 7374 7265 616d 2066  ading a stream f
-00005770: 726f 6d20 6120 7370 6563 6966 6963 2070  rom a specific p
-00005780: 6f73 6974 696f 6e20 696e 2074 6865 2073  osition in the s
-00005790: 7472 6561 6d2c 2074 6865 0a72 6563 6f72  tream, the.recor
-000057a0: 6465 6420 6576 656e 7420 6174 2074 6861  ded event at tha
-000057b0: 7420 706f 7369 7469 6f6e 2057 494c 4c20  t position WILL 
-000057c0: 6265 2069 6e63 6c75 6465 642c 2062 6f74  be included, bot
-000057d0: 6820 7768 656e 2072 6561 6469 6e67 2066  h when reading f
-000057e0: 6f72 7761 7264 730a 6672 6f6d 2074 6861  orwards.from tha
-000057f0: 7420 706f 7369 7469 6f6e 2c20 616e 6420  t position, and 
-00005800: 7768 656e 2072 6561 6469 6e67 2062 6163  when reading bac
-00005810: 6b77 6172 6473 2066 726f 6d20 7468 6174  kwards from that
-00005820: 2070 6f73 6974 696f 6e2e 0a0a 5468 6520   position...The 
-00005830: 6f70 7469 6f6e 616c 2061 7267 756d 656e  optional argumen
-00005840: 7420 6062 6163 6b77 6172 6473 6020 6973  t `backwards` is
-00005850: 2061 2062 6f6f 6c65 616e 2c20 6279 2064   a boolean, by d
-00005860: 6566 6175 6c74 2060 4661 6c73 6560 2c20  efault `False`, 
-00005870: 7768 6963 6820 6d65 616e 7320 7468 650a  which means the.
-00005880: 7374 7265 616d 2077 696c 6c20 6265 2072  stream will be r
-00005890: 6561 6420 666f 7277 6172 6473 2062 7920  ead forwards by 
-000058a0: 6465 6661 756c 742c 2073 6f20 7468 6174  default, so that
-000058b0: 2065 7665 6e74 7320 6172 6520 7265 7475   events are retu
-000058c0: 726e 6564 2069 6e20 7468 650a 6f72 6465  rned in the.orde
-000058d0: 7220 7468 6579 2077 6572 6520 6170 7065  r they were appe
-000058e0: 6e64 6564 2c20 4966 2060 6261 636b 7761  nded, If `backwa
-000058f0: 7264 7360 2069 7320 6054 7275 6560 2c20  rds` is `True`, 
-00005900: 7468 6520 7374 7265 616d 2077 696c 6c20  the stream will 
-00005910: 6265 2072 6561 640a 6261 636b 7761 7264  be read.backward
-00005920: 732c 2073 6f20 7468 6174 2065 7665 6e74  s, so that event
-00005930: 7320 6172 6520 7265 7475 726e 6564 2069  s are returned i
-00005940: 6e20 7265 7665 7273 6520 6f72 6465 722e  n reverse order.
-00005950: 0a0a 5468 6520 6f70 7469 6f6e 616c 2061  ..The optional a
-00005960: 7267 756d 656e 7420 606c 696d 6974 6020  rgument `limit` 
-00005970: 6973 2061 6e20 696e 7465 6765 7220 7768  is an integer wh
-00005980: 6963 6820 6c69 6d69 7473 2074 6865 206e  ich limits the n
-00005990: 756d 6265 7220 6f66 2065 7665 6e74 7320  umber of events 
-000059a0: 7468 6174 2077 696c 6c0a 6265 2072 6574  that will.be ret
-000059b0: 7572 6e65 642e 2054 6865 2064 6566 6175  urned. The defau
-000059c0: 6c74 2076 616c 7565 2069 7320 6073 7973  lt value is `sys
-000059d0: 2e6d 6178 696e 7460 2e0a 0a54 6865 206f  .maxint`...The o
-000059e0: 7074 696f 6e61 6c20 6172 6775 6d65 6e74  ptional argument
-000059f0: 2060 7469 6d65 6f75 7460 2069 7320 6120   `timeout` is a 
-00005a00: 5079 7468 6f6e 2060 666c 6f61 7460 2077  Python `float` w
-00005a10: 6869 6368 2073 6574 7320 6120 6465 6164  hich sets a dead
-00005a20: 6c69 6e65 2066 6f72 2074 6865 2063 6f6d  line for the com
-00005a30: 706c 6574 696f 6e20 6f66 0a74 6865 2067  pletion of.the g
-00005a40: 5250 4320 6f70 6572 6174 696f 6e2e 0a0a  RPC operation...
-00005a50: 5468 6973 206d 6574 686f 6420 7265 7475  This method retu
-00005a60: 726e 7320 6120 5079 7468 6f6e 2069 7465  rns a Python ite
-00005a70: 7261 626c 6520 6f62 6a65 6374 2074 6861  rable object tha
-00005a80: 7420 7969 656c 6473 2060 5265 636f 7264  t yields `Record
-00005a90: 6564 4576 656e 7460 206f 626a 6563 7473  edEvent` objects
-00005aa0: 2e0a 5468 6573 6520 7265 636f 7264 6564  ..These recorded
-00005ab0: 2065 7665 6e74 206f 626a 6563 7473 2061   event objects a
-00005ac0: 7265 2069 6e73 7461 6e63 6573 206f 6620  re instances of 
-00005ad0: 7468 6520 6052 6563 6f72 6465 6445 7665  the `RecordedEve
-00005ae0: 6e74 6020 636c 6173 7320 2873 6565 2062  nt` class (see b
-00005af0: 656c 6f77 290a 0a54 6865 2065 7861 6d70  elow)..The examp
-00005b00: 6c65 2062 656c 6f77 2073 686f 7773 2068  le below shows h
-00005b10: 6f77 2074 6f20 7265 6164 2074 6865 2072  ow to read the r
-00005b20: 6563 6f72 6465 6420 6576 656e 7473 206f  ecorded events o
-00005b30: 6620 6120 7374 7265 616d 0a66 6f72 7761  f a stream.forwa
-00005b40: 7264 7320 6672 6f6d 2074 6865 2073 7461  rds from the sta
-00005b50: 7274 206f 6620 7468 6520 7374 7265 616d  rt of the stream
-00005b60: 2074 6f20 7468 6520 656e 6420 6f66 2074   to the end of t
-00005b70: 6865 2073 7472 6561 6d2e 2054 6865 0a6e  he stream. The.n
-00005b80: 616d 6520 6f66 2061 2073 7472 6561 6d20  ame of a stream 
-00005b90: 6973 2067 6976 656e 2077 6865 6e20 6361  is given when ca
-00005ba0: 6c6c 696e 6720 7468 6520 6d65 7468 6f64  lling the method
-00005bb0: 2e20 496e 2074 6869 7320 6578 616d 706c  . In this exampl
-00005bc0: 652c 0a74 6865 2069 7465 7261 626c 6520  e,.the iterable 
-00005bd0: 7265 7370 6f6e 7365 206f 626a 6563 7420  response object 
-00005be0: 6973 2063 6f6e 7665 7274 6564 2069 6e74  is converted int
-00005bf0: 6f20 6120 5079 7468 6f6e 2060 6c69 7374  o a Python `list
-00005c00: 602c 2077 6869 6368 0a63 6f6e 7461 696e  `, which.contain
-00005c10: 7320 616c 6c20 7468 6520 7265 636f 7264  s all the record
-00005c20: 6564 2065 7665 6e74 206f 626a 6563 7473  ed event objects
-00005c30: 2074 6861 7420 7765 7265 2072 6561 6420   that were read 
-00005c40: 6672 6f6d 2074 6865 2073 7472 6561 6d2e  from the stream.
-00005c50: 0a0a 6060 6070 7974 686f 6e0a 7265 7370  ..```python.resp
-00005c60: 6f6e 7365 203d 2063 6c69 656e 742e 7265  onse = client.re
-00005c70: 6164 5f73 7472 6561 6d5f 6576 656e 7473  ad_stream_events
-00005c80: 280a 2020 2020 7374 7265 616d 5f6e 616d  (.    stream_nam
-00005c90: 653d 7374 7265 616d 5f6e 616d 6531 0a29  e=stream_name1.)
-00005ca0: 0a0a 6576 656e 7473 203d 206c 6973 7428  ..events = list(
-00005cb0: 7265 7370 6f6e 7365 290a 6060 600a 0a4e  response).```..N
-00005cc0: 6f77 2074 6861 7420 7765 2068 6176 6520  ow that we have 
-00005cd0: 6120 6c69 7374 206f 6620 6576 656e 7420  a list of event 
-00005ce0: 6f62 6a65 6374 732c 2077 6520 6361 6e20  objects, we can 
-00005cf0: 6368 6563 6b20 7765 2067 6f74 2074 6865  check we got the
-00005d00: 0a74 6872 6565 2065 7665 6e74 7320 7468  .three events th
-00005d10: 6174 2077 6572 6520 6170 7065 6e64 6564  at were appended
-00005d20: 2074 6f20 7468 6520 7374 7265 616d 2c20   to the stream, 
-00005d30: 616e 6420 7468 6174 2074 6865 7920 6172  and that they ar
-00005d40: 650a 6f72 6465 7265 6420 6578 6163 746c  e.ordered exactl
-00005d50: 7920 6173 2074 6865 7920 7765 7265 2061  y as they were a
-00005d60: 7070 656e 6465 642e 0a0a 6060 6070 7974  ppended...```pyt
-00005d70: 686f 6e0a 6173 7365 7274 206c 656e 2865  hon.assert len(e
-00005d80: 7665 6e74 7329 203d 3d20 330a 0a61 7373  vents) == 3..ass
-00005d90: 6572 7420 6576 656e 7473 5b30 5d2e 7374  ert events[0].st
-00005da0: 7265 616d 5f6e 616d 6520 3d3d 2073 7472  ream_name == str
-00005db0: 6561 6d5f 6e61 6d65 310a 6173 7365 7274  eam_name1.assert
-00005dc0: 2065 7665 6e74 735b 305d 2e73 7472 6561   events[0].strea
-00005dd0: 6d5f 706f 7369 7469 6f6e 203d 3d20 300a  m_position == 0.
-00005de0: 6173 7365 7274 2065 7665 6e74 735b 305d  assert events[0]
-00005df0: 2e74 7970 6520 3d3d 2065 7665 6e74 312e  .type == event1.
-00005e00: 7479 7065 0a61 7373 6572 7420 6576 656e  type.assert even
-00005e10: 7473 5b30 5d2e 6461 7461 203d 3d20 6576  ts[0].data == ev
-00005e20: 656e 7431 2e64 6174 610a 0a61 7373 6572  ent1.data..asser
-00005e30: 7420 6576 656e 7473 5b31 5d2e 7374 7265  t events[1].stre
-00005e40: 616d 5f6e 616d 6520 3d3d 2073 7472 6561  am_name == strea
-00005e50: 6d5f 6e61 6d65 310a 6173 7365 7274 2065  m_name1.assert e
-00005e60: 7665 6e74 735b 315d 2e73 7472 6561 6d5f  vents[1].stream_
-00005e70: 706f 7369 7469 6f6e 203d 3d20 310a 6173  position == 1.as
-00005e80: 7365 7274 2065 7665 6e74 735b 315d 2e74  sert events[1].t
-00005e90: 7970 6520 3d3d 2065 7665 6e74 322e 7479  ype == event2.ty
-00005ea0: 7065 0a61 7373 6572 7420 6576 656e 7473  pe.assert events
-00005eb0: 5b31 5d2e 6461 7461 203d 3d20 6576 656e  [1].data == even
-00005ec0: 7432 2e64 6174 610a 0a61 7373 6572 7420  t2.data..assert 
-00005ed0: 6576 656e 7473 5b32 5d2e 7374 7265 616d  events[2].stream
-00005ee0: 5f6e 616d 6520 3d3d 2073 7472 6561 6d5f  _name == stream_
-00005ef0: 6e61 6d65 310a 6173 7365 7274 2065 7665  name1.assert eve
-00005f00: 6e74 735b 325d 2e73 7472 6561 6d5f 706f  nts[2].stream_po
-00005f10: 7369 7469 6f6e 203d 3d20 320a 6173 7365  sition == 2.asse
-00005f20: 7274 2065 7665 6e74 735b 325d 2e74 7970  rt events[2].typ
-00005f30: 6520 3d3d 2065 7665 6e74 332e 7479 7065  e == event3.type
-00005f40: 0a61 7373 6572 7420 6576 656e 7473 5b32  .assert events[2
-00005f50: 5d2e 6461 7461 203d 3d20 6576 656e 7433  ].data == event3
-00005f60: 2e64 6174 610a 6060 600a 0a54 6865 2065  .data.```..The e
-00005f70: 7861 6d70 6c65 2062 656c 6f77 2073 686f  xample below sho
-00005f80: 7773 2068 6f77 2074 6f20 7265 6164 2072  ws how to read r
-00005f90: 6563 6f72 6465 6420 6576 656e 7473 2069  ecorded events i
-00005fa0: 6e20 6120 7374 7265 616d 2066 6f72 7761  n a stream forwa
-00005fb0: 7264 7320 6672 6f6d 0a61 2073 7065 6369  rds from.a speci
-00005fc0: 6669 6320 7374 7265 616d 2070 6f73 6974  fic stream posit
-00005fd0: 696f 6e20 746f 2074 6865 2065 6e64 206f  ion to the end o
-00005fe0: 6620 7468 6520 7374 7265 616d 2e0a 0a60  f the stream...`
-00005ff0: 6060 7079 7468 6f6e 0a65 7665 6e74 7320  ``python.events 
-00006000: 3d20 6c69 7374 280a 2020 2020 636c 6965  = list(.    clie
-00006010: 6e74 2e72 6561 645f 7374 7265 616d 5f65  nt.read_stream_e
-00006020: 7665 6e74 7328 0a20 2020 2020 2020 2073  vents(.        s
-00006030: 7472 6561 6d5f 6e61 6d65 3d73 7472 6561  tream_name=strea
-00006040: 6d5f 6e61 6d65 312c 0a20 2020 2020 2020  m_name1,.       
-00006050: 2073 7472 6561 6d5f 706f 7369 7469 6f6e   stream_position
-00006060: 3d31 2c0a 2020 2020 290a 290a 0a61 7373  =1,.    ).)..ass
-00006070: 6572 7420 6c65 6e28 6576 656e 7473 2920  ert len(events) 
-00006080: 3d3d 2032 0a0a 6173 7365 7274 2065 7665  == 2..assert eve
-00006090: 6e74 735b 305d 2e73 7472 6561 6d5f 6e61  nts[0].stream_na
-000060a0: 6d65 203d 3d20 7374 7265 616d 5f6e 616d  me == stream_nam
-000060b0: 6531 0a61 7373 6572 7420 6576 656e 7473  e1.assert events
-000060c0: 5b30 5d2e 7374 7265 616d 5f70 6f73 6974  [0].stream_posit
-000060d0: 696f 6e20 3d3d 2031 0a61 7373 6572 7420  ion == 1.assert 
-000060e0: 6576 656e 7473 5b30 5d2e 7479 7065 203d  events[0].type =
-000060f0: 3d20 6576 656e 7432 2e74 7970 650a 6173  = event2.type.as
-00006100: 7365 7274 2065 7665 6e74 735b 305d 2e64  sert events[0].d
-00006110: 6174 6120 3d3d 2065 7665 6e74 322e 6461  ata == event2.da
-00006120: 7461 0a0a 6173 7365 7274 2065 7665 6e74  ta..assert event
-00006130: 735b 315d 2e73 7472 6561 6d5f 6e61 6d65  s[1].stream_name
-00006140: 203d 3d20 7374 7265 616d 5f6e 616d 6531   == stream_name1
-00006150: 0a61 7373 6572 7420 6576 656e 7473 5b31  .assert events[1
-00006160: 5d2e 7374 7265 616d 5f70 6f73 6974 696f  ].stream_positio
-00006170: 6e20 3d3d 2032 0a61 7373 6572 7420 6576  n == 2.assert ev
-00006180: 656e 7473 5b31 5d2e 7479 7065 203d 3d20  ents[1].type == 
-00006190: 6576 656e 7433 2e74 7970 650a 6173 7365  event3.type.asse
-000061a0: 7274 2065 7665 6e74 735b 315d 2e64 6174  rt events[1].dat
-000061b0: 6120 3d3d 2065 7665 6e74 332e 6461 7461  a == event3.data
-000061c0: 0a60 6060 0a0a 5468 6520 6578 616d 706c  .```..The exampl
-000061d0: 6520 6265 6c6f 7720 7368 6f77 7320 686f  e below shows ho
-000061e0: 7720 746f 2072 6561 6420 7468 6520 7265  w to read the re
-000061f0: 636f 7264 6564 2065 7665 6e74 7320 696e  corded events in
-00006200: 2061 2073 7472 6561 6d20 6261 636b 7761   a stream backwa
-00006210: 7264 7320 6672 6f6d 0a74 6865 2065 6e64  rds from.the end
-00006220: 206f 6620 7468 6520 7374 7265 616d 2074   of the stream t
-00006230: 6f20 7468 6520 7374 6172 7420 6f66 2074  o the start of t
-00006240: 6865 2073 7472 6561 6d2e 0a0a 6060 6070  he stream...```p
-00006250: 7974 686f 6e0a 6576 656e 7473 203d 206c  ython.events = l
-00006260: 6973 7428 0a20 2020 2063 6c69 656e 742e  ist(.    client.
-00006270: 7265 6164 5f73 7472 6561 6d5f 6576 656e  read_stream_even
-00006280: 7473 280a 2020 2020 2020 2020 7374 7265  ts(.        stre
-00006290: 616d 5f6e 616d 653d 7374 7265 616d 5f6e  am_name=stream_n
-000062a0: 616d 6531 2c0a 2020 2020 2020 2020 6261  ame1,.        ba
-000062b0: 636b 7761 7264 733d 5472 7565 2c0a 2020  ckwards=True,.  
-000062c0: 2020 290a 290a 0a61 7373 6572 7420 6c65    ).)..assert le
-000062d0: 6e28 6576 656e 7473 2920 3d3d 2033 0a0a  n(events) == 3..
-000062e0: 6173 7365 7274 2065 7665 6e74 735b 305d  assert events[0]
-000062f0: 2e73 7472 6561 6d5f 6e61 6d65 203d 3d20  .stream_name == 
-00006300: 7374 7265 616d 5f6e 616d 6531 0a61 7373  stream_name1.ass
-00006310: 6572 7420 6576 656e 7473 5b30 5d2e 7374  ert events[0].st
-00006320: 7265 616d 5f70 6f73 6974 696f 6e20 3d3d  ream_position ==
-00006330: 2032 0a61 7373 6572 7420 6576 656e 7473   2.assert events
-00006340: 5b30 5d2e 7479 7065 203d 3d20 6576 656e  [0].type == even
-00006350: 7433 2e74 7970 650a 6173 7365 7274 2065  t3.type.assert e
-00006360: 7665 6e74 735b 305d 2e64 6174 6120 3d3d  vents[0].data ==
-00006370: 2065 7665 6e74 332e 6461 7461 0a0a 6173   event3.data..as
-00006380: 7365 7274 2065 7665 6e74 735b 315d 2e73  sert events[1].s
-00006390: 7472 6561 6d5f 6e61 6d65 203d 3d20 7374  tream_name == st
-000063a0: 7265 616d 5f6e 616d 6531 0a61 7373 6572  ream_name1.asser
-000063b0: 7420 6576 656e 7473 5b31 5d2e 7374 7265  t events[1].stre
-000063c0: 616d 5f70 6f73 6974 696f 6e20 3d3d 2031  am_position == 1
-000063d0: 0a61 7373 6572 7420 6576 656e 7473 5b31  .assert events[1
-000063e0: 5d2e 7479 7065 203d 3d20 6576 656e 7432  ].type == event2
-000063f0: 2e74 7970 650a 6173 7365 7274 2065 7665  .type.assert eve
-00006400: 6e74 735b 315d 2e64 6174 6120 3d3d 2065  nts[1].data == e
-00006410: 7665 6e74 322e 6461 7461 0a60 6060 0a0a  vent2.data.```..
-00006420: 5468 6520 6578 616d 706c 6520 6265 6c6f  The example belo
-00006430: 7720 7368 6f77 7320 686f 7720 746f 2072  w shows how to r
-00006440: 6561 6420 6120 6c69 6d69 7465 6420 6e75  ead a limited nu
-00006450: 6d62 6572 2028 7477 6f29 206f 6620 7468  mber (two) of th
-00006460: 6520 7265 636f 7264 6564 2065 7665 6e74  e recorded event
-00006470: 730a 696e 2061 2073 7472 6561 6d20 666f  s.in a stream fo
-00006480: 7277 6172 6473 2066 726f 6d20 7468 6520  rwards from the 
-00006490: 7374 6172 7420 6f66 2074 6865 2073 7472  start of the str
-000064a0: 6561 6d2e 0a0a 6060 6070 7974 686f 6e0a  eam...```python.
-000064b0: 6576 656e 7473 203d 206c 6973 7428 0a20  events = list(. 
-000064c0: 2020 2063 6c69 656e 742e 7265 6164 5f73     client.read_s
-000064d0: 7472 6561 6d5f 6576 656e 7473 280a 2020  tream_events(.  
-000064e0: 2020 2020 2020 7374 7265 616d 5f6e 616d        stream_nam
-000064f0: 653d 7374 7265 616d 5f6e 616d 6531 2c0a  e=stream_name1,.
-00006500: 2020 2020 2020 2020 6c69 6d69 743d 322c          limit=2,
-00006510: 0a20 2020 2029 0a29 0a0a 6173 7365 7274  .    ).)..assert
-00006520: 206c 656e 2865 7665 6e74 7329 203d 3d20   len(events) == 
-00006530: 320a 0a61 7373 6572 7420 6576 656e 7473  2..assert events
-00006540: 5b30 5d2e 7374 7265 616d 5f6e 616d 6520  [0].stream_name 
-00006550: 3d3d 2073 7472 6561 6d5f 6e61 6d65 310a  == stream_name1.
-00006560: 6173 7365 7274 2065 7665 6e74 735b 305d  assert events[0]
-00006570: 2e73 7472 6561 6d5f 706f 7369 7469 6f6e  .stream_position
-00006580: 203d 3d20 300a 6173 7365 7274 2065 7665   == 0.assert eve
-00006590: 6e74 735b 305d 2e74 7970 6520 3d3d 2065  nts[0].type == e
-000065a0: 7665 6e74 312e 7479 7065 0a61 7373 6572  vent1.type.asser
-000065b0: 7420 6576 656e 7473 5b30 5d2e 6461 7461  t events[0].data
-000065c0: 203d 3d20 6576 656e 7431 2e64 6174 610a   == event1.data.
-000065d0: 0a61 7373 6572 7420 6576 656e 7473 5b31  .assert events[1
-000065e0: 5d2e 7374 7265 616d 5f6e 616d 6520 3d3d  ].stream_name ==
-000065f0: 2073 7472 6561 6d5f 6e61 6d65 310a 6173   stream_name1.as
-00006600: 7365 7274 2065 7665 6e74 735b 315d 2e73  sert events[1].s
-00006610: 7472 6561 6d5f 706f 7369 7469 6f6e 203d  tream_position =
-00006620: 3d20 310a 6173 7365 7274 2065 7665 6e74  = 1.assert event
-00006630: 735b 315d 2e74 7970 6520 3d3d 2065 7665  s[1].type == eve
-00006640: 6e74 322e 7479 7065 0a61 7373 6572 7420  nt2.type.assert 
-00006650: 6576 656e 7473 5b31 5d2e 6461 7461 203d  events[1].data =
-00006660: 3d20 6576 656e 7432 2e64 6174 610a 6060  = event2.data.``
-00006670: 600a 0a54 6865 2065 7861 6d70 6c65 2062  `..The example b
-00006680: 656c 6f77 2073 686f 7773 2068 6f77 2074  elow shows how t
-00006690: 6f20 7265 6164 2061 206c 696d 6974 6564  o read a limited
-000066a0: 206e 756d 6265 7220 286f 6e65 2920 6f66   number (one) of
-000066b0: 2074 6865 2072 6563 6f72 6465 640a 6576   the recorded.ev
-000066c0: 656e 7473 2069 6e20 6120 7374 7265 616d  ents in a stream
-000066d0: 2062 6163 6b77 6172 6473 2066 726f 6d20   backwards from 
-000066e0: 6120 6769 7665 6e20 7374 7265 616d 2070  a given stream p
-000066f0: 6f73 6974 696f 6e2e 0a0a 6060 6070 7974  osition...```pyt
-00006700: 686f 6e0a 6576 656e 7473 203d 206c 6973  hon.events = lis
-00006710: 7428 0a20 2020 2063 6c69 656e 742e 7265  t(.    client.re
-00006720: 6164 5f73 7472 6561 6d5f 6576 656e 7473  ad_stream_events
-00006730: 280a 2020 2020 2020 2020 7374 7265 616d  (.        stream
-00006740: 5f6e 616d 653d 7374 7265 616d 5f6e 616d  _name=stream_nam
-00006750: 6531 2c0a 2020 2020 2020 2020 7374 7265  e1,.        stre
-00006760: 616d 5f70 6f73 6974 696f 6e3d 322c 0a20  am_position=2,. 
-00006770: 2020 2020 2020 2062 6163 6b77 6172 6473         backwards
-00006780: 3d54 7275 652c 0a20 2020 2020 2020 206c  =True,.        l
-00006790: 696d 6974 3d31 2c0a 2020 2020 290a 290a  imit=1,.    ).).
-000067a0: 0a61 7373 6572 7420 6c65 6e28 6576 656e  .assert len(even
-000067b0: 7473 2920 3d3d 2031 0a0a 6173 7365 7274  ts) == 1..assert
-000067c0: 2065 7665 6e74 735b 305d 2e73 7472 6561   events[0].strea
-000067d0: 6d5f 6e61 6d65 203d 3d20 7374 7265 616d  m_name == stream
-000067e0: 5f6e 616d 6531 0a61 7373 6572 7420 6576  _name1.assert ev
-000067f0: 656e 7473 5b30 5d2e 7374 7265 616d 5f70  ents[0].stream_p
-00006800: 6f73 6974 696f 6e20 3d3d 2032 0a61 7373  osition == 2.ass
-00006810: 6572 7420 6576 656e 7473 5b30 5d2e 7479  ert events[0].ty
-00006820: 7065 203d 3d20 6576 656e 7433 2e74 7970  pe == event3.typ
-00006830: 650a 6173 7365 7274 2065 7665 6e74 735b  e.assert events[
-00006840: 305d 2e64 6174 6120 3d3d 2065 7665 6e74  0].data == event
-00006850: 332e 6461 7461 0a60 6060 0a0a 2323 2320  3.data.```..### 
-00006860: 5265 6164 2061 6c6c 2065 7665 6e74 730a  Read all events.
-00006870: 0a54 6865 206d 6574 686f 6420 6072 6561  .The method `rea
-00006880: 645f 616c 6c5f 6576 656e 7473 2829 6020  d_all_events()` 
-00006890: 6361 6e20 6265 2075 7365 6420 746f 2072  can be used to r
-000068a0: 6561 6420 616c 6c20 7265 636f 7264 6564  ead all recorded
-000068b0: 2065 7665 6e74 730a 696e 2074 6865 2064   events.in the d
-000068c0: 6174 6162 6173 6520 696e 2074 6865 206f  atabase in the o
-000068d0: 7264 6572 2074 6865 7920 7765 7265 2072  rder they were r
-000068e0: 6563 6f72 6465 642e 2041 6e20 6974 6572  ecorded. An iter
-000068f0: 6162 6c65 206f 626a 6563 7420 6f66 0a72  able object of.r
-00006900: 6563 6f72 6465 6420 6576 656e 7473 2069  ecorded events i
-00006910: 7320 7265 7475 726e 6564 2e20 5468 6973  s returned. This
-00006920: 2069 7465 7261 626c 6520 6f62 6a65 6374   iterable object
-00006930: 2077 696c 6c20 7374 6f70 2077 6865 6e20   will stop when 
-00006940: 6974 2068 6173 0a79 6965 6c64 6564 2074  it has.yielded t
-00006950: 6865 206c 6173 7420 7265 636f 7264 6564  he last recorded
-00006960: 2065 7665 6e74 2e0a 0a54 6869 7320 6d65   event...This me
-00006970: 7468 6f64 2073 7570 706f 7274 7320 7369  thod supports si
-00006980: 7820 6f70 7469 6f6e 616c 2061 7267 756d  x optional argum
-00006990: 656e 7473 2c20 6063 6f6d 6d69 745f 706f  ents, `commit_po
-000069a0: 7369 7469 6f6e 602c 2060 6261 636b 7761  sition`, `backwa
-000069b0: 7264 7360 2c0a 6066 696c 7465 725f 6578  rds`,.`filter_ex
-000069c0: 636c 7564 6560 2c20 6066 696c 7465 725f  clude`, `filter_
-000069d0: 696e 636c 7564 6560 2c20 606c 696d 6974  include`, `limit
-000069e0: 602c 2061 6e64 2060 7469 6d65 6f75 7460  `, and `timeout`
-000069f0: 2e0a 0a54 6865 206f 7074 696f 6e61 6c20  ...The optional 
-00006a00: 6172 6775 6d65 6e74 2060 636f 6d6d 6974  argument `commit
-00006a10: 5f70 6f73 6974 696f 6e60 2069 7320 616e  _position` is an
-00006a20: 206f 7074 696f 6e61 6c20 696e 7465 6765   optional intege
-00006a30: 7220 7468 6174 2063 616e 2062 6520 7573  r that can be us
-00006a40: 6564 2074 6f0a 7370 6563 6966 7920 7468  ed to.specify th
-00006a50: 6520 636f 6d6d 6974 2070 6f73 6974 696f  e commit positio
-00006a60: 6e20 6672 6f6d 2077 6869 6368 2074 6f20  n from which to 
-00006a70: 7374 6172 7420 7265 6164 696e 672e 2054  start reading. T
-00006a80: 6869 7320 6172 6775 6d65 6e74 2069 7320  his argument is 
-00006a90: 604e 6f6e 6560 2062 790a 6465 6661 756c  `None` by.defaul
-00006aa0: 742c 206d 6561 6e69 6e67 2074 6861 7420  t, meaning that 
-00006ab0: 616c 6c20 7468 6520 6576 656e 7473 2077  all the events w
-00006ac0: 696c 6c20 6265 2072 6561 6420 6569 7468  ill be read eith
-00006ad0: 6572 2066 726f 6d20 7468 6520 7374 6172  er from the star
-00006ae0: 742c 206f 720a 6672 6f6d 2074 6865 2065  t, or.from the e
-00006af0: 6e64 2069 6620 6062 6163 6b77 6172 6473  nd if `backwards
-00006b00: 6020 6973 2060 5472 7565 6020 2873 6565  ` is `True` (see
-00006b10: 2062 656c 6f77 292e 2050 6c65 6173 6520   below). Please 
-00006b20: 6e6f 7465 2c20 6966 2073 7065 6369 6669  note, if specifi
-00006b30: 6564 2c0a 7468 6520 7370 6563 6966 6965  ed,.the specifie
-00006b40: 6420 706f 7369 7469 6f6e 206d 7573 7420  d position must 
-00006b50: 6265 2061 6e20 6163 7475 616c 6c79 2065  be an actually e
-00006b60: 7869 7374 696e 6720 636f 6d6d 6974 2070  xisting commit p
-00006b70: 6f73 6974 696f 6e2c 2062 6563 6175 7365  osition, because
-00006b80: 0a61 6e79 206f 7468 6572 206e 756d 6265  .any other numbe
-00006b90: 7220 7769 6c6c 2072 6573 756c 7420 696e  r will result in
-00006ba0: 2061 2073 6572 7665 7220 6572 726f 7220   a server error 
-00006bb0: 2861 7420 6c65 6173 7420 696e 2045 7665  (at least in Eve
-00006bc0: 6e74 5374 6f72 6544 4220 7632 312e 3130  ntStoreDB v21.10
-00006bd0: 292e 0a0a 5468 6520 6f70 7469 6f6e 616c  )...The optional
-00006be0: 2061 7267 756d 656e 7420 6062 6163 6b77   argument `backw
-00006bf0: 6172 6473 6020 6973 2061 2062 6f6f 6c65  ards` is a boole
-00006c00: 616e 2077 6869 6368 2069 7320 6279 2064  an which is by d
-00006c10: 6566 6175 6c74 2060 4661 6c73 6560 206d  efault `False` m
-00006c20: 6561 6e69 6e67 2074 6865 0a65 7665 6e74  eaning the.event
-00006c30: 7320 7769 6c6c 2062 6520 7265 6164 2066  s will be read f
-00006c40: 6f72 7761 7264 7320 6279 2064 6566 6175  orwards by defau
-00006c50: 6c74 2c20 736f 2074 6861 7420 6576 656e  lt, so that even
-00006c60: 7473 2061 7265 2072 6574 7572 6e65 6420  ts are returned 
-00006c70: 696e 2074 6865 0a6f 7264 6572 2074 6865  in the.order the
-00006c80: 7920 7765 7265 2063 6f6d 6d69 7474 6564  y were committed
-00006c90: 2c20 4966 2060 6261 636b 7761 7264 7360  , If `backwards`
-00006ca0: 2069 7320 6054 7275 6560 2c20 7468 6520   is `True`, the 
-00006cb0: 6576 656e 7473 2077 696c 6c20 6265 2072  events will be r
-00006cc0: 6561 640a 6261 636b 7761 7264 732c 2073  ead.backwards, s
-00006cd0: 6f20 7468 6174 2065 7665 6e74 7320 6172  o that events ar
-00006ce0: 6520 7265 7475 726e 6564 2069 6e20 7265  e returned in re
-00006cf0: 7665 7273 6520 6f72 6465 722e 0a0a 5468  verse order...Th
-00006d00: 6520 6f70 7469 6f6e 616c 2061 7267 756d  e optional argum
-00006d10: 656e 7420 6066 696c 7465 725f 6578 636c  ent `filter_excl
-00006d20: 7564 6560 2069 7320 6120 7365 7175 656e  ude` is a sequen
-00006d30: 6365 206f 6620 7265 6775 6c61 7220 6578  ce of regular ex
-00006d40: 7072 6573 7369 6f6e 7320 7468 6174 0a6d  pressions that.m
-00006d50: 6174 6368 2074 6865 2074 7970 6520 7374  atch the type st
-00006d60: 7269 6e67 7320 6f66 2072 6563 6f72 6465  rings of recorde
-00006d70: 6420 6576 656e 7473 2074 6861 7420 7368  d events that sh
-00006d80: 6f75 6c64 206e 6f74 2062 6520 696e 636c  ould not be incl
-00006d90: 7564 6564 2e20 4279 2064 6566 6175 6c74  uded. By default
-00006da0: 2c0a 7468 6973 2061 7267 756d 656e 7420  ,.this argument 
-00006db0: 7769 6c6c 206d 6174 6368 2022 7379 7374  will match "syst
-00006dc0: 656d 2065 7665 6e74 7322 2c20 736f 2074  em events", so t
-00006dd0: 6861 7420 7468 6579 2077 696c 6c20 6e6f  hat they will no
-00006de0: 7420 6265 2069 6e63 6c75 6465 642e 0a54  t be included..T
-00006df0: 6869 7320 6172 6775 6d65 6e74 2069 7320  his argument is 
-00006e00: 6967 6e6f 7265 6420 6966 2060 6669 6c74  ignored if `filt
-00006e10: 6572 5f69 6e63 6c75 6465 6020 6973 2073  er_include` is s
-00006e20: 6574 2074 6f20 6120 6e6f 6e2d 656d 7074  et to a non-empt
-00006e30: 7920 7365 7175 656e 6365 2e0a 0a54 6865  y sequence...The
-00006e40: 206f 7074 696f 6e61 6c20 6172 6775 6d65   optional argume
-00006e50: 6e74 2060 6669 6c74 6572 5f69 6e63 6c75  nt `filter_inclu
-00006e60: 6465 6020 6973 2061 2073 6571 7565 6e63  de` is a sequenc
-00006e70: 6520 6f66 2072 6567 756c 6172 2065 7870  e of regular exp
-00006e80: 7265 7373 696f 6e73 0a74 6861 7420 6d61  ressions.that ma
-00006e90: 7463 6820 7468 6520 7479 7065 2073 7472  tch the type str
-00006ea0: 696e 6773 206f 6620 7265 636f 7264 6564  ings of recorded
-00006eb0: 2065 7665 6e74 7320 7468 6174 2073 686f   events that sho
-00006ec0: 756c 6420 6265 2069 6e63 6c75 6465 642e  uld be included.
-00006ed0: 2042 790a 6465 6661 756c 742c 2074 6869   By.default, thi
-00006ee0: 7320 6172 6775 6d65 6e74 2069 7320 616e  s argument is an
-00006ef0: 2065 6d70 7479 2074 7570 6c65 2e20 4966   empty tuple. If
-00006f00: 2074 6869 7320 6172 6775 6d65 6e74 2069   this argument i
-00006f10: 7320 7365 7420 746f 2061 0a6e 6f6e 2d65  s set to a.non-e
-00006f20: 6d70 7479 2073 6571 7565 6e63 652c 2074  mpty sequence, t
-00006f30: 6865 2060 6669 6c74 6572 5f65 7863 6c75  he `filter_exclu
-00006f40: 6465 6020 6172 6775 6d65 6e74 2069 7320  de` argument is 
-00006f50: 6967 6e6f 7265 642e 0a0a 5468 6520 6f70  ignored...The op
-00006f60: 7469 6f6e 616c 2061 7267 756d 656e 7420  tional argument 
-00006f70: 606c 696d 6974 6020 6973 2061 6e20 696e  `limit` is an in
-00006f80: 7465 6765 7220 7768 6963 6820 6c69 6d69  teger which limi
-00006f90: 7473 2074 6865 206e 756d 6265 7220 6f66  ts the number of
-00006fa0: 2065 7665 6e74 7320 7468 6174 2077 696c   events that wil
-00006fb0: 6c0a 6265 2072 6574 7572 6e65 642e 2054  l.be returned. T
-00006fc0: 6865 2064 6566 6175 6c74 2076 616c 7565  he default value
-00006fd0: 2069 7320 6073 7973 2e6d 6178 696e 7460   is `sys.maxint`
-00006fe0: 2e0a 0a54 6865 206f 7074 696f 6e61 6c20  ...The optional 
-00006ff0: 6172 6775 6d65 6e74 2060 7469 6d65 6f75  argument `timeou
-00007000: 7460 2069 7320 6120 5079 7468 6f6e 2060  t` is a Python `
-00007010: 666c 6f61 7460 2077 6869 6368 2073 6574  float` which set
-00007020: 7320 6120 6465 6164 6c69 6e65 2066 6f72  s a deadline for
-00007030: 2074 6865 2063 6f6d 706c 6574 696f 6e20   the completion 
-00007040: 6f66 0a74 6865 2067 5250 4320 6f70 6572  of.the gRPC oper
-00007050: 6174 696f 6e2e 0a0a 5468 6520 6669 6c74  ation...The filt
-00007060: 6572 696e 6720 6f66 2065 7665 6e74 7320  ering of events 
-00007070: 6973 2064 6f6e 6520 6f6e 2074 6865 2045  is done on the E
-00007080: 7665 6e74 5374 6f72 6544 4220 7365 7276  ventStoreDB serv
-00007090: 6572 2e20 5468 650a 606c 696d 6974 6020  er. The.`limit` 
-000070a0: 6172 6775 6d65 6e74 2069 7320 6170 706c  argument is appl
-000070b0: 6965 6420 6f6e 2074 6865 2073 6572 7665  ied on the serve
-000070c0: 7220 6166 7465 7220 6669 6c74 6572 696e  r after filterin
-000070d0: 672e 2053 6565 2062 656c 6f77 2066 6f72  g. See below for
-000070e0: 0a6d 6f72 6520 696e 666f 726d 6174 696f  .more informatio
-000070f0: 6e20 6162 6f75 7420 6669 6c74 6572 2072  n about filter r
-00007100: 6567 756c 6172 2065 7870 7265 7373 696f  egular expressio
-00007110: 6e73 2e0a 0a57 6865 6e20 7265 6164 696e  ns...When readin
-00007120: 6720 666f 7277 6172 6473 2066 726f 6d20  g forwards from 
-00007130: 6120 7370 6563 6966 6963 2063 6f6d 6d69  a specific commi
-00007140: 7420 706f 7369 7469 6f6e 2c20 7468 6520  t position, the 
-00007150: 6576 656e 7420 6174 2074 6865 2073 7065  event at the spe
-00007160: 6369 6669 6564 0a70 6f73 6974 696f 6e20  cified.position 
-00007170: 5749 4c4c 2062 6520 696e 636c 7564 6564  WILL be included
-00007180: 2e20 486f 7765 7665 722c 2077 6865 6e20  . However, when 
-00007190: 7265 6164 696e 6720 6261 636b 7761 7264  reading backward
-000071a0: 732c 2074 6865 2065 7665 6e74 2061 7420  s, the event at 
-000071b0: 7468 650a 7370 6563 6966 6965 6420 706f  the.specified po
-000071c0: 7369 7469 6f6e 2077 696c 6c20 4e4f 5420  sition will NOT 
-000071d0: 6265 2069 6e63 6c75 6465 642e 2028 5468  be included. (Th
-000071e0: 6973 206e 6f6e 2d69 6e63 6c75 7369 7665  is non-inclusive
-000071f0: 2062 6568 6176 696f 7572 2c20 6f66 2065   behaviour, of e
-00007200: 7863 6c75 6469 6e67 0a74 6865 2073 7065  xcluding.the spe
-00007210: 6369 6669 6564 2063 6f6d 6d69 7420 706f  cified commit po
-00007220: 7369 7469 6f6e 2077 6865 6e20 7265 6164  sition when read
-00007230: 696e 6720 616c 6c20 7374 7265 616d 7320  ing all streams 
-00007240: 6261 636b 7761 7264 732c 2064 6966 6665  backwards, diffe
-00007250: 7273 2066 726f 6d20 7468 650a 6265 6861  rs from the.beha
-00007260: 7669 6f75 7220 7768 656e 2072 6561 6469  viour when readi
-00007270: 6e67 2061 2073 7472 6561 6d20 6261 636b  ng a stream back
-00007280: 7761 7264 7320 6672 6f6d 2061 2073 7065  wards from a spe
-00007290: 6369 6669 6320 7374 7265 616d 2070 6f73  cific stream pos
-000072a0: 6974 696f 6e2c 2049 276d 0a6e 6f74 2073  ition, I'm.not s
-000072b0: 7572 6520 7768 792e 290a 0a54 6865 2065  ure why.)..The e
-000072c0: 7861 6d70 6c65 2062 656c 6f77 2073 686f  xample below sho
-000072d0: 7773 2068 6f77 2074 6f20 7265 6164 2061  ws how to read a
-000072e0: 6c6c 2065 7665 6e74 7320 696e 2074 6865  ll events in the
-000072f0: 2064 6174 6162 6173 6520 696e 2074 6865   database in the
-00007300: 0a6f 7264 6572 2074 6865 7920 7765 7265  .order they were
-00007310: 2072 6563 6f72 6465 642e 0a0a 6060 6070   recorded...```p
-00007320: 7974 686f 6e0a 6576 656e 7473 203d 206c  ython.events = l
-00007330: 6973 7428 636c 6965 6e74 2e72 6561 645f  ist(client.read_
-00007340: 616c 6c5f 6576 656e 7473 2829 290a 0a61  all_events())..a
-00007350: 7373 6572 7420 6c65 6e28 6576 656e 7473  ssert len(events
-00007360: 2920 3e3d 2033 0a60 6060 0a0a 5468 6520  ) >= 3.```..The 
-00007370: 6578 616d 706c 6520 6265 6c6f 7720 7368  example below sh
-00007380: 6f77 7320 686f 7720 746f 2072 6561 6420  ows how to read 
-00007390: 616c 6c20 7265 636f 7264 6564 2065 7665  all recorded eve
-000073a0: 6e74 7320 6672 6f6d 2061 2073 7065 6369  nts from a speci
-000073b0: 6669 6320 636f 6d6d 6974 2070 6f73 6974  fic commit posit
-000073c0: 696f 6e2e 0a0a 6060 6070 7974 686f 6e0a  ion...```python.
-000073d0: 6576 656e 7473 203d 206c 6973 7428 0a20  events = list(. 
-000073e0: 2020 2063 6c69 656e 742e 7265 6164 5f61     client.read_a
-000073f0: 6c6c 5f65 7665 6e74 7328 0a20 2020 2020  ll_events(.     
-00007400: 2020 2063 6f6d 6d69 745f 706f 7369 7469     commit_positi
-00007410: 6f6e 3d63 6f6d 6d69 745f 706f 7369 7469  on=commit_positi
-00007420: 6f6e 310a 2020 2020 290a 290a 0a61 7373  on1.    ).)..ass
-00007430: 6572 7420 6c65 6e28 6576 656e 7473 2920  ert len(events) 
-00007440: 3d3d 2033 0a0a 6173 7365 7274 2065 7665  == 3..assert eve
-00007450: 6e74 735b 305d 2e73 7472 6561 6d5f 6e61  nts[0].stream_na
-00007460: 6d65 203d 3d20 7374 7265 616d 5f6e 616d  me == stream_nam
-00007470: 6531 0a61 7373 6572 7420 6576 656e 7473  e1.assert events
-00007480: 5b30 5d2e 7374 7265 616d 5f70 6f73 6974  [0].stream_posit
-00007490: 696f 6e20 3d3d 2030 0a61 7373 6572 7420  ion == 0.assert 
-000074a0: 6576 656e 7473 5b30 5d2e 7479 7065 203d  events[0].type =
-000074b0: 3d20 6576 656e 7431 2e74 7970 650a 6173  = event1.type.as
-000074c0: 7365 7274 2065 7665 6e74 735b 305d 2e64  sert events[0].d
-000074d0: 6174 6120 3d3d 2065 7665 6e74 312e 6461  ata == event1.da
-000074e0: 7461 0a0a 6173 7365 7274 2065 7665 6e74  ta..assert event
-000074f0: 735b 315d 2e73 7472 6561 6d5f 6e61 6d65  s[1].stream_name
-00007500: 203d 3d20 7374 7265 616d 5f6e 616d 6531   == stream_name1
-00007510: 0a61 7373 6572 7420 6576 656e 7473 5b31  .assert events[1
-00007520: 5d2e 7374 7265 616d 5f70 6f73 6974 696f  ].stream_positio
-00007530: 6e20 3d3d 2031 0a61 7373 6572 7420 6576  n == 1.assert ev
-00007540: 656e 7473 5b31 5d2e 7479 7065 203d 3d20  ents[1].type == 
-00007550: 6576 656e 7432 2e74 7970 650a 6173 7365  event2.type.asse
-00007560: 7274 2065 7665 6e74 735b 315d 2e64 6174  rt events[1].dat
-00007570: 6120 3d3d 2065 7665 6e74 322e 6461 7461  a == event2.data
-00007580: 0a0a 6173 7365 7274 2065 7665 6e74 735b  ..assert events[
-00007590: 325d 2e73 7472 6561 6d5f 6e61 6d65 203d  2].stream_name =
-000075a0: 3d20 7374 7265 616d 5f6e 616d 6531 0a61  = stream_name1.a
-000075b0: 7373 6572 7420 6576 656e 7473 5b32 5d2e  ssert events[2].
-000075c0: 7374 7265 616d 5f70 6f73 6974 696f 6e20  stream_position 
-000075d0: 3d3d 2032 0a61 7373 6572 7420 6576 656e  == 2.assert even
-000075e0: 7473 5b32 5d2e 7479 7065 203d 3d20 6576  ts[2].type == ev
-000075f0: 656e 7433 2e74 7970 650a 6173 7365 7274  ent3.type.assert
-00007600: 2065 7665 6e74 735b 325d 2e64 6174 6120   events[2].data 
-00007610: 3d3d 2065 7665 6e74 332e 6461 7461 0a60  == event3.data.`
-00007620: 6060 0a0a 5468 6520 6578 616d 706c 6520  ``..The example 
-00007630: 6265 6c6f 7720 7368 6f77 7320 686f 7720  below shows how 
-00007640: 746f 2072 6561 6420 616c 6c20 7265 636f  to read all reco
-00007650: 7264 6564 2065 7665 6e74 7320 696e 2072  rded events in r
-00007660: 6576 6572 7365 206f 7264 6572 2e0a 0a60  everse order...`
-00007670: 6060 7079 7468 6f6e 0a65 7665 6e74 7320  ``python.events 
-00007680: 3d20 6c69 7374 280a 2020 2020 636c 6965  = list(.    clie
-00007690: 6e74 2e72 6561 645f 616c 6c5f 6576 656e  nt.read_all_even
-000076a0: 7473 280a 2020 2020 2020 2020 6261 636b  ts(.        back
-000076b0: 7761 7264 733d 5472 7565 0a20 2020 2029  wards=True.    )
-000076c0: 0a29 0a0a 6173 7365 7274 206c 656e 2865  .)..assert len(e
-000076d0: 7665 6e74 7329 203e 3d20 330a 0a61 7373  vents) >= 3..ass
-000076e0: 6572 7420 6576 656e 7473 5b30 5d2e 7374  ert events[0].st
-000076f0: 7265 616d 5f6e 616d 6520 3d3d 2073 7472  ream_name == str
-00007700: 6561 6d5f 6e61 6d65 310a 6173 7365 7274  eam_name1.assert
-00007710: 2065 7665 6e74 735b 305d 2e73 7472 6561   events[0].strea
-00007720: 6d5f 706f 7369 7469 6f6e 203d 3d20 320a  m_position == 2.
-00007730: 6173 7365 7274 2065 7665 6e74 735b 305d  assert events[0]
-00007740: 2e74 7970 6520 3d3d 2065 7665 6e74 332e  .type == event3.
-00007750: 7479 7065 0a61 7373 6572 7420 6576 656e  type.assert even
-00007760: 7473 5b30 5d2e 6461 7461 203d 3d20 6576  ts[0].data == ev
-00007770: 656e 7433 2e64 6174 610a 0a61 7373 6572  ent3.data..asser
-00007780: 7420 6576 656e 7473 5b31 5d2e 7374 7265  t events[1].stre
-00007790: 616d 5f6e 616d 6520 3d3d 2073 7472 6561  am_name == strea
-000077a0: 6d5f 6e61 6d65 310a 6173 7365 7274 2065  m_name1.assert e
-000077b0: 7665 6e74 735b 315d 2e73 7472 6561 6d5f  vents[1].stream_
-000077c0: 706f 7369 7469 6f6e 203d 3d20 310a 6173  position == 1.as
-000077d0: 7365 7274 2065 7665 6e74 735b 315d 2e74  sert events[1].t
-000077e0: 7970 6520 3d3d 2065 7665 6e74 322e 7479  ype == event2.ty
-000077f0: 7065 0a61 7373 6572 7420 6576 656e 7473  pe.assert events
-00007800: 5b31 5d2e 6461 7461 203d 3d20 6576 656e  [1].data == even
-00007810: 7432 2e64 6174 610a 0a61 7373 6572 7420  t2.data..assert 
-00007820: 6576 656e 7473 5b32 5d2e 7374 7265 616d  events[2].stream
-00007830: 5f6e 616d 6520 3d3d 2073 7472 6561 6d5f  _name == stream_
-00007840: 6e61 6d65 310a 6173 7365 7274 2065 7665  name1.assert eve
-00007850: 6e74 735b 325d 2e73 7472 6561 6d5f 706f  nts[2].stream_po
-00007860: 7369 7469 6f6e 203d 3d20 300a 6173 7365  sition == 0.asse
-00007870: 7274 2065 7665 6e74 735b 325d 2e74 7970  rt events[2].typ
-00007880: 6520 3d3d 2065 7665 6e74 312e 7479 7065  e == event1.type
-00007890: 0a61 7373 6572 7420 6576 656e 7473 5b32  .assert events[2
-000078a0: 5d2e 6461 7461 203d 3d20 6576 656e 7431  ].data == event1
-000078b0: 2e64 6174 610a 6060 600a 0a54 6865 2065  .data.```..The e
-000078c0: 7861 6d70 6c65 2062 656c 6f77 2073 686f  xample below sho
-000078d0: 7773 2068 6f77 2074 6f20 7265 6164 2061  ws how to read a
-000078e0: 206c 696d 6974 6564 206e 756d 6265 7220   limited number 
-000078f0: 286f 6e65 2920 6f66 2074 6865 2072 6563  (one) of the rec
-00007900: 6f72 6465 6420 6576 656e 7473 0a69 6e20  orded events.in 
-00007910: 7468 6520 6461 7461 6261 7365 2066 6f72  the database for
-00007920: 7761 7264 7320 6672 6f6d 2061 2073 7065  wards from a spe
-00007930: 6369 6669 6320 636f 6d6d 6974 2070 6f73  cific commit pos
-00007940: 6974 696f 6e2e 2050 6c65 6173 6520 6e6f  ition. Please no
-00007950: 7465 2c20 7768 656e 2072 6561 6469 6e67  te, when reading
-00007960: 0a61 6c6c 2065 7665 6e74 7320 666f 7277  .all events forw
-00007970: 6172 6473 2066 726f 6d20 6120 7370 6563  ards from a spec
-00007980: 6966 6963 2063 6f6d 6d69 7420 706f 7369  ific commit posi
-00007990: 7469 6f6e 2c20 7468 6520 6576 656e 7420  tion, the event 
-000079a0: 6174 2074 6865 2073 7065 6369 6669 6564  at the specified
-000079b0: 0a70 6f73 6974 696f 6e20 5749 4c4c 2062  .position WILL b
-000079c0: 6520 696e 636c 7564 6564 2e0a 0a0a 6060  e included....``
-000079d0: 6070 7974 686f 6e0a 6576 656e 7473 203d  `python.events =
-000079e0: 206c 6973 7428 0a20 2020 2063 6c69 656e   list(.    clien
-000079f0: 742e 7265 6164 5f61 6c6c 5f65 7665 6e74  t.read_all_event
-00007a00: 7328 0a20 2020 2020 2020 2063 6f6d 6d69  s(.        commi
-00007a10: 745f 706f 7369 7469 6f6e 3d63 6f6d 6d69  t_position=commi
-00007a20: 745f 706f 7369 7469 6f6e 312c 0a20 2020  t_position1,.   
-00007a30: 2020 2020 206c 696d 6974 3d31 2c0a 2020       limit=1,.  
-00007a40: 2020 290a 290a 0a61 7373 6572 7420 6c65    ).)..assert le
-00007a50: 6e28 6576 656e 7473 2920 3d3d 2031 0a0a  n(events) == 1..
-00007a60: 6173 7365 7274 2065 7665 6e74 735b 305d  assert events[0]
-00007a70: 2e73 7472 6561 6d5f 6e61 6d65 203d 3d20  .stream_name == 
-00007a80: 7374 7265 616d 5f6e 616d 6531 0a61 7373  stream_name1.ass
-00007a90: 6572 7420 6576 656e 7473 5b30 5d2e 7374  ert events[0].st
-00007aa0: 7265 616d 5f70 6f73 6974 696f 6e20 3d3d  ream_position ==
-00007ab0: 2030 0a61 7373 6572 7420 6576 656e 7473   0.assert events
-00007ac0: 5b30 5d2e 7479 7065 203d 3d20 6576 656e  [0].type == even
-00007ad0: 7431 2e74 7970 650a 6173 7365 7274 2065  t1.type.assert e
-00007ae0: 7665 6e74 735b 305d 2e64 6174 6120 3d3d  vents[0].data ==
-00007af0: 2065 7665 6e74 312e 6461 7461 0a0a 6173   event1.data..as
-00007b00: 7365 7274 2065 7665 6e74 735b 305d 2e63  sert events[0].c
-00007b10: 6f6d 6d69 745f 706f 7369 7469 6f6e 203d  ommit_position =
-00007b20: 3d20 636f 6d6d 6974 5f70 6f73 6974 696f  = commit_positio
-00007b30: 6e31 0a60 6060 0a0a 5468 6520 6578 616d  n1.```..The exam
-00007b40: 706c 6520 6265 6c6f 7720 7368 6f77 7320  ple below shows 
-00007b50: 686f 7720 746f 2072 6561 6420 6120 6c69  how to read a li
-00007b60: 6d69 7465 6420 6e75 6d62 6572 2028 6f6e  mited number (on
-00007b70: 6529 206f 6620 7468 6520 7265 636f 7264  e) of the record
-00007b80: 6564 2065 7665 6e74 730a 696e 2074 6865  ed events.in the
-00007b90: 2064 6174 6162 6173 6520 6261 636b 7761   database backwa
-00007ba0: 7264 7320 6672 6f6d 2074 6865 2065 6e64  rds from the end
-00007bb0: 2e20 5468 6973 2067 6976 6573 2074 6865  . This gives the
-00007bc0: 206c 6173 7420 7265 636f 7264 6564 2065   last recorded e
-00007bd0: 7665 6e74 2e0a 0a60 6060 7079 7468 6f6e  vent...```python
-00007be0: 0a65 7665 6e74 7320 3d20 6c69 7374 280a  .events = list(.
-00007bf0: 2020 2020 636c 6965 6e74 2e72 6561 645f      client.read_
-00007c00: 616c 6c5f 6576 656e 7473 280a 2020 2020  all_events(.    
-00007c10: 2020 2020 6261 636b 7761 7264 733d 5472      backwards=Tr
-00007c20: 7565 2c0a 2020 2020 2020 2020 6c69 6d69  ue,.        limi
-00007c30: 743d 312c 0a20 2020 2029 0a29 0a0a 6173  t=1,.    ).)..as
-00007c40: 7365 7274 206c 656e 2865 7665 6e74 7329  sert len(events)
-00007c50: 203d 3d20 310a 0a61 7373 6572 7420 6576   == 1..assert ev
-00007c60: 656e 7473 5b30 5d2e 7374 7265 616d 5f6e  ents[0].stream_n
-00007c70: 616d 6520 3d3d 2073 7472 6561 6d5f 6e61  ame == stream_na
-00007c80: 6d65 310a 6173 7365 7274 2065 7665 6e74  me1.assert event
-00007c90: 735b 305d 2e73 7472 6561 6d5f 706f 7369  s[0].stream_posi
-00007ca0: 7469 6f6e 203d 3d20 320a 6173 7365 7274  tion == 2.assert
-00007cb0: 2065 7665 6e74 735b 305d 2e74 7970 6520   events[0].type 
-00007cc0: 3d3d 2065 7665 6e74 332e 7479 7065 0a61  == event3.type.a
-00007cd0: 7373 6572 7420 6576 656e 7473 5b30 5d2e  ssert events[0].
-00007ce0: 6461 7461 203d 3d20 6576 656e 7433 2e64  data == event3.d
-00007cf0: 6174 610a 6060 600a 0a54 6865 2065 7861  ata.```..The exa
-00007d00: 6d70 6c65 2062 656c 6f77 2073 686f 7773  mple below shows
-00007d10: 2068 6f77 2074 6f20 7265 6164 2061 206c   how to read a l
-00007d20: 696d 6974 6564 206e 756d 6265 7220 286f  imited number (o
-00007d30: 6e65 2920 6f66 2074 6865 2072 6563 6f72  ne) of the recor
-00007d40: 6465 6420 6576 656e 7473 0a69 6e20 7468  ded events.in th
-00007d50: 6520 6461 7461 6261 7365 2062 6163 6b77  e database backw
-00007d60: 6172 6473 2066 726f 6d20 6120 7370 6563  ards from a spec
-00007d70: 6966 6963 2063 6f6d 6d69 7420 706f 7369  ific commit posi
-00007d80: 7469 6f6e 2e20 506c 6561 7365 206e 6f74  tion. Please not
-00007d90: 652c 2077 6865 6e20 7265 6164 696e 670a  e, when reading.
-00007da0: 616c 6c20 6576 656e 7473 2062 6163 6b77  all events backw
-00007db0: 6172 6473 2066 726f 6d20 6120 7370 6563  ards from a spec
-00007dc0: 6966 6963 2063 6f6d 6d69 7420 706f 7369  ific commit posi
-00007dd0: 7469 6f6e 2c20 7468 6520 6576 656e 7420  tion, the event 
-00007de0: 6174 2074 6865 2073 7065 6369 6669 6564  at the specified
-00007df0: 0a70 6f73 6974 696f 6e20 5749 4c4c 204e  .position WILL N
-00007e00: 4f54 2062 6520 696e 636c 7564 6564 2e0a  OT be included..
-00007e10: 0a60 6060 7079 7468 6f6e 0a65 7665 6e74  .```python.event
-00007e20: 7320 3d20 6c69 7374 280a 2020 2020 636c  s = list(.    cl
-00007e30: 6965 6e74 2e72 6561 645f 616c 6c5f 6576  ient.read_all_ev
-00007e40: 656e 7473 280a 2020 2020 2020 2020 636f  ents(.        co
-00007e50: 6d6d 6974 5f70 6f73 6974 696f 6e3d 636f  mmit_position=co
-00007e60: 6d6d 6974 5f70 6f73 6974 696f 6e32 2c0a  mmit_position2,.
-00007e70: 2020 2020 2020 2020 6261 636b 7761 7264          backward
-00007e80: 733d 5472 7565 2c0a 2020 2020 2020 2020  s=True,.        
-00007e90: 6c69 6d69 743d 312c 0a20 2020 2029 0a29  limit=1,.    ).)
-00007ea0: 0a0a 6173 7365 7274 206c 656e 2865 7665  ..assert len(eve
-00007eb0: 6e74 7329 203d 3d20 310a 0a61 7373 6572  nts) == 1..asser
-00007ec0: 7420 6576 656e 7473 5b30 5d2e 636f 6d6d  t events[0].comm
-00007ed0: 6974 5f70 6f73 6974 696f 6e20 3c20 636f  it_position < co
-00007ee0: 6d6d 6974 5f70 6f73 6974 696f 6e32 0a60  mmit_position2.`
-00007ef0: 6060 0a0a 0a23 2323 2047 6574 2063 7572  ``...### Get cur
-00007f00: 7265 6e74 2073 7472 6561 6d20 706f 7369  rent stream posi
-00007f10: 7469 6f6e 0a0a 5468 6520 6067 6574 5f73  tion..The `get_s
-00007f20: 7472 6561 6d5f 706f 7369 7469 6f6e 2829  tream_position()
-00007f30: 6020 6d65 7468 6f64 2063 616e 2062 6520  ` method can be 
-00007f40: 7573 6564 2074 6f0a 6765 7420 7468 6520  used to.get the 
-00007f50: 2273 7472 6561 6d20 706f 7369 7469 6f6e  "stream position
-00007f60: 2220 6f66 2074 6865 206c 6173 7420 7265  " of the last re
-00007f70: 636f 7264 6564 2065 7665 6e74 2069 6e20  corded event in 
-00007f80: 6120 7374 7265 616d 2e0a 0a54 6869 7320  a stream...This 
-00007f90: 6d65 7468 6f64 2068 6173 2061 2060 7374  method has a `st
-00007fa0: 7265 616d 5f6e 616d 6560 2061 7267 756d  ream_name` argum
-00007fb0: 656e 742c 2077 6869 6368 2069 7320 7265  ent, which is re
-00007fc0: 7175 6972 6564 2e0a 0a54 6869 7320 6d65  quired...This me
-00007fd0: 7468 6f64 2061 6c73 6f20 7461 6b65 7320  thod also takes 
-00007fe0: 616e 206f 7074 696f 6e61 6c20 6074 696d  an optional `tim
-00007ff0: 656f 7574 6020 6172 6775 6d65 6e74 2c20  eout` argument, 
-00008000: 7468 6174 0a69 7320 6578 7065 6374 6564  that.is expected
-00008010: 2074 6f20 6265 2061 2050 7974 686f 6e20   to be a Python 
-00008020: 6066 6c6f 6174 602c 2077 6869 6368 2073  `float`, which s
-00008030: 6574 7320 6120 6465 6164 6c69 6e65 0a66  ets a deadline.f
-00008040: 6f72 2074 6865 2063 6f6d 706c 6574 696f  or the completio
-00008050: 6e20 6f66 2074 6865 2067 5250 4320 6f70  n of the gRPC op
-00008060: 6572 6174 696f 6e2e 0a0a 5468 6520 7365  eration...The se
-00008070: 7175 656e 6365 206f 6620 706f 7369 7469  quence of positi
-00008080: 6f6e 7320 696e 2061 2073 7472 6561 6d20  ons in a stream 
-00008090: 6973 2067 6170 6c65 7373 2e20 4974 2069  is gapless. It i
-000080a0: 7320 7a65 726f 2d62 6173 6564 2c0a 736f  s zero-based,.so
-000080b0: 2074 6861 7420 6120 7374 7265 616d 2077   that a stream w
-000080c0: 6974 6820 6f6e 6520 7265 636f 7264 6564  ith one recorded
-000080d0: 2065 7665 6e74 2068 6173 2061 2063 7572   event has a cur
-000080e0: 7265 6e74 2073 7472 6561 6d0a 706f 7369  rent stream.posi
-000080f0: 7469 6f6e 206f 6620 6030 602e 2054 6865  tion of `0`. The
-00008100: 2063 7572 7265 6e74 2073 7472 6561 6d20   current stream 
-00008110: 706f 7369 7469 6f6e 2069 7320 6031 6020  position is `1` 
-00008120: 7768 656e 2061 2073 7472 6561 6d20 6861  when a stream ha
-00008130: 730a 7477 6f20 6576 656e 7473 2c20 616e  s.two events, an
-00008140: 6420 6974 2069 7320 6032 6020 7768 656e  d it is `2` when
-00008150: 2074 6865 7265 2061 7265 2065 7665 6e74   there are event
-00008160: 732c 2061 6e64 2073 6f20 6f6e 2e0a 0a49  s, and so on...I
-00008170: 6e20 7468 6520 6578 616d 706c 6520 6265  n the example be
-00008180: 6c6f 772c 2074 6865 2063 7572 7265 6e74  low, the current
-00008190: 2073 7472 6561 6d20 706f 7369 7469 6f6e   stream position
-000081a0: 2069 7320 6f62 7461 696e 6564 206f 6620   is obtained of 
-000081b0: 7468 650a 7374 7265 616d 2074 6f20 7768  the.stream to wh
-000081c0: 6963 6820 6576 656e 7473 2077 6572 6520  ich events were 
-000081d0: 6170 7065 6e64 6564 2069 6e20 7468 6520  appended in the 
-000081e0: 6578 616d 706c 6573 2061 626f 7665 2e0a  examples above..
-000081f0: 4265 6361 7573 6520 7468 6520 7365 7175  Because the sequ
-00008200: 656e 6365 206f 6620 7374 7265 616d 2070  ence of stream p
-00008210: 6f73 6974 696f 6e73 2069 7320 7a65 726f  ositions is zero
-00008220: 2d62 6173 6564 2c20 616e 6420 6265 6361  -based, and beca
-00008230: 7573 650a 7468 7265 6520 6576 656e 7473  use.three events
-00008240: 2077 6572 6520 6170 7065 6e64 6564 2c20   were appended, 
-00008250: 736f 2074 6865 2063 7572 7265 6e74 2073  so the current s
-00008260: 7472 6561 6d20 706f 7369 7469 6f6e 2069  tream position i
-00008270: 7320 6032 602e 0a0a 6060 6070 7974 686f  s `2`...```pytho
-00008280: 6e0a 7374 7265 616d 5f70 6f73 6974 696f  n.stream_positio
-00008290: 6e20 3d20 636c 6965 6e74 2e67 6574 5f73  n = client.get_s
-000082a0: 7472 6561 6d5f 706f 7369 7469 6f6e 280a  tream_position(.
-000082b0: 2020 2020 7374 7265 616d 5f6e 616d 653d      stream_name=
-000082c0: 7374 7265 616d 5f6e 616d 6531 0a29 0a0a  stream_name1.)..
-000082d0: 6173 7365 7274 2073 7472 6561 6d5f 706f  assert stream_po
-000082e0: 7369 7469 6f6e 203d 3d20 320a 6060 600a  sition == 2.```.
-000082f0: 0a49 6620 6120 7374 7265 616d 2064 6f65  .If a stream doe
-00008300: 7320 6e6f 7420 6578 6973 742c 2074 6865  s not exist, the
-00008310: 2072 6574 7572 6e65 6420 7374 7265 616d   returned stream
-00008320: 2070 6f73 6974 696f 6e20 7661 6c75 6520   position value 
-00008330: 6973 2060 4e6f 6e65 602c 0a77 6869 6368  is `None`,.which
-00008340: 206d 6174 6368 6573 2074 6865 2072 6571   matches the req
-00008350: 7569 7265 6420 6578 7065 6374 6564 2070  uired expected p
-00008360: 6f73 6974 696f 6e20 7768 656e 2061 7070  osition when app
-00008370: 656e 6469 6e67 2074 6865 2066 6972 7374  ending the first
-00008380: 2065 7665 6e74 0a6f 6620 6120 6e65 7720   event.of a new 
-00008390: 7374 7265 616d 2028 7365 6520 6162 6f76  stream (see abov
-000083a0: 6529 2e0a 0a60 6060 7079 7468 6f6e 0a73  e)...```python.s
-000083b0: 7472 6561 6d5f 706f 7369 7469 6f6e 203d  tream_position =
-000083c0: 2063 6c69 656e 742e 6765 745f 7374 7265   client.get_stre
-000083d0: 616d 5f70 6f73 6974 696f 6e28 0a20 2020  am_position(.   
-000083e0: 2073 7472 6561 6d5f 6e61 6d65 3d73 7472   stream_name=str
-000083f0: 2875 7569 6434 2829 290a 290a 0a61 7373  (uuid4()).)..ass
-00008400: 6572 7420 7374 7265 616d 5f70 6f73 6974  ert stream_posit
-00008410: 696f 6e20 3d3d 204e 6f6e 650a 6060 600a  ion == None.```.
-00008420: 0a54 6869 7320 6d65 7468 6f64 2074 616b  .This method tak
-00008430: 6573 2061 6e20 6f70 7469 6f6e 616c 2061  es an optional a
-00008440: 7267 756d 656e 7420 6074 696d 656f 7574  rgument `timeout
-00008450: 6020 7768 6963 6820 6973 2061 2050 7974  ` which is a Pyt
-00008460: 686f 6e20 6066 6c6f 6174 6020 7468 6174  hon `float` that
-00008470: 2073 6574 730a 6120 6465 6164 6c69 6e65   sets.a deadline
-00008480: 2066 6f72 2074 6865 2063 6f6d 706c 6574   for the complet
-00008490: 696f 6e20 6f66 2074 6865 2067 5250 4320  ion of the gRPC 
-000084a0: 6f70 6572 6174 696f 6e2e 0a0a 0a23 2323  operation....###
-000084b0: 2047 6574 2063 7572 7265 6e74 2063 6f6d   Get current com
-000084c0: 6d69 7420 706f 7369 7469 6f6e 0a0a 5468  mit position..Th
-000084d0: 6520 6d65 7468 6f64 2060 6765 745f 636f  e method `get_co
-000084e0: 6d6d 6974 5f70 6f73 6974 696f 6e28 2960  mmit_position()`
-000084f0: 2063 616e 2062 6520 7573 6564 2074 6f20   can be used to 
-00008500: 6765 7420 7468 6520 6375 7272 656e 740a  get the current.
-00008510: 636f 6d6d 6974 2070 6f73 6974 696f 6e20  commit position 
-00008520: 6f66 2074 6865 2064 6174 6162 6173 652e  of the database.
-00008530: 0a0a 6060 6070 7974 686f 6e0a 636f 6d6d  ..```python.comm
-00008540: 6974 5f70 6f73 6974 696f 6e20 3d20 636c  it_position = cl
-00008550: 6965 6e74 2e67 6574 5f63 6f6d 6d69 745f  ient.get_commit_
-00008560: 706f 7369 7469 6f6e 2829 0a60 6060 0a0a  position().```..
-00008570: 5468 6973 206d 6574 686f 6420 7461 6b65  This method take
-00008580: 7320 616e 206f 7074 696f 6e61 6c20 6172  s an optional ar
-00008590: 6775 6d65 6e74 2060 7469 6d65 6f75 7460  gument `timeout`
-000085a0: 2077 6869 6368 2069 7320 6120 5079 7468   which is a Pyth
-000085b0: 6f6e 2060 666c 6f61 7460 2074 6861 7420  on `float` that 
-000085c0: 7365 7473 0a61 2064 6561 646c 696e 6520  sets.a deadline 
-000085d0: 666f 7220 7468 6520 636f 6d70 6c65 7469  for the completi
-000085e0: 6f6e 206f 6620 7468 6520 6752 5043 206f  on of the gRPC o
-000085f0: 7065 7261 7469 6f6e 2e0a 0a54 6869 7320  peration...This 
-00008600: 6d65 7468 6f64 2063 616e 2062 6520 7573  method can be us
-00008610: 6566 756c 2074 6f20 6d65 6173 7572 6520  eful to measure 
-00008620: 7072 6f67 7265 7373 206f 6620 6120 646f  progress of a do
-00008630: 776e 7374 7265 616d 2063 6f6d 706f 6e65  wnstream compone
-00008640: 6e74 0a74 6861 7420 6973 2070 726f 6365  nt.that is proce
-00008650: 7373 696e 6720 616c 6c20 7265 636f 7264  ssing all record
-00008660: 6564 2065 7665 6e74 732c 2062 7920 636f  ed events, by co
-00008670: 6d70 6172 696e 6720 7468 6520 6375 7272  mparing the curr
-00008680: 656e 7420 636f 6d6d 6974 0a70 6f73 6974  ent commit.posit
-00008690: 696f 6e20 7769 7468 2074 6865 2072 6563  ion with the rec
-000086a0: 6f72 6465 6420 636f 6d6d 6974 2070 6f73  orded commit pos
-000086b0: 6974 696f 6e20 6f66 2074 6865 206c 6173  ition of the las
-000086c0: 7420 7375 6363 6573 7366 756c 6c79 2070  t successfully p
-000086d0: 726f 6365 7373 6564 0a65 7665 6e74 2069  rocessed.event i
-000086e0: 6e20 6120 646f 776e 7374 7265 616d 2063  n a downstream c
-000086f0: 6f6d 706f 6e65 6e74 2e0a 0a54 6865 2076  omponent...The v
-00008700: 616c 7565 206f 6620 7468 6520 6063 6f6d  alue of the `com
-00008710: 6d69 745f 706f 7369 7469 6f6e 6020 6172  mit_position` ar
-00008720: 6775 6d65 6e74 2077 6865 6e20 7265 6164  gument when read
-00008730: 696e 6720 6576 656e 7473 2065 6974 6865  ing events eithe
-00008740: 7220 6279 2075 7369 6e67 0a74 6865 2060  r by using.the `
-00008750: 7265 6164 5f61 6c6c 5f65 7665 6e74 7328  read_all_events(
-00008760: 2960 206d 6574 686f 6420 6f72 2062 7920  )` method or by 
-00008770: 7573 696e 6720 6120 6361 7463 682d 7570  using a catch-up
-00008780: 2073 7562 7363 7269 7074 696f 6e20 776f   subscription wo
-00008790: 756c 6420 7573 7561 6c6c 790a 6265 2064  uld usually.be d
-000087a0: 6574 6572 6d69 6e65 6420 6279 2074 6865  etermined by the
-000087b0: 2072 6563 6f72 6465 6420 636f 6d6d 6974   recorded commit
-000087c0: 2070 6f73 6974 696f 6e20 6f66 2074 6865   position of the
-000087d0: 206c 6173 7420 7375 6363 6573 7366 756c   last successful
-000087e0: 6c79 2070 726f 6365 7373 6564 0a65 7665  ly processed.eve
-000087f0: 6e74 2069 6e20 6120 646f 776e 7374 7265  nt in a downstre
-00008800: 616d 2063 6f6d 706f 6e65 6e74 2e0a 0a0a  am component....
-00008810: 0a23 2323 2047 6574 2073 7472 6561 6d20  .### Get stream 
-00008820: 6d65 7461 6461 7461 0a0a 5468 6520 6d65  metadata..The me
-00008830: 7468 6f64 2060 6765 745f 7374 7265 616d  thod `get_stream
-00008840: 5f6d 6574 6164 6174 6128 2960 2067 6574  _metadata()` get
-00008850: 7320 7468 6520 6d65 7461 6461 7461 2066  s the metadata f
-00008860: 6f72 2061 2073 7472 6561 6d2c 2061 6c6f  or a stream, alo
-00008870: 6e67 0a77 6974 6820 7468 6520 7665 7273  ng.with the vers
-00008880: 696f 6e20 6f66 2074 6865 2073 7472 6561  ion of the strea
-00008890: 6d20 6d65 7461 6461 7461 2e0a 0a60 6060  m metadata...```
-000088a0: 7079 7468 6f6e 0a6d 6574 6164 6174 612c  python.metadata,
-000088b0: 206d 6574 6164 6174 615f 7665 7273 696f   metadata_versio
-000088c0: 6e20 3d20 636c 6965 6e74 2e67 6574 5f73  n = client.get_s
-000088d0: 7472 6561 6d5f 6d65 7461 6461 7461 2873  tream_metadata(s
-000088e0: 7472 6561 6d5f 6e61 6d65 3d73 7472 6561  tream_name=strea
-000088f0: 6d5f 6e61 6d65 3129 0a60 6060 0a0a 5468  m_name1).```..Th
-00008900: 6520 7265 7475 726e 6564 2060 6d65 7461  e returned `meta
-00008910: 6461 7461 6020 7661 6c75 6520 6973 2061  data` value is a
-00008920: 2050 7974 686f 6e20 6064 6963 7460 2e20   Python `dict`. 
-00008930: 5468 6520 7265 7475 726e 6564 2060 6d65  The returned `me
-00008940: 7461 6461 7461 5f76 6572 7369 6f6e 600a  tadata_version`.
-00008950: 7661 6c75 6520 6973 2065 6974 6865 7220  value is either 
-00008960: 616e 2060 696e 7460 2c20 6f72 2060 4e6f  an `int`, or `No
-00008970: 6e65 6020 6966 2074 6865 2073 7472 6561  ne` if the strea
-00008980: 6d20 646f 6573 206e 6f74 2065 7869 7374  m does not exist
-00008990: 2e20 5468 6573 6520 7661 6c75 6573 2063  . These values c
-000089a0: 616e 0a62 6520 7061 7373 6564 2069 6e74  an.be passed int
-000089b0: 6f20 6073 6574 5f73 7472 6561 6d5f 6d65  o `set_stream_me
-000089c0: 7461 6461 7461 2829 602e 0a0a 0a23 2323  tadata()`....###
-000089d0: 2053 6574 2073 7472 6561 6d20 6d65 7461   Set stream meta
-000089e0: 6461 7461 0a0a 5468 6520 6d65 7468 6f64  data..The method
-000089f0: 2060 7365 745f 7374 7265 616d 5f6d 6574   `set_stream_met
-00008a00: 6164 6174 6128 2960 2073 6574 7320 7468  adata()` sets th
-00008a10: 6520 6d65 7461 6461 7461 2066 6f72 2061  e metadata for a
-00008a20: 2073 7472 6561 6d2c 2061 6c6f 6e67 0a77   stream, along.w
-00008a30: 6974 6820 7468 6520 7665 7273 696f 6e20  ith the version 
-00008a40: 6f66 2074 6865 2073 7472 6561 6d20 6d65  of the stream me
-00008a50: 7461 6461 7461 2e0a 0a60 6060 7079 7468  tadata...```pyth
-00008a60: 6f6e 0a6d 6574 6164 6174 615b 2266 6f6f  on.metadata["foo
-00008a70: 225d 203d 2022 6261 7222 0a0a 636c 6965  "] = "bar"..clie
-00008a80: 6e74 2e73 6574 5f73 7472 6561 6d5f 6d65  nt.set_stream_me
-00008a90: 7461 6461 7461 280a 2020 2020 7374 7265  tadata(.    stre
-00008aa0: 616d 5f6e 616d 653d 7374 7265 616d 5f6e  am_name=stream_n
-00008ab0: 616d 6531 2c0a 2020 2020 6d65 7461 6461  ame1,.    metada
-00008ac0: 7461 3d6d 6574 6164 6174 612c 0a20 2020  ta=metadata,.   
-00008ad0: 2065 7870 6563 7465 645f 706f 7369 7469   expected_positi
-00008ae0: 6f6e 3d6d 6574 6164 6174 615f 7665 7273  on=metadata_vers
-00008af0: 696f 6e2c 0a29 0a60 6060 0a0a 5468 6520  ion,.).```..The 
-00008b00: 6065 7870 6563 7465 645f 706f 7369 7469  `expected_positi
-00008b10: 6f6e 6020 6172 6775 6d65 6e74 2073 686f  on` argument sho
-00008b20: 756c 6420 6265 2074 6865 2063 7572 7265  uld be the curre
-00008b30: 6e74 2076 6572 7369 6f6e 206f 6620 7468  nt version of th
-00008b40: 6520 7374 7265 616d 206d 6574 6164 6174  e stream metadat
-00008b50: 612e 0a0a 506c 6561 7365 2072 6566 6572  a...Please refer
-00008b60: 2074 6f20 7468 6520 4576 656e 7453 746f   to the EventSto
-00008b70: 7265 4442 2064 6f63 756d 656e 7461 7469  reDB documentati
-00008b80: 6f6e 2066 6f72 206d 6f72 6520 696e 666f  on for more info
-00008b90: 726d 6174 696f 6e20 6162 6f75 7420 7374  rmation about st
-00008ba0: 7265 616d 0a6d 6574 6164 6174 612e 0a0a  ream.metadata...
-00008bb0: 2323 2320 4465 6c65 7465 2073 7472 6561  ### Delete strea
-00008bc0: 6d0a 0a54 6865 206d 6574 686f 6420 6064  m..The method `d
-00008bd0: 656c 6574 655f 7374 7265 616d 2829 6020  elete_stream()` 
-00008be0: 6361 6e20 6265 2075 7365 6420 746f 2022  can be used to "
-00008bf0: 6465 6c65 7465 2220 6120 7374 7265 616d  delete" a stream
-00008c00: 2e0a 0a60 6060 7079 7468 6f6e 0a63 6f6d  ...```python.com
-00008c10: 6d69 745f 706f 7369 7469 6f6e 203d 2063  mit_position = c
-00008c20: 6c69 656e 742e 6465 6c65 7465 5f73 7472  lient.delete_str
-00008c30: 6561 6d28 7374 7265 616d 5f6e 616d 653d  eam(stream_name=
-00008c40: 7374 7265 616d 5f6e 616d 6531 2c20 6578  stream_name1, ex
-00008c50: 7065 6374 6564 5f70 6f73 6974 696f 6e3d  pected_position=
-00008c60: 3229 0a60 6060 0a0a 4166 7465 7220 6465  2).```..After de
-00008c70: 6c65 7469 6e67 2061 2073 7472 6561 6d2c  leting a stream,
-00008c80: 2069 7427 7320 7374 696c 6c20 706f 7373   it's still poss
-00008c90: 6962 6c65 2074 6f20 6170 7065 6e64 206e  ible to append n
-00008ca0: 6577 2065 7665 6e74 732e 2052 6561 6469  ew events. Readi
-00008cb0: 6e67 2066 726f 6d20 610a 6465 6c65 7465  ng from a.delete
-00008cc0: 6420 7374 7265 616d 2077 696c 6c20 7265  d stream will re
-00008cd0: 7475 726e 206f 6e6c 7920 6576 656e 7473  turn only events
-00008ce0: 2074 6861 7420 6861 7665 2062 6565 6e20   that have been 
-00008cf0: 6170 7065 6e64 6564 2061 6674 6572 2069  appended after i
-00008d00: 7420 7761 730a 6465 6c65 7465 642e 0a0a  t was.deleted...
-00008d10: 2323 2320 546f 6d62 7374 6f6e 6520 7374  ### Tombstone st
-00008d20: 7265 616d 0a0a 5468 6520 6d65 7468 6f64  ream..The method
-00008d30: 2060 746f 6d62 7374 6f6e 655f 7374 7265   `tombstone_stre
-00008d40: 616d 2829 6020 6361 6e20 6265 2075 7365  am()` can be use
-00008d50: 6420 746f 2022 746f 6d62 7374 6f6e 6522  d to "tombstone"
-00008d60: 2061 2073 7472 6561 6d2e 0a0a 6060 6070   a stream...```p
-00008d70: 7974 686f 6e0a 636f 6d6d 6974 5f70 6f73  ython.commit_pos
-00008d80: 6974 696f 6e20 3d20 636c 6965 6e74 2e74  ition = client.t
-00008d90: 6f6d 6273 746f 6e65 5f73 7472 6561 6d28  ombstone_stream(
-00008da0: 7374 7265 616d 5f6e 616d 653d 7374 7265  stream_name=stre
-00008db0: 616d 5f6e 616d 6531 2c20 6578 7065 6374  am_name1, expect
-00008dc0: 6564 5f70 6f73 6974 696f 6e3d 3229 0a60  ed_position=2).`
-00008dd0: 6060 0a0a 4166 7465 7220 746f 6d62 7374  ``..After tombst
-00008de0: 6f6e 696e 6720 6120 7374 7265 616d 2c20  oning a stream, 
-00008df0: 6974 2773 206e 6f74 2070 6f73 7369 626c  it's not possibl
-00008e00: 6520 746f 2061 7070 656e 6420 6e65 7720  e to append new 
-00008e10: 6576 656e 7473 2e0a 0a0a 2323 2043 6174  events....## Cat
-00008e20: 6368 2d75 7020 7375 6273 6372 6970 7469  ch-up subscripti
-00008e30: 6f6e 730a 0a41 2022 6361 7463 682d 7570  ons..A "catch-up
-00008e40: 2073 7562 7363 7269 7074 696f 6e22 2063   subscription" c
-00008e50: 616e 2062 6520 7573 6564 2074 6f20 7265  an be used to re
-00008e60: 6365 6976 6520 616c 7265 6164 7920 7265  ceive already re
-00008e70: 636f 7264 6564 2065 7665 6e74 732c 2062  corded events, b
-00008e80: 7574 0a69 7420 7769 6c6c 2061 6c73 6f20  ut.it will also 
-00008e90: 7265 7475 726e 2065 7665 6e74 7320 7468  return events th
-00008ea0: 6174 2061 7265 2072 6563 6f72 6465 6420  at are recorded 
-00008eb0: 6166 7465 7220 7468 6520 7375 6273 6372  after the subscr
-00008ec0: 6970 7469 6f6e 2077 6173 2073 7461 7274  iption was start
-00008ed0: 6564 2e0a 0a54 6865 206d 6574 686f 6420  ed...The method 
-00008ee0: 6073 7562 7363 7269 6265 5f61 6c6c 5f65  `subscribe_all_e
-00008ef0: 7665 6e74 7328 2960 2073 7461 7274 7320  vents()` starts 
-00008f00: 6120 6361 7463 682d 7570 2073 7562 7363  a catch-up subsc
-00008f10: 7269 7074 696f 6e20 746f 2072 6563 6569  ription to recei
-00008f20: 7665 2061 6c6c 0a65 7665 6e74 7320 696e  ve all.events in
-00008f30: 2074 6865 2064 6174 6162 6173 652e 2054   the database. T
-00008f40: 6865 206d 6574 686f 6420 6073 7562 7363  he method `subsc
-00008f50: 7269 6265 5f73 7472 6561 6d5f 6576 656e  ribe_stream_even
-00008f60: 7473 2829 6020 7374 6172 7473 2061 2063  ts()` starts a c
-00008f70: 6174 6368 2d75 700a 7375 6273 6372 6970  atch-up.subscrip
-00008f80: 7469 6f6e 2074 6f20 7265 6365 6976 6520  tion to receive 
-00008f90: 6576 656e 7473 2066 726f 6d20 6120 7370  events from a sp
-00008fa0: 6563 6966 6963 2073 7472 6561 6d2e 0a0a  ecific stream...
-00008fb0: 4361 7463 682d 7570 2073 7562 7363 7269  Catch-up subscri
-00008fc0: 7074 696f 6e73 2061 7265 2073 696d 706c  ptions are simpl
-00008fd0: 7920 6120 7374 7265 616d 696e 6720 6752  y a streaming gR
-00008fe0: 5043 2063 616c 6c20 7768 6963 6820 6973  PC call which is
-00008ff0: 0a6b 6570 7420 6f70 656e 2062 7920 7468  .kept open by th
-00009000: 6520 7365 7276 6572 2c20 7769 7468 206e  e server, with n
-00009010: 6577 6c79 2072 6563 6f72 6465 6420 6576  ewly recorded ev
-00009020: 656e 7473 2073 656e 7420 746f 2074 6865  ents sent to the
-00009030: 2063 6c69 656e 740a 6173 2074 6865 2063   client.as the c
-00009040: 6c69 656e 7420 6974 6572 6174 6573 206f  lient iterates o
-00009050: 7665 7220 7468 6520 7375 6273 6372 6970  ver the subscrip
-00009060: 7469 6f6e 2e0a 0a4d 616e 7920 6361 7463  tion...Many catc
-00009070: 682d 7570 2073 7562 7363 7269 7074 696f  h-up subscriptio
-00009080: 6e73 2063 616e 2062 6520 6372 6561 7465  ns can be create
-00009090: 642c 2063 6f6e 6375 7272 656e 746c 7920  d, concurrently 
-000090a0: 6f72 2073 7563 6365 7373 6976 656c 792c  or successively,
-000090b0: 2061 6e64 2061 6c6c 0a77 696c 6c20 7265   and all.will re
-000090c0: 6365 6976 6520 616c 6c20 7468 6520 7265  ceive all the re
-000090d0: 636f 7264 6564 2065 7665 6e74 7320 7468  corded events th
-000090e0: 6579 2068 6176 6520 6265 656e 2072 6571  ey have been req
-000090f0: 7565 7374 6564 2074 6f20 7265 6365 6976  uested to receiv
-00009100: 652e 0a0a 5265 6365 6976 6564 2072 6563  e...Received rec
-00009110: 6f72 6465 6420 6576 656e 7473 2061 7265  orded events are
-00009120: 2069 6e73 7461 6e63 6573 206f 6620 7468   instances of th
-00009130: 6520 6052 6563 6f72 6465 6445 7665 6e74  e `RecordedEvent
-00009140: 6020 636c 6173 7320 2873 6565 2062 656c  ` class (see bel
-00009150: 6f77 292e 0a52 6563 6f72 6465 6420 6576  ow)..Recorded ev
-00009160: 656e 7420 6f62 6a65 6374 7320 6861 7665  ent objects have
-00009170: 2061 2063 6f6d 6d69 7420 706f 7369 7469   a commit positi
-00009180: 6f6e 2c20 616d 6f6e 7374 206f 7468 6572  on, amonst other
-00009190: 2061 7474 7269 6275 7465 732e 0a0a 2323   attributes...##
-000091a0: 2320 486f 7720 746f 2069 6d70 6c65 6d65  # How to impleme
-000091b0: 6e74 2065 7861 6374 6c79 2d6f 6e63 6520  nt exactly-once 
-000091c0: 6576 656e 7420 7072 6f63 6573 7369 6e67  event processing
-000091d0: 0a0a 5468 6520 636f 6d6d 6974 2070 6f73  ..The commit pos
-000091e0: 6974 696f 6e73 206f 6620 7265 636f 7264  itions of record
-000091f0: 6564 2065 7665 6e74 7320 7468 6174 2061  ed events that a
-00009200: 7265 2072 6563 6569 7665 6420 616e 6420  re received and 
-00009210: 7072 6f63 6573 7365 6420 6279 2061 0a64  processed by a.d
-00009220: 6f77 6e73 7472 6561 6d20 636f 6d70 6f6e  ownstream compon
-00009230: 656e 7420 6172 6520 7573 6566 756c 6c79  ent are usefully
-00009240: 2072 6563 6f72 6465 6420 6279 2074 6865   recorded by the
-00009250: 2064 6f77 6e73 7472 6561 6d20 636f 6d70   downstream comp
-00009260: 6f6e 656e 7420 736f 2074 6861 740a 7468  onent so that.th
-00009270: 6520 636f 6d6d 6974 2070 6f73 6974 696f  e commit positio
-00009280: 6e20 6f66 206c 6173 7420 7072 6f63 6573  n of last proces
-00009290: 7365 6420 6576 656e 7420 6361 6e20 6265  sed event can be
-000092a0: 2064 6574 6572 6d69 6e65 642e 0a0a 5468   determined...Th
-000092b0: 6520 6c61 7374 2072 6563 6f72 6465 6420  e last recorded 
-000092c0: 636f 6d6d 6974 2070 6f73 6974 696f 6e20  commit position 
-000092d0: 6361 6e20 6265 2075 7365 6420 746f 2073  can be used to s
-000092e0: 7065 6369 6679 2074 6865 2063 6f6d 6d69  pecify the commi
-000092f0: 7420 706f 7369 7469 6f6e 2066 726f 6d20  t position from 
-00009300: 7768 6963 680a 746f 2073 7562 7363 7269  which.to subscri
-00009310: 6265 2077 6865 6e20 7072 6f63 6573 7369  be when processi
-00009320: 6e67 2069 7320 7265 7375 6d65 642e 2053  ng is resumed. S
-00009330: 696e 6365 2074 6869 7320 636f 6d6d 6974  ince this commit
-00009340: 2070 6f73 6974 696f 6e20 7769 6c6c 2072   position will r
-00009350: 6570 7265 7365 6e74 2074 6865 0a70 6f73  epresent the.pos
-00009360: 6974 696f 6e20 6f66 2074 6865 206c 6173  ition of the las
-00009370: 7420 7375 6363 6573 7366 756c 6c79 2070  t successfully p
-00009380: 726f 6365 7373 6564 2065 7665 6e74 2069  rocessed event i
-00009390: 6e20 6120 646f 776e 7374 7265 616d 2063  n a downstream c
-000093a0: 6f6d 706f 6e65 6e74 2c20 736f 2069 740a  omponent, so it.
-000093b0: 7769 6c6c 2062 6520 7573 7561 6c20 746f  will be usual to
-000093c0: 2077 616e 7420 7468 6520 6e65 7874 2065   want the next e
-000093d0: 7665 6e74 2061 6674 6572 2074 6869 7320  vent after this 
-000093e0: 706f 7369 7469 6f6e 2c20 6265 6361 7573  position, becaus
-000093f0: 6520 7468 6174 2069 7320 7468 6520 6e65  e that is the ne
-00009400: 7874 0a65 7665 6e74 2074 6861 7420 6861  xt.event that ha
-00009410: 7320 6e6f 7420 7965 7420 6265 656e 2070  s not yet been p
-00009420: 726f 6365 7373 6564 2e20 466f 7220 7468  rocessed. For th
-00009430: 6973 2072 6561 736f 6e2c 2077 6865 6e20  is reason, when 
-00009440: 7375 6273 6372 6962 696e 6720 666f 7220  subscribing for 
-00009450: 6576 656e 7473 0a66 726f 6d20 6120 7370  events.from a sp
-00009460: 6563 6966 6963 2063 6f6d 6d69 7420 706f  ecific commit po
-00009470: 7369 7469 6f6e 2075 7369 6e67 2061 2063  sition using a c
-00009480: 6174 6368 2d75 7020 7375 6273 6372 6970  atch-up subscrip
-00009490: 7469 6f6e 2069 6e20 4576 656e 7453 746f  tion in EventSto
-000094a0: 7265 4442 2c20 7468 650a 7265 636f 7264  reDB, the.record
-000094b0: 6564 2065 7665 6e74 2061 7420 7468 6520  ed event at the 
-000094c0: 7370 6563 6966 6965 6420 636f 6d6d 6974  specified commit
-000094d0: 2070 6f73 6974 696f 6e20 7769 6c6c 204e   position will N
-000094e0: 4f54 2062 6520 696e 636c 7564 6564 2069  OT be included i
-000094f0: 6e20 7468 6520 7365 7175 656e 6365 0a6f  n the sequence.o
-00009500: 6620 7265 636f 7264 6564 2065 7665 6e74  f recorded event
-00009510: 7320 7468 6174 2061 7265 2072 6563 6569  s that are recei
-00009520: 7665 642e 0a0a 546f 2061 6363 6f6d 706c  ved...To accompl
-00009530: 6973 6820 2265 7861 6374 6c79 2d6f 6e63  ish "exactly-onc
-00009540: 6522 2070 726f 6365 7373 696e 6720 6f66  e" processing of
-00009550: 2072 6563 6f72 6465 6420 6576 656e 7473   recorded events
-00009560: 2069 6e20 6120 646f 776e 7374 7265 616d   in a downstream
-00009570: 0a63 6f6d 706f 6e65 6e74 2077 6865 6e20  .component when 
-00009580: 7573 696e 6720 6120 6361 7463 682d 7570  using a catch-up
-00009590: 2073 7562 7363 7269 7074 696f 6e2c 2074   subscription, t
-000095a0: 6865 2063 6f6d 6d69 7420 706f 7369 7469  he commit positi
-000095b0: 6f6e 206f 6620 6120 7265 636f 7264 6564  on of a recorded
-000095c0: 0a65 7665 6e74 2073 686f 756c 6420 6265  .event should be
-000095d0: 2072 6563 6f72 6465 6420 6174 6f6d 6963   recorded atomic
-000095e0: 616c 6c79 2061 6e64 2075 6e69 7175 656c  ally and uniquel
-000095f0: 7920 616c 6f6e 6720 7769 7468 2074 6865  y along with the
-00009600: 2072 6573 756c 7420 6f66 2070 726f 6365   result of proce
-00009610: 7373 696e 670a 7265 636f 7264 6564 2065  ssing.recorded e
-00009620: 7665 6e74 732c 2066 6f72 2065 7861 6d70  vents, for examp
-00009630: 6c65 2069 6e20 7468 6520 7361 6d65 2064  le in the same d
-00009640: 6174 6162 6173 6520 6173 206d 6174 6572  atabase as mater
-00009650: 6961 6c69 7365 6420 7669 6577 7320 7768  ialised views wh
-00009660: 656e 0a69 6d70 6c65 6d65 6e74 696e 6720  en.implementing 
-00009670: 6576 656e 7475 616c 6c79 2d63 6f6e 7369  eventually-consi
-00009680: 7374 656e 7420 4351 5253 2c20 6f72 2069  stent CQRS, or i
-00009690: 6e20 7468 6520 7361 6d65 2064 6174 6162  n the same datab
-000096a0: 6173 6520 6173 2061 2064 6f77 6e73 7472  ase as a downstr
-000096b0: 6561 6d0a 616e 616c 7974 6963 7320 6f72  eam.analytics or
-000096c0: 2072 6570 6f72 7469 6e67 206f 7220 6172   reporting or ar
-000096d0: 6368 6976 696e 6720 6170 706c 6963 6174  chiving applicat
-000096e0: 696f 6e2e 2042 7920 7265 636f 7264 696e  ion. By recordin
-000096f0: 6720 7468 6520 636f 6d6d 6974 2070 6f73  g the commit pos
-00009700: 6974 696f 6e0a 6f66 2072 6563 6f72 6465  ition.of recorde
-00009710: 6420 6576 656e 7473 2061 746f 6d69 6361  d events atomica
-00009720: 6c6c 7920 7769 7468 2074 6865 206e 6577  lly with the new
-00009730: 2073 7461 7465 2074 6861 7420 7265 7375   state that resu
-00009740: 6c74 7320 6672 6f6d 2070 726f 6365 7373  lts from process
-00009750: 696e 670a 7265 636f 7264 6564 2065 7665  ing.recorded eve
-00009760: 6e74 732c 2022 6475 616c 2077 7269 7469  nts, "dual writi
-00009770: 6e67 2220 696e 2074 6865 2063 6f6e 7375  ng" in the consu
-00009780: 6d70 7469 6f6e 206f 6620 7265 636f 7264  mption of record
-00009790: 6564 2065 7665 6e74 7320 6361 6e20 6265  ed events can be
-000097a0: 0a61 766f 6964 6564 2e20 4279 2061 6c73  .avoided. By als
-000097b0: 6f20 7265 636f 7264 696e 6720 7468 6520  o recording the 
-000097c0: 636f 6d6d 6974 2070 6f73 6974 696f 6e20  commit position 
-000097d0: 756e 6971 7565 6c79 2c20 7468 6520 6e65  uniquely, the ne
-000097e0: 7720 7374 6174 6520 6361 6e6e 6f74 2062  w state cannot b
-000097f0: 650a 7265 636f 7264 6564 2074 7769 6365  e.recorded twice
-00009800: 2c20 616e 6420 6865 6e63 6520 7468 6520  , and hence the 
-00009810: 7265 636f 7264 6564 2073 7461 7465 206f  recorded state o
-00009820: 6620 7468 6520 646f 776e 7374 7265 616d  f the downstream
-00009830: 2063 6f6d 706f 6e65 6e74 2077 696c 6c20   component will 
-00009840: 6265 0a75 7064 6174 6564 206f 6e6c 7920  be.updated only 
-00009850: 6f6e 6365 2066 6f72 2061 6e79 2072 6563  once for any rec
-00009860: 6f72 6465 6420 6576 656e 742e 2042 7920  orded event. By 
-00009870: 7573 696e 6720 7468 6520 6772 6561 7465  using the greate
-00009880: 7374 2072 6563 6f72 6465 6420 636f 6d6d  st recorded comm
-00009890: 6974 0a70 6f73 6974 696f 6e20 746f 2072  it.position to r
-000098a0: 6573 756d 6520 6120 6361 7463 682d 7570  esume a catch-up
-000098b0: 2073 7562 7363 7269 7074 696f 6e2c 2061   subscription, a
-000098c0: 6c6c 2072 6563 6f72 6465 6420 6576 656e  ll recorded even
-000098d0: 7473 2077 696c 6c20 6576 656e 7475 616c  ts will eventual
-000098e0: 6c79 0a62 6520 7072 6f63 6573 7365 642e  ly.be processed.
-000098f0: 2054 6865 2063 6f6d 6269 6e61 7469 6f6e   The combination
-00009900: 206f 6620 7468 6520 2261 742d 6d6f 7374   of the "at-most
-00009910: 2d6f 6e63 6522 2063 6f6e 6469 7469 6f6e  -once" condition
-00009920: 2061 6e64 2074 6865 2022 6174 2d6c 6561   and the "at-lea
-00009930: 7374 2d6f 6e63 6522 0a63 6f6e 6469 7469  st-once".conditi
-00009940: 6f6e 2067 6976 6573 2074 6865 2022 6578  on gives the "ex
-00009950: 6163 746c 792d 6f6e 6365 2220 636f 6e64  actly-once" cond
-00009960: 6974 696f 6e2e 0a0a 5468 6520 6461 6e67  ition...The dang
-00009970: 6572 2077 6974 6820 2264 7561 6c20 7772  er with "dual wr
-00009980: 6974 696e 6722 2069 6e20 7468 6520 636f  iting" in the co
-00009990: 6e73 756d 7074 696f 6e20 6f66 2072 6563  nsumption of rec
-000099a0: 6f72 6465 6420 6576 656e 7473 2069 7320  orded events is 
-000099b0: 7468 6174 2069 6620 610a 7265 636f 7264  that if a.record
-000099c0: 6564 2065 7665 6e74 2069 7320 7375 6363  ed event is succ
-000099d0: 6573 7366 756c 6c79 2070 726f 6365 7373  essfully process
-000099e0: 6564 2061 6e64 206e 6577 2073 7461 7465  ed and new state
-000099f0: 2072 6563 6f72 6465 6420 6174 6f6d 6963   recorded atomic
-00009a00: 616c 6c79 2069 6e20 6f6e 650a 7472 616e  ally in one.tran
-00009a10: 7361 6374 696f 6e20 7769 7468 2074 6865  saction with the
-00009a20: 2063 6f6d 6d69 7420 706f 7369 7469 6f6e   commit position
-00009a30: 2072 6563 6f72 6465 6420 696e 2061 2073   recorded in a s
-00009a40: 6570 6172 6174 6520 7472 616e 7361 6374  eparate transact
-00009a50: 696f 6e2c 206f 6e65 206d 6179 0a68 6170  ion, one may.hap
-00009a60: 7065 6e20 616e 6420 6e6f 7420 7468 6520  pen and not the 
-00009a70: 6f74 6865 722e 2049 6620 7468 6520 6e65  other. If the ne
-00009a80: 7720 7374 6174 6520 6973 2072 6563 6f72  w state is recor
-00009a90: 6465 6420 6275 7420 7468 6520 706f 7369  ded but the posi
-00009aa0: 7469 6f6e 2069 7320 6c6f 7374 2c0a 616e  tion is lost,.an
-00009ab0: 6420 7468 656e 2074 6865 2070 726f 6365  d then the proce
-00009ac0: 7373 696e 6720 6973 2073 746f 7070 6564  ssing is stopped
-00009ad0: 2061 6e64 2072 6573 756d 6564 2c20 7468   and resumed, th
-00009ae0: 6520 7265 636f 7264 6564 2065 7665 6e74  e recorded event
-00009af0: 206d 6179 2062 6520 7072 6f63 6573 7365   may be processe
-00009b00: 640a 7477 6963 652e 204f 6e20 7468 6520  d.twice. On the 
-00009b10: 6f74 6865 7220 6861 6e64 2c20 6966 2074  other hand, if t
-00009b20: 6865 2063 6f6d 6d69 7420 706f 7369 7469  he commit positi
-00009b30: 6f6e 2069 7320 7265 636f 7264 6564 2062  on is recorded b
-00009b40: 7574 2074 6865 206e 6577 2073 7461 7465  ut the new state
-00009b50: 2069 730a 6c6f 7374 2c20 7468 6520 7265   is.lost, the re
-00009b60: 636f 7264 6564 2065 7665 6e74 206d 6179  corded event may
-00009b70: 2065 6666 6563 7469 7665 6c79 206e 6f74   effectively not
-00009b80: 2062 6520 7072 6f63 6573 7365 6420 6174   be processed at
-00009b90: 2061 6c6c 2e20 4279 2065 6974 6865 720a   all. By either.
-00009ba0: 7072 6f63 6573 7369 6e67 2061 6e20 6576  processing an ev
-00009bb0: 656e 7420 6d6f 7265 2074 6861 6e20 6f6e  ent more than on
-00009bc0: 6365 2c20 6f72 2062 7920 6661 696c 696e  ce, or by failin
-00009bd0: 6720 746f 2070 726f 6365 7373 2061 6e20  g to process an 
-00009be0: 6576 656e 742c 2074 6865 2072 6563 6f72  event, the recor
-00009bf0: 6465 640a 7374 6174 6520 6f66 2074 6865  ded.state of the
-00009c00: 2064 6f77 6e73 7472 6561 6d20 636f 6d70   downstream comp
-00009c10: 6f6e 656e 7420 6d69 6768 7420 6265 2069  onent might be i
-00009c20: 6e61 6363 7572 6174 652c 206f 7220 706f  naccurate, or po
-00009c30: 7373 6962 6c79 2069 6e63 6f6e 7369 7374  ssibly inconsist
-00009c40: 656e 742c 2061 6e64 0a70 6572 6861 7073  ent, and.perhaps
-00009c50: 2063 6174 6173 7472 6f70 6869 6361 6c6c   catastrophicall
-00009c60: 7920 736f 2e20 5375 6368 2063 6f6e 7365  y so. Such conse
-00009c70: 7175 656e 6365 7320 6d61 7920 6f72 206d  quences may or m
-00009c80: 6179 206e 6f74 206d 6174 7465 7220 696e  ay not matter in
-00009c90: 2079 6f75 7220 7369 7475 6174 696f 6e2e   your situation.
-00009ca0: 0a42 7574 2073 6f6d 6574 696d 6573 2069  .But sometimes i
-00009cb0: 6e63 6f6e 7369 7374 656e 6369 6573 206d  nconsistencies m
-00009cc0: 6179 2068 616c 7420 7072 6f63 6573 7369  ay halt processi
-00009cd0: 6e67 2075 6e74 696c 2074 6865 2069 7373  ng until the iss
-00009ce0: 7565 2069 7320 7265 736f 6c76 6564 2e20  ue is resolved. 
-00009cf0: 596f 7520 6361 6e0a 6176 6f69 6420 2264  You can.avoid "d
-00009d00: 7561 6c20 7772 6974 696e 6722 2069 6e20  ual writing" in 
-00009d10: 7468 6520 636f 6e73 756d 7074 696f 6e20  the consumption 
-00009d20: 6f66 2065 7665 6e74 7320 6279 2061 746f  of events by ato
-00009d30: 6d69 6361 6c6c 7920 7265 636f 7264 696e  mically recordin
-00009d40: 6720 7468 6520 636f 6d6d 6974 0a70 6f73  g the commit.pos
-00009d50: 6974 696f 6e20 6f66 2061 2072 6563 6f72  ition of a recor
-00009d60: 6465 6420 6576 656e 7420 616c 6f6e 6720  ded event along 
-00009d70: 7769 7468 2074 6865 206e 6577 2073 7461  with the new sta
-00009d80: 7465 2074 6861 7420 7265 7375 6c74 7320  te that results 
-00009d90: 6672 6f6d 2070 726f 6365 7373 696e 6720  from processing 
-00009da0: 7468 6174 0a65 7665 6e74 2069 6e20 7468  that.event in th
-00009db0: 6520 7361 6d65 2061 746f 6d69 6320 7472  e same atomic tr
-00009dc0: 616e 7361 6374 696f 6e2e 2042 7920 6d61  ansaction. By ma
-00009dd0: 6b69 6e67 2074 6865 2072 6563 6f72 6469  king the recordi
-00009de0: 6e67 206f 6620 7468 6520 636f 6d6d 6974  ng of the commit
-00009df0: 2070 6f73 6974 696f 6e73 0a75 6e69 7175   positions.uniqu
-00009e00: 652c 2073 6f20 7468 6174 2074 7261 6e73  e, so that trans
-00009e10: 6163 7469 6f6e 7320 7769 6c6c 2062 6520  actions will be 
-00009e20: 726f 6c6c 6564 2062 6163 6b20 7768 656e  rolled back when
-00009e30: 2074 6865 7265 2069 7320 6120 636f 6e66   there is a conf
-00009e40: 6c69 6374 2c20 796f 7520 7769 6c6c 0a70  lict, you will.p
-00009e50: 7265 7665 6e74 2074 6865 2072 6573 756c  revent the resul
-00009e60: 7473 206f 6620 616e 7920 6475 706c 6963  ts of any duplic
-00009e70: 6174 6520 7072 6f63 6573 7369 6e67 206f  ate processing o
-00009e80: 6620 6120 7265 636f 7264 6564 2065 7665  f a recorded eve
-00009e90: 6e74 2062 6569 6e67 2063 6f6d 6d69 7474  nt being committ
-00009ea0: 6564 2e0a 0a52 6563 6f72 6465 6420 6576  ed...Recorded ev
-00009eb0: 656e 7473 2072 6563 6569 7665 6420 6672  ents received fr
-00009ec0: 6f6d 2061 2063 6174 6368 2d75 7020 7375  om a catch-up su
-00009ed0: 6273 6372 6970 7469 6f6e 2063 616e 6e6f  bscription canno
-00009ee0: 7420 6265 2061 636b 6e6f 776c 6564 6765  t be acknowledge
-00009ef0: 6420 6261 636b 0a74 6f20 7468 6520 4576  d back.to the Ev
-00009f00: 656e 7453 746f 7265 4442 2073 6572 7665  entStoreDB serve
-00009f10: 722e 2041 636b 6e6f 776c 6564 6769 6e67  r. Acknowledging
-00009f20: 2065 7665 6e74 732c 2068 6f77 6576 6572   events, however
-00009f30: 2c20 6973 2061 6e20 6173 7065 6374 206f  , is an aspect o
-00009f40: 6620 2270 6572 7369 7374 656e 740a 7375  f "persistent.su
-00009f50: 6273 6372 6970 7469 6f6e 7322 2028 7365  bscriptions" (se
-00009f60: 6520 6265 6c6f 7729 2e20 486f 7069 6e67  e below). Hoping
-00009f70: 2074 6f20 7265 6c79 206f 6e20 6163 6b6e   to rely on ackn
-00009f80: 6f77 6c65 6467 696e 6720 6576 656e 7473  owledging events
-00009f90: 2074 6f20 616e 2075 7073 7472 6561 6d0a   to an upstream.
-00009fa0: 636f 6d70 6f6e 656e 7420 6973 2061 6e20  component is an 
-00009fb0: 6578 616d 706c 6520 6f66 2064 7561 6c20  example of dual 
-00009fc0: 7772 6974 696e 672e 0a0a 2323 2320 5375  writing...### Su
-00009fd0: 6273 6372 6962 6520 616c 6c20 6576 656e  bscribe all even
-00009fe0: 7473 0a0a 5468 6560 7375 6273 6372 6962  ts..The`subscrib
-00009ff0: 655f 616c 6c5f 6576 656e 7473 2829 6020  e_all_events()` 
-0000a000: 6d65 7468 6f64 2063 616e 2062 6520 7573  method can be us
-0000a010: 6564 2074 6f20 7374 6172 7420 6120 2263  ed to start a "c
-0000a020: 6174 6368 2d75 7022 2073 7562 7363 7269  atch-up" subscri
-0000a030: 7074 696f 6e0a 7468 6174 2063 616e 2072  ption.that can r
-0000a040: 6574 7572 6e20 616c 6c20 6576 656e 7473  eturn all events
-0000a050: 2069 6e20 7468 6520 6461 7461 6261 7365   in the database
-0000a060: 2e0a 0a54 6869 7320 6d65 7468 6f64 2063  ...This method c
-0000a070: 616e 2062 6520 7573 6564 2062 7920 6120  an be used by a 
-0000a080: 646f 776e 7374 7265 616d 2063 6f6d 706f  downstream compo
-0000a090: 6e65 6e74 0a74 6f20 7072 6f63 6573 7320  nent.to process 
-0000a0a0: 7265 636f 7264 6564 2065 7665 6e74 7320  recorded events 
-0000a0b0: 7769 7468 2065 7861 6374 6c79 2d6f 6e63  with exactly-onc
-0000a0c0: 6520 7365 6d61 6e74 6963 732e 0a0a 5468  e semantics...Th
-0000a0d0: 6973 206d 6574 686f 6420 7461 6b65 7320  is method takes 
-0000a0e0: 616e 206f 7074 696f 6e61 6c20 6063 6f6d  an optional `com
-0000a0f0: 6d69 745f 706f 7369 7469 6f6e 6020 6172  mit_position` ar
-0000a100: 6775 6d65 6e74 2c20 7768 6963 6820 6361  gument, which ca
-0000a110: 6e20 6265 0a75 7365 6420 746f 2073 7065  n be.used to spe
-0000a120: 6369 6679 2061 2063 6f6d 6d69 7420 706f  cify a commit po
-0000a130: 7369 7469 6f6e 2066 726f 6d20 7768 6963  sition from whic
-0000a140: 6820 746f 2073 7562 7363 7269 6265 2066  h to subscribe f
-0000a150: 6f72 0a72 6563 6f72 6465 6420 6576 656e  or.recorded even
-0000a160: 7473 2e20 5468 6520 6465 6661 756c 7420  ts. The default 
-0000a170: 7661 6c75 6520 6973 2060 4e6f 6e65 602c  value is `None`,
-0000a180: 2077 6869 6368 206d 6561 6e73 0a74 6865   which means.the
-0000a190: 2073 7562 7363 7269 7074 696f 6e20 7769   subscription wi
-0000a1a0: 6c6c 206f 7065 7261 7465 2066 726f 6d20  ll operate from 
-0000a1b0: 7468 6520 6669 7273 7420 7265 636f 7264  the first record
-0000a1c0: 6564 2065 7665 6e74 0a69 6e20 7468 6520  ed event.in the 
-0000a1d0: 6461 7461 6261 7365 2e20 4966 2061 2063  database. If a c
-0000a1e0: 6f6d 6d69 7420 706f 7369 7469 6f6e 2069  ommit position i
-0000a1f0: 7320 6769 7665 6e2c 2069 7420 6d75 7374  s given, it must
-0000a200: 206d 6174 6368 0a61 6e20 6163 7475 616c   match.an actual
-0000a210: 6c79 2065 7869 7374 696e 6720 636f 6d6d  ly existing comm
-0000a220: 6974 2070 6f73 6974 696f 6e20 696e 2074  it position in t
-0000a230: 6865 2064 6174 6162 6173 652e 2054 6865  he database. The
-0000a240: 2065 7665 6e74 730a 7468 6174 2061 7265   events.that are
-0000a250: 206f 6274 6169 6e65 6420 7769 6c6c 206e   obtained will n
-0000a260: 6f74 2069 6e63 6c75 6465 2074 6865 2065  ot include the e
-0000a270: 7665 6e74 2072 6563 6f72 6465 6420 6174  vent recorded at
-0000a280: 2074 6861 7420 636f 6d6d 6974 0a70 6f73   that commit.pos
-0000a290: 6974 696f 6e2e 0a0a 5468 6973 206d 6574  ition...This met
-0000a2a0: 686f 6420 616c 736f 2074 616b 6573 2074  hod also takes t
-0000a2b0: 6872 6565 206f 7468 6572 206f 7074 696f  hree other optio
-0000a2c0: 6e61 6c20 6172 6775 6d65 6e74 732c 2060  nal arguments, `
-0000a2d0: 6669 6c74 6572 5f65 7863 6c75 6465 602c  filter_exclude`,
-0000a2e0: 0a60 6669 6c74 6572 5f69 6e63 6c75 6465  .`filter_include
-0000a2f0: 602c 2061 6e64 2060 7469 6d65 6f75 7460  `, and `timeout`
-0000a300: 2e0a 0a54 6865 2061 7267 756d 656e 7420  ...The argument 
-0000a310: 6066 696c 7465 725f 6578 636c 7564 6560  `filter_exclude`
-0000a320: 2069 7320 6120 7365 7175 656e 6365 206f   is a sequence o
-0000a330: 6620 7265 6775 6c61 7220 6578 7072 6573  f regular expres
-0000a340: 7369 6f6e 7320 6d61 7463 6869 6e67 0a74  sions matching.t
-0000a350: 6865 2074 7970 6520 7374 7269 6e67 7320  he type strings 
-0000a360: 6f66 2072 6563 6f72 6465 6420 6576 656e  of recorded even
-0000a370: 7473 2074 6861 7420 7368 6f75 6c64 2062  ts that should b
-0000a380: 6520 6578 636c 7564 6564 2e20 4279 2064  e excluded. By d
-0000a390: 6566 6175 6c74 2c0a 7468 6973 2061 7267  efault,.this arg
-0000a3a0: 756d 656e 7420 7769 6c6c 206d 6174 6368  ument will match
-0000a3b0: 2022 7379 7374 656d 2065 7665 6e74 7322   "system events"
-0000a3c0: 2c20 736f 2074 6861 7420 7468 6579 2077  , so that they w
-0000a3d0: 696c 6c20 6e6f 7420 6265 2069 6e63 6c75  ill not be inclu
-0000a3e0: 6465 642e 0a54 6869 7320 6172 6775 6d65  ded..This argume
-0000a3f0: 6e74 2069 7320 6967 6e6f 7265 6420 6966  nt is ignored if
-0000a400: 2060 6669 6c74 6572 5f69 6e63 6c75 6465   `filter_include
-0000a410: 6020 6973 2073 6574 2074 6f20 6120 6e6f  ` is set to a no
-0000a420: 6e2d 656d 7074 7920 7365 7175 656e 6365  n-empty sequence
-0000a430: 2e0a 0a54 6865 2061 7267 756d 656e 7420  ...The argument 
-0000a440: 6066 696c 7465 725f 696e 636c 7564 6560  `filter_include`
-0000a450: 2069 7320 6120 7365 7175 656e 6365 206f   is a sequence o
-0000a460: 6620 7265 6775 6c61 7220 6578 7072 6573  f regular expres
-0000a470: 7369 6f6e 730a 6d61 7463 6869 6e67 2074  sions.matching t
-0000a480: 6865 2074 7970 6520 7374 7269 6e67 7320  he type strings 
-0000a490: 6f66 2072 6563 6f72 6465 6420 6576 656e  of recorded even
-0000a4a0: 7473 2074 6861 7420 7368 6f75 6c64 2062  ts that should b
-0000a4b0: 6520 696e 636c 7564 6564 2e20 4279 0a64  e included. By.d
-0000a4c0: 6566 6175 6c74 2c20 7468 6973 2061 7267  efault, this arg
-0000a4d0: 756d 656e 7420 6973 2061 6e20 656d 7074  ument is an empt
-0000a4e0: 7920 7475 706c 652e 2049 6620 7468 6973  y tuple. If this
-0000a4f0: 2061 7267 756d 656e 7420 6973 2073 6574   argument is set
-0000a500: 2074 6f20 610a 6e6f 6e2d 656d 7074 7920   to a.non-empty 
-0000a510: 7365 7175 656e 6365 2c20 7468 6520 6066  sequence, the `f
-0000a520: 696c 7465 725f 6578 636c 7564 6560 2061  ilter_exclude` a
-0000a530: 7267 756d 656e 7420 6973 2069 676e 6f72  rgument is ignor
-0000a540: 6564 2e0a 0a50 6c65 6173 6520 6e6f 7465  ed...Please note
-0000a550: 2c20 7468 6520 6669 6c74 6572 696e 6720  , the filtering 
-0000a560: 6861 7070 656e 7320 6f6e 2074 6865 2045  happens on the E
-0000a570: 7665 6e74 5374 6f72 6544 4220 7365 7276  ventStoreDB serv
-0000a580: 6572 2c20 616e 6420 7468 650a 606c 696d  er, and the.`lim
-0000a590: 6974 6020 6172 6775 6d65 6e74 2069 7320  it` argument is 
-0000a5a0: 6170 706c 6965 6420 6f6e 2074 6865 2073  applied on the s
-0000a5b0: 6572 7665 7220 6166 7465 7220 6669 6c74  erver after filt
-0000a5c0: 6572 696e 672e 2053 6565 2062 656c 6f77  ering. See below
-0000a5d0: 2066 6f72 0a6d 6f72 6520 696e 666f 726d   for.more inform
-0000a5e0: 6174 696f 6e20 6162 6f75 7420 6669 6c74  ation about filt
-0000a5f0: 6572 2072 6567 756c 6172 2065 7870 7265  er regular expre
-0000a600: 7373 696f 6e73 2e0a 0a54 6865 2061 7267  ssions...The arg
-0000a610: 756d 656e 7420 6074 696d 656f 7574 6020  ument `timeout` 
-0000a620: 6973 2061 2050 7974 686f 6e20 6066 6c6f  is a Python `flo
-0000a630: 6174 6020 7768 6963 6820 7365 7473 2061  at` which sets a
-0000a640: 2064 6561 646c 696e 6520 666f 7220 7468   deadline for th
-0000a650: 6520 636f 6d70 6c65 7469 6f6e 206f 660a  e completion of.
-0000a660: 7468 6520 6752 5043 206f 7065 7261 7469  the gRPC operati
-0000a670: 6f6e 2e20 5468 6973 2070 726f 6261 626c  on. This probabl
-0000a680: 7920 6973 6e27 7420 7665 7279 2075 7365  y isn't very use
-0000a690: 6675 6c2c 2062 7574 2069 7320 696e 636c  ful, but is incl
-0000a6a0: 7564 6564 2066 6f72 0a63 6f6d 706c 6574  uded for.complet
-0000a6b0: 656e 6573 7320 616e 6420 636f 6e73 6973  eness and consis
-0000a6c0: 7465 6e63 7920 7769 7468 2074 6865 206f  tency with the o
-0000a6d0: 7468 6572 206d 6574 686f 6473 2e0a 0a54  ther methods...T
-0000a6e0: 6869 7320 6d65 7468 6f64 2072 6574 7572  his method retur
-0000a6f0: 6e73 2061 2050 7974 686f 6e20 6974 6572  ns a Python iter
-0000a700: 6174 6f72 2074 6861 7420 7969 656c 6473  ator that yields
-0000a710: 2072 6563 6f72 6465 6420 6576 656e 7473   recorded events
-0000a720: 2c20 696e 636c 7564 696e 6720 6576 656e  , including even
-0000a730: 7473 0a74 6861 7420 6172 6520 7265 636f  ts.that are reco
-0000a740: 7264 6564 2061 6674 6572 2074 6865 2073  rded after the s
-0000a750: 7562 7363 7269 7074 696f 6e20 7761 7320  ubscription was 
-0000a760: 6372 6561 7465 642e 2049 7465 7261 7469  created. Iterati
-0000a770: 6e67 206f 7665 7220 7468 6973 206f 626a  ng over this obj
-0000a780: 6563 7420 7769 6c6c 0a74 6865 7265 666f  ect will.therefo
-0000a790: 7265 206e 6f74 2073 746f 702c 2075 6e6c  re not stop, unl
-0000a7a0: 6573 7320 7468 6520 636f 6e6e 6563 7469  ess the connecti
-0000a7b0: 6f6e 2074 6f20 7468 6520 6461 7461 6261  on to the databa
-0000a7c0: 7365 2069 7320 6c6f 7374 2e20 5468 6520  se is lost. The 
-0000a7d0: 636f 6e6e 6563 7469 6f6e 2077 696c 6c0a  connection will.
-0000a7e0: 6265 2063 6c6f 7365 6420 7768 656e 2074  be closed when t
-0000a7f0: 6865 2069 7465 7261 746f 7220 6f62 6a65  he iterator obje
-0000a800: 6374 2069 7320 6465 6c65 7465 6420 6672  ct is deleted fr
-0000a810: 6f6d 206d 656d 6f72 792c 2077 6869 6368  om memory, which
-0000a820: 2077 696c 6c20 6861 7070 656e 2077 6865   will happen whe
-0000a830: 6e20 7468 650a 6974 6572 6174 6f72 206f  n the.iterator o
-0000a840: 626a 6563 7420 676f 6573 206f 7574 206f  bject goes out o
-0000a850: 6620 7363 6f70 6520 6f72 2069 7320 6578  f scope or is ex
-0000a860: 706c 6963 6974 6c79 2064 656c 6574 6564  plicitly deleted
-0000a870: 2028 7365 6520 6265 6c6f 7729 2e20 5468   (see below). Th
-0000a880: 6520 636f 6e6e 6563 7469 6f6e 0a6d 6179  e connection.may
-0000a890: 2061 6c73 6f20 6265 2063 6c6f 7365 6420   also be closed 
-0000a8a0: 6279 2074 6865 2073 6572 7665 722e 0a0a  by the server...
-0000a8b0: 5468 6520 7375 6273 6372 6970 7469 6f6e  The subscription
-0000a8c0: 206f 626a 6563 7420 6361 6e20 6265 2075   object can be u
-0000a8d0: 7365 6420 6469 7265 6374 6c79 2c20 6275  sed directly, bu
-0000a8e0: 7420 6974 206d 6967 6874 2062 6520 7573  t it might be us
-0000a8f0: 6564 2077 6974 6869 6e20 6120 7468 7265  ed within a thre
-0000a900: 6164 6564 0a6c 6f6f 7020 6465 6469 6361  aded.loop dedica
-0000a910: 7465 6420 746f 2072 6563 6569 7669 6e67  ted to receiving
-0000a920: 2065 7665 6e74 7320 7468 6174 2063 616e   events that can
-0000a930: 2062 6520 7374 6f70 7065 6420 696e 2061   be stopped in a
-0000a940: 2063 6f6e 7472 6f6c 6c65 6420 7761 792c   controlled way,
-0000a950: 2077 6974 680a 7265 636f 7264 6564 2065   with.recorded e
-0000a960: 7665 6e74 7320 7075 7420 6f6e 2061 2071  vents put on a q
-0000a970: 7565 7565 2066 6f72 2070 726f 6365 7373  ueue for process
-0000a980: 696e 6720 696e 2061 2064 6966 6665 7265  ing in a differe
-0000a990: 6e74 2074 6872 6561 642e 2054 6869 7320  nt thread. This 
-0000a9a0: 7061 636b 6167 650a 646f 6573 6e27 7420  package.doesn't 
-0000a9b0: 7072 6f76 6964 6520 7375 6368 2061 2074  provide such a t
-0000a9c0: 6872 6561 6465 6420 6f72 2071 7565 7569  hreaded or queui
-0000a9d0: 6e67 206f 626a 6563 7420 636c 6173 732e  ng object class.
-0000a9e0: 204a 7573 7420 6d61 6b65 2073 7572 6520   Just make sure 
-0000a9f0: 746f 2072 6563 6f6e 7374 7275 6374 0a74  to reconstruct.t
-0000aa00: 6865 2073 7562 7363 7269 7074 696f 6e20  he subscription 
-0000aa10: 2861 6e64 2074 6865 2071 7565 7565 2920  (and the queue) 
-0000aa20: 7573 696e 6720 7468 6520 6c61 7374 2072  using the last r
-0000aa30: 6563 6f72 6465 6420 636f 6d6d 6974 2070  ecorded commit p
-0000aa40: 6f73 6974 696f 6e20 7768 656e 2072 6573  osition when res
-0000aa50: 756d 696e 670a 7468 6520 7375 6273 6372  uming.the subscr
-0000aa60: 6970 7469 6f6e 2061 6674 6572 2061 6e20  iption after an 
-0000aa70: 6572 726f 722c 2074 6f20 6265 2073 7572  error, to be sur
-0000aa80: 6520 616c 6c20 6576 656e 7473 2061 7265  e all events are
-0000aa90: 2070 726f 6365 7373 6564 206f 6e63 652e   processed once.
-0000aaa0: 0a0a 5468 6520 6578 616d 706c 6520 6265  ..The example be
-0000aab0: 6c6f 7720 7368 6f77 7320 686f 7720 746f  low shows how to
-0000aac0: 2073 7562 7363 7269 6265 2074 6f20 7265   subscribe to re
-0000aad0: 6365 6976 6520 616c 6c20 7265 636f 7264  ceive all record
-0000aae0: 6564 0a65 7665 6e74 7320 6672 6f6d 2074  ed.events from t
-0000aaf0: 6865 2073 7461 7274 2c20 616e 6420 7468  he start, and th
-0000ab00: 656e 2072 6573 756d 696e 6720 6672 6f6d  en resuming from
-0000ab10: 2061 2073 7065 6369 6669 6320 636f 6d6d   a specific comm
-0000ab20: 6974 2070 6f73 6974 696f 6e2e 0a54 6872  it position..Thr
-0000ab30: 6565 2061 6c72 6561 6479 2d72 6563 6f72  ee already-recor
-0000ab40: 6465 6420 6576 656e 7473 2061 7265 2072  ded events are r
-0000ab50: 6563 6569 7665 642c 2061 6e64 2074 6865  eceived, and the
-0000ab60: 6e20 7468 7265 6520 6e65 7720 6576 656e  n three new even
-0000ab70: 7473 2061 7265 0a72 6563 6f72 6465 642c  ts are.recorded,
-0000ab80: 2077 6869 6368 2061 7265 2074 6865 6e20   which are then 
-0000ab90: 7265 6365 6976 6564 2076 6961 2074 6865  received via the
-0000aba0: 2073 7562 7363 7269 7074 696f 6e2e 0a0a   subscription...
-0000abb0: 6060 6070 7974 686f 6e0a 0a23 2041 7070  ```python..# App
-0000abc0: 656e 6420 616e 2065 7665 6e74 2074 6f20  end an event to 
-0000abd0: 6120 6e65 7720 7374 7265 616d 2e0a 7374  a new stream..st
-0000abe0: 7265 616d 5f6e 616d 6532 203d 2073 7472  ream_name2 = str
-0000abf0: 2875 7569 6434 2829 290a 6576 656e 7434  (uuid4()).event4
-0000ac00: 203d 204e 6577 4576 656e 7428 7479 7065   = NewEvent(type
-0000ac10: 3d27 4f72 6465 7243 7265 6174 6564 272c  ='OrderCreated',
-0000ac20: 2064 6174 613d 6227 6461 7461 3427 290a   data=b'data4').
-0000ac30: 636c 6965 6e74 2e61 7070 656e 645f 6576  client.append_ev
-0000ac40: 656e 7473 280a 2020 2020 7374 7265 616d  ents(.    stream
-0000ac50: 5f6e 616d 653d 7374 7265 616d 5f6e 616d  _name=stream_nam
-0000ac60: 6532 2c0a 2020 2020 6578 7065 6374 6564  e2,.    expected
-0000ac70: 5f70 6f73 6974 696f 6e3d 4e6f 6e65 2c0a  _position=None,.
-0000ac80: 2020 2020 6576 656e 7473 3d5b 6576 656e      events=[even
-0000ac90: 7434 5d2c 0a29 0a0a 2320 5375 6273 6372  t4],.)..# Subscr
-0000aca0: 6962 6520 6672 6f6d 2074 6865 2066 6972  ibe from the fir
-0000acb0: 7374 2072 6563 6f72 6465 6420 6576 656e  st recorded even
-0000acc0: 7420 696e 2074 6865 2064 6174 6162 6173  t in the databas
-0000acd0: 652e 0a73 7562 7363 7269 7074 696f 6e20  e..subscription 
-0000ace0: 3d20 636c 6965 6e74 2e73 7562 7363 7269  = client.subscri
-0000acf0: 6265 5f61 6c6c 5f65 7665 6e74 7328 290a  be_all_events().
-0000ad00: 7265 6365 6976 6564 5f65 7665 6e74 7320  received_events 
-0000ad10: 3d20 5b5d 0a0a 2320 5072 6f63 6573 7320  = []..# Process 
-0000ad20: 6576 656e 7473 2072 6563 6569 7665 6420  events received 
-0000ad30: 6672 6f6d 2074 6865 2063 6174 6368 2d75  from the catch-u
-0000ad40: 7020 7375 6273 6372 6970 7469 6f6e 2e0a  p subscription..
-0000ad50: 666f 7220 6576 656e 7420 696e 2073 7562  for event in sub
-0000ad60: 7363 7269 7074 696f 6e3a 0a20 2020 206c  scription:.    l
-0000ad70: 6173 745f 636f 6d6d 6974 5f70 6f73 6974  ast_commit_posit
-0000ad80: 696f 6e20 3d20 6576 656e 742e 636f 6d6d  ion = event.comm
-0000ad90: 6974 5f70 6f73 6974 696f 6e0a 2020 2020  it_position.    
-0000ada0: 7265 6365 6976 6564 5f65 7665 6e74 732e  received_events.
-0000adb0: 6170 7065 6e64 2865 7665 6e74 290a 2020  append(event).  
-0000adc0: 2020 6966 2065 7665 6e74 2e69 6420 3d3d    if event.id ==
-0000add0: 2065 7665 6e74 342e 6964 3a0a 2020 2020   event4.id:.    
-0000ade0: 2020 2020 6272 6561 6b0a 0a61 7373 6572      break..asser
-0000adf0: 7420 7265 6365 6976 6564 5f65 7665 6e74  t received_event
-0000ae00: 735b 2d34 5d2e 6964 203d 3d20 6576 656e  s[-4].id == even
-0000ae10: 7431 2e69 640a 6173 7365 7274 2072 6563  t1.id.assert rec
-0000ae20: 6569 7665 645f 6576 656e 7473 5b2d 335d  eived_events[-3]
-0000ae30: 2e69 6420 3d3d 2065 7665 6e74 322e 6964  .id == event2.id
-0000ae40: 0a61 7373 6572 7420 7265 6365 6976 6564  .assert received
-0000ae50: 5f65 7665 6e74 735b 2d32 5d2e 6964 203d  _events[-2].id =
-0000ae60: 3d20 6576 656e 7433 2e69 640a 6173 7365  = event3.id.asse
-0000ae70: 7274 2072 6563 6569 7665 645f 6576 656e  rt received_even
-0000ae80: 7473 5b2d 315d 2e69 6420 3d3d 2065 7665  ts[-1].id == eve
-0000ae90: 6e74 342e 6964 0a0a 2320 4170 7065 6e64  nt4.id..# Append
-0000aea0: 2073 7562 7365 7175 656e 7420 6576 656e   subsequent even
-0000aeb0: 7473 2074 6f20 7468 6520 7374 7265 616d  ts to the stream
-0000aec0: 2e0a 6576 656e 7435 203d 204e 6577 4576  ..event5 = NewEv
-0000aed0: 656e 7428 7479 7065 3d27 4f72 6465 7255  ent(type='OrderU
-0000aee0: 7064 6174 6564 272c 2064 6174 613d 6227  pdated', data=b'
-0000aef0: 6461 7461 3527 290a 636c 6965 6e74 2e61  data5').client.a
-0000af00: 7070 656e 645f 6576 656e 7473 280a 2020  ppend_events(.  
-0000af10: 2020 7374 7265 616d 5f6e 616d 653d 7374    stream_name=st
-0000af20: 7265 616d 5f6e 616d 6532 2c0a 2020 2020  ream_name2,.    
-0000af30: 6578 7065 6374 6564 5f70 6f73 6974 696f  expected_positio
-0000af40: 6e3d 302c 0a20 2020 2065 7665 6e74 733d  n=0,.    events=
-0000af50: 5b65 7665 6e74 355d 2c0a 290a 0a23 2052  [event5],.)..# R
-0000af60: 6563 6569 7665 2073 7562 7365 7175 656e  eceive subsequen
-0000af70: 7420 6576 656e 7473 2066 726f 6d20 7468  t events from th
-0000af80: 6520 7375 6273 6372 6970 7469 6f6e 2e0a  e subscription..
-0000af90: 666f 7220 6576 656e 7420 696e 2073 7562  for event in sub
-0000afa0: 7363 7269 7074 696f 6e3a 0a20 2020 206c  scription:.    l
-0000afb0: 6173 745f 636f 6d6d 6974 5f70 6f73 6974  ast_commit_posit
-0000afc0: 696f 6e20 3d20 6576 656e 742e 636f 6d6d  ion = event.comm
-0000afd0: 6974 5f70 6f73 6974 696f 6e0a 2020 2020  it_position.    
-0000afe0: 7265 6365 6976 6564 5f65 7665 6e74 732e  received_events.
-0000aff0: 6170 7065 6e64 2865 7665 6e74 290a 2020  append(event).  
-0000b000: 2020 6966 2065 7665 6e74 2e69 6420 3d3d    if event.id ==
-0000b010: 2065 7665 6e74 352e 6964 3a0a 2020 2020   event5.id:.    
-0000b020: 2020 2020 6272 6561 6b0a 0a0a 6173 7365      break...asse
-0000b030: 7274 2072 6563 6569 7665 645f 6576 656e  rt received_even
-0000b040: 7473 5b2d 355d 2e69 6420 3d3d 2065 7665  ts[-5].id == eve
-0000b050: 6e74 312e 6964 0a61 7373 6572 7420 7265  nt1.id.assert re
-0000b060: 6365 6976 6564 5f65 7665 6e74 735b 2d34  ceived_events[-4
-0000b070: 5d2e 6964 203d 3d20 6576 656e 7432 2e69  ].id == event2.i
-0000b080: 640a 6173 7365 7274 2072 6563 6569 7665  d.assert receive
-0000b090: 645f 6576 656e 7473 5b2d 335d 2e69 6420  d_events[-3].id 
-0000b0a0: 3d3d 2065 7665 6e74 332e 6964 0a61 7373  == event3.id.ass
-0000b0b0: 6572 7420 7265 6365 6976 6564 5f65 7665  ert received_eve
-0000b0c0: 6e74 735b 2d32 5d2e 6964 203d 3d20 6576  nts[-2].id == ev
-0000b0d0: 656e 7434 2e69 640a 6173 7365 7274 2072  ent4.id.assert r
-0000b0e0: 6563 6569 7665 645f 6576 656e 7473 5b2d  eceived_events[-
-0000b0f0: 315d 2e69 6420 3d3d 2065 7665 6e74 352e  1].id == event5.
-0000b100: 6964 0a0a 0a23 2041 7070 656e 6420 6d6f  id...# Append mo
-0000b110: 7265 2065 7665 6e74 7320 746f 2074 6865  re events to the
-0000b120: 2073 7472 6561 6d2e 0a65 7665 6e74 3620   stream..event6 
-0000b130: 3d20 4e65 7745 7665 6e74 2874 7970 653d  = NewEvent(type=
-0000b140: 274f 7264 6572 4465 6c65 7465 6427 2c20  'OrderDeleted', 
-0000b150: 6461 7461 3d62 2764 6174 6136 2729 0a63  data=b'data6').c
-0000b160: 6c69 656e 742e 6170 7065 6e64 5f65 7665  lient.append_eve
-0000b170: 6e74 7328 0a20 2020 2073 7472 6561 6d5f  nts(.    stream_
-0000b180: 6e61 6d65 3d73 7472 6561 6d5f 6e61 6d65  name=stream_name
-0000b190: 322c 0a20 2020 2065 7870 6563 7465 645f  2,.    expected_
-0000b1a0: 706f 7369 7469 6f6e 3d31 2c0a 2020 2020  position=1,.    
-0000b1b0: 6576 656e 7473 3d5b 6576 656e 7436 5d2c  events=[event6],
-0000b1c0: 0a29 0a0a 0a23 2052 6573 756d 6520 7375  .)...# Resume su
-0000b1d0: 6273 6372 6962 696e 6720 6672 6f6d 2074  bscribing from t
-0000b1e0: 6865 206c 6173 7420 636f 6d6d 6974 2070  he last commit p
-0000b1f0: 6f73 6974 696f 6e2e 0a73 7562 7363 7269  osition..subscri
-0000b200: 7074 696f 6e20 3d20 636c 6965 6e74 2e73  ption = client.s
-0000b210: 7562 7363 7269 6265 5f61 6c6c 5f65 7665  ubscribe_all_eve
-0000b220: 6e74 7328 0a20 2020 2063 6f6d 6d69 745f  nts(.    commit_
-0000b230: 706f 7369 7469 6f6e 3d6c 6173 745f 636f  position=last_co
-0000b240: 6d6d 6974 5f70 6f73 6974 696f 6e0a 290a  mmit_position.).
-0000b250: 0a0a 2320 4361 7463 6820 7570 2062 7920  ..# Catch up by 
-0000b260: 7265 6365 6976 696e 6720 7468 6520 6e65  receiving the ne
-0000b270: 7720 6576 656e 7420 6672 6f6d 2074 6865  w event from the
-0000b280: 2073 7562 7363 7269 7074 696f 6e2e 0a66   subscription..f
-0000b290: 6f72 2065 7665 6e74 2069 6e20 7375 6273  or event in subs
-0000b2a0: 6372 6970 7469 6f6e 3a0a 2020 2020 7265  cription:.    re
-0000b2b0: 6365 6976 6564 5f65 7665 6e74 732e 6170  ceived_events.ap
-0000b2c0: 7065 6e64 2865 7665 6e74 290a 2020 2020  pend(event).    
-0000b2d0: 6966 2065 7665 6e74 2e69 6420 3d3d 2065  if event.id == e
-0000b2e0: 7665 6e74 362e 6964 3a0a 2020 2020 2020  vent6.id:.      
-0000b2f0: 2020 6272 6561 6b0a 0a61 7373 6572 7420    break..assert 
-0000b300: 7265 6365 6976 6564 5f65 7665 6e74 735b  received_events[
-0000b310: 2d36 5d2e 6964 203d 3d20 6576 656e 7431  -6].id == event1
-0000b320: 2e69 640a 6173 7365 7274 2072 6563 6569  .id.assert recei
-0000b330: 7665 645f 6576 656e 7473 5b2d 355d 2e69  ved_events[-5].i
-0000b340: 6420 3d3d 2065 7665 6e74 322e 6964 0a61  d == event2.id.a
-0000b350: 7373 6572 7420 7265 6365 6976 6564 5f65  ssert received_e
-0000b360: 7665 6e74 735b 2d34 5d2e 6964 203d 3d20  vents[-4].id == 
-0000b370: 6576 656e 7433 2e69 640a 6173 7365 7274  event3.id.assert
-0000b380: 2072 6563 6569 7665 645f 6576 656e 7473   received_events
-0000b390: 5b2d 335d 2e69 6420 3d3d 2065 7665 6e74  [-3].id == event
-0000b3a0: 342e 6964 0a61 7373 6572 7420 7265 6365  4.id.assert rece
-0000b3b0: 6976 6564 5f65 7665 6e74 735b 2d32 5d2e  ived_events[-2].
-0000b3c0: 6964 203d 3d20 6576 656e 7435 2e69 640a  id == event5.id.
-0000b3d0: 6173 7365 7274 2072 6563 6569 7665 645f  assert received_
-0000b3e0: 6576 656e 7473 5b2d 315d 2e69 6420 3d3d  events[-1].id ==
-0000b3f0: 2065 7665 6e74 362e 6964 0a0a 0a23 2041   event6.id...# A
-0000b400: 7070 656e 6420 7468 7265 6520 6d6f 7265  ppend three more
-0000b410: 2065 7665 6e74 7320 746f 2061 206e 6577   events to a new
-0000b420: 2073 7472 6561 6d2e 0a73 7472 6561 6d5f   stream..stream_
-0000b430: 6e61 6d65 3320 3d20 7374 7228 7575 6964  name3 = str(uuid
-0000b440: 3428 2929 0a65 7665 6e74 3720 3d20 4e65  4()).event7 = Ne
-0000b450: 7745 7665 6e74 2874 7970 653d 274f 7264  wEvent(type='Ord
-0000b460: 6572 4372 6561 7465 6427 2c20 6461 7461  erCreated', data
-0000b470: 3d62 2764 6174 6137 2729 0a65 7665 6e74  =b'data7').event
-0000b480: 3820 3d20 4e65 7745 7665 6e74 2874 7970  8 = NewEvent(typ
-0000b490: 653d 274f 7264 6572 5570 6461 7465 6427  e='OrderUpdated'
-0000b4a0: 2c20 6461 7461 3d62 2764 6174 6138 2729  , data=b'data8')
-0000b4b0: 0a65 7665 6e74 3920 3d20 4e65 7745 7665  .event9 = NewEve
-0000b4c0: 6e74 2874 7970 653d 274f 7264 6572 4465  nt(type='OrderDe
-0000b4d0: 6c65 7465 6427 2c20 6461 7461 3d62 2764  leted', data=b'd
-0000b4e0: 6174 6139 2729 0a0a 636c 6965 6e74 2e61  ata9')..client.a
-0000b4f0: 7070 656e 645f 6576 656e 7473 280a 2020  ppend_events(.  
-0000b500: 2020 7374 7265 616d 5f6e 616d 653d 7374    stream_name=st
-0000b510: 7265 616d 5f6e 616d 6533 2c0a 2020 2020  ream_name3,.    
-0000b520: 6578 7065 6374 6564 5f70 6f73 6974 696f  expected_positio
-0000b530: 6e3d 4e6f 6e65 2c0a 2020 2020 6576 656e  n=None,.    even
-0000b540: 7473 3d5b 6576 656e 7437 2c20 6576 656e  ts=[event7, even
-0000b550: 7438 2c20 6576 656e 7439 5d2c 0a29 0a0a  t8, event9],.)..
-0000b560: 2320 5265 6365 6976 6520 7468 6520 7468  # Receive the th
-0000b570: 7265 6520 6e65 7720 6576 656e 7473 2066  ree new events f
-0000b580: 726f 6d20 7468 6520 7265 7375 6d65 6420  rom the resumed 
-0000b590: 7375 6273 6372 6970 7469 6f6e 2e0a 666f  subscription..fo
-0000b5a0: 7220 6576 656e 7420 696e 2073 7562 7363  r event in subsc
-0000b5b0: 7269 7074 696f 6e3a 0a20 2020 2072 6563  ription:.    rec
-0000b5c0: 6569 7665 645f 6576 656e 7473 2e61 7070  eived_events.app
-0000b5d0: 656e 6428 6576 656e 7429 0a20 2020 2069  end(event).    i
-0000b5e0: 6620 6576 656e 742e 6964 203d 3d20 6576  f event.id == ev
-0000b5f0: 656e 7439 2e69 643a 0a20 2020 2020 2020  ent9.id:.       
-0000b600: 2062 7265 616b 0a0a 6173 7365 7274 2072   break..assert r
-0000b610: 6563 6569 7665 645f 6576 656e 7473 5b2d  eceived_events[-
-0000b620: 395d 2e69 6420 3d3d 2065 7665 6e74 312e  9].id == event1.
-0000b630: 6964 0a61 7373 6572 7420 7265 6365 6976  id.assert receiv
-0000b640: 6564 5f65 7665 6e74 735b 2d38 5d2e 6964  ed_events[-8].id
-0000b650: 203d 3d20 6576 656e 7432 2e69 640a 6173   == event2.id.as
-0000b660: 7365 7274 2072 6563 6569 7665 645f 6576  sert received_ev
-0000b670: 656e 7473 5b2d 375d 2e69 6420 3d3d 2065  ents[-7].id == e
-0000b680: 7665 6e74 332e 6964 0a61 7373 6572 7420  vent3.id.assert 
-0000b690: 7265 6365 6976 6564 5f65 7665 6e74 735b  received_events[
-0000b6a0: 2d36 5d2e 6964 203d 3d20 6576 656e 7434  -6].id == event4
-0000b6b0: 2e69 640a 6173 7365 7274 2072 6563 6569  .id.assert recei
-0000b6c0: 7665 645f 6576 656e 7473 5b2d 355d 2e69  ved_events[-5].i
-0000b6d0: 6420 3d3d 2065 7665 6e74 352e 6964 0a61  d == event5.id.a
-0000b6e0: 7373 6572 7420 7265 6365 6976 6564 5f65  ssert received_e
-0000b6f0: 7665 6e74 735b 2d34 5d2e 6964 203d 3d20  vents[-4].id == 
-0000b700: 6576 656e 7436 2e69 640a 6173 7365 7274  event6.id.assert
-0000b710: 2072 6563 6569 7665 645f 6576 656e 7473   received_events
-0000b720: 5b2d 335d 2e69 6420 3d3d 2065 7665 6e74  [-3].id == event
-0000b730: 372e 6964 0a61 7373 6572 7420 7265 6365  7.id.assert rece
-0000b740: 6976 6564 5f65 7665 6e74 735b 2d32 5d2e  ived_events[-2].
-0000b750: 6964 203d 3d20 6576 656e 7438 2e69 640a  id == event8.id.
-0000b760: 6173 7365 7274 2072 6563 6569 7665 645f  assert received_
-0000b770: 6576 656e 7473 5b2d 315d 2e69 6420 3d3d  events[-1].id ==
-0000b780: 2065 7665 6e74 392e 6964 0a60 6060 0a0a   event9.id.```..
-0000b790: 5468 6520 6361 7463 682d 7570 2073 7562  The catch-up sub
-0000b7a0: 7363 7269 7074 696f 6e20 6752 5043 206f  scription gRPC o
-0000b7b0: 7065 7261 7469 6f6e 2069 7320 656e 6465  peration is ende
-0000b7c0: 6420 6173 2073 6f6f 6e20 6173 2074 6865  d as soon as the
-0000b7d0: 2073 7562 7363 7269 7074 696f 6e20 6f62   subscription ob
-0000b7e0: 6a65 6374 0a67 6f65 7320 6f75 7420 6f66  ject.goes out of
-0000b7f0: 2073 636f 7065 206f 7220 6973 2065 7870   scope or is exp
-0000b800: 6c69 6369 746c 7920 6465 6c65 7465 6420  licitly deleted 
-0000b810: 6672 6f6d 206d 656d 6f72 792e 0a0a 6060  from memory...``
-0000b820: 6070 7974 686f 6e0a 2320 456e 6420 7468  `python.# End th
-0000b830: 6520 7375 6273 6372 6970 7469 6f6e 2e0a  e subscription..
-0000b840: 6465 6c20 7375 6273 6372 6970 7469 6f6e  del subscription
-0000b850: 0a60 6060 0a0a 2323 2320 5375 6273 6372  .```..### Subscr
-0000b860: 6962 6520 7374 7265 616d 2065 7665 6e74  ibe stream event
-0000b870: 730a 0a54 6865 6073 7562 7363 7269 6265  s..The`subscribe
-0000b880: 5f73 7472 6561 6d5f 6576 656e 7473 2829  _stream_events()
-0000b890: 6020 6d65 7468 6f64 2063 616e 2062 6520  ` method can be 
-0000b8a0: 7573 6564 2074 6f20 7374 6172 7420 6120  used to start a 
-0000b8b0: 2263 6174 6368 2d75 7022 2073 7562 7363  "catch-up" subsc
-0000b8c0: 7269 7074 696f 6e0a 7468 6174 2063 616e  ription.that can
-0000b8d0: 2072 6574 7572 6e20 616c 6c20 6576 656e   return all even
-0000b8e0: 7473 2069 6e20 6120 7374 7265 616d 2e0a  ts in a stream..
-0000b8f0: 0a54 6869 7320 6d65 7468 6f64 2074 616b  .This method tak
-0000b900: 6573 2061 2060 7374 7265 616d 5f6e 616d  es a `stream_nam
-0000b910: 6560 2061 7267 756d 656e 742c 2077 6869  e` argument, whi
-0000b920: 6368 2073 7065 6369 6669 6573 2074 6865  ch specifies the
-0000b930: 206e 616d 6520 6f66 2074 6865 2073 7472   name of the str
-0000b940: 6561 6d0a 6672 6f6d 2077 6869 6368 2072  eam.from which r
-0000b950: 6563 6f72 6465 6420 6576 656e 7473 2077  ecorded events w
-0000b960: 696c 6c20 6265 2072 6563 6569 7665 642e  ill be received.
-0000b970: 0a0a 5468 6973 206d 6574 686f 6420 7461  ..This method ta
-0000b980: 6b65 7320 616e 206f 7074 696f 6e61 6c20  kes an optional 
-0000b990: 6073 7472 6561 6d5f 706f 7369 7469 6f6e  `stream_position
-0000b9a0: 6020 6172 6775 6d65 6e74 2c20 7768 6963  ` argument, whic
-0000b9b0: 6820 7370 6563 6966 6965 7320 610a 7374  h specifies a.st
-0000b9c0: 7265 616d 2070 6f73 6974 696f 6e20 696e  ream position in
-0000b9d0: 2074 6865 2073 7472 6561 6d20 6672 6f6d   the stream from
-0000b9e0: 2077 6869 6368 2072 6563 6f72 6465 6420   which recorded 
-0000b9f0: 6576 656e 7473 2077 696c 6c20 6265 2072  events will be r
-0000ba00: 6563 6569 7665 642e 2054 6865 0a65 7665  eceived. The.eve
-0000ba10: 6e74 2061 7420 7468 6520 7370 6563 6966  nt at the specif
-0000ba20: 6965 6420 7374 7265 616d 2070 6f73 6974  ied stream posit
-0000ba30: 696f 6e20 7769 6c6c 206e 6f74 2062 6520  ion will not be 
-0000ba40: 696e 636c 7564 6564 2e0a 0a54 6869 7320  included...This 
-0000ba50: 6d65 7468 6f64 2074 616b 6573 2061 6e20  method takes an 
-0000ba60: 6f70 7469 6f6e 616c 2060 7469 6d65 6f75  optional `timeou
-0000ba70: 7460 2061 7267 756d 656e 742c 2077 6869  t` argument, whi
-0000ba80: 6368 2069 7320 6120 5079 7468 6f6e 2060  ch is a Python `
-0000ba90: 666c 6f61 7460 2074 6861 7420 7365 7473  float` that sets
-0000baa0: 0a61 2064 6561 646c 696e 6520 666f 7220  .a deadline for 
-0000bab0: 7468 6520 636f 6d70 6c65 7469 6f6e 206f  the completion o
-0000bac0: 6620 7468 6520 6752 5043 206f 7065 7261  f the gRPC opera
-0000bad0: 7469 6f6e 2e0a 0a54 6865 2065 7861 6d70  tion...The examp
-0000bae0: 6c65 2062 656c 6f77 2073 686f 7773 2068  le below shows h
-0000baf0: 6f77 2074 6f20 7374 6172 7420 6120 6361  ow to start a ca
-0000bb00: 7463 682d 7570 2073 7562 7363 7269 7074  tch-up subscript
-0000bb10: 696f 6e20 746f 2061 2073 7472 6561 6d2e  ion to a stream.
-0000bb20: 0a0a 6060 6070 7974 686f 6e0a 0a23 2053  ..```python..# S
-0000bb30: 7562 7363 7269 6265 2074 6f20 6576 656e  ubscribe to even
-0000bb40: 7473 2066 726f 6d20 7374 7265 616d 322c  ts from stream2,
-0000bb50: 2066 726f 6d20 7468 6520 7374 6172 742e   from the start.
-0000bb60: 0a73 7562 7363 7269 7074 696f 6e20 3d20  .subscription = 
-0000bb70: 636c 6965 6e74 2e73 7562 7363 7269 6265  client.subscribe
-0000bb80: 5f73 7472 6561 6d5f 6576 656e 7473 2873  _stream_events(s
-0000bb90: 7472 6561 6d5f 6e61 6d65 3d73 7472 6561  tream_name=strea
-0000bba0: 6d5f 6e61 6d65 3229 0a0a 2320 5265 6164  m_name2)..# Read
-0000bbb0: 2066 726f 6d20 7468 6520 7375 6273 6372   from the subscr
-0000bbc0: 6970 7469 6f6e 2e0a 6576 656e 7473 203d  iption..events =
-0000bbd0: 205b 5d0a 666f 7220 6576 656e 7420 696e   [].for event in
-0000bbe0: 2073 7562 7363 7269 7074 696f 6e3a 0a20   subscription:. 
-0000bbf0: 2020 2065 7665 6e74 732e 6170 7065 6e64     events.append
-0000bc00: 2865 7665 6e74 290a 2020 2020 6966 2065  (event).    if e
-0000bc10: 7665 6e74 2e69 6420 3d3d 2065 7665 6e74  vent.id == event
-0000bc20: 362e 6964 3a0a 2020 2020 2020 2020 6272  6.id:.        br
-0000bc30: 6561 6b0a 0a23 2043 6865 636b 2077 6520  eak..# Check we 
-0000bc40: 676f 7420 6576 656e 7473 206f 6e6c 7920  got events only 
-0000bc50: 6672 6f6d 2073 7472 6561 6d32 2e0a 6173  from stream2..as
-0000bc60: 7365 7274 206c 656e 2865 7665 6e74 7329  sert len(events)
-0000bc70: 203d 3d20 330a 6576 656e 7473 5b30 5d2e   == 3.events[0].
-0000bc80: 7374 7265 616d 5f6e 616d 6520 3d3d 2073  stream_name == s
-0000bc90: 7472 6561 6d5f 6e61 6d65 320a 6576 656e  tream_name2.even
-0000bca0: 7473 5b31 5d2e 7374 7265 616d 5f6e 616d  ts[1].stream_nam
-0000bcb0: 6520 3d3d 2073 7472 6561 6d5f 6e61 6d65  e == stream_name
-0000bcc0: 320a 6576 656e 7473 5b32 5d2e 7374 7265  2.events[2].stre
-0000bcd0: 616d 5f6e 616d 6520 3d3d 2073 7472 6561  am_name == strea
-0000bce0: 6d5f 6e61 6d65 320a 0a23 2041 7070 656e  m_name2..# Appen
-0000bcf0: 6420 616e 6f74 6865 7220 6576 656e 7420  d another event 
-0000bd00: 746f 2073 7472 6561 6d33 2e0a 6576 656e  to stream3..even
-0000bd10: 7431 3020 3d20 4e65 7745 7665 6e74 2874  t10 = NewEvent(t
-0000bd20: 7970 653d 224f 7264 6572 556e 6465 6c65  ype="OrderUndele
-0000bd30: 7465 6422 2c20 6461 7461 3d62 2764 6174  ted", data=b'dat
-0000bd40: 6131 3027 290a 636c 6965 6e74 2e61 7070  a10').client.app
-0000bd50: 656e 645f 6576 656e 7473 280a 2020 2020  end_events(.    
-0000bd60: 7374 7265 616d 5f6e 616d 653d 7374 7265  stream_name=stre
-0000bd70: 616d 5f6e 616d 6533 2c0a 2020 2020 6578  am_name3,.    ex
-0000bd80: 7065 6374 6564 5f70 6f73 6974 696f 6e3d  pected_position=
-0000bd90: 322c 0a20 2020 2065 7665 6e74 733d 5b65  2,.    events=[e
-0000bda0: 7665 6e74 3130 5d2c 0a29 0a0a 2320 4170  vent10],.)..# Ap
-0000bdb0: 7065 6e64 2061 6e6f 7468 6572 2065 7665  pend another eve
-0000bdc0: 6e74 2074 6f20 7374 7265 616d 322e 0a65  nt to stream2..e
-0000bdd0: 7665 6e74 3131 203d 204e 6577 4576 656e  vent11 = NewEven
-0000bde0: 7428 7479 7065 3d22 4f72 6465 7255 6e64  t(type="OrderUnd
-0000bdf0: 656c 6574 6564 222c 2064 6174 613d 6227  eleted", data=b'
-0000be00: 6461 7461 3131 2729 0a63 6c69 656e 742e  data11').client.
-0000be10: 6170 7065 6e64 5f65 7665 6e74 7328 0a20  append_events(. 
-0000be20: 2020 2073 7472 6561 6d5f 6e61 6d65 3d73     stream_name=s
-0000be30: 7472 6561 6d5f 6e61 6d65 322c 0a20 2020  tream_name2,.   
-0000be40: 2065 7870 6563 7465 645f 706f 7369 7469   expected_positi
-0000be50: 6f6e 3d32 2c0a 2020 2020 6576 656e 7473  on=2,.    events
-0000be60: 3d5b 6576 656e 7431 315d 0a29 0a0a 2320  =[event11].)..# 
-0000be70: 436f 6e74 696e 7565 2072 6561 6469 6e67  Continue reading
-0000be80: 2066 726f 6d20 7468 6520 7375 6273 6372   from the subscr
-0000be90: 6970 7469 6f6e 2e0a 666f 7220 6576 656e  iption..for even
-0000bea0: 7420 696e 2073 7562 7363 7269 7074 696f  t in subscriptio
-0000beb0: 6e3a 0a20 2020 2065 7665 6e74 732e 6170  n:.    events.ap
-0000bec0: 7065 6e64 2865 7665 6e74 290a 2020 2020  pend(event).    
-0000bed0: 6966 2065 7665 6e74 2e69 6420 3d3d 2065  if event.id == e
-0000bee0: 7665 6e74 3131 2e69 643a 0a20 2020 2020  vent11.id:.     
-0000bef0: 2020 2062 7265 616b 0a0a 2320 4368 6563     break..# Chec
-0000bf00: 6b20 7765 2067 6f74 2065 7665 6e74 7320  k we got events 
-0000bf10: 6f6e 6c79 2066 726f 6d20 7374 7265 616d  only from stream
-0000bf20: 322e 0a61 7373 6572 7420 6c65 6e28 6576  2..assert len(ev
-0000bf30: 656e 7473 2920 3d3d 2034 0a65 7665 6e74  ents) == 4.event
-0000bf40: 735b 305d 2e73 7472 6561 6d5f 6e61 6d65  s[0].stream_name
-0000bf50: 203d 3d20 7374 7265 616d 5f6e 616d 6532   == stream_name2
-0000bf60: 0a65 7665 6e74 735b 315d 2e73 7472 6561  .events[1].strea
-0000bf70: 6d5f 6e61 6d65 203d 3d20 7374 7265 616d  m_name == stream
-0000bf80: 5f6e 616d 6532 0a65 7665 6e74 735b 325d  _name2.events[2]
-0000bf90: 2e73 7472 6561 6d5f 6e61 6d65 203d 3d20  .stream_name == 
-0000bfa0: 7374 7265 616d 5f6e 616d 6532 0a65 7665  stream_name2.eve
-0000bfb0: 6e74 735b 335d 2e73 7472 6561 6d5f 6e61  nts[3].stream_na
-0000bfc0: 6d65 203d 3d20 7374 7265 616d 5f6e 616d  me == stream_nam
-0000bfd0: 6532 0a60 6060 0a0a 5468 6520 6578 616d  e2.```..The exam
-0000bfe0: 706c 6520 6265 6c6f 7720 7368 6f77 7320  ple below shows 
-0000bff0: 686f 7720 746f 2073 7461 7274 2061 2063  how to start a c
-0000c000: 6174 6368 2d75 7020 7375 6273 6372 6970  atch-up subscrip
-0000c010: 7469 6f6e 2074 6f20 6120 7374 7265 616d  tion to a stream
-0000c020: 2066 726f 6d20 610a 7370 6563 6966 6963   from a.specific
-0000c030: 2073 7472 6561 6d20 706f 7369 7469 6f6e   stream position
-0000c040: 2e0a 0a60 6060 7079 7468 6f6e 0a0a 2320  ...```python..# 
-0000c050: 5375 6273 6372 6962 6520 746f 2065 7665  Subscribe to eve
-0000c060: 6e74 7320 6672 6f6d 2073 7472 6561 6d32  nts from stream2
-0000c070: 2c20 6672 6f6d 2074 6865 2073 7461 7274  , from the start
-0000c080: 2e0a 7375 6273 6372 6970 7469 6f6e 203d  ..subscription =
-0000c090: 2063 6c69 656e 742e 7375 6273 6372 6962   client.subscrib
-0000c0a0: 655f 7374 7265 616d 5f65 7665 6e74 7328  e_stream_events(
-0000c0b0: 0a20 2020 2073 7472 6561 6d5f 6e61 6d65  .    stream_name
-0000c0c0: 3d73 7472 6561 6d5f 6e61 6d65 322c 0a20  =stream_name2,. 
-0000c0d0: 2020 2073 7472 6561 6d5f 706f 7369 7469     stream_positi
-0000c0e0: 6f6e 3d31 2c0a 290a 0a23 2052 6561 6420  on=1,.)..# Read 
-0000c0f0: 6576 656e 7420 6672 6f6d 2074 6865 2073  event from the s
-0000c100: 7562 7363 7269 7074 696f 6e2e 0a65 7665  ubscription..eve
-0000c110: 6e74 7320 3d20 5b5d 0a66 6f72 2065 7665  nts = [].for eve
-0000c120: 6e74 2069 6e20 7375 6273 6372 6970 7469  nt in subscripti
-0000c130: 6f6e 3a0a 2020 2020 6576 656e 7473 2e61  on:.    events.a
-0000c140: 7070 656e 6428 6576 656e 7429 0a20 2020  ppend(event).   
-0000c150: 2069 6620 6576 656e 742e 6964 203d 3d20   if event.id == 
-0000c160: 6576 656e 7431 312e 6964 3a0a 2020 2020  event11.id:.    
-0000c170: 2020 2020 6272 6561 6b0a 0a23 2043 6865      break..# Che
-0000c180: 636b 2077 6520 676f 7420 6576 656e 7473  ck we got events
-0000c190: 206f 6e6c 7920 6166 7465 7220 706f 7369   only after posi
-0000c1a0: 7469 6f6e 2031 2e0a 6173 7365 7274 206c  tion 1..assert l
-0000c1b0: 656e 2865 7665 6e74 7329 203d 3d20 320a  en(events) == 2.
-0000c1c0: 6576 656e 7473 5b30 5d2e 6964 203d 3d20  events[0].id == 
-0000c1d0: 6576 656e 7436 2e69 640a 6576 656e 7473  event6.id.events
-0000c1e0: 5b30 5d2e 7374 7265 616d 5f70 6f73 6974  [0].stream_posit
-0000c1f0: 696f 6e20 3d3d 2032 0a65 7665 6e74 735b  ion == 2.events[
-0000c200: 305d 2e73 7472 6561 6d5f 6e61 6d65 203d  0].stream_name =
-0000c210: 3d20 7374 7265 616d 5f6e 616d 6532 0a65  = stream_name2.e
-0000c220: 7665 6e74 735b 315d 2e69 6420 3d3d 2065  vents[1].id == e
-0000c230: 7665 6e74 3131 2e69 640a 6576 656e 7473  vent11.id.events
-0000c240: 5b31 5d2e 7374 7265 616d 5f70 6f73 6974  [1].stream_posit
-0000c250: 696f 6e20 3d3d 2033 0a65 7665 6e74 735b  ion == 3.events[
-0000c260: 315d 2e73 7472 6561 6d5f 6e61 6d65 203d  1].stream_name =
-0000c270: 3d20 7374 7265 616d 5f6e 616d 6532 0a60  = stream_name2.`
-0000c280: 6060 0a0a 2323 2050 6572 7369 7374 656e  ``..## Persisten
-0000c290: 7420 7375 6273 6372 6970 7469 6f6e 730a  t subscriptions.
-0000c2a0: 0a23 2323 2043 7265 6174 6520 7375 6273  .### Create subs
-0000c2b0: 6372 6970 7469 6f6e 0a0a 5468 6520 6d65  cription..The me
-0000c2c0: 7468 6f64 2060 6372 6561 7465 5f73 7562  thod `create_sub
-0000c2d0: 7363 7269 7074 696f 6e28 2960 2063 616e  scription()` can
-0000c2e0: 2062 6520 7573 6564 2074 6f20 6372 6561   be used to crea
-0000c2f0: 7465 2061 0a22 7065 7273 6973 7465 6e74  te a."persistent
-0000c300: 2073 7562 7363 7269 7074 696f 6e22 2074   subscription" t
-0000c310: 6f20 4576 656e 7453 746f 7265 4442 2e0a  o EventStoreDB..
-0000c320: 0a54 6869 7320 6d65 7468 6f64 2074 616b  .This method tak
-0000c330: 6573 2061 2072 6571 7569 7265 6420 6067  es a required `g
-0000c340: 726f 7570 5f6e 616d 6560 2061 7267 756d  roup_name` argum
-0000c350: 656e 742c 2077 6869 6368 2069 7320 7468  ent, which is th
-0000c360: 650a 6e61 6d65 206f 6620 6120 2267 726f  e.name of a "gro
-0000c370: 7570 2220 6f66 2063 6f6e 7375 6d65 7273  up" of consumers
-0000c380: 206f 6620 7468 6520 7375 6273 6372 6970   of the subscrip
-0000c390: 7469 6f6e 2e0a 0a54 6869 7320 6d65 7468  tion...This meth
-0000c3a0: 6f64 2074 616b 6573 2061 6e20 6f70 7469  od takes an opti
-0000c3b0: 6f6e 616c 2060 6672 6f6d 5f65 6e64 6020  onal `from_end` 
-0000c3c0: 6172 6775 6d65 6e74 2c20 7768 6963 6820  argument, which 
-0000c3d0: 6361 6e20 6265 0a75 7365 6420 746f 2073  can be.used to s
-0000c3e0: 7065 6369 6679 2074 6861 7420 7468 6520  pecify that the 
-0000c3f0: 6772 6f75 7020 6f66 2063 6f6e 7375 6d65  group of consume
-0000c400: 7273 206f 6620 7468 6520 7375 6273 6372  rs of the subscr
-0000c410: 6970 7469 6f6e 2073 686f 756c 640a 6f6e  iption should.on
-0000c420: 6c79 2072 6563 6569 7665 2065 7665 6e74  ly receive event
-0000c430: 7320 7468 6174 2077 6572 6520 7265 636f  s that were reco
-0000c440: 7264 6564 2061 6674 6572 2074 6865 2073  rded after the s
-0000c450: 7562 7363 7269 7074 696f 6e20 7761 7320  ubscription was 
-0000c460: 6372 6561 7465 642e 0a0a 5468 6973 206d  created...This m
-0000c470: 6574 686f 6420 7461 6b65 7320 616e 206f  ethod takes an o
-0000c480: 7074 696f 6e61 6c20 6063 6f6d 6d69 745f  ptional `commit_
-0000c490: 706f 7369 7469 6f6e 6020 6172 6775 6d65  position` argume
-0000c4a0: 6e74 2c20 7768 6963 6820 6361 6e20 6265  nt, which can be
-0000c4b0: 0a75 7365 6420 746f 2073 7065 6369 6679  .used to specify
-0000c4c0: 2061 2063 6f6d 6d69 7420 706f 7369 7469   a commit positi
-0000c4d0: 6f6e 2066 726f 6d20 7768 6963 6820 7468  on from which th
-0000c4e0: 6520 6772 6f75 7020 6f66 2063 6f6e 7375  e group of consu
-0000c4f0: 6d65 7273 206f 660a 7468 6520 7375 6273  mers of.the subs
-0000c500: 6372 6970 7469 6f6e 2073 686f 756c 6420  cription should 
-0000c510: 7265 6365 6976 6520 6576 656e 7473 2e20  receive events. 
-0000c520: 506c 6561 7365 206e 6f74 652c 2074 6865  Please note, the
-0000c530: 2072 6563 6f72 6465 6420 6576 656e 740a   recorded event.
-0000c540: 6174 2074 6865 2073 7065 6369 6669 6564  at the specified
-0000c550: 2063 6f6d 6d69 7420 706f 7369 7469 6f6e   commit position
-0000c560: 204d 4159 2062 6520 696e 636c 7564 6564   MAY be included
-0000c570: 2069 6e20 7468 6520 7265 636f 7264 6564   in the recorded
-0000c580: 2065 7665 6e74 730a 7265 6365 6976 6564   events.received
-0000c590: 2062 7920 7468 6520 6772 6f75 7020 6f66   by the group of
-0000c5a0: 2063 6f6e 7375 6d65 7273 2e0a 0a49 6620   consumers...If 
-0000c5b0: 6e65 6974 6865 7220 6066 726f 6d5f 656e  neither `from_en
-0000c5c0: 6460 206f 7220 6063 6f6d 6d69 745f 706f  d` or `commit_po
-0000c5d0: 7369 7469 6f6e 6020 6172 6520 7370 6563  sition` are spec
-0000c5e0: 6966 6965 642c 2074 6865 2067 726f 7570  ified, the group
-0000c5f0: 206f 6620 636f 6e73 756d 6572 730a 6f66   of consumers.of
-0000c600: 2074 6865 2073 7562 7363 7269 7074 696f   the subscriptio
-0000c610: 6e20 7769 6c6c 2072 6563 6569 7665 2061  n will receive a
-0000c620: 6c6c 2072 6563 6f72 6465 6420 6576 656e  ll recorded even
-0000c630: 7473 2e0a 0a54 6869 7320 6d65 7468 6f64  ts...This method
-0000c640: 2061 6c73 6f20 7461 6b65 7320 6f70 7469   also takes opti
-0000c650: 6f6e 2060 6669 6c74 6572 5f65 7863 6c75  on `filter_exclu
-0000c660: 6465 602c 2060 6669 6c74 6572 5f69 6e63  de`, `filter_inc
-0000c670: 6c75 6465 600a 6172 6775 6d65 6e74 732c  lude`.arguments,
-0000c680: 2077 6869 6368 2077 6f72 6b20 696e 2074   which work in t
-0000c690: 6865 2073 616d 6520 7761 7920 6173 2074  he same way as t
-0000c6a0: 6865 7920 646f 2069 6e20 7468 6520 6073  hey do in the `s
-0000c6b0: 7562 7363 7269 6265 5f61 6c6c 5f65 7665  ubscribe_all_eve
-0000c6c0: 6e74 7328 2960 0a6d 6574 686f 642e 0a0a  nts()`.method...
-0000c6d0: 5468 6973 206d 6574 686f 6420 616c 736f  This method also
-0000c6e0: 2074 616b 6573 2061 6e20 6f70 7469 6f6e   takes an option
-0000c6f0: 616c 2060 7469 6d65 6f75 7460 2061 7267  al `timeout` arg
-0000c700: 756d 656e 742c 2074 6861 740a 6973 2065  ument, that.is e
-0000c710: 7870 6563 7465 6420 746f 2062 6520 6120  xpected to be a 
-0000c720: 5079 7468 6f6e 2060 666c 6f61 7460 2c20  Python `float`, 
-0000c730: 7768 6963 6820 7365 7473 2061 2064 6561  which sets a dea
-0000c740: 646c 696e 650a 666f 7220 7468 6520 636f  dline.for the co
-0000c750: 6d70 6c65 7469 6f6e 206f 6620 7468 6520  mpletion of the 
-0000c760: 6752 5043 206f 7065 7261 7469 6f6e 2e0a  gRPC operation..
-0000c770: 0a54 6865 206d 6574 686f 6420 6063 7265  .The method `cre
-0000c780: 6174 655f 7375 6273 6372 6970 7469 6f6e  ate_subscription
-0000c790: 2829 6020 646f 6573 206e 6f74 2072 6574  ()` does not ret
-0000c7a0: 7572 6e20 6120 7661 6c75 652c 2062 6563  urn a value, bec
-0000c7b0: 6175 7365 0a72 6563 6f72 6465 6420 6576  ause.recorded ev
-0000c7c0: 656e 7473 2061 7265 206f 6274 6169 6e65  ents are obtaine
-0000c7d0: 6420 6279 2074 6865 2067 726f 7570 206f  d by the group o
-0000c7e0: 6620 636f 6e73 756d 6572 7320 6f66 2074  f consumers of t
-0000c7f0: 6865 2073 7562 7363 7269 7074 696f 6e0a  he subscription.
-0000c800: 7573 696e 6720 7468 6520 6072 6561 645f  using the `read_
-0000c810: 7375 6273 6372 6970 7469 6f6e 2829 6020  subscription()` 
-0000c820: 6d65 7468 6f64 2e0a 0a2a 506c 6561 7365  method...*Please
-0000c830: 206e 6f74 652c 2069 6e20 7468 6973 2076   note, in this v
-0000c840: 6572 7369 6f6e 206f 6620 7468 6973 2063  ersion of this c
-0000c850: 6c69 656e 7420 7468 6520 2263 6f6e 7375  lient the "consu
-0000c860: 6d65 7220 7374 7261 7465 6779 2220 6973  mer strategy" is
-0000c870: 0a73 6574 2074 6f20 2244 6973 7061 7463  .set to "Dispatc
-0000c880: 6854 6f53 696e 676c 6522 2e20 5375 7070  hToSingle". Supp
-0000c890: 6f72 7420 666f 7220 6368 6f6f 7369 6e67  ort for choosing
-0000c8a0: 206f 7468 6572 2063 6f6e 7375 6d65 7220   other consumer 
-0000c8b0: 7374 7261 7465 6769 6573 0a73 7570 706f  strategies.suppo
-0000c8c0: 7274 6564 2062 7920 4576 656e 7453 746f  rted by EventSto
-0000c8d0: 7265 4442 2077 696c 6c20 696e 2066 7574  reDB will in fut
-0000c8e0: 7572 6520 6265 2073 7570 706f 7274 6564  ure be supported
-0000c8f0: 2069 6e20 7468 6973 2063 6c69 656e 742e   in this client.
-0000c900: 2a0a 0a49 6e20 7468 6520 6578 616d 706c  *..In the exampl
-0000c910: 6520 6265 6c6f 772c 2061 2070 6572 7369  e below, a persi
-0000c920: 7374 656e 7420 7375 6273 6372 6970 7469  stent subscripti
-0000c930: 6f6e 2069 7320 6372 6561 7465 642e 0a0a  on is created...
-0000c940: 6060 6070 7974 686f 6e0a 2320 4372 6561  ```python.# Crea
-0000c950: 7465 2061 2070 6572 7369 7374 656e 7420  te a persistent 
-0000c960: 7375 6273 6372 6970 7469 6f6e 2e0a 6772  subscription..gr
-0000c970: 6f75 705f 6e61 6d65 203d 2066 2267 726f  oup_name = f"gro
-0000c980: 7570 2d7b 7575 6964 3428 297d 220a 636c  up-{uuid4()}".cl
-0000c990: 6965 6e74 2e63 7265 6174 655f 7375 6273  ient.create_subs
-0000c9a0: 6372 6970 7469 6f6e 2867 726f 7570 5f6e  cription(group_n
-0000c9b0: 616d 653d 6772 6f75 705f 6e61 6d65 290a  ame=group_name).
-0000c9c0: 6060 600a 0a23 2323 2052 6561 6420 7375  ```..### Read su
-0000c9d0: 6273 6372 6970 7469 6f6e 0a0a 5468 6520  bscription..The 
-0000c9e0: 6d65 7468 6f64 2060 7265 6164 5f73 7562  method `read_sub
-0000c9f0: 7363 7269 7074 696f 6e28 2960 2063 616e  scription()` can
-0000ca00: 2062 6520 7573 6564 2062 7920 6120 6772   be used by a gr
-0000ca10: 6f75 7020 6f66 2063 6f6e 7375 6d65 7273  oup of consumers
-0000ca20: 2074 6f20 7265 6365 6976 650a 7265 636f   to receive.reco
-0000ca30: 7264 6564 2065 7665 6e74 7320 6672 6f6d  rded events from
-0000ca40: 2061 2070 6572 7369 7374 656e 7420 7375   a persistent su
-0000ca50: 6273 6372 6970 7469 6f6e 2063 7265 6174  bscription creat
-0000ca60: 6564 2075 7369 6e67 2060 6372 6561 7465  ed using `create
-0000ca70: 5f73 7562 7363 7269 7074 696f 6e60 2e0a  _subscription`..
-0000ca80: 0a54 6869 7320 6d65 7468 6f64 2074 616b  .This method tak
-0000ca90: 6573 2061 2072 6571 7569 7265 6420 6067  es a required `g
-0000caa0: 726f 7570 5f6e 616d 6560 2061 7267 756d  roup_name` argum
-0000cab0: 656e 742c 2077 6869 6368 2069 730a 7468  ent, which is.th
-0000cac0: 6520 6e61 6d65 206f 6620 6120 2267 726f  e name of a "gro
-0000cad0: 7570 2220 6f66 2063 6f6e 7375 6d65 7273  up" of consumers
-0000cae0: 206f 6620 7468 6520 7375 6273 6372 6970   of the subscrip
-0000caf0: 7469 6f6e 2073 7065 6369 6669 6564 0a77  tion specified.w
-0000cb00: 6865 6e20 6063 7265 6174 655f 7375 6273  hen `create_subs
-0000cb10: 6372 6970 7469 6f6e 2829 6020 7761 7320  cription()` was 
-0000cb20: 6361 6c6c 6564 2e0a 0a54 6869 7320 6d65  called...This me
-0000cb30: 7468 6f64 2061 6c73 6f20 7461 6b65 7320  thod also takes 
-0000cb40: 616e 206f 7074 696f 6e61 6c20 6074 696d  an optional `tim
-0000cb50: 656f 7574 6020 6172 6775 6d65 6e74 2c20  eout` argument, 
-0000cb60: 7468 6174 0a69 7320 6578 7065 6374 6564  that.is expected
-0000cb70: 2074 6f20 6265 2061 2050 7974 686f 6e20   to be a Python 
-0000cb80: 6066 6c6f 6174 602c 2077 6869 6368 2073  `float`, which s
-0000cb90: 6574 7320 6120 6465 6164 6c69 6e65 0a66  ets a deadline.f
-0000cba0: 6f72 2074 6865 2063 6f6d 706c 6574 696f  or the completio
-0000cbb0: 6e20 6f66 2074 6865 2067 5250 4320 6f70  n of the gRPC op
-0000cbc0: 6572 6174 696f 6e2e 0a0a 5468 6973 206d  eration...This m
-0000cbd0: 6574 686f 6420 7265 7475 726e 7320 6120  ethod returns a 
-0000cbe0: 322d 7475 706c 653a 2061 2022 7265 6164  2-tuple: a "read
-0000cbf0: 2072 6571 7565 7374 2220 6f62 6a65 6374   request" object
-0000cc00: 2061 6e64 2061 2022 7265 6164 2072 6573   and a "read res
-0000cc10: 706f 6e73 6522 206f 626a 6563 742e 0a0a  ponse" object...
-0000cc20: 6060 6070 7974 686f 6e0a 7265 6164 5f72  ```python.read_r
-0000cc30: 6571 2c20 7265 6164 5f72 6573 7020 3d20  eq, read_resp = 
-0000cc40: 636c 6965 6e74 2e72 6561 645f 7375 6273  client.read_subs
-0000cc50: 6372 6970 7469 6f6e 2867 726f 7570 5f6e  cription(group_n
-0000cc60: 616d 653d 6772 6f75 705f 6e61 6d65 290a  ame=group_name).
-0000cc70: 6060 600a 0a54 6865 2022 7265 6164 2072  ```..The "read r
-0000cc80: 6573 706f 6e73 6522 206f 626a 6563 7420  esponse" object 
-0000cc90: 6973 2061 6e20 6974 6572 6174 6f72 2074  is an iterator t
-0000cca0: 6861 7420 7969 656c 6473 2072 6563 6f72  hat yields recor
-0000ccb0: 6465 6420 6576 656e 7473 2066 726f 6d0a  ded events from.
-0000ccc0: 7468 6520 7370 6563 6966 6965 6420 636f  the specified co
-0000ccd0: 6d6d 6974 2070 6f73 6974 696f 6e2e 0a0a  mmit position...
-0000cce0: 5468 6520 2272 6561 6420 7265 7175 6573  The "read reques
-0000ccf0: 7422 206f 626a 6563 7420 6861 7320 616e  t" object has an
-0000cd00: 2060 6163 6b28 2960 206d 6574 686f 6420   `ack()` method 
-0000cd10: 7468 6174 2063 616e 2062 6520 7573 6564  that can be used
-0000cd20: 2062 7920 6120 636f 6e73 756d 6572 0a69   by a consumer.i
-0000cd30: 6e20 6120 6772 6f75 7020 746f 2061 636b  n a group to ack
-0000cd40: 6e6f 776c 6564 6765 2074 6f20 7468 6520  nowledge to the 
-0000cd50: 7365 7276 6572 2074 6861 7420 6974 2068  server that it h
-0000cd60: 6173 2072 6563 6569 7665 6420 616e 6420  as received and 
-0000cd70: 7375 6363 6573 7366 756c 6c79 0a70 726f  successfully.pro
-0000cd80: 6365 7373 6564 2061 2072 6563 6f72 6465  cessed a recorde
-0000cd90: 6420 6576 656e 742e 2054 6869 7320 7769  d event. This wi
-0000cda0: 6c6c 2070 7265 7665 6e74 2074 6861 7420  ll prevent that 
-0000cdb0: 7265 636f 7264 6564 2065 7665 6e74 2062  recorded event b
-0000cdc0: 6569 6e67 2072 6563 6569 7665 640a 6279  eing received.by
-0000cdd0: 2061 6e6f 7468 6572 2063 6f6e 7375 6d65   another consume
-0000cde0: 7220 696e 2074 6865 2073 616d 6520 6772  r in the same gr
-0000cdf0: 6f75 702e 2054 6865 2060 6163 6b28 2960  oup. The `ack()`
-0000ce00: 206d 6574 686f 6420 7461 6b65 7320 616e   method takes an
-0000ce10: 2060 6576 656e 745f 6964 600a 6172 6775   `event_id`.argu
-0000ce20: 6d65 6e74 2c20 7768 6963 6820 6973 2074  ment, which is t
-0000ce30: 6865 2049 4420 6f66 2074 6865 2072 6563  he ID of the rec
-0000ce40: 6f72 6465 6420 6576 656e 7420 7468 6174  orded event that
-0000ce50: 2068 6173 2062 6565 6e20 7265 6365 6976   has been receiv
-0000ce60: 6564 2e0a 0a54 6865 2065 7861 6d70 6c65  ed...The example
-0000ce70: 2062 656c 6f77 2069 7465 7261 7465 7320   below iterates 
-0000ce80: 6f76 6572 2074 6865 2022 7265 6164 2072  over the "read r
-0000ce90: 6573 706f 6e73 6522 206f 626a 6563 742c  esponse" object,
-0000cea0: 2061 6e64 2063 616c 6c73 2060 6163 6b28   and calls `ack(
-0000ceb0: 2960 0a6f 6e20 7468 6520 2272 6561 6420  )`.on the "read 
-0000cec0: 7265 7370 6f6e 7365 2220 6f62 6a65 6374  response" object
-0000ced0: 2e20 5468 6520 666f 7220 6c6f 6f70 2062  . The for loop b
-0000cee0: 7265 616b 7320 7768 656e 2077 6520 6861  reaks when we ha
-0000cef0: 7665 2072 6563 6569 7665 640a 7468 6520  ve received.the 
-0000cf00: 6c61 7374 2065 7665 6e74 2c20 736f 2074  last event, so t
-0000cf10: 6861 7420 7765 2063 616e 2063 6f6e 7469  hat we can conti
-0000cf20: 6e75 6520 7769 7468 2074 6865 2065 7861  nue with the exa
-0000cf30: 6d70 6c65 7320 6265 6c6f 772e 0a0a 6060  mples below...``
-0000cf40: 6070 7974 686f 6e0a 6576 656e 7473 203d  `python.events =
-0000cf50: 205b 5d0a 666f 7220 6576 656e 7420 696e   [].for event in
-0000cf60: 2072 6561 645f 7265 7370 3a0a 2020 2020   read_resp:.    
-0000cf70: 6576 656e 7473 2e61 7070 656e 6428 6576  events.append(ev
-0000cf80: 656e 7429 0a0a 2020 2020 2320 4163 6b6e  ent)..    # Ackn
-0000cf90: 6f77 6c65 6467 6520 7468 6520 7265 6365  owledge the rece
-0000cfa0: 6976 6564 2065 7665 6e74 2e0a 2020 2020  ived event..    
-0000cfb0: 7265 6164 5f72 6571 2e61 636b 2865 7665  read_req.ack(eve
-0000cfc0: 6e74 5f69 643d 6576 656e 742e 6964 290a  nt_id=event.id).
-0000cfd0: 0a20 2020 2023 2042 7265 616b 2077 6865  .    # Break whe
-0000cfe0: 6e20 7468 6520 6c61 7374 2065 7665 6e74  n the last event
-0000cff0: 2068 6173 2062 6565 6e20 7265 6365 6976   has been receiv
-0000d000: 6564 2e0a 2020 2020 6966 2065 7665 6e74  ed..    if event
-0000d010: 2e69 6420 3d3d 2065 7665 6e74 3131 2e69  .id == event11.i
-0000d020: 643a 0a20 2020 2020 2020 2062 7265 616b  d:.        break
-0000d030: 0a60 6060 0a0a 5468 6520 7265 6365 6976  .```..The receiv
-0000d040: 6564 2065 7665 6e74 7320 6172 6520 7468  ed events are th
-0000d050: 6520 6576 656e 7473 2077 6520 6170 7065  e events we appe
-0000d060: 6e64 6564 2061 626f 7665 2e0a 0a60 6060  nded above...```
-0000d070: 7079 7468 6f6e 0a61 7373 6572 7420 6576  python.assert ev
-0000d080: 656e 7473 5b2d 3131 5d2e 6964 203d 3d20  ents[-11].id == 
-0000d090: 6576 656e 7431 2e69 640a 6173 7365 7274  event1.id.assert
-0000d0a0: 2065 7665 6e74 735b 2d31 305d 2e69 6420   events[-10].id 
-0000d0b0: 3d3d 2065 7665 6e74 322e 6964 0a61 7373  == event2.id.ass
-0000d0c0: 6572 7420 6576 656e 7473 5b2d 395d 2e69  ert events[-9].i
-0000d0d0: 6420 3d3d 2065 7665 6e74 332e 6964 0a61  d == event3.id.a
-0000d0e0: 7373 6572 7420 6576 656e 7473 5b2d 385d  ssert events[-8]
-0000d0f0: 2e69 6420 3d3d 2065 7665 6e74 342e 6964  .id == event4.id
-0000d100: 0a61 7373 6572 7420 6576 656e 7473 5b2d  .assert events[-
-0000d110: 375d 2e69 6420 3d3d 2065 7665 6e74 352e  7].id == event5.
-0000d120: 6964 0a61 7373 6572 7420 6576 656e 7473  id.assert events
-0000d130: 5b2d 365d 2e69 6420 3d3d 2065 7665 6e74  [-6].id == event
-0000d140: 362e 6964 0a61 7373 6572 7420 6576 656e  6.id.assert even
-0000d150: 7473 5b2d 355d 2e69 6420 3d3d 2065 7665  ts[-5].id == eve
-0000d160: 6e74 372e 6964 0a61 7373 6572 7420 6576  nt7.id.assert ev
-0000d170: 656e 7473 5b2d 345d 2e69 6420 3d3d 2065  ents[-4].id == e
-0000d180: 7665 6e74 382e 6964 0a61 7373 6572 7420  vent8.id.assert 
-0000d190: 6576 656e 7473 5b2d 335d 2e69 6420 3d3d  events[-3].id ==
-0000d1a0: 2065 7665 6e74 392e 6964 0a61 7373 6572   event9.id.asser
-0000d1b0: 7420 6576 656e 7473 5b2d 325d 2e69 6420  t events[-2].id 
-0000d1c0: 3d3d 2065 7665 6e74 3130 2e69 640a 6173  == event10.id.as
-0000d1d0: 7365 7274 2065 7665 6e74 735b 2d31 5d2e  sert events[-1].
-0000d1e0: 6964 203d 3d20 6576 656e 7431 312e 6964  id == event11.id
-0000d1f0: 0a60 6060 0a0a 5468 6520 2272 6561 6420  .```..The "read 
-0000d200: 7265 7175 6573 7422 206f 626a 6563 7420  request" object 
-0000d210: 616c 736f 2068 6173 2061 6e20 606e 6163  also has an `nac
-0000d220: 6b28 2960 206d 6574 686f 6420 7468 6174  k()` method that
-0000d230: 2063 616e 2062 6520 7573 6564 2062 7920   can be used by 
-0000d240: 6120 636f 6e73 756d 6572 0a69 6e20 6120  a consumer.in a 
-0000d250: 6772 6f75 7020 746f 2061 636b 6e6f 776c  group to acknowl
-0000d260: 6564 6765 2074 6f20 7468 6520 7365 7276  edge to the serv
-0000d270: 6572 2074 6861 7420 6974 2068 6173 2066  er that it has f
-0000d280: 6169 6c65 6420 7375 6363 6573 7366 756c  ailed successful
-0000d290: 6c79 2074 6f0a 7072 6f63 6573 7320 6120  ly to.process a 
-0000d2a0: 7265 636f 7264 6564 2065 7665 6e74 2e20  recorded event. 
-0000d2b0: 5468 6973 2077 696c 6c20 616c 6c6f 7720  This will allow 
-0000d2c0: 7468 6174 2072 6563 6f72 6465 6420 6576  that recorded ev
-0000d2d0: 656e 7420 746f 2062 6520 7265 6365 6976  ent to be receiv
-0000d2e0: 6564 0a62 7920 7468 6973 206f 7220 616e  ed.by this or an
-0000d2f0: 6f74 6865 7220 636f 6e73 756d 6572 2069  other consumer i
-0000d300: 6e20 7468 6520 7361 6d65 2067 726f 7570  n the same group
-0000d310: 2e0a 0a49 7420 6d69 6768 7420 6265 206d  ...It might be m
-0000d320: 6f72 6520 7573 6566 756c 2074 6f20 656e  ore useful to en
-0000d330: 6361 7073 756c 6174 6520 7468 6520 7265  capsulate the re
-0000d340: 7175 6573 7420 616e 6420 7265 7370 6f6e  quest and respon
-0000d350: 7365 206f 626a 6563 7473 2061 6e64 2074  se objects and t
-0000d360: 6f20 6974 6572 6174 650a 6f76 6572 2074  o iterate.over t
-0000d370: 6865 2022 7265 6164 2072 6573 706f 6e73  he "read respons
-0000d380: 6522 2069 6e20 6120 7365 7061 7261 7465  e" in a separate
-0000d390: 2074 6872 6561 642c 2074 6f20 6361 6c6c   thread, to call
-0000d3a0: 2062 6163 6b20 746f 2061 2068 616e 646c   back to a handl
-0000d3b0: 6572 2066 756e 6374 696f 6e20 7768 656e  er function when
-0000d3c0: 0a61 2072 6563 6f72 6465 6420 6576 656e  .a recorded even
-0000d3d0: 7420 6973 2072 6563 6569 7665 642c 2061  t is received, a
-0000d3e0: 6e64 2063 616c 6c20 6061 636b 2829 6020  nd call `ack()` 
-0000d3f0: 6966 2074 6865 2068 616e 646c 6572 2064  if the handler d
-0000d400: 6f65 7320 6e6f 7420 7261 6973 6520 616e  oes not raise an
-0000d410: 0a65 7863 6570 7469 6f6e 2c20 616e 6420  .exception, and 
-0000d420: 746f 2063 616c 6c20 606e 6163 6b28 2960  to call `nack()`
-0000d430: 2069 6620 616e 2065 7863 6570 7469 6f6e   if an exception
-0000d440: 2069 7320 7261 6973 6564 2e20 5468 6520   is raised. The 
-0000d450: 6578 616d 706c 6520 6265 6c6f 7720 7368  example below sh
-0000d460: 6f77 7320 686f 770a 7468 6973 206d 6967  ows how.this mig
-0000d470: 6874 2062 6520 646f 6e65 2e0a 0a60 6060  ht be done...```
-0000d480: 7079 7468 6f6e 0a66 726f 6d20 7468 7265  python.from thre
-0000d490: 6164 696e 6720 696d 706f 7274 2054 6872  ading import Thr
-0000d4a0: 6561 640a 0a0a 636c 6173 7320 5375 6273  ead...class Subs
-0000d4b0: 6372 6970 7469 6f6e 5265 6164 6572 3a0a  criptionReader:.
-0000d4c0: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
-0000d4d0: 2873 656c 662c 2063 6c69 656e 742c 2067  (self, client, g
-0000d4e0: 726f 7570 5f6e 616d 652c 2063 616c 6c62  roup_name, callb
-0000d4f0: 6163 6b29 3a0a 2020 2020 2020 2020 7365  ack):.        se
-0000d500: 6c66 2e63 6c69 656e 7420 3d20 636c 6965  lf.client = clie
-0000d510: 6e74 0a20 2020 2020 2020 2073 656c 662e  nt.        self.
-0000d520: 6772 6f75 705f 6e61 6d65 203d 2067 726f  group_name = gro
-0000d530: 7570 5f6e 616d 650a 2020 2020 2020 2020  up_name.        
-0000d540: 7365 6c66 2e63 616c 6c62 6163 6b20 3d20  self.callback = 
-0000d550: 6361 6c6c 6261 636b 0a20 2020 2020 2020  callback.       
-0000d560: 2073 656c 662e 7468 7265 6164 203d 2054   self.thread = T
-0000d570: 6872 6561 6428 7461 7267 6574 3d73 656c  hread(target=sel
-0000d580: 662e 7265 6164 5f73 7562 7363 7269 7074  f.read_subscript
-0000d590: 696f 6e2c 2064 6165 6d6f 6e3d 5472 7565  ion, daemon=True
-0000d5a0: 290a 2020 2020 2020 2020 7365 6c66 2e65  ).        self.e
-0000d5b0: 7272 6f72 203d 204e 6f6e 650a 0a20 2020  rror = None..   
-0000d5c0: 2064 6566 2073 7461 7274 2873 656c 6629   def start(self)
-0000d5d0: 3a0a 2020 2020 2020 2020 7365 6c66 2e74  :.        self.t
-0000d5e0: 6872 6561 642e 7374 6172 7428 290a 0a20  hread.start().. 
-0000d5f0: 2020 2064 6566 206a 6f69 6e28 7365 6c66     def join(self
-0000d600: 293a 0a20 2020 2020 2020 2073 656c 662e  ):.        self.
-0000d610: 7468 7265 6164 2e6a 6f69 6e28 290a 0a20  thread.join().. 
-0000d620: 2020 2064 6566 2072 6561 645f 7375 6273     def read_subs
-0000d630: 6372 6970 7469 6f6e 2873 656c 6629 3a0a  cription(self):.
-0000d640: 2020 2020 2020 2020 7265 712c 2072 6573          req, res
-0000d650: 7020 3d20 7365 6c66 2e63 6c69 656e 742e  p = self.client.
-0000d660: 7265 6164 5f73 7562 7363 7269 7074 696f  read_subscriptio
-0000d670: 6e28 6772 6f75 705f 6e61 6d65 3d73 656c  n(group_name=sel
-0000d680: 662e 6772 6f75 705f 6e61 6d65 290a 2020  f.group_name).  
-0000d690: 2020 2020 2020 666f 7220 6576 656e 7420        for event 
-0000d6a0: 696e 2072 6573 703a 0a20 2020 2020 2020  in resp:.       
-0000d6b0: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
-0000d6c0: 2020 2020 2020 2020 2020 7365 6c66 2e63            self.c
-0000d6d0: 616c 6c62 6163 6b28 6576 656e 7429 0a20  allback(event). 
-0000d6e0: 2020 2020 2020 2020 2020 2065 7863 6570             excep
-0000d6f0: 7420 4578 6365 7074 696f 6e20 6173 2065  t Exception as e
-0000d700: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0000d710: 2020 2320 7265 712e 6e61 636b 2865 7665    # req.nack(eve
-0000d720: 6e74 2e69 6429 2020 2320 6e6f 7420 7965  nt.id)  # not ye
-0000d730: 7420 696d 706c 656d 656e 7465 642e 2e2e  t implemented...
-0000d740: 2e0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000d750: 2020 7365 6c66 2e65 7272 6f72 203d 2065    self.error = e
-0000d760: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000d770: 2062 7265 616b 0a20 2020 2020 2020 2020   break.         
-0000d780: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0000d790: 2020 2020 2020 2020 2072 6571 2e61 636b           req.ack
-0000d7a0: 2865 7665 6e74 2e69 6429 0a0a 0a23 2043  (event.id)...# C
-0000d7b0: 7265 6174 6520 616e 6f74 6865 7220 7065  reate another pe
-0000d7c0: 7273 6973 7465 6e74 2073 7562 7363 7269  rsistent subscri
-0000d7d0: 7074 696f 6e2e 0a67 726f 7570 5f6e 616d  ption..group_nam
-0000d7e0: 6520 3d20 6622 6772 6f75 702d 7b75 7569  e = f"group-{uui
-0000d7f0: 6434 2829 7d22 0a63 6c69 656e 742e 6372  d4()}".client.cr
-0000d800: 6561 7465 5f73 7562 7363 7269 7074 696f  eate_subscriptio
-0000d810: 6e28 6772 6f75 705f 6e61 6d65 3d67 726f  n(group_name=gro
-0000d820: 7570 5f6e 616d 6529 0a0a 6576 656e 7473  up_name)..events
-0000d830: 203d 205b 5d0a 0a64 6566 2068 616e 646c   = []..def handl
-0000d840: 655f 6576 656e 7428 6576 656e 7429 3a0a  e_event(event):.
-0000d850: 2020 2020 6576 656e 7473 2e61 7070 656e      events.appen
-0000d860: 6428 6576 656e 7429 0a20 2020 2069 6620  d(event).    if 
-0000d870: 6576 656e 742e 6964 203d 3d20 6576 656e  event.id == even
-0000d880: 7431 312e 6964 3a0a 2020 2020 2020 2020  t11.id:.        
-0000d890: 7261 6973 6520 4578 6365 7074 696f 6e28  raise Exception(
-0000d8a0: 290a 0a0a 7265 6164 6572 203d 2053 7562  )...reader = Sub
-0000d8b0: 7363 7269 7074 696f 6e52 6561 6465 7228  scriptionReader(
-0000d8c0: 0a20 2020 2063 6c69 656e 743d 636c 6965  .    client=clie
-0000d8d0: 6e74 2c0a 2020 2020 6772 6f75 705f 6e61  nt,.    group_na
-0000d8e0: 6d65 3d67 726f 7570 5f6e 616d 652c 0a20  me=group_name,. 
-0000d8f0: 2020 2063 616c 6c62 6163 6b3d 6861 6e64     callback=hand
-0000d900: 6c65 5f65 7665 6e74 0a29 0a0a 7265 6164  le_event.)..read
-0000d910: 6572 2e73 7461 7274 2829 0a72 6561 6465  er.start().reade
-0000d920: 722e 6a6f 696e 2829 0a0a 6173 7365 7274  r.join()..assert
-0000d930: 2065 7665 6e74 735b 2d31 5d2e 6964 203d   events[-1].id =
-0000d940: 3d20 6576 656e 7431 312e 6964 0a60 6060  = event11.id.```
-0000d950: 0a0a 506c 6561 7365 206e 6f74 652c 2077  ..Please note, w
-0000d960: 6865 6e20 7072 6f63 6573 7369 6e67 2065  hen processing e
-0000d970: 7665 6e74 7320 696e 2061 2064 6f77 6e73  vents in a downs
-0000d980: 7472 6561 6d20 636f 6d70 6f6e 656e 742c  tream component,
-0000d990: 2074 6865 2063 6f6d 6d69 7420 706f 7369   the commit posi
-0000d9a0: 7469 6f6e 206f 660a 7468 6520 6c61 7374  tion of.the last
-0000d9b0: 2073 7563 6365 7373 6675 6c6c 7920 7072   successfully pr
-0000d9c0: 6f63 6573 7365 6420 6576 656e 7420 6973  ocessed event is
-0000d9d0: 2075 7365 6675 6c6c 7920 7265 636f 7264   usefully record
-0000d9e0: 6564 2062 7920 7468 6520 646f 776e 7374  ed by the downst
-0000d9f0: 7265 616d 2063 6f6d 706f 6e65 6e74 0a73  ream component.s
-0000da00: 6f20 7468 6174 2074 6865 2063 6f6d 6d69  o that the commi
-0000da10: 7420 706f 7369 7469 6f6e 2063 616e 2062  t position can b
-0000da20: 6520 6465 7465 726d 696e 6564 2062 7920  e determined by 
-0000da30: 7468 6520 646f 776e 7374 7265 616d 2063  the downstream c
-0000da40: 6f6d 706f 6e65 6e74 2066 726f 6d20 6974  omponent from it
-0000da50: 7320 6f77 6e0a 7265 636f 7264 6564 2077  s own.recorded w
-0000da60: 6865 6e20 6974 2069 7320 7265 7374 6172  hen it is restar
-0000da70: 7465 642e 2054 6869 7320 636f 6d6d 6974  ted. This commit
-0000da80: 2070 6f73 6974 696f 6e20 6361 6e20 6265   position can be
-0000da90: 2075 7365 6420 746f 2073 7065 6369 6679   used to specify
-0000daa0: 2074 6865 2063 6f6d 6d69 740a 706f 7369   the commit.posi
-0000dab0: 7469 6f6e 2066 726f 6d20 7768 6963 6820  tion from which 
-0000dac0: 746f 2073 7562 7363 7269 6265 2e20 5369  to subscribe. Si
-0000dad0: 6e63 6520 7468 6973 2063 6f6d 6d69 7420  nce this commit 
-0000dae0: 706f 7369 7469 6f6e 2072 6570 7265 7365  position represe
-0000daf0: 6e74 7320 7468 6520 706f 7369 7469 6f6e  nts the position
-0000db00: 206f 660a 7468 6520 6c61 7374 2073 7563   of.the last suc
-0000db10: 6365 7373 6675 6c6c 7920 7072 6f63 6573  cessfully proces
-0000db20: 7365 6420 6576 656e 7420 696e 2061 2064  sed event in a d
-0000db30: 6f77 6e73 7472 6561 6d20 636f 6d70 6f6e  ownstream compon
-0000db40: 656e 742c 2073 6f20 6974 2077 696c 6c20  ent, so it will 
-0000db50: 6265 2075 7375 616c 2074 6f0a 7761 6e74  be usual to.want
-0000db60: 2074 6f20 7265 6164 2066 726f 6d20 7468   to read from th
-0000db70: 6520 6e65 7874 2065 7665 6e74 2061 6674  e next event aft
-0000db80: 6572 2074 6869 7320 706f 7369 7469 6f6e  er this position
-0000db90: 2c20 6265 6361 7573 6520 7468 6174 2069  , because that i
-0000dba0: 7320 7468 6520 6e65 7874 2065 7665 6e74  s the next event
-0000dbb0: 0a74 6861 7420 6e65 6564 7320 746f 2062  .that needs to b
-0000dbc0: 6520 7072 6f63 6573 7365 642e 2048 6f77  e processed. How
-0000dbd0: 6576 6572 2c20 7768 656e 2073 7562 7363  ever, when subsc
-0000dbe0: 7269 6269 6e67 2066 6f72 2065 7665 6e74  ribing for event
-0000dbf0: 7320 7573 696e 6720 6120 7065 7273 6973  s using a persis
-0000dc00: 7465 6e74 0a73 7562 7363 7269 7074 696f  tent.subscriptio
-0000dc10: 6e20 696e 2045 7665 6e74 5374 6f72 6544  n in EventStoreD
-0000dc20: 422c 2074 6865 2065 7665 6e74 2061 7420  B, the event at 
-0000dc30: 7468 6520 7370 6563 6966 6965 6420 636f  the specified co
-0000dc40: 6d6d 6974 2070 6f73 6974 696f 6e20 4d41  mmit position MA
-0000dc50: 5920 6265 2072 6574 7572 6e65 640a 6173  Y be returned.as
-0000dc60: 2074 6865 2066 6972 7374 2065 7665 6e74   the first event
-0000dc70: 2069 6e20 7468 6520 7265 6365 6976 6564   in the received
-0000dc80: 2073 6571 7565 6e63 6520 6f66 2072 6563   sequence of rec
-0000dc90: 6f72 6465 6420 6576 656e 7473 2c20 616e  orded events, an
-0000dca0: 6420 736f 2069 7420 6d61 790a 6265 206e  d so it may.be n
-0000dcb0: 6563 6573 7361 7279 2074 6f20 6368 6563  ecessary to chec
-0000dcc0: 6b20 7468 6520 636f 6d6d 6974 2070 6f73  k the commit pos
-0000dcd0: 6974 696f 6e20 6f66 2074 6865 2072 6563  ition of the rec
-0000dce0: 6569 7665 6420 6576 656e 7473 2061 6e64  eived events and
-0000dcf0: 2074 6f20 6469 7363 6172 640a 616e 7920   to discard.any 
-0000dd00: 2072 6563 6f72 6465 6420 6576 656e 7420   recorded event 
-0000dd10: 6f62 6a65 6374 2074 6861 7420 6861 7320  object that has 
-0000dd20: 6120 636f 6d6d 6974 2070 6f73 6974 696f  a commit positio
-0000dd30: 6e20 6571 7561 6c20 746f 2074 6865 2063  n equal to the c
-0000dd40: 6f6d 6d69 7420 706f 7369 7469 6f6e 0a73  ommit position.s
-0000dd50: 7065 6369 6669 6564 2069 6e20 7468 6520  pecified in the 
-0000dd60: 7265 7175 6573 742e 0a0a 5768 696c 7374  request...Whilst
-0000dd70: 2074 6865 7265 2061 7265 2073 6f6d 6520   there are some 
-0000dd80: 6164 7661 6e74 6167 6573 206f 6620 7065  advantages of pe
-0000dd90: 7273 6973 7465 6e74 2073 7562 7363 7269  rsistent subscri
-0000dda0: 7074 696f 6e73 2c20 696e 2070 6172 7469  ptions, in parti
-0000ddb0: 6375 6c61 7220 7468 650a 7072 6f63 6573  cular the.proces
-0000ddc0: 7369 6e67 206f 6620 7265 636f 7264 6564  sing of recorded
-0000ddd0: 2065 7665 6e74 7320 6279 2061 2067 726f   events by a gro
-0000dde0: 7570 206f 6620 636f 6e73 756d 6572 732c  up of consumers,
-0000ddf0: 2062 7920 7472 6163 6b69 6e67 2069 6e20   by tracking in 
-0000de00: 7468 650a 7570 7374 7265 616d 2073 6572  the.upstream ser
-0000de10: 7665 7220 7468 6520 706f 7369 7469 6f6e  ver the position
-0000de20: 2069 6e20 7468 6520 636f 6d6d 6974 2073   in the commit s
-0000de30: 6571 7565 6e63 6520 6f66 2065 7665 6e74  equence of event
-0000de40: 7320 7468 6174 2068 6176 6520 6265 656e  s that have been
-0000de50: 2070 726f 6365 7373 6564 2c0a 7468 6572   processed,.ther
-0000de60: 6520 6973 2061 2064 616e 6765 7220 6f66  e is a danger of
-0000de70: 2022 6475 616c 2077 7269 7469 6e67 2220   "dual writing" 
-0000de80: 696e 2074 6865 2063 6f6e 7375 6d70 7469  in the consumpti
-0000de90: 6f6e 206f 6620 6576 656e 7473 2e20 5265  on of events. Re
-0000dea0: 6c69 6162 696c 6974 790a 696e 2070 726f  liability.in pro
-0000deb0: 6365 7373 696e 6720 6f66 2072 6563 6f72  cessing of recor
-0000dec0: 6465 6420 6576 656e 7473 2062 7920 6120  ded events by a 
-0000ded0: 6772 6f75 7020 6f66 2063 6f6e 7375 6d65  group of consume
-0000dee0: 7273 2077 696c 6c20 7265 6c79 2069 6e73  rs will rely ins
-0000def0: 7465 6164 206f 6e0a 6964 656d 706f 7465  tead on.idempote
-0000df00: 6e74 2068 616e 646c 696e 6720 6f66 2064  nt handling of d
-0000df10: 7570 6c69 6361 7465 206d 6573 7361 6765  uplicate message
-0000df20: 732c 2061 6e64 2072 6573 696c 6965 6e63  s, and resilienc
-0000df30: 6520 746f 206f 7574 2d6f 662d 6f72 6465  e to out-of-orde
-0000df40: 7220 6465 6c69 7665 7279 2e0a 0a23 2323  r delivery...###
-0000df50: 2047 6574 2073 7562 7363 7269 7074 696f   Get subscriptio
-0000df60: 6e20 696e 666f 0a0a 5468 6520 6067 6574  n info..The `get
-0000df70: 5f73 7562 7363 7269 7074 696f 6e5f 696e  _subscription_in
-0000df80: 666f 2829 6020 6d65 7468 6f64 2063 616e  fo()` method can
-0000df90: 2062 6520 7573 6564 2074 6f20 6765 7420   be used to get 
-0000dfa0: 696e 666f 726d 6174 696f 6e20 666f 7220  information for 
-0000dfb0: 610a 7065 7273 6973 7465 6e74 2073 7562  a.persistent sub
-0000dfc0: 7363 7269 7074 696f 6e2e 0a0a 5468 6973  scription...This
-0000dfd0: 206d 6574 686f 6420 6861 7320 6f6e 6520   method has one 
-0000dfe0: 7265 7175 6972 6564 2061 7267 756d 656e  required argumen
-0000dff0: 742c 2060 6772 6f75 705f 6e61 6d65 602c  t, `group_name`,
-0000e000: 2077 6869 6368 0a73 686f 756c 6420 6d61   which.should ma
-0000e010: 7463 6820 7468 6520 7661 6c75 6520 6f66  tch the value of
-0000e020: 2074 6865 2061 7267 756d 656e 7420 7573   the argument us
-0000e030: 6564 2077 6865 6e20 6361 6c6c 696e 6720  ed when calling 
-0000e040: 6063 7265 6174 655f 7375 6273 6372 6970  `create_subscrip
-0000e050: 7469 6f6e 2829 602e 0a0a 5468 6973 206d  tion()`...This m
-0000e060: 6574 686f 6420 616c 736f 2074 616b 6573  ethod also takes
-0000e070: 2061 6e20 6f70 7469 6f6e 616c 2060 7469   an optional `ti
-0000e080: 6d65 6f75 7460 2061 7267 756d 656e 742c  meout` argument,
-0000e090: 2074 6861 740a 6973 2065 7870 6563 7465   that.is expecte
-0000e0a0: 6420 746f 2062 6520 6120 5079 7468 6f6e  d to be a Python
-0000e0b0: 2060 666c 6f61 7460 2c20 7768 6963 6820   `float`, which 
-0000e0c0: 7365 7473 2061 2064 6561 646c 696e 650a  sets a deadline.
-0000e0d0: 666f 7220 7468 6520 636f 6d70 6c65 7469  for the completi
-0000e0e0: 6f6e 206f 6620 7468 6520 6752 5043 206f  on of the gRPC o
-0000e0f0: 7065 7261 7469 6f6e 2e0a 0a60 6060 7079  peration...```py
-0000e100: 7468 6f6e 0a73 7562 7363 7269 7074 696f  thon.subscriptio
-0000e110: 6e5f 696e 666f 203d 2063 6c69 656e 742e  n_info = client.
-0000e120: 6765 745f 7375 6273 6372 6970 7469 6f6e  get_subscription
-0000e130: 5f69 6e66 6f28 0a20 2020 2067 726f 7570  _info(.    group
-0000e140: 5f6e 616d 653d 6772 6f75 705f 6e61 6d65  _name=group_name
-0000e150: 2c0a 290a 6060 600a 0a54 6865 2072 6574  ,.).```..The ret
-0000e160: 7572 6e65 6420 7661 6c75 6520 6973 2061  urned value is a
-0000e170: 2060 5375 6273 6372 6970 7469 6f6e 496e   `SubscriptionIn
-0000e180: 666f 6020 6f62 6a65 6374 2e0a 0a23 2323  fo` object...###
-0000e190: 204c 6973 7420 7375 6273 6372 6970 7469   List subscripti
-0000e1a0: 6f6e 730a 0a54 6865 2060 6c69 7374 5f73  ons..The `list_s
-0000e1b0: 7562 7363 7269 7074 696f 6e73 2829 6020  ubscriptions()` 
-0000e1c0: 6d65 7468 6f64 2063 616e 2062 6520 7573  method can be us
-0000e1d0: 6564 2074 6f20 6765 7420 696e 666f 726d  ed to get inform
-0000e1e0: 6174 696f 6e20 666f 7220 616c 6c0a 6578  ation for all.ex
-0000e1f0: 6973 7469 6e67 2070 6572 7369 7374 656e  isting persisten
-0000e200: 7420 7375 6273 6372 6970 7469 6f6e 732e  t subscriptions.
-0000e210: 0a0a 5468 6973 206d 6574 686f 6420 7461  ..This method ta
-0000e220: 6b65 7320 616e 206f 7074 696f 6e61 6c20  kes an optional 
-0000e230: 6074 696d 656f 7574 6020 6172 6775 6d65  `timeout` argume
-0000e240: 6e74 2c20 7468 6174 0a69 7320 6578 7065  nt, that.is expe
-0000e250: 6374 6564 2074 6f20 6265 2061 2050 7974  cted to be a Pyt
-0000e260: 686f 6e20 6066 6c6f 6174 602c 2077 6869  hon `float`, whi
-0000e270: 6368 2073 6574 7320 6120 6465 6164 6c69  ch sets a deadli
-0000e280: 6e65 0a66 6f72 2074 6865 2063 6f6d 706c  ne.for the compl
-0000e290: 6574 696f 6e20 6f66 2074 6865 2067 5250  etion of the gRP
-0000e2a0: 4320 6f70 6572 6174 696f 6e2e 0a0a 6060  C operation...``
-0000e2b0: 6070 7974 686f 6e0a 7375 6273 6372 6970  `python.subscrip
-0000e2c0: 7469 6f6e 7320 3d20 636c 6965 6e74 2e6c  tions = client.l
-0000e2d0: 6973 745f 7375 6273 6372 6970 7469 6f6e  ist_subscription
-0000e2e0: 7328 290a 6060 600a 0a54 6865 2072 6574  s().```..The ret
-0000e2f0: 7572 6e65 6420 7661 6c75 6520 6973 2061  urned value is a
-0000e300: 206c 6973 7420 6f66 2060 5375 6273 6372   list of `Subscr
-0000e310: 6970 7469 6f6e 496e 666f 6020 6f62 6a65  iptionInfo` obje
-0000e320: 6374 732e 0a0a 2323 2320 4465 6c65 7465  cts...### Delete
-0000e330: 2073 7562 7363 7269 7074 696f 6e0a 0a54   subscription..T
-0000e340: 6865 2060 6465 6c65 7465 5f73 7562 7363  he `delete_subsc
-0000e350: 7269 7074 696f 6e28 2960 206d 6574 686f  ription()` metho
-0000e360: 6420 6361 6e20 6265 2075 7365 6420 746f  d can be used to
-0000e370: 2064 656c 6574 6520 6120 7065 7273 6973   delete a persis
-0000e380: 7465 6e74 0a73 7562 7363 7269 7074 696f  tent.subscriptio
-0000e390: 6e2e 0a0a 5468 6973 206d 6574 686f 6420  n...This method 
-0000e3a0: 6861 7320 6f6e 6520 7265 7175 6972 6564  has one required
-0000e3b0: 2061 7267 756d 656e 742c 2060 6772 6f75   argument, `grou
-0000e3c0: 705f 6e61 6d65 602c 2077 6869 6368 0a73  p_name`, which.s
-0000e3d0: 686f 756c 6420 6d61 7463 6820 7468 6520  hould match the 
-0000e3e0: 7661 6c75 6520 6f66 2061 7267 756d 656e  value of argumen
-0000e3f0: 7420 7573 6564 2077 6865 6e20 6361 6c6c  t used when call
-0000e400: 696e 6720 6063 7265 6174 655f 7375 6273  ing `create_subs
-0000e410: 6372 6970 7469 6f6e 2829 602e 0a0a 5468  cription()`...Th
-0000e420: 6973 206d 6574 686f 6420 616c 736f 2074  is method also t
-0000e430: 616b 6573 2061 6e20 6f70 7469 6f6e 616c  akes an optional
-0000e440: 2060 7469 6d65 6f75 7460 2061 7267 756d   `timeout` argum
-0000e450: 656e 742c 2074 6861 740a 6973 2065 7870  ent, that.is exp
-0000e460: 6563 7465 6420 746f 2062 6520 6120 5079  ected to be a Py
-0000e470: 7468 6f6e 2060 666c 6f61 7460 2c20 7768  thon `float`, wh
-0000e480: 6963 6820 7365 7473 2061 2064 6561 646c  ich sets a deadl
-0000e490: 696e 650a 666f 7220 7468 6520 636f 6d70  ine.for the comp
-0000e4a0: 6c65 7469 6f6e 206f 6620 7468 6520 6752  letion of the gR
-0000e4b0: 5043 206f 7065 7261 7469 6f6e 2e0a 0a60  PC operation...`
-0000e4c0: 6060 7079 7468 6f6e 0a63 6c69 656e 742e  ``python.client.
-0000e4d0: 6465 6c65 7465 5f73 7562 7363 7269 7074  delete_subscript
-0000e4e0: 696f 6e28 0a20 2020 2067 726f 7570 5f6e  ion(.    group_n
-0000e4f0: 616d 653d 6772 6f75 705f 6e61 6d65 2c0a  ame=group_name,.
-0000e500: 290a 6060 600a 0a23 2323 2043 7265 6174  ).```..### Creat
-0000e510: 6520 7374 7265 616d 2073 7562 7363 7269  e stream subscri
-0000e520: 7074 696f 6e0a 0a54 6865 2060 6372 6561  ption..The `crea
-0000e530: 7465 5f73 7472 6561 6d5f 7375 6273 6372  te_stream_subscr
-0000e540: 6970 7469 6f6e 2829 6020 6d65 7468 6f64  iption()` method
-0000e550: 2063 616e 2062 6520 7573 6564 2074 6f20   can be used to 
-0000e560: 6372 6561 7465 2061 2070 6572 7369 7374  create a persist
-0000e570: 656e 740a 7375 6273 6372 6970 7469 6f6e  ent.subscription
-0000e580: 2066 6f72 2061 2073 7472 6561 6d2e 0a0a   for a stream...
-0000e590: 5468 6973 206d 6574 686f 6420 6861 7320  This method has 
-0000e5a0: 7477 6f20 7265 7175 6972 6564 2061 7267  two required arg
-0000e5b0: 756d 656e 7473 2c20 6067 726f 7570 5f6e  uments, `group_n
-0000e5c0: 616d 6560 2061 6e64 2060 7374 7265 616d  ame` and `stream
-0000e5d0: 5f6e 616d 6560 2e20 5468 650a 6067 726f  _name`. The.`gro
-0000e5e0: 7570 5f6e 616d 6560 2061 7267 756d 656e  up_name` argumen
-0000e5f0: 7420 6e61 6d65 7320 7468 6520 6772 6f75  t names the grou
-0000e600: 7020 6f66 2063 6f6e 7375 6d65 7273 2074  p of consumers t
-0000e610: 6861 7420 7769 6c6c 2072 6563 6569 7665  hat will receive
-0000e620: 2065 7665 6e74 730a 6672 6f6d 2074 6869   events.from thi
-0000e630: 7320 7375 6273 6372 6970 7469 6f6e 2e20  s subscription. 
-0000e640: 5468 6520 6073 7472 6561 6d5f 6e61 6d65  The `stream_name
-0000e650: 6020 6172 6775 6d65 6e74 2073 7065 6369  ` argument speci
-0000e660: 6669 6573 2077 6869 6368 2073 7472 6561  fies which strea
-0000e670: 6d0a 7468 6520 7375 6273 6372 6970 7469  m.the subscripti
-0000e680: 6f6e 2077 696c 6c20 666f 6c6c 6f77 2e20  on will follow. 
-0000e690: 5468 6520 7661 6c75 6573 206f 6620 626f  The values of bo
-0000e6a0: 7468 2074 6865 7365 2061 7267 756d 656e  th these argumen
-0000e6b0: 7473 2061 7265 2065 7870 6563 7465 640a  ts are expected.
-0000e6c0: 746f 2062 6520 5079 7468 6f6e 2060 7374  to be Python `st
-0000e6d0: 7260 206f 626a 6563 7473 2e0a 0a54 6869  r` objects...Thi
-0000e6e0: 7320 6d65 7468 6f64 2068 6173 2061 6e20  s method has an 
-0000e6f0: 6f70 7469 6f6e 616c 2060 7374 7265 616d  optional `stream
-0000e700: 5f70 6f73 6974 696f 6e60 2061 7267 756d  _position` argum
-0000e710: 656e 742c 2077 6869 6368 2073 7065 6369  ent, which speci
-0000e720: 6669 6573 2061 0a73 7472 6561 6d20 706f  fies a.stream po
-0000e730: 7369 7469 6f6e 2066 726f 6d20 7768 6963  sition from whic
-0000e740: 6820 746f 2073 7562 7363 7269 6265 2e20  h to subscribe. 
-0000e750: 5468 6520 7265 636f 7264 6564 2065 7665  The recorded eve
-0000e760: 6e74 2061 7420 7468 6973 2073 7472 6561  nt at this strea
-0000e770: 6d0a 706f 7369 7469 6f6e 2077 696c 6c20  m.position will 
-0000e780: 6265 2072 6563 6569 7665 6420 7768 656e  be received when
-0000e790: 2072 6561 6469 6e67 2074 6865 2073 7562   reading the sub
-0000e7a0: 7363 7269 7074 696f 6e2e 0a0a 5468 6973  scription...This
-0000e7b0: 206d 6574 686f 6420 6861 7320 616e 206f   method has an o
-0000e7c0: 7074 696f 6e61 6c20 6066 726f 6d5f 656e  ptional `from_en
-0000e7d0: 6460 2061 7267 756d 656e 742c 2077 6869  d` argument, whi
-0000e7e0: 6368 2069 7320 6120 5079 7468 6f6e 2060  ch is a Python `
-0000e7f0: 626f 6f6c 602e 0a42 7920 6465 6661 756c  bool`..By defaul
-0000e800: 742c 2074 6865 2076 616c 7565 206f 6620  t, the value of 
-0000e810: 7468 6973 2061 7267 756d 656e 7420 6973  this argument is
-0000e820: 2046 616c 7365 2e20 4966 2074 6869 7320   False. If this 
-0000e830: 6172 6775 6d65 6e74 2069 7320 7365 740a  argument is set.
-0000e840: 746f 2061 2054 7275 6520 7661 6c75 652c  to a True value,
-0000e850: 2072 6561 6469 6e67 2066 726f 6d20 7468   reading from th
-0000e860: 6520 7375 6273 6372 6970 7469 6f6e 2077  e subscription w
-0000e870: 696c 6c20 7265 6365 6976 6520 6f6e 6c79  ill receive only
-0000e880: 2065 7665 6e74 730a 7265 636f 7264 6564   events.recorded
-0000e890: 2061 6674 6572 2074 6865 2073 7562 7363   after the subsc
-0000e8a0: 7269 7074 696f 6e20 7761 7320 6372 6561  ription was crea
-0000e8b0: 7465 642e 2054 6861 7420 6973 2c20 6974  ted. That is, it
-0000e8c0: 2069 7320 6e6f 7420 696e 636c 7573 6976   is not inclusiv
-0000e8d0: 650a 6f66 2074 6865 2063 7572 7265 6e74  e.of the current
-0000e8e0: 2073 7472 6561 6d20 706f 7369 7469 6f6e   stream position
-0000e8f0: 2e0a 0a54 6869 7320 6d65 7468 6f64 2061  ...This method a
-0000e900: 6c73 6f20 7461 6b65 7320 616e 206f 7074  lso takes an opt
-0000e910: 696f 6e61 6c20 6074 696d 656f 7574 6020  ional `timeout` 
-0000e920: 6172 6775 6d65 6e74 2c20 7468 6174 0a69  argument, that.i
-0000e930: 7320 6578 7065 6374 6564 2074 6f20 6265  s expected to be
-0000e940: 2061 2050 7974 686f 6e20 6066 6c6f 6174   a Python `float
-0000e950: 602c 2077 6869 6368 2073 6574 7320 6120  `, which sets a 
-0000e960: 6465 6164 6c69 6e65 0a66 6f72 2074 6865  deadline.for the
-0000e970: 2063 6f6d 706c 6574 696f 6e20 6f66 2074   completion of t
-0000e980: 6865 2067 5250 4320 6f70 6572 6174 696f  he gRPC operatio
-0000e990: 6e2e 0a0a 5468 6973 206d 6574 686f 6420  n...This method 
-0000e9a0: 646f 6573 206e 6f74 2072 6574 7572 6e20  does not return 
-0000e9b0: 6120 7661 6c75 652e 2045 7665 6e74 7320  a value. Events 
-0000e9c0: 6361 6e20 6265 2072 6563 6569 7665 6420  can be received 
-0000e9d0: 6279 2069 7465 7261 7469 6e67 0a6f 7665  by iterating.ove
-0000e9e0: 7220 7468 6520 7661 6c75 6520 7265 7475  r the value retu
-0000e9f0: 726e 6564 2062 7920 6361 6c6c 696e 6720  rned by calling 
-0000ea00: 6072 6561 645f 7374 7265 616d 5f73 7562  `read_stream_sub
-0000ea10: 7363 7269 7074 696f 6e28 2960 2028 7365  scription()` (se
-0000ea20: 6520 6265 6c6f 7729 2e0a 0a54 6865 2065  e below)...The e
-0000ea30: 7861 6d70 6c65 2062 656c 6f77 2063 7265  xample below cre
-0000ea40: 6174 6573 2061 2070 6572 7369 7374 656e  ates a persisten
-0000ea50: 7420 7374 7265 616d 2073 7562 7363 7269  t stream subscri
-0000ea60: 7074 696f 6e20 6672 6f6d 2074 6865 2073  ption from the s
-0000ea70: 7461 7274 206f 6620 7468 6520 7374 7265  tart of the stre
-0000ea80: 616d 2e0a 0a60 6060 7079 7468 6f6e 0a23  am...```python.#
-0000ea90: 2043 7265 6174 6520 6120 7065 7273 6973   Create a persis
-0000eaa0: 7465 6e74 2073 7472 6561 6d20 7375 6273  tent stream subs
-0000eab0: 6372 6970 7469 6f6e 2066 726f 6d20 7374  cription from st
-0000eac0: 6172 7420 6f66 2074 6865 2073 7472 6561  art of the strea
-0000ead0: 6d2e 0a67 726f 7570 5f6e 616d 6531 203d  m..group_name1 =
-0000eae0: 2066 2267 726f 7570 2d7b 7575 6964 3428   f"group-{uuid4(
-0000eaf0: 297d 220a 636c 6965 6e74 2e63 7265 6174  )}".client.creat
-0000eb00: 655f 7374 7265 616d 5f73 7562 7363 7269  e_stream_subscri
-0000eb10: 7074 696f 6e28 0a20 2020 2067 726f 7570  ption(.    group
-0000eb20: 5f6e 616d 653d 6772 6f75 705f 6e61 6d65  _name=group_name
-0000eb30: 312c 0a20 2020 2073 7472 6561 6d5f 6e61  1,.    stream_na
-0000eb40: 6d65 3d73 7472 6561 6d5f 6e61 6d65 322c  me=stream_name2,
-0000eb50: 0a29 0a60 6060 0a0a 5468 6520 6578 616d  .).```..The exam
-0000eb60: 706c 6520 6265 6c6f 7720 6372 6561 7465  ple below create
-0000eb70: 7320 6120 7065 7273 6973 7465 6e74 2073  s a persistent s
-0000eb80: 7472 6561 6d20 7375 6273 6372 6970 7469  tream subscripti
-0000eb90: 6f6e 2066 726f 6d20 6120 7374 7265 616d  on from a stream
-0000eba0: 2070 6f73 6974 696f 6e2e 0a0a 6060 6070   position...```p
-0000ebb0: 7974 686f 6e0a 2320 4372 6561 7465 2061  ython.# Create a
-0000ebc0: 2070 6572 7369 7374 656e 7420 7374 7265   persistent stre
-0000ebd0: 616d 2073 7562 7363 7269 7074 696f 6e20  am subscription 
-0000ebe0: 6672 6f6d 2061 2073 7472 6561 6d20 706f  from a stream po
-0000ebf0: 7369 7469 6f6e 2e0a 6772 6f75 705f 6e61  sition..group_na
-0000ec00: 6d65 3220 3d20 6622 6772 6f75 702d 7b75  me2 = f"group-{u
-0000ec10: 7569 6434 2829 7d22 0a63 6c69 656e 742e  uid4()}".client.
-0000ec20: 6372 6561 7465 5f73 7472 6561 6d5f 7375  create_stream_su
-0000ec30: 6273 6372 6970 7469 6f6e 280a 2020 2020  bscription(.    
-0000ec40: 6772 6f75 705f 6e61 6d65 3d67 726f 7570  group_name=group
-0000ec50: 5f6e 616d 6532 2c0a 2020 2020 7374 7265  _name2,.    stre
-0000ec60: 616d 5f6e 616d 653d 7374 7265 616d 5f6e  am_name=stream_n
-0000ec70: 616d 6532 2c0a 2020 2020 7374 7265 616d  ame2,.    stream
-0000ec80: 5f70 6f73 6974 696f 6e3d 320a 290a 6060  _position=2.).``
-0000ec90: 600a 0a54 6865 2065 7861 6d70 6c65 2062  `..The example b
-0000eca0: 656c 6f77 2063 7265 6174 6573 2061 2070  elow creates a p
-0000ecb0: 6572 7369 7374 656e 7420 7374 7265 616d  ersistent stream
-0000ecc0: 2073 7562 7363 7269 7074 696f 6e20 6672   subscription fr
-0000ecd0: 6f6d 2074 6865 2065 6e64 206f 6620 7468  om the end of th
-0000ece0: 6520 7374 7265 616d 2e0a 0a60 6060 7079  e stream...```py
-0000ecf0: 7468 6f6e 0a23 2043 7265 6174 6520 6120  thon.# Create a 
-0000ed00: 7065 7273 6973 7465 6e74 2073 7472 6561  persistent strea
-0000ed10: 6d20 7375 6273 6372 6970 7469 6f6e 2066  m subscription f
-0000ed20: 726f 6d20 656e 6420 6f66 2074 6865 2073  rom end of the s
-0000ed30: 7472 6561 6d2e 0a67 726f 7570 5f6e 616d  tream..group_nam
-0000ed40: 6533 203d 2066 2267 726f 7570 2d7b 7575  e3 = f"group-{uu
-0000ed50: 6964 3428 297d 220a 636c 6965 6e74 2e63  id4()}".client.c
-0000ed60: 7265 6174 655f 7374 7265 616d 5f73 7562  reate_stream_sub
-0000ed70: 7363 7269 7074 696f 6e28 0a20 2020 2067  scription(.    g
-0000ed80: 726f 7570 5f6e 616d 653d 6772 6f75 705f  roup_name=group_
-0000ed90: 6e61 6d65 332c 0a20 2020 2073 7472 6561  name3,.    strea
-0000eda0: 6d5f 6e61 6d65 3d73 7472 6561 6d5f 6e61  m_name=stream_na
-0000edb0: 6d65 322c 0a20 2020 2066 726f 6d5f 656e  me2,.    from_en
-0000edc0: 643d 5472 7565 0a29 0a60 6060 0a0a 2323  d=True.).```..##
-0000edd0: 2320 5265 6164 2073 7472 6561 6d20 7375  # Read stream su
-0000ede0: 6273 6372 6970 7469 6f6e 0a0a 5468 6520  bscription..The 
-0000edf0: 6072 6561 645f 7374 7265 616d 5f73 7562  `read_stream_sub
-0000ee00: 7363 7269 7074 696f 6e28 2960 206d 6574  scription()` met
-0000ee10: 686f 6420 6361 6e20 6265 2075 7365 6420  hod can be used 
-0000ee20: 746f 2063 7265 6174 6520 6120 7065 7273  to create a pers
-0000ee30: 6973 7465 6e74 0a73 7562 7363 7269 7074  istent.subscript
-0000ee40: 696f 6e20 666f 7220 6120 7374 7265 616d  ion for a stream
-0000ee50: 2e0a 0a54 6869 7320 6d65 7468 6f64 2068  ...This method h
-0000ee60: 6173 2074 776f 2072 6571 7569 7265 6420  as two required 
-0000ee70: 6172 6775 6d65 6e74 732c 2060 6772 6f75  arguments, `grou
-0000ee80: 705f 6e61 6d65 6020 616e 6420 6073 7472  p_name` and `str
-0000ee90: 6561 6d5f 6e61 6d65 602c 2077 6869 6368  eam_name`, which
-0000eea0: 0a73 686f 756c 6420 6d61 7463 6820 7468  .should match th
-0000eeb0: 6520 7661 6c75 6573 206f 6620 6172 6775  e values of argu
-0000eec0: 6d65 6e74 7320 7573 6564 2077 6865 6e20  ments used when 
-0000eed0: 6361 6c6c 696e 6720 6063 7265 6174 655f  calling `create_
-0000eee0: 7374 7265 616d 5f73 7562 7363 7269 7074  stream_subscript
-0000eef0: 696f 6e28 2960 2e0a 0a54 6869 7320 6d65  ion()`...This me
-0000ef00: 7468 6f64 2061 6c73 6f20 7461 6b65 7320  thod also takes 
-0000ef10: 616e 206f 7074 696f 6e61 6c20 6074 696d  an optional `tim
-0000ef20: 656f 7574 6020 6172 6775 6d65 6e74 2c20  eout` argument, 
-0000ef30: 7468 6174 0a69 7320 6578 7065 6374 6564  that.is expected
-0000ef40: 2074 6f20 6265 2061 2050 7974 686f 6e20   to be a Python 
-0000ef50: 6066 6c6f 6174 602c 2077 6869 6368 2073  `float`, which s
-0000ef60: 6574 7320 6120 6465 6164 6c69 6e65 0a66  ets a deadline.f
-0000ef70: 6f72 2074 6865 2063 6f6d 706c 6574 696f  or the completio
-0000ef80: 6e20 6f66 2074 6865 2067 5250 4320 6f70  n of the gRPC op
-0000ef90: 6572 6174 696f 6e2e 0a0a 4a75 7374 206c  eration...Just l
-0000efa0: 696b 6520 6072 6561 645f 7375 6273 6372  ike `read_subscr
-0000efb0: 6970 7469 6f6e 602c 2074 6869 7320 6d65  iption`, this me
-0000efc0: 7468 6f64 2072 6574 7572 6e73 2061 2032  thod returns a 2
-0000efd0: 2d74 7570 6c65 3a20 6120 2272 6561 6420  -tuple: a "read 
-0000efe0: 7265 7175 6573 7422 206f 626a 6563 740a  request" object.
-0000eff0: 616e 6420 6120 2272 6561 6420 7265 7370  and a "read resp
-0000f000: 6f6e 7365 2220 6f62 6a65 6374 2e0a 0a60  onse" object...`
-0000f010: 6060 7079 7468 6f6e 0a72 6561 645f 7265  ``python.read_re
-0000f020: 712c 2072 6561 645f 7265 7370 203d 2063  q, read_resp = c
-0000f030: 6c69 656e 742e 7265 6164 5f73 7472 6561  lient.read_strea
-0000f040: 6d5f 7375 6273 6372 6970 7469 6f6e 280a  m_subscription(.
-0000f050: 2020 2020 6772 6f75 705f 6e61 6d65 3d67      group_name=g
-0000f060: 726f 7570 5f6e 616d 6531 2c0a 2020 2020  roup_name1,.    
-0000f070: 7374 7265 616d 5f6e 616d 653d 7374 7265  stream_name=stre
-0000f080: 616d 5f6e 616d 6532 2c0a 290a 6060 600a  am_name2,.).```.
-0000f090: 0a54 6865 2065 7861 6d70 6c65 2062 656c  .The example bel
-0000f0a0: 6f77 2069 7465 7261 7465 7320 6f76 6572  ow iterates over
-0000f0b0: 2074 6865 2022 7265 6164 2072 6573 706f   the "read respo
-0000f0c0: 6e73 6522 206f 626a 6563 742c 2061 6e64  nse" object, and
-0000f0d0: 2063 616c 6c73 2060 6163 6b28 2960 0a6f   calls `ack()`.o
-0000f0e0: 6e20 7468 6520 2272 6561 6420 7265 7370  n the "read resp
-0000f0f0: 6f6e 7365 2220 6f62 6a65 6374 2e20 5468  onse" object. Th
-0000f100: 6520 666f 7220 6c6f 6f70 2062 7265 616b  e for loop break
-0000f110: 7320 7768 656e 2077 6520 6861 7665 2072  s when we have r
-0000f120: 6563 6569 7665 640a 7468 6520 6c61 7374  eceived.the last
-0000f130: 2065 7665 6e74 2069 6e20 7468 6520 7374   event in the st
-0000f140: 7265 616d 2c20 736f 2074 6861 7420 7765  ream, so that we
-0000f150: 2063 616e 2066 696e 6973 6820 7468 6520   can finish the 
-0000f160: 6578 616d 706c 6573 2069 6e20 7468 6973  examples in this
-0000f170: 0a64 6f63 756d 656e 7461 7469 6f6e 2e0a  .documentation..
-0000f180: 0a60 6060 7079 7468 6f6e 0a65 7665 6e74  .```python.event
-0000f190: 7320 3d20 5b5d 0a66 6f72 2065 7665 6e74  s = [].for event
-0000f1a0: 2069 6e20 7265 6164 5f72 6573 703a 0a20   in read_resp:. 
-0000f1b0: 2020 2065 7665 6e74 732e 6170 7065 6e64     events.append
-0000f1c0: 2865 7665 6e74 290a 0a20 2020 2023 2041  (event)..    # A
-0000f1d0: 636b 6e6f 776c 6564 6765 2074 6865 2072  cknowledge the r
-0000f1e0: 6563 6569 7665 6420 6576 656e 742e 0a20  eceived event.. 
-0000f1f0: 2020 2072 6561 645f 7265 712e 6163 6b28     read_req.ack(
-0000f200: 6576 656e 745f 6964 3d65 7665 6e74 2e69  event_id=event.i
-0000f210: 6429 0a0a 2020 2020 2320 4272 6561 6b20  d)..    # Break 
-0000f220: 7768 656e 2074 6865 206c 6173 7420 6576  when the last ev
-0000f230: 656e 7420 6861 7320 6265 656e 2072 6563  ent has been rec
-0000f240: 6569 7665 642e 0a20 2020 2069 6620 6576  eived..    if ev
-0000f250: 656e 742e 6964 203d 3d20 6576 656e 7431  ent.id == event1
-0000f260: 312e 6964 3a0a 2020 2020 2020 2020 6272  1.id:.        br
-0000f270: 6561 6b0a 6060 600a 0a57 6520 6361 6e20  eak.```..We can 
-0000f280: 6368 6563 6b20 7765 2072 6563 6569 7665  check we receive
-0000f290: 6420 616c 6c20 7468 6520 6576 656e 7473  d all the events
-0000f2a0: 2074 6861 7420 7765 7265 2061 7070 656e   that were appen
-0000f2b0: 6465 6420 746f 2060 7374 7265 616d 5f6e  ded to `stream_n
-0000f2c0: 616d 6532 600a 696e 2074 6865 2065 7861  ame2`.in the exa
-0000f2d0: 6d70 6c65 7320 6162 6f76 652e 0a0a 6060  mples above...``
-0000f2e0: 6070 7974 686f 6e0a 6173 7365 7274 206c  `python.assert l
-0000f2f0: 656e 2865 7665 6e74 7329 203d 3d20 340a  en(events) == 4.
-0000f300: 6173 7365 7274 2065 7665 6e74 735b 305d  assert events[0]
-0000f310: 2e73 7472 6561 6d5f 6e61 6d65 203d 3d20  .stream_name == 
-0000f320: 7374 7265 616d 5f6e 616d 6532 0a61 7373  stream_name2.ass
-0000f330: 6572 7420 6576 656e 7473 5b30 5d2e 6964  ert events[0].id
-0000f340: 203d 3d20 6576 656e 7434 2e69 640a 6173   == event4.id.as
-0000f350: 7365 7274 2065 7665 6e74 735b 315d 2e73  sert events[1].s
-0000f360: 7472 6561 6d5f 6e61 6d65 203d 3d20 7374  tream_name == st
-0000f370: 7265 616d 5f6e 616d 6532 0a61 7373 6572  ream_name2.asser
-0000f380: 7420 6576 656e 7473 5b31 5d2e 6964 203d  t events[1].id =
-0000f390: 3d20 6576 656e 7435 2e69 640a 6173 7365  = event5.id.asse
-0000f3a0: 7274 2065 7665 6e74 735b 325d 2e73 7472  rt events[2].str
-0000f3b0: 6561 6d5f 6e61 6d65 203d 3d20 7374 7265  eam_name == stre
-0000f3c0: 616d 5f6e 616d 6532 0a61 7373 6572 7420  am_name2.assert 
-0000f3d0: 6576 656e 7473 5b32 5d2e 6964 203d 3d20  events[2].id == 
-0000f3e0: 6576 656e 7436 2e69 640a 6173 7365 7274  event6.id.assert
-0000f3f0: 2065 7665 6e74 735b 335d 2e73 7472 6561   events[3].strea
-0000f400: 6d5f 6e61 6d65 203d 3d20 7374 7265 616d  m_name == stream
-0000f410: 5f6e 616d 6532 0a61 7373 6572 7420 6576  _name2.assert ev
-0000f420: 656e 7473 5b33 5d2e 6964 203d 3d20 6576  ents[3].id == ev
-0000f430: 656e 7431 312e 6964 0a60 6060 0a0a 2323  ent11.id.```..##
-0000f440: 2320 4765 7420 7374 7265 616d 2073 7562  # Get stream sub
-0000f450: 7363 7269 7074 696f 6e20 696e 666f 0a0a  scription info..
-0000f460: 5468 6520 6067 6574 5f73 7472 6561 6d5f  The `get_stream_
-0000f470: 7375 6273 6372 6970 7469 6f6e 5f69 6e66  subscription_inf
-0000f480: 6f28 2960 206d 6574 686f 6420 6361 6e20  o()` method can 
-0000f490: 6265 2075 7365 6420 746f 2067 6574 2069  be used to get i
-0000f4a0: 6e66 6f72 6d61 7469 6f6e 2066 6f72 2061  nformation for a
-0000f4b0: 0a70 6572 7369 7374 656e 7420 7375 6273  .persistent subs
-0000f4c0: 6372 6970 7469 6f6e 2066 6f72 2061 2073  cription for a s
-0000f4d0: 7472 6561 6d2e 0a0a 5468 6973 206d 6574  tream...This met
-0000f4e0: 686f 6420 6861 7320 7477 6f20 7265 7175  hod has two requ
-0000f4f0: 6972 6564 2061 7267 756d 656e 7473 2c20  ired arguments, 
-0000f500: 6067 726f 7570 5f6e 616d 6560 2061 6e64  `group_name` and
-0000f510: 2060 7374 7265 616d 5f6e 616d 6560 2c20   `stream_name`, 
-0000f520: 7768 6963 680a 7368 6f75 6c64 206d 6174  which.should mat
-0000f530: 6368 2074 6865 2076 616c 7565 7320 6f66  ch the values of
-0000f540: 2061 7267 756d 656e 7473 2075 7365 6420   arguments used 
-0000f550: 7768 656e 2063 616c 6c69 6e67 2060 6372  when calling `cr
-0000f560: 6561 7465 5f73 7472 6561 6d5f 7375 6273  eate_stream_subs
-0000f570: 6372 6970 7469 6f6e 2829 602e 0a0a 5468  cription()`...Th
-0000f580: 6973 206d 6574 686f 6420 616c 736f 2074  is method also t
-0000f590: 616b 6573 2061 6e20 6f70 7469 6f6e 616c  akes an optional
-0000f5a0: 2060 7469 6d65 6f75 7460 2061 7267 756d   `timeout` argum
-0000f5b0: 656e 742c 2074 6861 740a 6973 2065 7870  ent, that.is exp
-0000f5c0: 6563 7465 6420 746f 2062 6520 6120 5079  ected to be a Py
-0000f5d0: 7468 6f6e 2060 666c 6f61 7460 2c20 7768  thon `float`, wh
-0000f5e0: 6963 6820 7365 7473 2061 2064 6561 646c  ich sets a deadl
-0000f5f0: 696e 650a 666f 7220 7468 6520 636f 6d70  ine.for the comp
-0000f600: 6c65 7469 6f6e 206f 6620 7468 6520 6752  letion of the gR
-0000f610: 5043 206f 7065 7261 7469 6f6e 2e0a 0a60  PC operation...`
-0000f620: 6060 7079 7468 6f6e 0a73 7562 7363 7269  ``python.subscri
-0000f630: 7074 696f 6e5f 696e 666f 203d 2063 6c69  ption_info = cli
-0000f640: 656e 742e 6765 745f 7374 7265 616d 5f73  ent.get_stream_s
-0000f650: 7562 7363 7269 7074 696f 6e5f 696e 666f  ubscription_info
-0000f660: 280a 2020 2020 6772 6f75 705f 6e61 6d65  (.    group_name
-0000f670: 3d67 726f 7570 5f6e 616d 6531 2c0a 2020  =group_name1,.  
-0000f680: 2020 7374 7265 616d 5f6e 616d 653d 7374    stream_name=st
-0000f690: 7265 616d 5f6e 616d 6532 2c0a 290a 6060  ream_name2,.).``
-0000f6a0: 600a 0a54 6865 2072 6574 7572 6e65 6420  `..The returned 
-0000f6b0: 7661 6c75 6520 6973 2061 2060 5375 6273  value is a `Subs
-0000f6c0: 6372 6970 7469 6f6e 496e 666f 6020 6f62  criptionInfo` ob
-0000f6d0: 6a65 6374 2e0a 0a23 2323 204c 6973 7420  ject...### List 
-0000f6e0: 7374 7265 616d 2073 7562 7363 7269 7074  stream subscript
-0000f6f0: 696f 6e73 0a0a 5468 6520 606c 6973 745f  ions..The `list_
-0000f700: 7374 7265 616d 5f73 7562 7363 7269 7074  stream_subscript
-0000f710: 696f 6e73 2829 6020 6d65 7468 6f64 2063  ions()` method c
-0000f720: 616e 2062 6520 7573 6564 2074 6f20 6765  an be used to ge
-0000f730: 7420 696e 666f 726d 6174 696f 6e20 666f  t information fo
-0000f740: 7220 616c 6c0a 7468 6520 7065 7273 6973  r all.the persis
-0000f750: 7465 6e74 2073 7562 7363 7269 7074 696f  tent subscriptio
-0000f760: 6e73 2066 6f72 2061 2073 7472 6561 6d2e  ns for a stream.
-0000f770: 0a0a 5468 6973 206d 6574 686f 6420 6861  ..This method ha
-0000f780: 7320 6f6e 6520 7265 7175 6972 6564 2061  s one required a
-0000f790: 7267 756d 656e 742c 2060 7374 7265 616d  rgument, `stream
-0000f7a0: 5f6e 616d 6560 2e0a 0a54 6869 7320 6d65  _name`...This me
-0000f7b0: 7468 6f64 2061 6c73 6f20 7461 6b65 7320  thod also takes 
-0000f7c0: 616e 206f 7074 696f 6e61 6c20 6074 696d  an optional `tim
-0000f7d0: 656f 7574 6020 6172 6775 6d65 6e74 2c20  eout` argument, 
-0000f7e0: 7468 6174 0a69 7320 6578 7065 6374 6564  that.is expected
-0000f7f0: 2074 6f20 6265 2061 2050 7974 686f 6e20   to be a Python 
-0000f800: 6066 6c6f 6174 602c 2077 6869 6368 2073  `float`, which s
-0000f810: 6574 7320 6120 6465 6164 6c69 6e65 0a66  ets a deadline.f
-0000f820: 6f72 2074 6865 2063 6f6d 706c 6574 696f  or the completio
-0000f830: 6e20 6f66 2074 6865 2067 5250 4320 6f70  n of the gRPC op
-0000f840: 6572 6174 696f 6e2e 0a0a 6060 6070 7974  eration...```pyt
-0000f850: 686f 6e0a 7375 6273 6372 6970 7469 6f6e  hon.subscription
-0000f860: 7320 3d20 636c 6965 6e74 2e6c 6973 745f  s = client.list_
-0000f870: 7374 7265 616d 5f73 7562 7363 7269 7074  stream_subscript
-0000f880: 696f 6e73 280a 2020 2020 7374 7265 616d  ions(.    stream
-0000f890: 5f6e 616d 653d 7374 7265 616d 5f6e 616d  _name=stream_nam
-0000f8a0: 6532 2c0a 290a 6060 600a 0a54 6865 2072  e2,.).```..The r
-0000f8b0: 6574 7572 6e65 6420 7661 6c75 6520 6973  eturned value is
-0000f8c0: 2061 206c 6973 7420 6f66 2060 5375 6273   a list of `Subs
-0000f8d0: 6372 6970 7469 6f6e 496e 666f 6020 6f62  criptionInfo` ob
-0000f8e0: 6a65 6374 732e 0a0a 2323 2320 4465 6c65  jects...### Dele
-0000f8f0: 7465 2073 7472 6561 6d20 7375 6273 6372  te stream subscr
-0000f900: 6970 7469 6f6e 0a0a 5468 6520 6064 656c  iption..The `del
-0000f910: 6574 655f 7374 7265 616d 5f73 7562 7363  ete_stream_subsc
-0000f920: 7269 7074 696f 6e28 2960 206d 6574 686f  ription()` metho
-0000f930: 6420 6361 6e20 6265 2075 7365 6420 746f  d can be used to
-0000f940: 2064 656c 6574 6520 6120 7065 7273 6973   delete a persis
-0000f950: 7465 6e74 0a73 7562 7363 7269 7074 696f  tent.subscriptio
-0000f960: 6e20 666f 7220 6120 7374 7265 616d 2e0a  n for a stream..
-0000f970: 0a54 6869 7320 6d65 7468 6f64 2068 6173  .This method has
-0000f980: 2074 776f 2072 6571 7569 7265 6420 6172   two required ar
-0000f990: 6775 6d65 6e74 732c 2060 6772 6f75 705f  guments, `group_
-0000f9a0: 6e61 6d65 6020 616e 6420 6073 7472 6561  name` and `strea
-0000f9b0: 6d5f 6e61 6d65 602c 2077 6869 6368 0a73  m_name`, which.s
-0000f9c0: 686f 756c 6420 6d61 7463 6820 7468 6520  hould match the 
-0000f9d0: 7661 6c75 6573 206f 6620 6172 6775 6d65  values of argume
-0000f9e0: 6e74 7320 7573 6564 2077 6865 6e20 6361  nts used when ca
-0000f9f0: 6c6c 696e 6720 6063 7265 6174 655f 7374  lling `create_st
-0000fa00: 7265 616d 5f73 7562 7363 7269 7074 696f  ream_subscriptio
-0000fa10: 6e28 2960 2e0a 0a54 6869 7320 6d65 7468  n()`...This meth
-0000fa20: 6f64 2061 6c73 6f20 7461 6b65 7320 616e  od also takes an
-0000fa30: 206f 7074 696f 6e61 6c20 6074 696d 656f   optional `timeo
-0000fa40: 7574 6020 6172 6775 6d65 6e74 2c20 7468  ut` argument, th
-0000fa50: 6174 0a69 7320 6578 7065 6374 6564 2074  at.is expected t
-0000fa60: 6f20 6265 2061 2050 7974 686f 6e20 6066  o be a Python `f
-0000fa70: 6c6f 6174 602c 2077 6869 6368 2073 6574  loat`, which set
-0000fa80: 7320 6120 6465 6164 6c69 6e65 0a66 6f72  s a deadline.for
-0000fa90: 2074 6865 2063 6f6d 706c 6574 696f 6e20   the completion 
-0000faa0: 6f66 2074 6865 2067 5250 4320 6f70 6572  of the gRPC oper
-0000fab0: 6174 696f 6e2e 0a0a 6060 6070 7974 686f  ation...```pytho
-0000fac0: 6e0a 636c 6965 6e74 2e64 656c 6574 655f  n.client.delete_
-0000fad0: 7374 7265 616d 5f73 7562 7363 7269 7074  stream_subscript
-0000fae0: 696f 6e28 0a20 2020 2067 726f 7570 5f6e  ion(.    group_n
-0000faf0: 616d 653d 6772 6f75 705f 6e61 6d65 312c  ame=group_name1,
-0000fb00: 0a20 2020 2073 7472 6561 6d5f 6e61 6d65  .    stream_name
-0000fb10: 3d73 7472 6561 6d5f 6e61 6d65 322c 0a29  =stream_name2,.)
-0000fb20: 0a60 6060 0a0a 2323 2043 6f6e 6e65 6374  .```..## Connect
-0000fb30: 696f 6e0a 0a23 2323 2052 6563 6f6e 6e65  ion..### Reconne
-0000fb40: 6374 0a0a 5468 6520 6072 6563 6f6e 6e65  ct..The `reconne
-0000fb50: 6374 2829 6020 6d65 7468 6f64 2063 616e  ct()` method can
-0000fb60: 2062 6520 7573 6564 2074 6f20 6d61 6e75   be used to manu
-0000fb70: 616c 6c79 2072 6563 6f6e 6e65 6374 2074  ally reconnect t
-0000fb80: 6865 2063 6c69 656e 7420 746f 2061 0a73  he client to a.s
-0000fb90: 7569 7461 626c 6520 4576 656e 7453 746f  uitable EventSto
-0000fba0: 7265 4442 206e 6f64 652e 2054 6869 7320  reDB node. This 
-0000fbb0: 6d65 7468 6f64 2075 7365 7320 7468 6520  method uses the 
-0000fbc0: 7361 6d65 2072 6f75 7469 6e65 2c20 666f  same routine, fo
-0000fbd0: 7220 6469 7363 6f76 6572 696e 6720 7468  r discovering th
-0000fbe0: 650a 636c 7573 7465 7220 6e6f 6465 7320  e.cluster nodes 
-0000fbf0: 616e 6420 636f 6e6e 6563 7469 6e67 2074  and connecting t
-0000fc00: 6f20 6120 7375 6974 6162 6c65 206e 6f64  o a suitable nod
-0000fc10: 6520 6163 636f 7264 696e 6720 746f 2074  e according to t
-0000fc20: 6865 206e 6f64 6520 7072 6566 6572 656e  he node preferen
-0000fc30: 6365 0a73 7065 6369 6669 6564 2069 6e20  ce.specified in 
-0000fc40: 7468 6520 636f 6e6e 6563 7469 6f6e 2073  the connection s
-0000fc50: 7472 696e 672c 2074 6861 7420 6973 2075  tring, that is u
-0000fc60: 7365 6420 7768 656e 2074 6865 2063 6c69  sed when the cli
-0000fc70: 656e 7420 6973 0a69 6e73 7461 6e74 6961  ent is.instantia
-0000fc80: 7465 642e 2054 6869 7320 6d65 7468 6f64  ted. This method
-0000fc90: 2069 7320 7468 7265 6164 2d73 6166 652c   is thread-safe,
-0000fca0: 2061 6e64 2069 7420 6973 2022 636f 6e73   and it is "cons
-0000fcb0: 6572 7661 7469 7665 220a 696e 2074 6861  ervative".in tha
-0000fcc0: 7420 6f6e 6c79 206f 6e65 2072 6563 6f6e  t only one recon
-0000fcd0: 6e65 6374 696f 6e20 7769 6c6c 206f 6363  nection will occ
-0000fce0: 7572 2e20 436f 6e63 7572 7265 6e74 2061  ur. Concurrent a
-0000fcf0: 7474 656d 7074 7320 746f 2072 6563 6f6e  ttempts to recon
-0000fd00: 6e65 6374 0a77 696c 6c20 626c 6f63 6b20  nect.will block 
-0000fd10: 756e 7469 6c20 7468 6520 636c 6965 6e74  until the client
-0000fd20: 2068 6173 2072 6563 6f6e 6e65 6374 6564   has reconnected
-0000fd30: 2073 7563 6365 7373 6675 6c6c 792c 2061   successfully, a
-0000fd40: 6e64 2074 6865 6e20 7468 6579 2077 696c  nd then they wil
-0000fd50: 6c0a 616c 6c20 7265 7475 726e 206e 6f72  l.all return nor
-0000fd60: 6d61 6c6c 792e 0a0a 6060 6070 7974 686f  mally...```pytho
-0000fd70: 6e0a 636c 6965 6e74 2e72 6563 6f6e 6e65  n.client.reconne
-0000fd80: 6374 2829 0a60 6060 0a0a 416e 2065 7861  ct().```..An exa
-0000fd90: 6d70 6c65 206f 6620 7768 656e 2069 7420  mple of when it 
-0000fda0: 6d69 6768 7420 6265 2064 6573 6972 6162  might be desirab
-0000fdb0: 6c65 2074 6f20 7265 636f 6e6e 6563 7420  le to reconnect 
-0000fdc0: 6d61 6e75 616c 6c79 2069 7320 7768 656e  manually is when
-0000fdd0: 2028 666f 7220 7065 7266 6f72 6d61 6e63   (for performanc
-0000fde0: 650a 7265 6173 6f6e 7329 2074 6865 206e  e.reasons) the n
-0000fdf0: 6f64 6520 7072 6566 6572 656e 6365 2069  ode preference i
-0000fe00: 7320 666f 7220 7468 6520 636c 6965 6e74  s for the client
-0000fe10: 2074 6f20 6265 2063 6f6e 6e65 6374 6564   to be connected
-0000fe20: 2074 6f20 6120 666f 6c6c 6f77 6572 206e   to a follower n
-0000fe30: 6f64 6520 696e 2074 6865 0a63 6c75 7374  ode in the.clust
-0000fe40: 6572 2c20 616e 642c 2061 6674 6572 2061  er, and, after a
-0000fe50: 2063 6c75 7374 6572 206c 6561 6465 7220   cluster leader 
-0000fe60: 656c 6563 7469 6f6e 2c20 7468 6520 666f  election, the fo
-0000fe70: 6c6c 6f77 6572 206e 6f64 6520 6265 636f  llower node beco
-0000fe80: 6d65 7320 6120 6c65 6164 6572 206e 6f64  mes a leader nod
-0000fe90: 652e 0a52 6563 6f6e 6e65 6374 696e 6720  e..Reconnecting 
-0000fea0: 746f 2061 2066 6f6c 6c6f 7765 7220 6e6f  to a follower no
-0000feb0: 6465 2069 6e20 7468 6973 2063 6173 6520  de in this case 
-0000fec0: 6973 2063 7572 7265 6e74 6c79 2062 6579  is currently bey
-0000fed0: 6f6e 6420 7468 6520 6361 7061 6269 6c69  ond the capabili
-0000fee0: 7469 6573 206f 660a 7468 6973 2063 6c69  ties of.this cli
-0000fef0: 656e 742c 2062 7574 2074 6869 7320 6265  ent, but this be
-0000ff00: 6861 7669 6f72 206d 6967 6874 2062 6520  havior might be 
-0000ff10: 696d 706c 656d 656e 7465 6420 696e 2061  implemented in a
-0000ff20: 2066 7574 7572 6520 7265 6c65 6173 652e   future release.
-0000ff30: 0a0a 506c 6561 7365 206e 6f74 652c 2061  ..Please note, a
-0000ff40: 6c6c 2074 6865 2063 6c69 656e 7420 6d65  ll the client me
-0000ff50: 7468 6f64 7320 7573 6520 616e 2060 4061  thods use an `@a
-0000ff60: 7574 6f72 6563 6f6e 6e65 6374 6020 6465  utoreconnect` de
-0000ff70: 636f 7261 746f 7220 2877 6869 6368 2063  corator (which c
-0000ff80: 616c 6c73 2074 6865 0a60 7265 636f 6e6e  alls the.`reconn
-0000ff90: 6563 7428 2960 206d 6574 686f 6429 2061  ect()` method) a
-0000ffa0: 6e64 2061 2060 4072 6574 7279 6020 6465  nd a `@retry` de
-0000ffb0: 636f 7261 746f 7220 7468 6174 2077 696c  corator that wil
-0000ffc0: 6c20 7265 7472 7920 6f70 6572 6174 696f  l retry operatio
-0000ffd0: 6e73 2074 6861 7420 6661 696c 0a64 7565  ns that fail.due
-0000ffe0: 2074 6f20 636f 6e6e 6563 7469 7669 7479   to connectivity
-0000fff0: 2069 7373 7565 732e 2054 6869 7320 6d65   issues. This me
-00010000: 616e 732c 2066 6f72 2065 7861 6d70 6c65  ans, for example
-00010010: 2c20 7468 6174 2077 6865 6e20 7468 6520  , that when the 
-00010020: 6e6f 6465 2070 7265 6665 7265 6e63 650a  node preference.
-00010030: 6973 2066 6f72 2074 6865 2063 6c69 656e  is for the clien
-00010040: 7420 746f 2062 6520 636f 6e6e 6563 7465  t to be connecte
-00010050: 6420 746f 2061 206c 6561 6465 7220 2877  d to a leader (w
-00010060: 6869 6368 2069 7320 7468 6520 6465 6661  hich is the defa
-00010070: 756c 7429 2061 6e64 2077 6865 6e2c 2061  ult) and when, a
-00010080: 6674 6572 2061 0a63 6c75 7374 6572 206c  fter a.cluster l
-00010090: 6561 6465 7220 656c 6563 7469 6f6e 2c20  eader election, 
-000100a0: 7468 6520 6e6f 6465 2074 6f20 7768 6963  the node to whic
-000100b0: 6820 7468 6520 636c 6965 6e74 2069 7320  h the client is 
-000100c0: 636f 6e6e 6563 7465 6420 6265 636f 6d65  connected become
-000100d0: 7320 6120 666f 6c6c 6f77 6572 2c0a 736f  s a follower,.so
-000100e0: 2074 6861 7420 7772 6974 6520 6f70 6572   that write oper
-000100f0: 6174 696f 6e73 2077 696c 6c20 6265 6769  ations will begi
-00010100: 6e20 746f 2066 6169 6c20 6265 6361 7573  n to fail becaus
-00010110: 6520 7468 6520 636c 6965 6e74 2069 7320  e the client is 
-00010120: 6e6f 206c 6f6e 6765 7220 636f 6e6e 6563  no longer connec
-00010130: 7465 640a 746f 2061 206c 6561 6465 722c  ted.to a leader,
-00010140: 2074 6865 6e20 7468 6520 636c 6965 6e74   then the client
-00010150: 2077 696c 6c20 6175 746f 6d61 7469 6361   will automatica
-00010160: 6c6c 7920 7265 636f 6e6e 6563 7420 746f  lly reconnect to
-00010170: 2074 6865 206e 6577 206c 6561 6465 7220   the new leader 
-00010180: 616e 6420 616c 736f 0a74 6865 2063 6c69  and also.the cli
-00010190: 656e 7420 7769 6c6c 2072 6574 7279 2074  ent will retry t
-000101a0: 6865 2066 6169 6c65 6420 7772 6974 6520  he failed write 
-000101b0: 6f70 6572 6174 696f 6e73 2e20 5468 6520  operations. The 
-000101c0: 636c 6965 6e74 2061 6c73 6f20 7769 6c6c  client also will
-000101d0: 2072 6563 6f6e 6e65 6374 0a61 6363 6f72   reconnect.accor
-000101e0: 6469 6e67 2074 6f20 7468 6520 6e6f 6465  ding to the node
-000101f0: 2070 7265 6665 7265 6e63 6520 7768 656e   preference when
-00010200: 2074 6865 7265 2061 7265 2063 6f6e 6e65   there are conne
-00010210: 6374 6976 6974 7920 6973 7375 6573 2063  ctivity issues c
-00010220: 6175 7369 6e67 2072 6561 640a 6f70 6572  ausing read.oper
-00010230: 6174 696f 6e73 2074 6f20 6661 696c 2077  ations to fail w
-00010240: 6974 6820 7468 6520 6375 7272 656e 7420  ith the current 
-00010250: 636f 6e6e 6563 7469 6f6e 2e0a 0a50 6c65  connection...Ple
-00010260: 6173 6520 616c 736f 206e 6f74 652c 2061  ase also note, a
-00010270: 6e20 6576 656e 742d 7072 6f63 6573 7369  n event-processi
-00010280: 6e67 2063 6f6d 706f 6e65 6e74 2074 6861  ng component tha
-00010290: 7420 7573 6573 2061 2063 6174 6368 2d75  t uses a catch-u
-000102a0: 7020 7375 6273 6372 6970 7469 6f6e 2077  p subscription w
-000102b0: 696c 6c0a 6e65 6564 2074 6f20 6265 206d  ill.need to be m
-000102c0: 6f6e 6974 6f72 6564 2066 6f72 2065 7272  onitored for err
-000102d0: 6f72 732c 2061 6e64 2c20 6966 2069 7420  ors, and, if it 
-000102e0: 6661 696c 7320 6166 7465 7220 7468 6520  fails after the 
-000102f0: 7375 6273 6372 6970 7469 6f6e 2073 7461  subscription sta
-00010300: 7274 6564 2c20 6974 0a77 696c 6c20 6e65  rted, it.will ne
-00010310: 6564 2074 6f20 6265 2072 6573 7461 7274  ed to be restart
-00010320: 6564 2066 726f 6d20 7468 6520 6c61 7374  ed from the last
-00010330: 2073 6176 6564 2063 6f6d 6d69 7420 706f   saved commit po
-00010340: 7369 7469 6f6e 2e20 496e 2074 6869 7320  sition. In this 
-00010350: 6361 7365 2c20 7468 650a 636c 6965 6e74  case, the.client
-00010360: 2077 696c 6c20 6175 746f 6d61 7469 6361   will automatica
-00010370: 6c6c 7920 7265 636f 6e6e 6563 7420 746f  lly reconnect to
-00010380: 2061 206e 6f64 6520 696e 2074 6865 2063   a node in the c
-00010390: 6c75 7374 6572 2077 6865 6e20 7468 6520  luster when the 
-000103a0: 7375 6273 6571 7565 6e74 2063 616c 6c0a  subsequent call.
-000103b0: 746f 2073 7461 7274 2061 2063 6174 6368  to start a catch
-000103c0: 2d75 7020 7375 6273 6372 6970 7469 6f6e  -up subscription
-000103d0: 2069 7320 6d61 6465 2e20 596f 7520 6a75   is made. You ju
-000103e0: 7374 206e 6565 6420 746f 2063 6174 6368  st need to catch
-000103f0: 2074 6865 2065 7272 6f72 2c20 7265 6164   the error, read
-00010400: 0a74 6865 206c 6173 7420 7361 7665 6420  .the last saved 
-00010410: 636f 6d6d 6974 2070 6f73 6974 696f 6e2c  commit position,
-00010420: 2061 6e64 2072 6573 7461 7274 2074 6865   and restart the
-00010430: 2065 7665 6e74 2070 726f 6365 7373 696e   event processin
-00010440: 672c 2075 7369 6e67 2074 6865 2073 616d  g, using the sam
-00010450: 650a 6045 5344 4243 6c69 656e 7460 2069  e.`ESDBClient` i
-00010460: 6e73 7461 6e63 652c 2062 7574 2077 6974  nstance, but wit
-00010470: 6820 6120 6e65 7720 6361 6c6c 2074 6f20  h a new call to 
-00010480: 6073 7562 7363 7269 6265 5f61 6c6c 5f65  `subscribe_all_e
-00010490: 7665 6e74 7328 2960 2e0a 0a0a 2323 2320  vents()`....### 
-000104a0: 436c 6f73 650a 0a54 6865 2060 636c 6f73  Close..The `clos
-000104b0: 6528 2960 206d 6574 686f 6420 6361 6e20  e()` method can 
-000104c0: 6265 2075 7365 6420 746f 2063 6c65 616e  be used to clean
-000104d0: 6c79 2063 6c6f 7365 2074 6865 2067 5250  ly close the gRP
-000104e0: 4320 636f 6e6e 6563 7469 6f6e 2e0a 0a60  C connection...`
-000104f0: 6060 7079 7468 6f6e 0a63 6c69 656e 742e  ``python.client.
-00010500: 636c 6f73 6528 290a 6060 600a 0a23 2320  close().```..## 
-00010510: 4e6f 7465 730a 0a23 2323 2043 6f6e 6e65  Notes..### Conne
-00010520: 6374 696f 6e20 7374 7269 6e67 730a 0a54  ction strings..T
-00010530: 6865 2045 7665 6e74 5374 6f72 6544 4220  he EventStoreDB 
-00010540: 636f 6e6e 6563 7469 6f6e 2073 7472 696e  connection strin
-00010550: 6720 6973 2061 2055 5249 2074 6861 7420  g is a URI that 
-00010560: 636f 6e66 6f72 6d73 2077 6974 6820 6f6e  conforms with on
-00010570: 6520 6f66 2074 776f 2070 6f73 7369 626c  e of two possibl
-00010580: 650a 7363 6865 6d65 732c 2065 6974 6865  e.schemes, eithe
-00010590: 7220 7468 6520 2265 7364 6222 2073 6368  r the "esdb" sch
-000105a0: 656d 6520 6f72 2074 6865 2022 6573 6462  eme or the "esdb
-000105b0: 2b64 6973 636f 7665 7222 2073 6368 656d  +discover" schem
-000105c0: 652e 2054 6865 2073 796e 7461 7820 616e  e. The syntax an
-000105d0: 640a 7365 6d61 6e74 6963 7320 6f66 2074  d.semantics of t
-000105e0: 6865 2045 7665 6e74 5374 6f72 6544 4220  he EventStoreDB 
-000105f0: 5552 4920 7363 6865 6d65 7320 6172 6520  URI schemes are 
-00010600: 6578 706c 6169 6e65 6420 6265 6c6f 772e  explained below.
-00010610: 2054 6865 2073 796e 7461 7820 6973 0a64   The syntax is.d
-00010620: 6566 696e 6564 2075 7369 6e67 205b 4542  efined using [EB
-00010630: 4e46 5d28 6874 7470 733a 2f2f 656e 2e77  NF](https://en.w
-00010640: 696b 6970 6564 6961 2e6f 7267 2f77 696b  ikipedia.org/wik
-00010650: 692f 4578 7465 6e64 6564 5f42 6163 6b75  i/Extended_Backu
-00010660: 73e2 8093 4e61 7572 5f66 6f72 6d29 2e0a  s...Naur_form)..
-00010670: 0a54 6865 2022 6573 6462 2220 5552 4920  .The "esdb" URI 
-00010680: 7363 6865 6d65 2063 616e 2062 6520 6465  scheme can be de
-00010690: 6669 6e65 6420 696e 2074 6865 2066 6f6c  fined in the fol
-000106a0: 6c6f 7769 6e67 2077 6179 2e0a 0a20 2020  lowing way...   
-000106b0: 2065 7364 622d 7572 6920 3d20 2265 7364   esdb-uri = "esd
-000106c0: 623a 2f2f 2220 2c20 5b20 7573 6572 2d69  b://" , [ user-i
-000106d0: 6e66 6f20 2c20 2240 2220 5d20 2c20 6772  nfo , "@" ] , gr
-000106e0: 7063 2d74 6172 6765 742c 207b 2022 2c22  pc-target, { ","
-000106f0: 202c 2067 7270 632d 7461 7267 6574 207d   , grpc-target }
-00010700: 202c 205b 2022 3f22 202c 2071 7565 7279   , [ "?" , query
-00010710: 2d73 7472 696e 6720 5d20 3b0a 0a49 6e20  -string ] ;..In 
-00010720: 7468 6520 2265 7364 6222 2055 5249 2073  the "esdb" URI s
-00010730: 6368 656d 652c 2061 6674 6572 2074 6865  cheme, after the
-00010740: 206f 7074 696f 6e61 6c20 7573 6572 2069   optional user i
-00010750: 6e66 6f20 7374 7269 6e67 2c20 7468 6572  nfo string, ther
-00010760: 6520 6d75 7374 2062 6520 6174 206c 6561  e must be at lea
-00010770: 7374 0a6f 6e65 2067 5250 4320 7461 7267  st.one gRPC targ
-00010780: 6574 2e20 4966 2074 6865 7265 2061 7265  et. If there are
-00010790: 2073 6576 6572 616c 2067 5250 4320 7461   several gRPC ta
-000107a0: 7267 6574 732c 2074 6865 7920 6d75 7374  rgets, they must
-000107b0: 2062 6520 7365 7061 7261 7465 6420 6672   be separated fr
-000107c0: 6f6d 2065 6163 680a 6f74 6865 7220 7769  om each.other wi
-000107d0: 7468 2074 6865 2022 2c22 2063 6861 7261  th the "," chara
-000107e0: 6374 6572 2e20 4561 6368 2067 5250 4320  cter. Each gRPC 
-000107f0: 7461 7267 6574 2073 686f 756c 6420 696e  target should in
-00010800: 6469 6361 7465 2061 6e20 4576 656e 7453  dicate an EventS
-00010810: 746f 7265 4442 2067 5250 430a 7365 7276  toreDB gRPC.serv
-00010820: 6572 2073 6f63 6b65 742c 2062 7920 7370  er socket, by sp
-00010830: 6563 6966 7969 6e67 2061 2068 6f73 7420  ecifying a host 
-00010840: 616e 6420 6120 706f 7274 206e 756d 6265  and a port numbe
-00010850: 7220 7365 7061 7261 7465 6420 7769 7468  r separated with
-00010860: 2074 6865 2022 3a22 2063 6861 7261 6374   the ":" charact
-00010870: 6572 2e0a 5468 6520 686f 7374 206d 6179  er..The host may
-00010880: 2062 6520 6120 686f 7374 6e61 6d65 2074   be a hostname t
-00010890: 6861 7420 6361 6e20 6265 2072 6573 6f6c  hat can be resol
-000108a0: 7665 6420 746f 2061 6e20 4950 2061 6464  ved to an IP add
-000108b0: 7265 7373 2c20 6f72 2061 6e20 4950 2061  ress, or an IP a
-000108c0: 6464 7265 7373 2e0a 0a20 2020 2067 7270  ddress...    grp
-000108d0: 632d 7461 7267 6574 203d 2028 2068 6f73  c-target = ( hos
-000108e0: 746e 616d 6520 7c20 6970 2d61 6464 7265  tname | ip-addre
-000108f0: 7373 2029 202c 2022 3a22 202c 2070 6f72  ss ) , ":" , por
-00010900: 742d 6e75 6d62 6572 203b 0a0a 0a54 6865  t-number ;...The
-00010910: 2022 6573 6462 2b64 6973 636f 7665 7222   "esdb+discover"
-00010920: 2055 5249 2073 6368 656d 6520 6361 6e20   URI scheme can 
-00010930: 6265 2064 6566 696e 6564 2069 6e20 7468  be defined in th
-00010940: 6520 666f 6c6c 6f77 696e 6720 7761 792e  e following way.
-00010950: 0a0a 2020 2020 6573 6462 2d64 6973 636f  ..    esdb-disco
-00010960: 7665 722d 7572 6920 3d20 2265 7364 622b  ver-uri = "esdb+
-00010970: 6469 7363 6f76 6572 3a2f 2f22 202c 205b  discover://" , [
-00010980: 2075 7365 722d 696e 666f 2c20 2240 2220   user-info, "@" 
-00010990: 5d20 2c20 636c 7573 7465 722d 646f 6d61  ] , cluster-doma
-000109a0: 696e 6e61 6d65 202c 205b 2022 3f22 202c  inname , [ "?" ,
-000109b0: 2071 7565 7279 2d73 7472 696e 6720 5d20   query-string ] 
-000109c0: 3b0a 0a49 6e20 7468 6520 2265 7364 622b  ;..In the "esdb+
-000109d0: 6469 7363 6f76 6572 2220 5552 4920 7363  discover" URI sc
-000109e0: 6865 6d65 2c20 6166 7465 7220 7468 6520  heme, after the 
-000109f0: 7573 6572 2069 6e66 6f20 7374 7269 6e67  user info string
-00010a00: 2c20 7468 6572 6520 6d75 7374 2062 6520  , there must be 
-00010a10: 6120 646f 6d61 696e 0a6e 616d 6520 7768  a domain.name wh
-00010a20: 6963 6820 7368 6f75 6c64 2069 6465 6e74  ich should ident
-00010a30: 6966 7920 6120 636c 7573 7465 7220 6f66  ify a cluster of
-00010a40: 2045 7665 6e74 5374 6f72 6544 4220 7365   EventStoreDB se
-00010a50: 7276 6572 732e 2054 6865 2063 6c69 656e  rvers. The clien
-00010a60: 7420 7769 6c6c 2075 7365 2061 2044 4e53  t will use a DNS
-00010a70: 0a73 6572 7665 7220 746f 2072 6573 6f6c  .server to resol
-00010a80: 7665 2074 6865 2064 6f6d 6169 6e20 6e61  ve the domain na
-00010a90: 6d65 2074 6f20 6120 6c69 7374 206f 6620  me to a list of 
-00010aa0: 6164 6472 6573 7365 7320 6f66 2045 7665  addresses of Eve
-00010ab0: 6e74 5374 6f72 6544 4220 7365 7276 6572  ntStoreDB server
-00010ac0: 732c 0a62 7920 7175 6572 7969 6e67 2066  s,.by querying f
-00010ad0: 6f72 2027 4127 2072 6563 6f72 6473 2e20  or 'A' records. 
-00010ae0: 496e 2074 6869 7320 6361 7365 2c20 7468  In this case, th
-00010af0: 6520 706f 7274 206e 756d 6265 7220 2232  e port number "2
-00010b00: 3131 3322 2077 696c 6c20 6265 2075 7365  113" will be use
-00010b10: 6420 746f 0a63 6f6e 7374 7275 6374 2067  d to.construct g
-00010b20: 5250 4320 7461 7267 6574 7320 6672 6f6d  RPC targets from
-00010b30: 2074 6865 2061 6464 7265 7373 6573 206f   the addresses o
-00010b40: 6274 6169 6e65 6420 6672 6f6d 2027 4127  btained from 'A'
-00010b50: 2072 6563 6f72 6473 2070 726f 7669 6465   records provide
-00010b60: 6420 6279 2074 6865 0a44 4e53 2073 6572  d by the.DNS ser
-00010b70: 7665 722e 2054 6865 7265 666f 7265 2c20  ver. Therefore, 
-00010b80: 6966 2079 6f75 2077 616e 7420 746f 2075  if you want to u
-00010b90: 7365 2074 6865 2022 6573 6462 2b64 6973  se the "esdb+dis
-00010ba0: 636f 7665 7222 2055 5249 2073 6368 656d  cover" URI schem
-00010bb0: 652c 2079 6f75 2077 696c 6c0a 6e65 6564  e, you will.need
-00010bc0: 2074 6f20 636f 6e66 6967 7572 6520 444e   to configure DN
-00010bd0: 5320 7768 656e 2073 6574 7469 6e67 2075  S when setting u
-00010be0: 7020 796f 7572 2045 7665 6e74 5374 6f72  p your EventStor
-00010bf0: 6544 4220 636c 7573 7465 722e 0a0a 5769  eDB cluster...Wi
-00010c00: 7468 2062 6f74 6820 7468 6520 2265 7364  th both the "esd
-00010c10: 6222 2061 6e64 2022 6573 6462 2b64 6973  b" and "esdb+dis
-00010c20: 6f63 7665 7222 2055 5249 2073 6368 656d  ocver" URI schem
-00010c30: 6573 2c20 7468 6520 636c 6965 6e74 2066  es, the client f
-00010c40: 6972 7374 6c79 206f 6274 6169 6e73 0a61  irstly obtains.a
-00010c50: 206c 6973 7420 6f66 2067 5250 4320 7461   list of gRPC ta
-00010c60: 7267 6574 733a 2065 6974 6865 7220 6469  rgets: either di
-00010c70: 7265 6374 6c79 2066 726f 6d20 2265 7364  rectly from "esd
-00010c80: 6222 2063 6f6e 6e65 6374 696f 6e20 7374  b" connection st
-00010c90: 7269 6e67 733b 206f 7220 696e 6469 7265  rings; or indire
-00010ca0: 6374 6c79 0a66 726f 6d20 2265 7364 622b  ctly.from "esdb+
-00010cb0: 6469 7363 6f76 6572 2220 636f 6e6e 6563  discover" connec
-00010cc0: 7469 6f6e 2073 7472 696e 6773 2076 6961  tion strings via
-00010cd0: 2044 4e53 2e20 5468 6973 206c 6973 7420   DNS. This list 
-00010ce0: 6f66 2074 6172 6765 7473 2069 7320 6b6e  of targets is kn
-00010cf0: 6f77 6e20 6173 2074 6865 0a22 676f 7373  own as the."goss
-00010d00: 6970 2073 6565 6422 2e20 5468 6520 636c  ip seed". The cl
-00010d10: 6965 6e74 2077 696c 6c20 7468 656e 2061  ient will then a
-00010d20: 7474 656d 7074 2074 6f20 636f 6e6e 6563  ttempt to connec
-00010d30: 7420 746f 2065 6163 6820 6752 5043 2074  t to each gRPC t
-00010d40: 6172 6765 7420 696e 2074 7572 6e2c 0a61  arget in turn,.a
-00010d50: 7474 656d 7074 696e 6720 746f 2063 616c  ttempting to cal
-00010d60: 6c20 7468 6520 4576 656e 7453 746f 7265  l the EventStore
-00010d70: 4442 2047 6f73 7369 7020 4150 4920 746f  DB Gossip API to
-00010d80: 206f 6274 6169 6e20 696e 666f 726d 6174   obtain informat
-00010d90: 696f 6e20 6162 6f75 7420 7468 650a 4576  ion about the.Ev
-00010da0: 656e 7453 746f 7265 4442 2063 6c75 7374  entStoreDB clust
-00010db0: 6572 2e20 4120 6d65 6d62 6572 206f 6620  er. A member of 
-00010dc0: 7468 6520 636c 7573 7465 7220 6973 2073  the cluster is s
-00010dd0: 656c 6563 7465 6420 6279 2074 6865 2063  elected by the c
-00010de0: 6c69 656e 742c 2061 6363 6f72 6469 6e67  lient, according
-00010df0: 0a74 6f20 7468 6520 226e 6f64 6520 7072  .to the "node pr
-00010e00: 6566 6572 656e 6365 2220 6f70 7469 6f6e  eference" option
-00010e10: 2028 7365 6520 6265 6c6f 7729 2e20 5468   (see below). Th
-00010e20: 6520 636c 6965 6e74 206d 6179 2074 6865  e client may the
-00010e30: 6e20 6e65 6564 2074 6f20 636c 6f73 6520  n need to close 
-00010e40: 6974 730a 636f 6e6e 6563 7469 6f6e 2061  its.connection a
-00010e50: 6e64 2072 6563 6f6e 6e65 6374 2074 6f20  nd reconnect to 
-00010e60: 7468 6520 7365 6c65 6374 6564 2073 6572  the selected ser
-00010e70: 7665 722e 0a0a 496e 2062 6f74 6820 7468  ver...In both th
-00010e80: 6520 2265 7364 6222 2061 6e64 2022 6573  e "esdb" and "es
-00010e90: 6462 2b64 6973 636f 7665 7222 2073 6368  db+discover" sch
-00010ea0: 656d 6573 2c20 7468 6520 5552 4920 6d61  emes, the URI ma
-00010eb0: 7920 696e 636c 7564 6520 6120 7573 6572  y include a user
-00010ec0: 2069 6e66 6f20 7374 7269 6e67 2e0a 4966   info string..If
-00010ed0: 2069 7420 6578 6973 7473 2069 6e20 7468   it exists in th
-00010ee0: 6520 5552 492c 2074 6865 2075 7365 7220  e URI, the user 
-00010ef0: 696e 666f 2073 7472 696e 6720 6d75 7374  info string must
-00010f00: 2062 6520 7365 7061 7261 7465 6420 6672   be separated fr
-00010f10: 6f6d 2074 6865 2072 6573 7420 6f66 2074  om the rest of t
-00010f20: 6865 2055 5249 0a77 6974 6820 7468 6520  he URI.with the 
-00010f30: 2240 2220 6368 6172 6163 7465 722e 2054  "@" character. T
-00010f40: 6865 2075 7365 7220 696e 666f 2073 7472  he user info str
-00010f50: 696e 6720 6d75 7374 2069 6e63 6c75 6465  ing must include
-00010f60: 2061 2075 7365 726e 616d 6520 616e 6420   a username and 
-00010f70: 6120 7061 7373 776f 7264 2c0a 7365 7061  a password,.sepa
-00010f80: 7261 7465 6420 7769 7468 2074 6865 2022  rated with the "
-00010f90: 3a22 2063 6861 7261 6374 6572 2e0a 0a20  :" character... 
-00010fa0: 2020 2075 7365 722d 696e 666f 203d 2075     user-info = u
-00010fb0: 7365 726e 616d 6520 2c20 223a 2220 2c20  sername , ":" , 
-00010fc0: 7061 7373 776f 7264 203b 0a0a 5468 6520  password ;..The 
-00010fd0: 7573 6572 2069 6e66 6f20 6973 2073 656e  user info is sen
-00010fe0: 7420 6279 2074 6865 2063 6c69 656e 7420  t by the client 
-00010ff0: 6173 2022 6361 6c6c 2063 7265 6465 6e74  as "call credent
-00011000: 6961 6c73 2220 696e 2065 6163 6820 6361  ials" in each ca
-00011010: 6c6c 2074 6f20 6120 2273 6563 7572 6522  ll to a "secure"
-00011020: 0a73 6572 7665 722c 2069 6e20 6120 2262  .server, in a "b
-00011030: 6173 6963 2061 7574 6822 2061 7574 686f  asic auth" autho
-00011040: 7269 7a61 7469 6f6e 2068 6561 6465 722e  rization header.
-00011050: 2054 6869 7320 6175 7468 6f72 697a 6174   This authorizat
-00011060: 696f 6e20 6865 6164 6572 2069 7320 7573  ion header is us
-00011070: 6564 2062 790a 7468 6520 7365 7276 6572  ed by.the server
-00011080: 2074 6f20 6175 7468 656e 7469 6361 7465   to authenticate
-00011090: 2074 6865 2063 6c69 656e 742e 2054 6865   the client. The
-000110a0: 2061 7574 686f 7269 7a61 7469 6f6e 2068   authorization h
-000110b0: 6561 6465 7220 6973 206e 6f74 2073 656e  eader is not sen
-000110c0: 7420 746f 0a22 696e 7365 6375 7265 2220  t to."insecure" 
-000110d0: 7365 7276 6572 732e 0a0a 496e 2062 6f74  servers...In bot
-000110e0: 6820 7468 6520 2265 7364 6222 2061 6e64  h the "esdb" and
-000110f0: 2022 6573 6462 2b64 6973 636f 7665 7222   "esdb+discover"
-00011100: 2073 6368 656d 6573 2c20 7468 6520 6f70   schemes, the op
-00011110: 7469 6f6e 616c 2071 7565 7279 2073 7472  tional query str
-00011120: 696e 6720 6d75 7374 2062 6520 6f6e 650a  ing must be one.
-00011130: 6f72 206d 616e 7920 6669 656c 642d 7661  or many field-va
-00011140: 6c75 6520 6172 6775 6d65 6e74 732c 2073  lue arguments, s
-00011150: 6570 6172 6174 6564 2066 726f 6d20 6561  eparated from ea
-00011160: 6368 206f 7468 6572 2077 6974 6820 7468  ch other with th
-00011170: 6520 2226 2220 6368 6172 6163 7465 722e  e "&" character.
-00011180: 0a0a 2020 2020 7175 6572 792d 7374 7269  ..    query-stri
-00011190: 6e67 203d 2066 6965 6c64 2d76 616c 7565  ng = field-value
-000111a0: 2c20 7b20 2226 222c 2066 6965 6c64 2d76  , { "&", field-v
-000111b0: 616c 7565 207d 203b 0a0a 4561 6368 2066  alue } ;..Each f
-000111c0: 6965 6c64 2d76 616c 7565 2061 7267 756d  ield-value argum
-000111d0: 656e 7420 6d75 7374 2062 6520 6f6e 6520  ent must be one 
-000111e0: 6f66 2074 6865 2073 7570 706f 7274 6564  of the supported
-000111f0: 2066 6965 6c64 732c 2061 6e64 2061 6e0a   fields, and an.
-00011200: 6170 7072 6f70 7269 6174 6520 7661 6c75  appropriate valu
-00011210: 652c 2073 6570 6172 6174 6564 2077 6974  e, separated wit
-00011220: 6820 7468 6520 223d 2220 6368 6172 6163  h the "=" charac
-00011230: 7465 722e 0a0a 2020 2020 6669 656c 642d  ter...    field-
-00011240: 7661 6c75 6520 3d20 2820 2254 6c73 222c  value = ( "Tls",
-00011250: 2022 3d22 202c 2022 7472 7565 2220 7c20   "=" , "true" | 
-00011260: 2266 616c 7365 2220 290a 2020 2020 2020  "false" ).      
-00011270: 2020 2020 2020 2020 2020 7c20 2820 2254            | ( "T
-00011280: 6c73 5665 7269 6679 4365 7274 222c 2022  lsVerifyCert", "
-00011290: 3d22 202c 2022 7472 7565 2220 7c20 2266  =" , "true" | "f
-000112a0: 616c 7365 2220 290a 2020 2020 2020 2020  alse" ).        
-000112b0: 2020 2020 2020 2020 7c20 2820 2243 6f6e          | ( "Con
-000112c0: 6e65 6374 696f 6e4e 616d 6522 2c20 223d  nectionName", "=
-000112d0: 2220 2c20 7374 7269 6e67 2029 0a20 2020  " , string ).   
-000112e0: 2020 2020 2020 2020 2020 2020 207c 2028               | (
-000112f0: 2022 4e6f 6465 5072 6566 6572 656e 6365   "NodePreference
-00011300: 222c 2022 3d22 202c 2022 6c65 6164 6572  ", "=" , "leader
-00011310: 2220 7c20 2266 6f6c 6c6f 7765 7222 207c  " | "follower" |
-00011320: 2022 7265 6164 6f6e 6c79 7265 706c 6963   "readonlyreplic
-00011330: 6122 207c 2022 7261 6e64 6f6d 2220 290a  a" | "random" ).
-00011340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011350: 7c20 2820 2244 6566 6175 6c74 4465 6164  | ( "DefaultDead
-00011360: 6c69 6e65 222c 2022 3d22 202c 2069 6e74  line", "=" , int
-00011370: 6567 6572 2029 0a20 2020 2020 2020 2020  eger ).         
-00011380: 2020 2020 2020 207c 2028 2022 476f 7373         | ( "Goss
-00011390: 6970 5469 6d65 6f75 7422 2c20 223d 2220  ipTimeout", "=" 
-000113a0: 2c20 696e 7465 6765 7220 290a 2020 2020  , integer ).    
-000113b0: 2020 2020 2020 2020 2020 2020 7c20 2820              | ( 
-000113c0: 224d 6178 4469 7363 6f76 6572 4174 7465  "MaxDiscoverAtte
-000113d0: 6d70 7473 222c 2022 3d22 202c 2069 6e74  mpts", "=" , int
-000113e0: 6567 6572 2029 0a20 2020 2020 2020 2020  eger ).         
-000113f0: 2020 2020 2020 207c 2028 2022 4469 7363         | ( "Disc
-00011400: 6f76 6572 7949 6e74 6572 7661 6c22 2c20  overyInterval", 
-00011410: 223d 2220 2c20 696e 7465 6765 7220 290a  "=" , integer ).
-00011420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011430: 7c20 2820 224d 6178 4469 7363 6f76 6572  | ( "MaxDiscover
-00011440: 4174 7465 6d70 7473 222c 2022 3d22 202c  Attempts", "=" ,
-00011450: 2069 6e74 6567 6572 2029 0a20 2020 2020   integer ).     
-00011460: 2020 2020 2020 2020 2020 207c 2028 2022             | ( "
-00011470: 4b65 6570 416c 6976 6549 6e74 6572 7661  KeepAliveInterva
-00011480: 6c22 2c20 223d 2220 2c20 696e 7465 6765  l", "=" , intege
-00011490: 7220 290a 2020 2020 2020 2020 2020 2020  r ).            
-000114a0: 2020 2020 7c20 2820 224b 6565 7041 6c69      | ( "KeepAli
-000114b0: 7665 496e 7465 7276 616c 222c 2022 3d22  veInterval", "="
-000114c0: 202c 2069 6e74 6567 6572 2029 203b 0a0a   , integer ) ;..
-000114d0: 5468 6520 7461 626c 6520 6265 6c6f 7720  The table below 
-000114e0: 6465 7363 7269 6265 7320 7468 6520 7175  describes the qu
-000114f0: 6572 7920 6669 656c 642d 7661 6c75 6573  ery field-values
-00011500: 2073 7570 706f 7274 6564 2062 7920 7468   supported by th
-00011510: 6973 2063 6c69 656e 742e 0a0a 7c20 4669  is client...| Fi
-00011520: 656c 6420 2020 2020 2020 2020 2020 2020  eld             
-00011530: 2020 7c20 5661 6c75 6520 2020 2020 2020    | Value       
-00011540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011570: 2020 2020 2020 2020 2020 7c20 4465 7363            | Desc
-00011580: 7269 7074 696f 6e20 2020 2020 2020 2020  ription         
-00011590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000115a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000115b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000115c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000115d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000115e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000115f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011610: 2020 2020 2020 2020 2020 2020 2020 7c0a                |.
-00011620: 7c2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  |---------------
-00011630: 2d2d 2d2d 2d2d 7c2d 2d2d 2d2d 2d2d 2d2d  ------|---------
-00011640: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011650: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011660: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011670: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 7c2d  --------------|-
-00011680: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011690: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000116a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000116b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000116c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000116d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000116e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000116f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011700: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011710: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011720: 2d2d 7c0a 7c20 546c 7320 2020 2020 2020  --|.| Tls       
-00011730: 2020 2020 2020 2020 2020 7c20 2274 7275            | "tru
-00011740: 6522 2c20 2266 616c 7365 2220 2864 6566  e", "false" (def
-00011750: 6175 6c74 3a20 2274 7275 6522 2920 2020  ault: "true")   
-00011760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011780: 2020 7c20 4966 2022 7472 7565 2220 7468    | If "true" th
-00011790: 6520 636c 6965 6e74 2077 696c 6c20 6372  e client will cr
-000117a0: 6561 7465 2061 2022 7365 6375 7265 2220  eate a "secure" 
-000117b0: 6752 5043 2063 6861 6e6e 656c 2e20 4966  gRPC channel. If
-000117c0: 2022 6661 6c73 6522 2074 6865 2063 6c69   "false" the cli
-000117d0: 656e 7420 7769 6c6c 2063 7265 6174 6520  ent will create 
-000117e0: 616e 2022 696e 7365 6375 7265 2220 6752  an "insecure" gR
-000117f0: 5043 2063 6861 6e6e 656c 2e20 5468 6973  PC channel. This
-00011800: 206d 7573 7420 6d61 7463 6820 7468 6520   must match the 
-00011810: 7365 7276 6572 2063 6f6e 6669 6775 7261  server configura
-00011820: 7469 6f6e 2e20 7c0a 7c20 546c 7356 6572  tion. |.| TlsVer
-00011830: 6966 7943 6572 7420 2020 2020 2020 7c20  ifyCert       | 
-00011840: 2274 7275 6522 2c20 2266 616c 7365 2220  "true", "false" 
-00011850: 2864 6566 6175 6c74 3a20 2274 7275 6522  (default: "true"
-00011860: 2920 2020 2020 2020 2020 2020 2020 2020  )               
-00011870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011880: 2020 2020 2020 7c20 4e4f 5420 5945 5420        | NOT YET 
-00011890: 494d 504c 454d 454e 5445 4420 2020 2020  IMPLEMENTED     
-000118a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000118b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000118c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000118d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000118e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000118f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011920: 2020 2020 2020 2020 2020 7c0a 7c20 436f            |.| Co
-00011930: 6e6e 6563 7469 6f6e 4e61 6d65 2020 2020  nnectionName    
-00011940: 2020 7c20 7374 7269 6e67 2028 6465 6661    | string (defa
-00011950: 756c 743a 2061 7574 6f2d 6765 6e65 7261  ult: auto-genera
-00011960: 7465 6420 7665 7273 696f 6e2d 3420 5555  ted version-4 UU
-00011970: 4944 2920 2020 2020 2020 2020 2020 2020  ID)             
-00011980: 2020 2020 2020 2020 2020 7c20 5365 6e74            | Sent
-00011990: 2069 6e20 6361 6c6c 206d 6574 6164 6174   in call metadat
-000119a0: 6120 666f 7220 6576 6572 7920 6361 6c6c  a for every call
-000119b0: 2c20 746f 2069 6465 6e74 6966 7920 7468  , to identify th
-000119c0: 6520 636c 6965 6e74 2074 6f20 7468 6520  e client to the 
-000119d0: 636c 7573 7465 722e 2020 2020 2020 2020  cluster.        
-000119e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000119f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011a20: 2020 2020 2020 2020 2020 2020 2020 7c0a                |.
-00011a30: 7c20 4e6f 6465 5072 6566 6572 656e 6365  | NodePreference
-00011a40: 2020 2020 2020 7c20 226c 6561 6465 7222        | "leader"
-00011a50: 2c20 2266 6f6c 6c6f 7765 7222 2c20 2272  , "follower", "r
-00011a60: 6561 646f 6e6c 7972 6570 6c69 6361 222c  eadonlyreplica",
-00011a70: 2022 7261 6e64 6f6d 2220 2864 6566 6175   "random" (defau
-00011a80: 6c74 3a20 226c 6561 6465 7222 2920 7c20  lt: "leader") | 
-00011a90: 5468 6520 6e6f 6465 2073 7461 7465 2070  The node state p
-00011aa0: 7265 6665 7272 6564 2062 7920 7468 6520  referred by the 
-00011ab0: 636c 6965 6e74 2e20 5468 6520 636c 6965  client. The clie
-00011ac0: 6e74 2077 696c 6c20 7365 6c65 6374 2061  nt will select a
-00011ad0: 206e 6f64 6520 6672 6f6d 2074 6865 2063   node from the c
-00011ae0: 6c75 7374 6572 2069 6e66 6f20 7265 6365  luster info rece
-00011af0: 6976 6564 2066 726f 6d20 7468 6520 476f  ived from the Go
-00011b00: 7373 6970 2041 5049 2061 6363 6f72 6469  ssip API accordi
-00011b10: 6e67 2074 6f20 7468 6973 2070 7265 6665  ng to this prefe
-00011b20: 7265 6e63 652e 2020 2020 2020 2020 2020  rence.          
-00011b30: 2020 7c0a 7c20 4465 6661 756c 7444 6561    |.| DefaultDea
-00011b40: 646c 696e 6520 2020 2020 7c20 696e 7465  dline     | inte
-00011b50: 6765 7220 2864 6566 6175 6c74 3a20 604e  ger (default: `N
-00011b60: 6f6e 6560 2920 2020 2020 2020 2020 2020  one`)           
-00011b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011b90: 2020 7c20 5468 6520 6465 6661 756c 7420    | The default 
-00011ba0: 7661 6c75 6520 2869 6e20 7365 636f 6e64  value (in second
-00011bb0: 7329 206f 6620 7468 6520 6074 696d 656f  s) of the `timeo
-00011bc0: 7574 6020 6172 6775 6d65 6e74 206f 6620  ut` argument of 
-00011bd0: 636c 6965 6e74 2022 7772 6974 6522 206d  client "write" m
-00011be0: 6574 686f 6473 2073 7563 6820 6173 2060  ethods such as `
-00011bf0: 6170 7065 6e64 5f65 7665 6e74 7328 2960  append_events()`
-00011c00: 2e20 2020 2020 2020 2020 2020 2020 2020  .               
-00011c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011c30: 2020 2020 2020 7c0a 7c20 476f 7373 6970        |.| Gossip
-00011c40: 5469 6d65 6f75 7420 2020 2020 2020 7c20  Timeout       | 
-00011c50: 696e 7465 6765 7220 2864 6566 6175 6c74  integer (default
-00011c60: 3a20 3529 2020 2020 2020 2020 2020 2020  : 5)            
-00011c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011c90: 2020 2020 2020 7c20 5468 6520 6465 6661        | The defa
-00011ca0: 756c 7420 7661 6c75 6520 2869 6e20 7365  ult value (in se
-00011cb0: 636f 6e64 7329 206f 6620 7468 6520 6074  conds) of the `t
-00011cc0: 696d 656f 7574 6020 6172 6775 6d65 6e74  imeout` argument
-00011cd0: 206f 6620 676f 7373 6970 2072 6561 6420   of gossip read 
-00011ce0: 6d65 7468 6f64 732c 2073 7563 6820 6173  methods, such as
-00011cf0: 2060 7265 6164 5f67 6f73 7369 7028 2960   `read_gossip()`
-00011d00: 2e20 2020 2020 2020 2020 2020 2020 2020  .               
-00011d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011d30: 2020 2020 2020 2020 2020 7c0a 7c20 4d61            |.| Ma
-00011d40: 7844 6973 636f 7665 7241 7474 656d 7074  xDiscoverAttempt
-00011d50: 7320 7c20 696e 7465 6765 7220 2864 6566  s | integer (def
-00011d60: 6175 6c74 3a20 3130 2920 2020 2020 2020  ault: 10)       
-00011d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011d90: 2020 2020 2020 2020 2020 7c20 5468 6520            | The 
-00011da0: 6e75 6d62 6572 206f 6620 6174 7465 6d70  number of attemp
-00011db0: 7473 2074 6f20 7265 6164 2067 6f73 7369  ts to read gossi
-00011dc0: 7020 7768 656e 2063 6f6e 6e65 6374 696e  p when connectin
-00011dd0: 6720 6f72 2072 6563 6f6e 6e65 6374 696e  g or reconnectin
-00011de0: 6720 746f 2061 2063 6c75 7374 6572 206d  g to a cluster m
-00011df0: 656d 6265 722e 2020 2020 2020 2020 2020  ember.          
-00011e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011e30: 2020 2020 2020 2020 2020 2020 2020 7c0a                |.
-00011e40: 7c20 4469 7363 6f76 6572 7949 6e74 6572  | DiscoveryInter
-00011e50: 7661 6c20 2020 7c20 696e 7465 6765 7220  val   | integer 
-00011e60: 2864 6566 6175 6c74 3a20 3130 3029 2020  (default: 100)  
-00011e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011e90: 2020 2020 2020 2020 2020 2020 2020 7c20                | 
-00011ea0: 486f 7720 6c6f 6e67 2074 6f20 7761 6974  How long to wait
-00011eb0: 2028 696e 206d 696c 6c69 7365 636f 6e64   (in millisecond
-00011ec0: 7329 2062 6574 7765 656e 2067 6f73 7369  s) between gossi
-00011ed0: 7020 7265 7472 6965 732e 2020 2020 2020  p retries.      
-00011ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011f40: 2020 7c0a 7c20 4b65 6570 416c 6976 6549    |.| KeepAliveI
-00011f50: 6e74 6572 7661 6c20 2020 7c20 696e 7465  nterval   | inte
-00011f60: 6765 7220 2864 6566 6175 6c74 3a20 604e  ger (default: `N
-00011f70: 6f6e 6560 2920 2020 2020 2020 2020 2020  one`)           
-00011f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011fa0: 2020 7c20 5468 6520 7661 6c75 6520 6f66    | The value of
-00011fb0: 2074 6865 2022 6772 7063 2e6b 6565 7061   the "grpc.keepa
-00011fc0: 6c69 7665 5f6d 7322 2067 5250 4320 6368  live_ms" gRPC ch
-00011fd0: 616e 6e65 6c20 6f70 7469 6f6e 2e20 2020  annel option.   
-00011fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012040: 2020 2020 2020 7c0a 7c20 4b65 6570 416c        |.| KeepAl
-00012050: 6976 6554 696d 656f 7574 2020 2020 7c20  iveTimeout    | 
-00012060: 696e 7465 6765 7220 2864 6566 6175 6c74  integer (default
-00012070: 3a20 604e 6f6e 6560 2920 2020 2020 2020  : `None`)       
-00012080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000120a0: 2020 2020 2020 7c20 5468 6520 7661 6c75        | The valu
-000120b0: 6520 6f66 2074 6865 2022 6772 7063 2e6b  e of the "grpc.k
-000120c0: 6565 7061 6c69 7665 5f74 696d 656f 7574  eepalive_timeout
-000120d0: 5f6d 7322 2067 5250 4320 6368 616e 6e65  _ms" gRPC channe
-000120e0: 6c20 6f70 7469 6f6e 2e20 2020 2020 2020  l option.       
-000120f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012140: 2020 2020 2020 2020 2020 7c0a 0a0a 4865            |...He
-00012150: 7265 2061 7265 2073 6f6d 6520 6578 616d  re are some exam
-00012160: 706c 6573 206f 6620 4576 656e 7453 746f  ples of EventSto
-00012170: 7265 4442 2063 6f6e 6e65 6374 696f 6e20  reDB connection 
-00012180: 7374 7269 6e67 2055 5249 732e 0a0a 2020  string URIs...  
-00012190: 2020 2320 4765 7420 636c 7573 7465 7220    # Get cluster 
-000121a0: 696e 666f 2066 726f 6d20 7365 6375 7265  info from secure
-000121b0: 2073 6572 7665 7220 736f 636b 6574 206c   server socket l
-000121c0: 6f63 616c 686f 7374 3a32 3131 332c 0a20  ocalhost:2113,. 
-000121d0: 2020 2023 2061 6e64 2075 7365 2022 6164     # and use "ad
-000121e0: 6d69 6e22 2061 6e64 2022 6368 616e 6765  min" and "change
-000121f0: 6974 2220 6173 2075 7365 726e 616d 6520  it" as username 
-00012200: 616e 6420 7061 7373 776f 7264 0a20 2020  and password.   
-00012210: 2023 2077 6865 6e20 6d61 6b69 6e67 2063   # when making c
-00012220: 616c 6c73 2074 6f20 4576 656e 7453 746f  alls to EventSto
-00012230: 7265 4442 2041 5049 206d 6574 686f 6473  reDB API methods
-00012240: 2e0a 0a20 2020 2065 7364 623a 2f2f 6164  ...    esdb://ad
-00012250: 6d69 6e3a 6368 616e 6765 6974 406c 6f63  min:changeit@loc
-00012260: 616c 686f 7374 3a32 3131 330a 0a0a 2020  alhost:2113...  
-00012270: 2020 2320 4765 7420 636c 7573 7465 7220    # Get cluster 
-00012280: 696e 666f 2066 726f 6d20 696e 7365 6375  info from insecu
-00012290: 7265 2073 6572 7665 7220 736f 636b 6574  re server socket
-000122a0: 2031 3237 2e30 2e30 2e31 3a32 3131 340a   127.0.0.1:2114.
-000122b0: 0a20 2020 2065 7364 623a 2f2f 3132 372e  .    esdb://127.
-000122c0: 302e 302e 313a 3231 3134 3f54 6c73 3d66  0.0.1:2114?Tls=f
-000122d0: 616c 7365 0a0a 0a20 2020 2023 2047 6574  alse...    # Get
-000122e0: 2063 6c75 7374 6572 2069 6e66 6f20 6672   cluster info fr
-000122f0: 6f6d 2061 6464 7265 7373 6573 2069 6e20  om addresses in 
-00012300: 2741 2720 7265 636f 7264 7320 666f 7220  'A' records for 
-00012310: 636c 7573 7465 7231 2e65 7861 6d70 6c65  cluster1.example
-00012320: 2e63 6f6d 2c0a 2020 2020 2320 616e 6420  .com,.    # and 
-00012330: 7573 6520 6120 6465 6661 756c 7420 6465  use a default de
-00012340: 6164 6c69 6e65 2066 6f72 206d 616b 696e  adline for makin
-00012350: 6720 6361 6c6c 7320 746f 2045 7665 6e74  g calls to Event
-00012360: 5374 6f72 6520 4150 4920 6d65 7468 6f64  Store API method
-00012370: 2e0a 0a20 2020 2065 7364 622b 6469 7363  ...    esdb+disc
-00012380: 6f76 6572 3a2f 2f61 646d 696e 3a63 6861  over://admin:cha
-00012390: 6e67 6569 7440 636c 7573 7465 7231 2e65  ngeit@cluster1.e
-000123a0: 7861 6d70 6c65 2e63 6f6d 3f44 6566 6175  xample.com?Defau
-000123b0: 6c74 4465 6164 6c69 6e65 3d35 0a0a 0a20  ltDeadline=5... 
-000123c0: 2020 2023 2047 6574 2063 6c75 7374 6572     # Get cluster
-000123d0: 2069 6e66 6f20 6672 6f6d 2065 6974 6865   info from eithe
-000123e0: 7220 6c6f 6361 6c68 6f73 743a 3231 3131  r localhost:2111
-000123f0: 206f 7220 6c6f 6361 6c68 6f73 743a 3231   or localhost:21
-00012400: 3132 206f 720a 2020 2020 2320 6c6f 6361  12 or.    # loca
-00012410: 6c68 6f73 743a 3231 3133 2c20 616e 6420  lhost:2113, and 
-00012420: 7468 656e 2063 6f6e 6e65 6374 2074 6f20  then connect to 
-00012430: 6120 666f 6c6c 6f77 6572 206e 6f64 6520  a follower node 
-00012440: 696e 2074 6865 2063 6c75 7374 6572 2e0a  in the cluster..
-00012450: 0a20 2020 2065 7364 623a 2f2f 6164 6d69  .    esdb://admi
-00012460: 6e3a 6368 616e 6765 6974 406c 6f63 616c  n:changeit@local
-00012470: 686f 7374 3a32 3131 312c 6c6f 6361 6c68  host:2111,localh
-00012480: 6f73 743a 3231 3132 2c6c 6f63 616c 686f  ost:2112,localho
-00012490: 7374 3a32 3131 333f 4e6f 6465 5072 6566  st:2113?NodePref
-000124a0: 6572 656e 6365 3d66 6f6c 6c6f 7765 720a  erence=follower.
-000124b0: 0a0a 2020 2020 2320 4765 7420 636c 7573  ..    # Get clus
-000124c0: 7465 7220 696e 666f 2066 726f 6d20 6164  ter info from ad
-000124d0: 6472 6573 7365 7320 696e 2027 4127 2072  dresses in 'A' r
-000124e0: 6563 6f72 6473 2066 6f72 2063 6c75 7374  ecords for clust
-000124f0: 6572 312e 6578 616d 706c 652e 636f 6d2c  er1.example.com,
-00012500: 0a20 2020 2023 2061 6e64 2063 6f6e 6669  .    # and confi
-00012510: 6775 7265 2022 6b65 6570 2061 6c69 7665  gure "keep alive
-00012520: 2220 7469 6d65 6f75 7420 616e 6420 696e  " timeout and in
-00012530: 7465 7276 616c 2069 6e20 7468 6520 6752  terval in the gR
-00012540: 5043 2063 6861 6e6e 656c 2e0a 0a20 2020  PC channel...   
-00012550: 2065 7364 622b 6469 7363 6f76 6572 3a2f   esdb+discover:/
-00012560: 2f61 646d 696e 3a63 6861 6e67 6569 7440  /admin:changeit@
-00012570: 636c 7573 7465 7231 2e65 7861 6d70 6c65  cluster1.example
-00012580: 2e63 6f6d 3f4b 6565 7041 6c69 7665 496e  .com?KeepAliveIn
-00012590: 7465 7276 616c 3d31 3030 3030 264b 6565  terval=10000&Kee
-000125a0: 7041 6c69 7665 5469 6d65 6f75 743d 3130  pAliveTimeout=10
-000125b0: 3030 300a 0a0a 506c 6561 7365 206e 6f74  000...Please not
-000125c0: 652c 2074 6865 2063 6c69 656e 7420 6973  e, the client is
-000125d0: 2069 6e73 656e 7369 7469 7665 2074 6f20   insensitive to 
-000125e0: 7468 6520 6361 7365 206f 6620 6669 656c  the case of fiel
-000125f0: 6473 2061 6e64 2076 616c 7565 732e 2049  ds and values. I
-00012600: 6620 6669 656c 6473 2061 7265 0a72 6570  f fields are.rep
-00012610: 6561 7465 6420 696e 2074 6865 2071 7565  eated in the que
-00012620: 7279 2073 7472 696e 672c 2074 6865 2071  ry string, the q
-00012630: 7565 7279 2073 7472 696e 6720 7769 6c6c  uery string will
-00012640: 2062 6520 7061 7273 6564 2077 6974 686f   be parsed witho
-00012650: 7574 2065 7272 6f72 2e20 486f 7765 7665  ut error. Howeve
-00012660: 722c 0a74 6865 2063 6f6e 6e65 6374 696f  r,.the connectio
-00012670: 6e20 6f70 7469 6f6e 7320 7573 6564 2062  n options used b
-00012680: 7920 7468 6520 636c 6965 6e74 2077 696c  y the client wil
-00012690: 6c20 7573 6520 7468 6520 7661 6c75 6520  l use the value 
-000126a0: 6f66 2074 6865 2066 6972 7374 2066 6965  of the first fie
-000126b0: 6c64 2e20 416c 6c0a 7468 6520 6f74 6865  ld. All.the othe
-000126c0: 7220 6669 656c 642d 7661 6c75 6573 2069  r field-values i
-000126d0: 6e20 7468 6520 7175 6572 7920 7374 7269  n the query stri
-000126e0: 6e67 2077 6974 6820 7468 6520 7361 6d65  ng with the same
-000126f0: 2066 6965 6c64 206e 616d 6520 7769 6c6c   field name will
-00012700: 2062 6520 6967 6e6f 7265 642e 0a46 6965   be ignored..Fie
-00012710: 6c64 7320 7769 7468 6f75 7420 7661 6c75  lds without valu
-00012720: 6573 2077 696c 6c20 616c 736f 2062 6520  es will also be 
-00012730: 6967 6e6f 7265 642e 0a0a 4966 2074 6865  ignored...If the
-00012740: 2063 6c69 656e 7427 7320 6e6f 6465 2070   client's node p
-00012750: 7265 6665 7265 6e63 6520 6973 2022 6c65  reference is "le
-00012760: 6164 6572 2220 616e 6420 7468 6520 6e6f  ader" and the no
-00012770: 6465 2062 6563 6f6d 6573 2061 0a22 666f  de becomes a."fo
-00012780: 6c6c 6f77 6572 222c 2074 6865 2063 6c69  llower", the cli
-00012790: 656e 7420 7769 6c6c 2061 7474 656d 7074  ent will attempt
-000127a0: 2074 6f20 7265 636f 6e6e 6563 7420 746f   to reconnect to
-000127b0: 2074 6865 2063 7572 7265 6e74 206c 6561   the current lea
-000127c0: 6465 7220 7768 656e 2061 206d 6574 686f  der when a metho
-000127d0: 640a 6973 2063 616c 6c65 6420 7468 6174  d.is called that
-000127e0: 2065 7870 6563 7473 2074 6f20 6361 6c6c   expects to call
-000127f0: 2061 206c 6561 6465 722e 204d 6574 686f   a leader. Metho
-00012800: 6473 2077 6869 6368 206d 7574 6174 6520  ds which mutate 
-00012810: 7468 6520 7374 6174 6520 6f66 2074 6865  the state of the
-00012820: 2064 6174 6162 6173 650a 6578 7065 6374   database.expect
-00012830: 2074 6f20 6361 6c6c 2061 206c 6561 6465   to call a leade
-00012840: 722e 2046 6f72 2073 7563 6820 6d65 7468  r. For such meth
-00012850: 6f64 732c 2074 6865 2048 5454 5020 6865  ods, the HTTP he
-00012860: 6164 6572 2272 6571 7569 7265 732d 6c65  ader"requires-le
-00012870: 6164 6572 2220 6973 2073 6574 2074 6f0a  ader" is set to.
-00012880: 2274 7275 6522 2c20 616e 6420 7468 6973  "true", and this
-00012890: 2068 6561 6465 7220 6973 206f 6273 6572   header is obser
-000128a0: 7665 6420 6279 2074 6865 2073 6572 7665  ved by the serve
-000128b0: 722c 2061 6e64 2073 6f20 6120 6e6f 6465  r, and so a node
-000128c0: 2077 6869 6368 2069 7320 6e6f 7420 6120   which is not a 
-000128d0: 6c65 6164 6572 0a74 6861 7420 7265 6365  leader.that rece
-000128e0: 6976 6573 2073 7563 6820 6120 7265 7175  ives such a requ
-000128f0: 6573 7420 7769 6c6c 2072 6574 7572 6e20  est will return 
-00012900: 616e 2065 7272 6f72 2e20 5468 6973 2065  an error. This e
-00012910: 7272 6f72 2069 7320 6465 7465 6374 6564  rror is detected
-00012920: 2062 7920 7468 6520 636c 6965 6e74 2c0a   by the client,.
-00012930: 7768 6963 6820 7769 6c6c 2074 6865 6e20  which will then 
-00012940: 636c 6f73 6520 7468 6520 6375 7272 656e  close the curren
-00012950: 7420 6752 5043 2063 6f6e 6e65 6374 696f  t gRPC connectio
-00012960: 6e20 616e 6420 6372 6561 7465 2061 206e  n and create a n
-00012970: 6577 2063 6f6e 6e65 6374 696f 6e20 746f  ew connection to
-00012980: 2074 6865 0a6c 6561 6465 722e 2054 6865   the.leader. The
-00012990: 2072 6571 7565 7374 2077 696c 6c20 7468   request will th
-000129a0: 656e 2062 6520 7265 7472 6965 6420 7769  en be retried wi
-000129b0: 7468 2074 6865 206c 6561 6465 722e 0a0a  th the leader...
-000129c0: 4966 2074 6865 2063 6c69 656e 7427 7320  If the client's 
-000129d0: 6e6f 6465 2070 7265 6665 7265 6e63 6520  node preference 
-000129e0: 6973 2022 666f 6c6c 6f77 6572 2220 616e  is "follower" an
-000129f0: 6420 7468 6572 6520 6172 6520 6e6f 2066  d there are no f
-00012a00: 6f6c 6c6f 7765 720a 6e6f 6465 7320 696e  ollower.nodes in
-00012a10: 2074 6865 2063 6c75 7374 6572 2c20 7468   the cluster, th
-00012a20: 656e 2074 6865 2063 6c69 656e 7420 7769  en the client wi
-00012a30: 6c6c 2072 6169 7365 2061 6e20 6578 6365  ll raise an exce
-00012a40: 7074 696f 6e2e 2053 696d 696c 6172 6c79  ption. Similarly
-00012a50: 2c20 6966 2074 6865 0a63 6c69 656e 7427  , if the.client'
-00012a60: 7320 6e6f 6465 2070 7265 6665 7265 6e63  s node preferenc
-00012a70: 6520 6973 2022 7265 6164 6f6e 6c79 7265  e is "readonlyre
-00012a80: 706c 6963 6122 2061 6e64 2074 6865 7265  plica" and there
-00012a90: 2061 7265 206e 6f20 7265 6164 2d6f 6e6c   are no read-onl
-00012aa0: 7920 7265 706c 6963 610a 6e6f 6465 7320  y replica.nodes 
-00012ab0: 696e 2074 6865 2063 6c75 7374 6572 2c20  in the cluster, 
-00012ac0: 7468 656e 2074 6865 2063 6c69 656e 7420  then the client 
-00012ad0: 7769 6c6c 2061 6c73 6f20 7261 6973 6520  will also raise 
-00012ae0: 616e 2065 7863 6570 7469 6f6e 2e0a 0a54  an exception...T
-00012af0: 6865 2067 5250 4320 6368 616e 6e65 6c20  he gRPC channel 
-00012b00: 6f70 7469 6f6e 2022 6772 7063 2e6d 6178  option "grpc.max
-00012b10: 5f72 6563 6569 7665 5f6d 6573 7361 6765  _receive_message
-00012b20: 5f6c 656e 6774 6822 2069 7320 6175 746f  _length" is auto
-00012b30: 6d61 7469 6361 6c6c 790a 636f 6e66 6967  matically.config
-00012b40: 7572 6564 2074 6f20 7468 6520 7661 6c75  ured to the valu
-00012b50: 6520 6031 3720 2a20 3130 3234 202a 2031  e `17 * 1024 * 1
-00012b60: 3032 3460 2e20 5468 6973 2076 616c 7565  024`. This value
-00012b70: 2063 616e 6e6f 7420 6265 2063 6861 6e67   cannot be chang
-00012b80: 6564 2e0a 0a0a 2323 2320 5265 6775 6c61  ed....### Regula
-00012b90: 7220 6578 7072 6573 7369 6f6e 2066 696c  r expression fil
-00012ba0: 7465 7273 0a0a 5468 6520 6669 6c74 6572  ters..The filter
-00012bb0: 2061 7267 756d 656e 7473 2069 6e20 6072   arguments in `r
-00012bc0: 6561 645f 616c 6c5f 6576 656e 7473 2829  ead_all_events()
-00012bd0: 602c 2060 7375 6273 6372 6962 655f 616c  `, `subscribe_al
-00012be0: 6c5f 6576 656e 7473 2829 602c 0a60 6372  l_events()`,.`cr
-00012bf0: 6561 7465 5f73 7562 7363 7269 7074 696f  eate_subscriptio
-00012c00: 6e28 2960 2061 6e64 2060 636f 6d6d 6974  n()` and `commit
-00012c10: 5f70 6f73 6974 696f 6e28 2960 2061 7265  _position()` are
-00012c20: 2061 7070 6c69 6564 2074 6f20 7468 6520   applied to the 
-00012c30: 6074 7970 6560 0a61 7474 7269 6275 7465  `type`.attribute
-00012c40: 206f 6620 7265 636f 7264 6564 2065 7665   of recorded eve
-00012c50: 6e74 732e 0a0a 5468 6520 6465 6661 756c  nts...The defaul
-00012c60: 7420 7661 6c75 6520 6f66 2074 6865 2060  t value of the `
-00012c70: 6669 6c74 6572 5f65 7863 6c75 6465 6020  filter_exclude` 
-00012c80: 6172 6775 6d65 6e74 7320 6973 2064 6573  arguments is des
-00012c90: 6967 6e65 6420 746f 2065 7863 6c75 6465  igned to exclude
-00012ca0: 0a45 7665 6e74 5374 6f72 6544 4220 2273  .EventStoreDB "s
-00012cb0: 7973 7465 6d22 2061 6e64 2022 7065 7273  ystem" and "pers
-00012cc0: 6973 7465 6e63 6520 7375 6273 6372 6970  istence subscrip
-00012cd0: 7469 6f6e 2063 6f6e 6669 6722 2065 7665  tion config" eve
-00012ce0: 6e74 732c 2077 6869 6368 0a6f 7468 6572  nts, which.other
-00012cf0: 7769 7365 2077 6f75 6c64 2062 6520 696e  wise would be in
-00012d00: 636c 7564 6564 2e20 5379 7374 656d 2065  cluded. System e
-00012d10: 7665 6e74 7320 6765 6e65 7261 7465 6420  vents generated 
-00012d20: 6279 2045 7665 6e74 5374 6f72 6544 4220  by EventStoreDB 
-00012d30: 616c 6c0a 6861 7665 2060 7479 7065 6020  all.have `type` 
-00012d40: 7374 7269 6e67 7320 7468 6174 2073 7461  strings that sta
-00012d50: 7274 2077 6974 6820 7468 6520 6024 6020  rt with the `$` 
-00012d60: 7369 676e 2e20 5065 7273 6973 7465 6e63  sign. Persistenc
-00012d70: 6520 7375 6273 6372 6970 7469 6f6e 0a65  e subscription.e
-00012d80: 7665 6e74 7320 6765 6e65 7261 7465 6420  vents generated 
-00012d90: 7768 656e 206d 616e 6970 756c 6174 696e  when manipulatin
-00012da0: 6720 7065 7273 6973 7465 6e63 6520 7375  g persistence su
-00012db0: 6273 6372 6970 7469 6f6e 7320 616c 6c20  bscriptions all 
-00012dc0: 6861 7665 2060 7479 7065 600a 7374 7269  have `type`.stri
-00012dd0: 6e67 7320 7468 6174 2073 7461 7274 2077  ngs that start w
-00012de0: 6974 6820 6050 6572 7369 7374 656e 7443  ith `PersistentC
-00012df0: 6f6e 6669 6760 2e0a 0a46 6f72 2065 7861  onfig`...For exa
-00012e00: 6d70 6c65 2c20 746f 206d 6174 6368 2074  mple, to match t
-00012e10: 6865 2074 7970 6520 6f66 2045 7665 6e74  he type of Event
-00012e20: 5374 6f72 6544 4220 7379 7374 656d 2065  StoreDB system e
-00012e30: 7665 6e74 732c 2075 7365 2074 6865 2072  vents, use the r
-00012e40: 6567 756c 6172 0a65 7870 7265 7373 696f  egular.expressio
-00012e50: 6e20 6072 275c 242e 2b27 602e 2050 6c65  n `r'\$.+'`. Ple
-00012e60: 6173 6520 6e6f 7465 2c20 7468 6520 636f  ase note, the co
-00012e70: 6e73 7461 6e74 2060 4553 4442 5f53 5953  nstant `ESDB_SYS
-00012e80: 5445 4d5f 4556 454e 5453 5f52 4547 4558  TEM_EVENTS_REGEX
-00012e90: 6020 6973 0a73 6574 2074 6f20 6072 275c  ` is.set to `r'\
-00012ea0: 242e 2b27 602e 2059 6f75 2063 616e 2069  $.+'`. You can i
-00012eb0: 6d70 6f72 7420 7468 6973 2076 616c 7565  mport this value
-00012ec0: 0a28 6066 726f 6d20 6573 6462 636c 6965  .(`from esdbclie
-00012ed0: 6e74 2069 6d70 6f72 7420 4553 4442 5f53  nt import ESDB_S
-00012ee0: 5953 5445 4d5f 4556 454e 5453 5f52 4547  YSTEM_EVENTS_REG
-00012ef0: 4558 6029 2061 6e64 2075 7365 0a69 7420  EX`) and use.it 
-00012f00: 7768 656e 2062 7569 6c64 696e 6720 6c6f  when building lo
-00012f10: 6e67 6572 2073 6571 7565 6e63 6573 206f  nger sequences o
-00012f20: 6620 7265 6775 6c61 7220 6578 7072 6573  f regular expres
-00012f30: 7369 6f6e 732e 0a0a 5369 6d69 6c61 726c  sions...Similarl
-00012f40: 792c 2074 6f20 6d61 7463 6820 7468 6520  y, to match the 
-00012f50: 7479 7065 206f 6620 4576 656e 7453 746f  type of EventSto
-00012f60: 7265 4442 2070 6572 7369 7374 656e 6365  reDB persistence
-00012f70: 2073 7562 7363 7269 7074 696f 6e20 6576   subscription ev
-00012f80: 656e 7473 2c20 7573 6520 7468 650a 7265  ents, use the.re
-00012f90: 6775 6c61 7220 6578 7072 6573 7369 6f6e  gular expression
-00012fa0: 2060 7227 5065 7273 6973 7465 6e74 436f   `r'PersistentCo
-00012fb0: 6e66 6967 5c64 2b27 602e 2054 6865 2063  nfig\d+'`. The c
-00012fc0: 6f6e 7374 616e 7420 6045 5344 425f 5045  onstant `ESDB_PE
-00012fd0: 5253 4953 5445 4e54 5f43 4f4e 4649 475f  RSISTENT_CONFIG_
-00012fe0: 4556 454e 5453 5f52 4547 4558 600a 6973  EVENTS_REGEX`.is
-00012ff0: 2073 6574 2074 6f20 6072 2750 6572 7369   set to `r'Persi
-00013000: 7374 656e 7443 6f6e 6669 675c 642b 2760  stentConfig\d+'`
-00013010: 2e20 596f 7520 6361 6e20 616c 736f 2069  . You can also i
-00013020: 6d70 6f72 7420 7468 6973 2076 616c 7565  mport this value
-00013030: 0a28 6066 726f 6d20 6573 6462 636c 6965  .(`from esdbclie
-00013040: 6e74 2069 6d70 6f72 7420 4553 4442 5f50  nt import ESDB_P
-00013050: 4552 5349 5354 454e 545f 434f 4e46 4947  ERSISTENT_CONFIG
-00013060: 5f45 5645 4e54 535f 5245 4745 5860 2920  _EVENTS_REGEX`) 
-00013070: 616e 6420 7573 6520 6974 2077 6865 6e20  and use it when 
-00013080: 6275 696c 6469 6e67 0a6c 6f6e 6765 7220  building.longer 
-00013090: 7365 7175 656e 6365 7320 6f66 2072 6567  sequences of reg
-000130a0: 756c 6172 2065 7870 7265 7373 696f 6e73  ular expressions
-000130b0: 2e0a 0a54 6865 2063 6f6e 7374 616e 7420  ...The constant 
-000130c0: 6044 4546 4155 4c54 5f45 5843 4c55 4445  `DEFAULT_EXCLUDE
-000130d0: 5f46 494c 5445 5260 2069 7320 6120 7365  _FILTER` is a se
-000130e0: 7175 656e 6365 206f 6620 7265 6775 6c61  quence of regula
-000130f0: 7220 6578 7072 6573 7369 6f6e 7320 7468  r expressions th
-00013100: 6174 206d 6174 6368 0a74 6865 2065 7665  at match.the eve
-00013110: 6e74 7320 7468 6174 2045 7665 6e74 5374  nts that EventSt
-00013120: 6f72 6544 4220 6765 6e65 7261 7465 7320  oreDB generates 
-00013130: 696e 7465 726e 616c 6c79 2c20 6576 656e  internally, even
-00013140: 7473 2074 6861 7420 6172 6520 6578 7472  ts that are extr
-00013150: 616e 656f 7573 2074 6f20 7468 6f73 650a  aneous to those.
-00013160: 7768 6963 6820 796f 7520 6170 7065 6e64  which you append
-00013170: 2075 7369 6e67 2074 6865 2060 6170 7065   using the `appe
-00013180: 6e64 5f65 7665 6e74 7328 2960 206d 6574  nd_events()` met
-00013190: 686f 642e 0a0a 466f 7220 6578 616d 706c  hod...For exampl
-000131a0: 652c 2074 6f20 6578 636c 7564 6520 7379  e, to exclude sy
-000131b0: 7374 656d 2065 7665 6e74 7320 616e 6420  stem events and 
-000131c0: 7065 7273 6973 7465 6e63 6520 7375 6273  persistence subs
-000131d0: 6372 6970 7469 6f6e 2063 6f6e 6669 6775  cription configu
-000131e0: 7261 7469 6f6e 2065 7665 6e74 732c 0a61  ration events,.a
-000131f0: 6e64 2073 6e61 7073 686f 7473 2c20 796f  nd snapshots, yo
-00013200: 7520 6d69 6768 7420 7573 6520 7468 6520  u might use the 
-00013210: 7365 7175 656e 6365 2060 4445 4641 554c  sequence `DEFAUL
-00013220: 545f 4558 434c 5544 455f 4649 4c54 4552  T_EXCLUDE_FILTER
-00013230: 202b 205b 272e 2a53 6e61 7073 686f 7427   + ['.*Snapshot'
-00013240: 5d60 2061 730a 7468 6520 7661 6c75 6520  ]` as.the value 
-00013250: 6f66 2074 6865 2060 6669 6c74 6572 5f65  of the `filter_e
-00013260: 7863 6c75 6465 6020 6172 6775 6d65 6e74  xclude` argument
-00013270: 2077 6865 6e20 6361 6c6c 696e 6720 6072   when calling `r
-00013280: 6561 645f 616c 6c5f 6576 656e 7473 2829  ead_all_events()
-00013290: 602c 0a60 7375 6273 6372 6962 655f 616c  `,.`subscribe_al
-000132a0: 6c5f 6576 656e 7473 2829 602c 2060 6372  l_events()`, `cr
-000132b0: 6561 7465 5f73 7562 7363 7269 7074 696f  eate_subscriptio
-000132c0: 6e28 2960 206f 7220 6067 6574 5f63 6f6d  n()` or `get_com
-000132d0: 6d69 745f 706f 7369 7469 6f6e 2829 602e  mit_position()`.
-000132e0: 0a0a 2323 2320 4e65 7720 6576 656e 7420  ..### New event 
-000132f0: 6f62 6a65 6374 730a 0a54 6865 2060 4e65  objects..The `Ne
-00013300: 7745 7665 6e74 6020 636c 6173 7320 6973  wEvent` class is
-00013310: 2075 7365 6420 7768 656e 2061 7070 656e   used when appen
-00013320: 6469 6e67 2065 7665 6e74 732e 0a0a 5468  ding events...Th
-00013330: 6520 7265 7175 6972 6564 2061 7267 756d  e required argum
-00013340: 656e 7420 6074 7970 6560 2069 7320 6120  ent `type` is a 
-00013350: 5079 7468 6f6e 2060 7374 7260 206f 626a  Python `str` obj
-00013360: 6563 742c 2075 7365 6420 746f 2069 6e64  ect, used to ind
-00013370: 6963 6174 6520 7468 6520 7479 7065 206f  icate the type o
-00013380: 660a 7468 6520 6576 656e 7420 7468 6174  f.the event that
-00013390: 2077 696c 6c20 6265 2072 6563 6f72 6465   will be recorde
-000133a0: 642e 0a0a 5468 6520 7265 7175 6972 6564  d...The required
-000133b0: 2061 7267 756d 656e 7420 6064 6174 6160   argument `data`
-000133c0: 2069 7320 6120 5079 7468 6f6e 2060 6279   is a Python `by
-000133d0: 7465 7360 206f 626a 6563 742c 2075 7365  tes` object, use
-000133e0: 6420 746f 2069 6e64 6963 6174 6520 7468  d to indicate th
-000133f0: 6520 6461 7461 206f 660a 7468 6520 6576  e data of.the ev
-00013400: 656e 7420 7468 6174 2077 696c 6c20 6265  ent that will be
-00013410: 2072 6563 6f72 6465 642e 0a0a 5468 6520   recorded...The 
-00013420: 6f70 7469 6f6e 616c 2061 7267 756d 656e  optional argumen
-00013430: 7420 606d 6574 6164 6174 6160 2069 7320  t `metadata` is 
-00013440: 6120 5079 7468 6f6e 2060 6279 7465 7360  a Python `bytes`
-00013450: 206f 626a 6563 742c 2075 7365 6420 746f   object, used to
-00013460: 2069 6e64 6963 6174 6520 616e 790a 6d65   indicate any.me
-00013470: 7461 6461 7461 206f 6620 7468 6520 6576  tadata of the ev
-00013480: 656e 7420 7468 6174 2077 696c 6c20 6265  ent that will be
-00013490: 2072 6563 6f72 6465 642e 2054 6865 2064   recorded. The d
-000134a0: 6566 6175 6c74 2076 616c 7565 2069 7320  efault value is 
-000134b0: 616e 2065 6d70 7479 2060 6279 7465 7360  an empty `bytes`
-000134c0: 0a6f 626a 6563 742e 0a0a 5468 6520 6f70  .object...The op
-000134d0: 7469 6f6e 616c 2061 7267 756d 656e 7420  tional argument 
-000134e0: 6063 6f6e 7465 6e74 5f74 7970 6560 2069  `content_type` i
-000134f0: 7320 6120 5079 7468 6f6e 2060 7374 7260  s a Python `str`
-00013500: 206f 626a 6563 742c 2075 7365 6420 746f   object, used to
-00013510: 2069 6e64 6963 6174 6520 7468 650a 7479   indicate the.ty
-00013520: 7065 206f 6620 7468 6520 6461 7461 2074  pe of the data t
-00013530: 6861 7420 7769 6c6c 2062 6520 7265 636f  hat will be reco
-00013540: 7264 6564 2066 6f72 2074 6869 7320 6576  rded for this ev
-00013550: 656e 742e 2054 6865 2064 6566 6175 6c74  ent. The default
-00013560: 2076 616c 7565 2069 730a 6061 7070 6c69   value is.`appli
-00013570: 6361 7469 6f6e 2f6a 736f 6e60 2c20 7768  cation/json`, wh
-00013580: 6963 6820 696e 6469 6361 7465 7320 7468  ich indicates th
-00013590: 6174 2074 6865 2060 6461 7461 6020 7761  at the `data` wa
-000135a0: 7320 7365 7269 616c 6973 6564 2075 7369  s serialised usi
-000135b0: 6e67 204a 534f 4e2e 0a41 6e20 616c 7465  ng JSON..An alte
-000135c0: 726e 6174 6976 6520 7661 6c75 6520 666f  rnative value fo
-000135d0: 7220 7468 6973 2061 7267 756d 656e 7420  r this argument 
-000135e0: 6973 2060 6170 706c 6963 6174 696f 6e2f  is `application/
-000135f0: 6f63 7465 742d 7374 7265 616d 602e 0a0a  octet-stream`...
-00013600: 5468 6520 6f70 7469 6f6e 616c 2061 7267  The optional arg
-00013610: 756d 656e 7420 6069 6460 2069 7320 6120  ument `id` is a 
-00013620: 5079 7468 6f6e 2060 5555 4944 6020 6f62  Python `UUID` ob
-00013630: 6a65 6374 2c20 7573 6564 2074 6f20 7370  ject, used to sp
-00013640: 6563 6966 7920 7468 6520 756e 6971 7565  ecify the unique
-00013650: 2049 440a 6f66 2074 6865 2065 7665 6e74   ID.of the event
-00013660: 2074 6861 7420 7769 6c6c 2062 6520 7265   that will be re
-00013670: 636f 7264 6564 2e20 5468 6973 2076 616c  corded. This val
-00013680: 7565 2077 696c 6c20 6465 6661 756c 7420  ue will default 
-00013690: 746f 2061 206e 6577 2076 6572 7369 6f6e  to a new version
-000136a0: 2d34 2055 5549 442e 0a0a 6060 6070 7974  -4 UUID...```pyt
-000136b0: 686f 6e0a 6e65 775f 6576 656e 7431 203d  hon.new_event1 =
-000136c0: 204e 6577 4576 656e 7428 0a20 2020 2074   NewEvent(.    t
-000136d0: 7970 653d 274f 7264 6572 4372 6561 7465  ype='OrderCreate
-000136e0: 6427 2c0a 2020 2020 6461 7461 3d62 277b  d',.    data=b'{
-000136f0: 226e 616d 6522 3a20 2247 7265 6722 7d27  "name": "Greg"}'
-00013700: 2c0a 290a 6173 7365 7274 206e 6577 5f65  ,.).assert new_e
-00013710: 7665 6e74 312e 7479 7065 203d 3d20 274f  vent1.type == 'O
-00013720: 7264 6572 4372 6561 7465 6427 0a61 7373  rderCreated'.ass
-00013730: 6572 7420 6e65 775f 6576 656e 7431 2e64  ert new_event1.d
-00013740: 6174 6120 3d3d 2062 277b 226e 616d 6522  ata == b'{"name"
-00013750: 3a20 2247 7265 6722 7d27 0a61 7373 6572  : "Greg"}'.asser
-00013760: 7420 6e65 775f 6576 656e 7431 2e6d 6574  t new_event1.met
-00013770: 6164 6174 6120 3d3d 2062 2727 0a61 7373  adata == b''.ass
-00013780: 6572 7420 6e65 775f 6576 656e 7431 2e63  ert new_event1.c
-00013790: 6f6e 7465 6e74 5f74 7970 6520 3d3d 2027  ontent_type == '
-000137a0: 6170 706c 6963 6174 696f 6e2f 6a73 6f6e  application/json
-000137b0: 270a 6173 7365 7274 2069 7369 6e73 7461  '.assert isinsta
-000137c0: 6e63 6528 6e65 775f 6576 656e 7431 2e69  nce(new_event1.i
-000137d0: 642c 2055 5549 4429 0a0a 6576 656e 745f  d, UUID)..event_
-000137e0: 6964 203d 2075 7569 6434 2829 0a6e 6577  id = uuid4().new
-000137f0: 5f65 7665 6e74 3220 3d20 4e65 7745 7665  _event2 = NewEve
-00013800: 6e74 280a 2020 2020 7479 7065 3d27 496d  nt(.    type='Im
-00013810: 6167 6543 7265 6174 6564 272c 0a20 2020  ageCreated',.   
-00013820: 2064 6174 613d 6227 3031 3031 3031 3031   data=b'01010101
-00013830: 3031 3031 3031 272c 0a20 2020 206d 6574  010101',.    met
-00013840: 6164 6174 613d 6227 7b22 6122 3a20 317d  adata=b'{"a": 1}
-00013850: 272c 0a20 2020 2063 6f6e 7465 6e74 5f74  ',.    content_t
-00013860: 7970 653d 2761 7070 6c69 6361 7469 6f6e  ype='application
-00013870: 2f6f 6374 6574 2d73 7472 6561 6d27 2c0a  /octet-stream',.
-00013880: 2020 2020 6964 3d65 7665 6e74 5f69 642c      id=event_id,
-00013890: 0a29 0a61 7373 6572 7420 6e65 775f 6576  .).assert new_ev
-000138a0: 656e 7432 2e74 7970 6520 3d3d 2027 496d  ent2.type == 'Im
-000138b0: 6167 6543 7265 6174 6564 270a 6173 7365  ageCreated'.asse
-000138c0: 7274 206e 6577 5f65 7665 6e74 322e 6461  rt new_event2.da
-000138d0: 7461 203d 3d20 6227 3031 3031 3031 3031  ta == b'01010101
-000138e0: 3031 3031 3031 270a 6173 7365 7274 206e  010101'.assert n
-000138f0: 6577 5f65 7665 6e74 322e 6d65 7461 6461  ew_event2.metada
-00013900: 7461 203d 3d20 6227 7b22 6122 3a20 317d  ta == b'{"a": 1}
-00013910: 270a 6173 7365 7274 206e 6577 5f65 7665  '.assert new_eve
-00013920: 6e74 322e 636f 6e74 656e 745f 7479 7065  nt2.content_type
-00013930: 203d 3d20 2761 7070 6c69 6361 7469 6f6e   == 'application
-00013940: 2f6f 6374 6574 2d73 7472 6561 6d27 0a61  /octet-stream'.a
-00013950: 7373 6572 7420 6e65 775f 6576 656e 7432  ssert new_event2
-00013960: 2e69 6420 3d3d 2065 7665 6e74 5f69 640a  .id == event_id.
-00013970: 6060 600a 0a23 2323 2052 6563 6f72 6465  ```..### Recorde
-00013980: 6420 6576 656e 7420 6f62 6a65 6374 730a  d event objects.
-00013990: 0a54 6865 2060 5265 636f 7264 6564 4576  .The `RecordedEv
-000139a0: 656e 7460 2063 6c61 7373 2069 7320 7573  ent` class is us
-000139b0: 6564 2077 6865 6e20 7265 6164 696e 6720  ed when reading 
-000139c0: 6576 656e 7473 2e0a 0a54 6865 2061 7474  events...The att
-000139d0: 7269 6275 7465 2060 7479 7065 6020 6973  ribute `type` is
-000139e0: 2061 2050 7974 686f 6e20 6073 7472 6020   a Python `str` 
-000139f0: 6f62 6a65 6374 2c20 7573 6564 2074 6f20  object, used to 
-00013a00: 696e 6469 6361 7465 2074 6865 2074 7970  indicate the typ
-00013a10: 6520 6f66 2065 7665 6e74 0a74 6861 7420  e of event.that 
-00013a20: 7761 7320 7265 636f 7264 6564 2e0a 0a54  was recorded...T
-00013a30: 6865 2061 7474 7269 6275 7465 2060 6461  he attribute `da
-00013a40: 7461 6020 6973 2061 2050 7974 686f 6e20  ta` is a Python 
-00013a50: 6062 7974 6573 6020 6f62 6a65 6374 2c20  `bytes` object, 
-00013a60: 7573 6564 2074 6f20 696e 6469 6361 7465  used to indicate
-00013a70: 2074 6865 2064 6174 6120 6f66 2074 6865   the data of the
-00013a80: 0a65 7665 6e74 2074 6861 7420 7761 7320  .event that was 
-00013a90: 7265 636f 7264 6564 2e0a 0a54 6865 2061  recorded...The a
-00013aa0: 7474 7269 6275 7465 2060 6d65 7461 6461  ttribute `metada
-00013ab0: 7461 6020 6973 2061 2050 7974 686f 6e20  ta` is a Python 
-00013ac0: 6062 7974 6573 6020 6f62 6a65 6374 2c20  `bytes` object, 
-00013ad0: 7573 6564 2074 6f20 696e 6469 6361 7465  used to indicate
-00013ae0: 2074 6865 206d 6574 6164 6174 6120 6f66   the metadata of
-00013af0: 0a74 6865 2065 7665 6e74 2074 6861 7420  .the event that 
-00013b00: 7761 7320 7265 636f 7264 6564 2e0a 0a54  was recorded...T
-00013b10: 6865 2061 7474 7269 6275 7465 2060 636f  he attribute `co
-00013b20: 6e74 656e 745f 7479 7065 6020 6973 2061  ntent_type` is a
-00013b30: 2050 7974 686f 6e20 6073 7472 6020 6f62   Python `str` ob
-00013b40: 6a65 6374 2c20 7573 6564 2074 6f20 696e  ject, used to in
-00013b50: 6469 6361 7465 2074 6865 2074 7970 6520  dicate the type 
-00013b60: 6f66 0a64 6174 6120 7468 6174 2077 6173  of.data that was
-00013b70: 2072 6563 6f72 6465 6420 666f 7220 7468   recorded for th
-00013b80: 6973 2065 7665 6e74 2028 7573 7561 6c6c  is event (usuall
-00013b90: 7920 6061 7070 6c69 6361 7469 6f6e 2f6a  y `application/j
-00013ba0: 736f 6e60 2074 6f20 696e 6469 6361 7465  son` to indicate
-00013bb0: 2074 6861 740a 7468 6973 2064 6174 6120   that.this data 
-00013bc0: 6361 6e20 6265 2070 6172 7365 6420 6173  can be parsed as
-00013bd0: 204a 534f 4e2c 2062 7574 2061 6c74 6572   JSON, but alter
-00013be0: 6e61 7469 7665 6c79 2060 6170 706c 6963  natively `applic
-00013bf0: 6174 696f 6e2f 6f63 7465 742d 7374 7265  ation/octet-stre
-00013c00: 616d 6020 746f 0a69 6e64 6963 6174 6520  am` to.indicate 
-00013c10: 7468 6174 2069 7420 6973 2073 6f6d 6574  that it is somet
-00013c20: 6869 6e67 2065 6c73 6529 2e0a 0a54 6865  hing else)...The
-00013c30: 2061 7474 7269 6275 7465 2060 6964 6020   attribute `id` 
-00013c40: 6973 2061 2050 7974 686f 6e20 6055 5549  is a Python `UUI
-00013c50: 4460 206f 626a 6563 742c 2075 7365 6420  D` object, used 
-00013c60: 746f 2069 6e64 6963 6174 6520 7468 6520  to indicate the 
-00013c70: 756e 6971 7565 2049 4420 6f66 2074 6865  unique ID of the
-00013c80: 0a65 7665 6e74 2074 6861 7420 7761 7320  .event that was 
-00013c90: 7265 636f 7264 6564 2e20 506c 6561 7365  recorded. Please
-00013ca0: 206e 6f74 652c 2077 6865 6e20 7265 636f   note, when reco
-00013cb0: 7264 6564 2065 7665 6e74 7320 6172 6520  rded events are 
-00013cc0: 7265 7475 726e 6564 2066 726f 6d20 6120  returned from a 
-00013cd0: 6361 6c6c 0a74 6f20 6072 6561 645f 7374  call.to `read_st
-00013ce0: 7265 616d 5f65 7665 6e74 7328 2960 2069  ream_events()` i
-00013cf0: 6e20 4576 656e 7453 746f 7265 4442 2076  n EventStoreDB v
-00013d00: 3231 2e31 302c 2074 6865 2063 6f6d 6d69  21.10, the commi
-00013d10: 7420 706f 7369 7469 6f6e 2069 7320 6e6f  t position is no
-00013d20: 7420 6163 7475 616c 6c79 0a73 6574 2069  t actually.set i
-00013d30: 6e20 7468 6520 7265 7370 6f6e 7365 2e20  n the response. 
-00013d40: 5468 6973 2061 7474 7269 6275 7465 2069  This attribute i
-00013d50: 7320 7479 7065 6420 6173 2061 6e20 6f70  s typed as an op
-00013d60: 7469 6f6e 616c 2076 616c 7565 2028 604f  tional value (`O
-00013d70: 7074 696f 6e61 6c5b 5555 4944 5d60 292c  ptional[UUID]`),
-00013d80: 0a61 6e64 2069 6e20 7468 6520 6361 7365  .and in the case
-00013d90: 206f 6620 7573 696e 6720 4576 656e 7453   of using EventS
-00013da0: 746f 7265 4442 2076 3231 2e31 3020 7468  toreDB v21.10 th
-00013db0: 6520 7661 6c75 6520 6f66 2074 6869 7320  e value of this 
-00013dc0: 6174 7472 6962 7574 6520 7769 6c6c 2062  attribute will b
-00013dd0: 6520 604e 6f6e 6560 0a77 6865 6e20 7265  e `None`.when re
-00013de0: 6164 696e 6720 7265 636f 7264 6564 2065  ading recorded e
-00013df0: 7665 6e74 7320 6672 6f6d 2061 2073 7472  vents from a str
-00013e00: 6561 6d2e 2052 6563 6f72 6465 6420 6576  eam. Recorded ev
-00013e10: 656e 7473 2077 696c 6c20 686f 7765 7665  ents will howeve
-00013e20: 7220 6861 7665 2074 6869 730a 7661 6c75  r have this.valu
-00013e30: 6573 2073 6574 2077 6865 6e20 7265 6164  es set when read
-00013e40: 696e 6720 7265 636f 7264 6564 2065 7665  ing recorded eve
-00013e50: 6e74 7320 6672 6f6d 2060 7265 6164 5f61  nts from `read_a
-00013e60: 6c6c 5f65 7665 6e74 7328 2960 2061 6e64  ll_events()` and
-00013e70: 2066 726f 6d20 626f 7468 0a63 6174 6368   from both.catch
-00013e80: 2d75 7020 616e 6420 7065 7273 6973 7465  -up and persiste
-00013e90: 6e74 2073 7562 7363 7269 7074 696f 6e73  nt subscriptions
-00013ea0: 2e0a 0a54 6865 2061 7474 7269 6275 7465  ...The attribute
-00013eb0: 2060 7374 7265 616d 5f6e 616d 6560 2069   `stream_name` i
-00013ec0: 7320 6120 5079 7468 6f6e 2060 7374 7260  s a Python `str`
-00013ed0: 206f 626a 6563 742c 2075 7365 6420 746f   object, used to
-00013ee0: 2069 6e64 6963 6174 6520 7468 6520 6e61   indicate the na
-00013ef0: 6d65 206f 6620 7468 650a 7374 7265 616d  me of the.stream
-00013f00: 2069 6e20 7768 6963 6820 7468 6520 6576   in which the ev
-00013f10: 656e 7420 7761 7320 7265 636f 7264 6564  ent was recorded
-00013f20: 2e0a 0a54 6865 2061 7474 7269 6275 7465  ...The attribute
-00013f30: 2060 7374 7265 616d 5f70 6f73 6974 696f   `stream_positio
-00013f40: 6e60 2069 7320 6120 5079 7468 6f6e 2060  n` is a Python `
-00013f50: 696e 7460 2c20 7573 6564 2074 6f20 696e  int`, used to in
-00013f60: 6469 6361 7465 2074 6865 2070 6f73 6974  dicate the posit
-00013f70: 696f 6e20 696e 2074 6865 0a73 7472 6561  ion in the.strea
-00013f80: 6d20 6174 2077 6869 6368 2074 6865 2065  m at which the e
-00013f90: 7665 6e74 2077 6173 2072 6563 6f72 6465  vent was recorde
-00013fa0: 642e 0a0a 5468 6520 6174 7472 6962 7574  d...The attribut
-00013fb0: 6520 6063 6f6d 6d69 745f 706f 7369 7469  e `commit_positi
-00013fc0: 6f6e 6020 6973 2061 2050 7974 686f 6e20  on` is a Python 
-00013fd0: 6069 6e74 602c 2075 7365 6420 746f 2069  `int`, used to i
-00013fe0: 6e64 6963 6174 6520 7468 6520 636f 6d6d  ndicate the comm
-00013ff0: 6974 2070 6f73 6974 696f 6e0a 6174 2077  it position.at w
-00014000: 6869 6368 2074 6865 2065 7665 6e74 2077  hich the event w
-00014010: 6173 2072 6563 6f72 6465 642e 0a0a 6060  as recorded...``
-00014020: 6070 7974 686f 6e0a 6672 6f6d 2065 7364  `python.from esd
-00014030: 6263 6c69 656e 742e 6576 656e 7473 2069  bclient.events i
-00014040: 6d70 6f72 7420 5265 636f 7264 6564 4576  mport RecordedEv
-00014050: 656e 740a 0a72 6563 6f72 6465 645f 6576  ent..recorded_ev
-00014060: 656e 7420 3d20 5265 636f 7264 6564 4576  ent = RecordedEv
-00014070: 656e 7428 0a20 2020 2074 7970 653d 274f  ent(.    type='O
-00014080: 7264 6572 4372 6561 7465 6427 2c0a 2020  rderCreated',.  
-00014090: 2020 6461 7461 3d62 277b 7d27 2c0a 2020    data=b'{}',.  
-000140a0: 2020 6d65 7461 6461 7461 3d62 2727 2c0a    metadata=b'',.
-000140b0: 2020 2020 636f 6e74 656e 745f 7479 7065      content_type
-000140c0: 3d27 6170 706c 6963 6174 696f 6e2f 6a73  ='application/js
-000140d0: 6f6e 272c 0a20 2020 2069 643d 7575 6964  on',.    id=uuid
-000140e0: 3428 292c 0a20 2020 2073 7472 6561 6d5f  4(),.    stream_
-000140f0: 6e61 6d65 3d27 7374 7265 616d 3127 2c0a  name='stream1',.
-00014100: 2020 2020 7374 7265 616d 5f70 6f73 6974      stream_posit
-00014110: 696f 6e3d 302c 0a20 2020 2063 6f6d 6d69  ion=0,.    commi
-00014120: 745f 706f 7369 7469 6f6e 3d35 3132 2c0a  t_position=512,.
-00014130: 290a 6060 600a 0a23 2320 436f 6e74 7269  ).```..## Contri
-00014140: 6275 746f 7273 0a0a 2323 2320 496e 7374  butors..### Inst
-00014150: 616c 6c20 506f 6574 7279 0a0a 5468 6520  all Poetry..The 
-00014160: 6669 7273 7420 7468 696e 6720 6973 2074  first thing is t
-00014170: 6f20 6368 6563 6b20 796f 7520 6861 7665  o check you have
-00014180: 2050 6f65 7472 7920 696e 7374 616c 6c65   Poetry installe
-00014190: 642e 0a0a 2020 2020 2420 706f 6574 7279  d...    $ poetry
-000141a0: 202d 2d76 6572 7369 6f6e 0a0a 4966 2079   --version..If y
-000141b0: 6f75 2064 6f6e 2774 2c20 7468 656e 2070  ou don't, then p
-000141c0: 6c65 6173 6520 5b69 6e73 7461 6c6c 2050  lease [install P
-000141d0: 6f65 7472 795d 2868 7474 7073 3a2f 2f70  oetry](https://p
-000141e0: 7974 686f 6e2d 706f 6574 7279 2e6f 7267  ython-poetry.org
-000141f0: 2f64 6f63 732f 2369 6e73 7461 6c6c 696e  /docs/#installin
-00014200: 672d 7769 7468 2d74 6865 2d6f 6666 6963  g-with-the-offic
-00014210: 6961 6c2d 696e 7374 616c 6c65 7229 2e0a  ial-installer)..
-00014220: 0a20 2020 2024 2063 7572 6c20 2d73 534c  .    $ curl -sSL
-00014230: 2068 7474 7073 3a2f 2f69 6e73 7461 6c6c   https://install
-00014240: 2e70 7974 686f 6e2d 706f 6574 7279 2e6f  .python-poetry.o
-00014250: 7267 207c 2070 7974 686f 6e33 202d 0a0a  rg | python3 -..
-00014260: 4974 2077 696c 6c20 6865 6c70 2074 6f20  It will help to 
-00014270: 6d61 6b65 2073 7572 6520 506f 6574 7279  make sure Poetry
-00014280: 2773 2062 696e 2064 6972 6563 746f 7279  's bin directory
-00014290: 2069 7320 696e 2079 6f75 7220 6050 4154   is in your `PAT
-000142a0: 4860 2065 6e76 6972 6f6e 6d65 6e74 2076  H` environment v
-000142b0: 6172 6961 626c 652e 0a0a 4275 7420 696e  ariable...But in
-000142c0: 2061 6e79 2063 6173 652c 206d 616b 6520   any case, make 
-000142d0: 7375 7265 2079 6f75 206b 6e6f 7720 7468  sure you know th
-000142e0: 6520 7061 7468 2074 6f20 7468 6520 6070  e path to the `p
-000142f0: 6f65 7472 7960 2065 7865 6375 7461 626c  oetry` executabl
-00014300: 652e 2054 6865 2050 6f65 7472 790a 696e  e. The Poetry.in
-00014310: 7374 616c 6c65 7220 7465 6c6c 7320 796f  staller tells yo
-00014320: 7520 7768 6572 6520 6974 2068 6173 2062  u where it has b
-00014330: 6565 6e20 696e 7374 616c 6c65 642c 2061  een installed, a
-00014340: 6e64 2068 6f77 2074 6f20 636f 6e66 6967  nd how to config
-00014350: 7572 6520 796f 7572 2073 6865 6c6c 2e0a  ure your shell..
-00014360: 0a50 6c65 6173 6520 7265 6665 7220 746f  .Please refer to
-00014370: 2074 6865 205b 506f 6574 7279 2064 6f63   the [Poetry doc
-00014380: 735d 2868 7474 7073 3a2f 2f70 7974 686f  s](https://pytho
-00014390: 6e2d 706f 6574 7279 2e6f 7267 2f64 6f63  n-poetry.org/doc
-000143a0: 732f 2920 666f 7220 6775 6964 616e 6365  s/) for guidance
-000143b0: 206f 6e0a 7573 696e 6720 506f 6574 7279   on.using Poetry
-000143c0: 2e0a 0a23 2323 2053 6574 7570 2066 6f72  ...### Setup for
-000143d0: 2050 7943 6861 726d 2075 7365 7273 0a0a   PyCharm users..
-000143e0: 596f 7520 6361 6e20 6561 7369 6c79 206f  You can easily o
-000143f0: 6274 6169 6e20 7468 6520 7072 6f6a 6563  btain the projec
-00014400: 7420 6669 6c65 7320 7573 696e 6720 5079  t files using Py
-00014410: 4368 6172 6d20 286d 656e 7520 2247 6974  Charm (menu "Git
-00014420: 203e 2043 6c6f 6e65 2e2e 2e22 292e 0a50   > Clone...")..P
-00014430: 7943 6861 726d 2077 696c 6c20 7468 656e  yCharm will then
-00014440: 2075 7375 616c 6c79 2070 726f 6d70 7420   usually prompt 
-00014450: 796f 7520 746f 206f 7065 6e20 7468 6520  you to open the 
-00014460: 7072 6f6a 6563 742e 0a0a 4f70 656e 2074  project...Open t
-00014470: 6865 2070 726f 6a65 6374 2069 6e20 6120  he project in a 
-00014480: 6e65 7720 7769 6e64 6f77 2e20 5079 4368  new window. PyCh
-00014490: 6172 6d20 7769 6c6c 2074 6865 6e20 7573  arm will then us
-000144a0: 7561 6c6c 7920 7072 6f6d 7074 2079 6f75  ually prompt you
-000144b0: 2074 6f20 6372 6561 7465 0a61 206e 6577   to create.a new
-000144c0: 2076 6972 7475 616c 2065 6e76 6972 6f6e   virtual environ
-000144d0: 6d65 6e74 2e0a 0a43 7265 6174 6520 6120  ment...Create a 
-000144e0: 6e65 7720 506f 6574 7279 2076 6972 7475  new Poetry virtu
-000144f0: 616c 2065 6e76 6972 6f6e 6d65 6e74 2066  al environment f
-00014500: 6f72 2074 6865 2070 726f 6a65 6374 2e20  or the project. 
-00014510: 4966 2050 7943 6861 726d 2064 6f65 736e  If PyCharm doesn
-00014520: 2774 2061 6c72 6561 6479 0a6b 6e6f 7720  't already.know 
-00014530: 7768 6572 6520 796f 7572 2060 706f 6574  where your `poet
-00014540: 7279 6020 6578 6563 7574 6162 6c65 2069  ry` executable i
-00014550: 732c 2074 6865 6e20 7365 7420 7468 6520  s, then set the 
-00014560: 7061 7468 2074 6f20 796f 7572 2060 706f  path to your `po
-00014570: 6574 7279 6020 6578 6563 7574 6162 6c65  etry` executable
-00014580: 0a69 6e20 7468 6520 224e 6577 2050 6f65  .in the "New Poe
-00014590: 7472 7920 456e 7669 726f 6e6d 656e 7422  try Environment"
-000145a0: 2066 6f72 6d20 696e 7075 7420 6669 656c   form input fiel
-000145b0: 6420 6c61 6265 6c6c 6564 2022 506f 6574  d labelled "Poet
-000145c0: 7279 2065 7865 6375 7461 626c 6522 2e20  ry executable". 
-000145d0: 496e 2074 6865 0a22 4e65 7720 506f 6574  In the."New Poet
-000145e0: 7279 2045 6e76 6972 6f6e 6d65 6e74 2220  ry Environment" 
-000145f0: 666f 726d 2c20 796f 7520 7769 6c6c 2061  form, you will a
-00014600: 6c73 6f20 6861 7665 2074 6865 206f 7070  lso have the opp
-00014610: 6f72 7475 6e69 7479 2074 6f20 7365 6c65  ortunity to sele
-00014620: 6374 2077 6869 6368 0a50 7974 686f 6e20  ct which.Python 
-00014630: 6578 6563 7574 6162 6c65 2077 696c 6c20  executable will 
-00014640: 6265 2075 7365 6420 6279 2074 6865 2076  be used by the v
-00014650: 6972 7475 616c 2065 6e76 6972 6f6e 6d65  irtual environme
-00014660: 6e74 2e0a 0a50 7943 6861 726d 2077 696c  nt...PyCharm wil
-00014670: 6c20 7468 656e 2063 7265 6174 6520 6120  l then create a 
-00014680: 6e65 7720 506f 6574 7279 2076 6972 7475  new Poetry virtu
-00014690: 616c 2065 6e76 6972 6f6e 6d65 6e74 2066  al environment f
-000146a0: 6f72 2079 6f75 7220 7072 6f6a 6563 742c  or your project,
-000146b0: 2075 7369 6e67 0a61 2070 6172 7469 6375   using.a particu
-000146c0: 6c61 7220 7665 7273 696f 6e20 6f66 2050  lar version of P
-000146d0: 7974 686f 6e2c 2061 6e64 2061 6c73 6f20  ython, and also 
-000146e0: 696e 7374 616c 6c20 696e 746f 2074 6869  install into thi
-000146f0: 7320 7669 7274 7561 6c20 656e 7669 726f  s virtual enviro
-00014700: 6e6d 656e 7420 7468 650a 7072 6f6a 6563  nment the.projec
-00014710: 7427 7320 7061 636b 6167 6520 6465 7065  t's package depe
-00014720: 6e64 656e 6369 6573 2061 6363 6f72 6469  ndencies accordi
-00014730: 6e67 2074 6f20 7468 6520 7072 6f6a 6563  ng to the projec
-00014740: 7427 7320 6070 6f65 7472 792e 6c6f 636b  t's `poetry.lock
-00014750: 6020 6669 6c65 2e0a 0a59 6f75 2063 616e  ` file...You can
-00014760: 2061 6464 2064 6966 6665 7265 6e74 2050   add different P
-00014770: 6f65 7472 7920 656e 7669 726f 6e6d 656e  oetry environmen
-00014780: 7473 2066 6f72 2064 6966 6665 7265 6e74  ts for different
-00014790: 2050 7974 686f 6e20 7665 7273 696f 6e73   Python versions
-000147a0: 2c20 616e 6420 7377 6974 6368 0a62 6574  , and switch.bet
-000147b0: 7765 656e 2074 6865 6d20 7573 696e 6720  ween them using 
-000147c0: 7468 6520 2250 7974 686f 6e20 496e 7465  the "Python Inte
-000147d0: 7270 7265 7465 7222 2073 6574 7469 6e67  rpreter" setting
-000147e0: 7320 6f66 2050 7943 6861 726d 2e20 4966  s of PyCharm. If
-000147f0: 2079 6f75 2077 616e 7420 746f 2075 7365   you want to use
-00014800: 0a61 2076 6572 7369 6f6e 206f 6620 5079  .a version of Py
-00014810: 7468 6f6e 2074 6861 7420 6973 6e27 7420  thon that isn't 
-00014820: 696e 7374 616c 6c65 642c 2065 6974 6865  installed, eithe
-00014830: 7220 7573 6520 796f 7572 2066 6176 6f75  r use your favou
-00014840: 7269 7465 2070 6163 6b61 6765 206d 616e  rite package man
-00014850: 6167 6572 2c0a 6f72 2069 6e73 7461 6c6c  ager,.or install
-00014860: 2050 7974 686f 6e20 6279 2064 6f77 6e6c   Python by downl
-00014870: 6f61 6469 6e67 2061 6e20 696e 7374 616c  oading an instal
-00014880: 6c65 7220 666f 7220 7265 6365 6e74 2076  ler for recent v
-00014890: 6572 7369 6f6e 7320 6f66 2050 7974 686f  ersions of Pytho
-000148a0: 6e20 6469 7265 6374 6c79 0a66 726f 6d20  n directly.from 
-000148b0: 7468 6520 5b50 7974 686f 6e20 7765 6273  the [Python webs
-000148c0: 6974 655d 2868 7474 7073 3a2f 2f77 7777  ite](https://www
-000148d0: 2e70 7974 686f 6e2e 6f72 672f 646f 776e  .python.org/down
-000148e0: 6c6f 6164 732f 292e 0a0a 4f6e 6365 2070  loads/)...Once p
-000148f0: 726f 6a65 6374 2064 6570 656e 6465 6e63  roject dependenc
-00014900: 6965 7320 6861 7665 2062 6565 6e20 696e  ies have been in
-00014910: 7374 616c 6c65 642c 2079 6f75 2073 686f  stalled, you sho
-00014920: 756c 6420 6265 2061 626c 6520 746f 2072  uld be able to r
-00014930: 756e 2074 6573 7473 0a66 726f 6d20 7769  un tests.from wi
-00014940: 7468 696e 2050 7943 6861 726d 2028 7269  thin PyCharm (ri
-00014950: 6768 742d 636c 6963 6b20 6f6e 2074 6865  ght-click on the
-00014960: 2060 7465 7374 7360 2066 6f6c 6465 7220   `tests` folder 
-00014970: 616e 6420 7365 6c65 6374 2074 6865 2027  and select the '
-00014980: 5275 6e27 206f 7074 696f 6e29 2e0a 0a42  Run' option)...B
-00014990: 6563 6175 7365 206f 6620 6120 636f 6e66  ecause of a conf
-000149a0: 6c69 6374 2062 6574 7765 656e 2070 7974  lict between pyt
-000149b0: 6573 7420 616e 6420 5079 4368 6172 6d27  est and PyCharm'
-000149c0: 7320 6465 6275 6767 6572 2061 6e64 2074  s debugger and t
-000149d0: 6865 2063 6f76 6572 6167 6520 746f 6f6c  he coverage tool
-000149e0: 2c0a 796f 7520 6d61 7920 6e65 6564 2074  ,.you may need t
-000149f0: 6f20 6164 6420 6060 2d2d 6e6f 2d63 6f76  o add ``--no-cov
-00014a00: 6060 2061 7320 616e 206f 7074 696f 6e20  `` as an option 
-00014a10: 746f 2074 6865 2074 6573 7420 7275 6e6e  to the test runn
-00014a20: 6572 2074 656d 706c 6174 652e 2041 6c74  er template. Alt
-00014a30: 6572 6e61 7469 7665 6c79 2c0a 6a75 7374  ernatively,.just
-00014a40: 2075 7365 2074 6865 2050 7974 686f 6e20   use the Python 
-00014a50: 5374 616e 6461 7264 204c 6962 7261 7279  Standard Library
-00014a60: 2773 2060 6075 6e69 7474 6573 7460 6020  's ``unittest`` 
-00014a70: 6d6f 6475 6c65 2e0a 0a59 6f75 2073 686f  module...You sho
-00014a80: 756c 6420 616c 736f 2062 6520 6162 6c65  uld also be able
-00014a90: 2074 6f20 6f70 656e 2061 2074 6572 6d69   to open a termi
-00014aa0: 6e61 6c20 7769 6e64 6f77 2069 6e20 5079  nal window in Py
-00014ab0: 4368 6172 6d2c 2061 6e64 2072 756e 2074  Charm, and run t
-00014ac0: 6865 2070 726f 6a65 6374 2773 0a4d 616b  he project's.Mak
-00014ad0: 6566 696c 6520 636f 6d6d 616e 6473 2066  efile commands f
-00014ae0: 726f 6d20 7468 6520 636f 6d6d 616e 6420  rom the command 
-00014af0: 6c69 6e65 2028 7365 6520 6265 6c6f 7729  line (see below)
-00014b00: 2e0a 0a23 2323 2053 6574 7570 2066 726f  ...### Setup fro
-00014b10: 6d20 636f 6d6d 616e 6420 6c69 6e65 0a0a  m command line..
-00014b20: 4f62 7461 696e 2074 6865 2070 726f 6a65  Obtain the proje
-00014b30: 6374 2066 696c 6573 2c20 7573 696e 6720  ct files, using 
-00014b40: 4769 7420 6f72 2073 7569 7461 626c 6520  Git or suitable 
-00014b50: 616c 7465 726e 6174 6976 652e 0a0a 496e  alternative...In
-00014b60: 2061 2074 6572 6d69 6e61 6c20 6170 706c   a terminal appl
-00014b70: 6963 6174 696f 6e2c 2063 6861 6e67 6520  ication, change 
-00014b80: 796f 7572 2063 7572 7265 6e74 2077 6f72  your current wor
-00014b90: 6b69 6e67 2064 6972 6563 746f 7279 0a74  king directory.t
-00014ba0: 6f20 7468 6520 726f 6f74 2066 6f6c 6465  o the root folde
-00014bb0: 7220 6f66 2074 6865 2070 726f 6a65 6374  r of the project
-00014bc0: 2066 696c 6573 2e20 5468 6572 6520 7368   files. There sh
-00014bd0: 6f75 6c64 2062 6520 6120 4d61 6b65 6669  ould be a Makefi
-00014be0: 6c65 0a69 6e20 7468 6973 2066 6f6c 6465  le.in this folde
-00014bf0: 722e 0a0a 5573 6520 7468 6520 4d61 6b65  r...Use the Make
-00014c00: 6669 6c65 2074 6f20 6372 6561 7465 2061  file to create a
-00014c10: 206e 6577 2050 6f65 7472 7920 7669 7274   new Poetry virt
-00014c20: 7561 6c20 656e 7669 726f 6e6d 656e 7420  ual environment 
-00014c30: 666f 7220 7468 650a 7072 6f6a 6563 7420  for the.project 
-00014c40: 616e 6420 696e 7374 616c 6c20 7468 6520  and install the 
-00014c50: 7072 6f6a 6563 7427 7320 7061 636b 6167  project's packag
-00014c60: 6520 6465 7065 6e64 656e 6369 6573 2069  e dependencies i
-00014c70: 6e74 6f20 6974 2c0a 7573 696e 6720 7468  nto it,.using th
-00014c80: 6520 666f 6c6c 6f77 696e 6720 636f 6d6d  e following comm
-00014c90: 616e 642e 0a0a 2020 2020 2420 6d61 6b65  and...    $ make
-00014ca0: 2069 6e73 7461 6c6c 2d70 6163 6b61 6765   install-package
-00014cb0: 730a 0a49 7427 7320 616c 736f 2070 6f73  s..It's also pos
-00014cc0: 7369 626c 6520 746f 2061 6c73 6f20 696e  sible to also in
-00014cd0: 7374 616c 6c20 7468 6520 7072 6f6a 6563  stall the projec
-00014ce0: 7420 696e 2027 6564 6974 6162 6c65 206d  t in 'editable m
-00014cf0: 6f64 6527 2e0a 0a20 2020 2024 206d 616b  ode'...    $ mak
-00014d00: 6520 696e 7374 616c 6c0a 0a50 6c65 6173  e install..Pleas
-00014d10: 6520 6e6f 7465 2c20 6966 2079 6f75 2063  e note, if you c
-00014d20: 7265 6174 6520 7468 6520 7669 7274 7561  reate the virtua
-00014d30: 6c20 656e 7669 726f 6e6d 656e 7420 696e  l environment in
-00014d40: 2074 6869 7320 7761 792c 2061 6e64 2074   this way, and t
-00014d50: 6865 6e20 7472 7920 746f 0a6f 7065 6e20  hen try to.open 
-00014d60: 7468 6520 7072 6f6a 6563 7420 696e 2050  the project in P
-00014d70: 7943 6861 726d 2061 6e64 2063 6f6e 6669  yCharm and confi
-00014d80: 6775 7265 2074 6865 2070 726f 6a65 6374  gure the project
-00014d90: 2074 6f20 7573 6520 7468 6973 2076 6972   to use this vir
-00014da0: 7475 616c 0a65 6e76 6972 6f6e 6d65 6e74  tual.environment
-00014db0: 2061 7320 616e 2022 4578 6973 7469 6e67   as an "Existing
-00014dc0: 2050 6f65 7472 7920 456e 7669 726f 6e6d   Poetry Environm
-00014dd0: 656e 7422 2c20 5079 4368 6172 6d20 736f  ent", PyCharm so
-00014de0: 6d65 7469 6d65 7320 6861 7320 736f 6d65  metimes has some
-00014df0: 0a69 7373 7565 7320 2864 6f6e 2774 206b  .issues (don't k
-00014e00: 6e6f 7720 7768 7929 2077 6869 6368 206d  now why) which m
-00014e10: 6967 6874 2062 6520 7072 6f62 6c65 6d61  ight be problema
-00014e20: 7469 632e 2049 6620 796f 7520 656e 636f  tic. If you enco
-00014e30: 756e 7465 7220 7375 6368 0a69 7373 7565  unter such.issue
-00014e40: 732c 2079 6f75 2063 616e 2072 6573 6f6c  s, you can resol
-00014e50: 7665 2074 6865 7365 2069 7373 7565 7320  ve these issues 
-00014e60: 6279 2064 656c 6574 696e 6720 7468 6520  by deleting the 
-00014e70: 7669 7274 7561 6c20 656e 7669 726f 6e6d  virtual environm
-00014e80: 656e 740a 616e 6420 6372 6561 7469 6e67  ent.and creating
-00014e90: 2074 6865 2050 6f65 7472 7920 7669 7274   the Poetry virt
-00014ea0: 7561 6c20 656e 7669 726f 6e6d 656e 7420  ual environment 
-00014eb0: 7573 696e 6720 5079 4368 6172 6d20 2873  using PyCharm (s
-00014ec0: 6565 2061 626f 7665 292e 0a0a 2323 2320  ee above)...### 
-00014ed0: 5072 6f6a 6563 7420 4d61 6b65 6669 6c65  Project Makefile
-00014ee0: 2063 6f6d 6d61 6e64 730a 0a59 6f75 2063   commands..You c
-00014ef0: 616e 2073 7461 7274 2045 7665 6e74 5374  an start EventSt
-00014f00: 6f72 6544 4220 7573 696e 6720 7468 6520  oreDB using the 
-00014f10: 666f 6c6c 6f77 696e 6720 636f 6d6d 616e  following comman
-00014f20: 642e 0a0a 2020 2020 2420 6d61 6b65 2073  d...    $ make s
-00014f30: 7461 7274 2d65 7665 6e74 7374 6f72 6564  tart-eventstored
-00014f40: 620a 0a59 6f75 2063 616e 2072 756e 2074  b..You can run t
-00014f50: 6573 7473 2075 7369 6e67 2074 6865 2066  ests using the f
-00014f60: 6f6c 6c6f 7769 6e67 2063 6f6d 6d61 6e64  ollowing command
-00014f70: 2028 6e65 6564 7320 4576 656e 7453 746f   (needs EventSto
-00014f80: 7265 4442 2074 6f20 6265 2072 756e 6e69  reDB to be runni
-00014f90: 6e67 292e 0a0a 2020 2020 2420 6d61 6b65  ng)...    $ make
-00014fa0: 2074 6573 740a 0a59 6f75 2063 616e 2073   test..You can s
-00014fb0: 746f 7020 4576 656e 7453 746f 7265 4442  top EventStoreDB
-00014fc0: 2075 7369 6e67 2074 6865 2066 6f6c 6c6f   using the follo
-00014fd0: 7769 6e67 2063 6f6d 6d61 6e64 2e0a 0a20  wing command... 
-00014fe0: 2020 2024 206d 616b 6520 7374 6f70 2d65     $ make stop-e
-00014ff0: 7665 6e74 7374 6f72 6564 620a 0a59 6f75  ventstoredb..You
-00015000: 2063 616e 2063 6865 636b 2074 6865 2066   can check the f
-00015010: 6f72 6d61 7474 696e 6720 6f66 2074 6865  ormatting of the
-00015020: 2063 6f64 6520 7573 696e 6720 7468 6520   code using the 
-00015030: 666f 6c6c 6f77 696e 6720 636f 6d6d 616e  following comman
-00015040: 642e 0a0a 2020 2020 2420 6d61 6b65 206c  d...    $ make l
-00015050: 696e 740a 0a59 6f75 2063 616e 2072 6566  int..You can ref
-00015060: 6f72 6d61 7420 7468 6520 636f 6465 2075  ormat the code u
-00015070: 7369 6e67 2074 6865 2066 6f6c 6c6f 7769  sing the followi
-00015080: 6e67 2063 6f6d 6d61 6e64 2e0a 0a20 2020  ng command...   
-00015090: 2024 206d 616b 6520 666d 740a 0a54 6573   $ make fmt..Tes
-000150a0: 7473 2062 656c 6f6e 6720 696e 2060 2e2f  ts belong in `./
-000150b0: 7465 7374 7360 2e20 436f 6465 2d75 6e64  tests`. Code-und
-000150c0: 6572 2d74 6573 7420 6265 6c6f 6e67 7320  er-test belongs 
-000150d0: 696e 2060 2e2f 6573 6462 636c 6965 6e74  in `./esdbclient
-000150e0: 602e 0a0a 4564 6974 2070 6163 6b61 6765  `...Edit package
-000150f0: 2064 6570 656e 6465 6e63 6965 7320 696e   dependencies in
-00015100: 2060 7079 7072 6f6a 6563 742e 746f 6d6c   `pyproject.toml
-00015110: 602e 2055 7064 6174 6520 696e 7374 616c  `. Update instal
-00015120: 6c65 6420 7061 636b 6167 6573 2028 616e  led packages (an
-00015130: 6420 7468 650a 6070 6f65 7472 792e 6c6f  d the.`poetry.lo
-00015140: 636b 6020 6669 6c65 2920 7573 696e 6720  ck` file) using 
-00015150: 7468 6520 666f 6c6c 6f77 696e 6720 636f  the following co
-00015160: 6d6d 616e 642e 0a0a 2020 2020 2420 6d61  mmand...    $ ma
-00015170: 6b65 2075 7064 6174 652d 7061 636b 6167  ke update-packag
-00015180: 6573 0a                                  es.
+00003830: 6e60 2061 7267 756d 656e 7420 6973 2072  n` argument is r
+00003840: 6571 7569 7265 642c 2069 7320 6578 7065  equired, is expe
+00003850: 6374 6564 2074 6f20 6265 3a20 604e 6f6e  cted to be: `Non
+00003860: 6560 0a69 6620 6576 656e 7473 2061 7265  e`.if events are
+00003870: 2062 6569 6e67 2077 7269 7474 656e 2074   being written t
+00003880: 6f20 6120 6e65 7720 7374 7265 616d 2c20  o a new stream, 
+00003890: 616e 6420 6f74 6865 7277 6973 6520 616e  and otherwise an
+000038a0: 2050 7974 686f 6e20 6069 6e74 600a 6571   Python `int`.eq
+000038b0: 7561 6c20 746f 2074 6865 2070 6f73 6974  ual to the posit
+000038c0: 696f 6e20 696e 2074 6865 2073 7472 6561  ion in the strea
+000038d0: 6d20 6f66 2074 6865 206c 6173 7420 7265  m of the last re
+000038e0: 636f 7264 6564 2065 7665 6e74 2069 6e20  corded event in 
+000038f0: 7468 6520 7374 7265 616d 2e0a 0a54 6865  the stream...The
+00003900: 2060 6576 656e 7473 6020 6172 6775 6d65   `events` argume
+00003910: 6e74 2069 7320 7265 7175 6972 6564 2c20  nt is required, 
+00003920: 616e 6420 6973 2065 7870 6563 7465 6420  and is expected 
+00003930: 746f 2062 6520 6120 7365 7175 656e 6365  to be a sequence
+00003940: 206f 6620 6e65 770a 6576 656e 7420 6f62   of new.event ob
+00003950: 6a65 6374 7320 746f 2062 6520 6170 7065  jects to be appe
+00003960: 6e64 6564 2074 6f20 7468 6520 6e61 6d65  nded to the name
+00003970: 6420 7374 7265 616d 2e20 5468 6520 604e  d stream. The `N
+00003980: 6577 4576 656e 7460 2063 6c61 7373 2073  ewEvent` class s
+00003990: 686f 756c 640a 6265 2075 7365 6420 746f  hould.be used to
+000039a0: 2063 6f6e 7374 7275 6374 206e 6577 2065   construct new e
+000039b0: 7665 6e74 206f 626a 6563 7473 2028 7365  vent objects (se
+000039c0: 6520 6265 6c6f 7729 2e0a 0a54 6869 7320  e below)...This 
+000039d0: 6d65 7468 6f64 2074 616b 6573 2061 6e20  method takes an 
+000039e0: 6f70 7469 6f6e 616c 2060 7469 6d65 6f75  optional `timeou
+000039f0: 7460 2061 7267 756d 656e 742c 2077 6869  t` argument, whi
+00003a00: 6368 2069 7320 6120 5079 7468 6f6e 2060  ch is a Python `
+00003a10: 666c 6f61 7460 2074 6861 7420 7365 7473  float` that sets
+00003a20: 0a61 2064 6561 646c 696e 6520 666f 7220  .a deadline for 
+00003a30: 7468 6520 636f 6d70 6c65 7469 6f6e 206f  the completion o
+00003a40: 6620 7468 6520 6752 5043 206f 7065 7261  f the gRPC opera
+00003a50: 7469 6f6e 2e0a 0a53 7472 6561 6d73 2061  tion...Streams a
+00003a60: 7265 2063 7265 6174 6564 2062 7920 7772  re created by wr
+00003a70: 6974 696e 6720 6576 656e 7473 2e20 5468  iting events. Th
+00003a80: 6520 636f 7272 6563 7420 7661 6c75 6520  e correct value 
+00003a90: 6f66 2074 6865 2060 6578 7065 6374 6564  of the `expected
+00003aa0: 5f70 6f73 6974 696f 6e60 0a61 7267 756d  _position`.argum
+00003ab0: 656e 7420 7768 656e 2077 7269 7469 6e67  ent when writing
+00003ac0: 2074 6865 2066 6972 7374 2065 7665 6e74   the first event
+00003ad0: 206f 6620 6120 6e65 7720 7374 7265 616d   of a new stream
+00003ae0: 2069 7320 604e 6f6e 6560 2e20 506c 6561   is `None`. Plea
+00003af0: 7365 206e 6f74 652c 2069 7420 6973 0a6e  se note, it is.n
+00003b00: 6f74 2070 6f73 7369 626c 6520 746f 2073  ot possible to s
+00003b10: 6f6d 6568 6f77 2063 7265 6174 6520 616e  omehow create an
+00003b20: 2022 656d 7074 7922 2073 7472 6561 6d20   "empty" stream 
+00003b30: 696e 2045 7665 6e74 5374 6f72 6544 422e  in EventStoreDB.
+00003b40: 0a0a 5468 6520 7374 7265 616d 2070 6f73  ..The stream pos
+00003b50: 6974 696f 6e73 206f 6620 7265 636f 7264  itions of record
+00003b60: 6564 2065 7665 6e74 7320 696e 2061 2073  ed events in a s
+00003b70: 7472 6561 6d20 7374 6172 7420 6672 6f6d  tream start from
+00003b80: 207a 6572 6f2c 2061 6e64 2066 6f72 6d20   zero, and form 
+00003b90: 6120 6761 706c 6573 730a 7365 7175 656e  a gapless.sequen
+00003ba0: 6365 206f 6620 696e 7465 6765 7273 2e20  ce of integers. 
+00003bb0: 5468 6520 7374 7265 616d 2070 6f73 6974  The stream posit
+00003bc0: 696f 6e20 6f66 2074 6865 2066 6972 7374  ion of the first
+00003bd0: 2072 6563 6f72 6465 6420 6576 656e 7420   recorded event 
+00003be0: 696e 2061 2073 7472 6561 6d20 6973 0a60  in a stream is.`
+00003bf0: 3060 2e20 416e 6420 736f 2077 6865 6e20  0`. And so when 
+00003c00: 6170 7065 6e64 696e 6720 7468 6520 7365  appending the se
+00003c10: 636f 6e64 206e 6577 2065 7665 6e74 2074  cond new event t
+00003c20: 6f20 6120 7374 7265 616d 2074 6861 7420  o a stream that 
+00003c30: 6861 7320 6f6e 6520 7265 636f 7264 6564  has one recorded
+00003c40: 2065 7665 6e74 2c0a 7468 6520 636f 7272   event,.the corr
+00003c50: 6563 7420 7661 6c75 6520 6f66 2074 6865  ect value of the
+00003c60: 2060 6578 7065 6374 6564 5f70 6f73 6974   `expected_posit
+00003c70: 696f 6e60 2061 7267 756d 656e 7420 6973  ion` argument is
+00003c80: 2060 3060 2e20 5369 6d69 6c61 726c 792c   `0`. Similarly,
+00003c90: 2074 6865 2073 7472 6561 6d0a 706f 7369   the stream.posi
+00003ca0: 7469 6f6e 206f 6620 7468 6520 7365 636f  tion of the seco
+00003cb0: 6e64 2072 6563 6f72 6465 6420 6576 656e  nd recorded even
+00003cc0: 7420 696e 2061 2073 7472 6561 6d20 6973  t in a stream is
+00003cd0: 2060 3160 2c20 616e 6420 736f 2077 6865   `1`, and so whe
+00003ce0: 6e20 6170 7065 6e64 696e 6720 7468 650a  n appending the.
+00003cf0: 7468 6972 6420 6e65 7720 6576 656e 7420  third new event 
+00003d00: 746f 2061 2073 7472 6561 6d20 7468 6174  to a stream that
+00003d10: 2068 6173 2074 776f 2072 6563 6f72 6465   has two recorde
+00003d20: 6420 6576 656e 7473 2c20 7468 6520 636f  d events, the co
+00003d30: 7272 6563 7420 7661 6c75 6520 6f66 2074  rrect value of t
+00003d40: 6865 0a60 6578 7065 6374 6564 5f70 6f73  he.`expected_pos
+00003d50: 6974 696f 6e60 2061 7267 756d 656e 7420  ition` argument 
+00003d60: 6973 2060 3160 2e20 416e 6420 736f 206f  is `1`. And so o
+00003d70: 6e2e 2e2e 2028 5468 6572 6520 6973 2061  n... (There is a
+00003d80: 2074 6865 6f72 6574 6963 616c 206d 6178   theoretical max
+00003d90: 696d 756d 0a6e 756d 6265 7220 6f66 2072  imum.number of r
+00003da0: 6563 6f72 6465 6420 6576 656e 7473 2074  ecorded events t
+00003db0: 6861 7420 616e 7920 7374 7265 616d 2063  hat any stream c
+00003dc0: 616e 2068 6176 652c 2062 7574 2049 276d  an have, but I'm
+00003dd0: 206e 6f74 2073 7572 6520 7768 6174 2069   not sure what i
+00003de0: 7420 6973 3b0a 6d61 7962 6520 392c 3232  t is;.maybe 9,22
+00003df0: 332c 3337 322c 3033 362c 3835 342c 3737  3,372,036,854,77
+00003e00: 352c 3830 3720 6265 6361 7573 6520 6974  5,807 because it
+00003e10: 2069 7320 696d 706c 656d 656e 7465 6420   is implemented 
+00003e20: 6173 2061 2060 6c6f 6e67 6020 696e 2043  as a `long` in C
+00003e30: 233f 290a 0a49 6620 7468 6572 6520 6973  #?)..If there is
+00003e40: 2061 206d 6973 6d61 7463 6820 6265 7477   a mismatch betw
+00003e50: 6565 6e20 7468 6520 6769 7665 6e20 7661  een the given va
+00003e60: 6c75 6520 6f66 2074 6865 2060 6578 7065  lue of the `expe
+00003e70: 6374 6564 5f70 6f73 6974 696f 6e60 2061  cted_position` a
+00003e80: 7267 756d 656e 740a 616e 6420 7468 6520  rgument.and the 
+00003e90: 706f 7369 7469 6f6e 206f 6620 7468 6520  position of the 
+00003ea0: 6c61 7374 2072 6563 6f72 6465 6420 6576  last recorded ev
+00003eb0: 656e 7420 696e 2061 2073 7472 6561 6d2c  ent in a stream,
+00003ec0: 2074 6865 6e20 616e 2060 4578 7065 6374   then an `Expect
+00003ed0: 6564 506f 7369 7469 6f6e 4572 726f 7260  edPositionError`
+00003ee0: 0a65 7863 6570 7469 6f6e 2077 696c 6c20  .exception will 
+00003ef0: 6265 2072 6169 7365 642e 2054 6869 7320  be raised. This 
+00003f00: 6566 6665 6374 6976 656c 7920 6163 636f  effectively acco
+00003f10: 6d70 6c69 7368 6573 206f 7074 696d 6973  mplishes optimis
+00003f20: 7469 6320 636f 6e63 7572 7265 6e63 7920  tic concurrency 
+00003f30: 636f 6e74 726f 6c2e 0a0a 4966 2079 6f75  control...If you
+00003f40: 2077 6973 6820 746f 2064 6973 6162 6c65   wish to disable
+00003f50: 206f 7074 696d 6973 7469 6320 636f 6e63   optimistic conc
+00003f60: 7572 7265 6e63 7920 636f 6e74 726f 6c20  urrency control 
+00003f70: 7768 656e 2061 7070 656e 6469 6e67 206e  when appending n
+00003f80: 6577 2065 7665 6e74 732c 2079 6f75 0a63  ew events, you.c
+00003f90: 616e 2073 6574 2074 6865 2060 6578 7065  an set the `expe
+00003fa0: 6374 6564 5f70 6f73 6974 696f 6e60 2074  cted_position` t
+00003fb0: 6f20 6120 6e65 6761 7469 7665 2069 6e74  o a negative int
+00003fc0: 6567 6572 2e0a 0a49 6620 796f 7520 6e65  eger...If you ne
+00003fd0: 6564 2074 6f20 6469 7363 6f76 6572 2074  ed to discover t
+00003fe0: 6865 2063 7572 7265 6e74 2070 6f73 6974  he current posit
+00003ff0: 696f 6e20 6f66 2074 6865 206c 6173 7420  ion of the last 
+00004000: 7265 636f 7264 6564 2065 7665 6e74 2069  recorded event i
+00004010: 6e20 6120 7374 7265 616d 2c0a 796f 7520  n a stream,.you 
+00004020: 6361 6e20 7573 6520 7468 6520 6067 6574  can use the `get
+00004030: 5f73 7472 6561 6d5f 706f 7369 7469 6f6e  _stream_position
+00004040: 2829 6020 6d65 7468 6f64 2028 7365 6520  ()` method (see 
+00004050: 6265 6c6f 7729 2e0a 0a50 6c65 6173 6520  below)...Please 
+00004060: 6e6f 7465 2c20 7468 6520 6170 7065 6e64  note, the append
+00004070: 2065 7665 6e74 7320 6f70 6572 6174 696f   events operatio
+00004080: 6e20 6973 2061 746f 6d69 632c 2073 6f20  n is atomic, so 
+00004090: 7468 6174 2065 6974 6865 7220 616c 6c0a  that either all.
+000040a0: 6f72 206e 6f6e 6520 6f66 2074 6865 2067  or none of the g
+000040b0: 6976 656e 206e 6577 2065 7665 6e74 7320  iven new events 
+000040c0: 7769 6c6c 2062 6520 7265 636f 7264 6564  will be recorded
+000040d0: 2e20 4279 2064 6573 6967 6e2c 2069 7420  . By design, it 
+000040e0: 6973 206f 6e6c 790a 706f 7373 6962 6c65  is only.possible
+000040f0: 2077 6974 6820 4576 656e 7453 746f 7265   with EventStore
+00004100: 4442 2074 6f20 6174 6f6d 6963 616c 6c79  DB to atomically
+00004110: 2072 6563 6f72 6420 6e65 7720 6576 656e   record new even
+00004120: 7473 2069 6e20 6f6e 6520 7374 7265 616d  ts in one stream
+00004130: 2e0a 0a49 6e20 7468 6520 6578 616d 706c  ...In the exampl
+00004140: 6520 6265 6c6f 772c 2061 206e 6577 2065  e below, a new e
+00004150: 7665 6e74 2069 7320 6170 7065 6e64 6564  vent is appended
+00004160: 2074 6f20 6120 6e65 7720 7374 7265 616d   to a new stream
+00004170: 2e0a 0a60 6060 7079 7468 6f6e 0a66 726f  ...```python.fro
+00004180: 6d20 7575 6964 2069 6d70 6f72 7420 7575  m uuid import uu
+00004190: 6964 340a 0a66 726f 6d20 6573 6462 636c  id4..from esdbcl
+000041a0: 6965 6e74 2069 6d70 6f72 7420 4e65 7745  ient import NewE
+000041b0: 7665 6e74 0a0a 2320 436f 6e73 7472 7563  vent..# Construc
+000041c0: 7420 6e65 7720 6576 656e 7420 6f62 6a65  t new event obje
+000041d0: 6374 2e0a 6576 656e 7431 203d 204e 6577  ct..event1 = New
+000041e0: 4576 656e 7428 7479 7065 3d27 4f72 6465  Event(type='Orde
+000041f0: 7243 7265 6174 6564 272c 2064 6174 613d  rCreated', data=
+00004200: 6227 6461 7461 3127 290a 0a23 2044 6566  b'data1')..# Def
+00004210: 696e 6520 7374 7265 616d 206e 616d 652e  ine stream name.
+00004220: 0a73 7472 6561 6d5f 6e61 6d65 3120 3d20  .stream_name1 = 
+00004230: 7374 7228 7575 6964 3428 2929 0a0a 2320  str(uuid4())..# 
+00004240: 4170 7065 6e64 206c 6973 7420 6f66 2065  Append list of e
+00004250: 7665 6e74 7320 746f 206e 6577 2073 7472  vents to new str
+00004260: 6561 6d2e 0a63 6f6d 6d69 745f 706f 7369  eam..commit_posi
+00004270: 7469 6f6e 3120 3d20 636c 6965 6e74 2e61  tion1 = client.a
+00004280: 7070 656e 645f 6576 656e 7473 280a 2020  ppend_events(.  
+00004290: 2020 7374 7265 616d 5f6e 616d 653d 7374    stream_name=st
+000042a0: 7265 616d 5f6e 616d 6531 2c0a 2020 2020  ream_name1,.    
+000042b0: 6578 7065 6374 6564 5f70 6f73 6974 696f  expected_positio
+000042c0: 6e3d 4e6f 6e65 2c0a 2020 2020 6576 656e  n=None,.    even
+000042d0: 7473 3d5b 6576 656e 7431 5d2c 0a29 0a60  ts=[event1],.).`
+000042e0: 6060 0a0a 496e 2074 6865 2065 7861 6d70  ``..In the examp
+000042f0: 6c65 2062 656c 6f77 2c20 7477 6f20 7375  le below, two su
+00004300: 6273 6571 7565 6e74 2065 7665 6e74 7320  bsequent events 
+00004310: 6172 6520 6170 7065 6e64 6564 2074 6f20  are appended to 
+00004320: 616e 2065 7869 7374 696e 670a 7374 7265  an existing.stre
+00004330: 616d 2e0a 0a60 6060 7079 7468 6f6e 0a65  am...```python.e
+00004340: 7665 6e74 3220 3d20 4e65 7745 7665 6e74  vent2 = NewEvent
+00004350: 2874 7970 653d 274f 7264 6572 5570 6461  (type='OrderUpda
+00004360: 7465 6427 2c20 6461 7461 3d62 2764 6174  ted', data=b'dat
+00004370: 6132 2729 0a65 7665 6e74 3320 3d20 4e65  a2').event3 = Ne
+00004380: 7745 7665 6e74 2874 7970 653d 274f 7264  wEvent(type='Ord
+00004390: 6572 4465 6c65 7465 6427 2c20 6461 7461  erDeleted', data
+000043a0: 3d62 2764 6174 6133 2729 0a0a 636f 6d6d  =b'data3')..comm
+000043b0: 6974 5f70 6f73 6974 696f 6e32 203d 2063  it_position2 = c
+000043c0: 6c69 656e 742e 6170 7065 6e64 5f65 7665  lient.append_eve
+000043d0: 6e74 7328 0a20 2020 2073 7472 6561 6d5f  nts(.    stream_
+000043e0: 6e61 6d65 3d73 7472 6561 6d5f 6e61 6d65  name=stream_name
+000043f0: 312c 0a20 2020 2065 7870 6563 7465 645f  1,.    expected_
+00004400: 706f 7369 7469 6f6e 3d30 2c0a 2020 2020  position=0,.    
+00004410: 6576 656e 7473 3d5b 6576 656e 7432 2c20  events=[event2, 
+00004420: 6576 656e 7433 5d2c 0a29 0a60 6060 0a0a  event3],.).```..
+00004430: 4966 2074 6865 206f 7065 7261 7469 6f6e  If the operation
+00004440: 2069 7320 7375 6363 6573 7366 756c 2c20   is successful, 
+00004450: 7468 6973 206d 6574 686f 6420 7265 7475  this method retu
+00004460: 726e 7320 616e 2069 6e74 6567 6572 0a72  rns an integer.r
+00004470: 6570 7265 7365 6e74 696e 6720 7468 6520  epresenting the 
+00004480: 6f76 6572 616c 6c20 2263 6f6d 6d69 7420  overall "commit 
+00004490: 706f 7369 7469 6f6e 2220 6173 2069 7420  position" as it 
+000044a0: 7761 7320 7768 656e 2074 6865 206f 7065  was when the ope
+000044b0: 7261 7469 6f6e 0a77 6173 2063 6f6d 706c  ration.was compl
+000044c0: 6574 6564 2e20 4f74 6865 7277 6973 652c  eted. Otherwise,
+000044d0: 2061 6e20 6578 6365 7074 696f 6e20 7769   an exception wi
+000044e0: 6c6c 2062 6520 7261 6973 6564 2e0a 0a41  ll be raised...A
+000044f0: 2022 636f 6d6d 6974 2070 6f73 6974 696f   "commit positio
+00004500: 6e22 2069 7320 6120 6d6f 6e6f 746f 6e69  n" is a monotoni
+00004510: 6361 6c6c 7920 696e 6372 6561 7369 6e67  cally increasing
+00004520: 2069 6e74 6567 6572 2072 6570 7265 7365   integer represe
+00004530: 6e74 696e 670a 7468 6520 706f 7369 7469  nting.the positi
+00004540: 6f6e 206f 6620 7468 6520 7265 636f 7264  on of the record
+00004550: 6564 2065 7665 6e74 2069 6e20 6120 2274  ed event in a "t
+00004560: 6f74 616c 206f 7264 6572 2220 6f66 2061  otal order" of a
+00004570: 6c6c 2072 6563 6f72 6465 640a 6576 656e  ll recorded.even
+00004580: 7473 2069 6e20 7468 6520 6461 7461 6261  ts in the databa
+00004590: 7365 2061 6372 6f73 7320 616c 6c20 7374  se across all st
+000045a0: 7265 616d 732e 2049 7420 6973 2074 6865  reams. It is the
+000045b0: 2061 6374 7561 6c20 706f 7369 7469 6f6e   actual position
+000045c0: 0a6f 6620 7468 6520 6576 656e 7420 7265  .of the event re
+000045d0: 636f 7264 206f 6e20 6469 736b 2c20 616e  cord on disk, an
+000045e0: 6420 7468 6572 6520 6172 6520 7573 7561  d there are usua
+000045f0: 6c6c 7920 6c61 7267 6520 6469 6666 6572  lly large differ
+00004600: 656e 6365 730a 6265 7477 6565 6e20 7375  ences.between su
+00004610: 6363 6573 7369 7665 2063 6f6d 6d69 7473  ccessive commits
+00004620: 2e20 496e 2063 6f6e 7365 7175 656e 6365  . In consequence
+00004630: 2c20 7468 6520 7365 7175 656e 6365 206f  , the sequence o
+00004640: 6620 636f 6d6d 6974 0a70 6f73 6974 696f  f commit.positio
+00004650: 6e73 2069 7320 6e6f 7420 6761 706c 6573  ns is not gaples
+00004660: 732e 2049 6e64 6565 642c 2074 6865 7265  s. Indeed, there
+00004670: 2061 7265 2075 7375 616c 6c79 206c 6172   are usually lar
+00004680: 6765 2064 6966 6665 7265 6e63 6573 0a62  ge differences.b
+00004690: 6574 7765 656e 2074 6865 2063 6f6d 6d69  etween the commi
+000046a0: 7420 706f 7369 7469 6f6e 7320 6f66 2073  t positions of s
+000046b0: 7563 6365 7373 6976 6520 7265 636f 7264  uccessive record
+000046c0: 6564 2065 7665 6e74 732e 0a0a 5468 6520  ed events...The 
+000046d0: 2263 6f6d 6d69 7420 706f 7369 7469 6f6e  "commit position
+000046e0: 2220 7265 7475 726e 6564 2062 7920 6061  " returned by `a
+000046f0: 7070 656e 645f 6576 656e 7473 2829 6020  ppend_events()` 
+00004700: 6973 2074 6861 7420 6f66 2074 6865 206c  is that of the l
+00004710: 6173 740a 7265 636f 7264 6564 2065 7665  ast.recorded eve
+00004720: 6e74 2069 6e20 7468 6520 6769 7665 6e20  nt in the given 
+00004730: 6261 7463 6820 6f66 206e 6577 2065 7665  batch of new eve
+00004740: 6e74 732e 0a0a 5468 6520 2263 6f6d 6d69  nts...The "commi
+00004750: 7420 706f 7369 7469 6f6e 2220 7265 7475  t position" retu
+00004760: 726e 6564 2069 6e20 7468 6973 2077 6179  rned in this way
+00004770: 2063 616e 2074 6865 7265 666f 7265 2062   can therefore b
+00004780: 6520 7573 6564 2074 6f20 7761 6974 0a66  e used to wait.f
+00004790: 6f72 2061 2064 6f77 6e73 7472 6561 6d20  or a downstream 
+000047a0: 636f 6d70 6f6e 656e 7420 746f 2068 6176  component to hav
+000047b0: 6520 7072 6f63 6573 7365 6420 616c 6c20  e processed all 
+000047c0: 7468 6520 6576 656e 7473 2074 6861 7420  the events that 
+000047d0: 7765 7265 2072 6563 6f72 6465 642e 0a0a  were recorded...
+000047e0: 466f 7220 6578 616d 706c 652c 2063 6f6e  For example, con
+000047f0: 7369 6465 7220 6120 7573 6572 2069 6e74  sider a user int
+00004800: 6572 6661 6365 2063 6f6d 6d61 6e64 2074  erface command t
+00004810: 6861 7420 7265 7375 6c74 7320 696e 2074  hat results in t
+00004820: 6865 2072 6563 6f72 6469 6e67 0a6f 6620  he recording.of 
+00004830: 6e65 7720 6576 656e 7473 2c20 616e 6420  new events, and 
+00004840: 6120 7175 6572 7920 696e 746f 2061 6e20  a query into an 
+00004850: 6576 656e 7475 616c 6c79 2063 6f6e 7369  eventually consi
+00004860: 7374 656e 7420 6d61 7465 7269 616c 697a  stent materializ
+00004870: 6564 0a76 6965 7720 696e 2061 2064 6f77  ed.view in a dow
+00004880: 6e73 7472 6561 6d20 636f 6d70 6f6e 656e  nstream componen
+00004890: 7420 7468 6174 2069 7320 7570 6461 7465  t that is update
+000048a0: 6420 6672 6f6d 2074 6865 7365 2065 7665  d from these eve
+000048b0: 6e74 732e 2049 6620 7468 6520 6e65 770a  nts. If the new.
+000048c0: 6576 656e 7473 2068 6176 6520 6e6f 7420  events have not 
+000048d0: 7965 7420 6265 656e 2070 726f 6365 7373  yet been process
+000048e0: 6564 2c20 7468 6520 7669 6577 2077 6f75  ed, the view wou
+000048f0: 6c64 2062 6520 7374 616c 652e 2054 6865  ld be stale. The
+00004900: 2022 636f 6d6d 6974 2070 6f73 6974 696f   "commit positio
+00004910: 6e22 0a63 616e 2062 6520 7573 6564 2062  n".can be used b
+00004920: 7920 7468 6520 7573 6572 2069 6e74 6572  y the user inter
+00004930: 6661 6365 2074 6f20 706f 6c6c 2074 6865  face to poll the
+00004940: 2064 6f77 6e73 7472 6561 6d20 636f 6d70   downstream comp
+00004950: 6f6e 656e 7420 756e 7469 6c20 6974 2068  onent until it h
+00004960: 6173 0a70 726f 6365 7373 6564 2074 686f  as.processed tho
+00004970: 7365 206e 6577 2065 7665 6e74 732c 2061  se new events, a
+00004980: 6674 6572 2077 6869 6368 2074 696d 6520  fter which time 
+00004990: 7468 6520 7669 6577 2077 696c 6c20 6e6f  the view will no
+000049a0: 7420 6265 2073 7461 6c65 2e0a 0a0a 2323  t be stale....##
+000049b0: 2320 4170 7065 6e64 2065 7665 6e74 0a0a  # Append event..
+000049c0: 2a72 6571 7569 7265 7320 6c65 6164 6572  *requires leader
+000049d0: 2a0a 0a54 6865 2060 6170 7065 6e64 5f65  *..The `append_e
+000049e0: 7665 6e74 2829 6020 6d65 7468 6f64 2063  vent()` method c
+000049f0: 616e 2062 6520 7573 6564 2074 6f20 7772  an be used to wr
+00004a00: 6974 6520 6120 7369 6e67 6c65 206e 6577  ite a single new
+00004a10: 2065 7665 6e74 2074 6f20 6120 7374 7265   event to a stre
+00004a20: 616d 2e0a 0a54 6872 6565 2061 7267 756d  am...Three argum
+00004a30: 656e 7473 2061 7265 2072 6571 7569 7265  ents are require
+00004a40: 642c 2060 7374 7265 616d 5f6e 616d 6560  d, `stream_name`
+00004a50: 2c20 6065 7870 6563 7465 645f 706f 7369  , `expected_posi
+00004a60: 7469 6f6e 6020 616e 6420 6065 7665 6e74  tion` and `event
+00004a70: 602e 0a0a 5468 6973 206d 6574 686f 6420  `...This method 
+00004a80: 776f 726b 7320 696e 2074 6865 2073 616d  works in the sam
+00004a90: 6520 7761 7920 6173 2060 6170 7065 6e64  e way as `append
+00004aa0: 5f65 7665 6e74 7328 2960 2c20 686f 7765  _events()`, howe
+00004ab0: 7665 7220 6065 7665 6e74 6020 6973 2065  ver `event` is e
+00004ac0: 7870 6563 7465 640a 746f 2062 6520 6120  xpected.to be a 
+00004ad0: 7369 6e67 6c65 2060 4e65 7745 7665 6e74  single `NewEvent
+00004ae0: 602e 0a0a 5468 6973 206d 6574 686f 6420  `...This method 
+00004af0: 7461 6b65 7320 616e 206f 7074 696f 6e61  takes an optiona
+00004b00: 6c20 6074 696d 656f 7574 6020 6172 6775  l `timeout` argu
+00004b10: 6d65 6e74 2c20 7768 6963 6820 6973 2061  ment, which is a
+00004b20: 2050 7974 686f 6e20 6066 6c6f 6174 6020   Python `float` 
+00004b30: 7468 6174 2073 6574 730a 6120 6465 6164  that sets.a dead
+00004b40: 6c69 6e65 2066 6f72 2074 6865 2063 6f6d  line for the com
+00004b50: 706c 6574 696f 6e20 6f66 2074 6865 2067  pletion of the g
+00004b60: 5250 4320 6f70 6572 6174 696f 6e2e 0a0a  RPC operation...
+00004b70: 5369 6e63 6520 7468 6520 6861 6e64 6c69  Since the handli
+00004b80: 6e67 206f 6620 6120 636f 6d6d 616e 6420  ng of a command 
+00004b90: 696e 2079 6f75 7220 6170 706c 6963 6174  in your applicat
+00004ba0: 696f 6e20 6d61 7920 7265 7375 6c74 2069  ion may result i
+00004bb0: 6e20 6f6e 6520 6f72 206d 616e 790a 6e65  n one or many.ne
+00004bc0: 7720 6576 656e 7473 2c20 616e 6420 7468  w events, and th
+00004bd0: 6520 7265 7375 6c74 7320 6f66 2068 616e  e results of han
+00004be0: 646c 696e 6720 6120 636f 6d6d 616e 6420  dling a command 
+00004bf0: 7368 6f75 6c64 2062 6520 7265 636f 7264  should be record
+00004c00: 6564 2061 746f 6d69 6361 6c6c 792c 0a61  ed atomically,.a
+00004c10: 6e64 2074 6865 2077 7269 7469 6e67 206f  nd the writing o
+00004c20: 6620 6e65 7720 6576 656e 7473 2067 656e  f new events gen
+00004c30: 6572 6174 6564 2062 7920 6120 636f 6d6d  erated by a comm
+00004c40: 616e 6420 6861 6e64 6c65 7220 6973 2075  and handler is u
+00004c50: 7375 616c 6c79 2061 2063 6f6e 6365 726e  sually a concern
+00004c60: 0a74 6861 7420 6973 2066 6163 746f 7265  .that is factore
+00004c70: 6420 6f75 7420 616e 6420 7573 6564 2065  d out and used e
+00004c80: 7665 7279 7768 6572 6520 696e 2061 2070  verywhere in a p
+00004c90: 726f 6a65 6374 2c20 6974 2069 7320 7175  roject, it is qu
+00004ca0: 6974 6520 7573 7561 6c20 696e 2061 2070  ite usual in a p
+00004cb0: 726f 6a65 6374 0a74 6f20 6f6e 6c79 2075  roject.to only u
+00004cc0: 7365 2060 6170 7065 6e64 5f65 7665 6e74  se `append_event
+00004cd0: 7328 2960 2074 6f20 7265 636f 7264 206e  s()` to record n
+00004ce0: 6577 2065 7665 6e74 732e 2046 6f72 2074  ew events. For t
+00004cf0: 6869 7320 7265 6173 6f6e 2c20 616e 2065  his reason, an e
+00004d00: 7861 6d70 6c65 2069 730a 6e6f 7420 7072  xample is.not pr
+00004d10: 6f76 6964 6564 2068 6572 652e 0a0a 0a23  ovided here....#
+00004d20: 2323 2049 6465 6d70 6f74 656e 7420 6170  ## Idempotent ap
+00004d30: 7065 6e64 206f 7065 7261 7469 6f6e 730a  pend operations.
+00004d40: 0a53 6f6d 6574 696d 6573 2069 7420 6d61  .Sometimes it ma
+00004d50: 7920 6861 7070 656e 2074 6861 7420 6120  y happen that a 
+00004d60: 6e65 7720 6576 656e 7420 6973 2073 7563  new event is suc
+00004d70: 6365 7373 6675 6c6c 7920 7265 636f 7264  cessfully record
+00004d80: 6564 2061 6e64 2074 6865 6e20 736f 6d65  ed and then some
+00004d90: 686f 770a 7468 6520 636f 6e6e 6563 7469  how.the connecti
+00004da0: 6f6e 2074 6f20 7468 6520 6461 7461 6261  on to the databa
+00004db0: 7365 2067 6574 7320 696e 7465 7272 7570  se gets interrup
+00004dc0: 7465 6420 6265 666f 7265 2074 6865 2073  ted before the s
+00004dd0: 7563 6365 7373 6675 6c20 6361 6c6c 2063  uccessful call c
+00004de0: 616e 2072 6574 7572 6e0a 7375 6363 6573  an return.succes
+00004df0: 7366 756c 6c79 2074 6f20 7468 6520 636c  sfully to the cl
+00004e00: 6965 6e74 2e20 496e 2063 6173 6520 6f66  ient. In case of
+00004e10: 2061 6e20 6572 726f 7220 7768 656e 2061   an error when a
+00004e20: 7070 656e 6469 6e67 2061 6e20 6576 656e  ppending an even
+00004e30: 742c 2069 7420 6d61 7920 6265 0a64 6573  t, it may be.des
+00004e40: 6972 6162 6c65 2074 6f20 7265 7472 7920  irable to retry 
+00004e50: 6170 7065 6e64 696e 6720 7468 6520 7361  appending the sa
+00004e60: 6d65 2065 7665 6e74 2061 7420 7468 6520  me event at the 
+00004e70: 7361 6d65 2070 6f73 6974 696f 6e2e 2049  same position. I
+00004e80: 6620 7468 6520 6576 656e 7420 7761 730a  f the event was.
+00004e90: 696e 2066 6163 7420 7375 6363 6573 7366  in fact successf
+00004ea0: 756c 6c79 2072 6563 6f72 6465 642c 2069  ully recorded, i
+00004eb0: 7420 6973 2063 6f6e 7665 6e69 656e 7420  t is convenient 
+00004ec0: 666f 7220 7468 6520 7265 7472 7920 746f  for the retry to
+00004ed0: 2072 6574 7572 6e20 7375 6363 6573 7366   return successf
+00004ee0: 756c 6c79 0a77 6974 686f 7574 2072 6169  ully.without rai
+00004ef0: 7369 6e67 2061 6e20 6572 726f 7220 6475  sing an error du
+00004f00: 6520 746f 206f 7074 696d 6973 7469 6320  e to optimistic 
+00004f10: 636f 6e63 7572 7265 6e63 7920 636f 6e74  concurrency cont
+00004f20: 726f 6c20 2861 7320 6465 7363 7269 6265  rol (as describe
+00004f30: 6420 6162 6f76 6529 2e0a 0a54 6865 2065  d above)...The e
+00004f40: 7861 6d70 6c65 2062 656c 6f77 2073 686f  xample below sho
+00004f50: 7773 2074 6865 2060 6170 7065 6e64 5f65  ws the `append_e
+00004f60: 7665 6e74 7328 2960 206d 6574 686f 6420  vents()` method 
+00004f70: 6265 696e 6720 6361 6c6c 6564 2061 6761  being called aga
+00004f80: 696e 2077 6974 680a 6065 7665 6e74 3360  in with.`event3`
+00004f90: 2061 6e64 2060 6578 7065 6374 6564 5f70   and `expected_p
+00004fa0: 6f73 6974 696f 6e3d 3260 2e20 5765 2063  osition=2`. We c
+00004fb0: 616e 2073 6565 2074 6861 7420 7265 7065  an see that repe
+00004fc0: 6174 696e 6720 7468 6520 6361 6c6c 2074  ating the call t
+00004fd0: 6f0a 6061 7070 656e 645f 6576 656e 7473  o.`append_events
+00004fe0: 2829 6020 7265 7475 726e 7320 7375 6363  ()` returns succ
+00004ff0: 6573 7366 756c 6c79 2e0a 0a60 6060 7079  essfully...```py
+00005000: 7468 6f6e 0a23 2052 6574 7279 2061 7070  thon.# Retry app
+00005010: 656e 6469 6e67 2065 7665 6e74 332e 0a63  ending event3..c
+00005020: 6f6d 6d69 745f 706f 7369 7469 6f6e 5f72  ommit_position_r
+00005030: 6574 7279 203d 2063 6c69 656e 742e 6170  etry = client.ap
+00005040: 7065 6e64 5f65 7665 6e74 7328 0a20 2020  pend_events(.   
+00005050: 2073 7472 6561 6d5f 6e61 6d65 3d73 7472   stream_name=str
+00005060: 6561 6d5f 6e61 6d65 312c 0a20 2020 2065  eam_name1,.    e
+00005070: 7870 6563 7465 645f 706f 7369 7469 6f6e  xpected_position
+00005080: 3d30 2c0a 2020 2020 6576 656e 7473 3d5b  =0,.    events=[
+00005090: 6576 656e 7432 2c20 6576 656e 7433 5d2c  event2, event3],
+000050a0: 0a29 0a60 6060 0a0a 5765 2063 616e 2073  .).```..We can s
+000050b0: 6565 2074 6861 7420 7468 6520 7361 6d65  ee that the same
+000050c0: 2063 6f6d 6d69 7420 706f 7369 7469 6f6e   commit position
+000050d0: 2069 7320 7265 7475 726e 6564 2061 7320   is returned as 
+000050e0: 6162 6f76 652e 0a0a 6060 6070 7974 686f  above...```pytho
+000050f0: 6e0a 6173 7365 7274 2063 6f6d 6d69 745f  n.assert commit_
+00005100: 706f 7369 7469 6f6e 5f72 6574 7279 203d  position_retry =
+00005110: 3d20 636f 6d6d 6974 5f70 6f73 6974 696f  = commit_positio
+00005120: 6e32 0a60 6060 0a0a 5765 2063 616e 2061  n2.```..We can a
+00005130: 6c73 6f20 7365 6520 7468 6520 7374 7265  lso see the stre
+00005140: 616d 2068 6173 2062 6565 6e20 756e 6368  am has been unch
+00005150: 616e 6765 6420 6465 7370 6974 6520 6361  anged despite ca
+00005160: 6c6c 696e 6720 7468 6520 6170 7065 6e64  lling the append
+00005170: 5f65 7665 6e74 7328 290a 7477 6963 6520  _events().twice 
+00005180: 7769 7468 2074 6865 2073 616d 6520 6172  with the same ar
+00005190: 6775 6d65 6e74 732c 2062 7920 6361 6c6c  guments, by call
+000051a0: 696e 6720 6072 6561 645f 7374 7265 616d  ing `read_stream
+000051b0: 5f65 7665 6e74 7328 2960 2e20 5468 6174  _events()`. That
+000051c0: 2069 732c 2074 6865 7265 0a61 7265 2073   is, there.are s
+000051d0: 7469 6c6c 206f 6e6c 7920 7468 7265 6520  till only three 
+000051e0: 6576 656e 7473 2069 6e20 7468 6520 7374  events in the st
+000051f0: 7265 616d 2e0a 0a60 6060 7079 7468 6f6e  ream...```python
+00005200: 0a65 7665 6e74 7320 3d20 636c 6965 6e74  .events = client
+00005210: 2e72 6561 645f 7374 7265 616d 5f65 7665  .read_stream_eve
+00005220: 6e74 7328 0a20 2020 2073 7472 6561 6d5f  nts(.    stream_
+00005230: 6e61 6d65 3d73 7472 6561 6d5f 6e61 6d65  name=stream_name
+00005240: 310a 290a 0a61 7373 6572 7420 6c65 6e28  1.)..assert len(
+00005250: 6576 656e 7473 2920 3d3d 2033 0a60 6060  events) == 3.```
+00005260: 0a0a 5468 6973 2069 6465 6d70 6f74 656e  ..This idempoten
+00005270: 7420 6265 6861 7669 6f75 7220 6973 2061  t behaviour is a
+00005280: 6374 6976 6174 6564 2062 6563 6175 7365  ctivated because
+00005290: 2074 6865 2060 4e65 7745 7665 6e74 6020   the `NewEvent` 
+000052a0: 636c 6173 7320 6861 7320 616e 2060 6964  class has an `id
+000052b0: 600a 6174 7472 6962 7574 6520 7468 6174  `.attribute that
+000052c0: 2c20 6279 2064 6566 6175 6c74 2c20 6973  , by default, is
+000052d0: 2061 7373 6967 6e65 6420 6120 6e65 7720   assigned a new 
+000052e0: 616e 6420 756e 6971 7565 2076 6572 7369  and unique versi
+000052f0: 6f6e 2d34 2055 5549 4420 7768 656e 2061  on-4 UUID when a
+00005300: 6e0a 696e 7374 616e 6365 206f 6620 604e  n.instance of `N
+00005310: 6577 4576 656e 7460 2069 7320 636f 6e73  ewEvent` is cons
+00005320: 7472 7563 7465 642e 2049 6620 6576 656e  tructed. If even
+00005330: 7473 2077 6974 6820 7468 6520 7361 6d65  ts with the same
+00005340: 2060 6964 6020 6172 6520 6170 7065 6e64   `id` are append
+00005350: 6564 0a61 7420 7468 6520 7361 6d65 2060  ed.at the same `
+00005360: 6578 7065 6374 6564 5f70 6f73 6974 696f  expected_positio
+00005370: 6e60 2c20 7468 6520 7374 7265 616d 2077  n`, the stream w
+00005380: 696c 6c20 6265 2075 6e63 6861 6e67 6564  ill be unchanged
+00005390: 2c20 7468 6520 6f70 6572 6174 696f 6e20  , the operation 
+000053a0: 7769 6c6c 0a63 6f6d 706c 6574 6520 7375  will.complete su
+000053b0: 6363 6573 7366 756c 6c79 2c20 616e 6420  ccessfully, and 
+000053c0: 7468 6520 7361 6d65 2063 6f6d 6d69 7420  the same commit 
+000053d0: 706f 7369 7469 6f6e 2077 696c 6c20 6265  position will be
+000053e0: 2072 6574 7572 6e65 6420 746f 2074 6865   returned to the
+000053f0: 2063 616c 6c65 722e 0a0a 6060 6070 7974   caller...```pyt
+00005400: 686f 6e0a 6672 6f6d 2075 7569 6420 696d  hon.from uuid im
+00005410: 706f 7274 2055 5549 440a 0a0a 6173 7365  port UUID...asse
+00005420: 7274 2069 7369 6e73 7461 6e63 6528 6576  rt isinstance(ev
+00005430: 656e 7431 2e69 642c 2055 5549 4429 0a61  ent1.id, UUID).a
+00005440: 7373 6572 7420 6973 696e 7374 616e 6365  ssert isinstance
+00005450: 2865 7665 6e74 322e 6964 2c20 5555 4944  (event2.id, UUID
+00005460: 290a 6173 7365 7274 2069 7369 6e73 7461  ).assert isinsta
+00005470: 6e63 6528 6576 656e 7433 2e69 642c 2055  nce(event3.id, U
+00005480: 5549 4429 0a0a 6173 7365 7274 2065 7665  UID)..assert eve
+00005490: 6e74 312e 6964 2021 3d20 6576 656e 7432  nt1.id != event2
+000054a0: 2e69 640a 6173 7365 7274 2065 7665 6e74  .id.assert event
+000054b0: 322e 6964 2021 3d20 6576 656e 7433 2e69  2.id != event3.i
+000054c0: 640a 0a61 7373 6572 7420 6576 656e 7473  d..assert events
+000054d0: 5b30 5d2e 6964 203d 3d20 6576 656e 7431  [0].id == event1
+000054e0: 2e69 640a 6173 7365 7274 2065 7665 6e74  .id.assert event
+000054f0: 735b 315d 2e69 6420 3d3d 2065 7665 6e74  s[1].id == event
+00005500: 322e 6964 0a61 7373 6572 7420 6576 656e  2.id.assert even
+00005510: 7473 5b32 5d2e 6964 203d 3d20 6576 656e  ts[2].id == even
+00005520: 7433 2e69 640a 6060 600a 0a49 7420 6973  t3.id.```..It is
+00005530: 2070 6f73 7369 626c 6520 746f 2073 6574   possible to set
+00005540: 2074 6865 2060 6964 6020 636f 6e73 7472   the `id` constr
+00005550: 7563 746f 7220 6172 6775 6d65 6e74 206f  uctor argument o
+00005560: 6620 604e 6577 4576 656e 7460 2077 6865  f `NewEvent` whe
+00005570: 6e20 696e 7374 616e 7469 6174 696e 670a  n instantiating.
+00005580: 7468 6520 604e 6577 4576 656e 7460 2063  the `NewEvent` c
+00005590: 6c61 7373 2c20 6275 7420 696e 2074 6865  lass, but in the
+000055a0: 2065 7861 6d70 6c65 7320 6162 6f76 6520   examples above 
+000055b0: 7765 2068 6176 6520 6265 656e 2075 7369  we have been usi
+000055c0: 6e67 2074 6865 2064 6566 6175 6c74 0a62  ng the default.b
+000055d0: 6568 6176 696f 7572 2c20 7768 6963 6820  ehaviour, which 
+000055e0: 6973 2074 6861 7420 7468 6520 6069 6460  is that the `id`
+000055f0: 2076 616c 7565 2069 7320 6765 6e65 7261   value is genera
+00005600: 7465 6420 7768 656e 2074 6865 2060 4e65  ted when the `Ne
+00005610: 7745 7665 6e74 6020 636c 6173 7320 6973  wEvent` class is
+00005620: 0a69 6e73 7461 6e74 6961 7465 642e 0a0a  .instantiated...
+00005630: 0a23 2323 2052 6561 6420 7374 7265 616d  .### Read stream
+00005640: 2065 7665 6e74 730a 0a54 6865 2060 7265   events..The `re
+00005650: 6164 5f73 7472 6561 6d5f 6576 656e 7473  ad_stream_events
+00005660: 2829 6020 6d65 7468 6f64 2063 616e 2062  ()` method can b
+00005670: 6520 7573 6564 2074 6f20 6f62 7461 696e  e used to obtain
+00005680: 2074 6865 2072 6563 6f72 6465 6420 6576   the recorded ev
+00005690: 656e 7473 2069 6e20 610a 7374 7265 616d  ents in a.stream
+000056a0: 2e20 4974 2072 6574 7572 6e73 2061 2073  . It returns a s
+000056b0: 6571 7565 6e63 6520 6f66 2072 6563 6f72  equence of recor
+000056c0: 6465 6420 6576 656e 7473 206f 626a 6563  ded events objec
+000056d0: 7473 2e20 5468 6520 7265 6365 6976 6564  ts. The received
+000056e0: 2072 6563 6f72 6465 6420 6576 656e 740a   recorded event.
+000056f0: 6f62 6a65 6374 2061 7265 2069 6e73 7461  object are insta
+00005700: 6e63 6573 206f 6620 7468 6520 6052 6563  nces of the `Rec
+00005710: 6f72 6465 6445 7665 6e74 6020 636c 6173  ordedEvent` clas
+00005720: 7320 2873 6565 2062 656c 6f77 292e 0a0a  s (see below)...
+00005730: 5468 6973 206d 6574 686f 6420 6861 7320  This method has 
+00005740: 6f6e 6520 7265 7175 6972 6564 2061 7267  one required arg
+00005750: 756d 656e 742c 2060 7374 7265 616d 5f6e  ument, `stream_n
+00005760: 616d 6560 2c20 7768 6963 6820 6973 2074  ame`, which is t
+00005770: 6865 206e 616d 6520 6f66 0a74 6865 2073  he name of.the s
+00005780: 7472 6561 6d20 6672 6f6d 2077 6869 6368  tream from which
+00005790: 2074 6f20 7265 6164 2065 7665 6e74 732e   to read events.
+000057a0: 2042 7920 6465 6661 756c 742c 2074 6865   By default, the
+000057b0: 2072 6563 6f72 6465 6420 6576 656e 7473   recorded events
+000057c0: 2069 6e20 7468 650a 7374 7265 616d 2061   in the.stream a
+000057d0: 7265 2072 6574 7572 6e65 6420 696e 2074  re returned in t
+000057e0: 6865 206f 7264 6572 2074 6865 7920 7765  he order they we
+000057f0: 7265 2072 6563 6f72 6465 642e 0a0a 5468  re recorded...Th
+00005800: 6520 6d65 7468 6f64 2060 7265 6164 5f73  e method `read_s
+00005810: 7472 6561 6d5f 6576 656e 7473 2829 6020  tream_events()` 
+00005820: 616c 736f 2073 7570 706f 7274 7320 666f  also supports fo
+00005830: 7572 206f 7074 696f 6e61 6c20 6172 6775  ur optional argu
+00005840: 6d65 6e74 732c 0a60 7374 7265 616d 5f70  ments,.`stream_p
+00005850: 6f73 6974 696f 6e60 2c20 6062 6163 6b77  osition`, `backw
+00005860: 6172 6473 602c 2060 6c69 6d69 7460 2c20  ards`, `limit`, 
+00005870: 616e 6420 6074 696d 656f 7574 602e 0a0a  and `timeout`...
+00005880: 5468 6520 6f70 7469 6f6e 616c 2060 7374  The optional `st
+00005890: 7265 616d 5f70 6f73 6974 696f 6e60 2061  ream_position` a
+000058a0: 7267 756d 656e 7420 6973 2061 6e20 6f70  rgument is an op
+000058b0: 7469 6f6e 616c 2069 6e74 6567 6572 2074  tional integer t
+000058c0: 6861 7420 6361 6e20 6265 2075 7365 6420  hat can be used 
+000058d0: 746f 0a69 6e64 6963 6174 6520 7468 6520  to.indicate the 
+000058e0: 706f 7369 7469 6f6e 2069 6e20 7468 6520  position in the 
+000058f0: 7374 7265 616d 2066 726f 6d20 7768 6963  stream from whic
+00005900: 6820 746f 2073 7461 7274 2072 6561 6469  h to start readi
+00005910: 6e67 2e20 5468 6973 2061 7267 756d 656e  ng. This argumen
+00005920: 7420 6973 0a60 4e6f 6e65 6020 6279 2064  t is.`None` by d
+00005930: 6566 6175 6c74 2c20 7768 6963 6820 6d65  efault, which me
+00005940: 616e 7320 7468 6520 7374 7265 616d 2077  ans the stream w
+00005950: 696c 6c20 6265 2072 6561 6420 6569 7468  ill be read eith
+00005960: 6572 2066 726f 6d20 7468 6520 7374 6172  er from the star
+00005970: 7420 6f66 2074 6865 0a73 7472 6561 6d20  t of the.stream 
+00005980: 2874 6865 2064 6566 6175 6c74 2062 6568  (the default beh
+00005990: 6176 696f 7572 292c 206f 7220 6672 6f6d  aviour), or from
+000059a0: 2074 6865 2065 6e64 206f 6620 7468 6520   the end of the 
+000059b0: 7374 7265 616d 2069 6620 6062 6163 6b77  stream if `backw
+000059c0: 6172 6473 6020 6973 0a60 5472 7565 6020  ards` is.`True` 
+000059d0: 2873 6565 2062 656c 6f77 292e 2057 6865  (see below). Whe
+000059e0: 6e20 7265 6164 696e 6720 6120 7374 7265  n reading a stre
+000059f0: 616d 2066 726f 6d20 6120 7370 6563 6966  am from a specif
+00005a00: 6963 2070 6f73 6974 696f 6e20 696e 2074  ic position in t
+00005a10: 6865 2073 7472 6561 6d2c 2074 6865 0a72  he stream, the.r
+00005a20: 6563 6f72 6465 6420 6576 656e 7420 6174  ecorded event at
+00005a30: 2074 6861 7420 706f 7369 7469 6f6e 2077   that position w
+00005a40: 696c 6c20 6265 2069 6e63 6c75 6465 642c  ill be included,
+00005a50: 2062 6f74 6820 7768 656e 2072 6561 6469   both when readi
+00005a60: 6e67 2066 6f72 7761 7264 730a 6672 6f6d  ng forwards.from
+00005a70: 2074 6861 7420 706f 7369 7469 6f6e 2c20   that position, 
+00005a80: 616e 6420 7768 656e 2072 6561 6469 6e67  and when reading
+00005a90: 2062 6163 6b77 6172 6473 2066 726f 6d20   backwards from 
+00005aa0: 7468 6174 2070 6f73 6974 696f 6e2e 0a0a  that position...
+00005ab0: 5468 6520 6f70 7469 6f6e 616c 2060 6261  The optional `ba
+00005ac0: 636b 7761 7264 7360 2061 7267 756d 656e  ckwards` argumen
+00005ad0: 7420 6973 2061 2062 6f6f 6c65 616e 2c20  t is a boolean, 
+00005ae0: 6279 2064 6566 6175 6c74 2060 4661 6c73  by default `Fals
+00005af0: 6560 2c20 7768 6963 6820 6d65 616e 7320  e`, which means 
+00005b00: 7468 650a 7374 7265 616d 2077 696c 6c20  the.stream will 
+00005b10: 6265 2072 6561 6420 666f 7277 6172 6473  be read forwards
+00005b20: 2062 7920 6465 6661 756c 742c 2073 6f20   by default, so 
+00005b30: 7468 6174 2065 7665 6e74 7320 6172 6520  that events are 
+00005b40: 7265 7475 726e 6564 2069 6e20 7468 650a  returned in the.
+00005b50: 6f72 6465 7220 7468 6579 2077 6572 6520  order they were 
+00005b60: 6170 7065 6e64 6564 2c20 4966 2060 6261  appended, If `ba
+00005b70: 636b 7761 7264 7360 2069 7320 6054 7275  ckwards` is `Tru
+00005b80: 6560 2c20 7468 6520 7374 7265 616d 2077  e`, the stream w
+00005b90: 696c 6c20 6265 2072 6561 640a 6261 636b  ill be read.back
+00005ba0: 7761 7264 732c 2073 6f20 7468 6174 2065  wards, so that e
+00005bb0: 7665 6e74 7320 6172 6520 7265 7475 726e  vents are return
+00005bc0: 6564 2069 6e20 7265 7665 7273 6520 6f72  ed in reverse or
+00005bd0: 6465 722e 0a0a 5468 6520 6f70 7469 6f6e  der...The option
+00005be0: 616c 2060 6c69 6d69 7460 2061 7267 756d  al `limit` argum
+00005bf0: 656e 7420 6973 2061 6e20 696e 7465 6765  ent is an intege
+00005c00: 7220 7768 6963 6820 6c69 6d69 7473 2074  r which limits t
+00005c10: 6865 206e 756d 6265 7220 6f66 2065 7665  he number of eve
+00005c20: 6e74 7320 7468 6174 2077 696c 6c0a 6265  nts that will.be
+00005c30: 2072 6574 7572 6e65 642e 2054 6865 2064   returned. The d
+00005c40: 6566 6175 6c74 2076 616c 7565 2069 7320  efault value is 
+00005c50: 6073 7973 2e6d 6178 696e 7460 2e0a 0a54  `sys.maxint`...T
+00005c60: 6865 206f 7074 696f 6e61 6c20 6074 696d  he optional `tim
+00005c70: 656f 7574 6020 6172 6775 6d65 6e74 2069  eout` argument i
+00005c80: 7320 6120 5079 7468 6f6e 2060 666c 6f61  s a Python `floa
+00005c90: 7460 2077 6869 6368 2073 6574 7320 6120  t` which sets a 
+00005ca0: 6465 6164 6c69 6e65 2066 6f72 0a74 6865  deadline for.the
+00005cb0: 2063 6f6d 706c 6574 696f 6e20 6f66 2074   completion of t
+00005cc0: 6865 2067 5250 4320 6f70 6572 6174 696f  he gRPC operatio
+00005cd0: 6e2e 0a0a 5468 6520 6578 616d 706c 6520  n...The example 
+00005ce0: 6265 6c6f 7720 7368 6f77 7320 686f 7720  below shows how 
+00005cf0: 746f 2072 6561 6420 7468 6520 7265 636f  to read the reco
+00005d00: 7264 6564 2065 7665 6e74 7320 6f66 2061  rded events of a
+00005d10: 2073 7472 6561 6d0a 666f 7277 6172 6473   stream.forwards
+00005d20: 2066 726f 6d20 7468 6520 7374 6172 7420   from the start 
+00005d30: 6f66 2074 6865 2073 7472 6561 6d20 746f  of the stream to
+00005d40: 2074 6865 2065 6e64 206f 6620 7468 6520   the end of the 
+00005d50: 7374 7265 616d 2e20 5468 650a 6e61 6d65  stream. The.name
+00005d60: 206f 6620 6120 7374 7265 616d 2069 7320   of a stream is 
+00005d70: 6769 7665 6e20 7768 656e 2063 616c 6c69  given when calli
+00005d80: 6e67 2074 6865 206d 6574 686f 642e 0a0a  ng the method...
+00005d90: 6060 6070 7974 686f 6e0a 6576 656e 7473  ```python.events
+00005da0: 203d 2063 6c69 656e 742e 7265 6164 5f73   = client.read_s
+00005db0: 7472 6561 6d5f 6576 656e 7473 280a 2020  tream_events(.  
+00005dc0: 2020 7374 7265 616d 5f6e 616d 653d 7374    stream_name=st
+00005dd0: 7265 616d 5f6e 616d 6531 0a29 0a60 6060  ream_name1.).```
+00005de0: 0a0a 4e6f 7720 7468 6174 2077 6520 6861  ..Now that we ha
+00005df0: 7665 2061 2073 6571 7565 6e63 6520 6f66  ve a sequence of
+00005e00: 2065 7665 6e74 206f 626a 6563 7473 2c20   event objects, 
+00005e10: 7765 2063 616e 2063 6865 636b 2077 6520  we can check we 
+00005e20: 676f 7420 7468 650a 7468 7265 6520 6576  got the.three ev
+00005e30: 656e 7473 2074 6861 7420 7765 7265 2061  ents that were a
+00005e40: 7070 656e 6465 6420 746f 2074 6865 2073  ppended to the s
+00005e50: 7472 6561 6d2c 2061 6e64 2074 6861 7420  tream, and that 
+00005e60: 7468 6579 2061 7265 0a6f 7264 6572 6564  they are.ordered
+00005e70: 2065 7861 6374 6c79 2061 7320 7468 6579   exactly as they
+00005e80: 2077 6572 6520 6170 7065 6e64 6564 2e0a   were appended..
+00005e90: 0a60 6060 7079 7468 6f6e 0a61 7373 6572  .```python.asser
+00005ea0: 7420 6c65 6e28 6576 656e 7473 2920 3d3d  t len(events) ==
+00005eb0: 2033 0a0a 6173 7365 7274 2065 7665 6e74   3..assert event
+00005ec0: 735b 305d 2e73 7472 6561 6d5f 6e61 6d65  s[0].stream_name
+00005ed0: 203d 3d20 7374 7265 616d 5f6e 616d 6531   == stream_name1
+00005ee0: 0a61 7373 6572 7420 6576 656e 7473 5b30  .assert events[0
+00005ef0: 5d2e 7374 7265 616d 5f70 6f73 6974 696f  ].stream_positio
+00005f00: 6e20 3d3d 2030 0a61 7373 6572 7420 6576  n == 0.assert ev
+00005f10: 656e 7473 5b30 5d2e 7479 7065 203d 3d20  ents[0].type == 
+00005f20: 6576 656e 7431 2e74 7970 650a 6173 7365  event1.type.asse
+00005f30: 7274 2065 7665 6e74 735b 305d 2e64 6174  rt events[0].dat
+00005f40: 6120 3d3d 2065 7665 6e74 312e 6461 7461  a == event1.data
+00005f50: 0a0a 6173 7365 7274 2065 7665 6e74 735b  ..assert events[
+00005f60: 315d 2e73 7472 6561 6d5f 6e61 6d65 203d  1].stream_name =
+00005f70: 3d20 7374 7265 616d 5f6e 616d 6531 0a61  = stream_name1.a
+00005f80: 7373 6572 7420 6576 656e 7473 5b31 5d2e  ssert events[1].
+00005f90: 7374 7265 616d 5f70 6f73 6974 696f 6e20  stream_position 
+00005fa0: 3d3d 2031 0a61 7373 6572 7420 6576 656e  == 1.assert even
+00005fb0: 7473 5b31 5d2e 7479 7065 203d 3d20 6576  ts[1].type == ev
+00005fc0: 656e 7432 2e74 7970 650a 6173 7365 7274  ent2.type.assert
+00005fd0: 2065 7665 6e74 735b 315d 2e64 6174 6120   events[1].data 
+00005fe0: 3d3d 2065 7665 6e74 322e 6461 7461 0a0a  == event2.data..
+00005ff0: 6173 7365 7274 2065 7665 6e74 735b 325d  assert events[2]
+00006000: 2e73 7472 6561 6d5f 6e61 6d65 203d 3d20  .stream_name == 
+00006010: 7374 7265 616d 5f6e 616d 6531 0a61 7373  stream_name1.ass
+00006020: 6572 7420 6576 656e 7473 5b32 5d2e 7374  ert events[2].st
+00006030: 7265 616d 5f70 6f73 6974 696f 6e20 3d3d  ream_position ==
+00006040: 2032 0a61 7373 6572 7420 6576 656e 7473   2.assert events
+00006050: 5b32 5d2e 7479 7065 203d 3d20 6576 656e  [2].type == even
+00006060: 7433 2e74 7970 650a 6173 7365 7274 2065  t3.type.assert e
+00006070: 7665 6e74 735b 325d 2e64 6174 6120 3d3d  vents[2].data ==
+00006080: 2065 7665 6e74 332e 6461 7461 0a60 6060   event3.data.```
+00006090: 0a0a 5468 6520 6578 616d 706c 6520 6265  ..The example be
+000060a0: 6c6f 7720 7368 6f77 7320 686f 7720 746f  low shows how to
+000060b0: 2072 6561 6420 7265 636f 7264 6564 2065   read recorded e
+000060c0: 7665 6e74 7320 696e 2061 2073 7472 6561  vents in a strea
+000060d0: 6d20 666f 7277 6172 6473 2066 726f 6d0a  m forwards from.
+000060e0: 6120 7370 6563 6966 6963 2073 7472 6561  a specific strea
+000060f0: 6d20 706f 7369 7469 6f6e 2074 6f20 7468  m position to th
+00006100: 6520 656e 6420 6f66 2074 6865 2073 7472  e end of the str
+00006110: 6561 6d2e 0a0a 6060 6070 7974 686f 6e0a  eam...```python.
+00006120: 6576 656e 7473 203d 2063 6c69 656e 742e  events = client.
+00006130: 7265 6164 5f73 7472 6561 6d5f 6576 656e  read_stream_even
+00006140: 7473 280a 2020 2020 7374 7265 616d 5f6e  ts(.    stream_n
+00006150: 616d 653d 7374 7265 616d 5f6e 616d 6531  ame=stream_name1
+00006160: 2c0a 2020 2020 7374 7265 616d 5f70 6f73  ,.    stream_pos
+00006170: 6974 696f 6e3d 312c 0a29 0a0a 6173 7365  ition=1,.)..asse
+00006180: 7274 206c 656e 2865 7665 6e74 7329 203d  rt len(events) =
+00006190: 3d20 320a 0a61 7373 6572 7420 6576 656e  = 2..assert even
+000061a0: 7473 5b30 5d2e 7374 7265 616d 5f6e 616d  ts[0].stream_nam
+000061b0: 6520 3d3d 2073 7472 6561 6d5f 6e61 6d65  e == stream_name
+000061c0: 310a 6173 7365 7274 2065 7665 6e74 735b  1.assert events[
+000061d0: 305d 2e73 7472 6561 6d5f 706f 7369 7469  0].stream_positi
+000061e0: 6f6e 203d 3d20 310a 6173 7365 7274 2065  on == 1.assert e
+000061f0: 7665 6e74 735b 305d 2e74 7970 6520 3d3d  vents[0].type ==
+00006200: 2065 7665 6e74 322e 7479 7065 0a61 7373   event2.type.ass
+00006210: 6572 7420 6576 656e 7473 5b30 5d2e 6461  ert events[0].da
+00006220: 7461 203d 3d20 6576 656e 7432 2e64 6174  ta == event2.dat
+00006230: 610a 0a61 7373 6572 7420 6576 656e 7473  a..assert events
+00006240: 5b31 5d2e 7374 7265 616d 5f6e 616d 6520  [1].stream_name 
+00006250: 3d3d 2073 7472 6561 6d5f 6e61 6d65 310a  == stream_name1.
+00006260: 6173 7365 7274 2065 7665 6e74 735b 315d  assert events[1]
+00006270: 2e73 7472 6561 6d5f 706f 7369 7469 6f6e  .stream_position
+00006280: 203d 3d20 320a 6173 7365 7274 2065 7665   == 2.assert eve
+00006290: 6e74 735b 315d 2e74 7970 6520 3d3d 2065  nts[1].type == e
+000062a0: 7665 6e74 332e 7479 7065 0a61 7373 6572  vent3.type.asser
+000062b0: 7420 6576 656e 7473 5b31 5d2e 6461 7461  t events[1].data
+000062c0: 203d 3d20 6576 656e 7433 2e64 6174 610a   == event3.data.
+000062d0: 6060 600a 0a54 6865 2065 7861 6d70 6c65  ```..The example
+000062e0: 2062 656c 6f77 2073 686f 7773 2068 6f77   below shows how
+000062f0: 2074 6f20 7265 6164 2074 6865 2072 6563   to read the rec
+00006300: 6f72 6465 6420 6576 656e 7473 2069 6e20  orded events in 
+00006310: 6120 7374 7265 616d 2062 6163 6b77 6172  a stream backwar
+00006320: 6473 2066 726f 6d0a 7468 6520 656e 6420  ds from.the end 
+00006330: 6f66 2074 6865 2073 7472 6561 6d20 746f  of the stream to
+00006340: 2074 6865 2073 7461 7274 206f 6620 7468   the start of th
+00006350: 6520 7374 7265 616d 2e0a 0a60 6060 7079  e stream...```py
+00006360: 7468 6f6e 0a65 7665 6e74 7320 3d20 636c  thon.events = cl
+00006370: 6965 6e74 2e72 6561 645f 7374 7265 616d  ient.read_stream
+00006380: 5f65 7665 6e74 7328 0a20 2020 2073 7472  _events(.    str
+00006390: 6561 6d5f 6e61 6d65 3d73 7472 6561 6d5f  eam_name=stream_
+000063a0: 6e61 6d65 312c 0a20 2020 2062 6163 6b77  name1,.    backw
+000063b0: 6172 6473 3d54 7275 652c 0a29 0a0a 6173  ards=True,.)..as
+000063c0: 7365 7274 206c 656e 2865 7665 6e74 7329  sert len(events)
+000063d0: 203d 3d20 330a 0a61 7373 6572 7420 6576   == 3..assert ev
+000063e0: 656e 7473 5b30 5d2e 7374 7265 616d 5f6e  ents[0].stream_n
+000063f0: 616d 6520 3d3d 2073 7472 6561 6d5f 6e61  ame == stream_na
+00006400: 6d65 310a 6173 7365 7274 2065 7665 6e74  me1.assert event
+00006410: 735b 305d 2e73 7472 6561 6d5f 706f 7369  s[0].stream_posi
+00006420: 7469 6f6e 203d 3d20 320a 6173 7365 7274  tion == 2.assert
+00006430: 2065 7665 6e74 735b 305d 2e74 7970 6520   events[0].type 
+00006440: 3d3d 2065 7665 6e74 332e 7479 7065 0a61  == event3.type.a
+00006450: 7373 6572 7420 6576 656e 7473 5b30 5d2e  ssert events[0].
+00006460: 6461 7461 203d 3d20 6576 656e 7433 2e64  data == event3.d
+00006470: 6174 610a 0a61 7373 6572 7420 6576 656e  ata..assert even
+00006480: 7473 5b31 5d2e 7374 7265 616d 5f6e 616d  ts[1].stream_nam
+00006490: 6520 3d3d 2073 7472 6561 6d5f 6e61 6d65  e == stream_name
+000064a0: 310a 6173 7365 7274 2065 7665 6e74 735b  1.assert events[
+000064b0: 315d 2e73 7472 6561 6d5f 706f 7369 7469  1].stream_positi
+000064c0: 6f6e 203d 3d20 310a 6173 7365 7274 2065  on == 1.assert e
+000064d0: 7665 6e74 735b 315d 2e74 7970 6520 3d3d  vents[1].type ==
+000064e0: 2065 7665 6e74 322e 7479 7065 0a61 7373   event2.type.ass
+000064f0: 6572 7420 6576 656e 7473 5b31 5d2e 6461  ert events[1].da
+00006500: 7461 203d 3d20 6576 656e 7432 2e64 6174  ta == event2.dat
+00006510: 610a 6060 600a 0a54 6865 2065 7861 6d70  a.```..The examp
+00006520: 6c65 2062 656c 6f77 2073 686f 7773 2068  le below shows h
+00006530: 6f77 2074 6f20 7265 6164 2061 206c 696d  ow to read a lim
+00006540: 6974 6564 206e 756d 6265 7220 2874 776f  ited number (two
+00006550: 2920 6f66 2074 6865 2072 6563 6f72 6465  ) of the recorde
+00006560: 6420 6576 656e 7473 0a69 6e20 6120 7374  d events.in a st
+00006570: 7265 616d 2066 6f72 7761 7264 7320 6672  ream forwards fr
+00006580: 6f6d 2074 6865 2073 7461 7274 206f 6620  om the start of 
+00006590: 7468 6520 7374 7265 616d 2e0a 0a60 6060  the stream...```
+000065a0: 7079 7468 6f6e 0a65 7665 6e74 7320 3d20  python.events = 
+000065b0: 636c 6965 6e74 2e72 6561 645f 7374 7265  client.read_stre
+000065c0: 616d 5f65 7665 6e74 7328 0a20 2020 2073  am_events(.    s
+000065d0: 7472 6561 6d5f 6e61 6d65 3d73 7472 6561  tream_name=strea
+000065e0: 6d5f 6e61 6d65 312c 0a20 2020 206c 696d  m_name1,.    lim
+000065f0: 6974 3d32 2c0a 290a 0a61 7373 6572 7420  it=2,.)..assert 
+00006600: 6c65 6e28 6576 656e 7473 2920 3d3d 2032  len(events) == 2
+00006610: 0a0a 6173 7365 7274 2065 7665 6e74 735b  ..assert events[
+00006620: 305d 2e73 7472 6561 6d5f 6e61 6d65 203d  0].stream_name =
+00006630: 3d20 7374 7265 616d 5f6e 616d 6531 0a61  = stream_name1.a
+00006640: 7373 6572 7420 6576 656e 7473 5b30 5d2e  ssert events[0].
+00006650: 7374 7265 616d 5f70 6f73 6974 696f 6e20  stream_position 
+00006660: 3d3d 2030 0a61 7373 6572 7420 6576 656e  == 0.assert even
+00006670: 7473 5b30 5d2e 7479 7065 203d 3d20 6576  ts[0].type == ev
+00006680: 656e 7431 2e74 7970 650a 6173 7365 7274  ent1.type.assert
+00006690: 2065 7665 6e74 735b 305d 2e64 6174 6120   events[0].data 
+000066a0: 3d3d 2065 7665 6e74 312e 6461 7461 0a0a  == event1.data..
+000066b0: 6173 7365 7274 2065 7665 6e74 735b 315d  assert events[1]
+000066c0: 2e73 7472 6561 6d5f 6e61 6d65 203d 3d20  .stream_name == 
+000066d0: 7374 7265 616d 5f6e 616d 6531 0a61 7373  stream_name1.ass
+000066e0: 6572 7420 6576 656e 7473 5b31 5d2e 7374  ert events[1].st
+000066f0: 7265 616d 5f70 6f73 6974 696f 6e20 3d3d  ream_position ==
+00006700: 2031 0a61 7373 6572 7420 6576 656e 7473   1.assert events
+00006710: 5b31 5d2e 7479 7065 203d 3d20 6576 656e  [1].type == even
+00006720: 7432 2e74 7970 650a 6173 7365 7274 2065  t2.type.assert e
+00006730: 7665 6e74 735b 315d 2e64 6174 6120 3d3d  vents[1].data ==
+00006740: 2065 7665 6e74 322e 6461 7461 0a60 6060   event2.data.```
+00006750: 0a0a 5468 6520 6578 616d 706c 6520 6265  ..The example be
+00006760: 6c6f 7720 7368 6f77 7320 686f 7720 746f  low shows how to
+00006770: 2072 6561 6420 6120 6c69 6d69 7465 6420   read a limited 
+00006780: 6e75 6d62 6572 2028 6f6e 6529 206f 6620  number (one) of 
+00006790: 7468 6520 7265 636f 7264 6564 0a65 7665  the recorded.eve
+000067a0: 6e74 7320 696e 2061 2073 7472 6561 6d20  nts in a stream 
+000067b0: 6261 636b 7761 7264 7320 6672 6f6d 2061  backwards from a
+000067c0: 2067 6976 656e 2073 7472 6561 6d20 706f   given stream po
+000067d0: 7369 7469 6f6e 2e0a 0a60 6060 7079 7468  sition...```pyth
+000067e0: 6f6e 0a65 7665 6e74 7320 3d20 636c 6965  on.events = clie
+000067f0: 6e74 2e72 6561 645f 7374 7265 616d 5f65  nt.read_stream_e
+00006800: 7665 6e74 7328 0a20 2020 2073 7472 6561  vents(.    strea
+00006810: 6d5f 6e61 6d65 3d73 7472 6561 6d5f 6e61  m_name=stream_na
+00006820: 6d65 312c 0a20 2020 2073 7472 6561 6d5f  me1,.    stream_
+00006830: 706f 7369 7469 6f6e 3d32 2c0a 2020 2020  position=2,.    
+00006840: 6261 636b 7761 7264 733d 5472 7565 2c0a  backwards=True,.
+00006850: 2020 2020 6c69 6d69 743d 312c 0a29 0a0a      limit=1,.)..
+00006860: 6173 7365 7274 206c 656e 2865 7665 6e74  assert len(event
+00006870: 7329 203d 3d20 310a 0a61 7373 6572 7420  s) == 1..assert 
+00006880: 6576 656e 7473 5b30 5d2e 7374 7265 616d  events[0].stream
+00006890: 5f6e 616d 6520 3d3d 2073 7472 6561 6d5f  _name == stream_
+000068a0: 6e61 6d65 310a 6173 7365 7274 2065 7665  name1.assert eve
+000068b0: 6e74 735b 305d 2e73 7472 6561 6d5f 706f  nts[0].stream_po
+000068c0: 7369 7469 6f6e 203d 3d20 320a 6173 7365  sition == 2.asse
+000068d0: 7274 2065 7665 6e74 735b 305d 2e74 7970  rt events[0].typ
+000068e0: 6520 3d3d 2065 7665 6e74 332e 7479 7065  e == event3.type
+000068f0: 0a61 7373 6572 7420 6576 656e 7473 5b30  .assert events[0
+00006900: 5d2e 6461 7461 203d 3d20 6576 656e 7433  ].data == event3
+00006910: 2e64 6174 610a 6060 600a 0a23 2323 2052  .data.```..### R
+00006920: 6561 6420 616c 6c20 6576 656e 7473 0a0a  ead all events..
+00006930: 5468 6520 6d65 7468 6f64 2060 7265 6164  The method `read
+00006940: 5f61 6c6c 5f65 7665 6e74 7328 2960 2063  _all_events()` c
+00006950: 616e 2062 6520 7573 6564 2074 6f20 7265  an be used to re
+00006960: 6164 2061 6c6c 2072 6563 6f72 6465 6420  ad all recorded 
+00006970: 6576 656e 7473 0a69 6e20 7468 6520 6461  events.in the da
+00006980: 7461 6261 7365 2069 6e20 7468 6520 6f72  tabase in the or
+00006990: 6465 7220 7468 6579 2077 6572 6520 7265  der they were re
+000069a0: 636f 7264 6564 2e20 4974 2072 6574 7572  corded. It retur
+000069b0: 6e73 2061 6e20 6974 6572 6162 6c65 206f  ns an iterable o
+000069c0: 660a 6576 656e 7473 2074 6861 7420 6861  f.events that ha
+000069d0: 7665 2062 6565 6e20 7265 636f 7264 6564  ve been recorded
+000069e0: 2069 6e20 7468 6520 6461 7461 6261 7365   in the database
+000069f0: 2e20 4974 6572 6174 696e 6720 6f76 6572  . Iterating over
+00006a00: 2074 6869 7320 6974 6572 6162 6c65 0a6f   this iterable.o
+00006a10: 626a 6563 7420 7769 6c6c 2073 746f 7020  bject will stop 
+00006a20: 7768 656e 2069 7420 6861 7320 7969 656c  when it has yiel
+00006a30: 6465 6420 7468 6520 6c61 7374 2072 6563  ded the last rec
+00006a40: 6f72 6465 6420 6576 656e 742e 2054 6865  orded event. The
+00006a50: 2072 6563 6569 7665 640a 7265 636f 7264   received.record
+00006a60: 6564 2065 7665 6e74 206f 626a 6563 7420  ed event object 
+00006a70: 6172 6520 696e 7374 616e 6365 7320 6f66  are instances of
+00006a80: 2074 6865 2060 5265 636f 7264 6564 4576   the `RecordedEv
+00006a90: 656e 7460 2063 6c61 7373 2028 7365 6520  ent` class (see 
+00006aa0: 6265 6c6f 7729 2e0a 0a54 6869 7320 6d65  below)...This me
+00006ab0: 7468 6f64 2073 7570 706f 7274 7320 7365  thod supports se
+00006ac0: 7665 6e20 6f70 7469 6f6e 616c 2061 7267  ven optional arg
+00006ad0: 756d 656e 7473 2c20 6063 6f6d 6d69 745f  uments, `commit_
+00006ae0: 706f 7369 7469 6f6e 602c 2060 6261 636b  position`, `back
+00006af0: 7761 7264 7360 2c0a 6066 696c 7465 725f  wards`,.`filter_
+00006b00: 6578 636c 7564 6560 2c20 6066 696c 7465  exclude`, `filte
+00006b10: 725f 696e 636c 7564 6560 2c20 6066 696c  r_include`, `fil
+00006b20: 7465 725f 6279 5f73 7472 6561 6d5f 6e61  ter_by_stream_na
+00006b30: 6d65 602c 2060 6c69 6d69 7460 2c20 616e  me`, `limit`, an
+00006b40: 6420 6074 696d 656f 7574 602e 0a0a 5468  d `timeout`...Th
+00006b50: 6520 6f70 7469 6f6e 616c 2060 636f 6d6d  e optional `comm
+00006b60: 6974 5f70 6f73 6974 696f 6e60 2061 7267  it_position` arg
+00006b70: 756d 656e 7420 6973 2061 6e20 6f70 7469  ument is an opti
+00006b80: 6f6e 616c 2069 6e74 6567 6572 2074 6861  onal integer tha
+00006b90: 7420 6361 6e20 6265 2075 7365 6420 746f  t can be used to
+00006ba0: 0a73 7065 6369 6679 2074 6865 2063 6f6d  .specify the com
+00006bb0: 6d69 7420 706f 7369 7469 6f6e 2066 726f  mit position fro
+00006bc0: 6d20 7768 6963 6820 746f 2073 7461 7274  m which to start
+00006bd0: 2072 6561 6469 6e67 2e20 5468 6973 2061   reading. This a
+00006be0: 7267 756d 656e 7420 6973 2060 4e6f 6e65  rgument is `None
+00006bf0: 6020 6279 0a64 6566 6175 6c74 2c20 6d65  ` by.default, me
+00006c00: 616e 696e 6720 7468 6174 2061 6c6c 2074  aning that all t
+00006c10: 6865 2065 7665 6e74 7320 7769 6c6c 2062  he events will b
+00006c20: 6520 7265 6164 2065 6974 6865 7220 6672  e read either fr
+00006c30: 6f6d 2074 6865 2073 7461 7274 2c20 6f72  om the start, or
+00006c40: 0a66 726f 6d20 7468 6520 656e 6420 6966  .from the end if
+00006c50: 2060 6261 636b 7761 7264 7360 2069 7320   `backwards` is 
+00006c60: 6054 7275 6560 2028 7365 6520 6265 6c6f  `True` (see belo
+00006c70: 7729 2e20 506c 6561 7365 206e 6f74 652c  w). Please note,
+00006c80: 2069 6620 7370 6563 6966 6965 642c 0a74   if specified,.t
+00006c90: 6865 2073 7065 6369 6669 6564 2070 6f73  he specified pos
+00006ca0: 6974 696f 6e20 6d75 7374 2062 6520 616e  ition must be an
+00006cb0: 2061 6374 7561 6c6c 7920 6578 6973 7469   actually existi
+00006cc0: 6e67 2063 6f6d 6d69 7420 706f 7369 7469  ng commit positi
+00006cd0: 6f6e 2c20 6265 6361 7573 650a 616e 7920  on, because.any 
+00006ce0: 6f74 6865 7220 6e75 6d62 6572 2077 696c  other number wil
+00006cf0: 6c20 7265 7375 6c74 2069 6e20 6120 7365  l result in a se
+00006d00: 7276 6572 2065 7272 6f72 2028 6174 206c  rver error (at l
+00006d10: 6561 7374 2069 6e20 4576 656e 7453 746f  east in EventSto
+00006d20: 7265 4442 2076 3231 2e31 3029 2e0a 0a54  reDB v21.10)...T
+00006d30: 6865 206f 7074 696f 6e61 6c20 6062 6163  he optional `bac
+00006d40: 6b77 6172 6473 6020 6172 6775 6d65 6e74  kwards` argument
+00006d50: 2069 7320 6120 626f 6f6c 6561 6e20 7768   is a boolean wh
+00006d60: 6963 6820 6973 2062 7920 6465 6661 756c  ich is by defaul
+00006d70: 7420 6046 616c 7365 6020 6d65 616e 696e  t `False` meanin
+00006d80: 6720 7468 650a 6576 656e 7473 2077 696c  g the.events wil
+00006d90: 6c20 6265 2072 6561 6420 666f 7277 6172  l be read forwar
+00006da0: 6473 2062 7920 6465 6661 756c 742c 2073  ds by default, s
+00006db0: 6f20 7468 6174 2065 7665 6e74 7320 6172  o that events ar
+00006dc0: 6520 7265 7475 726e 6564 2069 6e20 7468  e returned in th
+00006dd0: 650a 6f72 6465 7220 7468 6579 2077 6572  e.order they wer
+00006de0: 6520 636f 6d6d 6974 7465 642c 2049 6620  e committed, If 
+00006df0: 6062 6163 6b77 6172 6473 6020 6973 2060  `backwards` is `
+00006e00: 5472 7565 602c 2074 6865 2065 7665 6e74  True`, the event
+00006e10: 7320 7769 6c6c 2062 6520 7265 6164 0a62  s will be read.b
+00006e20: 6163 6b77 6172 6473 2c20 736f 2074 6861  ackwards, so tha
+00006e30: 7420 6576 656e 7473 2061 7265 2072 6574  t events are ret
+00006e40: 7572 6e65 6420 696e 2072 6576 6572 7365  urned in reverse
+00006e50: 206f 7264 6572 2e0a 0a54 6865 206f 7074   order...The opt
+00006e60: 696f 6e61 6c20 6066 696c 7465 725f 6578  ional `filter_ex
+00006e70: 636c 7564 6560 2061 7267 756d 656e 7420  clude` argument 
+00006e80: 6973 2061 2073 6571 7565 6e63 6520 6f66  is a sequence of
+00006e90: 2072 6567 756c 6172 2065 7870 7265 7373   regular express
+00006ea0: 696f 6e73 2074 6861 740a 6d61 7463 6820  ions that.match 
+00006eb0: 7265 636f 7264 6564 2065 7665 6e74 7320  recorded events 
+00006ec0: 7468 6174 2073 686f 756c 6420 6e6f 7420  that should not 
+00006ed0: 6265 2069 6e63 6c75 6465 642e 2054 6869  be included. Thi
+00006ee0: 7320 6172 6775 6d65 6e74 2069 7320 6967  s argument is ig
+00006ef0: 6e6f 7265 640a 6966 2060 6669 6c74 6572  nored.if `filter
+00006f00: 5f69 6e63 6c75 6465 6020 6973 2073 6574  _include` is set
+00006f10: 2074 6f20 6120 6e6f 6e2d 656d 7074 7920   to a non-empty 
+00006f20: 7365 7175 656e 6365 2e20 4279 2064 6566  sequence. By def
+00006f30: 6175 6c74 2c20 7468 6973 2061 7267 756d  ault, this argum
+00006f40: 656e 7420 6973 2073 6574 0a74 6f20 6d61  ent is set.to ma
+00006f50: 7463 6820 7468 6520 6576 656e 7420 7479  tch the event ty
+00006f60: 7065 7320 6f66 2022 7379 7374 656d 2065  pes of "system e
+00006f70: 7665 6e74 7322 2c20 736f 2074 6861 7420  vents", so that 
+00006f80: 4576 656e 7453 746f 7265 4442 2073 7973  EventStoreDB sys
+00006f90: 7465 6d20 6576 656e 7473 0a77 696c 6c20  tem events.will 
+00006fa0: 6e6f 7420 6e6f 726d 616c 6c79 2062 6520  not normally be 
+00006fb0: 696e 636c 7564 6564 2e20 5365 6520 7468  included. See th
+00006fc0: 6520 4e6f 7465 7320 7365 6374 696f 6e20  e Notes section 
+00006fd0: 6265 6c6f 7720 666f 7220 6d6f 7265 2069  below for more i
+00006fe0: 6e66 6f72 6d61 7469 6f6e 0a61 626f 7574  nformation.about
+00006ff0: 2066 696c 7465 7220 6578 7072 6573 7369   filter expressi
+00007000: 6f6e 732e 0a0a 5468 6520 6172 6775 6d65  ons...The argume
+00007010: 6e74 2060 6669 6c74 6572 5f69 6e63 6c75  nt `filter_inclu
+00007020: 6465 6020 6f70 7469 6f6e 616c 2069 7320  de` optional is 
+00007030: 6120 7365 7175 656e 6365 206f 6620 7265  a sequence of re
+00007040: 6775 6c61 7220 6578 7072 6573 7369 6f6e  gular expression
+00007050: 730a 7468 6174 206d 6174 6368 2072 6563  s.that match rec
+00007060: 6f72 6465 6420 6576 656e 7473 2074 6861  orded events tha
+00007070: 7420 7368 6f75 6c64 2062 6520 696e 636c  t should be incl
+00007080: 7564 6564 2e20 4279 2064 6566 6175 6c74  uded. By default
+00007090: 2c20 7468 6973 2061 7267 756d 656e 740a  , this argument.
+000070a0: 6973 2061 6e20 656d 7074 7920 7475 706c  is an empty tupl
+000070b0: 652e 2049 6620 7468 6973 2061 7267 756d  e. If this argum
+000070c0: 656e 7420 6973 2073 6574 2074 6f20 6120  ent is set to a 
+000070d0: 6e6f 6e2d 656d 7074 7920 7365 7175 656e  non-empty sequen
+000070e0: 6365 2c20 7468 650a 6066 696c 7465 725f  ce, the.`filter_
+000070f0: 6578 636c 7564 6560 2061 7267 756d 656e  exclude` argumen
+00007100: 7420 6973 2069 676e 6f72 6564 2e0a 0a54  t is ignored...T
+00007110: 6865 2061 7267 756d 656e 7420 6066 696c  he argument `fil
+00007120: 7465 725f 6279 5f73 7472 6561 6d5f 6e61  ter_by_stream_na
+00007130: 6d65 6020 6f70 7469 6f6e 616c 2069 7320  me` optional is 
+00007140: 6120 626f 6f6c 6561 6e20 7661 6c75 6520  a boolean value 
+00007150: 7468 6174 2069 6e64 6963 6174 6573 2077  that indicates w
+00007160: 6865 7468 6572 0a74 6865 2066 696c 7465  hether.the filte
+00007170: 7220 7769 6c6c 2061 7070 6c79 2074 6f20  r will apply to 
+00007180: 6576 656e 7420 7479 7065 7320 6f72 2073  event types or s
+00007190: 7472 6561 6d20 6e61 6d65 732e 2042 7920  tream names. By 
+000071a0: 6465 6661 756c 742c 2074 6869 7320 7661  default, this va
+000071b0: 6c75 6520 6973 2060 4661 6c73 6560 0a61  lue is `False`.a
+000071c0: 6e64 2073 6f20 7468 6520 6669 6c74 6572  nd so the filter
+000071d0: 696e 6720 7769 6c6c 2061 7070 6c79 2074  ing will apply t
+000071e0: 6f20 7468 6520 6576 656e 7420 7479 7065  o the event type
+000071f0: 2073 7472 696e 6773 206f 6620 7265 636f   strings of reco
+00007200: 7264 6564 2065 7665 6e74 732e 0a0a 5468  rded events...Th
+00007210: 6520 6172 6775 6d65 6e74 2060 6c69 6d69  e argument `limi
+00007220: 7460 206f 7074 696f 6e61 6c20 6973 2061  t` optional is a
+00007230: 6e20 696e 7465 6765 7220 7768 6963 6820  n integer which 
+00007240: 6c69 6d69 7473 2074 6865 206e 756d 6265  limits the numbe
+00007250: 7220 6f66 2065 7665 6e74 7320 7468 6174  r of events that
+00007260: 2077 696c 6c0a 6265 2072 6574 7572 6e65   will.be returne
+00007270: 642e 2054 6865 2064 6566 6175 6c74 2076  d. The default v
+00007280: 616c 7565 2069 7320 6073 7973 2e6d 6178  alue is `sys.max
+00007290: 696e 7460 2e0a 0a54 6865 206f 7074 696f  int`...The optio
+000072a0: 6e61 6c20 6074 696d 656f 7574 6020 6172  nal `timeout` ar
+000072b0: 6775 6d65 6e74 2069 7320 6120 5079 7468  gument is a Pyth
+000072c0: 6f6e 2060 666c 6f61 7460 2077 6869 6368  on `float` which
+000072d0: 2073 6574 7320 610a 6465 6164 6c69 6e65   sets a.deadline
+000072e0: 2066 6f72 2074 6865 2063 6f6d 706c 6574   for the complet
+000072f0: 696f 6e20 6f66 2074 6865 2067 5250 4320  ion of the gRPC 
+00007300: 6f70 6572 6174 696f 6e2e 0a0a 5468 6520  operation...The 
+00007310: 6669 6c74 6572 696e 6720 6f66 2065 7665  filtering of eve
+00007320: 6e74 7320 6973 2064 6f6e 6520 6f6e 2074  nts is done on t
+00007330: 6865 2045 7665 6e74 5374 6f72 6544 4220  he EventStoreDB 
+00007340: 7365 7276 6572 2e20 5468 650a 606c 696d  server. The.`lim
+00007350: 6974 6020 6172 6775 6d65 6e74 2069 7320  it` argument is 
+00007360: 6170 706c 6965 6420 6f6e 2074 6865 2073  applied on the s
+00007370: 6572 7665 7220 6166 7465 7220 6669 6c74  erver after filt
+00007380: 6572 696e 672e 2053 6565 2062 656c 6f77  ering. See below
+00007390: 2066 6f72 0a6d 6f72 6520 696e 666f 726d   for.more inform
+000073a0: 6174 696f 6e20 6162 6f75 7420 6669 6c74  ation about filt
+000073b0: 6572 2072 6567 756c 6172 2065 7870 7265  er regular expre
+000073c0: 7373 696f 6e73 2e0a 0a57 6865 6e20 7265  ssions...When re
+000073d0: 6164 696e 6720 666f 7277 6172 6473 2066  ading forwards f
+000073e0: 726f 6d20 6120 7370 6563 6966 6963 2063  rom a specific c
+000073f0: 6f6d 6d69 7420 706f 7369 7469 6f6e 2c20  ommit position, 
+00007400: 7468 6520 6576 656e 7420 6174 2074 6865  the event at the
+00007410: 2073 7065 6369 6669 6564 0a70 6f73 6974   specified.posit
+00007420: 696f 6e20 5749 4c4c 2062 6520 696e 636c  ion WILL be incl
+00007430: 7564 6564 2e20 486f 7765 7665 722c 2077  uded. However, w
+00007440: 6865 6e20 7265 6164 696e 6720 6261 636b  hen reading back
+00007450: 7761 7264 732c 2074 6865 2065 7665 6e74  wards, the event
+00007460: 2061 7420 7468 650a 7370 6563 6966 6965   at the.specifie
+00007470: 6420 706f 7369 7469 6f6e 2077 696c 6c20  d position will 
+00007480: 4e4f 5420 6265 2069 6e63 6c75 6465 642e  NOT be included.
+00007490: 2028 5468 6973 206e 6f6e 2d69 6e63 6c75   (This non-inclu
+000074a0: 7369 7665 2062 6568 6176 696f 7572 2c20  sive behaviour, 
+000074b0: 6f66 2065 7863 6c75 6469 6e67 0a74 6865  of excluding.the
+000074c0: 2073 7065 6369 6669 6564 2063 6f6d 6d69   specified commi
+000074d0: 7420 706f 7369 7469 6f6e 2077 6865 6e20  t position when 
+000074e0: 7265 6164 696e 6720 616c 6c20 7374 7265  reading all stre
+000074f0: 616d 7320 6261 636b 7761 7264 732c 2064  ams backwards, d
+00007500: 6966 6665 7273 2066 726f 6d20 7468 650a  iffers from the.
+00007510: 6265 6861 7669 6f75 7220 7768 656e 2072  behaviour when r
+00007520: 6561 6469 6e67 2061 2073 7472 6561 6d20  eading a stream 
+00007530: 6261 636b 7761 7264 7320 6672 6f6d 2061  backwards from a
+00007540: 2073 7065 6369 6669 6320 7374 7265 616d   specific stream
+00007550: 2070 6f73 6974 696f 6e2e 290a 0a54 6865   position.)..The
+00007560: 2065 7861 6d70 6c65 2062 656c 6f77 2073   example below s
+00007570: 686f 7773 2068 6f77 2074 6f20 7265 6164  hows how to read
+00007580: 2061 6c6c 2065 7665 6e74 7320 696e 2074   all events in t
+00007590: 6865 2064 6174 6162 6173 6520 696e 2074  he database in t
+000075a0: 6865 0a6f 7264 6572 2074 6865 7920 7765  he.order they we
+000075b0: 7265 2072 6563 6f72 6465 642e 0a0a 6060  re recorded...``
+000075c0: 6070 7974 686f 6e0a 6576 656e 7473 203d  `python.events =
+000075d0: 206c 6973 7428 636c 6965 6e74 2e72 6561   list(client.rea
+000075e0: 645f 616c 6c5f 6576 656e 7473 2829 290a  d_all_events()).
+000075f0: 0a61 7373 6572 7420 6c65 6e28 6576 656e  .assert len(even
+00007600: 7473 2920 3e3d 2033 0a60 6060 0a0a 5468  ts) >= 3.```..Th
+00007610: 6520 6578 616d 706c 6520 6265 6c6f 7720  e example below 
+00007620: 7368 6f77 7320 686f 7720 746f 2072 6561  shows how to rea
+00007630: 6420 616c 6c20 7265 636f 7264 6564 2065  d all recorded e
+00007640: 7665 6e74 7320 6672 6f6d 2061 2073 7065  vents from a spe
+00007650: 6369 6669 6320 636f 6d6d 6974 2070 6f73  cific commit pos
+00007660: 6974 696f 6e2e 0a0a 6060 6070 7974 686f  ition...```pytho
+00007670: 6e0a 6576 656e 7473 203d 206c 6973 7428  n.events = list(
+00007680: 0a20 2020 2063 6c69 656e 742e 7265 6164  .    client.read
+00007690: 5f61 6c6c 5f65 7665 6e74 7328 0a20 2020  _all_events(.   
+000076a0: 2020 2020 2063 6f6d 6d69 745f 706f 7369       commit_posi
+000076b0: 7469 6f6e 3d63 6f6d 6d69 745f 706f 7369  tion=commit_posi
+000076c0: 7469 6f6e 310a 2020 2020 290a 290a 0a61  tion1.    ).)..a
+000076d0: 7373 6572 7420 6c65 6e28 6576 656e 7473  ssert len(events
+000076e0: 2920 3d3d 2033 0a0a 6173 7365 7274 2065  ) == 3..assert e
+000076f0: 7665 6e74 735b 305d 2e73 7472 6561 6d5f  vents[0].stream_
+00007700: 6e61 6d65 203d 3d20 7374 7265 616d 5f6e  name == stream_n
+00007710: 616d 6531 0a61 7373 6572 7420 6576 656e  ame1.assert even
+00007720: 7473 5b30 5d2e 7374 7265 616d 5f70 6f73  ts[0].stream_pos
+00007730: 6974 696f 6e20 3d3d 2030 0a61 7373 6572  ition == 0.asser
+00007740: 7420 6576 656e 7473 5b30 5d2e 7479 7065  t events[0].type
+00007750: 203d 3d20 6576 656e 7431 2e74 7970 650a   == event1.type.
+00007760: 6173 7365 7274 2065 7665 6e74 735b 305d  assert events[0]
+00007770: 2e64 6174 6120 3d3d 2065 7665 6e74 312e  .data == event1.
+00007780: 6461 7461 0a0a 6173 7365 7274 2065 7665  data..assert eve
+00007790: 6e74 735b 315d 2e73 7472 6561 6d5f 6e61  nts[1].stream_na
+000077a0: 6d65 203d 3d20 7374 7265 616d 5f6e 616d  me == stream_nam
+000077b0: 6531 0a61 7373 6572 7420 6576 656e 7473  e1.assert events
+000077c0: 5b31 5d2e 7374 7265 616d 5f70 6f73 6974  [1].stream_posit
+000077d0: 696f 6e20 3d3d 2031 0a61 7373 6572 7420  ion == 1.assert 
+000077e0: 6576 656e 7473 5b31 5d2e 7479 7065 203d  events[1].type =
+000077f0: 3d20 6576 656e 7432 2e74 7970 650a 6173  = event2.type.as
+00007800: 7365 7274 2065 7665 6e74 735b 315d 2e64  sert events[1].d
+00007810: 6174 6120 3d3d 2065 7665 6e74 322e 6461  ata == event2.da
+00007820: 7461 0a0a 6173 7365 7274 2065 7665 6e74  ta..assert event
+00007830: 735b 325d 2e73 7472 6561 6d5f 6e61 6d65  s[2].stream_name
+00007840: 203d 3d20 7374 7265 616d 5f6e 616d 6531   == stream_name1
+00007850: 0a61 7373 6572 7420 6576 656e 7473 5b32  .assert events[2
+00007860: 5d2e 7374 7265 616d 5f70 6f73 6974 696f  ].stream_positio
+00007870: 6e20 3d3d 2032 0a61 7373 6572 7420 6576  n == 2.assert ev
+00007880: 656e 7473 5b32 5d2e 7479 7065 203d 3d20  ents[2].type == 
+00007890: 6576 656e 7433 2e74 7970 650a 6173 7365  event3.type.asse
+000078a0: 7274 2065 7665 6e74 735b 325d 2e64 6174  rt events[2].dat
+000078b0: 6120 3d3d 2065 7665 6e74 332e 6461 7461  a == event3.data
+000078c0: 0a60 6060 0a0a 5468 6520 6578 616d 706c  .```..The exampl
+000078d0: 6520 6265 6c6f 7720 7368 6f77 7320 686f  e below shows ho
+000078e0: 7720 746f 2072 6561 6420 616c 6c20 7265  w to read all re
+000078f0: 636f 7264 6564 2065 7665 6e74 7320 696e  corded events in
+00007900: 2072 6576 6572 7365 206f 7264 6572 2e0a   reverse order..
+00007910: 0a60 6060 7079 7468 6f6e 0a65 7665 6e74  .```python.event
+00007920: 7320 3d20 6c69 7374 280a 2020 2020 636c  s = list(.    cl
+00007930: 6965 6e74 2e72 6561 645f 616c 6c5f 6576  ient.read_all_ev
+00007940: 656e 7473 280a 2020 2020 2020 2020 6261  ents(.        ba
+00007950: 636b 7761 7264 733d 5472 7565 0a20 2020  ckwards=True.   
+00007960: 2029 0a29 0a0a 6173 7365 7274 206c 656e   ).)..assert len
+00007970: 2865 7665 6e74 7329 203e 3d20 330a 0a61  (events) >= 3..a
+00007980: 7373 6572 7420 6576 656e 7473 5b30 5d2e  ssert events[0].
+00007990: 7374 7265 616d 5f6e 616d 6520 3d3d 2073  stream_name == s
+000079a0: 7472 6561 6d5f 6e61 6d65 310a 6173 7365  tream_name1.asse
+000079b0: 7274 2065 7665 6e74 735b 305d 2e73 7472  rt events[0].str
+000079c0: 6561 6d5f 706f 7369 7469 6f6e 203d 3d20  eam_position == 
+000079d0: 320a 6173 7365 7274 2065 7665 6e74 735b  2.assert events[
+000079e0: 305d 2e74 7970 6520 3d3d 2065 7665 6e74  0].type == event
+000079f0: 332e 7479 7065 0a61 7373 6572 7420 6576  3.type.assert ev
+00007a00: 656e 7473 5b30 5d2e 6461 7461 203d 3d20  ents[0].data == 
+00007a10: 6576 656e 7433 2e64 6174 610a 0a61 7373  event3.data..ass
+00007a20: 6572 7420 6576 656e 7473 5b31 5d2e 7374  ert events[1].st
+00007a30: 7265 616d 5f6e 616d 6520 3d3d 2073 7472  ream_name == str
+00007a40: 6561 6d5f 6e61 6d65 310a 6173 7365 7274  eam_name1.assert
+00007a50: 2065 7665 6e74 735b 315d 2e73 7472 6561   events[1].strea
+00007a60: 6d5f 706f 7369 7469 6f6e 203d 3d20 310a  m_position == 1.
+00007a70: 6173 7365 7274 2065 7665 6e74 735b 315d  assert events[1]
+00007a80: 2e74 7970 6520 3d3d 2065 7665 6e74 322e  .type == event2.
+00007a90: 7479 7065 0a61 7373 6572 7420 6576 656e  type.assert even
+00007aa0: 7473 5b31 5d2e 6461 7461 203d 3d20 6576  ts[1].data == ev
+00007ab0: 656e 7432 2e64 6174 610a 0a61 7373 6572  ent2.data..asser
+00007ac0: 7420 6576 656e 7473 5b32 5d2e 7374 7265  t events[2].stre
+00007ad0: 616d 5f6e 616d 6520 3d3d 2073 7472 6561  am_name == strea
+00007ae0: 6d5f 6e61 6d65 310a 6173 7365 7274 2065  m_name1.assert e
+00007af0: 7665 6e74 735b 325d 2e73 7472 6561 6d5f  vents[2].stream_
+00007b00: 706f 7369 7469 6f6e 203d 3d20 300a 6173  position == 0.as
+00007b10: 7365 7274 2065 7665 6e74 735b 325d 2e74  sert events[2].t
+00007b20: 7970 6520 3d3d 2065 7665 6e74 312e 7479  ype == event1.ty
+00007b30: 7065 0a61 7373 6572 7420 6576 656e 7473  pe.assert events
+00007b40: 5b32 5d2e 6461 7461 203d 3d20 6576 656e  [2].data == even
+00007b50: 7431 2e64 6174 610a 6060 600a 0a54 6865  t1.data.```..The
+00007b60: 2065 7861 6d70 6c65 2062 656c 6f77 2073   example below s
+00007b70: 686f 7773 2068 6f77 2074 6f20 7265 6164  hows how to read
+00007b80: 2061 206c 696d 6974 6564 206e 756d 6265   a limited numbe
+00007b90: 7220 286f 6e65 2920 6f66 2074 6865 2072  r (one) of the r
+00007ba0: 6563 6f72 6465 6420 6576 656e 7473 0a69  ecorded events.i
+00007bb0: 6e20 7468 6520 6461 7461 6261 7365 2066  n the database f
+00007bc0: 6f72 7761 7264 7320 6672 6f6d 2061 2073  orwards from a s
+00007bd0: 7065 6369 6669 6320 636f 6d6d 6974 2070  pecific commit p
+00007be0: 6f73 6974 696f 6e2e 2050 6c65 6173 6520  osition. Please 
+00007bf0: 6e6f 7465 2c20 7768 656e 2072 6561 6469  note, when readi
+00007c00: 6e67 0a61 6c6c 2065 7665 6e74 7320 666f  ng.all events fo
+00007c10: 7277 6172 6473 2066 726f 6d20 6120 7370  rwards from a sp
+00007c20: 6563 6966 6963 2063 6f6d 6d69 7420 706f  ecific commit po
+00007c30: 7369 7469 6f6e 2c20 7468 6520 6576 656e  sition, the even
+00007c40: 7420 6174 2074 6865 2073 7065 6369 6669  t at the specifi
+00007c50: 6564 0a70 6f73 6974 696f 6e20 5749 4c4c  ed.position WILL
+00007c60: 2062 6520 696e 636c 7564 6564 2e0a 0a0a   be included....
+00007c70: 6060 6070 7974 686f 6e0a 6576 656e 7473  ```python.events
+00007c80: 203d 206c 6973 7428 0a20 2020 2063 6c69   = list(.    cli
+00007c90: 656e 742e 7265 6164 5f61 6c6c 5f65 7665  ent.read_all_eve
+00007ca0: 6e74 7328 0a20 2020 2020 2020 2063 6f6d  nts(.        com
+00007cb0: 6d69 745f 706f 7369 7469 6f6e 3d63 6f6d  mit_position=com
+00007cc0: 6d69 745f 706f 7369 7469 6f6e 312c 0a20  mit_position1,. 
+00007cd0: 2020 2020 2020 206c 696d 6974 3d31 2c0a         limit=1,.
+00007ce0: 2020 2020 290a 290a 0a61 7373 6572 7420      ).)..assert 
+00007cf0: 6c65 6e28 6576 656e 7473 2920 3d3d 2031  len(events) == 1
+00007d00: 0a0a 6173 7365 7274 2065 7665 6e74 735b  ..assert events[
+00007d10: 305d 2e73 7472 6561 6d5f 6e61 6d65 203d  0].stream_name =
+00007d20: 3d20 7374 7265 616d 5f6e 616d 6531 0a61  = stream_name1.a
+00007d30: 7373 6572 7420 6576 656e 7473 5b30 5d2e  ssert events[0].
+00007d40: 7374 7265 616d 5f70 6f73 6974 696f 6e20  stream_position 
+00007d50: 3d3d 2030 0a61 7373 6572 7420 6576 656e  == 0.assert even
+00007d60: 7473 5b30 5d2e 7479 7065 203d 3d20 6576  ts[0].type == ev
+00007d70: 656e 7431 2e74 7970 650a 6173 7365 7274  ent1.type.assert
+00007d80: 2065 7665 6e74 735b 305d 2e64 6174 6120   events[0].data 
+00007d90: 3d3d 2065 7665 6e74 312e 6461 7461 0a0a  == event1.data..
+00007da0: 6173 7365 7274 2065 7665 6e74 735b 305d  assert events[0]
+00007db0: 2e63 6f6d 6d69 745f 706f 7369 7469 6f6e  .commit_position
+00007dc0: 203d 3d20 636f 6d6d 6974 5f70 6f73 6974   == commit_posit
+00007dd0: 696f 6e31 0a60 6060 0a0a 5468 6520 6578  ion1.```..The ex
+00007de0: 616d 706c 6520 6265 6c6f 7720 7368 6f77  ample below show
+00007df0: 7320 686f 7720 746f 2072 6561 6420 6120  s how to read a 
+00007e00: 6c69 6d69 7465 6420 6e75 6d62 6572 2028  limited number (
+00007e10: 6f6e 6529 206f 6620 7468 6520 7265 636f  one) of the reco
+00007e20: 7264 6564 2065 7665 6e74 730a 696e 2074  rded events.in t
+00007e30: 6865 2064 6174 6162 6173 6520 6261 636b  he database back
+00007e40: 7761 7264 7320 6672 6f6d 2074 6865 2065  wards from the e
+00007e50: 6e64 2e20 5468 6973 2067 6976 6573 2074  nd. This gives t
+00007e60: 6865 206c 6173 7420 7265 636f 7264 6564  he last recorded
+00007e70: 2065 7665 6e74 2e0a 0a60 6060 7079 7468   event...```pyth
+00007e80: 6f6e 0a65 7665 6e74 7320 3d20 6c69 7374  on.events = list
+00007e90: 280a 2020 2020 636c 6965 6e74 2e72 6561  (.    client.rea
+00007ea0: 645f 616c 6c5f 6576 656e 7473 280a 2020  d_all_events(.  
+00007eb0: 2020 2020 2020 6261 636b 7761 7264 733d        backwards=
+00007ec0: 5472 7565 2c0a 2020 2020 2020 2020 6c69  True,.        li
+00007ed0: 6d69 743d 312c 0a20 2020 2029 0a29 0a0a  mit=1,.    ).)..
+00007ee0: 6173 7365 7274 206c 656e 2865 7665 6e74  assert len(event
+00007ef0: 7329 203d 3d20 310a 0a61 7373 6572 7420  s) == 1..assert 
+00007f00: 6576 656e 7473 5b30 5d2e 7374 7265 616d  events[0].stream
+00007f10: 5f6e 616d 6520 3d3d 2073 7472 6561 6d5f  _name == stream_
+00007f20: 6e61 6d65 310a 6173 7365 7274 2065 7665  name1.assert eve
+00007f30: 6e74 735b 305d 2e73 7472 6561 6d5f 706f  nts[0].stream_po
+00007f40: 7369 7469 6f6e 203d 3d20 320a 6173 7365  sition == 2.asse
+00007f50: 7274 2065 7665 6e74 735b 305d 2e74 7970  rt events[0].typ
+00007f60: 6520 3d3d 2065 7665 6e74 332e 7479 7065  e == event3.type
+00007f70: 0a61 7373 6572 7420 6576 656e 7473 5b30  .assert events[0
+00007f80: 5d2e 6461 7461 203d 3d20 6576 656e 7433  ].data == event3
+00007f90: 2e64 6174 610a 6060 600a 0a54 6865 2065  .data.```..The e
+00007fa0: 7861 6d70 6c65 2062 656c 6f77 2073 686f  xample below sho
+00007fb0: 7773 2068 6f77 2074 6f20 7265 6164 2061  ws how to read a
+00007fc0: 206c 696d 6974 6564 206e 756d 6265 7220   limited number 
+00007fd0: 286f 6e65 2920 6f66 2074 6865 2072 6563  (one) of the rec
+00007fe0: 6f72 6465 6420 6576 656e 7473 0a69 6e20  orded events.in 
+00007ff0: 7468 6520 6461 7461 6261 7365 2062 6163  the database bac
+00008000: 6b77 6172 6473 2066 726f 6d20 6120 7370  kwards from a sp
+00008010: 6563 6966 6963 2063 6f6d 6d69 7420 706f  ecific commit po
+00008020: 7369 7469 6f6e 2e20 506c 6561 7365 206e  sition. Please n
+00008030: 6f74 652c 2077 6865 6e20 7265 6164 696e  ote, when readin
+00008040: 670a 616c 6c20 6576 656e 7473 2062 6163  g.all events bac
+00008050: 6b77 6172 6473 2066 726f 6d20 6120 7370  kwards from a sp
+00008060: 6563 6966 6963 2063 6f6d 6d69 7420 706f  ecific commit po
+00008070: 7369 7469 6f6e 2c20 7468 6520 6576 656e  sition, the even
+00008080: 7420 6174 2074 6865 2073 7065 6369 6669  t at the specifi
+00008090: 6564 0a70 6f73 6974 696f 6e20 5749 4c4c  ed.position WILL
+000080a0: 204e 4f54 2062 6520 696e 636c 7564 6564   NOT be included
+000080b0: 2e0a 0a60 6060 7079 7468 6f6e 0a65 7665  ...```python.eve
+000080c0: 6e74 7320 3d20 6c69 7374 280a 2020 2020  nts = list(.    
+000080d0: 636c 6965 6e74 2e72 6561 645f 616c 6c5f  client.read_all_
+000080e0: 6576 656e 7473 280a 2020 2020 2020 2020  events(.        
+000080f0: 636f 6d6d 6974 5f70 6f73 6974 696f 6e3d  commit_position=
+00008100: 636f 6d6d 6974 5f70 6f73 6974 696f 6e32  commit_position2
+00008110: 2c0a 2020 2020 2020 2020 6261 636b 7761  ,.        backwa
+00008120: 7264 733d 5472 7565 2c0a 2020 2020 2020  rds=True,.      
+00008130: 2020 6c69 6d69 743d 312c 0a20 2020 2029    limit=1,.    )
+00008140: 0a29 0a0a 6173 7365 7274 206c 656e 2865  .)..assert len(e
+00008150: 7665 6e74 7329 203d 3d20 310a 0a61 7373  vents) == 1..ass
+00008160: 6572 7420 6576 656e 7473 5b30 5d2e 636f  ert events[0].co
+00008170: 6d6d 6974 5f70 6f73 6974 696f 6e20 3c20  mmit_position < 
+00008180: 636f 6d6d 6974 5f70 6f73 6974 696f 6e32  commit_position2
+00008190: 0a60 6060 0a0a 0a23 2323 2047 6574 2063  .```...### Get c
+000081a0: 7572 7265 6e74 2073 7472 6561 6d20 706f  urrent stream po
+000081b0: 7369 7469 6f6e 0a0a 5468 6520 6067 6574  sition..The `get
+000081c0: 5f73 7472 6561 6d5f 706f 7369 7469 6f6e  _stream_position
+000081d0: 2829 6020 6d65 7468 6f64 2063 616e 2062  ()` method can b
+000081e0: 6520 7573 6564 2074 6f0a 6765 7420 7468  e used to.get th
+000081f0: 6520 2273 7472 6561 6d20 706f 7369 7469  e "stream positi
+00008200: 6f6e 2220 6f66 2074 6865 206c 6173 7420  on" of the last 
+00008210: 7265 636f 7264 6564 2065 7665 6e74 2069  recorded event i
+00008220: 6e20 6120 7374 7265 616d 2e0a 0a54 6869  n a stream...Thi
+00008230: 7320 6d65 7468 6f64 2068 6173 2061 2060  s method has a `
+00008240: 7374 7265 616d 5f6e 616d 6560 2061 7267  stream_name` arg
+00008250: 756d 656e 742c 2077 6869 6368 2069 7320  ument, which is 
+00008260: 7265 7175 6972 6564 2e0a 0a54 6869 7320  required...This 
+00008270: 6d65 7468 6f64 2061 6c73 6f20 7461 6b65  method also take
+00008280: 7320 616e 206f 7074 696f 6e61 6c20 6074  s an optional `t
+00008290: 696d 656f 7574 6020 6172 6775 6d65 6e74  imeout` argument
+000082a0: 2c20 7468 6174 0a69 7320 6578 7065 6374  , that.is expect
+000082b0: 6564 2074 6f20 6265 2061 2050 7974 686f  ed to be a Pytho
+000082c0: 6e20 6066 6c6f 6174 602c 2077 6869 6368  n `float`, which
+000082d0: 2073 6574 7320 6120 6465 6164 6c69 6e65   sets a deadline
+000082e0: 0a66 6f72 2074 6865 2063 6f6d 706c 6574  .for the complet
+000082f0: 696f 6e20 6f66 2074 6865 2067 5250 4320  ion of the gRPC 
+00008300: 6f70 6572 6174 696f 6e2e 0a0a 5468 6520  operation...The 
+00008310: 7365 7175 656e 6365 206f 6620 706f 7369  sequence of posi
+00008320: 7469 6f6e 7320 696e 2061 2073 7472 6561  tions in a strea
+00008330: 6d20 6973 2067 6170 6c65 7373 2e20 4974  m is gapless. It
+00008340: 2069 7320 7a65 726f 2d62 6173 6564 2c0a   is zero-based,.
+00008350: 736f 2074 6861 7420 6120 7374 7265 616d  so that a stream
+00008360: 2077 6974 6820 6f6e 6520 7265 636f 7264   with one record
+00008370: 6564 2065 7665 6e74 2068 6173 2061 2063  ed event has a c
+00008380: 7572 7265 6e74 2073 7472 6561 6d0a 706f  urrent stream.po
+00008390: 7369 7469 6f6e 206f 6620 6030 602e 2054  sition of `0`. T
+000083a0: 6865 2063 7572 7265 6e74 2073 7472 6561  he current strea
+000083b0: 6d20 706f 7369 7469 6f6e 2069 7320 6031  m position is `1
+000083c0: 6020 7768 656e 2061 2073 7472 6561 6d20  ` when a stream 
+000083d0: 6861 730a 7477 6f20 6576 656e 7473 2c20  has.two events, 
+000083e0: 616e 6420 6974 2069 7320 6032 6020 7768  and it is `2` wh
+000083f0: 656e 2074 6865 7265 2061 7265 2065 7665  en there are eve
+00008400: 6e74 732c 2061 6e64 2073 6f20 6f6e 2e0a  nts, and so on..
+00008410: 0a49 6e20 7468 6520 6578 616d 706c 6520  .In the example 
+00008420: 6265 6c6f 772c 2074 6865 2063 7572 7265  below, the curre
+00008430: 6e74 2073 7472 6561 6d20 706f 7369 7469  nt stream positi
+00008440: 6f6e 2069 7320 6f62 7461 696e 6564 206f  on is obtained o
+00008450: 6620 7468 650a 7374 7265 616d 2074 6f20  f the.stream to 
+00008460: 7768 6963 6820 6576 656e 7473 2077 6572  which events wer
+00008470: 6520 6170 7065 6e64 6564 2069 6e20 7468  e appended in th
+00008480: 6520 6578 616d 706c 6573 2061 626f 7665  e examples above
+00008490: 2e0a 4265 6361 7573 6520 7468 6520 7365  ..Because the se
+000084a0: 7175 656e 6365 206f 6620 7374 7265 616d  quence of stream
+000084b0: 2070 6f73 6974 696f 6e73 2069 7320 7a65   positions is ze
+000084c0: 726f 2d62 6173 6564 2c20 616e 6420 6265  ro-based, and be
+000084d0: 6361 7573 650a 7468 7265 6520 6576 656e  cause.three even
+000084e0: 7473 2077 6572 6520 6170 7065 6e64 6564  ts were appended
+000084f0: 2c20 736f 2074 6865 2063 7572 7265 6e74  , so the current
+00008500: 2073 7472 6561 6d20 706f 7369 7469 6f6e   stream position
+00008510: 2069 7320 6032 602e 0a0a 6060 6070 7974   is `2`...```pyt
+00008520: 686f 6e0a 7374 7265 616d 5f70 6f73 6974  hon.stream_posit
+00008530: 696f 6e20 3d20 636c 6965 6e74 2e67 6574  ion = client.get
+00008540: 5f73 7472 6561 6d5f 706f 7369 7469 6f6e  _stream_position
+00008550: 280a 2020 2020 7374 7265 616d 5f6e 616d  (.    stream_nam
+00008560: 653d 7374 7265 616d 5f6e 616d 6531 0a29  e=stream_name1.)
+00008570: 0a0a 6173 7365 7274 2073 7472 6561 6d5f  ..assert stream_
+00008580: 706f 7369 7469 6f6e 203d 3d20 320a 6060  position == 2.``
+00008590: 600a 0a49 6620 6120 7374 7265 616d 2064  `..If a stream d
+000085a0: 6f65 7320 6e6f 7420 6578 6973 742c 2074  oes not exist, t
+000085b0: 6865 2072 6574 7572 6e65 6420 7374 7265  he returned stre
+000085c0: 616d 2070 6f73 6974 696f 6e20 7661 6c75  am position valu
+000085d0: 6520 6973 2060 4e6f 6e65 602c 0a77 6869  e is `None`,.whi
+000085e0: 6368 206d 6174 6368 6573 2074 6865 2072  ch matches the r
+000085f0: 6571 7569 7265 6420 6578 7065 6374 6564  equired expected
+00008600: 2070 6f73 6974 696f 6e20 7768 656e 2061   position when a
+00008610: 7070 656e 6469 6e67 2074 6865 2066 6972  ppending the fir
+00008620: 7374 2065 7665 6e74 0a6f 6620 6120 6e65  st event.of a ne
+00008630: 7720 7374 7265 616d 2028 7365 6520 6162  w stream (see ab
+00008640: 6f76 6529 2e0a 0a60 6060 7079 7468 6f6e  ove)...```python
+00008650: 0a73 7472 6561 6d5f 706f 7369 7469 6f6e  .stream_position
+00008660: 203d 2063 6c69 656e 742e 6765 745f 7374   = client.get_st
+00008670: 7265 616d 5f70 6f73 6974 696f 6e28 0a20  ream_position(. 
+00008680: 2020 2073 7472 6561 6d5f 6e61 6d65 3d73     stream_name=s
+00008690: 7472 2875 7569 6434 2829 290a 290a 0a61  tr(uuid4()).)..a
+000086a0: 7373 6572 7420 7374 7265 616d 5f70 6f73  ssert stream_pos
+000086b0: 6974 696f 6e20 3d3d 204e 6f6e 650a 6060  ition == None.``
+000086c0: 600a 0a54 6869 7320 6d65 7468 6f64 2074  `..This method t
+000086d0: 616b 6573 2061 6e20 6f70 7469 6f6e 616c  akes an optional
+000086e0: 2061 7267 756d 656e 7420 6074 696d 656f   argument `timeo
+000086f0: 7574 6020 7768 6963 6820 6973 2061 2050  ut` which is a P
+00008700: 7974 686f 6e20 6066 6c6f 6174 6020 7468  ython `float` th
+00008710: 6174 2073 6574 730a 6120 6465 6164 6c69  at sets.a deadli
+00008720: 6e65 2066 6f72 2074 6865 2063 6f6d 706c  ne for the compl
+00008730: 6574 696f 6e20 6f66 2074 6865 2067 5250  etion of the gRP
+00008740: 4320 6f70 6572 6174 696f 6e2e 0a0a 0a23  C operation....#
+00008750: 2323 2047 6574 2063 7572 7265 6e74 2063  ## Get current c
+00008760: 6f6d 6d69 7420 706f 7369 7469 6f6e 0a0a  ommit position..
+00008770: 5468 6520 6d65 7468 6f64 2060 6765 745f  The method `get_
+00008780: 636f 6d6d 6974 5f70 6f73 6974 696f 6e28  commit_position(
+00008790: 2960 2063 616e 2062 6520 7573 6564 2074  )` can be used t
+000087a0: 6f20 6765 7420 7468 6520 6375 7272 656e  o get the curren
+000087b0: 740a 636f 6d6d 6974 2070 6f73 6974 696f  t.commit positio
+000087c0: 6e20 6f66 2074 6865 2064 6174 6162 6173  n of the databas
+000087d0: 652e 0a0a 6060 6070 7974 686f 6e0a 636f  e...```python.co
+000087e0: 6d6d 6974 5f70 6f73 6974 696f 6e20 3d20  mmit_position = 
+000087f0: 636c 6965 6e74 2e67 6574 5f63 6f6d 6d69  client.get_commi
+00008800: 745f 706f 7369 7469 6f6e 2829 0a60 6060  t_position().```
+00008810: 0a0a 5468 6973 206d 6574 686f 6420 7461  ..This method ta
+00008820: 6b65 7320 616e 206f 7074 696f 6e61 6c20  kes an optional 
+00008830: 6172 6775 6d65 6e74 2060 7469 6d65 6f75  argument `timeou
+00008840: 7460 2077 6869 6368 2069 7320 6120 5079  t` which is a Py
+00008850: 7468 6f6e 2060 666c 6f61 7460 2074 6861  thon `float` tha
+00008860: 7420 7365 7473 0a61 2064 6561 646c 696e  t sets.a deadlin
+00008870: 6520 666f 7220 7468 6520 636f 6d70 6c65  e for the comple
+00008880: 7469 6f6e 206f 6620 7468 6520 6752 5043  tion of the gRPC
+00008890: 206f 7065 7261 7469 6f6e 2e0a 0a54 6869   operation...Thi
+000088a0: 7320 6d65 7468 6f64 2063 616e 2062 6520  s method can be 
+000088b0: 7573 6566 756c 2074 6f20 6d65 6173 7572  useful to measur
+000088c0: 6520 7072 6f67 7265 7373 206f 6620 6120  e progress of a 
+000088d0: 646f 776e 7374 7265 616d 2063 6f6d 706f  downstream compo
+000088e0: 6e65 6e74 0a74 6861 7420 6973 2070 726f  nent.that is pro
+000088f0: 6365 7373 696e 6720 616c 6c20 7265 636f  cessing all reco
+00008900: 7264 6564 2065 7665 6e74 732c 2062 7920  rded events, by 
+00008910: 636f 6d70 6172 696e 6720 7468 6520 6375  comparing the cu
+00008920: 7272 656e 7420 636f 6d6d 6974 0a70 6f73  rrent commit.pos
+00008930: 6974 696f 6e20 7769 7468 2074 6865 2072  ition with the r
+00008940: 6563 6f72 6465 6420 636f 6d6d 6974 2070  ecorded commit p
+00008950: 6f73 6974 696f 6e20 6f66 2074 6865 206c  osition of the l
+00008960: 6173 7420 7375 6363 6573 7366 756c 6c79  ast successfully
+00008970: 2070 726f 6365 7373 6564 0a65 7665 6e74   processed.event
+00008980: 2069 6e20 6120 646f 776e 7374 7265 616d   in a downstream
+00008990: 2063 6f6d 706f 6e65 6e74 2e0a 0a54 6865   component...The
+000089a0: 2076 616c 7565 206f 6620 7468 6520 6063   value of the `c
+000089b0: 6f6d 6d69 745f 706f 7369 7469 6f6e 6020  ommit_position` 
+000089c0: 6172 6775 6d65 6e74 2077 6865 6e20 7265  argument when re
+000089d0: 6164 696e 6720 6576 656e 7473 2065 6974  ading events eit
+000089e0: 6865 7220 6279 2075 7369 6e67 0a74 6865  her by using.the
+000089f0: 2060 7265 6164 5f61 6c6c 5f65 7665 6e74   `read_all_event
+00008a00: 7328 2960 206d 6574 686f 6420 6f72 2062  s()` method or b
+00008a10: 7920 7573 696e 6720 6120 6361 7463 682d  y using a catch-
+00008a20: 7570 2073 7562 7363 7269 7074 696f 6e20  up subscription 
+00008a30: 776f 756c 6420 7573 7561 6c6c 790a 6265  would usually.be
+00008a40: 2064 6574 6572 6d69 6e65 6420 6279 2074   determined by t
+00008a50: 6865 2072 6563 6f72 6465 6420 636f 6d6d  he recorded comm
+00008a60: 6974 2070 6f73 6974 696f 6e20 6f66 2074  it position of t
+00008a70: 6865 206c 6173 7420 7375 6363 6573 7366  he last successf
+00008a80: 756c 6c79 2070 726f 6365 7373 6564 0a65  ully processed.e
+00008a90: 7665 6e74 2069 6e20 6120 646f 776e 7374  vent in a downst
+00008aa0: 7265 616d 2063 6f6d 706f 6e65 6e74 2e0a  ream component..
+00008ab0: 0a0a 2323 2320 4765 7420 7374 7265 616d  ..### Get stream
+00008ac0: 206d 6574 6164 6174 610a 0a54 6865 206d   metadata..The m
+00008ad0: 6574 686f 6420 6067 6574 5f73 7472 6561  ethod `get_strea
+00008ae0: 6d5f 6d65 7461 6461 7461 2829 6020 6765  m_metadata()` ge
+00008af0: 7473 2074 6865 206d 6574 6164 6174 6120  ts the metadata 
+00008b00: 666f 7220 6120 7374 7265 616d 2c20 616c  for a stream, al
+00008b10: 6f6e 670a 7769 7468 2074 6865 2076 6572  ong.with the ver
+00008b20: 7369 6f6e 206f 6620 7468 6520 7374 7265  sion of the stre
+00008b30: 616d 206d 6574 6164 6174 612e 0a0a 6060  am metadata...``
+00008b40: 6070 7974 686f 6e0a 6d65 7461 6461 7461  `python.metadata
+00008b50: 2c20 6d65 7461 6461 7461 5f76 6572 7369  , metadata_versi
+00008b60: 6f6e 203d 2063 6c69 656e 742e 6765 745f  on = client.get_
+00008b70: 7374 7265 616d 5f6d 6574 6164 6174 6128  stream_metadata(
+00008b80: 7374 7265 616d 5f6e 616d 653d 7374 7265  stream_name=stre
+00008b90: 616d 5f6e 616d 6531 290a 6060 600a 0a54  am_name1).```..T
+00008ba0: 6865 2072 6574 7572 6e65 6420 606d 6574  he returned `met
+00008bb0: 6164 6174 6160 2076 616c 7565 2069 7320  adata` value is 
+00008bc0: 6120 5079 7468 6f6e 2060 6469 6374 602e  a Python `dict`.
+00008bd0: 2054 6865 2072 6574 7572 6e65 6420 606d   The returned `m
+00008be0: 6574 6164 6174 615f 7665 7273 696f 6e60  etadata_version`
+00008bf0: 0a76 616c 7565 2069 7320 6569 7468 6572  .value is either
+00008c00: 2061 6e20 6069 6e74 602c 206f 7220 604e   an `int`, or `N
+00008c10: 6f6e 6560 2069 6620 7468 6520 7374 7265  one` if the stre
+00008c20: 616d 2064 6f65 7320 6e6f 7420 6578 6973  am does not exis
+00008c30: 742e 2054 6865 7365 2076 616c 7565 7320  t. These values 
+00008c40: 6361 6e0a 6265 2070 6173 7365 6420 696e  can.be passed in
+00008c50: 746f 2060 7365 745f 7374 7265 616d 5f6d  to `set_stream_m
+00008c60: 6574 6164 6174 6128 2960 2e0a 0a0a 2323  etadata()`....##
+00008c70: 2320 5365 7420 7374 7265 616d 206d 6574  # Set stream met
+00008c80: 6164 6174 610a 0a2a 7265 7175 6972 6573  adata..*requires
+00008c90: 206c 6561 6465 722a 0a0a 5468 6520 6d65   leader*..The me
+00008ca0: 7468 6f64 2060 7365 745f 7374 7265 616d  thod `set_stream
+00008cb0: 5f6d 6574 6164 6174 6128 2960 2073 6574  _metadata()` set
+00008cc0: 7320 7468 6520 6d65 7461 6461 7461 2066  s the metadata f
+00008cd0: 6f72 2061 2073 7472 6561 6d2c 2061 6c6f  or a stream, alo
+00008ce0: 6e67 0a77 6974 6820 7468 6520 7665 7273  ng.with the vers
+00008cf0: 696f 6e20 6f66 2074 6865 2073 7472 6561  ion of the strea
+00008d00: 6d20 6d65 7461 6461 7461 2e0a 0a60 6060  m metadata...```
+00008d10: 7079 7468 6f6e 0a6d 6574 6164 6174 615b  python.metadata[
+00008d20: 2266 6f6f 225d 203d 2022 6261 7222 0a0a  "foo"] = "bar"..
+00008d30: 636c 6965 6e74 2e73 6574 5f73 7472 6561  client.set_strea
+00008d40: 6d5f 6d65 7461 6461 7461 280a 2020 2020  m_metadata(.    
+00008d50: 7374 7265 616d 5f6e 616d 653d 7374 7265  stream_name=stre
+00008d60: 616d 5f6e 616d 6531 2c0a 2020 2020 6d65  am_name1,.    me
+00008d70: 7461 6461 7461 3d6d 6574 6164 6174 612c  tadata=metadata,
+00008d80: 0a20 2020 2065 7870 6563 7465 645f 706f  .    expected_po
+00008d90: 7369 7469 6f6e 3d6d 6574 6164 6174 615f  sition=metadata_
+00008da0: 7665 7273 696f 6e2c 0a29 0a60 6060 0a0a  version,.).```..
+00008db0: 5468 6520 6065 7870 6563 7465 645f 706f  The `expected_po
+00008dc0: 7369 7469 6f6e 6020 6172 6775 6d65 6e74  sition` argument
+00008dd0: 2073 686f 756c 6420 6265 2074 6865 2063   should be the c
+00008de0: 7572 7265 6e74 2076 6572 7369 6f6e 206f  urrent version o
+00008df0: 6620 7468 6520 7374 7265 616d 206d 6574  f the stream met
+00008e00: 6164 6174 612e 0a0a 506c 6561 7365 2072  adata...Please r
+00008e10: 6566 6572 2074 6f20 7468 6520 4576 656e  efer to the Even
+00008e20: 7453 746f 7265 4442 2064 6f63 756d 656e  tStoreDB documen
+00008e30: 7461 7469 6f6e 2066 6f72 206d 6f72 6520  tation for more 
+00008e40: 696e 666f 726d 6174 696f 6e20 6162 6f75  information abou
+00008e50: 7420 7374 7265 616d 0a6d 6574 6164 6174  t stream.metadat
+00008e60: 612e 0a0a 2323 2320 4465 6c65 7465 2073  a...### Delete s
+00008e70: 7472 6561 6d0a 0a2a 7265 7175 6972 6573  tream..*requires
+00008e80: 206c 6561 6465 722a 0a0a 5468 6520 6d65   leader*..The me
+00008e90: 7468 6f64 2060 6465 6c65 7465 5f73 7472  thod `delete_str
+00008ea0: 6561 6d28 2960 2063 616e 2062 6520 7573  eam()` can be us
+00008eb0: 6564 2074 6f20 2264 656c 6574 6522 2061  ed to "delete" a
+00008ec0: 2073 7472 6561 6d2e 0a0a 6060 6070 7974   stream...```pyt
+00008ed0: 686f 6e0a 636f 6d6d 6974 5f70 6f73 6974  hon.commit_posit
+00008ee0: 696f 6e20 3d20 636c 6965 6e74 2e64 656c  ion = client.del
+00008ef0: 6574 655f 7374 7265 616d 2873 7472 6561  ete_stream(strea
+00008f00: 6d5f 6e61 6d65 3d73 7472 6561 6d5f 6e61  m_name=stream_na
+00008f10: 6d65 312c 2065 7870 6563 7465 645f 706f  me1, expected_po
+00008f20: 7369 7469 6f6e 3d32 290a 6060 600a 0a41  sition=2).```..A
+00008f30: 6674 6572 2064 656c 6574 696e 6720 6120  fter deleting a 
+00008f40: 7374 7265 616d 2c20 6974 2773 2073 7469  stream, it's sti
+00008f50: 6c6c 2070 6f73 7369 626c 6520 746f 2061  ll possible to a
+00008f60: 7070 656e 6420 6e65 7720 6576 656e 7473  ppend new events
+00008f70: 2e20 5265 6164 696e 6720 6672 6f6d 2061  . Reading from a
+00008f80: 0a64 656c 6574 6564 2073 7472 6561 6d20  .deleted stream 
+00008f90: 7769 6c6c 2072 6574 7572 6e20 6f6e 6c79  will return only
+00008fa0: 2065 7665 6e74 7320 7468 6174 2068 6176   events that hav
+00008fb0: 6520 6265 656e 2061 7070 656e 6465 6420  e been appended 
+00008fc0: 6166 7465 7220 6974 2077 6173 0a64 656c  after it was.del
+00008fd0: 6574 6564 2e0a 0a23 2323 2054 6f6d 6273  eted...### Tombs
+00008fe0: 746f 6e65 2073 7472 6561 6d0a 0a2a 7265  tone stream..*re
+00008ff0: 7175 6972 6573 206c 6561 6465 722a 0a0a  quires leader*..
+00009000: 5468 6520 6d65 7468 6f64 2060 746f 6d62  The method `tomb
+00009010: 7374 6f6e 655f 7374 7265 616d 2829 6020  stone_stream()` 
+00009020: 6361 6e20 6265 2075 7365 6420 746f 2022  can be used to "
+00009030: 746f 6d62 7374 6f6e 6522 2061 2073 7472  tombstone" a str
+00009040: 6561 6d2e 0a0a 6060 6070 7974 686f 6e0a  eam...```python.
+00009050: 636f 6d6d 6974 5f70 6f73 6974 696f 6e20  commit_position 
+00009060: 3d20 636c 6965 6e74 2e74 6f6d 6273 746f  = client.tombsto
+00009070: 6e65 5f73 7472 6561 6d28 7374 7265 616d  ne_stream(stream
+00009080: 5f6e 616d 653d 7374 7265 616d 5f6e 616d  _name=stream_nam
+00009090: 6531 2c20 6578 7065 6374 6564 5f70 6f73  e1, expected_pos
+000090a0: 6974 696f 6e3d 3229 0a60 6060 0a0a 4166  ition=2).```..Af
+000090b0: 7465 7220 746f 6d62 7374 6f6e 696e 6720  ter tombstoning 
+000090c0: 6120 7374 7265 616d 2c20 6974 2773 206e  a stream, it's n
+000090d0: 6f74 2070 6f73 7369 626c 6520 746f 2061  ot possible to a
+000090e0: 7070 656e 6420 6e65 7720 6576 656e 7473  ppend new events
+000090f0: 2e0a 0a0a 2323 2043 6174 6368 2d75 7020  ....## Catch-up 
+00009100: 7375 6273 6372 6970 7469 6f6e 730a 0a22  subscriptions.."
+00009110: 4361 7463 682d 7570 2220 7375 6273 6372  Catch-up" subscr
+00009120: 6970 7469 6f6e 7320 6361 6e20 6265 2075  iptions can be u
+00009130: 7365 6420 746f 2072 6563 6569 7665 2065  sed to receive e
+00009140: 7665 6e74 7320 7468 6174 2068 6176 6520  vents that have 
+00009150: 6265 656e 2072 6563 6f72 6465 640a 696e  been recorded.in
+00009160: 2074 6865 2064 6174 6162 6173 652c 2061   the database, a
+00009170: 6e64 2061 6c73 6f20 6576 656e 7473 2074  nd also events t
+00009180: 6861 7420 6172 6520 7265 636f 7264 6564  hat are recorded
+00009190: 2061 6674 6572 2061 2073 7562 7363 7269   after a subscri
+000091a0: 7074 696f 6e20 7761 7320 7374 6172 7465  ption was starte
+000091b0: 642e 0a0a 5468 6520 6d65 7468 6f64 2060  d...The method `
+000091c0: 7375 6273 6372 6962 655f 616c 6c5f 6576  subscribe_all_ev
+000091d0: 656e 7473 2829 6020 7374 6172 7473 2061  ents()` starts a
+000091e0: 2063 6174 6368 2d75 7020 7375 6273 6372   catch-up subscr
+000091f0: 6970 7469 6f6e 2074 6f20 7265 6365 6976  iption to receiv
+00009200: 6520 616c 6c0a 6576 656e 7473 2074 6861  e all.events tha
+00009210: 7420 6861 7665 2062 6565 6e20 616e 6420  t have been and 
+00009220: 7769 6c6c 2062 6520 7265 636f 7264 6564  will be recorded
+00009230: 2069 6e20 7468 6520 6461 7461 6261 7365   in the database
+00009240: 2e20 5468 6520 6d65 7468 6f64 0a60 7375  . The method.`su
+00009250: 6273 6372 6962 655f 7374 7265 616d 5f65  bscribe_stream_e
+00009260: 7665 6e74 7328 2960 2073 7461 7274 7320  vents()` starts 
+00009270: 6120 6361 7463 682d 7570 2073 7562 7363  a catch-up subsc
+00009280: 7269 7074 696f 6e20 746f 2072 6563 6569  ription to recei
+00009290: 7665 2065 7665 6e74 7320 6672 6f6d 0a61  ve events from.a
+000092a0: 2073 7065 6369 6669 6320 7374 7265 616d   specific stream
+000092b0: 2e0a 0a43 6174 6368 2d75 7020 7375 6273  ...Catch-up subs
+000092c0: 6372 6970 7469 6f6e 7320 656e 6361 7073  criptions encaps
+000092d0: 756c 6174 6520 6120 7374 7265 616d 696e  ulate a streamin
+000092e0: 6720 6752 5043 2063 616c 6c20 7768 6963  g gRPC call whic
+000092f0: 6820 6973 0a6b 6570 7420 6f70 656e 2062  h is.kept open b
+00009300: 7920 7468 6520 7365 7276 6572 2c20 7769  y the server, wi
+00009310: 7468 206e 6577 6c79 2072 6563 6f72 6465  th newly recorde
+00009320: 6420 6576 656e 7473 2073 656e 7420 746f  d events sent to
+00009330: 2074 6865 2063 6c69 656e 740a 6173 2074   the client.as t
+00009340: 6865 2063 6c69 656e 7420 6974 6572 6174  he client iterat
+00009350: 6573 206f 7665 7220 7468 6520 7375 6273  es over the subs
+00009360: 6372 6970 7469 6f6e 2072 6573 706f 6e73  cription respons
+00009370: 652e 0a0a 4d61 6e79 2063 6174 6368 2d75  e...Many catch-u
+00009380: 7020 7375 6273 6372 6970 7469 6f6e 7320  p subscriptions 
+00009390: 6361 6e20 6265 2063 7265 6174 6564 2c20  can be created, 
+000093a0: 636f 6e63 7572 7265 6e74 6c79 206f 7220  concurrently or 
+000093b0: 7375 6363 6573 7369 7665 6c79 2c20 616e  successively, an
+000093c0: 6420 616c 6c0a 7769 6c6c 2072 6563 6569  d all.will recei
+000093d0: 7665 2061 6c6c 2074 6865 2072 6563 6f72  ve all the recor
+000093e0: 6465 6420 6576 656e 7473 2074 6865 7920  ded events they 
+000093f0: 6861 7665 2062 6565 6e20 7265 7175 6573  have been reques
+00009400: 7465 6420 746f 2072 6563 6569 7665 2e0a  ted to receive..
+00009410: 0a54 6865 2072 6563 6569 7665 6420 7265  .The received re
+00009420: 636f 7264 6564 2065 7665 6e74 206f 626a  corded event obj
+00009430: 6563 7420 6172 6520 696e 7374 616e 6365  ect are instance
+00009440: 7320 6f66 2074 6865 2060 5265 636f 7264  s of the `Record
+00009450: 6564 4576 656e 7460 2063 6c61 7373 0a28  edEvent` class.(
+00009460: 7365 6520 6265 6c6f 7729 2e0a 0a23 2323  see below)...###
+00009470: 2048 6f77 2074 6f20 696d 706c 656d 656e   How to implemen
+00009480: 7420 6578 6163 746c 792d 6f6e 6365 2065  t exactly-once e
+00009490: 7665 6e74 2070 726f 6365 7373 696e 670a  vent processing.
+000094a0: 0a54 6865 2063 6f6d 6d69 7420 706f 7369  .The commit posi
+000094b0: 7469 6f6e 7320 6f66 2072 6563 6f72 6465  tions of recorde
+000094c0: 6420 6576 656e 7473 2074 6861 7420 6172  d events that ar
+000094d0: 6520 7265 6365 6976 6564 2061 6e64 2070  e received and p
+000094e0: 726f 6365 7373 6564 2062 7920 610a 646f  rocessed by a.do
+000094f0: 776e 7374 7265 616d 2063 6f6d 706f 6e65  wnstream compone
+00009500: 6e74 2061 7265 2075 7365 6675 6c6c 7920  nt are usefully 
+00009510: 7265 636f 7264 6564 2062 7920 7468 6520  recorded by the 
+00009520: 646f 776e 7374 7265 616d 2063 6f6d 706f  downstream compo
+00009530: 6e65 6e74 2073 6f20 7468 6174 0a74 6865  nent so that.the
+00009540: 2063 6f6d 6d69 7420 706f 7369 7469 6f6e   commit position
+00009550: 206f 6620 6c61 7374 2070 726f 6365 7373   of last process
+00009560: 6564 2065 7665 6e74 2063 616e 2062 6520  ed event can be 
+00009570: 6465 7465 726d 696e 6564 2e0a 0a54 6865  determined...The
+00009580: 206c 6173 7420 7265 636f 7264 6564 2063   last recorded c
+00009590: 6f6d 6d69 7420 706f 7369 7469 6f6e 2063  ommit position c
+000095a0: 616e 2062 6520 7573 6564 2074 6f20 7370  an be used to sp
+000095b0: 6563 6966 7920 7468 6520 636f 6d6d 6974  ecify the commit
+000095c0: 2070 6f73 6974 696f 6e20 6672 6f6d 2077   position from w
+000095d0: 6869 6368 0a74 6f20 7375 6273 6372 6962  hich.to subscrib
+000095e0: 6520 7768 656e 2070 726f 6365 7373 696e  e when processin
+000095f0: 6720 6973 2072 6573 756d 6564 2e20 5369  g is resumed. Si
+00009600: 6e63 6520 7468 6973 2063 6f6d 6d69 7420  nce this commit 
+00009610: 706f 7369 7469 6f6e 2077 696c 6c20 7265  position will re
+00009620: 7072 6573 656e 7420 7468 650a 706f 7369  present the.posi
+00009630: 7469 6f6e 206f 6620 7468 6520 6c61 7374  tion of the last
+00009640: 2073 7563 6365 7373 6675 6c6c 7920 7072   successfully pr
+00009650: 6f63 6573 7365 6420 6576 656e 7420 696e  ocessed event in
+00009660: 2061 2064 6f77 6e73 7472 6561 6d20 636f   a downstream co
+00009670: 6d70 6f6e 656e 742c 2073 6f20 6974 0a77  mponent, so it.w
+00009680: 696c 6c20 6265 2075 7375 616c 2074 6f20  ill be usual to 
+00009690: 7761 6e74 2074 6865 206e 6578 7420 6576  want the next ev
+000096a0: 656e 7420 6166 7465 7220 7468 6973 2070  ent after this p
+000096b0: 6f73 6974 696f 6e2c 2062 6563 6175 7365  osition, because
+000096c0: 2074 6861 7420 6973 2074 6865 206e 6578   that is the nex
+000096d0: 740a 6576 656e 7420 7468 6174 2068 6173  t.event that has
+000096e0: 206e 6f74 2079 6574 2062 6565 6e20 7072   not yet been pr
+000096f0: 6f63 6573 7365 642e 2046 6f72 2074 6869  ocessed. For thi
+00009700: 7320 7265 6173 6f6e 2c20 7768 656e 2073  s reason, when s
+00009710: 7562 7363 7269 6269 6e67 2066 6f72 2065  ubscribing for e
+00009720: 7665 6e74 730a 6672 6f6d 2061 2073 7065  vents.from a spe
+00009730: 6369 6669 6320 636f 6d6d 6974 2070 6f73  cific commit pos
+00009740: 6974 696f 6e20 7573 696e 6720 6120 6361  ition using a ca
+00009750: 7463 682d 7570 2073 7562 7363 7269 7074  tch-up subscript
+00009760: 696f 6e20 696e 2045 7665 6e74 5374 6f72  ion in EventStor
+00009770: 6544 422c 2074 6865 0a72 6563 6f72 6465  eDB, the.recorde
+00009780: 6420 6576 656e 7420 6174 2074 6865 2073  d event at the s
+00009790: 7065 6369 6669 6564 2063 6f6d 6d69 7420  pecified commit 
+000097a0: 706f 7369 7469 6f6e 2077 696c 6c20 4e4f  position will NO
+000097b0: 5420 6265 2069 6e63 6c75 6465 6420 696e  T be included in
+000097c0: 2074 6865 2073 6571 7565 6e63 650a 6f66   the sequence.of
+000097d0: 2072 6563 6f72 6465 6420 6576 656e 7473   recorded events
+000097e0: 2074 6861 7420 6172 6520 7265 6365 6976   that are receiv
+000097f0: 6564 2e0a 0a54 6f20 6163 636f 6d70 6c69  ed...To accompli
+00009800: 7368 2022 6578 6163 746c 792d 6f6e 6365  sh "exactly-once
+00009810: 2220 7072 6f63 6573 7369 6e67 206f 6620  " processing of 
+00009820: 7265 636f 7264 6564 2065 7665 6e74 7320  recorded events 
+00009830: 696e 2061 2064 6f77 6e73 7472 6561 6d0a  in a downstream.
+00009840: 636f 6d70 6f6e 656e 7420 7768 656e 2075  component when u
+00009850: 7369 6e67 2061 2063 6174 6368 2d75 7020  sing a catch-up 
+00009860: 7375 6273 6372 6970 7469 6f6e 2c20 7468  subscription, th
+00009870: 6520 636f 6d6d 6974 2070 6f73 6974 696f  e commit positio
+00009880: 6e20 6f66 2061 2072 6563 6f72 6465 640a  n of a recorded.
+00009890: 6576 656e 7420 7368 6f75 6c64 2062 6520  event should be 
+000098a0: 7265 636f 7264 6564 2061 746f 6d69 6361  recorded atomica
+000098b0: 6c6c 7920 616e 6420 756e 6971 7565 6c79  lly and uniquely
+000098c0: 2061 6c6f 6e67 2077 6974 6820 7468 6520   along with the 
+000098d0: 7265 7375 6c74 206f 6620 7072 6f63 6573  result of proces
+000098e0: 7369 6e67 0a72 6563 6f72 6465 6420 6576  sing.recorded ev
+000098f0: 656e 7473 2c20 666f 7220 6578 616d 706c  ents, for exampl
+00009900: 6520 696e 2074 6865 2073 616d 6520 6461  e in the same da
+00009910: 7461 6261 7365 2061 7320 6d61 7465 7269  tabase as materi
+00009920: 616c 6973 6564 2076 6965 7773 2077 6865  alised views whe
+00009930: 6e0a 696d 706c 656d 656e 7469 6e67 2065  n.implementing e
+00009940: 7665 6e74 7561 6c6c 792d 636f 6e73 6973  ventually-consis
+00009950: 7465 6e74 2043 5152 532c 206f 7220 696e  tent CQRS, or in
+00009960: 2074 6865 2073 616d 6520 6461 7461 6261   the same databa
+00009970: 7365 2061 7320 6120 646f 776e 7374 7265  se as a downstre
+00009980: 616d 0a61 6e61 6c79 7469 6373 206f 7220  am.analytics or 
+00009990: 7265 706f 7274 696e 6720 6f72 2061 7263  reporting or arc
+000099a0: 6869 7669 6e67 2061 7070 6c69 6361 7469  hiving applicati
+000099b0: 6f6e 2e20 4279 2072 6563 6f72 6469 6e67  on. By recording
+000099c0: 2074 6865 2063 6f6d 6d69 7420 706f 7369   the commit posi
+000099d0: 7469 6f6e 0a6f 6620 7265 636f 7264 6564  tion.of recorded
+000099e0: 2065 7665 6e74 7320 6174 6f6d 6963 616c   events atomical
+000099f0: 6c79 2077 6974 6820 7468 6520 6e65 7720  ly with the new 
+00009a00: 7374 6174 6520 7468 6174 2072 6573 756c  state that resul
+00009a10: 7473 2066 726f 6d20 7072 6f63 6573 7369  ts from processi
+00009a20: 6e67 0a72 6563 6f72 6465 6420 6576 656e  ng.recorded even
+00009a30: 7473 2c20 2264 7561 6c20 7772 6974 696e  ts, "dual writin
+00009a40: 6722 2069 6e20 7468 6520 636f 6e73 756d  g" in the consum
+00009a50: 7074 696f 6e20 6f66 2072 6563 6f72 6465  ption of recorde
+00009a60: 6420 6576 656e 7473 2063 616e 2062 650a  d events can be.
+00009a70: 6176 6f69 6465 642e 2042 7920 616c 736f  avoided. By also
+00009a80: 2072 6563 6f72 6469 6e67 2074 6865 2063   recording the c
+00009a90: 6f6d 6d69 7420 706f 7369 7469 6f6e 2075  ommit position u
+00009aa0: 6e69 7175 656c 792c 2074 6865 206e 6577  niquely, the new
+00009ab0: 2073 7461 7465 2063 616e 6e6f 7420 6265   state cannot be
+00009ac0: 0a72 6563 6f72 6465 6420 7477 6963 652c  .recorded twice,
+00009ad0: 2061 6e64 2068 656e 6365 2074 6865 2072   and hence the r
+00009ae0: 6563 6f72 6465 6420 7374 6174 6520 6f66  ecorded state of
+00009af0: 2074 6865 2064 6f77 6e73 7472 6561 6d20   the downstream 
+00009b00: 636f 6d70 6f6e 656e 7420 7769 6c6c 2062  component will b
+00009b10: 650a 7570 6461 7465 6420 6f6e 6c79 206f  e.updated only o
+00009b20: 6e63 6520 666f 7220 616e 7920 7265 636f  nce for any reco
+00009b30: 7264 6564 2065 7665 6e74 2e20 4279 2075  rded event. By u
+00009b40: 7369 6e67 2074 6865 2067 7265 6174 6573  sing the greates
+00009b50: 7420 7265 636f 7264 6564 2063 6f6d 6d69  t recorded commi
+00009b60: 740a 706f 7369 7469 6f6e 2074 6f20 7265  t.position to re
+00009b70: 7375 6d65 2061 2063 6174 6368 2d75 7020  sume a catch-up 
+00009b80: 7375 6273 6372 6970 7469 6f6e 2c20 616c  subscription, al
+00009b90: 6c20 7265 636f 7264 6564 2065 7665 6e74  l recorded event
+00009ba0: 7320 7769 6c6c 2065 7665 6e74 7561 6c6c  s will eventuall
+00009bb0: 790a 6265 2070 726f 6365 7373 6564 2e20  y.be processed. 
+00009bc0: 5468 6520 636f 6d62 696e 6174 696f 6e20  The combination 
+00009bd0: 6f66 2074 6865 2022 6174 2d6d 6f73 742d  of the "at-most-
+00009be0: 6f6e 6365 2220 636f 6e64 6974 696f 6e20  once" condition 
+00009bf0: 616e 6420 7468 6520 2261 742d 6c65 6173  and the "at-leas
+00009c00: 742d 6f6e 6365 220a 636f 6e64 6974 696f  t-once".conditio
+00009c10: 6e20 6769 7665 7320 7468 6520 2265 7861  n gives the "exa
+00009c20: 6374 6c79 2d6f 6e63 6522 2063 6f6e 6469  ctly-once" condi
+00009c30: 7469 6f6e 2e0a 0a54 6865 2064 616e 6765  tion...The dange
+00009c40: 7220 7769 7468 2022 6475 616c 2077 7269  r with "dual wri
+00009c50: 7469 6e67 2220 696e 2074 6865 2063 6f6e  ting" in the con
+00009c60: 7375 6d70 7469 6f6e 206f 6620 7265 636f  sumption of reco
+00009c70: 7264 6564 2065 7665 6e74 7320 6973 2074  rded events is t
+00009c80: 6861 7420 6966 2061 0a72 6563 6f72 6465  hat if a.recorde
+00009c90: 6420 6576 656e 7420 6973 2073 7563 6365  d event is succe
+00009ca0: 7373 6675 6c6c 7920 7072 6f63 6573 7365  ssfully processe
+00009cb0: 6420 616e 6420 6e65 7720 7374 6174 6520  d and new state 
+00009cc0: 7265 636f 7264 6564 2061 746f 6d69 6361  recorded atomica
+00009cd0: 6c6c 7920 696e 206f 6e65 0a74 7261 6e73  lly in one.trans
+00009ce0: 6163 7469 6f6e 2077 6974 6820 7468 6520  action with the 
+00009cf0: 636f 6d6d 6974 2070 6f73 6974 696f 6e20  commit position 
+00009d00: 7265 636f 7264 6564 2069 6e20 6120 7365  recorded in a se
+00009d10: 7061 7261 7465 2074 7261 6e73 6163 7469  parate transacti
+00009d20: 6f6e 2c20 6f6e 6520 6d61 790a 6861 7070  on, one may.happ
+00009d30: 656e 2061 6e64 206e 6f74 2074 6865 206f  en and not the o
+00009d40: 7468 6572 2e20 4966 2074 6865 206e 6577  ther. If the new
+00009d50: 2073 7461 7465 2069 7320 7265 636f 7264   state is record
+00009d60: 6564 2062 7574 2074 6865 2070 6f73 6974  ed but the posit
+00009d70: 696f 6e20 6973 206c 6f73 742c 0a61 6e64  ion is lost,.and
+00009d80: 2074 6865 6e20 7468 6520 7072 6f63 6573   then the proces
+00009d90: 7369 6e67 2069 7320 7374 6f70 7065 6420  sing is stopped 
+00009da0: 616e 6420 7265 7375 6d65 642c 2074 6865  and resumed, the
+00009db0: 2072 6563 6f72 6465 6420 6576 656e 7420   recorded event 
+00009dc0: 6d61 7920 6265 2070 726f 6365 7373 6564  may be processed
+00009dd0: 0a74 7769 6365 2e20 4f6e 2074 6865 206f  .twice. On the o
+00009de0: 7468 6572 2068 616e 642c 2069 6620 7468  ther hand, if th
+00009df0: 6520 636f 6d6d 6974 2070 6f73 6974 696f  e commit positio
+00009e00: 6e20 6973 2072 6563 6f72 6465 6420 6275  n is recorded bu
+00009e10: 7420 7468 6520 6e65 7720 7374 6174 6520  t the new state 
+00009e20: 6973 0a6c 6f73 742c 2074 6865 2072 6563  is.lost, the rec
+00009e30: 6f72 6465 6420 6576 656e 7420 6d61 7920  orded event may 
+00009e40: 6566 6665 6374 6976 656c 7920 6e6f 7420  effectively not 
+00009e50: 6265 2070 726f 6365 7373 6564 2061 7420  be processed at 
+00009e60: 616c 6c2e 2042 7920 6569 7468 6572 0a70  all. By either.p
+00009e70: 726f 6365 7373 696e 6720 616e 2065 7665  rocessing an eve
+00009e80: 6e74 206d 6f72 6520 7468 616e 206f 6e63  nt more than onc
+00009e90: 652c 206f 7220 6279 2066 6169 6c69 6e67  e, or by failing
+00009ea0: 2074 6f20 7072 6f63 6573 7320 616e 2065   to process an e
+00009eb0: 7665 6e74 2c20 7468 6520 7265 636f 7264  vent, the record
+00009ec0: 6564 0a73 7461 7465 206f 6620 7468 6520  ed.state of the 
+00009ed0: 646f 776e 7374 7265 616d 2063 6f6d 706f  downstream compo
+00009ee0: 6e65 6e74 206d 6967 6874 2062 6520 696e  nent might be in
+00009ef0: 6163 6375 7261 7465 2c20 6f72 2070 6f73  accurate, or pos
+00009f00: 7369 626c 7920 696e 636f 6e73 6973 7465  sibly inconsiste
+00009f10: 6e74 2c20 616e 640a 7065 7268 6170 7320  nt, and.perhaps 
+00009f20: 6361 7461 7374 726f 7068 6963 616c 6c79  catastrophically
+00009f30: 2073 6f2e 2053 7563 6820 636f 6e73 6571   so. Such conseq
+00009f40: 7565 6e63 6573 206d 6179 206f 7220 6d61  uences may or ma
+00009f50: 7920 6e6f 7420 6d61 7474 6572 2069 6e20  y not matter in 
+00009f60: 796f 7572 2073 6974 7561 7469 6f6e 2e0a  your situation..
+00009f70: 4275 7420 736f 6d65 7469 6d65 7320 696e  But sometimes in
+00009f80: 636f 6e73 6973 7465 6e63 6965 7320 6d61  consistencies ma
+00009f90: 7920 6861 6c74 2070 726f 6365 7373 696e  y halt processin
+00009fa0: 6720 756e 7469 6c20 7468 6520 6973 7375  g until the issu
+00009fb0: 6520 6973 2072 6573 6f6c 7665 642e 2059  e is resolved. Y
+00009fc0: 6f75 2063 616e 0a61 766f 6964 2022 6475  ou can.avoid "du
+00009fd0: 616c 2077 7269 7469 6e67 2220 696e 2074  al writing" in t
+00009fe0: 6865 2063 6f6e 7375 6d70 7469 6f6e 206f  he consumption o
+00009ff0: 6620 6576 656e 7473 2062 7920 6174 6f6d  f events by atom
+0000a000: 6963 616c 6c79 2072 6563 6f72 6469 6e67  ically recording
+0000a010: 2074 6865 2063 6f6d 6d69 740a 706f 7369   the commit.posi
+0000a020: 7469 6f6e 206f 6620 6120 7265 636f 7264  tion of a record
+0000a030: 6564 2065 7665 6e74 2061 6c6f 6e67 2077  ed event along w
+0000a040: 6974 6820 7468 6520 6e65 7720 7374 6174  ith the new stat
+0000a050: 6520 7468 6174 2072 6573 756c 7473 2066  e that results f
+0000a060: 726f 6d20 7072 6f63 6573 7369 6e67 2074  rom processing t
+0000a070: 6861 740a 6576 656e 7420 696e 2074 6865  hat.event in the
+0000a080: 2073 616d 6520 6174 6f6d 6963 2074 7261   same atomic tra
+0000a090: 6e73 6163 7469 6f6e 2e20 4279 206d 616b  nsaction. By mak
+0000a0a0: 696e 6720 7468 6520 7265 636f 7264 696e  ing the recordin
+0000a0b0: 6720 6f66 2074 6865 2063 6f6d 6d69 7420  g of the commit 
+0000a0c0: 706f 7369 7469 6f6e 730a 756e 6971 7565  positions.unique
+0000a0d0: 2c20 736f 2074 6861 7420 7472 616e 7361  , so that transa
+0000a0e0: 6374 696f 6e73 2077 696c 6c20 6265 2072  ctions will be r
+0000a0f0: 6f6c 6c65 6420 6261 636b 2077 6865 6e20  olled back when 
+0000a100: 7468 6572 6520 6973 2061 2063 6f6e 666c  there is a confl
+0000a110: 6963 742c 2079 6f75 2077 696c 6c0a 7072  ict, you will.pr
+0000a120: 6576 656e 7420 7468 6520 7265 7375 6c74  event the result
+0000a130: 7320 6f66 2061 6e79 2064 7570 6c69 6361  s of any duplica
+0000a140: 7465 2070 726f 6365 7373 696e 6720 6f66  te processing of
+0000a150: 2061 2072 6563 6f72 6465 6420 6576 656e   a recorded even
+0000a160: 7420 6265 696e 6720 636f 6d6d 6974 7465  t being committe
+0000a170: 642e 0a0a 5265 636f 7264 6564 2065 7665  d...Recorded eve
+0000a180: 6e74 7320 7265 6365 6976 6564 2066 726f  nts received fro
+0000a190: 6d20 6120 6361 7463 682d 7570 2073 7562  m a catch-up sub
+0000a1a0: 7363 7269 7074 696f 6e20 6361 6e6e 6f74  scription cannot
+0000a1b0: 2062 6520 6163 6b6e 6f77 6c65 6467 6564   be acknowledged
+0000a1c0: 2062 6163 6b0a 746f 2074 6865 2045 7665   back.to the Eve
+0000a1d0: 6e74 5374 6f72 6544 4220 7365 7276 6572  ntStoreDB server
+0000a1e0: 2e20 4163 6b6e 6f77 6c65 6467 696e 6720  . Acknowledging 
+0000a1f0: 6576 656e 7473 2c20 686f 7765 7665 722c  events, however,
+0000a200: 2069 7320 616e 2061 7370 6563 7420 6f66   is an aspect of
+0000a210: 2022 7065 7273 6973 7465 6e74 0a73 7562   "persistent.sub
+0000a220: 7363 7269 7074 696f 6e73 2220 2873 6565  scriptions" (see
+0000a230: 2062 656c 6f77 292e 2048 6f70 696e 6720   below). Hoping 
+0000a240: 746f 2072 656c 7920 6f6e 2061 636b 6e6f  to rely on ackno
+0000a250: 776c 6564 6769 6e67 2065 7665 6e74 7320  wledging events 
+0000a260: 746f 2061 6e20 7570 7374 7265 616d 0a63  to an upstream.c
+0000a270: 6f6d 706f 6e65 6e74 2069 7320 616e 2065  omponent is an e
+0000a280: 7861 6d70 6c65 206f 6620 6475 616c 2077  xample of dual w
+0000a290: 7269 7469 6e67 2e0a 0a23 2323 2053 7562  riting...### Sub
+0000a2a0: 7363 7269 6265 2061 6c6c 2065 7665 6e74  scribe all event
+0000a2b0: 730a 0a54 6865 6073 7562 7363 7269 6265  s..The`subscribe
+0000a2c0: 5f61 6c6c 5f65 7665 6e74 7328 2960 206d  _all_events()` m
+0000a2d0: 6574 686f 6420 6361 6e20 6265 2075 7365  ethod can be use
+0000a2e0: 6420 746f 2073 7461 7274 2061 2022 6361  d to start a "ca
+0000a2f0: 7463 682d 7570 2220 7375 6273 6372 6970  tch-up" subscrip
+0000a300: 7469 6f6e 0a74 6861 7420 6361 6e20 7265  tion.that can re
+0000a310: 7475 726e 2065 7665 6e74 7320 6672 6f6d  turn events from
+0000a320: 2061 6c6c 2073 7472 6561 6d73 2069 6e20   all streams in 
+0000a330: 7468 6520 6461 7461 6261 7365 2e0a 0a54  the database...T
+0000a340: 6869 7320 6d65 7468 6f64 2063 616e 2062  his method can b
+0000a350: 6520 7573 6564 2062 7920 6120 646f 776e  e used by a down
+0000a360: 7374 7265 616d 2063 6f6d 706f 6e65 6e74  stream component
+0000a370: 0a74 6f20 7072 6f63 6573 7320 7265 636f  .to process reco
+0000a380: 7264 6564 2065 7665 6e74 7320 7769 7468  rded events with
+0000a390: 2065 7861 6374 6c79 2d6f 6e63 6520 7365   exactly-once se
+0000a3a0: 6d61 6e74 6963 732e 0a0a 5468 6973 206d  mantics...This m
+0000a3b0: 6574 686f 6420 7461 6b65 7320 616e 206f  ethod takes an o
+0000a3c0: 7074 696f 6e61 6c20 6063 6f6d 6d69 745f  ptional `commit_
+0000a3d0: 706f 7369 7469 6f6e 6020 6172 6775 6d65  position` argume
+0000a3e0: 6e74 2c20 7768 6963 6820 6361 6e20 6265  nt, which can be
+0000a3f0: 0a75 7365 6420 746f 2073 7065 6369 6679  .used to specify
+0000a400: 2061 2063 6f6d 6d69 7420 706f 7369 7469   a commit positi
+0000a410: 6f6e 2066 726f 6d20 7768 6963 6820 746f  on from which to
+0000a420: 2073 7562 7363 7269 6265 2e20 5468 6520   subscribe. The 
+0000a430: 6465 6661 756c 740a 7661 6c75 6520 6973  default.value is
+0000a440: 2060 4e6f 6e65 602c 2077 6869 6368 206d   `None`, which m
+0000a450: 6561 6e73 2074 6865 2073 7562 7363 7269  eans the subscri
+0000a460: 7074 696f 6e20 7769 6c6c 206f 7065 7261  ption will opera
+0000a470: 7465 2066 726f 6d20 7468 6520 6669 7273  te from the firs
+0000a480: 740a 7265 636f 7264 6564 2065 7665 6e74  t.recorded event
+0000a490: 2069 6e20 7468 6520 6461 7461 6261 7365   in the database
+0000a4a0: 2e20 4966 2061 2063 6f6d 6d69 7420 706f  . If a commit po
+0000a4b0: 7369 7469 6f6e 2069 7320 6769 7665 6e2c  sition is given,
+0000a4c0: 2069 7420 6d75 7374 206d 6174 6368 0a61   it must match.a
+0000a4d0: 6e20 6163 7475 616c 6c79 2065 7869 7374  n actually exist
+0000a4e0: 696e 6720 636f 6d6d 6974 2070 6f73 6974  ing commit posit
+0000a4f0: 696f 6e20 696e 2074 6865 2064 6174 6162  ion in the datab
+0000a500: 6173 652e 2054 6865 2072 6563 6f64 6564  ase. The recoded
+0000a510: 2065 7665 6e74 7320 7468 6174 0a61 7265   events that.are
+0000a520: 206f 6274 6169 6e65 6420 7769 6c6c 206e   obtained will n
+0000a530: 6f74 2069 6e63 6c75 6465 2074 6865 2065  ot include the e
+0000a540: 7665 6e74 2072 6563 6f72 6465 6420 6174  vent recorded at
+0000a550: 2074 6861 7420 636f 6d6d 6974 2070 6f73   that commit pos
+0000a560: 6974 696f 6e2e 0a0a 5468 6973 206d 6574  ition...This met
+0000a570: 686f 6420 616c 736f 2074 616b 6573 2066  hod also takes f
+0000a580: 6f75 7220 6f74 6865 7220 6f70 7469 6f6e  our other option
+0000a590: 616c 2061 7267 756d 656e 7473 2c20 6066  al arguments, `f
+0000a5a0: 696c 7465 725f 6578 636c 7564 6560 2c0a  ilter_exclude`,.
+0000a5b0: 6066 696c 7465 725f 696e 636c 7564 6560  `filter_include`
+0000a5c0: 2c20 6066 696c 7465 725f 6279 5f73 7472  , `filter_by_str
+0000a5d0: 6561 6d5f 6e61 6d65 602c 2061 6e64 2060  eam_name`, and `
+0000a5e0: 7469 6d65 6f75 7460 2e0a 0a54 6865 206f  timeout`...The o
+0000a5f0: 7074 696f 6e61 6c20 6172 6775 6d65 6e74  ptional argument
+0000a600: 2060 6669 6c74 6572 5f65 7863 6c75 6465   `filter_exclude
+0000a610: 6020 6973 2061 2073 6571 7565 6e63 6520  ` is a sequence 
+0000a620: 6f66 2072 6567 756c 6172 2065 7870 7265  of regular expre
+0000a630: 7373 696f 6e73 2074 6861 740a 6d61 7463  ssions that.matc
+0000a640: 6820 7265 636f 7264 6564 2065 7665 6e74  h recorded event
+0000a650: 7320 7468 6174 2073 686f 756c 6420 6e6f  s that should no
+0000a660: 7420 6265 2069 6e63 6c75 6465 642e 2054  t be included. T
+0000a670: 6869 7320 6172 6775 6d65 6e74 2069 7320  his argument is 
+0000a680: 6967 6e6f 7265 640a 6966 2060 6669 6c74  ignored.if `filt
+0000a690: 6572 5f69 6e63 6c75 6465 6020 6973 2073  er_include` is s
+0000a6a0: 6574 2074 6f20 6120 6e6f 6e2d 656d 7074  et to a non-empt
+0000a6b0: 7920 7365 7175 656e 6365 2e20 4279 2064  y sequence. By d
+0000a6c0: 6566 6175 6c74 2c20 7468 6973 2061 7267  efault, this arg
+0000a6d0: 756d 656e 7420 6973 2073 6574 0a74 6f20  ument is set.to 
+0000a6e0: 6d61 7463 6820 7468 6520 6576 656e 7420  match the event 
+0000a6f0: 7479 7065 7320 6f66 2022 7379 7374 656d  types of "system
+0000a700: 2065 7665 6e74 7322 2c20 736f 2074 6861   events", so tha
+0000a710: 7420 4576 656e 7453 746f 7265 4442 2073  t EventStoreDB s
+0000a720: 7973 7465 6d20 6576 656e 7473 0a77 696c  ystem events.wil
+0000a730: 6c20 6e6f 7420 6e6f 726d 616c 6c79 2062  l not normally b
+0000a740: 6520 696e 636c 7564 6564 2e20 5365 6520  e included. See 
+0000a750: 7468 6520 4e6f 7465 7320 7365 6374 696f  the Notes sectio
+0000a760: 6e20 6265 6c6f 7720 666f 7220 6d6f 7265  n below for more
+0000a770: 2069 6e66 6f72 6d61 7469 6f6e 0a61 626f   information.abo
+0000a780: 7574 2066 696c 7465 7220 6578 7072 6573  ut filter expres
+0000a790: 7369 6f6e 732e 0a0a 5468 6520 6f70 7469  sions...The opti
+0000a7a0: 6f6e 616c 2061 7267 756d 656e 7420 6066  onal argument `f
+0000a7b0: 696c 7465 725f 696e 636c 7564 6560 2069  ilter_include` i
+0000a7c0: 7320 6120 7365 7175 656e 6365 206f 6620  s a sequence of 
+0000a7d0: 7265 6775 6c61 7220 6578 7072 6573 7369  regular expressi
+0000a7e0: 6f6e 730a 7468 6174 206d 6174 6368 2072  ons.that match r
+0000a7f0: 6563 6f72 6465 6420 6576 656e 7473 2074  ecorded events t
+0000a800: 6861 7420 7368 6f75 6c64 2062 6520 696e  hat should be in
+0000a810: 636c 7564 6564 2e20 4279 2064 6566 6175  cluded. By defau
+0000a820: 6c74 2c20 7468 6973 2061 7267 756d 656e  lt, this argumen
+0000a830: 740a 6973 2061 6e20 656d 7074 7920 7475  t.is an empty tu
+0000a840: 706c 652e 2049 6620 7468 6973 2061 7267  ple. If this arg
+0000a850: 756d 656e 7420 6973 2073 6574 2074 6f20  ument is set to 
+0000a860: 6120 6e6f 6e2d 656d 7074 7920 7365 7175  a non-empty sequ
+0000a870: 656e 6365 2c20 7468 650a 6066 696c 7465  ence, the.`filte
+0000a880: 725f 6578 636c 7564 6560 2061 7267 756d  r_exclude` argum
+0000a890: 656e 7420 6973 2069 676e 6f72 6564 2e0a  ent is ignored..
+0000a8a0: 0a54 6865 206f 7074 696f 6e61 6c20 6172  .The optional ar
+0000a8b0: 6775 6d65 6e74 2060 6669 6c74 6572 5f62  gument `filter_b
+0000a8c0: 795f 7374 7265 616d 5f6e 616d 6560 2069  y_stream_name` i
+0000a8d0: 7320 6120 626f 6f6c 6561 6e20 7661 6c75  s a boolean valu
+0000a8e0: 6520 7468 6174 2069 6e64 6963 6174 6573  e that indicates
+0000a8f0: 2077 6865 7468 6572 0a74 6865 2066 696c   whether.the fil
+0000a900: 7465 7220 7769 6c6c 2061 7070 6c79 2074  ter will apply t
+0000a910: 6f20 6576 656e 7420 7479 7065 7320 6f72  o event types or
+0000a920: 2073 7472 6561 6d20 6e61 6d65 732e 2042   stream names. B
+0000a930: 7920 6465 6661 756c 742c 2074 6869 7320  y default, this 
+0000a940: 7661 6c75 6520 6973 2060 4661 6c73 6560  value is `False`
+0000a950: 0a61 6e64 2073 6f20 7468 6520 6669 6c74  .and so the filt
+0000a960: 6572 696e 6720 7769 6c6c 2061 7070 6c79  ering will apply
+0000a970: 2074 6f20 7468 6520 6576 656e 7420 7479   to the event ty
+0000a980: 7065 2073 7472 696e 6773 206f 6620 7265  pe strings of re
+0000a990: 636f 7264 6564 2065 7665 6e74 732e 0a0a  corded events...
+0000a9a0: 506c 6561 7365 206e 6f74 652c 2074 6865  Please note, the
+0000a9b0: 2066 696c 7465 7269 6e67 2068 6170 7065   filtering happe
+0000a9c0: 6e73 206f 6e20 7468 6520 4576 656e 7453  ns on the EventS
+0000a9d0: 746f 7265 4442 2073 6572 7665 722c 2061  toreDB server, a
+0000a9e0: 6e64 2074 6865 0a60 6c69 6d69 7460 2061  nd the.`limit` a
+0000a9f0: 7267 756d 656e 7420 6973 2061 7070 6c69  rgument is appli
+0000aa00: 6564 206f 6e20 7468 6520 7365 7276 6572  ed on the server
+0000aa10: 2061 6674 6572 2066 696c 7465 7269 6e67   after filtering
+0000aa20: 2e20 5365 6520 6265 6c6f 7720 666f 720a  . See below for.
+0000aa30: 6d6f 7265 2069 6e66 6f72 6d61 7469 6f6e  more information
+0000aa40: 2061 626f 7574 2066 696c 7465 7220 7265   about filter re
+0000aa50: 6775 6c61 7220 6578 7072 6573 7369 6f6e  gular expression
+0000aa60: 732e 0a0a 5468 6520 6f70 7469 6f6e 616c  s...The optional
+0000aa70: 2060 7469 6d65 6f75 7460 2061 7267 756d   `timeout` argum
+0000aa80: 656e 7420 6973 2061 2050 7974 686f 6e20  ent is a Python 
+0000aa90: 6066 6c6f 6174 6020 7768 6963 6820 7365  `float` which se
+0000aaa0: 7473 2061 0a64 6561 646c 696e 6520 666f  ts a.deadline fo
+0000aab0: 7220 7468 6520 636f 6d70 6c65 7469 6f6e  r the completion
+0000aac0: 206f 6620 7468 6520 6752 5043 206f 7065   of the gRPC ope
+0000aad0: 7261 7469 6f6e 2e0a 0a54 6869 7320 6d65  ration...This me
+0000aae0: 7468 6f64 2072 6574 7572 6e73 2061 2050  thod returns a P
+0000aaf0: 7974 686f 6e20 6974 6572 6174 6f72 2074  ython iterator t
+0000ab00: 6861 7420 7969 656c 6473 2072 6563 6f72  hat yields recor
+0000ab10: 6465 6420 6576 656e 7473 2c20 696e 636c  ded events, incl
+0000ab20: 7564 696e 6720 6576 656e 7473 0a74 6861  uding events.tha
+0000ab30: 7420 6172 6520 7265 636f 7264 6564 2061  t are recorded a
+0000ab40: 6674 6572 2074 6865 2073 7562 7363 7269  fter the subscri
+0000ab50: 7074 696f 6e20 7761 7320 6372 6561 7465  ption was create
+0000ab60: 642e 2049 7465 7261 7469 6e67 206f 7665  d. Iterating ove
+0000ab70: 7220 7468 6973 206f 626a 6563 7420 7769  r this object wi
+0000ab80: 6c6c 0a74 6865 7265 666f 7265 206e 6f74  ll.therefore not
+0000ab90: 2073 746f 702c 2075 6e6c 6573 7320 7468   stop, unless th
+0000aba0: 6520 636f 6e6e 6563 7469 6f6e 2074 6f20  e connection to 
+0000abb0: 7468 6520 6461 7461 6261 7365 2069 7320  the database is 
+0000abc0: 6c6f 7374 2e20 5468 6520 6361 6c6c 2077  lost. The call w
+0000abd0: 696c 6c0a 6265 2065 6e64 6564 2077 6865  ill.be ended whe
+0000abe0: 6e20 7468 6520 6974 6572 6174 6f72 206f  n the iterator o
+0000abf0: 626a 6563 7420 6973 2064 656c 6574 6564  bject is deleted
+0000ac00: 2066 726f 6d20 6d65 6d6f 7279 2c20 7768   from memory, wh
+0000ac10: 6963 6820 7769 6c6c 2068 6170 7065 6e20  ich will happen 
+0000ac20: 7768 656e 2074 6865 0a69 7465 7261 746f  when the.iterato
+0000ac30: 7220 6f62 6a65 6374 2067 6f65 7320 6f75  r object goes ou
+0000ac40: 7420 6f66 2073 636f 7065 206f 7220 6973  t of scope or is
+0000ac50: 2065 7870 6c69 6369 746c 7920 6465 6c65   explicitly dele
+0000ac60: 7465 6420 2873 6565 2062 656c 6f77 292e  ted (see below).
+0000ac70: 2054 6865 2063 616c 6c0a 6d61 7920 616c   The call.may al
+0000ac80: 736f 2062 6520 636c 6f73 6564 2062 7920  so be closed by 
+0000ac90: 7468 6520 7365 7276 6572 2e0a 0a54 6865  the server...The
+0000aca0: 2073 7562 7363 7269 7074 696f 6e20 6f62   subscription ob
+0000acb0: 6a65 6374 2063 616e 2062 6520 7573 6564  ject can be used
+0000acc0: 2064 6972 6563 746c 792c 2062 7574 2069   directly, but i
+0000acd0: 7420 6d69 6768 7420 6265 2075 7365 6420  t might be used 
+0000ace0: 7769 7468 696e 2061 2074 6872 6561 6465  within a threade
+0000acf0: 640a 6c6f 6f70 2064 6564 6963 6174 6564  d.loop dedicated
+0000ad00: 2074 6f20 7265 6365 6976 696e 6720 6576   to receiving ev
+0000ad10: 656e 7473 2074 6861 7420 6361 6e20 6265  ents that can be
+0000ad20: 2073 746f 7070 6564 2069 6e20 6120 636f   stopped in a co
+0000ad30: 6e74 726f 6c6c 6564 2077 6179 2c20 7769  ntrolled way, wi
+0000ad40: 7468 0a72 6563 6f72 6465 6420 6576 656e  th.recorded even
+0000ad50: 7473 2070 7574 206f 6e20 6120 7175 6575  ts put on a queu
+0000ad60: 6520 666f 7220 7072 6f63 6573 7369 6e67  e for processing
+0000ad70: 2069 6e20 6120 6469 6666 6572 656e 7420   in a different 
+0000ad80: 7468 7265 6164 2e20 5468 6973 2070 6163  thread. This pac
+0000ad90: 6b61 6765 0a64 6f65 736e 2774 2070 726f  kage.doesn't pro
+0000ada0: 7669 6465 2073 7563 6820 6120 7468 7265  vide such a thre
+0000adb0: 6164 6564 206f 7220 7175 6575 696e 6720  aded or queuing 
+0000adc0: 6f62 6a65 6374 2063 6c61 7373 2e20 4a75  object class. Ju
+0000add0: 7374 206d 616b 6520 7375 7265 2074 6f20  st make sure to 
+0000ade0: 7265 636f 6e73 7472 7563 740a 7468 6520  reconstruct.the 
+0000adf0: 7375 6273 6372 6970 7469 6f6e 2028 616e  subscription (an
+0000ae00: 6420 7468 6520 7175 6575 6529 2075 7369  d the queue) usi
+0000ae10: 6e67 2074 6865 206c 6173 7420 7265 636f  ng the last reco
+0000ae20: 7264 6564 2063 6f6d 6d69 7420 706f 7369  rded commit posi
+0000ae30: 7469 6f6e 2077 6865 6e20 7265 7375 6d69  tion when resumi
+0000ae40: 6e67 0a74 6865 2073 7562 7363 7269 7074  ng.the subscript
+0000ae50: 696f 6e20 6166 7465 7220 616e 2065 7272  ion after an err
+0000ae60: 6f72 2c20 746f 2062 6520 7375 7265 2061  or, to be sure a
+0000ae70: 6c6c 2065 7665 6e74 7320 6172 6520 7072  ll events are pr
+0000ae80: 6f63 6573 7365 6420 6f6e 6365 2e0a 0a54  ocessed once...T
+0000ae90: 6865 2065 7861 6d70 6c65 2062 656c 6f77  he example below
+0000aea0: 2073 686f 7773 2068 6f77 2074 6f20 7375   shows how to su
+0000aeb0: 6273 6372 6962 6520 746f 2072 6563 6569  bscribe to recei
+0000aec0: 7665 2061 6c6c 2072 6563 6f72 6465 640a  ve all recorded.
+0000aed0: 6576 656e 7473 2066 726f 6d20 7468 6520  events from the 
+0000aee0: 7374 6172 742c 2061 6e64 2074 6865 6e20  start, and then 
+0000aef0: 7265 7375 6d69 6e67 2066 726f 6d20 6120  resuming from a 
+0000af00: 7370 6563 6966 6963 2063 6f6d 6d69 7420  specific commit 
+0000af10: 706f 7369 7469 6f6e 2e0a 5468 7265 6520  position..Three 
+0000af20: 616c 7265 6164 792d 7265 636f 7264 6564  already-recorded
+0000af30: 2065 7665 6e74 7320 6172 6520 7265 6365   events are rece
+0000af40: 6976 6564 2c20 616e 6420 7468 656e 2074  ived, and then t
+0000af50: 6872 6565 206e 6577 2065 7665 6e74 7320  hree new events 
+0000af60: 6172 650a 7265 636f 7264 6564 2c20 7768  are.recorded, wh
+0000af70: 6963 6820 6172 6520 7468 656e 2072 6563  ich are then rec
+0000af80: 6569 7665 6420 7669 6120 7468 6520 7375  eived via the su
+0000af90: 6273 6372 6970 7469 6f6e 2e0a 0a60 6060  bscription...```
+0000afa0: 7079 7468 6f6e 0a0a 2320 4170 7065 6e64  python..# Append
+0000afb0: 2061 6e20 6576 656e 7420 746f 2061 206e   an event to a n
+0000afc0: 6577 2073 7472 6561 6d2e 0a73 7472 6561  ew stream..strea
+0000afd0: 6d5f 6e61 6d65 3220 3d20 7374 7228 7575  m_name2 = str(uu
+0000afe0: 6964 3428 2929 0a65 7665 6e74 3420 3d20  id4()).event4 = 
+0000aff0: 4e65 7745 7665 6e74 2874 7970 653d 274f  NewEvent(type='O
+0000b000: 7264 6572 4372 6561 7465 6427 2c20 6461  rderCreated', da
+0000b010: 7461 3d62 2764 6174 6134 2729 0a63 6c69  ta=b'data4').cli
+0000b020: 656e 742e 6170 7065 6e64 5f65 7665 6e74  ent.append_event
+0000b030: 7328 0a20 2020 2073 7472 6561 6d5f 6e61  s(.    stream_na
+0000b040: 6d65 3d73 7472 6561 6d5f 6e61 6d65 322c  me=stream_name2,
+0000b050: 0a20 2020 2065 7870 6563 7465 645f 706f  .    expected_po
+0000b060: 7369 7469 6f6e 3d4e 6f6e 652c 0a20 2020  sition=None,.   
+0000b070: 2065 7665 6e74 733d 5b65 7665 6e74 345d   events=[event4]
+0000b080: 2c0a 290a 0a23 2053 7562 7363 7269 6265  ,.)..# Subscribe
+0000b090: 2066 726f 6d20 7468 6520 6669 7273 7420   from the first 
+0000b0a0: 7265 636f 7264 6564 2065 7665 6e74 2069  recorded event i
+0000b0b0: 6e20 7468 6520 6461 7461 6261 7365 2e0a  n the database..
+0000b0c0: 7375 6273 6372 6970 7469 6f6e 203d 2063  subscription = c
+0000b0d0: 6c69 656e 742e 7375 6273 6372 6962 655f  lient.subscribe_
+0000b0e0: 616c 6c5f 6576 656e 7473 2829 0a72 6563  all_events().rec
+0000b0f0: 6569 7665 645f 6576 656e 7473 203d 205b  eived_events = [
+0000b100: 5d0a 0a23 2050 726f 6365 7373 2065 7665  ]..# Process eve
+0000b110: 6e74 7320 7265 6365 6976 6564 2066 726f  nts received fro
+0000b120: 6d20 7468 6520 6361 7463 682d 7570 2073  m the catch-up s
+0000b130: 7562 7363 7269 7074 696f 6e2e 0a66 6f72  ubscription..for
+0000b140: 2065 7665 6e74 2069 6e20 7375 6273 6372   event in subscr
+0000b150: 6970 7469 6f6e 3a0a 2020 2020 6c61 7374  iption:.    last
+0000b160: 5f63 6f6d 6d69 745f 706f 7369 7469 6f6e  _commit_position
+0000b170: 203d 2065 7665 6e74 2e63 6f6d 6d69 745f   = event.commit_
+0000b180: 706f 7369 7469 6f6e 0a20 2020 2072 6563  position.    rec
+0000b190: 6569 7665 645f 6576 656e 7473 2e61 7070  eived_events.app
+0000b1a0: 656e 6428 6576 656e 7429 0a20 2020 2069  end(event).    i
+0000b1b0: 6620 6576 656e 742e 6964 203d 3d20 6576  f event.id == ev
+0000b1c0: 656e 7434 2e69 643a 0a20 2020 2020 2020  ent4.id:.       
+0000b1d0: 2062 7265 616b 0a0a 6173 7365 7274 2072   break..assert r
+0000b1e0: 6563 6569 7665 645f 6576 656e 7473 5b2d  eceived_events[-
+0000b1f0: 345d 2e69 6420 3d3d 2065 7665 6e74 312e  4].id == event1.
+0000b200: 6964 0a61 7373 6572 7420 7265 6365 6976  id.assert receiv
+0000b210: 6564 5f65 7665 6e74 735b 2d33 5d2e 6964  ed_events[-3].id
+0000b220: 203d 3d20 6576 656e 7432 2e69 640a 6173   == event2.id.as
+0000b230: 7365 7274 2072 6563 6569 7665 645f 6576  sert received_ev
+0000b240: 656e 7473 5b2d 325d 2e69 6420 3d3d 2065  ents[-2].id == e
+0000b250: 7665 6e74 332e 6964 0a61 7373 6572 7420  vent3.id.assert 
+0000b260: 7265 6365 6976 6564 5f65 7665 6e74 735b  received_events[
+0000b270: 2d31 5d2e 6964 203d 3d20 6576 656e 7434  -1].id == event4
+0000b280: 2e69 640a 0a23 2041 7070 656e 6420 7375  .id..# Append su
+0000b290: 6273 6571 7565 6e74 2065 7665 6e74 7320  bsequent events 
+0000b2a0: 746f 2074 6865 2073 7472 6561 6d2e 0a65  to the stream..e
+0000b2b0: 7665 6e74 3520 3d20 4e65 7745 7665 6e74  vent5 = NewEvent
+0000b2c0: 2874 7970 653d 274f 7264 6572 5570 6461  (type='OrderUpda
+0000b2d0: 7465 6427 2c20 6461 7461 3d62 2764 6174  ted', data=b'dat
+0000b2e0: 6135 2729 0a63 6c69 656e 742e 6170 7065  a5').client.appe
+0000b2f0: 6e64 5f65 7665 6e74 7328 0a20 2020 2073  nd_events(.    s
+0000b300: 7472 6561 6d5f 6e61 6d65 3d73 7472 6561  tream_name=strea
+0000b310: 6d5f 6e61 6d65 322c 0a20 2020 2065 7870  m_name2,.    exp
+0000b320: 6563 7465 645f 706f 7369 7469 6f6e 3d30  ected_position=0
+0000b330: 2c0a 2020 2020 6576 656e 7473 3d5b 6576  ,.    events=[ev
+0000b340: 656e 7435 5d2c 0a29 0a0a 2320 5265 6365  ent5],.)..# Rece
+0000b350: 6976 6520 7375 6273 6571 7565 6e74 2065  ive subsequent e
+0000b360: 7665 6e74 7320 6672 6f6d 2074 6865 2073  vents from the s
+0000b370: 7562 7363 7269 7074 696f 6e2e 0a66 6f72  ubscription..for
+0000b380: 2065 7665 6e74 2069 6e20 7375 6273 6372   event in subscr
+0000b390: 6970 7469 6f6e 3a0a 2020 2020 6c61 7374  iption:.    last
+0000b3a0: 5f63 6f6d 6d69 745f 706f 7369 7469 6f6e  _commit_position
+0000b3b0: 203d 2065 7665 6e74 2e63 6f6d 6d69 745f   = event.commit_
+0000b3c0: 706f 7369 7469 6f6e 0a20 2020 2072 6563  position.    rec
+0000b3d0: 6569 7665 645f 6576 656e 7473 2e61 7070  eived_events.app
+0000b3e0: 656e 6428 6576 656e 7429 0a20 2020 2069  end(event).    i
+0000b3f0: 6620 6576 656e 742e 6964 203d 3d20 6576  f event.id == ev
+0000b400: 656e 7435 2e69 643a 0a20 2020 2020 2020  ent5.id:.       
+0000b410: 2062 7265 616b 0a0a 0a61 7373 6572 7420   break...assert 
+0000b420: 7265 6365 6976 6564 5f65 7665 6e74 735b  received_events[
+0000b430: 2d35 5d2e 6964 203d 3d20 6576 656e 7431  -5].id == event1
+0000b440: 2e69 640a 6173 7365 7274 2072 6563 6569  .id.assert recei
+0000b450: 7665 645f 6576 656e 7473 5b2d 345d 2e69  ved_events[-4].i
+0000b460: 6420 3d3d 2065 7665 6e74 322e 6964 0a61  d == event2.id.a
+0000b470: 7373 6572 7420 7265 6365 6976 6564 5f65  ssert received_e
+0000b480: 7665 6e74 735b 2d33 5d2e 6964 203d 3d20  vents[-3].id == 
+0000b490: 6576 656e 7433 2e69 640a 6173 7365 7274  event3.id.assert
+0000b4a0: 2072 6563 6569 7665 645f 6576 656e 7473   received_events
+0000b4b0: 5b2d 325d 2e69 6420 3d3d 2065 7665 6e74  [-2].id == event
+0000b4c0: 342e 6964 0a61 7373 6572 7420 7265 6365  4.id.assert rece
+0000b4d0: 6976 6564 5f65 7665 6e74 735b 2d31 5d2e  ived_events[-1].
+0000b4e0: 6964 203d 3d20 6576 656e 7435 2e69 640a  id == event5.id.
+0000b4f0: 0a0a 2320 4170 7065 6e64 206d 6f72 6520  ..# Append more 
+0000b500: 6576 656e 7473 2074 6f20 7468 6520 7374  events to the st
+0000b510: 7265 616d 2e0a 6576 656e 7436 203d 204e  ream..event6 = N
+0000b520: 6577 4576 656e 7428 7479 7065 3d27 4f72  ewEvent(type='Or
+0000b530: 6465 7244 656c 6574 6564 272c 2064 6174  derDeleted', dat
+0000b540: 613d 6227 6461 7461 3627 290a 636c 6965  a=b'data6').clie
+0000b550: 6e74 2e61 7070 656e 645f 6576 656e 7473  nt.append_events
+0000b560: 280a 2020 2020 7374 7265 616d 5f6e 616d  (.    stream_nam
+0000b570: 653d 7374 7265 616d 5f6e 616d 6532 2c0a  e=stream_name2,.
+0000b580: 2020 2020 6578 7065 6374 6564 5f70 6f73      expected_pos
+0000b590: 6974 696f 6e3d 312c 0a20 2020 2065 7665  ition=1,.    eve
+0000b5a0: 6e74 733d 5b65 7665 6e74 365d 2c0a 290a  nts=[event6],.).
+0000b5b0: 0a0a 2320 5265 7375 6d65 2073 7562 7363  ..# Resume subsc
+0000b5c0: 7269 6269 6e67 2066 726f 6d20 7468 6520  ribing from the 
+0000b5d0: 6c61 7374 2063 6f6d 6d69 7420 706f 7369  last commit posi
+0000b5e0: 7469 6f6e 2e0a 7375 6273 6372 6970 7469  tion..subscripti
+0000b5f0: 6f6e 203d 2063 6c69 656e 742e 7375 6273  on = client.subs
+0000b600: 6372 6962 655f 616c 6c5f 6576 656e 7473  cribe_all_events
+0000b610: 280a 2020 2020 636f 6d6d 6974 5f70 6f73  (.    commit_pos
+0000b620: 6974 696f 6e3d 6c61 7374 5f63 6f6d 6d69  ition=last_commi
+0000b630: 745f 706f 7369 7469 6f6e 0a29 0a0a 0a23  t_position.)...#
+0000b640: 2043 6174 6368 2075 7020 6279 2072 6563   Catch up by rec
+0000b650: 6569 7669 6e67 2074 6865 206e 6577 2065  eiving the new e
+0000b660: 7665 6e74 2066 726f 6d20 7468 6520 7375  vent from the su
+0000b670: 6273 6372 6970 7469 6f6e 2e0a 666f 7220  bscription..for 
+0000b680: 6576 656e 7420 696e 2073 7562 7363 7269  event in subscri
+0000b690: 7074 696f 6e3a 0a20 2020 2072 6563 6569  ption:.    recei
+0000b6a0: 7665 645f 6576 656e 7473 2e61 7070 656e  ved_events.appen
+0000b6b0: 6428 6576 656e 7429 0a20 2020 2069 6620  d(event).    if 
+0000b6c0: 6576 656e 742e 6964 203d 3d20 6576 656e  event.id == even
+0000b6d0: 7436 2e69 643a 0a20 2020 2020 2020 2062  t6.id:.        b
+0000b6e0: 7265 616b 0a0a 6173 7365 7274 2072 6563  reak..assert rec
+0000b6f0: 6569 7665 645f 6576 656e 7473 5b2d 365d  eived_events[-6]
+0000b700: 2e69 6420 3d3d 2065 7665 6e74 312e 6964  .id == event1.id
+0000b710: 0a61 7373 6572 7420 7265 6365 6976 6564  .assert received
+0000b720: 5f65 7665 6e74 735b 2d35 5d2e 6964 203d  _events[-5].id =
+0000b730: 3d20 6576 656e 7432 2e69 640a 6173 7365  = event2.id.asse
+0000b740: 7274 2072 6563 6569 7665 645f 6576 656e  rt received_even
+0000b750: 7473 5b2d 345d 2e69 6420 3d3d 2065 7665  ts[-4].id == eve
+0000b760: 6e74 332e 6964 0a61 7373 6572 7420 7265  nt3.id.assert re
+0000b770: 6365 6976 6564 5f65 7665 6e74 735b 2d33  ceived_events[-3
+0000b780: 5d2e 6964 203d 3d20 6576 656e 7434 2e69  ].id == event4.i
+0000b790: 640a 6173 7365 7274 2072 6563 6569 7665  d.assert receive
+0000b7a0: 645f 6576 656e 7473 5b2d 325d 2e69 6420  d_events[-2].id 
+0000b7b0: 3d3d 2065 7665 6e74 352e 6964 0a61 7373  == event5.id.ass
+0000b7c0: 6572 7420 7265 6365 6976 6564 5f65 7665  ert received_eve
+0000b7d0: 6e74 735b 2d31 5d2e 6964 203d 3d20 6576  nts[-1].id == ev
+0000b7e0: 656e 7436 2e69 640a 0a0a 2320 4170 7065  ent6.id...# Appe
+0000b7f0: 6e64 2074 6872 6565 206d 6f72 6520 6576  nd three more ev
+0000b800: 656e 7473 2074 6f20 6120 6e65 7720 7374  ents to a new st
+0000b810: 7265 616d 2e0a 7374 7265 616d 5f6e 616d  ream..stream_nam
+0000b820: 6533 203d 2073 7472 2875 7569 6434 2829  e3 = str(uuid4()
+0000b830: 290a 6576 656e 7437 203d 204e 6577 4576  ).event7 = NewEv
+0000b840: 656e 7428 7479 7065 3d27 4f72 6465 7243  ent(type='OrderC
+0000b850: 7265 6174 6564 272c 2064 6174 613d 6227  reated', data=b'
+0000b860: 6461 7461 3727 290a 6576 656e 7438 203d  data7').event8 =
+0000b870: 204e 6577 4576 656e 7428 7479 7065 3d27   NewEvent(type='
+0000b880: 4f72 6465 7255 7064 6174 6564 272c 2064  OrderUpdated', d
+0000b890: 6174 613d 6227 6461 7461 3827 290a 6576  ata=b'data8').ev
+0000b8a0: 656e 7439 203d 204e 6577 4576 656e 7428  ent9 = NewEvent(
+0000b8b0: 7479 7065 3d27 4f72 6465 7244 656c 6574  type='OrderDelet
+0000b8c0: 6564 272c 2064 6174 613d 6227 6461 7461  ed', data=b'data
+0000b8d0: 3927 290a 0a63 6c69 656e 742e 6170 7065  9')..client.appe
+0000b8e0: 6e64 5f65 7665 6e74 7328 0a20 2020 2073  nd_events(.    s
+0000b8f0: 7472 6561 6d5f 6e61 6d65 3d73 7472 6561  tream_name=strea
+0000b900: 6d5f 6e61 6d65 332c 0a20 2020 2065 7870  m_name3,.    exp
+0000b910: 6563 7465 645f 706f 7369 7469 6f6e 3d4e  ected_position=N
+0000b920: 6f6e 652c 0a20 2020 2065 7665 6e74 733d  one,.    events=
+0000b930: 5b65 7665 6e74 372c 2065 7665 6e74 382c  [event7, event8,
+0000b940: 2065 7665 6e74 395d 2c0a 290a 0a23 2052   event9],.)..# R
+0000b950: 6563 6569 7665 2074 6865 2074 6872 6565  eceive the three
+0000b960: 206e 6577 2065 7665 6e74 7320 6672 6f6d   new events from
+0000b970: 2074 6865 2072 6573 756d 6564 2073 7562   the resumed sub
+0000b980: 7363 7269 7074 696f 6e2e 0a66 6f72 2065  scription..for e
+0000b990: 7665 6e74 2069 6e20 7375 6273 6372 6970  vent in subscrip
+0000b9a0: 7469 6f6e 3a0a 2020 2020 7265 6365 6976  tion:.    receiv
+0000b9b0: 6564 5f65 7665 6e74 732e 6170 7065 6e64  ed_events.append
+0000b9c0: 2865 7665 6e74 290a 2020 2020 6966 2065  (event).    if e
+0000b9d0: 7665 6e74 2e69 6420 3d3d 2065 7665 6e74  vent.id == event
+0000b9e0: 392e 6964 3a0a 2020 2020 2020 2020 6272  9.id:.        br
+0000b9f0: 6561 6b0a 0a61 7373 6572 7420 7265 6365  eak..assert rece
+0000ba00: 6976 6564 5f65 7665 6e74 735b 2d39 5d2e  ived_events[-9].
+0000ba10: 6964 203d 3d20 6576 656e 7431 2e69 640a  id == event1.id.
+0000ba20: 6173 7365 7274 2072 6563 6569 7665 645f  assert received_
+0000ba30: 6576 656e 7473 5b2d 385d 2e69 6420 3d3d  events[-8].id ==
+0000ba40: 2065 7665 6e74 322e 6964 0a61 7373 6572   event2.id.asser
+0000ba50: 7420 7265 6365 6976 6564 5f65 7665 6e74  t received_event
+0000ba60: 735b 2d37 5d2e 6964 203d 3d20 6576 656e  s[-7].id == even
+0000ba70: 7433 2e69 640a 6173 7365 7274 2072 6563  t3.id.assert rec
+0000ba80: 6569 7665 645f 6576 656e 7473 5b2d 365d  eived_events[-6]
+0000ba90: 2e69 6420 3d3d 2065 7665 6e74 342e 6964  .id == event4.id
+0000baa0: 0a61 7373 6572 7420 7265 6365 6976 6564  .assert received
+0000bab0: 5f65 7665 6e74 735b 2d35 5d2e 6964 203d  _events[-5].id =
+0000bac0: 3d20 6576 656e 7435 2e69 640a 6173 7365  = event5.id.asse
+0000bad0: 7274 2072 6563 6569 7665 645f 6576 656e  rt received_even
+0000bae0: 7473 5b2d 345d 2e69 6420 3d3d 2065 7665  ts[-4].id == eve
+0000baf0: 6e74 362e 6964 0a61 7373 6572 7420 7265  nt6.id.assert re
+0000bb00: 6365 6976 6564 5f65 7665 6e74 735b 2d33  ceived_events[-3
+0000bb10: 5d2e 6964 203d 3d20 6576 656e 7437 2e69  ].id == event7.i
+0000bb20: 640a 6173 7365 7274 2072 6563 6569 7665  d.assert receive
+0000bb30: 645f 6576 656e 7473 5b2d 325d 2e69 6420  d_events[-2].id 
+0000bb40: 3d3d 2065 7665 6e74 382e 6964 0a61 7373  == event8.id.ass
+0000bb50: 6572 7420 7265 6365 6976 6564 5f65 7665  ert received_eve
+0000bb60: 6e74 735b 2d31 5d2e 6964 203d 3d20 6576  nts[-1].id == ev
+0000bb70: 656e 7439 2e69 640a 6060 600a 0a54 6865  ent9.id.```..The
+0000bb80: 2063 6174 6368 2d75 7020 7375 6273 6372   catch-up subscr
+0000bb90: 6970 7469 6f6e 2063 616c 6c20 6973 2065  iption call is e
+0000bba0: 6e64 6564 2061 7320 736f 6f6e 2061 7320  nded as soon as 
+0000bbb0: 7468 6520 7375 6273 6372 6970 7469 6f6e  the subscription
+0000bbc0: 206f 626a 6563 740a 676f 6573 206f 7574   object.goes out
+0000bbd0: 206f 6620 7363 6f70 6520 6f72 2069 7320   of scope or is 
+0000bbe0: 6578 706c 6963 6974 6c79 2064 656c 6574  explicitly delet
+0000bbf0: 6564 2066 726f 6d20 6d65 6d6f 7279 2e0a  ed from memory..
+0000bc00: 0a60 6060 7079 7468 6f6e 0a23 2045 6e64  .```python.# End
+0000bc10: 2074 6865 2073 7562 7363 7269 7074 696f   the subscriptio
+0000bc20: 6e2e 0a64 656c 2073 7562 7363 7269 7074  n..del subscript
+0000bc30: 696f 6e0a 6060 600a 0a23 2323 2053 7562  ion.```..### Sub
+0000bc40: 7363 7269 6265 2073 7472 6561 6d20 6576  scribe stream ev
+0000bc50: 656e 7473 0a0a 5468 6560 7375 6273 6372  ents..The`subscr
+0000bc60: 6962 655f 7374 7265 616d 5f65 7665 6e74  ibe_stream_event
+0000bc70: 7328 2960 206d 6574 686f 6420 6361 6e20  s()` method can 
+0000bc80: 6265 2075 7365 6420 746f 2073 7461 7274  be used to start
+0000bc90: 2061 2022 6361 7463 682d 7570 2220 7375   a "catch-up" su
+0000bca0: 6273 6372 6970 7469 6f6e 0a74 6861 7420  bscription.that 
+0000bcb0: 6361 6e20 7265 7475 726e 2065 7665 6e74  can return event
+0000bcc0: 7320 7468 6174 2061 7265 2072 6563 6f72  s that are recor
+0000bcd0: 6465 6420 696e 2061 2073 696e 676c 6520  ded in a single 
+0000bce0: 7374 7265 616d 2e0a 0a54 6869 7320 6d65  stream...This me
+0000bcf0: 7468 6f64 2074 616b 6573 2061 2072 6571  thod takes a req
+0000bd00: 7569 7265 6420 6073 7472 6561 6d5f 6e61  uired `stream_na
+0000bd10: 6d65 6020 6172 6775 6d65 6e74 2c20 7768  me` argument, wh
+0000bd20: 6963 6820 7370 6563 6966 6965 7320 7468  ich specifies th
+0000bd30: 6520 6e61 6d65 206f 6620 7468 6520 7374  e name of the st
+0000bd40: 7265 616d 0a66 726f 6d20 7768 6963 6820  ream.from which 
+0000bd50: 7265 636f 7264 6564 2065 7665 6e74 7320  recorded events 
+0000bd60: 7769 6c6c 2062 6520 7265 6365 6976 6564  will be received
+0000bd70: 2e0a 0a54 6869 7320 6d65 7468 6f64 2061  ...This method a
+0000bd80: 6c73 6f20 7461 6b65 7320 7477 6f20 6f70  lso takes two op
+0000bd90: 7469 6f6e 616c 2061 7267 756d 656e 7473  tional arguments
+0000bda0: 2c20 6073 7472 6561 6d5f 706f 7369 7469  , `stream_positi
+0000bdb0: 6f6e 602c 2061 6e64 2060 7469 6d65 6f75  on`, and `timeou
+0000bdc0: 7460 2e0a 0a54 6865 206f 7074 696f 6e61  t`...The optiona
+0000bdd0: 6c20 6073 7472 6561 6d5f 706f 7369 7469  l `stream_positi
+0000bde0: 6f6e 6020 6172 6775 6d65 6e74 2073 7065  on` argument spe
+0000bdf0: 6369 6669 6573 2061 2070 6f73 6974 696f  cifies a positio
+0000be00: 6e20 696e 2074 6865 2073 7472 6561 6d20  n in the stream 
+0000be10: 6672 6f6d 2077 6869 6368 0a72 6563 6f72  from which.recor
+0000be20: 6465 6420 6576 656e 7473 2077 696c 6c20  ded events will 
+0000be30: 6265 2072 6563 6569 7665 642e 2054 6865  be received. The
+0000be40: 2065 7665 6e74 2061 7420 7468 6520 7370   event at the sp
+0000be50: 6563 6966 6965 6420 7374 7265 616d 2070  ecified stream p
+0000be60: 6f73 6974 696f 6e20 7769 6c6c 206e 6f74  osition will not
+0000be70: 0a62 6520 696e 636c 7564 6564 2e0a 0a54  .be included...T
+0000be80: 6865 206f 7074 696f 6e61 6c20 6074 696d  he optional `tim
+0000be90: 656f 7574 6020 6172 6775 6d65 6e74 2069  eout` argument i
+0000bea0: 7320 6120 5079 7468 6f6e 2060 666c 6f61  s a Python `floa
+0000beb0: 7460 2074 6861 7420 7365 7473 0a61 2064  t` that sets.a d
+0000bec0: 6561 646c 696e 6520 666f 7220 7468 6520  eadline for the 
+0000bed0: 636f 6d70 6c65 7469 6f6e 206f 6620 7468  completion of th
+0000bee0: 6520 6752 5043 206f 7065 7261 7469 6f6e  e gRPC operation
+0000bef0: 2e0a 0a54 6865 2065 7861 6d70 6c65 2062  ...The example b
+0000bf00: 656c 6f77 2073 686f 7773 2068 6f77 2074  elow shows how t
+0000bf10: 6f20 7374 6172 7420 6120 6361 7463 682d  o start a catch-
+0000bf20: 7570 2073 7562 7363 7269 7074 696f 6e20  up subscription 
+0000bf30: 746f 2061 2073 7472 6561 6d2e 0a0a 6060  to a stream...``
+0000bf40: 6070 7974 686f 6e0a 0a23 2053 7562 7363  `python..# Subsc
+0000bf50: 7269 6265 2074 6f20 6576 656e 7473 2066  ribe to events f
+0000bf60: 726f 6d20 7374 7265 616d 322c 2066 726f  rom stream2, fro
+0000bf70: 6d20 7468 6520 7374 6172 742e 0a73 7562  m the start..sub
+0000bf80: 7363 7269 7074 696f 6e20 3d20 636c 6965  scription = clie
+0000bf90: 6e74 2e73 7562 7363 7269 6265 5f73 7472  nt.subscribe_str
+0000bfa0: 6561 6d5f 6576 656e 7473 2873 7472 6561  eam_events(strea
+0000bfb0: 6d5f 6e61 6d65 3d73 7472 6561 6d5f 6e61  m_name=stream_na
+0000bfc0: 6d65 3229 0a0a 2320 5265 6164 2066 726f  me2)..# Read fro
+0000bfd0: 6d20 7468 6520 7375 6273 6372 6970 7469  m the subscripti
+0000bfe0: 6f6e 2e0a 6576 656e 7473 203d 205b 5d0a  on..events = [].
+0000bff0: 666f 7220 6576 656e 7420 696e 2073 7562  for event in sub
+0000c000: 7363 7269 7074 696f 6e3a 0a20 2020 2065  scription:.    e
+0000c010: 7665 6e74 732e 6170 7065 6e64 2865 7665  vents.append(eve
+0000c020: 6e74 290a 2020 2020 6966 2065 7665 6e74  nt).    if event
+0000c030: 2e69 6420 3d3d 2065 7665 6e74 362e 6964  .id == event6.id
+0000c040: 3a0a 2020 2020 2020 2020 6272 6561 6b0a  :.        break.
+0000c050: 0a23 2043 6865 636b 2077 6520 676f 7420  .# Check we got 
+0000c060: 6576 656e 7473 206f 6e6c 7920 6672 6f6d  events only from
+0000c070: 2073 7472 6561 6d32 2e0a 6173 7365 7274   stream2..assert
+0000c080: 206c 656e 2865 7665 6e74 7329 203d 3d20   len(events) == 
+0000c090: 330a 6576 656e 7473 5b30 5d2e 7374 7265  3.events[0].stre
+0000c0a0: 616d 5f6e 616d 6520 3d3d 2073 7472 6561  am_name == strea
+0000c0b0: 6d5f 6e61 6d65 320a 6576 656e 7473 5b31  m_name2.events[1
+0000c0c0: 5d2e 7374 7265 616d 5f6e 616d 6520 3d3d  ].stream_name ==
+0000c0d0: 2073 7472 6561 6d5f 6e61 6d65 320a 6576   stream_name2.ev
+0000c0e0: 656e 7473 5b32 5d2e 7374 7265 616d 5f6e  ents[2].stream_n
+0000c0f0: 616d 6520 3d3d 2073 7472 6561 6d5f 6e61  ame == stream_na
+0000c100: 6d65 320a 0a23 2041 7070 656e 6420 616e  me2..# Append an
+0000c110: 6f74 6865 7220 6576 656e 7420 746f 2073  other event to s
+0000c120: 7472 6561 6d33 2e0a 6576 656e 7431 3020  tream3..event10 
+0000c130: 3d20 4e65 7745 7665 6e74 2874 7970 653d  = NewEvent(type=
+0000c140: 224f 7264 6572 556e 6465 6c65 7465 6422  "OrderUndeleted"
+0000c150: 2c20 6461 7461 3d62 2764 6174 6131 3027  , data=b'data10'
+0000c160: 290a 636c 6965 6e74 2e61 7070 656e 645f  ).client.append_
+0000c170: 6576 656e 7473 280a 2020 2020 7374 7265  events(.    stre
+0000c180: 616d 5f6e 616d 653d 7374 7265 616d 5f6e  am_name=stream_n
+0000c190: 616d 6533 2c0a 2020 2020 6578 7065 6374  ame3,.    expect
+0000c1a0: 6564 5f70 6f73 6974 696f 6e3d 322c 0a20  ed_position=2,. 
+0000c1b0: 2020 2065 7665 6e74 733d 5b65 7665 6e74     events=[event
+0000c1c0: 3130 5d2c 0a29 0a0a 2320 4170 7065 6e64  10],.)..# Append
+0000c1d0: 2061 6e6f 7468 6572 2065 7665 6e74 2074   another event t
+0000c1e0: 6f20 7374 7265 616d 322e 0a65 7665 6e74  o stream2..event
+0000c1f0: 3131 203d 204e 6577 4576 656e 7428 7479  11 = NewEvent(ty
+0000c200: 7065 3d22 4f72 6465 7255 6e64 656c 6574  pe="OrderUndelet
+0000c210: 6564 222c 2064 6174 613d 6227 6461 7461  ed", data=b'data
+0000c220: 3131 2729 0a63 6c69 656e 742e 6170 7065  11').client.appe
+0000c230: 6e64 5f65 7665 6e74 7328 0a20 2020 2073  nd_events(.    s
+0000c240: 7472 6561 6d5f 6e61 6d65 3d73 7472 6561  tream_name=strea
+0000c250: 6d5f 6e61 6d65 322c 0a20 2020 2065 7870  m_name2,.    exp
+0000c260: 6563 7465 645f 706f 7369 7469 6f6e 3d32  ected_position=2
+0000c270: 2c0a 2020 2020 6576 656e 7473 3d5b 6576  ,.    events=[ev
+0000c280: 656e 7431 315d 0a29 0a0a 2320 436f 6e74  ent11].)..# Cont
+0000c290: 696e 7565 2072 6561 6469 6e67 2066 726f  inue reading fro
+0000c2a0: 6d20 7468 6520 7375 6273 6372 6970 7469  m the subscripti
+0000c2b0: 6f6e 2e0a 666f 7220 6576 656e 7420 696e  on..for event in
+0000c2c0: 2073 7562 7363 7269 7074 696f 6e3a 0a20   subscription:. 
+0000c2d0: 2020 2065 7665 6e74 732e 6170 7065 6e64     events.append
+0000c2e0: 2865 7665 6e74 290a 2020 2020 6966 2065  (event).    if e
+0000c2f0: 7665 6e74 2e69 6420 3d3d 2065 7665 6e74  vent.id == event
+0000c300: 3131 2e69 643a 0a20 2020 2020 2020 2062  11.id:.        b
+0000c310: 7265 616b 0a0a 2320 4368 6563 6b20 7765  reak..# Check we
+0000c320: 2067 6f74 2065 7665 6e74 7320 6f6e 6c79   got events only
+0000c330: 2066 726f 6d20 7374 7265 616d 322e 0a61   from stream2..a
+0000c340: 7373 6572 7420 6c65 6e28 6576 656e 7473  ssert len(events
+0000c350: 2920 3d3d 2034 0a65 7665 6e74 735b 305d  ) == 4.events[0]
+0000c360: 2e73 7472 6561 6d5f 6e61 6d65 203d 3d20  .stream_name == 
+0000c370: 7374 7265 616d 5f6e 616d 6532 0a65 7665  stream_name2.eve
+0000c380: 6e74 735b 315d 2e73 7472 6561 6d5f 6e61  nts[1].stream_na
+0000c390: 6d65 203d 3d20 7374 7265 616d 5f6e 616d  me == stream_nam
+0000c3a0: 6532 0a65 7665 6e74 735b 325d 2e73 7472  e2.events[2].str
+0000c3b0: 6561 6d5f 6e61 6d65 203d 3d20 7374 7265  eam_name == stre
+0000c3c0: 616d 5f6e 616d 6532 0a65 7665 6e74 735b  am_name2.events[
+0000c3d0: 335d 2e73 7472 6561 6d5f 6e61 6d65 203d  3].stream_name =
+0000c3e0: 3d20 7374 7265 616d 5f6e 616d 6532 0a60  = stream_name2.`
+0000c3f0: 6060 0a0a 5468 6520 6578 616d 706c 6520  ``..The example 
+0000c400: 6265 6c6f 7720 7368 6f77 7320 686f 7720  below shows how 
+0000c410: 746f 2073 7461 7274 2061 2063 6174 6368  to start a catch
+0000c420: 2d75 7020 7375 6273 6372 6970 7469 6f6e  -up subscription
+0000c430: 2074 6f20 6120 7374 7265 616d 2066 726f   to a stream fro
+0000c440: 6d20 610a 7370 6563 6966 6963 2073 7472  m a.specific str
+0000c450: 6561 6d20 706f 7369 7469 6f6e 2e0a 0a60  eam position...`
+0000c460: 6060 7079 7468 6f6e 0a0a 2320 5375 6273  ``python..# Subs
+0000c470: 6372 6962 6520 746f 2065 7665 6e74 7320  cribe to events 
+0000c480: 6672 6f6d 2073 7472 6561 6d32 2c20 6672  from stream2, fr
+0000c490: 6f6d 2074 6865 2073 7461 7274 2e0a 7375  om the start..su
+0000c4a0: 6273 6372 6970 7469 6f6e 203d 2063 6c69  bscription = cli
+0000c4b0: 656e 742e 7375 6273 6372 6962 655f 7374  ent.subscribe_st
+0000c4c0: 7265 616d 5f65 7665 6e74 7328 0a20 2020  ream_events(.   
+0000c4d0: 2073 7472 6561 6d5f 6e61 6d65 3d73 7472   stream_name=str
+0000c4e0: 6561 6d5f 6e61 6d65 322c 0a20 2020 2073  eam_name2,.    s
+0000c4f0: 7472 6561 6d5f 706f 7369 7469 6f6e 3d31  tream_position=1
+0000c500: 2c0a 290a 0a23 2052 6561 6420 6576 656e  ,.)..# Read even
+0000c510: 7420 6672 6f6d 2074 6865 2073 7562 7363  t from the subsc
+0000c520: 7269 7074 696f 6e2e 0a65 7665 6e74 7320  ription..events 
+0000c530: 3d20 5b5d 0a66 6f72 2065 7665 6e74 2069  = [].for event i
+0000c540: 6e20 7375 6273 6372 6970 7469 6f6e 3a0a  n subscription:.
+0000c550: 2020 2020 6576 656e 7473 2e61 7070 656e      events.appen
+0000c560: 6428 6576 656e 7429 0a20 2020 2069 6620  d(event).    if 
+0000c570: 6576 656e 742e 6964 203d 3d20 6576 656e  event.id == even
+0000c580: 7431 312e 6964 3a0a 2020 2020 2020 2020  t11.id:.        
+0000c590: 6272 6561 6b0a 0a23 2043 6865 636b 2077  break..# Check w
+0000c5a0: 6520 676f 7420 6576 656e 7473 206f 6e6c  e got events onl
+0000c5b0: 7920 6166 7465 7220 706f 7369 7469 6f6e  y after position
+0000c5c0: 2031 2e0a 6173 7365 7274 206c 656e 2865   1..assert len(e
+0000c5d0: 7665 6e74 7329 203d 3d20 320a 6576 656e  vents) == 2.even
+0000c5e0: 7473 5b30 5d2e 6964 203d 3d20 6576 656e  ts[0].id == even
+0000c5f0: 7436 2e69 640a 6576 656e 7473 5b30 5d2e  t6.id.events[0].
+0000c600: 7374 7265 616d 5f70 6f73 6974 696f 6e20  stream_position 
+0000c610: 3d3d 2032 0a65 7665 6e74 735b 305d 2e73  == 2.events[0].s
+0000c620: 7472 6561 6d5f 6e61 6d65 203d 3d20 7374  tream_name == st
+0000c630: 7265 616d 5f6e 616d 6532 0a65 7665 6e74  ream_name2.event
+0000c640: 735b 315d 2e69 6420 3d3d 2065 7665 6e74  s[1].id == event
+0000c650: 3131 2e69 640a 6576 656e 7473 5b31 5d2e  11.id.events[1].
+0000c660: 7374 7265 616d 5f70 6f73 6974 696f 6e20  stream_position 
+0000c670: 3d3d 2033 0a65 7665 6e74 735b 315d 2e73  == 3.events[1].s
+0000c680: 7472 6561 6d5f 6e61 6d65 203d 3d20 7374  tream_name == st
+0000c690: 7265 616d 5f6e 616d 6532 0a60 6060 0a0a  ream_name2.```..
+0000c6a0: 2323 2050 6572 7369 7374 656e 7420 7375  ## Persistent su
+0000c6b0: 6273 6372 6970 7469 6f6e 730a 0a23 2323  bscriptions..###
+0000c6c0: 2043 7265 6174 6520 7375 6273 6372 6970   Create subscrip
+0000c6d0: 7469 6f6e 0a0a 2a72 6571 7569 7265 7320  tion..*requires 
+0000c6e0: 6c65 6164 6572 2a0a 0a54 6865 206d 6574  leader*..The met
+0000c6f0: 686f 6420 6063 7265 6174 655f 7375 6273  hod `create_subs
+0000c700: 6372 6970 7469 6f6e 2829 6020 6361 6e20  cription()` can 
+0000c710: 6265 2075 7365 6420 746f 2063 7265 6174  be used to creat
+0000c720: 6520 610a 2270 6572 7369 7374 656e 7420  e a."persistent 
+0000c730: 7375 6273 6372 6970 7469 6f6e 2220 746f  subscription" to
+0000c740: 2045 7665 6e74 5374 6f72 6544 422e 0a0a   EventStoreDB...
+0000c750: 5468 6973 206d 6574 686f 6420 7461 6b65  This method take
+0000c760: 7320 6120 7265 7175 6972 6564 2060 6772  s a required `gr
+0000c770: 6f75 705f 6e61 6d65 6020 6172 6775 6d65  oup_name` argume
+0000c780: 6e74 2c20 7768 6963 6820 6973 2074 6865  nt, which is the
+0000c790: 0a6e 616d 6520 6f66 2061 2022 6772 6f75  .name of a "grou
+0000c7a0: 7022 206f 6620 636f 6e73 756d 6572 7320  p" of consumers 
+0000c7b0: 6f66 2074 6865 2073 7562 7363 7269 7074  of the subscript
+0000c7c0: 696f 6e2e 0a0a 5468 6973 206d 6574 686f  ion...This metho
+0000c7d0: 6420 616c 736f 2074 616b 6573 2073 6576  d also takes sev
+0000c7e0: 656e 206f 7074 696f 6e61 6c20 6172 6775  en optional argu
+0000c7f0: 6d65 6e74 732c 2060 6672 6f6d 5f65 6e64  ments, `from_end
+0000c800: 602c 2060 636f 6d6d 6974 5f70 6f73 6974  `, `commit_posit
+0000c810: 696f 6e60 2c0a 6066 696c 7465 725f 6578  ion`,.`filter_ex
+0000c820: 636c 7564 6560 2c20 6066 696c 7465 725f  clude`, `filter_
+0000c830: 696e 636c 7564 6560 2c20 6066 696c 7465  include`, `filte
+0000c840: 725f 6279 5f73 7472 6561 6d5f 6e61 6d65  r_by_stream_name
+0000c850: 602c 2060 636f 6e73 756d 6572 5f73 7472  `, `consumer_str
+0000c860: 6174 6567 7960 2c0a 616e 6420 6074 696d  ategy`,.and `tim
+0000c870: 656f 7574 602e 0a0a 5468 6520 6f70 7469  eout`...The opti
+0000c880: 6f6e 616c 2060 6672 6f6d 5f65 6e64 6020  onal `from_end` 
+0000c890: 6172 6775 6d65 6e74 2063 616e 2062 6520  argument can be 
+0000c8a0: 7573 6564 2074 6f20 7370 6563 6966 7920  used to specify 
+0000c8b0: 7468 6174 2074 6865 2067 726f 7570 206f  that the group o
+0000c8c0: 6620 636f 6e73 756d 6572 730a 6f66 2074  f consumers.of t
+0000c8d0: 6865 2073 7562 7363 7269 7074 696f 6e20  he subscription 
+0000c8e0: 7368 6f75 6c64 206f 6e6c 7920 7265 6365  should only rece
+0000c8f0: 6976 6520 6576 656e 7473 2074 6861 7420  ive events that 
+0000c900: 7765 7265 2072 6563 6f72 6465 6420 6166  were recorded af
+0000c910: 7465 7220 7468 6520 7375 6273 6372 6970  ter the subscrip
+0000c920: 7469 6f6e 0a77 6173 2063 7265 6174 6564  tion.was created
+0000c930: 2e0a 0a41 6c74 6572 6e61 7469 7665 6c79  ...Alternatively
+0000c940: 2c20 7468 6520 6f70 7469 6f6e 616c 2060  , the optional `
+0000c950: 636f 6d6d 6974 5f70 6f73 6974 696f 6e60  commit_position`
+0000c960: 2061 7267 756d 656e 7420 6361 6e20 6265   argument can be
+0000c970: 2075 7365 6420 746f 2073 7065 6369 6679   used to specify
+0000c980: 2061 2063 6f6d 6d69 740a 706f 7369 7469   a commit.positi
+0000c990: 6f6e 2066 726f 6d20 7768 6963 6820 636f  on from which co
+0000c9a0: 6d6d 6974 2070 6f73 6974 696f 6e20 7468  mmit position th
+0000c9b0: 6520 6772 6f75 7020 6f66 2063 6f6e 7375  e group of consu
+0000c9c0: 6d65 7273 206f 6620 7468 6520 7375 6273  mers of the subs
+0000c9d0: 6372 6970 7469 6f6e 2073 686f 756c 640a  cription should.
+0000c9e0: 7265 6365 6976 6520 6576 656e 7473 2e20  receive events. 
+0000c9f0: 506c 6561 7365 206e 6f74 652c 2074 6865  Please note, the
+0000ca00: 2072 6563 6f72 6465 6420 6576 656e 7420   recorded event 
+0000ca10: 6174 2074 6865 2073 7065 6369 6669 6564  at the specified
+0000ca20: 2063 6f6d 6d69 7420 706f 7369 7469 6f6e   commit position
+0000ca30: 206d 6967 6874 0a62 6520 696e 636c 7564   might.be includ
+0000ca40: 6564 2069 6e20 7468 6520 7265 636f 7264  ed in the record
+0000ca50: 6564 2065 7665 6e74 7320 7265 6365 6976  ed events receiv
+0000ca60: 6564 2062 7920 7468 6520 6772 6f75 7020  ed by the group 
+0000ca70: 6f66 2063 6f6e 7375 6d65 7273 2e0a 0a49  of consumers...I
+0000ca80: 6620 6e65 6974 6865 7220 6066 726f 6d5f  f neither `from_
+0000ca90: 656e 6460 206f 7220 6063 6f6d 6d69 745f  end` or `commit_
+0000caa0: 706f 7369 7469 6f6e 6020 6172 6520 7370  position` are sp
+0000cab0: 6563 6966 6965 642c 2074 6865 2067 726f  ecified, the gro
+0000cac0: 7570 206f 6620 636f 6e73 756d 6572 730a  up of consumers.
+0000cad0: 6f66 2074 6865 2073 7562 7363 7269 7074  of the subscript
+0000cae0: 696f 6e20 7769 6c6c 2070 6f74 656e 7469  ion will potenti
+0000caf0: 616c 6c79 2072 6563 6569 7665 2061 6c6c  ally receive all
+0000cb00: 2072 6563 6f72 6465 6420 6576 656e 7473   recorded events
+0000cb10: 2069 6e20 7468 6520 6461 7461 6261 7365   in the database
+0000cb20: 2e0a 0a54 6865 206f 7074 696f 6e61 6c20  ...The optional 
+0000cb30: 6066 696c 7465 725f 6578 636c 7564 6560  `filter_exclude`
+0000cb40: 2061 7267 756d 656e 7420 6973 2061 2073   argument is a s
+0000cb50: 6571 7565 6e63 6520 6f66 2072 6567 756c  equence of regul
+0000cb60: 6172 2065 7870 7265 7373 696f 6e73 2074  ar expressions t
+0000cb70: 6861 740a 6d61 7463 6820 7265 636f 7264  hat.match record
+0000cb80: 6564 2065 7665 6e74 7320 7468 6174 2073  ed events that s
+0000cb90: 686f 756c 6420 6e6f 7420 6265 2069 6e63  hould not be inc
+0000cba0: 6c75 6465 642e 2054 6869 7320 6172 6775  luded. This argu
+0000cbb0: 6d65 6e74 2069 7320 6967 6e6f 7265 640a  ment is ignored.
+0000cbc0: 6966 2060 6669 6c74 6572 5f69 6e63 6c75  if `filter_inclu
+0000cbd0: 6465 6020 6973 2073 6574 2074 6f20 6120  de` is set to a 
+0000cbe0: 6e6f 6e2d 656d 7074 7920 7365 7175 656e  non-empty sequen
+0000cbf0: 6365 2e20 4279 2064 6566 6175 6c74 2c20  ce. By default, 
+0000cc00: 7468 6973 2061 7267 756d 656e 7420 6973  this argument is
+0000cc10: 2073 6574 0a74 6f20 6d61 7463 6820 7468   set.to match th
+0000cc20: 6520 6576 656e 7420 7479 7065 7320 6f66  e event types of
+0000cc30: 2022 7379 7374 656d 2065 7665 6e74 7322   "system events"
+0000cc40: 2c20 736f 2074 6861 7420 4576 656e 7453  , so that EventS
+0000cc50: 746f 7265 4442 2073 7973 7465 6d20 6576  toreDB system ev
+0000cc60: 656e 7473 0a77 696c 6c20 6e6f 7420 6e6f  ents.will not no
+0000cc70: 726d 616c 6c79 2062 6520 7265 6365 6976  rmally be receiv
+0000cc80: 6564 2e20 5365 6520 7468 6520 4e6f 7465  ed. See the Note
+0000cc90: 7320 7365 6374 696f 6e20 6265 6c6f 7720  s section below 
+0000cca0: 666f 7220 6d6f 7265 2069 6e66 6f72 6d61  for more informa
+0000ccb0: 7469 6f6e 0a61 626f 7574 2066 696c 7465  tion.about filte
+0000ccc0: 7220 6578 7072 6573 7369 6f6e 732e 0a0a  r expressions...
+0000ccd0: 5468 6520 6f70 7469 6f6e 616c 2060 6669  The optional `fi
+0000cce0: 6c74 6572 5f69 6e63 6c75 6465 6020 6172  lter_include` ar
+0000ccf0: 6775 6d65 6e74 2069 7320 6120 7365 7175  gument is a sequ
+0000cd00: 656e 6365 206f 6620 7265 6775 6c61 7220  ence of regular 
+0000cd10: 6578 7072 6573 7369 6f6e 730a 7468 6174  expressions.that
+0000cd20: 206d 6174 6368 2072 6563 6f72 6465 6420   match recorded 
+0000cd30: 6576 656e 7473 2074 6861 7420 7368 6f75  events that shou
+0000cd40: 6c64 2062 6520 7265 6365 6976 6564 2e20  ld be received. 
+0000cd50: 4279 2064 6566 6175 6c74 2c20 7468 6973  By default, this
+0000cd60: 2061 7267 756d 656e 740a 6973 2061 6e20   argument.is an 
+0000cd70: 656d 7074 7920 7475 706c 652e 2049 6620  empty tuple. If 
+0000cd80: 7468 6973 2061 7267 756d 656e 7420 6973  this argument is
+0000cd90: 2073 6574 2074 6f20 6120 6e6f 6e2d 656d   set to a non-em
+0000cda0: 7074 7920 7365 7175 656e 6365 2c20 7468  pty sequence, th
+0000cdb0: 650a 6066 696c 7465 725f 6578 636c 7564  e.`filter_exclud
+0000cdc0: 6560 2061 7267 756d 656e 7420 6973 2069  e` argument is i
+0000cdd0: 676e 6f72 6564 2e0a 0a54 6865 206f 7074  gnored...The opt
+0000cde0: 696f 6e61 6c20 6066 696c 7465 725f 6279  ional `filter_by
+0000cdf0: 5f73 7472 6561 6d5f 6e61 6d65 6020 6172  _stream_name` ar
+0000ce00: 6775 6d65 6e74 2069 7320 6120 626f 6f6c  gument is a bool
+0000ce10: 6561 6e20 7661 6c75 6520 7468 6174 2069  ean value that i
+0000ce20: 6e64 6963 6174 6573 2077 6865 7468 6572  ndicates whether
+0000ce30: 0a74 6865 2066 696c 7465 7220 7769 6c6c  .the filter will
+0000ce40: 2061 7070 6c79 2074 6f20 6576 656e 7420   apply to event 
+0000ce50: 7479 7065 7320 6f72 2073 7472 6561 6d20  types or stream 
+0000ce60: 6e61 6d65 732e 2042 7920 6465 6661 756c  names. By defaul
+0000ce70: 742c 2074 6869 7320 7661 6c75 6520 6973  t, this value is
+0000ce80: 2060 4661 6c73 6560 0a61 6e64 2073 6f20   `False`.and so 
+0000ce90: 7468 6520 6669 6c74 6572 696e 6720 7769  the filtering wi
+0000cea0: 6c6c 2061 7070 6c79 2074 6f20 7468 6520  ll apply to the 
+0000ceb0: 6576 656e 7420 7479 7065 2073 7472 696e  event type strin
+0000cec0: 6773 206f 6620 7265 636f 7264 6564 2065  gs of recorded e
+0000ced0: 7665 6e74 732e 0a0a 5468 6520 6f70 7469  vents...The opti
+0000cee0: 6f6e 616c 2060 636f 6e73 756d 6572 5f73  onal `consumer_s
+0000cef0: 7472 6174 6567 7960 2061 7267 756d 656e  trategy` argumen
+0000cf00: 7420 6973 2061 2050 7974 686f 6e20 6073  t is a Python `s
+0000cf10: 7472 6020 7468 6174 2064 6566 696e 6573  tr` that defines
+0000cf20: 0a74 6865 2063 6f6e 7375 6d65 7220 7374  .the consumer st
+0000cf30: 7261 7465 6779 2066 6f72 2074 6869 7320  rategy for this 
+0000cf40: 7065 7273 6973 7465 6e74 2073 7562 7363  persistent subsc
+0000cf50: 7269 7074 696f 6e2e 2054 6865 2076 616c  ription. The val
+0000cf60: 7565 206f 6620 7468 6973 2061 7267 756d  ue of this argum
+0000cf70: 656e 740a 6361 6e20 6265 2060 2744 6973  ent.can be `'Dis
+0000cf80: 7061 7463 6854 6f53 696e 676c 6527 602c  patchToSingle'`,
+0000cf90: 2060 2752 6f75 6e64 526f 6269 6e27 602c   `'RoundRobin'`,
+0000cfa0: 2060 2750 696e 6e65 6427 602c 206f 7220   `'Pinned'`, or 
+0000cfb0: 6027 5069 6e6e 6564 4279 436f 7272 656c  `'PinnedByCorrel
+0000cfc0: 6174 696f 6e27 602e 2054 6865 0a64 6566  ation'`. The.def
+0000cfd0: 6175 6c74 2076 616c 7565 2069 7320 6027  ault value is `'
+0000cfe0: 4469 7370 6174 6368 546f 5369 6e67 6c65  DispatchToSingle
+0000cff0: 2760 2e0a 0a54 6865 206f 7074 696f 6e61  '`...The optiona
+0000d000: 6c20 6074 696d 656f 7574 6020 6172 6775  l `timeout` argu
+0000d010: 6d65 6e74 2069 7320 6120 5079 7468 6f6e  ment is a Python
+0000d020: 2060 666c 6f61 7460 2077 6869 6368 2073   `float` which s
+0000d030: 6574 7320 610a 6465 6164 6c69 6e65 2066  ets a.deadline f
+0000d040: 6f72 2074 6865 2063 6f6d 706c 6574 696f  or the completio
+0000d050: 6e20 6f66 2074 6865 2067 5250 4320 6f70  n of the gRPC op
+0000d060: 6572 6174 696f 6e2e 0a0a 5468 6520 6d65  eration...The me
+0000d070: 7468 6f64 2060 6372 6561 7465 5f73 7562  thod `create_sub
+0000d080: 7363 7269 7074 696f 6e28 2960 2064 6f65  scription()` doe
+0000d090: 7320 6e6f 7420 7265 7475 726e 2061 2076  s not return a v
+0000d0a0: 616c 7565 2c20 6265 6361 7573 650a 7265  alue, because.re
+0000d0b0: 636f 7264 6564 2065 7665 6e74 7320 6172  corded events ar
+0000d0c0: 6520 6f62 7461 696e 6564 2062 7920 7468  e obtained by th
+0000d0d0: 6520 6772 6f75 7020 6f66 2063 6f6e 7375  e group of consu
+0000d0e0: 6d65 7273 206f 6620 7468 6520 7375 6273  mers of the subs
+0000d0f0: 6372 6970 7469 6f6e 0a75 7369 6e67 2074  cription.using t
+0000d100: 6865 2060 7265 6164 5f73 7562 7363 7269  he `read_subscri
+0000d110: 7074 696f 6e28 2960 206d 6574 686f 642e  ption()` method.
+0000d120: 0a0a 496e 2074 6865 2065 7861 6d70 6c65  ..In the example
+0000d130: 2062 656c 6f77 2c20 6120 7065 7273 6973   below, a persis
+0000d140: 7465 6e74 2073 7562 7363 7269 7074 696f  tent subscriptio
+0000d150: 6e20 6973 2063 7265 6174 6564 2e0a 0a60  n is created...`
+0000d160: 6060 7079 7468 6f6e 0a23 2043 7265 6174  ``python.# Creat
+0000d170: 6520 6120 7065 7273 6973 7465 6e74 2073  e a persistent s
+0000d180: 7562 7363 7269 7074 696f 6e2e 0a67 726f  ubscription..gro
+0000d190: 7570 5f6e 616d 6520 3d20 6622 6772 6f75  up_name = f"grou
+0000d1a0: 702d 7b75 7569 6434 2829 7d22 0a63 6c69  p-{uuid4()}".cli
+0000d1b0: 656e 742e 6372 6561 7465 5f73 7562 7363  ent.create_subsc
+0000d1c0: 7269 7074 696f 6e28 6772 6f75 705f 6e61  ription(group_na
+0000d1d0: 6d65 3d67 726f 7570 5f6e 616d 6529 0a60  me=group_name).`
+0000d1e0: 6060 0a0a 2323 2320 5265 6164 2073 7562  ``..### Read sub
+0000d1f0: 7363 7269 7074 696f 6e0a 0a2a 7265 7175  scription..*requ
+0000d200: 6972 6573 206c 6561 6465 722a 0a0a 5468  ires leader*..Th
+0000d210: 6520 6d65 7468 6f64 2060 7265 6164 5f73  e method `read_s
+0000d220: 7562 7363 7269 7074 696f 6e28 2960 2063  ubscription()` c
+0000d230: 616e 2062 6520 7573 6564 2062 7920 6120  an be used by a 
+0000d240: 6772 6f75 7020 6f66 2063 6f6e 7375 6d65  group of consume
+0000d250: 7273 2074 6f20 7265 6365 6976 650a 7265  rs to receive.re
+0000d260: 636f 7264 6564 2065 7665 6e74 7320 6672  corded events fr
+0000d270: 6f6d 2061 2070 6572 7369 7374 656e 7420  om a persistent 
+0000d280: 7375 6273 6372 6970 7469 6f6e 2063 7265  subscription cre
+0000d290: 6174 6564 2075 7369 6e67 2060 6372 6561  ated using `crea
+0000d2a0: 7465 5f73 7562 7363 7269 7074 696f 6e60  te_subscription`
+0000d2b0: 2e0a 0a54 6869 7320 6d65 7468 6f64 2074  ...This method t
+0000d2c0: 616b 6573 2061 2072 6571 7569 7265 6420  akes a required 
+0000d2d0: 6067 726f 7570 5f6e 616d 6560 2061 7267  `group_name` arg
+0000d2e0: 756d 656e 742c 2077 6869 6368 2069 730a  ument, which is.
+0000d2f0: 7468 6520 6e61 6d65 206f 6620 6120 2267  the name of a "g
+0000d300: 726f 7570 2220 6f66 2063 6f6e 7375 6d65  roup" of consume
+0000d310: 7273 206f 6620 7468 6520 7375 6273 6372  rs of the subscr
+0000d320: 6970 7469 6f6e 2073 7065 6369 6669 6564  iption specified
+0000d330: 0a77 6865 6e20 6063 7265 6174 655f 7375  .when `create_su
+0000d340: 6273 6372 6970 7469 6f6e 2829 6020 7761  bscription()` wa
+0000d350: 7320 6361 6c6c 6564 2e0a 0a54 6869 7320  s called...This 
+0000d360: 6d65 7468 6f64 2061 6c73 6f20 7461 6b65  method also take
+0000d370: 7320 616e 206f 7074 696f 6e61 6c20 6074  s an optional `t
+0000d380: 696d 656f 7574 6020 6172 6775 6d65 6e74  imeout` argument
+0000d390: 2c20 7468 6174 0a69 7320 6578 7065 6374  , that.is expect
+0000d3a0: 6564 2074 6f20 6265 2061 2050 7974 686f  ed to be a Pytho
+0000d3b0: 6e20 6066 6c6f 6174 602c 2077 6869 6368  n `float`, which
+0000d3c0: 2073 6574 7320 6120 6465 6164 6c69 6e65   sets a deadline
+0000d3d0: 0a66 6f72 2074 6865 2063 6f6d 706c 6574  .for the complet
+0000d3e0: 696f 6e20 6f66 2074 6865 2067 5250 4320  ion of the gRPC 
+0000d3f0: 6f70 6572 6174 696f 6e2e 0a0a 5468 6973  operation...This
+0000d400: 206d 6574 686f 6420 7265 7475 726e 7320   method returns 
+0000d410: 6120 322d 7475 706c 653a 2061 2022 7265  a 2-tuple: a "re
+0000d420: 6164 2072 6571 7565 7374 2220 6f62 6a65  ad request" obje
+0000d430: 6374 2061 6e64 2061 2022 7265 6164 2072  ct and a "read r
+0000d440: 6573 706f 6e73 6522 206f 626a 6563 742e  esponse" object.
+0000d450: 0a0a 6060 6070 7974 686f 6e0a 7265 6164  ..```python.read
+0000d460: 5f72 6571 2c20 7265 6164 5f72 6573 7020  _req, read_resp 
+0000d470: 3d20 636c 6965 6e74 2e72 6561 645f 7375  = client.read_su
+0000d480: 6273 6372 6970 7469 6f6e 2867 726f 7570  bscription(group
+0000d490: 5f6e 616d 653d 6772 6f75 705f 6e61 6d65  _name=group_name
+0000d4a0: 290a 6060 600a 0a54 6865 2022 7265 6164  ).```..The "read
+0000d4b0: 2072 6573 706f 6e73 6522 206f 626a 6563   response" objec
+0000d4c0: 7420 6973 2061 6e20 6974 6572 6174 6f72  t is an iterator
+0000d4d0: 2074 6861 7420 7969 656c 6473 2072 6563   that yields rec
+0000d4e0: 6f72 6465 6420 6576 656e 7473 2066 726f  orded events fro
+0000d4f0: 6d0a 7468 6520 7370 6563 6966 6965 6420  m.the specified 
+0000d500: 636f 6d6d 6974 2070 6f73 6974 696f 6e2e  commit position.
+0000d510: 0a0a 5468 6520 2272 6561 6420 7265 7175  ..The "read requ
+0000d520: 6573 7422 206f 626a 6563 7420 6861 7320  est" object has 
+0000d530: 616e 2060 6163 6b28 2960 206d 6574 686f  an `ack()` metho
+0000d540: 6420 7468 6174 2073 686f 756c 6420 6265  d that should be
+0000d550: 2075 7365 6420 6279 2061 2063 6f6e 7375   used by a consu
+0000d560: 6d65 720a 696e 2061 2067 726f 7570 2074  mer.in a group t
+0000d570: 6f20 6163 6b6e 6f77 6c65 6467 6520 746f  o acknowledge to
+0000d580: 2074 6865 2073 6572 7665 7220 7468 6174   the server that
+0000d590: 2069 7420 6861 7320 7265 6365 6976 6564   it has received
+0000d5a0: 2061 6e64 2073 7563 6365 7373 6675 6c6c   and successfull
+0000d5b0: 790a 7072 6f63 6573 7365 6420 6120 7265  y.processed a re
+0000d5c0: 636f 7264 6564 2065 7665 6e74 2e20 5468  corded event. Th
+0000d5d0: 6973 2077 696c 6c20 7072 6576 656e 7420  is will prevent 
+0000d5e0: 7468 6174 2072 6563 6f72 6465 6420 6576  that recorded ev
+0000d5f0: 656e 7420 6265 696e 6720 7265 6365 6976  ent being receiv
+0000d600: 6564 0a62 7920 616e 6f74 6865 7220 636f  ed.by another co
+0000d610: 6e73 756d 6572 2069 6e20 7468 6520 7361  nsumer in the sa
+0000d620: 6d65 2067 726f 7570 2e20 5468 6520 6061  me group. The `a
+0000d630: 636b 2829 6020 6d65 7468 6f64 2074 616b  ck()` method tak
+0000d640: 6573 2061 6e20 6065 7665 6e74 5f69 6460  es an `event_id`
+0000d650: 0a61 7267 756d 656e 742c 2077 6869 6368  .argument, which
+0000d660: 2069 7320 7468 6520 4944 206f 6620 7468   is the ID of th
+0000d670: 6520 7265 636f 7264 6564 2065 7665 6e74  e recorded event
+0000d680: 2074 6861 7420 6861 7320 6265 656e 2072   that has been r
+0000d690: 6563 6569 7665 642e 0a0a 5468 6520 2272  eceived...The "r
+0000d6a0: 6561 6420 7265 7175 6573 7422 206f 626a  ead request" obj
+0000d6b0: 6563 7420 616c 736f 2068 6173 2061 6e20  ect also has an 
+0000d6c0: 606e 6163 6b28 2960 206d 6574 686f 6420  `nack()` method 
+0000d6d0: 7468 6174 2073 686f 756c 6420 6265 2075  that should be u
+0000d6e0: 7365 6420 6279 2061 2063 6f6e 7375 6d65  sed by a consume
+0000d6f0: 720a 696e 2061 2067 726f 7570 2074 6f20  r.in a group to 
+0000d700: 6e65 6761 7469 7665 6c79 2061 636b 6e6f  negatively ackno
+0000d710: 776c 6564 6765 2074 6f20 7468 6520 7365  wledge to the se
+0000d720: 7276 6572 2074 6861 7420 6974 2068 6173  rver that it has
+0000d730: 2072 6563 6569 7665 6420 6275 7420 6e6f   received but no
+0000d740: 740a 7375 6363 6573 7366 756c 6c79 2070  t.successfully p
+0000d750: 726f 6365 7373 6564 2061 2072 6563 6f72  rocessed a recor
+0000d760: 6465 6420 6576 656e 742e 2054 6865 2060  ded event. The `
+0000d770: 6e61 636b 2829 6020 6d65 7468 6f64 2074  nack()` method t
+0000d780: 616b 6573 2061 6e20 6065 7665 6e74 5f69  akes an `event_i
+0000d790: 6460 0a61 7267 756d 656e 742c 2077 6869  d`.argument, whi
+0000d7a0: 6368 2069 7320 7468 6520 4944 206f 6620  ch is the ID of 
+0000d7b0: 7468 6520 7265 636f 7264 6564 2065 7665  the recorded eve
+0000d7c0: 6e74 2074 6861 7420 6861 7320 6265 656e  nt that has been
+0000d7d0: 2072 6563 6569 7665 642c 2061 6e64 2061   received, and a
+0000d7e0: 6e0a 6061 6374 696f 6e60 2061 7267 756d  n.`action` argum
+0000d7f0: 656e 742c 2077 6869 6368 2073 686f 756c  ent, which shoul
+0000d800: 6420 6265 2061 2050 7974 686f 6e20 6073  d be a Python `s
+0000d810: 7472 602c 2065 6974 6865 7220 6027 756e  tr`, either `'un
+0000d820: 6b6e 6f77 6e27 602c 2060 2770 6172 6b27  known'`, `'park'
+0000d830: 602c 0a60 2772 6574 7279 2760 2c20 6027  `,.`'retry'`, `'
+0000d840: 736b 6970 2760 2c20 6f72 2060 2773 746f  skip'`, or `'sto
+0000d850: 7027 602e 0a0a 5468 6520 6578 616d 706c  p'`...The exampl
+0000d860: 6520 6265 6c6f 7720 6974 6572 6174 6573  e below iterates
+0000d870: 206f 7665 7220 7468 6520 2272 6561 6420   over the "read 
+0000d880: 7265 7370 6f6e 7365 2220 6f62 6a65 6374  response" object
+0000d890: 2c20 616e 6420 6361 6c6c 7320 6061 636b  , and calls `ack
+0000d8a0: 2829 600a 6f6e 2074 6865 2022 7265 6164  ()`.on the "read
+0000d8b0: 2072 6573 706f 6e73 6522 206f 626a 6563   response" objec
+0000d8c0: 742e 2054 6865 2066 6f72 206c 6f6f 7020  t. The for loop 
+0000d8d0: 6272 6561 6b73 2077 6865 6e20 7765 2068  breaks when we h
+0000d8e0: 6176 6520 7265 6365 6976 6564 0a74 6865  ave received.the
+0000d8f0: 206c 6173 7420 6576 656e 742c 2073 6f20   last event, so 
+0000d900: 7468 6174 2077 6520 6361 6e20 636f 6e74  that we can cont
+0000d910: 696e 7565 2077 6974 6820 7468 6520 6578  inue with the ex
+0000d920: 616d 706c 6573 2062 656c 6f77 2e0a 0a60  amples below...`
+0000d930: 6060 7079 7468 6f6e 0a65 7665 6e74 7320  ``python.events 
+0000d940: 3d20 5b5d 0a66 6f72 2065 7665 6e74 2069  = [].for event i
+0000d950: 6e20 7265 6164 5f72 6573 703a 0a20 2020  n read_resp:.   
+0000d960: 2065 7665 6e74 732e 6170 7065 6e64 2865   events.append(e
+0000d970: 7665 6e74 290a 0a20 2020 2023 2041 636b  vent)..    # Ack
+0000d980: 6e6f 776c 6564 6765 2074 6865 2072 6563  nowledge the rec
+0000d990: 6569 7665 6420 6576 656e 742e 0a20 2020  eived event..   
+0000d9a0: 2072 6561 645f 7265 712e 6163 6b28 6576   read_req.ack(ev
+0000d9b0: 656e 745f 6964 3d65 7665 6e74 2e69 6429  ent_id=event.id)
+0000d9c0: 0a0a 2020 2020 2320 4272 6561 6b20 7768  ..    # Break wh
+0000d9d0: 656e 2074 6865 206c 6173 7420 6576 656e  en the last even
+0000d9e0: 7420 6861 7320 6265 656e 2072 6563 6569  t has been recei
+0000d9f0: 7665 642e 0a20 2020 2069 6620 6576 656e  ved..    if even
+0000da00: 742e 6964 203d 3d20 6576 656e 7431 312e  t.id == event11.
+0000da10: 6964 3a0a 2020 2020 2020 2020 6272 6561  id:.        brea
+0000da20: 6b0a 6060 600a 0a54 6865 2072 6563 6569  k.```..The recei
+0000da30: 7665 6420 6576 656e 7473 2061 7265 2074  ved events are t
+0000da40: 6865 2065 7665 6e74 7320 7765 2061 7070  he events we app
+0000da50: 656e 6465 6420 6162 6f76 652e 0a0a 6060  ended above...``
+0000da60: 6070 7974 686f 6e0a 6173 7365 7274 2065  `python.assert e
+0000da70: 7665 6e74 735b 2d31 315d 2e69 6420 3d3d  vents[-11].id ==
+0000da80: 2065 7665 6e74 312e 6964 0a61 7373 6572   event1.id.asser
+0000da90: 7420 6576 656e 7473 5b2d 3130 5d2e 6964  t events[-10].id
+0000daa0: 203d 3d20 6576 656e 7432 2e69 640a 6173   == event2.id.as
+0000dab0: 7365 7274 2065 7665 6e74 735b 2d39 5d2e  sert events[-9].
+0000dac0: 6964 203d 3d20 6576 656e 7433 2e69 640a  id == event3.id.
+0000dad0: 6173 7365 7274 2065 7665 6e74 735b 2d38  assert events[-8
+0000dae0: 5d2e 6964 203d 3d20 6576 656e 7434 2e69  ].id == event4.i
+0000daf0: 640a 6173 7365 7274 2065 7665 6e74 735b  d.assert events[
+0000db00: 2d37 5d2e 6964 203d 3d20 6576 656e 7435  -7].id == event5
+0000db10: 2e69 640a 6173 7365 7274 2065 7665 6e74  .id.assert event
+0000db20: 735b 2d36 5d2e 6964 203d 3d20 6576 656e  s[-6].id == even
+0000db30: 7436 2e69 640a 6173 7365 7274 2065 7665  t6.id.assert eve
+0000db40: 6e74 735b 2d35 5d2e 6964 203d 3d20 6576  nts[-5].id == ev
+0000db50: 656e 7437 2e69 640a 6173 7365 7274 2065  ent7.id.assert e
+0000db60: 7665 6e74 735b 2d34 5d2e 6964 203d 3d20  vents[-4].id == 
+0000db70: 6576 656e 7438 2e69 640a 6173 7365 7274  event8.id.assert
+0000db80: 2065 7665 6e74 735b 2d33 5d2e 6964 203d   events[-3].id =
+0000db90: 3d20 6576 656e 7439 2e69 640a 6173 7365  = event9.id.asse
+0000dba0: 7274 2065 7665 6e74 735b 2d32 5d2e 6964  rt events[-2].id
+0000dbb0: 203d 3d20 6576 656e 7431 302e 6964 0a61   == event10.id.a
+0000dbc0: 7373 6572 7420 6576 656e 7473 5b2d 315d  ssert events[-1]
+0000dbd0: 2e69 6420 3d3d 2065 7665 6e74 3131 2e69  .id == event11.i
+0000dbe0: 640a 6060 600a 0a54 6865 2022 7265 6164  d.```..The "read
+0000dbf0: 2072 6571 7565 7374 2220 6f62 6a65 6374   request" object
+0000dc00: 2061 6c73 6f20 6861 7320 616e 2060 6e61   also has an `na
+0000dc10: 636b 2829 6020 6d65 7468 6f64 2074 6861  ck()` method tha
+0000dc20: 7420 6361 6e20 6265 2075 7365 6420 6279  t can be used by
+0000dc30: 2061 2063 6f6e 7375 6d65 720a 696e 2061   a consumer.in a
+0000dc40: 2067 726f 7570 2074 6f20 6163 6b6e 6f77   group to acknow
+0000dc50: 6c65 6467 6520 746f 2074 6865 2073 6572  ledge to the ser
+0000dc60: 7665 7220 7468 6174 2069 7420 6861 7320  ver that it has 
+0000dc70: 6661 696c 6564 2073 7563 6365 7373 6675  failed successfu
+0000dc80: 6c6c 7920 746f 0a70 726f 6365 7373 2061  lly to.process a
+0000dc90: 2072 6563 6f72 6465 6420 6576 656e 742e   recorded event.
+0000dca0: 2054 6869 7320 7769 6c6c 2061 6c6c 6f77   This will allow
+0000dcb0: 2074 6861 7420 7265 636f 7264 6564 2065   that recorded e
+0000dcc0: 7665 6e74 2074 6f20 6265 2072 6563 6569  vent to be recei
+0000dcd0: 7665 640a 6279 2074 6869 7320 6f72 2061  ved.by this or a
+0000dce0: 6e6f 7468 6572 2063 6f6e 7375 6d65 7220  nother consumer 
+0000dcf0: 696e 2074 6865 2073 616d 6520 6772 6f75  in the same grou
+0000dd00: 702e 0a0a 4974 206d 6967 6874 2062 6520  p...It might be 
+0000dd10: 6d6f 7265 2075 7365 6675 6c20 746f 2065  more useful to e
+0000dd20: 6e63 6170 7375 6c61 7465 2074 6865 2072  ncapsulate the r
+0000dd30: 6571 7565 7374 2061 6e64 2072 6573 706f  equest and respo
+0000dd40: 6e73 6520 6f62 6a65 6374 7320 616e 6420  nse objects and 
+0000dd50: 746f 2069 7465 7261 7465 0a6f 7665 7220  to iterate.over 
+0000dd60: 7468 6520 2272 6561 6420 7265 7370 6f6e  the "read respon
+0000dd70: 7365 2220 696e 2061 2073 6570 6172 6174  se" in a separat
+0000dd80: 6520 7468 7265 6164 2c20 746f 2063 616c  e thread, to cal
+0000dd90: 6c20 6261 636b 2074 6f20 6120 6861 6e64  l back to a hand
+0000dda0: 6c65 7220 6675 6e63 7469 6f6e 2077 6865  ler function whe
+0000ddb0: 6e0a 6120 7265 636f 7264 6564 2065 7665  n.a recorded eve
+0000ddc0: 6e74 2069 7320 7265 6365 6976 6564 2c20  nt is received, 
+0000ddd0: 616e 6420 6361 6c6c 2060 6163 6b28 2960  and call `ack()`
+0000dde0: 2069 6620 7468 6520 6861 6e64 6c65 7220   if the handler 
+0000ddf0: 646f 6573 206e 6f74 2072 6169 7365 2061  does not raise a
+0000de00: 6e0a 6578 6365 7074 696f 6e2c 2061 6e64  n.exception, and
+0000de10: 2074 6f20 6361 6c6c 2060 6e61 636b 2829   to call `nack()
+0000de20: 6020 6966 2061 6e20 6578 6365 7074 696f  ` if an exceptio
+0000de30: 6e20 6973 2072 6169 7365 642e 2054 6865  n is raised. The
+0000de40: 2065 7861 6d70 6c65 2062 656c 6f77 2073   example below s
+0000de50: 686f 7773 2068 6f77 0a74 6869 7320 6d69  hows how.this mi
+0000de60: 6768 7420 6265 2064 6f6e 652e 0a0a 6060  ght be done...``
+0000de70: 6070 7974 686f 6e0a 6672 6f6d 2074 6872  `python.from thr
+0000de80: 6561 6469 6e67 2069 6d70 6f72 7420 5468  eading import Th
+0000de90: 7265 6164 0a0a 0a63 6c61 7373 2053 7562  read...class Sub
+0000dea0: 7363 7269 7074 696f 6e52 6561 6465 723a  scriptionReader:
+0000deb0: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
+0000dec0: 5f28 7365 6c66 2c20 636c 6965 6e74 2c20  _(self, client, 
+0000ded0: 6772 6f75 705f 6e61 6d65 2c20 6361 6c6c  group_name, call
+0000dee0: 6261 636b 293a 0a20 2020 2020 2020 2073  back):.        s
+0000def0: 656c 662e 636c 6965 6e74 203d 2063 6c69  elf.client = cli
+0000df00: 656e 740a 2020 2020 2020 2020 7365 6c66  ent.        self
+0000df10: 2e67 726f 7570 5f6e 616d 6520 3d20 6772  .group_name = gr
+0000df20: 6f75 705f 6e61 6d65 0a20 2020 2020 2020  oup_name.       
+0000df30: 2073 656c 662e 6361 6c6c 6261 636b 203d   self.callback =
+0000df40: 2063 616c 6c62 6163 6b0a 2020 2020 2020   callback.      
+0000df50: 2020 7365 6c66 2e74 6872 6561 6420 3d20    self.thread = 
+0000df60: 5468 7265 6164 2874 6172 6765 743d 7365  Thread(target=se
+0000df70: 6c66 2e72 6561 645f 7375 6273 6372 6970  lf.read_subscrip
+0000df80: 7469 6f6e 2c20 6461 656d 6f6e 3d54 7275  tion, daemon=Tru
+0000df90: 6529 0a20 2020 2020 2020 2073 656c 662e  e).        self.
+0000dfa0: 6572 726f 7220 3d20 4e6f 6e65 0a0a 2020  error = None..  
+0000dfb0: 2020 6465 6620 7374 6172 7428 7365 6c66    def start(self
+0000dfc0: 293a 0a20 2020 2020 2020 2073 656c 662e  ):.        self.
+0000dfd0: 7468 7265 6164 2e73 7461 7274 2829 0a0a  thread.start()..
+0000dfe0: 2020 2020 6465 6620 6a6f 696e 2873 656c      def join(sel
+0000dff0: 6629 3a0a 2020 2020 2020 2020 7365 6c66  f):.        self
+0000e000: 2e74 6872 6561 642e 6a6f 696e 2829 0a0a  .thread.join()..
+0000e010: 2020 2020 6465 6620 7265 6164 5f73 7562      def read_sub
+0000e020: 7363 7269 7074 696f 6e28 7365 6c66 293a  scription(self):
+0000e030: 0a20 2020 2020 2020 2072 6571 2c20 7265  .        req, re
+0000e040: 7370 203d 2073 656c 662e 636c 6965 6e74  sp = self.client
+0000e050: 2e72 6561 645f 7375 6273 6372 6970 7469  .read_subscripti
+0000e060: 6f6e 2867 726f 7570 5f6e 616d 653d 7365  on(group_name=se
+0000e070: 6c66 2e67 726f 7570 5f6e 616d 6529 0a20  lf.group_name). 
+0000e080: 2020 2020 2020 2066 6f72 2065 7665 6e74         for event
+0000e090: 2069 6e20 7265 7370 3a0a 2020 2020 2020   in resp:.      
+0000e0a0: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
+0000e0b0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000e0c0: 6361 6c6c 6261 636b 2865 7665 6e74 290a  callback(event).
+0000e0d0: 2020 2020 2020 2020 2020 2020 6578 6365              exce
+0000e0e0: 7074 2045 7863 6570 7469 6f6e 2061 7320  pt Exception as 
+0000e0f0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0000e100: 2020 2023 2072 6571 2e6e 6163 6b28 6576     # req.nack(ev
+0000e110: 656e 742e 6964 2920 2023 206e 6f74 2079  ent.id)  # not y
+0000e120: 6574 2069 6d70 6c65 6d65 6e74 6564 2e2e  et implemented..
+0000e130: 2e2e 0a20 2020 2020 2020 2020 2020 2020  ...             
+0000e140: 2020 2073 656c 662e 6572 726f 7220 3d20     self.error = 
+0000e150: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+0000e160: 2020 6272 6561 6b0a 2020 2020 2020 2020    break.        
+0000e170: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0000e180: 2020 2020 2020 2020 2020 7265 712e 6163            req.ac
+0000e190: 6b28 6576 656e 742e 6964 290a 0a0a 2320  k(event.id)...# 
+0000e1a0: 4372 6561 7465 2061 6e6f 7468 6572 2070  Create another p
+0000e1b0: 6572 7369 7374 656e 7420 7375 6273 6372  ersistent subscr
+0000e1c0: 6970 7469 6f6e 2e0a 6772 6f75 705f 6e61  iption..group_na
+0000e1d0: 6d65 203d 2066 2267 726f 7570 2d7b 7575  me = f"group-{uu
+0000e1e0: 6964 3428 297d 220a 636c 6965 6e74 2e63  id4()}".client.c
+0000e1f0: 7265 6174 655f 7375 6273 6372 6970 7469  reate_subscripti
+0000e200: 6f6e 2867 726f 7570 5f6e 616d 653d 6772  on(group_name=gr
+0000e210: 6f75 705f 6e61 6d65 290a 0a65 7665 6e74  oup_name)..event
+0000e220: 7320 3d20 5b5d 0a0a 6465 6620 6861 6e64  s = []..def hand
+0000e230: 6c65 5f65 7665 6e74 2865 7665 6e74 293a  le_event(event):
+0000e240: 0a20 2020 2065 7665 6e74 732e 6170 7065  .    events.appe
+0000e250: 6e64 2865 7665 6e74 290a 2020 2020 6966  nd(event).    if
+0000e260: 2065 7665 6e74 2e69 6420 3d3d 2065 7665   event.id == eve
+0000e270: 6e74 3131 2e69 643a 0a20 2020 2020 2020  nt11.id:.       
+0000e280: 2072 6169 7365 2045 7863 6570 7469 6f6e   raise Exception
+0000e290: 2829 0a0a 0a72 6561 6465 7220 3d20 5375  ()...reader = Su
+0000e2a0: 6273 6372 6970 7469 6f6e 5265 6164 6572  bscriptionReader
+0000e2b0: 280a 2020 2020 636c 6965 6e74 3d63 6c69  (.    client=cli
+0000e2c0: 656e 742c 0a20 2020 2067 726f 7570 5f6e  ent,.    group_n
+0000e2d0: 616d 653d 6772 6f75 705f 6e61 6d65 2c0a  ame=group_name,.
+0000e2e0: 2020 2020 6361 6c6c 6261 636b 3d68 616e      callback=han
+0000e2f0: 646c 655f 6576 656e 740a 290a 0a72 6561  dle_event.)..rea
+0000e300: 6465 722e 7374 6172 7428 290a 7265 6164  der.start().read
+0000e310: 6572 2e6a 6f69 6e28 290a 0a61 7373 6572  er.join()..asser
+0000e320: 7420 6576 656e 7473 5b2d 315d 2e69 6420  t events[-1].id 
+0000e330: 3d3d 2065 7665 6e74 3131 2e69 640a 6060  == event11.id.``
+0000e340: 600a 0a50 6c65 6173 6520 6e6f 7465 2c20  `..Please note, 
+0000e350: 7768 656e 2070 726f 6365 7373 696e 6720  when processing 
+0000e360: 6576 656e 7473 2069 6e20 6120 646f 776e  events in a down
+0000e370: 7374 7265 616d 2063 6f6d 706f 6e65 6e74  stream component
+0000e380: 2c20 7468 6520 636f 6d6d 6974 2070 6f73  , the commit pos
+0000e390: 6974 696f 6e20 6f66 0a74 6865 206c 6173  ition of.the las
+0000e3a0: 7420 7375 6363 6573 7366 756c 6c79 2070  t successfully p
+0000e3b0: 726f 6365 7373 6564 2065 7665 6e74 2069  rocessed event i
+0000e3c0: 7320 7573 6566 756c 6c79 2072 6563 6f72  s usefully recor
+0000e3d0: 6465 6420 6279 2074 6865 2064 6f77 6e73  ded by the downs
+0000e3e0: 7472 6561 6d20 636f 6d70 6f6e 656e 740a  tream component.
+0000e3f0: 736f 2074 6861 7420 7468 6520 636f 6d6d  so that the comm
+0000e400: 6974 2070 6f73 6974 696f 6e20 6361 6e20  it position can 
+0000e410: 6265 2064 6574 6572 6d69 6e65 6420 6279  be determined by
+0000e420: 2074 6865 2064 6f77 6e73 7472 6561 6d20   the downstream 
+0000e430: 636f 6d70 6f6e 656e 7420 6672 6f6d 2069  component from i
+0000e440: 7473 206f 776e 0a72 6563 6f72 6465 6420  ts own.recorded 
+0000e450: 7768 656e 2069 7420 6973 2072 6573 7461  when it is resta
+0000e460: 7274 6564 2e20 5468 6973 2063 6f6d 6d69  rted. This commi
+0000e470: 7420 706f 7369 7469 6f6e 2063 616e 2062  t position can b
+0000e480: 6520 7573 6564 2074 6f20 7370 6563 6966  e used to specif
+0000e490: 7920 7468 6520 636f 6d6d 6974 0a70 6f73  y the commit.pos
+0000e4a0: 6974 696f 6e20 6672 6f6d 2077 6869 6368  ition from which
+0000e4b0: 2074 6f20 7375 6273 6372 6962 652e 2053   to subscribe. S
+0000e4c0: 696e 6365 2074 6869 7320 636f 6d6d 6974  ince this commit
+0000e4d0: 2070 6f73 6974 696f 6e20 7265 7072 6573   position repres
+0000e4e0: 656e 7473 2074 6865 2070 6f73 6974 696f  ents the positio
+0000e4f0: 6e20 6f66 0a74 6865 206c 6173 7420 7375  n of.the last su
+0000e500: 6363 6573 7366 756c 6c79 2070 726f 6365  ccessfully proce
+0000e510: 7373 6564 2065 7665 6e74 2069 6e20 6120  ssed event in a 
+0000e520: 646f 776e 7374 7265 616d 2063 6f6d 706f  downstream compo
+0000e530: 6e65 6e74 2c20 736f 2069 7420 7769 6c6c  nent, so it will
+0000e540: 2062 6520 7573 7561 6c20 746f 0a77 616e   be usual to.wan
+0000e550: 7420 746f 2072 6561 6420 6672 6f6d 2074  t to read from t
+0000e560: 6865 206e 6578 7420 6576 656e 7420 6166  he next event af
+0000e570: 7465 7220 7468 6973 2070 6f73 6974 696f  ter this positio
+0000e580: 6e2c 2062 6563 6175 7365 2074 6861 7420  n, because that 
+0000e590: 6973 2074 6865 206e 6578 7420 6576 656e  is the next even
+0000e5a0: 740a 7468 6174 206e 6565 6473 2074 6f20  t.that needs to 
+0000e5b0: 6265 2070 726f 6365 7373 6564 2e20 486f  be processed. Ho
+0000e5c0: 7765 7665 722c 2077 6865 6e20 7375 6273  wever, when subs
+0000e5d0: 6372 6962 696e 6720 666f 7220 6576 656e  cribing for even
+0000e5e0: 7473 2075 7369 6e67 2061 2070 6572 7369  ts using a persi
+0000e5f0: 7374 656e 740a 7375 6273 6372 6970 7469  stent.subscripti
+0000e600: 6f6e 2069 6e20 4576 656e 7453 746f 7265  on in EventStore
+0000e610: 4442 2c20 7468 6520 6576 656e 7420 6174  DB, the event at
+0000e620: 2074 6865 2073 7065 6369 6669 6564 2063   the specified c
+0000e630: 6f6d 6d69 7420 706f 7369 7469 6f6e 204d  ommit position M
+0000e640: 4159 2062 6520 7265 7475 726e 6564 0a61  AY be returned.a
+0000e650: 7320 7468 6520 6669 7273 7420 6576 656e  s the first even
+0000e660: 7420 696e 2074 6865 2072 6563 6569 7665  t in the receive
+0000e670: 6420 7365 7175 656e 6365 206f 6620 7265  d sequence of re
+0000e680: 636f 7264 6564 2065 7665 6e74 732c 2061  corded events, a
+0000e690: 6e64 2073 6f20 6974 206d 6179 0a62 6520  nd so it may.be 
+0000e6a0: 6e65 6365 7373 6172 7920 746f 2063 6865  necessary to che
+0000e6b0: 636b 2074 6865 2063 6f6d 6d69 7420 706f  ck the commit po
+0000e6c0: 7369 7469 6f6e 206f 6620 7468 6520 7265  sition of the re
+0000e6d0: 6365 6976 6564 2065 7665 6e74 7320 616e  ceived events an
+0000e6e0: 6420 746f 2064 6973 6361 7264 0a61 6e79  d to discard.any
+0000e6f0: 2020 7265 636f 7264 6564 2065 7665 6e74    recorded event
+0000e700: 206f 626a 6563 7420 7468 6174 2068 6173   object that has
+0000e710: 2061 2063 6f6d 6d69 7420 706f 7369 7469   a commit positi
+0000e720: 6f6e 2065 7175 616c 2074 6f20 7468 6520  on equal to the 
+0000e730: 636f 6d6d 6974 2070 6f73 6974 696f 6e0a  commit position.
+0000e740: 7370 6563 6966 6965 6420 696e 2074 6865  specified in the
+0000e750: 2072 6571 7565 7374 2e0a 0a57 6869 6c73   request...Whils
+0000e760: 7420 7468 6572 6520 6172 6520 736f 6d65  t there are some
+0000e770: 2061 6476 616e 7461 6765 7320 6f66 2070   advantages of p
+0000e780: 6572 7369 7374 656e 7420 7375 6273 6372  ersistent subscr
+0000e790: 6970 7469 6f6e 732c 2069 6e20 7061 7274  iptions, in part
+0000e7a0: 6963 756c 6172 2074 6865 0a70 726f 6365  icular the.proce
+0000e7b0: 7373 696e 6720 6f66 2072 6563 6f72 6465  ssing of recorde
+0000e7c0: 6420 6576 656e 7473 2062 7920 6120 6772  d events by a gr
+0000e7d0: 6f75 7020 6f66 2063 6f6e 7375 6d65 7273  oup of consumers
+0000e7e0: 2c20 6279 2074 7261 636b 696e 6720 696e  , by tracking in
+0000e7f0: 2074 6865 0a75 7073 7472 6561 6d20 7365   the.upstream se
+0000e800: 7276 6572 2074 6865 2070 6f73 6974 696f  rver the positio
+0000e810: 6e20 696e 2074 6865 2063 6f6d 6d69 7420  n in the commit 
+0000e820: 7365 7175 656e 6365 206f 6620 6576 656e  sequence of even
+0000e830: 7473 2074 6861 7420 6861 7665 2062 6565  ts that have bee
+0000e840: 6e20 7072 6f63 6573 7365 642c 0a74 6865  n processed,.the
+0000e850: 7265 2069 7320 6120 6461 6e67 6572 206f  re is a danger o
+0000e860: 6620 2264 7561 6c20 7772 6974 696e 6722  f "dual writing"
+0000e870: 2069 6e20 7468 6520 636f 6e73 756d 7074   in the consumpt
+0000e880: 696f 6e20 6f66 2065 7665 6e74 732e 2052  ion of events. R
+0000e890: 656c 6961 6269 6c69 7479 0a69 6e20 7072  eliability.in pr
+0000e8a0: 6f63 6573 7369 6e67 206f 6620 7265 636f  ocessing of reco
+0000e8b0: 7264 6564 2065 7665 6e74 7320 6279 2061  rded events by a
+0000e8c0: 2067 726f 7570 206f 6620 636f 6e73 756d   group of consum
+0000e8d0: 6572 7320 7769 6c6c 2072 656c 7920 696e  ers will rely in
+0000e8e0: 7374 6561 6420 6f6e 0a69 6465 6d70 6f74  stead on.idempot
+0000e8f0: 656e 7420 6861 6e64 6c69 6e67 206f 6620  ent handling of 
+0000e900: 6475 706c 6963 6174 6520 6d65 7373 6167  duplicate messag
+0000e910: 6573 2c20 616e 6420 7265 7369 6c69 656e  es, and resilien
+0000e920: 6365 2074 6f20 6f75 742d 6f66 2d6f 7264  ce to out-of-ord
+0000e930: 6572 2064 656c 6976 6572 792e 0a0a 2323  er delivery...##
+0000e940: 2320 4765 7420 7375 6273 6372 6970 7469  # Get subscripti
+0000e950: 6f6e 2069 6e66 6f0a 0a2a 7265 7175 6972  on info..*requir
+0000e960: 6573 206c 6561 6465 722a 0a0a 5468 6520  es leader*..The 
+0000e970: 6067 6574 5f73 7562 7363 7269 7074 696f  `get_subscriptio
+0000e980: 6e5f 696e 666f 2829 6020 6d65 7468 6f64  n_info()` method
+0000e990: 2063 616e 2062 6520 7573 6564 2074 6f20   can be used to 
+0000e9a0: 6765 7420 696e 666f 726d 6174 696f 6e20  get information 
+0000e9b0: 666f 7220 610a 7065 7273 6973 7465 6e74  for a.persistent
+0000e9c0: 2073 7562 7363 7269 7074 696f 6e2e 0a0a   subscription...
+0000e9d0: 5468 6973 206d 6574 686f 6420 6861 7320  This method has 
+0000e9e0: 6f6e 6520 7265 7175 6972 6564 2061 7267  one required arg
+0000e9f0: 756d 656e 742c 2060 6772 6f75 705f 6e61  ument, `group_na
+0000ea00: 6d65 602c 2077 6869 6368 0a73 686f 756c  me`, which.shoul
+0000ea10: 6420 6d61 7463 6820 7468 6520 7661 6c75  d match the valu
+0000ea20: 6520 6f66 2074 6865 2061 7267 756d 656e  e of the argumen
+0000ea30: 7420 7573 6564 2077 6865 6e20 6361 6c6c  t used when call
+0000ea40: 696e 6720 6063 7265 6174 655f 7375 6273  ing `create_subs
+0000ea50: 6372 6970 7469 6f6e 2829 602e 0a0a 5468  cription()`...Th
+0000ea60: 6973 206d 6574 686f 6420 616c 736f 2074  is method also t
+0000ea70: 616b 6573 2061 6e20 6f70 7469 6f6e 616c  akes an optional
+0000ea80: 2060 7469 6d65 6f75 7460 2061 7267 756d   `timeout` argum
+0000ea90: 656e 742c 2074 6861 740a 6973 2065 7870  ent, that.is exp
+0000eaa0: 6563 7465 6420 746f 2062 6520 6120 5079  ected to be a Py
+0000eab0: 7468 6f6e 2060 666c 6f61 7460 2c20 7768  thon `float`, wh
+0000eac0: 6963 6820 7365 7473 2061 2064 6561 646c  ich sets a deadl
+0000ead0: 696e 650a 666f 7220 7468 6520 636f 6d70  ine.for the comp
+0000eae0: 6c65 7469 6f6e 206f 6620 7468 6520 6752  letion of the gR
+0000eaf0: 5043 206f 7065 7261 7469 6f6e 2e0a 0a60  PC operation...`
+0000eb00: 6060 7079 7468 6f6e 0a73 7562 7363 7269  ``python.subscri
+0000eb10: 7074 696f 6e5f 696e 666f 203d 2063 6c69  ption_info = cli
+0000eb20: 656e 742e 6765 745f 7375 6273 6372 6970  ent.get_subscrip
+0000eb30: 7469 6f6e 5f69 6e66 6f28 0a20 2020 2067  tion_info(.    g
+0000eb40: 726f 7570 5f6e 616d 653d 6772 6f75 705f  roup_name=group_
+0000eb50: 6e61 6d65 2c0a 290a 6060 600a 0a54 6865  name,.).```..The
+0000eb60: 2072 6574 7572 6e65 6420 7661 6c75 6520   returned value 
+0000eb70: 6973 2061 2060 5375 6273 6372 6970 7469  is a `Subscripti
+0000eb80: 6f6e 496e 666f 6020 6f62 6a65 6374 2e0a  onInfo` object..
+0000eb90: 0a23 2323 204c 6973 7420 7375 6273 6372  .### List subscr
+0000eba0: 6970 7469 6f6e 730a 0a2a 7265 7175 6972  iptions..*requir
+0000ebb0: 6573 206c 6561 6465 722a 0a0a 5468 6520  es leader*..The 
+0000ebc0: 606c 6973 745f 7375 6273 6372 6970 7469  `list_subscripti
+0000ebd0: 6f6e 7328 2960 206d 6574 686f 6420 6361  ons()` method ca
+0000ebe0: 6e20 6265 2075 7365 6420 746f 2067 6574  n be used to get
+0000ebf0: 2069 6e66 6f72 6d61 7469 6f6e 2066 6f72   information for
+0000ec00: 2061 6c6c 0a65 7869 7374 696e 6720 7065   all.existing pe
+0000ec10: 7273 6973 7465 6e74 2073 7562 7363 7269  rsistent subscri
+0000ec20: 7074 696f 6e73 2e0a 0a54 6869 7320 6d65  ptions...This me
+0000ec30: 7468 6f64 2074 616b 6573 2061 6e20 6f70  thod takes an op
+0000ec40: 7469 6f6e 616c 2060 7469 6d65 6f75 7460  tional `timeout`
+0000ec50: 2061 7267 756d 656e 742c 2074 6861 740a   argument, that.
+0000ec60: 6973 2065 7870 6563 7465 6420 746f 2062  is expected to b
+0000ec70: 6520 6120 5079 7468 6f6e 2060 666c 6f61  e a Python `floa
+0000ec80: 7460 2c20 7768 6963 6820 7365 7473 2061  t`, which sets a
+0000ec90: 2064 6561 646c 696e 650a 666f 7220 7468   deadline.for th
+0000eca0: 6520 636f 6d70 6c65 7469 6f6e 206f 6620  e completion of 
+0000ecb0: 7468 6520 6752 5043 206f 7065 7261 7469  the gRPC operati
+0000ecc0: 6f6e 2e0a 0a60 6060 7079 7468 6f6e 0a73  on...```python.s
+0000ecd0: 7562 7363 7269 7074 696f 6e73 203d 2063  ubscriptions = c
+0000ece0: 6c69 656e 742e 6c69 7374 5f73 7562 7363  lient.list_subsc
+0000ecf0: 7269 7074 696f 6e73 2829 0a60 6060 0a0a  riptions().```..
+0000ed00: 5468 6520 7265 7475 726e 6564 2076 616c  The returned val
+0000ed10: 7565 2069 7320 6120 6c69 7374 206f 6620  ue is a list of 
+0000ed20: 6053 7562 7363 7269 7074 696f 6e49 6e66  `SubscriptionInf
+0000ed30: 6f60 206f 626a 6563 7473 2e0a 0a23 2323  o` objects...###
+0000ed40: 2044 656c 6574 6520 7375 6273 6372 6970   Delete subscrip
+0000ed50: 7469 6f6e 0a0a 2a72 6571 7569 7265 7320  tion..*requires 
+0000ed60: 6c65 6164 6572 2a0a 0a54 6865 2060 6465  leader*..The `de
+0000ed70: 6c65 7465 5f73 7562 7363 7269 7074 696f  lete_subscriptio
+0000ed80: 6e28 2960 206d 6574 686f 6420 6361 6e20  n()` method can 
+0000ed90: 6265 2075 7365 6420 746f 2064 656c 6574  be used to delet
+0000eda0: 6520 6120 7065 7273 6973 7465 6e74 0a73  e a persistent.s
+0000edb0: 7562 7363 7269 7074 696f 6e2e 0a0a 5468  ubscription...Th
+0000edc0: 6973 206d 6574 686f 6420 6861 7320 6f6e  is method has on
+0000edd0: 6520 7265 7175 6972 6564 2061 7267 756d  e required argum
+0000ede0: 656e 742c 2060 6772 6f75 705f 6e61 6d65  ent, `group_name
+0000edf0: 602c 2077 6869 6368 0a73 686f 756c 6420  `, which.should 
+0000ee00: 6d61 7463 6820 7468 6520 7661 6c75 6520  match the value 
+0000ee10: 6f66 2061 7267 756d 656e 7420 7573 6564  of argument used
+0000ee20: 2077 6865 6e20 6361 6c6c 696e 6720 6063   when calling `c
+0000ee30: 7265 6174 655f 7375 6273 6372 6970 7469  reate_subscripti
+0000ee40: 6f6e 2829 602e 0a0a 5468 6973 206d 6574  on()`...This met
+0000ee50: 686f 6420 616c 736f 2074 616b 6573 2061  hod also takes a
+0000ee60: 6e20 6f70 7469 6f6e 616c 2060 7469 6d65  n optional `time
+0000ee70: 6f75 7460 2061 7267 756d 656e 742c 2074  out` argument, t
+0000ee80: 6861 740a 6973 2065 7870 6563 7465 6420  hat.is expected 
+0000ee90: 746f 2062 6520 6120 5079 7468 6f6e 2060  to be a Python `
+0000eea0: 666c 6f61 7460 2c20 7768 6963 6820 7365  float`, which se
+0000eeb0: 7473 2061 2064 6561 646c 696e 650a 666f  ts a deadline.fo
+0000eec0: 7220 7468 6520 636f 6d70 6c65 7469 6f6e  r the completion
+0000eed0: 206f 6620 7468 6520 6752 5043 206f 7065   of the gRPC ope
+0000eee0: 7261 7469 6f6e 2e0a 0a60 6060 7079 7468  ration...```pyth
+0000eef0: 6f6e 0a63 6c69 656e 742e 6465 6c65 7465  on.client.delete
+0000ef00: 5f73 7562 7363 7269 7074 696f 6e28 0a20  _subscription(. 
+0000ef10: 2020 2067 726f 7570 5f6e 616d 653d 6772     group_name=gr
+0000ef20: 6f75 705f 6e61 6d65 2c0a 290a 6060 600a  oup_name,.).```.
+0000ef30: 0a23 2323 2043 7265 6174 6520 7374 7265  .### Create stre
+0000ef40: 616d 2073 7562 7363 7269 7074 696f 6e0a  am subscription.
+0000ef50: 0a2a 7265 7175 6972 6573 206c 6561 6465  .*requires leade
+0000ef60: 722a 0a0a 5468 6520 6063 7265 6174 655f  r*..The `create_
+0000ef70: 7374 7265 616d 5f73 7562 7363 7269 7074  stream_subscript
+0000ef80: 696f 6e28 2960 206d 6574 686f 6420 6361  ion()` method ca
+0000ef90: 6e20 6265 2075 7365 6420 746f 2063 7265  n be used to cre
+0000efa0: 6174 6520 6120 7065 7273 6973 7465 6e74  ate a persistent
+0000efb0: 0a73 7562 7363 7269 7074 696f 6e20 666f  .subscription fo
+0000efc0: 7220 6120 7374 7265 616d 2e0a 0a54 6869  r a stream...Thi
+0000efd0: 7320 6d65 7468 6f64 2068 6173 2074 776f  s method has two
+0000efe0: 2072 6571 7569 7265 6420 6172 6775 6d65   required argume
+0000eff0: 6e74 732c 2060 6772 6f75 705f 6e61 6d65  nts, `group_name
+0000f000: 6020 616e 6420 6073 7472 6561 6d5f 6e61  ` and `stream_na
+0000f010: 6d65 602e 2054 6865 0a60 6772 6f75 705f  me`. The.`group_
+0000f020: 6e61 6d65 6020 6172 6775 6d65 6e74 206e  name` argument n
+0000f030: 616d 6573 2074 6865 2067 726f 7570 206f  ames the group o
+0000f040: 6620 636f 6e73 756d 6572 7320 7468 6174  f consumers that
+0000f050: 2077 696c 6c20 7265 6365 6976 6520 6576   will receive ev
+0000f060: 656e 7473 0a66 726f 6d20 7468 6973 2073  ents.from this s
+0000f070: 7562 7363 7269 7074 696f 6e2e 2054 6865  ubscription. The
+0000f080: 2060 7374 7265 616d 5f6e 616d 6560 2061   `stream_name` a
+0000f090: 7267 756d 656e 7420 7370 6563 6966 6965  rgument specifie
+0000f0a0: 7320 7768 6963 6820 7374 7265 616d 0a74  s which stream.t
+0000f0b0: 6865 2073 7562 7363 7269 7074 696f 6e20  he subscription 
+0000f0c0: 7769 6c6c 2066 6f6c 6c6f 772e 2054 6865  will follow. The
+0000f0d0: 2076 616c 7565 7320 6f66 2062 6f74 6820   values of both 
+0000f0e0: 7468 6573 6520 6172 6775 6d65 6e74 7320  these arguments 
+0000f0f0: 6172 6520 6578 7065 6374 6564 0a74 6f20  are expected.to 
+0000f100: 6265 2050 7974 686f 6e20 6073 7472 6020  be Python `str` 
+0000f110: 6f62 6a65 6374 732e 0a0a 5468 6520 6d65  objects...The me
+0000f120: 7468 6f64 2061 6c73 6f20 7461 6b65 7320  thod also takes 
+0000f130: 666f 7572 206f 7074 696f 6e61 6c20 6172  four optional ar
+0000f140: 6775 6d65 6e74 732c 2060 7374 7265 616d  guments, `stream
+0000f150: 5f70 6f73 6974 696f 6e60 2c20 6066 726f  _position`, `fro
+0000f160: 6d5f 656e 6460 2c0a 6063 6f6e 7375 6d65  m_end`,.`consume
+0000f170: 725f 7374 7261 7465 6779 602c 2061 6e64  r_strategy`, and
+0000f180: 2060 7469 6d65 6f75 7460 2e0a 0a54 6869   `timeout`...Thi
+0000f190: 7320 6f70 7469 6f6e 616c 2060 7374 7265  s optional `stre
+0000f1a0: 616d 5f70 6f73 6974 696f 6e60 2061 7267  am_position` arg
+0000f1b0: 756d 656e 7420 7370 6563 6966 6965 7320  ument specifies 
+0000f1c0: 6120 7374 7265 616d 2070 6f73 6974 696f  a stream positio
+0000f1d0: 6e20 6672 6f6d 0a77 6869 6368 2074 6f20  n from.which to 
+0000f1e0: 7375 6273 6372 6962 652e 2054 6865 2072  subscribe. The r
+0000f1f0: 6563 6f72 6465 6420 6576 656e 7420 6174  ecorded event at
+0000f200: 2074 6869 7320 7374 7265 616d 0a70 6f73   this stream.pos
+0000f210: 6974 696f 6e20 7769 6c6c 2062 6520 7265  ition will be re
+0000f220: 6365 6976 6564 2077 6865 6e20 7265 6164  ceived when read
+0000f230: 696e 6720 7468 6520 7375 6273 6372 6970  ing the subscrip
+0000f240: 7469 6f6e 2e0a 0a54 6869 7320 6f70 7469  tion...This opti
+0000f250: 6f6e 616c 2060 6672 6f6d 5f65 6e64 6020  onal `from_end` 
+0000f260: 6172 6775 6d65 6e74 2069 7320 6120 5079  argument is a Py
+0000f270: 7468 6f6e 2060 626f 6f6c 602e 0a42 7920  thon `bool`..By 
+0000f280: 6465 6661 756c 742c 2074 6865 2076 616c  default, the val
+0000f290: 7565 206f 6620 7468 6973 2061 7267 756d  ue of this argum
+0000f2a0: 656e 7420 6973 2046 616c 7365 2e20 4966  ent is False. If
+0000f2b0: 2074 6869 7320 6172 6775 6d65 6e74 2069   this argument i
+0000f2c0: 7320 7365 740a 746f 2061 2054 7275 6520  s set.to a True 
+0000f2d0: 7661 6c75 652c 2072 6561 6469 6e67 2066  value, reading f
+0000f2e0: 726f 6d20 7468 6520 7375 6273 6372 6970  rom the subscrip
+0000f2f0: 7469 6f6e 2077 696c 6c20 7265 6365 6976  tion will receiv
+0000f300: 6520 6f6e 6c79 2065 7665 6e74 730a 7265  e only events.re
+0000f310: 636f 7264 6564 2061 6674 6572 2074 6865  corded after the
+0000f320: 2073 7562 7363 7269 7074 696f 6e20 7761   subscription wa
+0000f330: 7320 6372 6561 7465 642e 2054 6861 7420  s created. That 
+0000f340: 6973 2c20 6974 2069 7320 6e6f 7420 696e  is, it is not in
+0000f350: 636c 7573 6976 650a 6f66 2074 6865 2063  clusive.of the c
+0000f360: 7572 7265 6e74 2073 7472 6561 6d20 706f  urrent stream po
+0000f370: 7369 7469 6f6e 2e0a 0a54 6865 206f 7074  sition...The opt
+0000f380: 696f 6e61 6c20 6063 6f6e 7375 6d65 725f  ional `consumer_
+0000f390: 7374 7261 7465 6779 6020 6172 6775 6d65  strategy` argume
+0000f3a0: 6e74 2069 7320 6120 5079 7468 6f6e 2060  nt is a Python `
+0000f3b0: 7374 7260 2074 6861 7420 6465 6669 6e65  str` that define
+0000f3c0: 730a 7468 6520 636f 6e73 756d 6572 2073  s.the consumer s
+0000f3d0: 7472 6174 6567 7920 666f 7220 7468 6973  trategy for this
+0000f3e0: 2070 6572 7369 7374 656e 7420 7375 6273   persistent subs
+0000f3f0: 6372 6970 7469 6f6e 2e20 5468 6520 7661  cription. The va
+0000f400: 6c75 6520 6f66 2074 6869 7320 6172 6775  lue of this argu
+0000f410: 6d65 6e74 0a63 616e 2062 6520 6027 4469  ment.can be `'Di
+0000f420: 7370 6174 6368 546f 5369 6e67 6c65 2760  spatchToSingle'`
+0000f430: 2c20 6027 526f 756e 6452 6f62 696e 2760  , `'RoundRobin'`
+0000f440: 2c20 6027 5069 6e6e 6564 2760 2c20 6f72  , `'Pinned'`, or
+0000f450: 2060 2750 696e 6e65 6442 7943 6f72 7265   `'PinnedByCorre
+0000f460: 6c61 7469 6f6e 2760 2e20 5468 650a 6465  lation'`. The.de
+0000f470: 6661 756c 7420 7661 6c75 6520 6973 2060  fault value is `
+0000f480: 2744 6973 7061 7463 6854 6f53 696e 676c  'DispatchToSingl
+0000f490: 6527 602e 0a0a 5468 6973 206d 6574 686f  e'`...This metho
+0000f4a0: 6420 616c 736f 2074 616b 6573 2061 6e20  d also takes an 
+0000f4b0: 6f70 7469 6f6e 616c 2060 7469 6d65 6f75  optional `timeou
+0000f4c0: 7460 2061 7267 756d 656e 742c 2074 6861  t` argument, tha
+0000f4d0: 740a 6973 2065 7870 6563 7465 6420 746f  t.is expected to
+0000f4e0: 2062 6520 6120 5079 7468 6f6e 2060 666c   be a Python `fl
+0000f4f0: 6f61 7460 2c20 7768 6963 6820 7365 7473  oat`, which sets
+0000f500: 2061 2064 6561 646c 696e 650a 666f 7220   a deadline.for 
+0000f510: 7468 6520 636f 6d70 6c65 7469 6f6e 206f  the completion o
+0000f520: 6620 7468 6520 6752 5043 206f 7065 7261  f the gRPC opera
+0000f530: 7469 6f6e 2e0a 0a54 6869 7320 6d65 7468  tion...This meth
+0000f540: 6f64 2064 6f65 7320 6e6f 7420 7265 7475  od does not retu
+0000f550: 726e 2061 2076 616c 7565 2e20 4576 656e  rn a value. Even
+0000f560: 7473 2063 616e 2062 6520 7265 6365 6976  ts can be receiv
+0000f570: 6564 2062 7920 6974 6572 6174 696e 670a  ed by iterating.
+0000f580: 6f76 6572 2074 6865 2076 616c 7565 2072  over the value r
+0000f590: 6574 7572 6e65 6420 6279 2063 616c 6c69  eturned by calli
+0000f5a0: 6e67 2060 7265 6164 5f73 7472 6561 6d5f  ng `read_stream_
+0000f5b0: 7375 6273 6372 6970 7469 6f6e 2829 6020  subscription()` 
+0000f5c0: 2873 6565 2062 656c 6f77 292e 0a0a 5468  (see below)...Th
+0000f5d0: 6520 6578 616d 706c 6520 6265 6c6f 7720  e example below 
+0000f5e0: 6372 6561 7465 7320 6120 7065 7273 6973  creates a persis
+0000f5f0: 7465 6e74 2073 7472 6561 6d20 7375 6273  tent stream subs
+0000f600: 6372 6970 7469 6f6e 2066 726f 6d20 7468  cription from th
+0000f610: 6520 7374 6172 7420 6f66 2074 6865 2073  e start of the s
+0000f620: 7472 6561 6d2e 0a0a 6060 6070 7974 686f  tream...```pytho
+0000f630: 6e0a 2320 4372 6561 7465 2061 2070 6572  n.# Create a per
+0000f640: 7369 7374 656e 7420 7374 7265 616d 2073  sistent stream s
+0000f650: 7562 7363 7269 7074 696f 6e20 6672 6f6d  ubscription from
+0000f660: 2073 7461 7274 206f 6620 7468 6520 7374   start of the st
+0000f670: 7265 616d 2e0a 6772 6f75 705f 6e61 6d65  ream..group_name
+0000f680: 3120 3d20 6622 6772 6f75 702d 7b75 7569  1 = f"group-{uui
+0000f690: 6434 2829 7d22 0a63 6c69 656e 742e 6372  d4()}".client.cr
+0000f6a0: 6561 7465 5f73 7472 6561 6d5f 7375 6273  eate_stream_subs
+0000f6b0: 6372 6970 7469 6f6e 280a 2020 2020 6772  cription(.    gr
+0000f6c0: 6f75 705f 6e61 6d65 3d67 726f 7570 5f6e  oup_name=group_n
+0000f6d0: 616d 6531 2c0a 2020 2020 7374 7265 616d  ame1,.    stream
+0000f6e0: 5f6e 616d 653d 7374 7265 616d 5f6e 616d  _name=stream_nam
+0000f6f0: 6532 2c0a 290a 6060 600a 0a54 6865 2065  e2,.).```..The e
+0000f700: 7861 6d70 6c65 2062 656c 6f77 2063 7265  xample below cre
+0000f710: 6174 6573 2061 2070 6572 7369 7374 656e  ates a persisten
+0000f720: 7420 7374 7265 616d 2073 7562 7363 7269  t stream subscri
+0000f730: 7074 696f 6e20 6672 6f6d 2061 2073 7472  ption from a str
+0000f740: 6561 6d20 706f 7369 7469 6f6e 2e0a 0a60  eam position...`
+0000f750: 6060 7079 7468 6f6e 0a23 2043 7265 6174  ``python.# Creat
+0000f760: 6520 6120 7065 7273 6973 7465 6e74 2073  e a persistent s
+0000f770: 7472 6561 6d20 7375 6273 6372 6970 7469  tream subscripti
+0000f780: 6f6e 2066 726f 6d20 6120 7374 7265 616d  on from a stream
+0000f790: 2070 6f73 6974 696f 6e2e 0a67 726f 7570   position..group
+0000f7a0: 5f6e 616d 6532 203d 2066 2267 726f 7570  _name2 = f"group
+0000f7b0: 2d7b 7575 6964 3428 297d 220a 636c 6965  -{uuid4()}".clie
+0000f7c0: 6e74 2e63 7265 6174 655f 7374 7265 616d  nt.create_stream
+0000f7d0: 5f73 7562 7363 7269 7074 696f 6e28 0a20  _subscription(. 
+0000f7e0: 2020 2067 726f 7570 5f6e 616d 653d 6772     group_name=gr
+0000f7f0: 6f75 705f 6e61 6d65 322c 0a20 2020 2073  oup_name2,.    s
+0000f800: 7472 6561 6d5f 6e61 6d65 3d73 7472 6561  tream_name=strea
+0000f810: 6d5f 6e61 6d65 322c 0a20 2020 2073 7472  m_name2,.    str
+0000f820: 6561 6d5f 706f 7369 7469 6f6e 3d32 0a29  eam_position=2.)
+0000f830: 0a60 6060 0a0a 5468 6520 6578 616d 706c  .```..The exampl
+0000f840: 6520 6265 6c6f 7720 6372 6561 7465 7320  e below creates 
+0000f850: 6120 7065 7273 6973 7465 6e74 2073 7472  a persistent str
+0000f860: 6561 6d20 7375 6273 6372 6970 7469 6f6e  eam subscription
+0000f870: 2066 726f 6d20 7468 6520 656e 6420 6f66   from the end of
+0000f880: 2074 6865 2073 7472 6561 6d2e 0a0a 6060   the stream...``
+0000f890: 6070 7974 686f 6e0a 2320 4372 6561 7465  `python.# Create
+0000f8a0: 2061 2070 6572 7369 7374 656e 7420 7374   a persistent st
+0000f8b0: 7265 616d 2073 7562 7363 7269 7074 696f  ream subscriptio
+0000f8c0: 6e20 6672 6f6d 2065 6e64 206f 6620 7468  n from end of th
+0000f8d0: 6520 7374 7265 616d 2e0a 6772 6f75 705f  e stream..group_
+0000f8e0: 6e61 6d65 3320 3d20 6622 6772 6f75 702d  name3 = f"group-
+0000f8f0: 7b75 7569 6434 2829 7d22 0a63 6c69 656e  {uuid4()}".clien
+0000f900: 742e 6372 6561 7465 5f73 7472 6561 6d5f  t.create_stream_
+0000f910: 7375 6273 6372 6970 7469 6f6e 280a 2020  subscription(.  
+0000f920: 2020 6772 6f75 705f 6e61 6d65 3d67 726f    group_name=gro
+0000f930: 7570 5f6e 616d 6533 2c0a 2020 2020 7374  up_name3,.    st
+0000f940: 7265 616d 5f6e 616d 653d 7374 7265 616d  ream_name=stream
+0000f950: 5f6e 616d 6532 2c0a 2020 2020 6672 6f6d  _name2,.    from
+0000f960: 5f65 6e64 3d54 7275 650a 290a 6060 600a  _end=True.).```.
+0000f970: 0a23 2323 2052 6561 6420 7374 7265 616d  .### Read stream
+0000f980: 2073 7562 7363 7269 7074 696f 6e0a 0a2a   subscription..*
+0000f990: 7265 7175 6972 6573 206c 6561 6465 722a  requires leader*
+0000f9a0: 0a0a 5468 6520 6072 6561 645f 7374 7265  ..The `read_stre
+0000f9b0: 616d 5f73 7562 7363 7269 7074 696f 6e28  am_subscription(
+0000f9c0: 2960 206d 6574 686f 6420 6361 6e20 6265  )` method can be
+0000f9d0: 2075 7365 6420 746f 2063 7265 6174 6520   used to create 
+0000f9e0: 6120 7065 7273 6973 7465 6e74 0a73 7562  a persistent.sub
+0000f9f0: 7363 7269 7074 696f 6e20 666f 7220 6120  scription for a 
+0000fa00: 7374 7265 616d 2e0a 0a54 6869 7320 6d65  stream...This me
+0000fa10: 7468 6f64 2068 6173 2074 776f 2072 6571  thod has two req
+0000fa20: 7569 7265 6420 6172 6775 6d65 6e74 732c  uired arguments,
+0000fa30: 2060 6772 6f75 705f 6e61 6d65 6020 616e   `group_name` an
+0000fa40: 6420 6073 7472 6561 6d5f 6e61 6d65 602c  d `stream_name`,
+0000fa50: 2077 6869 6368 0a73 686f 756c 6420 6d61   which.should ma
+0000fa60: 7463 6820 7468 6520 7661 6c75 6573 206f  tch the values o
+0000fa70: 6620 6172 6775 6d65 6e74 7320 7573 6564  f arguments used
+0000fa80: 2077 6865 6e20 6361 6c6c 696e 6720 6063   when calling `c
+0000fa90: 7265 6174 655f 7374 7265 616d 5f73 7562  reate_stream_sub
+0000faa0: 7363 7269 7074 696f 6e28 2960 2e0a 0a54  scription()`...T
+0000fab0: 6869 7320 6d65 7468 6f64 2061 6c73 6f20  his method also 
+0000fac0: 7461 6b65 7320 616e 206f 7074 696f 6e61  takes an optiona
+0000fad0: 6c20 6074 696d 656f 7574 6020 6172 6775  l `timeout` argu
+0000fae0: 6d65 6e74 2c20 7468 6174 0a69 7320 6578  ment, that.is ex
+0000faf0: 7065 6374 6564 2074 6f20 6265 2061 2050  pected to be a P
+0000fb00: 7974 686f 6e20 6066 6c6f 6174 602c 2077  ython `float`, w
+0000fb10: 6869 6368 2073 6574 7320 6120 6465 6164  hich sets a dead
+0000fb20: 6c69 6e65 0a66 6f72 2074 6865 2063 6f6d  line.for the com
+0000fb30: 706c 6574 696f 6e20 6f66 2074 6865 2067  pletion of the g
+0000fb40: 5250 4320 6f70 6572 6174 696f 6e2e 0a0a  RPC operation...
+0000fb50: 4a75 7374 206c 696b 6520 6072 6561 645f  Just like `read_
+0000fb60: 7375 6273 6372 6970 7469 6f6e 602c 2074  subscription`, t
+0000fb70: 6869 7320 6d65 7468 6f64 2072 6574 7572  his method retur
+0000fb80: 6e73 2061 2032 2d74 7570 6c65 3a20 6120  ns a 2-tuple: a 
+0000fb90: 2272 6561 6420 7265 7175 6573 7422 206f  "read request" o
+0000fba0: 626a 6563 740a 616e 6420 6120 2272 6561  bject.and a "rea
+0000fbb0: 6420 7265 7370 6f6e 7365 2220 6f62 6a65  d response" obje
+0000fbc0: 6374 2e0a 0a60 6060 7079 7468 6f6e 0a72  ct...```python.r
+0000fbd0: 6561 645f 7265 712c 2072 6561 645f 7265  ead_req, read_re
+0000fbe0: 7370 203d 2063 6c69 656e 742e 7265 6164  sp = client.read
+0000fbf0: 5f73 7472 6561 6d5f 7375 6273 6372 6970  _stream_subscrip
+0000fc00: 7469 6f6e 280a 2020 2020 6772 6f75 705f  tion(.    group_
+0000fc10: 6e61 6d65 3d67 726f 7570 5f6e 616d 6531  name=group_name1
+0000fc20: 2c0a 2020 2020 7374 7265 616d 5f6e 616d  ,.    stream_nam
+0000fc30: 653d 7374 7265 616d 5f6e 616d 6532 2c0a  e=stream_name2,.
+0000fc40: 290a 6060 600a 0a54 6865 2065 7861 6d70  ).```..The examp
+0000fc50: 6c65 2062 656c 6f77 2069 7465 7261 7465  le below iterate
+0000fc60: 7320 6f76 6572 2074 6865 2022 7265 6164  s over the "read
+0000fc70: 2072 6573 706f 6e73 6522 206f 626a 6563   response" objec
+0000fc80: 742c 2061 6e64 2063 616c 6c73 2060 6163  t, and calls `ac
+0000fc90: 6b28 2960 0a6f 6e20 7468 6520 2272 6561  k()`.on the "rea
+0000fca0: 6420 7265 7370 6f6e 7365 2220 6f62 6a65  d response" obje
+0000fcb0: 6374 2e20 5468 6520 666f 7220 6c6f 6f70  ct. The for loop
+0000fcc0: 2062 7265 616b 7320 7768 656e 2077 6520   breaks when we 
+0000fcd0: 6861 7665 2072 6563 6569 7665 640a 7468  have received.th
+0000fce0: 6520 6c61 7374 2065 7665 6e74 2069 6e20  e last event in 
+0000fcf0: 7468 6520 7374 7265 616d 2c20 736f 2074  the stream, so t
+0000fd00: 6861 7420 7765 2063 616e 2066 696e 6973  hat we can finis
+0000fd10: 6820 7468 6520 6578 616d 706c 6573 2069  h the examples i
+0000fd20: 6e20 7468 6973 0a64 6f63 756d 656e 7461  n this.documenta
+0000fd30: 7469 6f6e 2e0a 0a60 6060 7079 7468 6f6e  tion...```python
+0000fd40: 0a65 7665 6e74 7320 3d20 5b5d 0a66 6f72  .events = [].for
+0000fd50: 2065 7665 6e74 2069 6e20 7265 6164 5f72   event in read_r
+0000fd60: 6573 703a 0a20 2020 2065 7665 6e74 732e  esp:.    events.
+0000fd70: 6170 7065 6e64 2865 7665 6e74 290a 0a20  append(event).. 
+0000fd80: 2020 2023 2041 636b 6e6f 776c 6564 6765     # Acknowledge
+0000fd90: 2074 6865 2072 6563 6569 7665 6420 6576   the received ev
+0000fda0: 656e 742e 0a20 2020 2072 6561 645f 7265  ent..    read_re
+0000fdb0: 712e 6163 6b28 6576 656e 745f 6964 3d65  q.ack(event_id=e
+0000fdc0: 7665 6e74 2e69 6429 0a0a 2020 2020 2320  vent.id)..    # 
+0000fdd0: 4272 6561 6b20 7768 656e 2074 6865 206c  Break when the l
+0000fde0: 6173 7420 6576 656e 7420 6861 7320 6265  ast event has be
+0000fdf0: 656e 2072 6563 6569 7665 642e 0a20 2020  en received..   
+0000fe00: 2069 6620 6576 656e 742e 6964 203d 3d20   if event.id == 
+0000fe10: 6576 656e 7431 312e 6964 3a0a 2020 2020  event11.id:.    
+0000fe20: 2020 2020 6272 6561 6b0a 6060 600a 0a57      break.```..W
+0000fe30: 6520 6361 6e20 6368 6563 6b20 7765 2072  e can check we r
+0000fe40: 6563 6569 7665 6420 616c 6c20 7468 6520  eceived all the 
+0000fe50: 6576 656e 7473 2074 6861 7420 7765 7265  events that were
+0000fe60: 2061 7070 656e 6465 6420 746f 2060 7374   appended to `st
+0000fe70: 7265 616d 5f6e 616d 6532 600a 696e 2074  ream_name2`.in t
+0000fe80: 6865 2065 7861 6d70 6c65 7320 6162 6f76  he examples abov
+0000fe90: 652e 0a0a 6060 6070 7974 686f 6e0a 6173  e...```python.as
+0000fea0: 7365 7274 206c 656e 2865 7665 6e74 7329  sert len(events)
+0000feb0: 203d 3d20 340a 6173 7365 7274 2065 7665   == 4.assert eve
+0000fec0: 6e74 735b 305d 2e73 7472 6561 6d5f 6e61  nts[0].stream_na
+0000fed0: 6d65 203d 3d20 7374 7265 616d 5f6e 616d  me == stream_nam
+0000fee0: 6532 0a61 7373 6572 7420 6576 656e 7473  e2.assert events
+0000fef0: 5b30 5d2e 6964 203d 3d20 6576 656e 7434  [0].id == event4
+0000ff00: 2e69 640a 6173 7365 7274 2065 7665 6e74  .id.assert event
+0000ff10: 735b 315d 2e73 7472 6561 6d5f 6e61 6d65  s[1].stream_name
+0000ff20: 203d 3d20 7374 7265 616d 5f6e 616d 6532   == stream_name2
+0000ff30: 0a61 7373 6572 7420 6576 656e 7473 5b31  .assert events[1
+0000ff40: 5d2e 6964 203d 3d20 6576 656e 7435 2e69  ].id == event5.i
+0000ff50: 640a 6173 7365 7274 2065 7665 6e74 735b  d.assert events[
+0000ff60: 325d 2e73 7472 6561 6d5f 6e61 6d65 203d  2].stream_name =
+0000ff70: 3d20 7374 7265 616d 5f6e 616d 6532 0a61  = stream_name2.a
+0000ff80: 7373 6572 7420 6576 656e 7473 5b32 5d2e  ssert events[2].
+0000ff90: 6964 203d 3d20 6576 656e 7436 2e69 640a  id == event6.id.
+0000ffa0: 6173 7365 7274 2065 7665 6e74 735b 335d  assert events[3]
+0000ffb0: 2e73 7472 6561 6d5f 6e61 6d65 203d 3d20  .stream_name == 
+0000ffc0: 7374 7265 616d 5f6e 616d 6532 0a61 7373  stream_name2.ass
+0000ffd0: 6572 7420 6576 656e 7473 5b33 5d2e 6964  ert events[3].id
+0000ffe0: 203d 3d20 6576 656e 7431 312e 6964 0a60   == event11.id.`
+0000fff0: 6060 0a0a 2323 2320 4765 7420 7374 7265  ``..### Get stre
+00010000: 616d 2073 7562 7363 7269 7074 696f 6e20  am subscription 
+00010010: 696e 666f 0a0a 2a72 6571 7569 7265 7320  info..*requires 
+00010020: 6c65 6164 6572 2a0a 0a54 6865 2060 6765  leader*..The `ge
+00010030: 745f 7374 7265 616d 5f73 7562 7363 7269  t_stream_subscri
+00010040: 7074 696f 6e5f 696e 666f 2829 6020 6d65  ption_info()` me
+00010050: 7468 6f64 2063 616e 2062 6520 7573 6564  thod can be used
+00010060: 2074 6f20 6765 7420 696e 666f 726d 6174   to get informat
+00010070: 696f 6e20 666f 7220 610a 7065 7273 6973  ion for a.persis
+00010080: 7465 6e74 2073 7562 7363 7269 7074 696f  tent subscriptio
+00010090: 6e20 666f 7220 6120 7374 7265 616d 2e0a  n for a stream..
+000100a0: 0a54 6869 7320 6d65 7468 6f64 2068 6173  .This method has
+000100b0: 2074 776f 2072 6571 7569 7265 6420 6172   two required ar
+000100c0: 6775 6d65 6e74 732c 2060 6772 6f75 705f  guments, `group_
+000100d0: 6e61 6d65 6020 616e 6420 6073 7472 6561  name` and `strea
+000100e0: 6d5f 6e61 6d65 602c 2077 6869 6368 0a73  m_name`, which.s
+000100f0: 686f 756c 6420 6d61 7463 6820 7468 6520  hould match the 
+00010100: 7661 6c75 6573 206f 6620 6172 6775 6d65  values of argume
+00010110: 6e74 7320 7573 6564 2077 6865 6e20 6361  nts used when ca
+00010120: 6c6c 696e 6720 6063 7265 6174 655f 7374  lling `create_st
+00010130: 7265 616d 5f73 7562 7363 7269 7074 696f  ream_subscriptio
+00010140: 6e28 2960 2e0a 0a54 6869 7320 6d65 7468  n()`...This meth
+00010150: 6f64 2061 6c73 6f20 7461 6b65 7320 616e  od also takes an
+00010160: 206f 7074 696f 6e61 6c20 6074 696d 656f   optional `timeo
+00010170: 7574 6020 6172 6775 6d65 6e74 2c20 7468  ut` argument, th
+00010180: 6174 0a69 7320 6578 7065 6374 6564 2074  at.is expected t
+00010190: 6f20 6265 2061 2050 7974 686f 6e20 6066  o be a Python `f
+000101a0: 6c6f 6174 602c 2077 6869 6368 2073 6574  loat`, which set
+000101b0: 7320 6120 6465 6164 6c69 6e65 0a66 6f72  s a deadline.for
+000101c0: 2074 6865 2063 6f6d 706c 6574 696f 6e20   the completion 
+000101d0: 6f66 2074 6865 2067 5250 4320 6f70 6572  of the gRPC oper
+000101e0: 6174 696f 6e2e 0a0a 6060 6070 7974 686f  ation...```pytho
+000101f0: 6e0a 7375 6273 6372 6970 7469 6f6e 5f69  n.subscription_i
+00010200: 6e66 6f20 3d20 636c 6965 6e74 2e67 6574  nfo = client.get
+00010210: 5f73 7472 6561 6d5f 7375 6273 6372 6970  _stream_subscrip
+00010220: 7469 6f6e 5f69 6e66 6f28 0a20 2020 2067  tion_info(.    g
+00010230: 726f 7570 5f6e 616d 653d 6772 6f75 705f  roup_name=group_
+00010240: 6e61 6d65 312c 0a20 2020 2073 7472 6561  name1,.    strea
+00010250: 6d5f 6e61 6d65 3d73 7472 6561 6d5f 6e61  m_name=stream_na
+00010260: 6d65 322c 0a29 0a60 6060 0a0a 5468 6520  me2,.).```..The 
+00010270: 7265 7475 726e 6564 2076 616c 7565 2069  returned value i
+00010280: 7320 6120 6053 7562 7363 7269 7074 696f  s a `Subscriptio
+00010290: 6e49 6e66 6f60 206f 626a 6563 742e 0a0a  nInfo` object...
+000102a0: 2323 2320 4c69 7374 2073 7472 6561 6d20  ### List stream 
+000102b0: 7375 6273 6372 6970 7469 6f6e 730a 0a2a  subscriptions..*
+000102c0: 7265 7175 6972 6573 206c 6561 6465 722a  requires leader*
+000102d0: 0a0a 5468 6520 606c 6973 745f 7374 7265  ..The `list_stre
+000102e0: 616d 5f73 7562 7363 7269 7074 696f 6e73  am_subscriptions
+000102f0: 2829 6020 6d65 7468 6f64 2063 616e 2062  ()` method can b
+00010300: 6520 7573 6564 2074 6f20 6765 7420 696e  e used to get in
+00010310: 666f 726d 6174 696f 6e20 666f 7220 616c  formation for al
+00010320: 6c0a 7468 6520 7065 7273 6973 7465 6e74  l.the persistent
+00010330: 2073 7562 7363 7269 7074 696f 6e73 2066   subscriptions f
+00010340: 6f72 2061 2073 7472 6561 6d2e 0a0a 5468  or a stream...Th
+00010350: 6973 206d 6574 686f 6420 6861 7320 6f6e  is method has on
+00010360: 6520 7265 7175 6972 6564 2061 7267 756d  e required argum
+00010370: 656e 742c 2060 7374 7265 616d 5f6e 616d  ent, `stream_nam
+00010380: 6560 2e0a 0a54 6869 7320 6d65 7468 6f64  e`...This method
+00010390: 2061 6c73 6f20 7461 6b65 7320 616e 206f   also takes an o
+000103a0: 7074 696f 6e61 6c20 6074 696d 656f 7574  ptional `timeout
+000103b0: 6020 6172 6775 6d65 6e74 2c20 7468 6174  ` argument, that
+000103c0: 0a69 7320 6578 7065 6374 6564 2074 6f20  .is expected to 
+000103d0: 6265 2061 2050 7974 686f 6e20 6066 6c6f  be a Python `flo
+000103e0: 6174 602c 2077 6869 6368 2073 6574 7320  at`, which sets 
+000103f0: 6120 6465 6164 6c69 6e65 0a66 6f72 2074  a deadline.for t
+00010400: 6865 2063 6f6d 706c 6574 696f 6e20 6f66  he completion of
+00010410: 2074 6865 2067 5250 4320 6f70 6572 6174   the gRPC operat
+00010420: 696f 6e2e 0a0a 6060 6070 7974 686f 6e0a  ion...```python.
+00010430: 7375 6273 6372 6970 7469 6f6e 7320 3d20  subscriptions = 
+00010440: 636c 6965 6e74 2e6c 6973 745f 7374 7265  client.list_stre
+00010450: 616d 5f73 7562 7363 7269 7074 696f 6e73  am_subscriptions
+00010460: 280a 2020 2020 7374 7265 616d 5f6e 616d  (.    stream_nam
+00010470: 653d 7374 7265 616d 5f6e 616d 6532 2c0a  e=stream_name2,.
+00010480: 290a 6060 600a 0a54 6865 2072 6574 7572  ).```..The retur
+00010490: 6e65 6420 7661 6c75 6520 6973 2061 206c  ned value is a l
+000104a0: 6973 7420 6f66 2060 5375 6273 6372 6970  ist of `Subscrip
+000104b0: 7469 6f6e 496e 666f 6020 6f62 6a65 6374  tionInfo` object
+000104c0: 732e 0a0a 2323 2320 4465 6c65 7465 2073  s...### Delete s
+000104d0: 7472 6561 6d20 7375 6273 6372 6970 7469  tream subscripti
+000104e0: 6f6e 0a0a 2a72 6571 7569 7265 7320 6c65  on..*requires le
+000104f0: 6164 6572 2a0a 0a54 6865 2060 6465 6c65  ader*..The `dele
+00010500: 7465 5f73 7472 6561 6d5f 7375 6273 6372  te_stream_subscr
+00010510: 6970 7469 6f6e 2829 6020 6d65 7468 6f64  iption()` method
+00010520: 2063 616e 2062 6520 7573 6564 2074 6f20   can be used to 
+00010530: 6465 6c65 7465 2061 2070 6572 7369 7374  delete a persist
+00010540: 656e 740a 7375 6273 6372 6970 7469 6f6e  ent.subscription
+00010550: 2066 6f72 2061 2073 7472 6561 6d2e 0a0a   for a stream...
+00010560: 5468 6973 206d 6574 686f 6420 6861 7320  This method has 
+00010570: 7477 6f20 7265 7175 6972 6564 2061 7267  two required arg
+00010580: 756d 656e 7473 2c20 6067 726f 7570 5f6e  uments, `group_n
+00010590: 616d 6560 2061 6e64 2060 7374 7265 616d  ame` and `stream
+000105a0: 5f6e 616d 6560 2c20 7768 6963 680a 7368  _name`, which.sh
+000105b0: 6f75 6c64 206d 6174 6368 2074 6865 2076  ould match the v
+000105c0: 616c 7565 7320 6f66 2061 7267 756d 656e  alues of argumen
+000105d0: 7473 2075 7365 6420 7768 656e 2063 616c  ts used when cal
+000105e0: 6c69 6e67 2060 6372 6561 7465 5f73 7472  ling `create_str
+000105f0: 6561 6d5f 7375 6273 6372 6970 7469 6f6e  eam_subscription
+00010600: 2829 602e 0a0a 5468 6973 206d 6574 686f  ()`...This metho
+00010610: 6420 616c 736f 2074 616b 6573 2061 6e20  d also takes an 
+00010620: 6f70 7469 6f6e 616c 2060 7469 6d65 6f75  optional `timeou
+00010630: 7460 2061 7267 756d 656e 742c 2074 6861  t` argument, tha
+00010640: 740a 6973 2065 7870 6563 7465 6420 746f  t.is expected to
+00010650: 2062 6520 6120 5079 7468 6f6e 2060 666c   be a Python `fl
+00010660: 6f61 7460 2c20 7768 6963 6820 7365 7473  oat`, which sets
+00010670: 2061 2064 6561 646c 696e 650a 666f 7220   a deadline.for 
+00010680: 7468 6520 636f 6d70 6c65 7469 6f6e 206f  the completion o
+00010690: 6620 7468 6520 6752 5043 206f 7065 7261  f the gRPC opera
+000106a0: 7469 6f6e 2e0a 0a60 6060 7079 7468 6f6e  tion...```python
+000106b0: 0a63 6c69 656e 742e 6465 6c65 7465 5f73  .client.delete_s
+000106c0: 7472 6561 6d5f 7375 6273 6372 6970 7469  tream_subscripti
+000106d0: 6f6e 280a 2020 2020 6772 6f75 705f 6e61  on(.    group_na
+000106e0: 6d65 3d67 726f 7570 5f6e 616d 6531 2c0a  me=group_name1,.
+000106f0: 2020 2020 7374 7265 616d 5f6e 616d 653d      stream_name=
+00010700: 7374 7265 616d 5f6e 616d 6532 2c0a 290a  stream_name2,.).
+00010710: 6060 600a 0a23 2320 436f 6e6e 6563 7469  ```..## Connecti
+00010720: 6f6e 0a0a 2323 2320 5265 636f 6e6e 6563  on..### Reconnec
+00010730: 740a 0a54 6865 2060 7265 636f 6e6e 6563  t..The `reconnec
+00010740: 7428 2960 206d 6574 686f 6420 6361 6e20  t()` method can 
+00010750: 6265 2075 7365 6420 746f 206d 616e 7561  be used to manua
+00010760: 6c6c 7920 7265 636f 6e6e 6563 7420 7468  lly reconnect th
+00010770: 6520 636c 6965 6e74 2074 6f20 610a 7375  e client to a.su
+00010780: 6974 6162 6c65 2045 7665 6e74 5374 6f72  itable EventStor
+00010790: 6544 4220 6e6f 6465 2e20 5468 6973 206d  eDB node. This m
+000107a0: 6574 686f 6420 7573 6573 2074 6865 2073  ethod uses the s
+000107b0: 616d 6520 726f 7574 696e 6520 666f 7220  ame routine for 
+000107c0: 7265 6164 696e 6720 7468 650a 636c 7573  reading the.clus
+000107d0: 7465 7220 6e6f 6465 2073 7461 7465 7320  ter node states 
+000107e0: 616e 6420 7468 656e 2063 6f6e 6e65 6374  and then connect
+000107f0: 696e 6720 746f 2061 2073 7569 7461 626c  ing to a suitabl
+00010800: 6520 6e6f 6465 2061 6363 6f72 6469 6e67  e node according
+00010810: 2074 6f20 7468 650a 636c 6965 6e74 2773   to the.client's
+00010820: 206e 6f64 6520 7072 6566 6572 656e 6365   node preference
+00010830: 2074 6861 7420 6973 2075 7365 6420 7768   that is used wh
+00010840: 656e 2074 6865 2063 6c69 656e 7420 6973  en the client is
+00010850: 2063 6f6e 7374 7275 6374 6564 2e20 5468   constructed. Th
+00010860: 6973 0a6d 6574 686f 6420 6973 2074 6872  is.method is thr
+00010870: 6561 642d 7361 6665 2c20 616e 6420 6974  ead-safe, and it
+00010880: 2069 7320 2263 6f6e 7365 7276 6174 6976   is "conservativ
+00010890: 6522 2069 6e20 7468 6174 2c20 7768 656e  e" in that, when
+000108a0: 2069 7420 6973 2063 616c 6c65 640a 6279   it is called.by
+000108b0: 2073 6576 6572 616c 2074 6872 6561 6473   several threads
+000108c0: 2061 7420 7468 6520 7361 6d65 2074 696d   at the same tim
+000108d0: 652c 206f 6e6c 7920 6f6e 6520 7265 636f  e, only one reco
+000108e0: 6e6e 6563 7469 6f6e 2077 696c 6c20 6f63  nnection will oc
+000108f0: 6375 722e 0a43 6f6e 6375 7272 656e 7420  cur..Concurrent 
+00010900: 6174 7465 6d70 7473 2074 6f20 7265 636f  attempts to reco
+00010910: 6e6e 6563 7420 7769 6c6c 2062 6c6f 636b  nnect will block
+00010920: 2075 6e74 696c 2074 6865 2063 6c69 656e   until the clien
+00010930: 7420 6861 7320 7265 636f 6e6e 6563 7465  t has reconnecte
+00010940: 640a 7375 6363 6573 7366 756c 6c79 2c20  d.successfully, 
+00010950: 616e 6420 7468 656e 2074 6865 7920 7769  and then they wi
+00010960: 6c6c 2061 6c6c 2072 6574 7572 6e20 6e6f  ll all return no
+00010970: 726d 616c 6c79 2e0a 0a60 6060 7079 7468  rmally...```pyth
+00010980: 6f6e 0a63 6c69 656e 742e 7265 636f 6e6e  on.client.reconn
+00010990: 6563 7428 290a 6060 600a 0a41 6e20 6578  ect().```..An ex
+000109a0: 616d 706c 6520 6f66 2077 6865 6e20 6974  ample of when it
+000109b0: 206d 6967 6874 2062 6520 6465 7369 7261   might be desira
+000109c0: 626c 6520 746f 2072 6563 6f6e 6e65 6374  ble to reconnect
+000109d0: 206d 616e 7561 6c6c 7920 6973 2077 6865   manually is whe
+000109e0: 6e20 2866 6f72 2070 6572 666f 726d 616e  n (for performan
+000109f0: 6365 0a72 6561 736f 6e73 2920 7468 6520  ce.reasons) the 
+00010a00: 6e6f 6465 2070 7265 6665 7265 6e63 6520  node preference 
+00010a10: 6973 2066 6f72 2074 6865 2063 6c69 656e  is for the clien
+00010a20: 7420 746f 2062 6520 636f 6e6e 6563 7465  t to be connecte
+00010a30: 6420 746f 2061 2066 6f6c 6c6f 7765 7220  d to a follower 
+00010a40: 6e6f 6465 2069 6e20 7468 650a 636c 7573  node in the.clus
+00010a50: 7465 722c 2061 6e64 2c20 6166 7465 7220  ter, and, after 
+00010a60: 6120 636c 7573 7465 7220 6c65 6164 6572  a cluster leader
+00010a70: 2065 6c65 6374 696f 6e2c 2074 6865 2066   election, the f
+00010a80: 6f6c 6c6f 7765 7220 6e6f 6465 2062 6563  ollower node bec
+00010a90: 6f6d 6573 2061 206c 6561 6465 7220 6e6f  omes a leader no
+00010aa0: 6465 2e0a 5265 636f 6e6e 6563 7469 6e67  de..Reconnecting
+00010ab0: 2074 6f20 6120 666f 6c6c 6f77 6572 206e   to a follower n
+00010ac0: 6f64 6520 696e 2074 6869 7320 6361 7365  ode in this case
+00010ad0: 2069 7320 6375 7272 656e 746c 7920 6265   is currently be
+00010ae0: 796f 6e64 2074 6865 2063 6170 6162 696c  yond the capabil
+00010af0: 6974 6965 7320 6f66 0a74 6869 7320 636c  ities of.this cl
+00010b00: 6965 6e74 2c20 6275 7420 7468 6973 2062  ient, but this b
+00010b10: 6568 6176 696f 7220 6d69 6768 7420 6265  ehavior might be
+00010b20: 2069 6d70 6c65 6d65 6e74 6564 2069 6e20   implemented in 
+00010b30: 6120 6675 7475 7265 2072 656c 6561 7365  a future release
+00010b40: 2e0a 0a50 6c65 6173 6520 6e6f 7465 2c20  ...Please note, 
+00010b50: 616c 6c20 7468 6520 636c 6965 6e74 206d  all the client m
+00010b60: 6574 686f 6473 2061 7265 2064 6563 6f72  ethods are decor
+00010b70: 6174 6564 2077 6974 6820 6040 6175 746f  ated with `@auto
+00010b80: 7265 636f 6e6e 6563 7460 2028 7768 6963  reconnect` (whic
+00010b90: 6820 6361 6c6c 7320 7468 650a 6072 6563  h calls the.`rec
+00010ba0: 6f6e 6e65 6374 2829 6020 6d65 7468 6f64  onnect()` method
+00010bb0: 2920 616e 6420 6120 6040 7265 7472 7960  ) and a `@retry`
+00010bc0: 2064 6563 6f72 6174 6f72 2074 6861 7420   decorator that 
+00010bd0: 7769 6c6c 2072 6574 7279 206f 7065 7261  will retry opera
+00010be0: 7469 6f6e 7320 7468 6174 2066 6169 6c0a  tions that fail.
+00010bf0: 6475 6520 746f 2063 6f6e 6e65 6374 696f  due to connectio
+00010c00: 6e20 6973 7375 6573 2e20 5468 6520 6040  n issues. The `@
+00010c10: 6175 746f 7265 636f 6e6e 6563 7460 2064  autoreconnect` d
+00010c20: 6563 6f72 6174 6f72 2077 696c 6c20 7265  ecorator will re
+00010c30: 636f 6e6e 6563 7420 746f 2061 6e20 6176  connect to an av
+00010c40: 6169 6c61 626c 650a 6e6f 6465 2069 6e20  ailable.node in 
+00010c50: 7468 6520 636c 7573 7465 7220 7768 656e  the cluster when
+00010c60: 2074 6865 2073 6572 7665 7220 7468 6174   the server that
+00010c70: 2074 6865 2063 6c69 656e 7420 6861 7320   the client has 
+00010c80: 6265 656e 2063 6f6e 6e65 6374 6564 2074  been connected t
+00010c90: 6f20 6861 7320 6265 636f 6d65 0a75 6e61  o has become.una
+00010ca0: 7661 696c 6162 6c65 2c20 6f72 2069 6620  vailable, or if 
+00010cb0: 7468 6520 636c 6965 6e74 2773 2067 5250  the client's gRP
+00010cc0: 4320 6368 616e 6e65 6c20 6861 7070 656e  C channel happen
+00010cd0: 7320 746f 2068 6176 6520 6265 656e 2063  s to have been c
+00010ce0: 6c6f 7365 642c 2061 6e64 2061 6c73 6f20  losed, and also 
+00010cf0: 7768 656e 0a61 206d 6574 686f 6420 6973  when.a method is
+00010d00: 2063 616c 6c65 6420 7468 6174 2072 6571   called that req
+00010d10: 7569 7265 7320 6120 6c65 6164 6572 2062  uires a leader b
+00010d20: 7574 2074 6865 206e 6f64 6520 7468 6174  ut the node that
+00010d30: 2074 6865 2063 6c69 656e 7420 6861 7320   the client has 
+00010d40: 6265 656e 0a63 6f6e 6e65 6374 6564 2074  been.connected t
+00010d50: 6f20 7374 6f70 7320 6265 696e 6720 7468  o stops being th
+00010d60: 6520 6c65 6164 6572 2074 6865 6e20 7468  e leader then th
+00010d70: 6520 636c 6965 6e74 2077 696c 6c20 7265  e client will re
+00010d80: 636f 6e6e 6563 7420 746f 2074 6865 2063  connect to the c
+00010d90: 7572 7265 6e74 0a6c 6561 6465 722e 2054  urrent.leader. T
+00010da0: 6865 2060 4072 6574 7279 6020 6465 636f  he `@retry` deco
+00010db0: 7261 746f 7220 7769 6c6c 2074 6865 6e20  rator will then 
+00010dc0: 7265 7472 7920 6f70 6572 6174 696f 6e73  retry operations
+00010dd0: 2074 6861 7420 6861 7665 2066 6169 6c65   that have faile
+00010de0: 6420 6475 6520 746f 0a74 6865 7365 2063  d due to.these c
+00010df0: 6f6e 6e65 6374 696f 6e20 6973 7375 6573  onnection issues
+00010e00: 2e20 5468 6973 206d 6561 6e73 2074 6861  . This means tha
+00010e10: 7420 6120 6d65 7468 6f64 2074 6861 7420  t a method that 
+00010e20: 6861 7320 6661 696c 6564 2064 7565 2074  has failed due t
+00010e30: 6f20 636f 6e6e 6563 7469 6f6e 0a69 7373  o connection.iss
+00010e40: 7565 7320 7769 6c6c 2062 6520 7265 7472  ues will be retr
+00010e50: 6965 6420 6166 7465 7220 7468 6520 636c  ied after the cl
+00010e60: 6965 6e74 2068 6173 2072 6563 6f6e 6e65  ient has reconne
+00010e70: 6374 6564 2e0a 0a50 6c65 6173 6520 616c  cted...Please al
+00010e80: 736f 206e 6f74 652c 2074 6865 2065 7863  so note, the exc
+00010e90: 6570 7469 6f6e 7320 746f 2074 6869 7320  eptions to this 
+00010ea0: 6265 6861 7669 6f75 7220 6861 7665 2074  behaviour have t
+00010eb0: 6f20 646f 2077 6974 6820 7468 6520 6d65  o do with the me
+00010ec0: 7468 6f64 7320 7468 6174 0a72 6574 7572  thods that.retur
+00010ed0: 6e20 6974 6572 6174 6f72 732e 2046 6f72  n iterators. For
+00010ee0: 2065 7861 6d70 6c65 2c20 616e 2065 7665   example, an eve
+00010ef0: 6e74 2d70 726f 6365 7373 696e 6720 636f  nt-processing co
+00010f00: 6d70 6f6e 656e 7420 7468 6174 2069 7465  mponent that ite
+00010f10: 7261 7465 7320 6f76 6572 2074 6865 0a72  rates over the.r
+00010f20: 6573 706f 6e73 6520 746f 2061 2063 6174  esponse to a cat
+00010f30: 6368 2d75 7020 7375 6273 6372 6970 7469  ch-up subscripti
+00010f40: 6f6e 206d 6574 686f 6420 6361 6c6c 2077  on method call w
+00010f50: 696c 6c20 616c 7761 7973 206e 6565 6420  ill always need 
+00010f60: 746f 2062 6520 6d6f 6e69 746f 7265 6420  to be monitored 
+00010f70: 666f 720a 6572 726f 7273 2c20 616e 642c  for.errors, and,
+00010f80: 2069 6620 6974 2066 6169 6c73 2061 6674   if it fails aft
+00010f90: 6572 2069 7420 6861 7320 7374 6172 7465  er it has starte
+00010fa0: 6420 6974 6572 6174 696e 6720 6f76 6572  d iterating over
+00010fb0: 2074 6865 2072 6573 706f 6e73 652c 2074   the response, t
+00010fc0: 6865 2063 6174 6368 2d75 700a 7375 6273  he catch-up.subs
+00010fd0: 6372 6970 7469 6f6e 2077 696c 6c20 6e65  cription will ne
+00010fe0: 6564 2074 6f20 6265 2072 6573 7461 7274  ed to be restart
+00010ff0: 6564 2066 726f 6d20 7468 6520 6576 656e  ed from the even
+00011000: 742d 7072 6f63 6573 7369 6e67 2063 6f6d  t-processing com
+00011010: 706f 6e65 6e74 2773 206c 6173 7420 7361  ponent's last sa
+00011020: 7665 640a 636f 6d6d 6974 2070 6f73 6974  ved.commit posit
+00011030: 696f 6e2e 2049 6e20 7468 6973 2063 6173  ion. In this cas
+00011040: 652c 2074 6865 2063 6c69 656e 7420 7769  e, the client wi
+00011050: 6c6c 2061 7574 6f6d 6174 6963 616c 6c79  ll automatically
+00011060: 2072 6563 6f6e 6e65 6374 2074 6f20 6120   reconnect to a 
+00011070: 6e6f 6465 2069 6e20 7468 650a 636c 7573  node in the.clus
+00011080: 7465 7220 7768 656e 2074 6865 2073 7562  ter when the sub
+00011090: 7365 7175 656e 7420 6361 6c6c 2074 6f20  sequent call to 
+000110a0: 6120 6361 7463 682d 7570 2073 7562 7363  a catch-up subsc
+000110b0: 7269 7074 696f 6e20 6d65 7468 6f64 2069  ription method i
+000110c0: 7320 6d61 6465 2e20 596f 7520 6a75 7374  s made. You just
+000110d0: 0a6e 6565 6420 746f 2068 616e 646c 6520  .need to handle 
+000110e0: 7468 6520 6578 6365 7074 696f 6e20 7468  the exception th
+000110f0: 6174 206f 6363 7572 7320 6672 6f6d 2074  at occurs from t
+00011100: 6865 2069 7465 7261 746f 722c 2074 6865  he iterator, the
+00011110: 6e20 7265 6164 2079 6f75 7220 6c61 7374  n read your last
+00011120: 2073 6176 6564 0a63 6f6d 6d69 7420 706f   saved.commit po
+00011130: 7369 7469 6f6e 2c20 616e 6420 7468 656e  sition, and then
+00011140: 2072 6573 7461 7274 2079 6f75 7220 6576   restart your ev
+00011150: 656e 742d 7072 6f63 6573 7369 6e67 2063  ent-processing c
+00011160: 6f6d 706f 6e65 6e74 2c20 7573 696e 6720  omponent, using 
+00011170: 7468 6520 7361 6d65 0a60 4553 4442 436c  the same.`ESDBCl
+00011180: 6965 6e74 6020 696e 7374 616e 6365 2c20  ient` instance, 
+00011190: 6275 7420 7769 7468 2061 206e 6577 2063  but with a new c
+000111a0: 6174 6368 2d75 7020 7375 6273 6372 6970  atch-up subscrip
+000111b0: 7469 6f6e 2069 7465 7261 746f 722e 2053  tion iterator. S
+000111c0: 696d 696c 6172 6c79 2c20 7768 656e 0a72  imilarly, when.r
+000111d0: 6561 6469 6e67 2070 6572 7369 7374 656e  eading persisten
+000111e0: 7420 7375 6273 6372 6970 7469 6f6e 733a  t subscriptions:
+000111f0: 2069 6620 7468 6572 6520 6172 6520 636f   if there are co
+00011200: 6e6e 6563 7469 7669 7479 2069 7373 7565  nnectivity issue
+00011210: 7320 6166 7465 7220 796f 7520 6861 7665  s after you have
+00011220: 0a73 7461 7274 6564 2069 7465 7261 7469  .started iterati
+00011230: 6e67 206f 7665 7220 7468 6520 7265 7370  ng over the resp
+00011240: 6f6e 7365 2c20 7468 656e 2074 6865 2073  onse, then the s
+00011250: 6572 7665 7220 6361 6c6c 2077 696c 6c20  erver call will 
+00011260: 6e65 6564 2074 6f20 6265 2072 6573 7461  need to be resta
+00011270: 7274 6564 2e0a 466f 7220 7468 6520 6f70  rted..For the op
+00011280: 6572 6174 696f 6e73 2072 6574 7572 6e20  erations return 
+00011290: 616e 2069 7465 7261 746f 722c 2074 6865  an iterator, the
+000112a0: 2064 6563 6f72 6174 6f72 7320 6d65 6e74   decorators ment
+000112b0: 696f 6e65 6420 6162 6f76 6520 7769 6c6c  ioned above will
+000112c0: 2068 6176 6520 6578 6974 6564 0a62 6566   have exited.bef
+000112d0: 6f72 6520 616e 7920 7375 6273 6571 7565  ore any subseque
+000112e0: 6e74 2067 5250 4320 7374 7265 616d 696e  nt gRPC streamin
+000112f0: 6720 6572 726f 7220 6f63 6375 7273 2e0a  g error occurs..
+00011300: 0a0a 2323 2320 436c 6f73 650a 0a54 6865  ..### Close..The
+00011310: 2060 636c 6f73 6528 2960 206d 6574 686f   `close()` metho
+00011320: 6420 6361 6e20 6265 2075 7365 6420 746f  d can be used to
+00011330: 2063 6c65 616e 6c79 2063 6c6f 7365 2074   cleanly close t
+00011340: 6865 2067 5250 4320 636f 6e6e 6563 7469  he gRPC connecti
+00011350: 6f6e 2e0a 0a60 6060 7079 7468 6f6e 0a63  on...```python.c
+00011360: 6c69 656e 742e 636c 6f73 6528 290a 6060  lient.close().``
+00011370: 600a 0a23 2320 4e6f 7465 730a 0a23 2323  `..## Notes..###
+00011380: 2043 6f6e 6e65 6374 696f 6e20 7374 7269   Connection stri
+00011390: 6e67 730a 0a54 6865 2045 7665 6e74 5374  ngs..The EventSt
+000113a0: 6f72 6544 4220 636f 6e6e 6563 7469 6f6e  oreDB connection
+000113b0: 2073 7472 696e 6720 6973 2061 2055 5249   string is a URI
+000113c0: 2074 6861 7420 636f 6e66 6f72 6d73 2077   that conforms w
+000113d0: 6974 6820 6f6e 6520 6f66 2074 776f 2070  ith one of two p
+000113e0: 6f73 7369 626c 650a 7363 6865 6d65 732c  ossible.schemes,
+000113f0: 2065 6974 6865 7220 7468 6520 2265 7364   either the "esd
+00011400: 6222 2073 6368 656d 6520 6f72 2074 6865  b" scheme or the
+00011410: 2022 6573 6462 2b64 6973 636f 7665 7222   "esdb+discover"
+00011420: 2073 6368 656d 652e 2054 6865 2073 796e   scheme. The syn
+00011430: 7461 7820 616e 640a 7365 6d61 6e74 6963  tax and.semantic
+00011440: 7320 6f66 2074 6865 2045 7665 6e74 5374  s of the EventSt
+00011450: 6f72 6544 4220 5552 4920 7363 6865 6d65  oreDB URI scheme
+00011460: 7320 6172 6520 6578 706c 6169 6e65 6420  s are explained 
+00011470: 6265 6c6f 772e 2054 6865 2073 796e 7461  below. The synta
+00011480: 7820 6973 0a64 6566 696e 6564 2075 7369  x is.defined usi
+00011490: 6e67 205b 4542 4e46 5d28 6874 7470 733a  ng [EBNF](https:
+000114a0: 2f2f 656e 2e77 696b 6970 6564 6961 2e6f  //en.wikipedia.o
+000114b0: 7267 2f77 696b 692f 4578 7465 6e64 6564  rg/wiki/Extended
+000114c0: 5f42 6163 6b75 73e2 8093 4e61 7572 5f66  _Backus...Naur_f
+000114d0: 6f72 6d29 2e0a 0a54 6865 2022 6573 6462  orm)...The "esdb
+000114e0: 2220 5552 4920 7363 6865 6d65 2063 616e  " URI scheme can
+000114f0: 2062 6520 6465 6669 6e65 6420 696e 2074   be defined in t
+00011500: 6865 2066 6f6c 6c6f 7769 6e67 2077 6179  he following way
+00011510: 2e0a 0a20 2020 2065 7364 622d 7572 6920  ...    esdb-uri 
+00011520: 3d20 2265 7364 623a 2f2f 2220 2c20 5b20  = "esdb://" , [ 
+00011530: 7573 6572 2d69 6e66 6f20 2c20 2240 2220  user-info , "@" 
+00011540: 5d20 2c20 6772 7063 2d74 6172 6765 742c  ] , grpc-target,
+00011550: 207b 2022 2c22 202c 2067 7270 632d 7461   { "," , grpc-ta
+00011560: 7267 6574 207d 202c 205b 2022 3f22 202c  rget } , [ "?" ,
+00011570: 2071 7565 7279 2d73 7472 696e 6720 5d20   query-string ] 
+00011580: 3b0a 0a49 6e20 7468 6520 2265 7364 6222  ;..In the "esdb"
+00011590: 2055 5249 2073 6368 656d 652c 2061 6674   URI scheme, aft
+000115a0: 6572 2074 6865 206f 7074 696f 6e61 6c20  er the optional 
+000115b0: 7573 6572 2069 6e66 6f20 7374 7269 6e67  user info string
+000115c0: 2c20 7468 6572 6520 6d75 7374 2062 6520  , there must be 
+000115d0: 6174 206c 6561 7374 0a6f 6e65 2067 5250  at least.one gRP
+000115e0: 4320 7461 7267 6574 2e20 4966 2074 6865  C target. If the
+000115f0: 7265 2061 7265 2073 6576 6572 616c 2067  re are several g
+00011600: 5250 4320 7461 7267 6574 732c 2074 6865  RPC targets, the
+00011610: 7920 6d75 7374 2062 6520 7365 7061 7261  y must be separa
+00011620: 7465 6420 6672 6f6d 2065 6163 680a 6f74  ted from each.ot
+00011630: 6865 7220 7769 7468 2074 6865 2022 2c22  her with the ","
+00011640: 2063 6861 7261 6374 6572 2e20 4561 6368   character. Each
+00011650: 2067 5250 4320 7461 7267 6574 2073 686f   gRPC target sho
+00011660: 756c 6420 696e 6469 6361 7465 2061 6e20  uld indicate an 
+00011670: 4576 656e 7453 746f 7265 4442 2067 5250  EventStoreDB gRP
+00011680: 430a 7365 7276 6572 2073 6f63 6b65 742c  C.server socket,
+00011690: 2062 7920 7370 6563 6966 7969 6e67 2061   by specifying a
+000116a0: 2068 6f73 7420 616e 6420 6120 706f 7274   host and a port
+000116b0: 206e 756d 6265 7220 7365 7061 7261 7465   number separate
+000116c0: 6420 7769 7468 2074 6865 2022 3a22 2063  d with the ":" c
+000116d0: 6861 7261 6374 6572 2e0a 5468 6520 686f  haracter..The ho
+000116e0: 7374 206d 6179 2062 6520 6120 686f 7374  st may be a host
+000116f0: 6e61 6d65 2074 6861 7420 6361 6e20 6265  name that can be
+00011700: 2072 6573 6f6c 7665 6420 746f 2061 6e20   resolved to an 
+00011710: 4950 2061 6464 7265 7373 2c20 6f72 2061  IP address, or a
+00011720: 6e20 4950 2061 6464 7265 7373 2e0a 0a20  n IP address... 
+00011730: 2020 2067 7270 632d 7461 7267 6574 203d     grpc-target =
+00011740: 2028 2068 6f73 746e 616d 6520 7c20 6970   ( hostname | ip
+00011750: 2d61 6464 7265 7373 2029 202c 2022 3a22  -address ) , ":"
+00011760: 202c 2070 6f72 742d 6e75 6d62 6572 203b   , port-number ;
+00011770: 0a0a 0a54 6865 2022 6573 6462 2b64 6973  ...The "esdb+dis
+00011780: 636f 7665 7222 2055 5249 2073 6368 656d  cover" URI schem
+00011790: 6520 6361 6e20 6265 2064 6566 696e 6564  e can be defined
+000117a0: 2069 6e20 7468 6520 666f 6c6c 6f77 696e   in the followin
+000117b0: 6720 7761 792e 0a0a 2020 2020 6573 6462  g way...    esdb
+000117c0: 2d64 6973 636f 7665 722d 7572 6920 3d20  -discover-uri = 
+000117d0: 2265 7364 622b 6469 7363 6f76 6572 3a2f  "esdb+discover:/
+000117e0: 2f22 202c 205b 2075 7365 722d 696e 666f  /" , [ user-info
+000117f0: 2c20 2240 2220 5d20 2c20 636c 7573 7465  , "@" ] , cluste
+00011800: 722d 646f 6d61 696e 6e61 6d65 202c 205b  r-domainname , [
+00011810: 2022 3f22 202c 2071 7565 7279 2d73 7472   "?" , query-str
+00011820: 696e 6720 5d20 3b0a 0a49 6e20 7468 6520  ing ] ;..In the 
+00011830: 2265 7364 622b 6469 7363 6f76 6572 2220  "esdb+discover" 
+00011840: 5552 4920 7363 6865 6d65 2c20 6166 7465  URI scheme, afte
+00011850: 7220 7468 6520 7573 6572 2069 6e66 6f20  r the user info 
+00011860: 7374 7269 6e67 2c20 7468 6572 6520 6d75  string, there mu
+00011870: 7374 2062 6520 6120 646f 6d61 696e 0a6e  st be a domain.n
+00011880: 616d 6520 7768 6963 6820 7368 6f75 6c64  ame which should
+00011890: 2069 6465 6e74 6966 7920 6120 636c 7573   identify a clus
+000118a0: 7465 7220 6f66 2045 7665 6e74 5374 6f72  ter of EventStor
+000118b0: 6544 4220 7365 7276 6572 732e 2054 6865  eDB servers. The
+000118c0: 2063 6c69 656e 7420 7769 6c6c 2075 7365   client will use
+000118d0: 2061 2044 4e53 0a73 6572 7665 7220 746f   a DNS.server to
+000118e0: 2072 6573 6f6c 7665 2074 6865 2064 6f6d   resolve the dom
+000118f0: 6169 6e20 6e61 6d65 2074 6f20 6120 6c69  ain name to a li
+00011900: 7374 206f 6620 6164 6472 6573 7365 7320  st of addresses 
+00011910: 6f66 2045 7665 6e74 5374 6f72 6544 4220  of EventStoreDB 
+00011920: 7365 7276 6572 732c 0a62 7920 7175 6572  servers,.by quer
+00011930: 7969 6e67 2066 6f72 2027 4127 2072 6563  ying for 'A' rec
+00011940: 6f72 6473 2e20 496e 2074 6869 7320 6361  ords. In this ca
+00011950: 7365 2c20 7468 6520 706f 7274 206e 756d  se, the port num
+00011960: 6265 7220 2232 3131 3322 2077 696c 6c20  ber "2113" will 
+00011970: 6265 2075 7365 6420 746f 0a63 6f6e 7374  be used to.const
+00011980: 7275 6374 2067 5250 4320 7461 7267 6574  ruct gRPC target
+00011990: 7320 6672 6f6d 2074 6865 2061 6464 7265  s from the addre
+000119a0: 7373 6573 206f 6274 6169 6e65 6420 6672  sses obtained fr
+000119b0: 6f6d 2027 4127 2072 6563 6f72 6473 2070  om 'A' records p
+000119c0: 726f 7669 6465 6420 6279 2074 6865 0a44  rovided by the.D
+000119d0: 4e53 2073 6572 7665 722e 2054 6865 7265  NS server. There
+000119e0: 666f 7265 2c20 6966 2079 6f75 2077 616e  fore, if you wan
+000119f0: 7420 746f 2075 7365 2074 6865 2022 6573  t to use the "es
+00011a00: 6462 2b64 6973 636f 7665 7222 2055 5249  db+discover" URI
+00011a10: 2073 6368 656d 652c 2079 6f75 2077 696c   scheme, you wil
+00011a20: 6c0a 6e65 6564 2074 6f20 636f 6e66 6967  l.need to config
+00011a30: 7572 6520 444e 5320 7768 656e 2073 6574  ure DNS when set
+00011a40: 7469 6e67 2075 7020 796f 7572 2045 7665  ting up your Eve
+00011a50: 6e74 5374 6f72 6544 4220 636c 7573 7465  ntStoreDB cluste
+00011a60: 722e 0a0a 5769 7468 2062 6f74 6820 7468  r...With both th
+00011a70: 6520 2265 7364 6222 2061 6e64 2022 6573  e "esdb" and "es
+00011a80: 6462 2b64 6973 6f63 7665 7222 2055 5249  db+disocver" URI
+00011a90: 2073 6368 656d 6573 2c20 7468 6520 636c   schemes, the cl
+00011aa0: 6965 6e74 2066 6972 7374 6c79 206f 6274  ient firstly obt
+00011ab0: 6169 6e73 0a61 206c 6973 7420 6f66 2067  ains.a list of g
+00011ac0: 5250 4320 7461 7267 6574 733a 2065 6974  RPC targets: eit
+00011ad0: 6865 7220 6469 7265 6374 6c79 2066 726f  her directly fro
+00011ae0: 6d20 2265 7364 6222 2063 6f6e 6e65 6374  m "esdb" connect
+00011af0: 696f 6e20 7374 7269 6e67 733b 206f 7220  ion strings; or 
+00011b00: 696e 6469 7265 6374 6c79 0a66 726f 6d20  indirectly.from 
+00011b10: 2265 7364 622b 6469 7363 6f76 6572 2220  "esdb+discover" 
+00011b20: 636f 6e6e 6563 7469 6f6e 2073 7472 696e  connection strin
+00011b30: 6773 2076 6961 2044 4e53 2e20 5468 6973  gs via DNS. This
+00011b40: 206c 6973 7420 6f66 2074 6172 6765 7473   list of targets
+00011b50: 2069 7320 6b6e 6f77 6e20 6173 2074 6865   is known as the
+00011b60: 0a22 676f 7373 6970 2073 6565 6422 2e20  ."gossip seed". 
+00011b70: 5468 6520 636c 6965 6e74 2077 696c 6c20  The client will 
+00011b80: 7468 656e 2061 7474 656d 7074 2074 6f20  then attempt to 
+00011b90: 636f 6e6e 6563 7420 746f 2065 6163 6820  connect to each 
+00011ba0: 6752 5043 2074 6172 6765 7420 696e 2074  gRPC target in t
+00011bb0: 7572 6e2c 0a61 7474 656d 7074 696e 6720  urn,.attempting 
+00011bc0: 746f 2063 616c 6c20 7468 6520 4576 656e  to call the Even
+00011bd0: 7453 746f 7265 4442 2047 6f73 7369 7020  tStoreDB Gossip 
+00011be0: 4150 4920 746f 206f 6274 6169 6e20 696e  API to obtain in
+00011bf0: 666f 726d 6174 696f 6e20 6162 6f75 7420  formation about 
+00011c00: 7468 650a 4576 656e 7453 746f 7265 4442  the.EventStoreDB
+00011c10: 2063 6c75 7374 6572 2e20 4120 6d65 6d62   cluster. A memb
+00011c20: 6572 206f 6620 7468 6520 636c 7573 7465  er of the cluste
+00011c30: 7220 6973 2073 656c 6563 7465 6420 6279  r is selected by
+00011c40: 2074 6865 2063 6c69 656e 742c 2061 6363   the client, acc
+00011c50: 6f72 6469 6e67 0a74 6f20 7468 6520 226e  ording.to the "n
+00011c60: 6f64 6520 7072 6566 6572 656e 6365 2220  ode preference" 
+00011c70: 6f70 7469 6f6e 2028 7365 6520 6265 6c6f  option (see belo
+00011c80: 7729 2e20 5468 6520 636c 6965 6e74 206d  w). The client m
+00011c90: 6179 2074 6865 6e20 6e65 6564 2074 6f20  ay then need to 
+00011ca0: 636c 6f73 6520 6974 730a 636f 6e6e 6563  close its.connec
+00011cb0: 7469 6f6e 2061 6e64 2072 6563 6f6e 6e65  tion and reconne
+00011cc0: 6374 2074 6f20 7468 6520 7365 6c65 6374  ct to the select
+00011cd0: 6564 2073 6572 7665 722e 0a0a 496e 2062  ed server...In b
+00011ce0: 6f74 6820 7468 6520 2265 7364 6222 2061  oth the "esdb" a
+00011cf0: 6e64 2022 6573 6462 2b64 6973 636f 7665  nd "esdb+discove
+00011d00: 7222 2073 6368 656d 6573 2c20 7468 6520  r" schemes, the 
+00011d10: 5552 4920 6d61 7920 696e 636c 7564 6520  URI may include 
+00011d20: 6120 7573 6572 2069 6e66 6f20 7374 7269  a user info stri
+00011d30: 6e67 2e0a 4966 2069 7420 6578 6973 7473  ng..If it exists
+00011d40: 2069 6e20 7468 6520 5552 492c 2074 6865   in the URI, the
+00011d50: 2075 7365 7220 696e 666f 2073 7472 696e   user info strin
+00011d60: 6720 6d75 7374 2062 6520 7365 7061 7261  g must be separa
+00011d70: 7465 6420 6672 6f6d 2074 6865 2072 6573  ted from the res
+00011d80: 7420 6f66 2074 6865 2055 5249 0a77 6974  t of the URI.wit
+00011d90: 6820 7468 6520 2240 2220 6368 6172 6163  h the "@" charac
+00011da0: 7465 722e 2054 6865 2075 7365 7220 696e  ter. The user in
+00011db0: 666f 2073 7472 696e 6720 6d75 7374 2069  fo string must i
+00011dc0: 6e63 6c75 6465 2061 2075 7365 726e 616d  nclude a usernam
+00011dd0: 6520 616e 6420 6120 7061 7373 776f 7264  e and a password
+00011de0: 2c0a 7365 7061 7261 7465 6420 7769 7468  ,.separated with
+00011df0: 2074 6865 2022 3a22 2063 6861 7261 6374   the ":" charact
+00011e00: 6572 2e0a 0a20 2020 2075 7365 722d 696e  er...    user-in
+00011e10: 666f 203d 2075 7365 726e 616d 6520 2c20  fo = username , 
+00011e20: 223a 2220 2c20 7061 7373 776f 7264 203b  ":" , password ;
+00011e30: 0a0a 5468 6520 7573 6572 2069 6e66 6f20  ..The user info 
+00011e40: 6973 2073 656e 7420 6279 2074 6865 2063  is sent by the c
+00011e50: 6c69 656e 7420 6173 2022 6361 6c6c 2063  lient as "call c
+00011e60: 7265 6465 6e74 6961 6c73 2220 696e 2065  redentials" in e
+00011e70: 6163 6820 6361 6c6c 2074 6f20 6120 2273  ach call to a "s
+00011e80: 6563 7572 6522 0a73 6572 7665 722c 2069  ecure".server, i
+00011e90: 6e20 6120 2262 6173 6963 2061 7574 6822  n a "basic auth"
+00011ea0: 2061 7574 686f 7269 7a61 7469 6f6e 2068   authorization h
+00011eb0: 6561 6465 722e 2054 6869 7320 6175 7468  eader. This auth
+00011ec0: 6f72 697a 6174 696f 6e20 6865 6164 6572  orization header
+00011ed0: 2069 7320 7573 6564 2062 790a 7468 6520   is used by.the 
+00011ee0: 7365 7276 6572 2074 6f20 6175 7468 656e  server to authen
+00011ef0: 7469 6361 7465 2074 6865 2063 6c69 656e  ticate the clien
+00011f00: 742e 2054 6865 2061 7574 686f 7269 7a61  t. The authoriza
+00011f10: 7469 6f6e 2068 6561 6465 7220 6973 206e  tion header is n
+00011f20: 6f74 2073 656e 7420 746f 0a22 696e 7365  ot sent to."inse
+00011f30: 6375 7265 2220 7365 7276 6572 732e 0a0a  cure" servers...
+00011f40: 496e 2062 6f74 6820 7468 6520 2265 7364  In both the "esd
+00011f50: 6222 2061 6e64 2022 6573 6462 2b64 6973  b" and "esdb+dis
+00011f60: 636f 7665 7222 2073 6368 656d 6573 2c20  cover" schemes, 
+00011f70: 7468 6520 6f70 7469 6f6e 616c 2071 7565  the optional que
+00011f80: 7279 2073 7472 696e 6720 6d75 7374 2062  ry string must b
+00011f90: 6520 6f6e 650a 6f72 206d 616e 7920 6669  e one.or many fi
+00011fa0: 656c 642d 7661 6c75 6520 6172 6775 6d65  eld-value argume
+00011fb0: 6e74 732c 2073 6570 6172 6174 6564 2066  nts, separated f
+00011fc0: 726f 6d20 6561 6368 206f 7468 6572 2077  rom each other w
+00011fd0: 6974 6820 7468 6520 2226 2220 6368 6172  ith the "&" char
+00011fe0: 6163 7465 722e 0a0a 2020 2020 7175 6572  acter...    quer
+00011ff0: 792d 7374 7269 6e67 203d 2066 6965 6c64  y-string = field
+00012000: 2d76 616c 7565 2c20 7b20 2226 222c 2066  -value, { "&", f
+00012010: 6965 6c64 2d76 616c 7565 207d 203b 0a0a  ield-value } ;..
+00012020: 4561 6368 2066 6965 6c64 2d76 616c 7565  Each field-value
+00012030: 2061 7267 756d 656e 7420 6d75 7374 2062   argument must b
+00012040: 6520 6f6e 6520 6f66 2074 6865 2073 7570  e one of the sup
+00012050: 706f 7274 6564 2066 6965 6c64 732c 2061  ported fields, a
+00012060: 6e64 2061 6e0a 6170 7072 6f70 7269 6174  nd an.appropriat
+00012070: 6520 7661 6c75 652c 2073 6570 6172 6174  e value, separat
+00012080: 6564 2077 6974 6820 7468 6520 223d 2220  ed with the "=" 
+00012090: 6368 6172 6163 7465 722e 0a0a 2020 2020  character...    
+000120a0: 6669 656c 642d 7661 6c75 6520 3d20 2820  field-value = ( 
+000120b0: 2254 6c73 222c 2022 3d22 202c 2022 7472  "Tls", "=" , "tr
+000120c0: 7565 2220 7c20 2266 616c 7365 2220 290a  ue" | "false" ).
+000120d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000120e0: 7c20 2820 2254 6c73 5665 7269 6679 4365  | ( "TlsVerifyCe
+000120f0: 7274 222c 2022 3d22 202c 2022 7472 7565  rt", "=" , "true
+00012100: 2220 7c20 2266 616c 7365 2220 290a 2020  " | "false" ).  
+00012110: 2020 2020 2020 2020 2020 2020 2020 7c20                | 
+00012120: 2820 2243 6f6e 6e65 6374 696f 6e4e 616d  ( "ConnectionNam
+00012130: 6522 2c20 223d 2220 2c20 7374 7269 6e67  e", "=" , string
+00012140: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
+00012150: 2020 207c 2028 2022 4e6f 6465 5072 6566     | ( "NodePref
+00012160: 6572 656e 6365 222c 2022 3d22 202c 2022  erence", "=" , "
+00012170: 6c65 6164 6572 2220 7c20 2266 6f6c 6c6f  leader" | "follo
+00012180: 7765 7222 207c 2022 7265 6164 6f6e 6c79  wer" | "readonly
+00012190: 7265 706c 6963 6122 207c 2022 7261 6e64  replica" | "rand
+000121a0: 6f6d 2220 290a 2020 2020 2020 2020 2020  om" ).          
+000121b0: 2020 2020 2020 7c20 2820 2244 6566 6175        | ( "Defau
+000121c0: 6c74 4465 6164 6c69 6e65 222c 2022 3d22  ltDeadline", "="
+000121d0: 202c 2069 6e74 6567 6572 2029 0a20 2020   , integer ).   
+000121e0: 2020 2020 2020 2020 2020 2020 207c 2028               | (
+000121f0: 2022 476f 7373 6970 5469 6d65 6f75 7422   "GossipTimeout"
+00012200: 2c20 223d 2220 2c20 696e 7465 6765 7220  , "=" , integer 
+00012210: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00012220: 2020 7c20 2820 224d 6178 4469 7363 6f76    | ( "MaxDiscov
+00012230: 6572 4174 7465 6d70 7473 222c 2022 3d22  erAttempts", "="
+00012240: 202c 2069 6e74 6567 6572 2029 0a20 2020   , integer ).   
+00012250: 2020 2020 2020 2020 2020 2020 207c 2028               | (
+00012260: 2022 4469 7363 6f76 6572 7949 6e74 6572   "DiscoveryInter
+00012270: 7661 6c22 2c20 223d 2220 2c20 696e 7465  val", "=" , inte
+00012280: 6765 7220 290a 2020 2020 2020 2020 2020  ger ).          
+00012290: 2020 2020 2020 7c20 2820 224d 6178 4469        | ( "MaxDi
+000122a0: 7363 6f76 6572 4174 7465 6d70 7473 222c  scoverAttempts",
+000122b0: 2022 3d22 202c 2069 6e74 6567 6572 2029   "=" , integer )
+000122c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000122d0: 207c 2028 2022 4b65 6570 416c 6976 6549   | ( "KeepAliveI
+000122e0: 6e74 6572 7661 6c22 2c20 223d 2220 2c20  nterval", "=" , 
+000122f0: 696e 7465 6765 7220 290a 2020 2020 2020  integer ).      
+00012300: 2020 2020 2020 2020 2020 7c20 2820 224b            | ( "K
+00012310: 6565 7041 6c69 7665 496e 7465 7276 616c  eepAliveInterval
+00012320: 222c 2022 3d22 202c 2069 6e74 6567 6572  ", "=" , integer
+00012330: 2029 203b 0a0a 5468 6520 7461 626c 6520   ) ;..The table 
+00012340: 6265 6c6f 7720 6465 7363 7269 6265 7320  below describes 
+00012350: 7468 6520 7175 6572 7920 6669 656c 642d  the query field-
+00012360: 7661 6c75 6573 2073 7570 706f 7274 6564  values supported
+00012370: 2062 7920 7468 6973 2063 6c69 656e 742e   by this client.
+00012380: 0a0a 7c20 4669 656c 6420 2020 2020 2020  ..| Field       
+00012390: 2020 2020 2020 2020 7c20 5661 6c75 6520          | Value 
+000123a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000123b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000123c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000123d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000123e0: 7c20 4465 7363 7269 7074 696f 6e20 2020  | Description   
+000123f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012400: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012480: 2020 2020 7c0a 7c2d 2d2d 2d2d 2d2d 2d2d      |.|---------
+00012490: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 7c2d 2d2d  ------------|---
+000124a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000124b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000124c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000124d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000124e0: 2d2d 2d2d 7c2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----|-----------
+000124f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012500: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012510: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012520: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012530: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012540: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012550: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012560: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012570: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012580: 2d2d 2d2d 2d2d 2d2d 7c0a 7c20 546c 7320  --------|.| Tls 
+00012590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000125a0: 7c20 2274 7275 6522 2c20 2266 616c 7365  | "true", "false
+000125b0: 2220 2864 6566 6175 6c74 3a20 2274 7275  " (default: "tru
+000125c0: 6522 2920 2020 2020 2020 2020 2020 2020  e")             
+000125d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000125e0: 2020 2020 2020 2020 7c20 4966 2022 7472          | If "tr
+000125f0: 7565 2220 7468 6520 636c 6965 6e74 2077  ue" the client w
+00012600: 696c 6c20 6372 6561 7465 2061 2022 7365  ill create a "se
+00012610: 6375 7265 2220 6752 5043 2063 6861 6e6e  cure" gRPC chann
+00012620: 656c 2e20 4966 2022 6661 6c73 6522 2074  el. If "false" t
+00012630: 6865 2063 6c69 656e 7420 7769 6c6c 2063  he client will c
+00012640: 7265 6174 6520 616e 2022 696e 7365 6375  reate an "insecu
+00012650: 7265 2220 6752 5043 2063 6861 6e6e 656c  re" gRPC channel
+00012660: 2e20 5468 6973 206d 7573 7420 6d61 7463  . This must matc
+00012670: 6820 7468 6520 7365 7276 6572 2063 6f6e  h the server con
+00012680: 6669 6775 7261 7469 6f6e 2e20 7c0a 7c20  figuration. |.| 
+00012690: 546c 7356 6572 6966 7943 6572 7420 2020  TlsVerifyCert   
+000126a0: 2020 2020 7c20 2274 7275 6522 2c20 2266      | "true", "f
+000126b0: 616c 7365 2220 2864 6566 6175 6c74 3a20  alse" (default: 
+000126c0: 2274 7275 6522 2920 2020 2020 2020 2020  "true")         
+000126d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000126e0: 2020 2020 2020 2020 2020 2020 7c20 5468              | Th
+000126f0: 6973 2076 616c 7565 2069 7320 6375 7272  is value is curr
+00012700: 656e 746c 7920 6967 6e6f 7265 642e 2020  ently ignored.  
+00012710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012790: 7c0a 7c20 436f 6e6e 6563 7469 6f6e 4e61  |.| ConnectionNa
+000127a0: 6d65 2020 2020 2020 7c20 7374 7269 6e67  me      | string
+000127b0: 2028 6465 6661 756c 743a 2061 7574 6f2d   (default: auto-
+000127c0: 6765 6e65 7261 7465 6420 7665 7273 696f  generated versio
+000127d0: 6e2d 3420 5555 4944 2920 2020 2020 2020  n-4 UUID)       
+000127e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000127f0: 7c20 5365 6e74 2069 6e20 6361 6c6c 206d  | Sent in call m
+00012800: 6574 6164 6174 6120 666f 7220 6576 6572  etadata for ever
+00012810: 7920 6361 6c6c 2c20 746f 2069 6465 6e74  y call, to ident
+00012820: 6966 7920 7468 6520 636c 6965 6e74 2074  ify the client t
+00012830: 6f20 7468 6520 636c 7573 7465 722e 2020  o the cluster.  
+00012840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012890: 2020 2020 7c0a 7c20 4e6f 6465 5072 6566      |.| NodePref
+000128a0: 6572 656e 6365 2020 2020 2020 7c20 226c  erence      | "l
+000128b0: 6561 6465 7222 2c20 2266 6f6c 6c6f 7765  eader", "followe
+000128c0: 7222 2c20 2272 6561 646f 6e6c 7972 6570  r", "readonlyrep
+000128d0: 6c69 6361 222c 2022 7261 6e64 6f6d 2220  lica", "random" 
+000128e0: 2864 6566 6175 6c74 3a20 226c 6561 6465  (default: "leade
+000128f0: 7222 2920 7c20 5468 6520 6e6f 6465 2073  r") | The node s
+00012900: 7461 7465 2070 7265 6665 7272 6564 2062  tate preferred b
+00012910: 7920 7468 6520 636c 6965 6e74 2e20 5468  y the client. Th
+00012920: 6520 636c 6965 6e74 2077 696c 6c20 7365  e client will se
+00012930: 6c65 6374 2061 206e 6f64 6520 6672 6f6d  lect a node from
+00012940: 2074 6865 2063 6c75 7374 6572 2069 6e66   the cluster inf
+00012950: 6f20 7265 6365 6976 6564 2066 726f 6d20  o received from 
+00012960: 7468 6520 476f 7373 6970 2041 5049 2061  the Gossip API a
+00012970: 6363 6f72 6469 6e67 2074 6f20 7468 6973  ccording to this
+00012980: 2070 7265 6665 7265 6e63 652e 2020 2020   preference.    
+00012990: 2020 2020 2020 2020 7c0a 7c20 4465 6661          |.| Defa
+000129a0: 756c 7444 6561 646c 696e 6520 2020 2020  ultDeadline     
+000129b0: 7c20 696e 7465 6765 7220 2864 6566 6175  | integer (defau
+000129c0: 6c74 3a20 604e 6f6e 6560 2920 2020 2020  lt: `None`)     
+000129d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000129e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000129f0: 2020 2020 2020 2020 7c20 5468 6520 6465          | The de
+00012a00: 6661 756c 7420 7661 6c75 6520 2869 6e20  fault value (in 
+00012a10: 7365 636f 6e64 7329 206f 6620 7468 6520  seconds) of the 
+00012a20: 6074 696d 656f 7574 6020 6172 6775 6d65  `timeout` argume
+00012a30: 6e74 206f 6620 636c 6965 6e74 2022 7772  nt of client "wr
+00012a40: 6974 6522 206d 6574 686f 6473 2073 7563  ite" methods suc
+00012a50: 6820 6173 2060 6170 7065 6e64 5f65 7665  h as `append_eve
+00012a60: 6e74 7328 2960 2e20 2020 2020 2020 2020  nts()`.         
+00012a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012a90: 2020 2020 2020 2020 2020 2020 7c0a 7c20              |.| 
+00012aa0: 476f 7373 6970 5469 6d65 6f75 7420 2020  GossipTimeout   
+00012ab0: 2020 2020 7c20 696e 7465 6765 7220 2864      | integer (d
+00012ac0: 6566 6175 6c74 3a20 3529 2020 2020 2020  efault: 5)      
+00012ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012af0: 2020 2020 2020 2020 2020 2020 7c20 5468              | Th
+00012b00: 6520 6465 6661 756c 7420 7661 6c75 6520  e default value 
+00012b10: 2869 6e20 7365 636f 6e64 7329 206f 6620  (in seconds) of 
+00012b20: 7468 6520 6074 696d 656f 7574 6020 6172  the `timeout` ar
+00012b30: 6775 6d65 6e74 206f 6620 676f 7373 6970  gument of gossip
+00012b40: 2072 6561 6420 6d65 7468 6f64 732c 2073   read methods, s
+00012b50: 7563 6820 6173 2060 7265 6164 5f67 6f73  uch as `read_gos
+00012b60: 7369 7028 2960 2e20 2020 2020 2020 2020  sip()`.         
+00012b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012ba0: 7c0a 7c20 4d61 7844 6973 636f 7665 7241  |.| MaxDiscoverA
+00012bb0: 7474 656d 7074 7320 7c20 696e 7465 6765  ttempts | intege
+00012bc0: 7220 2864 6566 6175 6c74 3a20 3130 2920  r (default: 10) 
+00012bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012c00: 7c20 5468 6520 6e75 6d62 6572 206f 6620  | The number of 
+00012c10: 6174 7465 6d70 7473 2074 6f20 7265 6164  attempts to read
+00012c20: 2067 6f73 7369 7020 7768 656e 2063 6f6e   gossip when con
+00012c30: 6e65 6374 696e 6720 6f72 2072 6563 6f6e  necting or recon
+00012c40: 6e65 6374 696e 6720 746f 2061 2063 6c75  necting to a clu
+00012c50: 7374 6572 206d 656d 6265 722e 2020 2020  ster member.    
+00012c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012ca0: 2020 2020 7c0a 7c20 4469 7363 6f76 6572      |.| Discover
+00012cb0: 7949 6e74 6572 7661 6c20 2020 7c20 696e  yInterval   | in
+00012cc0: 7465 6765 7220 2864 6566 6175 6c74 3a20  teger (default: 
+00012cd0: 3130 3029 2020 2020 2020 2020 2020 2020  100)            
+00012ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012d00: 2020 2020 7c20 486f 7720 6c6f 6e67 2074      | How long t
+00012d10: 6f20 7761 6974 2028 696e 206d 696c 6c69  o wait (in milli
+00012d20: 7365 636f 6e64 7329 2062 6574 7765 656e  seconds) between
+00012d30: 2067 6f73 7369 7020 7265 7472 6965 732e   gossip retries.
+00012d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012da0: 2020 2020 2020 2020 7c0a 7c20 4b65 6570          |.| Keep
+00012db0: 416c 6976 6549 6e74 6572 7661 6c20 2020  AliveInterval   
+00012dc0: 7c20 696e 7465 6765 7220 2864 6566 6175  | integer (defau
+00012dd0: 6c74 3a20 604e 6f6e 6560 2920 2020 2020  lt: `None`)     
+00012de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012e00: 2020 2020 2020 2020 7c20 5468 6520 7661          | The va
+00012e10: 6c75 6520 6f66 2074 6865 2022 6772 7063  lue of the "grpc
+00012e20: 2e6b 6565 7061 6c69 7665 5f6d 7322 2067  .keepalive_ms" g
+00012e30: 5250 4320 6368 616e 6e65 6c20 6f70 7469  RPC channel opti
+00012e40: 6f6e 2e20 2020 2020 2020 2020 2020 2020  on.             
+00012e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012ea0: 2020 2020 2020 2020 2020 2020 7c0a 7c20              |.| 
+00012eb0: 4b65 6570 416c 6976 6554 696d 656f 7574  KeepAliveTimeout
+00012ec0: 2020 2020 7c20 696e 7465 6765 7220 2864      | integer (d
+00012ed0: 6566 6175 6c74 3a20 604e 6f6e 6560 2920  efault: `None`) 
+00012ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012f00: 2020 2020 2020 2020 2020 2020 7c20 5468              | Th
+00012f10: 6520 7661 6c75 6520 6f66 2074 6865 2022  e value of the "
+00012f20: 6772 7063 2e6b 6565 7061 6c69 7665 5f74  grpc.keepalive_t
+00012f30: 696d 656f 7574 5f6d 7322 2067 5250 4320  imeout_ms" gRPC 
+00012f40: 6368 616e 6e65 6c20 6f70 7469 6f6e 2e20  channel option. 
+00012f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012fb0: 7c0a 0a0a 4865 7265 2061 7265 2073 6f6d  |...Here are som
+00012fc0: 6520 6578 616d 706c 6573 206f 6620 4576  e examples of Ev
+00012fd0: 656e 7453 746f 7265 4442 2063 6f6e 6e65  entStoreDB conne
+00012fe0: 6374 696f 6e20 7374 7269 6e67 2055 5249  ction string URI
+00012ff0: 732e 0a0a 2020 2020 2320 4765 7420 636c  s...    # Get cl
+00013000: 7573 7465 7220 696e 666f 2066 726f 6d20  uster info from 
+00013010: 7365 6375 7265 2073 6572 7665 7220 736f  secure server so
+00013020: 636b 6574 206c 6f63 616c 686f 7374 3a32  cket localhost:2
+00013030: 3131 332c 0a20 2020 2023 2061 6e64 2075  113,.    # and u
+00013040: 7365 2022 6164 6d69 6e22 2061 6e64 2022  se "admin" and "
+00013050: 6368 616e 6765 6974 2220 6173 2075 7365  changeit" as use
+00013060: 726e 616d 6520 616e 6420 7061 7373 776f  rname and passwo
+00013070: 7264 0a20 2020 2023 2077 6865 6e20 6d61  rd.    # when ma
+00013080: 6b69 6e67 2063 616c 6c73 2074 6f20 4576  king calls to Ev
+00013090: 656e 7453 746f 7265 4442 2041 5049 206d  entStoreDB API m
+000130a0: 6574 686f 6473 2e0a 0a20 2020 2065 7364  ethods...    esd
+000130b0: 623a 2f2f 6164 6d69 6e3a 6368 616e 6765  b://admin:change
+000130c0: 6974 406c 6f63 616c 686f 7374 3a32 3131  it@localhost:211
+000130d0: 330a 0a0a 2020 2020 2320 4765 7420 636c  3...    # Get cl
+000130e0: 7573 7465 7220 696e 666f 2066 726f 6d20  uster info from 
+000130f0: 696e 7365 6375 7265 2073 6572 7665 7220  insecure server 
+00013100: 736f 636b 6574 2031 3237 2e30 2e30 2e31  socket 127.0.0.1
+00013110: 3a32 3131 340a 0a20 2020 2065 7364 623a  :2114..    esdb:
+00013120: 2f2f 3132 372e 302e 302e 313a 3231 3134  //127.0.0.1:2114
+00013130: 3f54 6c73 3d66 616c 7365 0a0a 0a20 2020  ?Tls=false...   
+00013140: 2023 2047 6574 2063 6c75 7374 6572 2069   # Get cluster i
+00013150: 6e66 6f20 6672 6f6d 2061 6464 7265 7373  nfo from address
+00013160: 6573 2069 6e20 2741 2720 7265 636f 7264  es in 'A' record
+00013170: 7320 666f 7220 636c 7573 7465 7231 2e65  s for cluster1.e
+00013180: 7861 6d70 6c65 2e63 6f6d 2c0a 2020 2020  xample.com,.    
+00013190: 2320 616e 6420 7573 6520 6120 6465 6661  # and use a defa
+000131a0: 756c 7420 6465 6164 6c69 6e65 2066 6f72  ult deadline for
+000131b0: 206d 616b 696e 6720 6361 6c6c 7320 746f   making calls to
+000131c0: 2045 7665 6e74 5374 6f72 6520 4150 4920   EventStore API 
+000131d0: 6d65 7468 6f64 2e0a 0a20 2020 2065 7364  method...    esd
+000131e0: 622b 6469 7363 6f76 6572 3a2f 2f61 646d  b+discover://adm
+000131f0: 696e 3a63 6861 6e67 6569 7440 636c 7573  in:changeit@clus
+00013200: 7465 7231 2e65 7861 6d70 6c65 2e63 6f6d  ter1.example.com
+00013210: 3f44 6566 6175 6c74 4465 6164 6c69 6e65  ?DefaultDeadline
+00013220: 3d35 0a0a 0a20 2020 2023 2047 6574 2063  =5...    # Get c
+00013230: 6c75 7374 6572 2069 6e66 6f20 6672 6f6d  luster info from
+00013240: 2065 6974 6865 7220 6c6f 6361 6c68 6f73   either localhos
+00013250: 743a 3231 3131 206f 7220 6c6f 6361 6c68  t:2111 or localh
+00013260: 6f73 743a 3231 3132 206f 720a 2020 2020  ost:2112 or.    
+00013270: 2320 6c6f 6361 6c68 6f73 743a 3231 3133  # localhost:2113
+00013280: 2c20 616e 6420 7468 656e 2063 6f6e 6e65  , and then conne
+00013290: 6374 2074 6f20 6120 666f 6c6c 6f77 6572  ct to a follower
+000132a0: 206e 6f64 6520 696e 2074 6865 2063 6c75   node in the clu
+000132b0: 7374 6572 2e0a 0a20 2020 2065 7364 623a  ster...    esdb:
+000132c0: 2f2f 6164 6d69 6e3a 6368 616e 6765 6974  //admin:changeit
+000132d0: 406c 6f63 616c 686f 7374 3a32 3131 312c  @localhost:2111,
+000132e0: 6c6f 6361 6c68 6f73 743a 3231 3132 2c6c  localhost:2112,l
+000132f0: 6f63 616c 686f 7374 3a32 3131 333f 4e6f  ocalhost:2113?No
+00013300: 6465 5072 6566 6572 656e 6365 3d66 6f6c  dePreference=fol
+00013310: 6c6f 7765 720a 0a0a 2020 2020 2320 4765  lower...    # Ge
+00013320: 7420 636c 7573 7465 7220 696e 666f 2066  t cluster info f
+00013330: 726f 6d20 6164 6472 6573 7365 7320 696e  rom addresses in
+00013340: 2027 4127 2072 6563 6f72 6473 2066 6f72   'A' records for
+00013350: 2063 6c75 7374 6572 312e 6578 616d 706c   cluster1.exampl
+00013360: 652e 636f 6d2c 0a20 2020 2023 2061 6e64  e.com,.    # and
+00013370: 2063 6f6e 6669 6775 7265 2022 6b65 6570   configure "keep
+00013380: 2061 6c69 7665 2220 7469 6d65 6f75 7420   alive" timeout 
+00013390: 616e 6420 696e 7465 7276 616c 2069 6e20  and interval in 
+000133a0: 7468 6520 6752 5043 2063 6861 6e6e 656c  the gRPC channel
+000133b0: 2e0a 0a20 2020 2065 7364 622b 6469 7363  ...    esdb+disc
+000133c0: 6f76 6572 3a2f 2f61 646d 696e 3a63 6861  over://admin:cha
+000133d0: 6e67 6569 7440 636c 7573 7465 7231 2e65  ngeit@cluster1.e
+000133e0: 7861 6d70 6c65 2e63 6f6d 3f4b 6565 7041  xample.com?KeepA
+000133f0: 6c69 7665 496e 7465 7276 616c 3d31 3030  liveInterval=100
+00013400: 3030 264b 6565 7041 6c69 7665 5469 6d65  00&KeepAliveTime
+00013410: 6f75 743d 3130 3030 300a 0a0a 506c 6561  out=10000...Plea
+00013420: 7365 206e 6f74 652c 2074 6865 2063 6c69  se note, the cli
+00013430: 656e 7420 6973 2069 6e73 656e 7369 7469  ent is insensiti
+00013440: 7665 2074 6f20 7468 6520 6361 7365 206f  ve to the case o
+00013450: 6620 6669 656c 6473 2061 6e64 2076 616c  f fields and val
+00013460: 7565 732e 2049 6620 6669 656c 6473 2061  ues. If fields a
+00013470: 7265 0a72 6570 6561 7465 6420 696e 2074  re.repeated in t
+00013480: 6865 2071 7565 7279 2073 7472 696e 672c  he query string,
+00013490: 2074 6865 2071 7565 7279 2073 7472 696e   the query strin
+000134a0: 6720 7769 6c6c 2062 6520 7061 7273 6564  g will be parsed
+000134b0: 2077 6974 686f 7574 2065 7272 6f72 2e20   without error. 
+000134c0: 486f 7765 7665 722c 0a74 6865 2063 6f6e  However,.the con
+000134d0: 6e65 6374 696f 6e20 6f70 7469 6f6e 7320  nection options 
+000134e0: 7573 6564 2062 7920 7468 6520 636c 6965  used by the clie
+000134f0: 6e74 2077 696c 6c20 7573 6520 7468 6520  nt will use the 
+00013500: 7661 6c75 6520 6f66 2074 6865 2066 6972  value of the fir
+00013510: 7374 2066 6965 6c64 2e20 416c 6c0a 7468  st field. All.th
+00013520: 6520 6f74 6865 7220 6669 656c 642d 7661  e other field-va
+00013530: 6c75 6573 2069 6e20 7468 6520 7175 6572  lues in the quer
+00013540: 7920 7374 7269 6e67 2077 6974 6820 7468  y string with th
+00013550: 6520 7361 6d65 2066 6965 6c64 206e 616d  e same field nam
+00013560: 6520 7769 6c6c 2062 6520 6967 6e6f 7265  e will be ignore
+00013570: 642e 0a46 6965 6c64 7320 7769 7468 6f75  d..Fields withou
+00013580: 7420 7661 6c75 6573 2077 696c 6c20 616c  t values will al
+00013590: 736f 2062 6520 6967 6e6f 7265 642e 0a0a  so be ignored...
+000135a0: 4966 2074 6865 2063 6c69 656e 7427 7320  If the client's 
+000135b0: 6e6f 6465 2070 7265 6665 7265 6e63 6520  node preference 
+000135c0: 6973 2022 6c65 6164 6572 2220 616e 6420  is "leader" and 
+000135d0: 7468 6520 6e6f 6465 2062 6563 6f6d 6573  the node becomes
+000135e0: 2061 0a22 666f 6c6c 6f77 6572 222c 2074   a."follower", t
+000135f0: 6865 2063 6c69 656e 7420 7769 6c6c 2061  he client will a
+00013600: 7474 656d 7074 2074 6f20 7265 636f 6e6e  ttempt to reconn
+00013610: 6563 7420 746f 2074 6865 2063 7572 7265  ect to the curre
+00013620: 6e74 206c 6561 6465 7220 7768 656e 2061  nt leader when a
+00013630: 206d 6574 686f 640a 6973 2063 616c 6c65   method.is calle
+00013640: 6420 7468 6174 2065 7870 6563 7473 2074  d that expects t
+00013650: 6f20 6361 6c6c 2061 206c 6561 6465 722e  o call a leader.
+00013660: 204d 6574 686f 6473 2077 6869 6368 206d   Methods which m
+00013670: 7574 6174 6520 7468 6520 7374 6174 6520  utate the state 
+00013680: 6f66 2074 6865 2064 6174 6162 6173 650a  of the database.
+00013690: 6578 7065 6374 2074 6f20 6361 6c6c 2061  expect to call a
+000136a0: 206c 6561 6465 722e 2046 6f72 2073 7563   leader. For suc
+000136b0: 6820 6d65 7468 6f64 732c 2074 6865 2048  h methods, the H
+000136c0: 5454 5020 6865 6164 6572 2272 6571 7569  TTP header"requi
+000136d0: 7265 732d 6c65 6164 6572 2220 6973 2073  res-leader" is s
+000136e0: 6574 2074 6f0a 2274 7275 6522 2c20 616e  et to."true", an
+000136f0: 6420 7468 6973 2068 6561 6465 7220 6973  d this header is
+00013700: 206f 6273 6572 7665 6420 6279 2074 6865   observed by the
+00013710: 2073 6572 7665 722c 2061 6e64 2073 6f20   server, and so 
+00013720: 6120 6e6f 6465 2077 6869 6368 2069 7320  a node which is 
+00013730: 6e6f 7420 6120 6c65 6164 6572 0a74 6861  not a leader.tha
+00013740: 7420 7265 6365 6976 6573 2073 7563 6820  t receives such 
+00013750: 6120 7265 7175 6573 7420 7769 6c6c 2072  a request will r
+00013760: 6574 7572 6e20 616e 2065 7272 6f72 2e20  eturn an error. 
+00013770: 5468 6973 2065 7272 6f72 2069 7320 6465  This error is de
+00013780: 7465 6374 6564 2062 7920 7468 6520 636c  tected by the cl
+00013790: 6965 6e74 2c0a 7768 6963 6820 7769 6c6c  ient,.which will
+000137a0: 2074 6865 6e20 636c 6f73 6520 7468 6520   then close the 
+000137b0: 6375 7272 656e 7420 6752 5043 2063 6f6e  current gRPC con
+000137c0: 6e65 6374 696f 6e20 616e 6420 6372 6561  nection and crea
+000137d0: 7465 2061 206e 6577 2063 6f6e 6e65 6374  te a new connect
+000137e0: 696f 6e20 746f 2074 6865 0a6c 6561 6465  ion to the.leade
+000137f0: 722e 2054 6865 2072 6571 7565 7374 2077  r. The request w
+00013800: 696c 6c20 7468 656e 2062 6520 7265 7472  ill then be retr
+00013810: 6965 6420 7769 7468 2074 6865 206c 6561  ied with the lea
+00013820: 6465 722e 0a0a 4966 2074 6865 2063 6c69  der...If the cli
+00013830: 656e 7427 7320 6e6f 6465 2070 7265 6665  ent's node prefe
+00013840: 7265 6e63 6520 6973 2022 666f 6c6c 6f77  rence is "follow
+00013850: 6572 2220 616e 6420 7468 6572 6520 6172  er" and there ar
+00013860: 6520 6e6f 2066 6f6c 6c6f 7765 720a 6e6f  e no follower.no
+00013870: 6465 7320 696e 2074 6865 2063 6c75 7374  des in the clust
+00013880: 6572 2c20 7468 656e 2074 6865 2063 6c69  er, then the cli
+00013890: 656e 7420 7769 6c6c 2072 6169 7365 2061  ent will raise a
+000138a0: 6e20 6578 6365 7074 696f 6e2e 2053 696d  n exception. Sim
+000138b0: 696c 6172 6c79 2c20 6966 2074 6865 0a63  ilarly, if the.c
+000138c0: 6c69 656e 7427 7320 6e6f 6465 2070 7265  lient's node pre
+000138d0: 6665 7265 6e63 6520 6973 2022 7265 6164  ference is "read
+000138e0: 6f6e 6c79 7265 706c 6963 6122 2061 6e64  onlyreplica" and
+000138f0: 2074 6865 7265 2061 7265 206e 6f20 7265   there are no re
+00013900: 6164 2d6f 6e6c 7920 7265 706c 6963 610a  ad-only replica.
+00013910: 6e6f 6465 7320 696e 2074 6865 2063 6c75  nodes in the clu
+00013920: 7374 6572 2c20 7468 656e 2074 6865 2063  ster, then the c
+00013930: 6c69 656e 7420 7769 6c6c 2061 6c73 6f20  lient will also 
+00013940: 7261 6973 6520 616e 2065 7863 6570 7469  raise an excepti
+00013950: 6f6e 2e0a 0a54 6865 2067 5250 4320 6368  on...The gRPC ch
+00013960: 616e 6e65 6c20 6f70 7469 6f6e 2022 6772  annel option "gr
+00013970: 7063 2e6d 6178 5f72 6563 6569 7665 5f6d  pc.max_receive_m
+00013980: 6573 7361 6765 5f6c 656e 6774 6822 2069  essage_length" i
+00013990: 7320 6175 746f 6d61 7469 6361 6c6c 790a  s automatically.
+000139a0: 636f 6e66 6967 7572 6564 2074 6f20 7468  configured to th
+000139b0: 6520 7661 6c75 6520 6031 3720 2a20 3130  e value `17 * 10
+000139c0: 3234 202a 2031 3032 3460 2e20 5468 6973  24 * 1024`. This
+000139d0: 2076 616c 7565 2063 616e 6e6f 7420 6265   value cannot be
+000139e0: 2063 6861 6e67 6564 2e0a 0a0a 2323 2320   changed....### 
+000139f0: 5265 6775 6c61 7220 6578 7072 6573 7369  Regular expressi
+00013a00: 6f6e 2066 696c 7465 7273 0a0a 5468 6520  on filters..The 
+00013a10: 6669 6c74 6572 2061 7267 756d 656e 7473  filter arguments
+00013a20: 2069 6e20 6072 6561 645f 616c 6c5f 6576   in `read_all_ev
+00013a30: 656e 7473 2829 602c 2060 7375 6273 6372  ents()`, `subscr
+00013a40: 6962 655f 616c 6c5f 6576 656e 7473 2829  ibe_all_events()
+00013a50: 602c 0a60 6372 6561 7465 5f73 7562 7363  `,.`create_subsc
+00013a60: 7269 7074 696f 6e28 2960 2061 6e64 2060  ription()` and `
+00013a70: 6765 745f 636f 6d6d 6974 5f70 6f73 6974  get_commit_posit
+00013a80: 696f 6e28 2960 2061 7265 2061 7070 6c69  ion()` are appli
+00013a90: 6564 2074 6f20 7468 6520 6074 7970 6560  ed to the `type`
+00013aa0: 0a61 7474 7269 6275 7465 206f 6620 7265  .attribute of re
+00013ab0: 636f 7264 6564 2065 7665 6e74 732e 0a0a  corded events...
+00013ac0: 5468 6520 6465 6661 756c 7420 7661 6c75  The default valu
+00013ad0: 6520 6f66 2074 6865 2060 6669 6c74 6572  e of the `filter
+00013ae0: 5f65 7863 6c75 6465 6020 6172 6775 6d65  _exclude` argume
+00013af0: 6e74 7320 6973 2064 6573 6967 6e65 6420  nts is designed 
+00013b00: 746f 2065 7863 6c75 6465 0a45 7665 6e74  to exclude.Event
+00013b10: 5374 6f72 6544 4220 2273 7973 7465 6d22  StoreDB "system"
+00013b20: 2061 6e64 2022 7065 7273 6973 7465 6e63   and "persistenc
+00013b30: 6520 7375 6273 6372 6970 7469 6f6e 2063  e subscription c
+00013b40: 6f6e 6669 6722 2065 7665 6e74 732c 2077  onfig" events, w
+00013b50: 6869 6368 0a6f 7468 6572 7769 7365 2077  hich.otherwise w
+00013b60: 6f75 6c64 2062 6520 696e 636c 7564 6564  ould be included
+00013b70: 2e20 5379 7374 656d 2065 7665 6e74 7320  . System events 
+00013b80: 6765 6e65 7261 7465 6420 6279 2045 7665  generated by Eve
+00013b90: 6e74 5374 6f72 6544 4220 616c 6c0a 6861  ntStoreDB all.ha
+00013ba0: 7665 2060 7479 7065 6020 7374 7269 6e67  ve `type` string
+00013bb0: 7320 7468 6174 2073 7461 7274 2077 6974  s that start wit
+00013bc0: 6820 7468 6520 6024 6020 7369 676e 2e20  h the `$` sign. 
+00013bd0: 5065 7273 6973 7465 6e63 6520 7375 6273  Persistence subs
+00013be0: 6372 6970 7469 6f6e 0a65 7665 6e74 7320  cription.events 
+00013bf0: 6765 6e65 7261 7465 6420 7768 656e 206d  generated when m
+00013c00: 616e 6970 756c 6174 696e 6720 7065 7273  anipulating pers
+00013c10: 6973 7465 6e63 6520 7375 6273 6372 6970  istence subscrip
+00013c20: 7469 6f6e 7320 616c 6c20 6861 7665 2060  tions all have `
+00013c30: 7479 7065 600a 7374 7269 6e67 7320 7468  type`.strings th
+00013c40: 6174 2073 7461 7274 2077 6974 6820 6050  at start with `P
+00013c50: 6572 7369 7374 656e 7443 6f6e 6669 6760  ersistentConfig`
+00013c60: 2e0a 0a46 6f72 2065 7861 6d70 6c65 2c20  ...For example, 
+00013c70: 746f 206d 6174 6368 2074 6865 2074 7970  to match the typ
+00013c80: 6520 6f66 2045 7665 6e74 5374 6f72 6544  e of EventStoreD
+00013c90: 4220 7379 7374 656d 2065 7665 6e74 732c  B system events,
+00013ca0: 2075 7365 2074 6865 2072 6567 756c 6172   use the regular
+00013cb0: 0a65 7870 7265 7373 696f 6e20 6072 275c  .expression `r'\
+00013cc0: 242e 2b27 602e 2050 6c65 6173 6520 6e6f  $.+'`. Please no
+00013cd0: 7465 2c20 7468 6520 636f 6e73 7461 6e74  te, the constant
+00013ce0: 2060 4553 4442 5f53 5953 5445 4d5f 4556   `ESDB_SYSTEM_EV
+00013cf0: 454e 5453 5f52 4547 4558 6020 6973 0a73  ENTS_REGEX` is.s
+00013d00: 6574 2074 6f20 6072 275c 242e 2b27 602e  et to `r'\$.+'`.
+00013d10: 2059 6f75 2063 616e 2069 6d70 6f72 7420   You can import 
+00013d20: 7468 6973 2076 616c 7565 0a28 6066 726f  this value.(`fro
+00013d30: 6d20 6573 6462 636c 6965 6e74 2069 6d70  m esdbclient imp
+00013d40: 6f72 7420 4553 4442 5f53 5953 5445 4d5f  ort ESDB_SYSTEM_
+00013d50: 4556 454e 5453 5f52 4547 4558 6029 2061  EVENTS_REGEX`) a
+00013d60: 6e64 2075 7365 0a69 7420 7768 656e 2062  nd use.it when b
+00013d70: 7569 6c64 696e 6720 6c6f 6e67 6572 2073  uilding longer s
+00013d80: 6571 7565 6e63 6573 206f 6620 7265 6775  equences of regu
+00013d90: 6c61 7220 6578 7072 6573 7369 6f6e 732e  lar expressions.
+00013da0: 0a0a 5369 6d69 6c61 726c 792c 2074 6f20  ..Similarly, to 
+00013db0: 6d61 7463 6820 7468 6520 7479 7065 206f  match the type o
+00013dc0: 6620 4576 656e 7453 746f 7265 4442 2070  f EventStoreDB p
+00013dd0: 6572 7369 7374 656e 6365 2073 7562 7363  ersistence subsc
+00013de0: 7269 7074 696f 6e20 6576 656e 7473 2c20  ription events, 
+00013df0: 7573 6520 7468 650a 7265 6775 6c61 7220  use the.regular 
+00013e00: 6578 7072 6573 7369 6f6e 2060 7227 5065  expression `r'Pe
+00013e10: 7273 6973 7465 6e74 436f 6e66 6967 5c64  rsistentConfig\d
+00013e20: 2b27 602e 2054 6865 2063 6f6e 7374 616e  +'`. The constan
+00013e30: 7420 6045 5344 425f 5045 5253 4953 5445  t `ESDB_PERSISTE
+00013e40: 4e54 5f43 4f4e 4649 475f 4556 454e 5453  NT_CONFIG_EVENTS
+00013e50: 5f52 4547 4558 600a 6973 2073 6574 2074  _REGEX`.is set t
+00013e60: 6f20 6072 2750 6572 7369 7374 656e 7443  o `r'PersistentC
+00013e70: 6f6e 6669 675c 642b 2760 2e20 596f 7520  onfig\d+'`. You 
+00013e80: 6361 6e20 616c 736f 2069 6d70 6f72 7420  can also import 
+00013e90: 7468 6973 2076 616c 7565 0a28 6066 726f  this value.(`fro
+00013ea0: 6d20 6573 6462 636c 6965 6e74 2069 6d70  m esdbclient imp
+00013eb0: 6f72 7420 4553 4442 5f50 4552 5349 5354  ort ESDB_PERSIST
+00013ec0: 454e 545f 434f 4e46 4947 5f45 5645 4e54  ENT_CONFIG_EVENT
+00013ed0: 535f 5245 4745 5860 2920 616e 6420 7573  S_REGEX`) and us
+00013ee0: 6520 6974 2077 6865 6e20 6275 696c 6469  e it when buildi
+00013ef0: 6e67 0a6c 6f6e 6765 7220 7365 7175 656e  ng.longer sequen
+00013f00: 6365 7320 6f66 2072 6567 756c 6172 2065  ces of regular e
+00013f10: 7870 7265 7373 696f 6e73 2e0a 0a54 6865  xpressions...The
+00013f20: 2063 6f6e 7374 616e 7420 6044 4546 4155   constant `DEFAU
+00013f30: 4c54 5f45 5843 4c55 4445 5f46 494c 5445  LT_EXCLUDE_FILTE
+00013f40: 5260 2069 7320 6120 7365 7175 656e 6365  R` is a sequence
+00013f50: 206f 6620 7265 6775 6c61 7220 6578 7072   of regular expr
+00013f60: 6573 7369 6f6e 7320 7468 6174 206d 6174  essions that mat
+00013f70: 6368 0a74 6865 2065 7665 6e74 7320 7468  ch.the events th
+00013f80: 6174 2045 7665 6e74 5374 6f72 6544 4220  at EventStoreDB 
+00013f90: 6765 6e65 7261 7465 7320 696e 7465 726e  generates intern
+00013fa0: 616c 6c79 2c20 6576 656e 7473 2074 6861  ally, events tha
+00013fb0: 7420 6172 6520 6578 7472 616e 656f 7573  t are extraneous
+00013fc0: 2074 6f20 7468 6f73 650a 7768 6963 6820   to those.which 
+00013fd0: 796f 7520 6170 7065 6e64 2075 7369 6e67  you append using
+00013fe0: 2074 6865 2060 6170 7065 6e64 5f65 7665   the `append_eve
+00013ff0: 6e74 7328 2960 206d 6574 686f 642e 0a0a  nts()` method...
+00014000: 466f 7220 6578 616d 706c 652c 2074 6f20  For example, to 
+00014010: 6578 636c 7564 6520 7379 7374 656d 2065  exclude system e
+00014020: 7665 6e74 7320 616e 6420 7065 7273 6973  vents and persis
+00014030: 7465 6e63 6520 7375 6273 6372 6970 7469  tence subscripti
+00014040: 6f6e 2063 6f6e 6669 6775 7261 7469 6f6e  on configuration
+00014050: 2065 7665 6e74 732c 0a61 6e64 2073 6e61   events,.and sna
+00014060: 7073 686f 7473 2c20 796f 7520 6d69 6768  pshots, you migh
+00014070: 7420 7573 6520 7468 6520 7365 7175 656e  t use the sequen
+00014080: 6365 2060 4445 4641 554c 545f 4558 434c  ce `DEFAULT_EXCL
+00014090: 5544 455f 4649 4c54 4552 202b 205b 272e  UDE_FILTER + ['.
+000140a0: 2a53 6e61 7073 686f 7427 5d60 2061 730a  *Snapshot']` as.
+000140b0: 7468 6520 7661 6c75 6520 6f66 2074 6865  the value of the
+000140c0: 2060 6669 6c74 6572 5f65 7863 6c75 6465   `filter_exclude
+000140d0: 6020 6172 6775 6d65 6e74 2077 6865 6e20  ` argument when 
+000140e0: 6361 6c6c 696e 6720 6072 6561 645f 616c  calling `read_al
+000140f0: 6c5f 6576 656e 7473 2829 602c 0a60 7375  l_events()`,.`su
+00014100: 6273 6372 6962 655f 616c 6c5f 6576 656e  bscribe_all_even
+00014110: 7473 2829 602c 2060 6372 6561 7465 5f73  ts()`, `create_s
+00014120: 7562 7363 7269 7074 696f 6e28 2960 206f  ubscription()` o
+00014130: 7220 6067 6574 5f63 6f6d 6d69 745f 706f  r `get_commit_po
+00014140: 7369 7469 6f6e 2829 602e 0a0a 2323 2320  sition()`...### 
+00014150: 4e65 7720 6576 656e 7420 6f62 6a65 6374  New event object
+00014160: 730a 0a54 6865 2060 4e65 7745 7665 6e74  s..The `NewEvent
+00014170: 6020 636c 6173 7320 6973 2075 7365 6420  ` class is used 
+00014180: 7768 656e 2061 7070 656e 6469 6e67 2065  when appending e
+00014190: 7665 6e74 732e 0a0a 5468 6520 7265 7175  vents...The requ
+000141a0: 6972 6564 2061 7267 756d 656e 7420 6074  ired argument `t
+000141b0: 7970 6560 2069 7320 6120 5079 7468 6f6e  ype` is a Python
+000141c0: 2060 7374 7260 2c20 7573 6564 2074 6f20   `str`, used to 
+000141d0: 696e 6469 6361 7465 2074 6865 2074 7970  indicate the typ
+000141e0: 6520 6f66 0a74 6865 2065 7665 6e74 2074  e of.the event t
+000141f0: 6861 7420 7769 6c6c 2062 6520 7265 636f  hat will be reco
+00014200: 7264 6564 2e0a 0a54 6865 2072 6571 7569  rded...The requi
+00014210: 7265 6420 6172 6775 6d65 6e74 2060 6461  red argument `da
+00014220: 7461 6020 6973 2061 2050 7974 686f 6e20  ta` is a Python 
+00014230: 6062 7974 6573 6020 6f62 6a65 6374 2c20  `bytes` object, 
+00014240: 7573 6564 2074 6f20 696e 6469 6361 7465  used to indicate
+00014250: 2074 6865 2064 6174 6120 6f66 0a74 6865   the data of.the
+00014260: 2065 7665 6e74 2074 6861 7420 7769 6c6c   event that will
+00014270: 2062 6520 7265 636f 7264 6564 2e0a 0a54   be recorded...T
+00014280: 6865 206f 7074 696f 6e61 6c20 6172 6775  he optional argu
+00014290: 6d65 6e74 2060 6d65 7461 6461 7461 6020  ment `metadata` 
+000142a0: 6973 2061 2050 7974 686f 6e20 6062 7974  is a Python `byt
+000142b0: 6573 6020 6f62 6a65 6374 2c20 7573 6564  es` object, used
+000142c0: 2074 6f20 696e 6469 6361 7465 2061 6e79   to indicate any
+000142d0: 0a6d 6574 6164 6174 6120 6f66 2074 6865  .metadata of the
+000142e0: 2065 7665 6e74 2074 6861 7420 7769 6c6c   event that will
+000142f0: 2062 6520 7265 636f 7264 6564 2e20 5468   be recorded. Th
+00014300: 6520 6465 6661 756c 7420 7661 6c75 6520  e default value 
+00014310: 6973 2061 6e20 656d 7074 7920 6062 7974  is an empty `byt
+00014320: 6573 600a 6f62 6a65 6374 2e0a 0a54 6865  es`.object...The
+00014330: 206f 7074 696f 6e61 6c20 6172 6775 6d65   optional argume
+00014340: 6e74 2060 636f 6e74 656e 745f 7479 7065  nt `content_type
+00014350: 6020 6973 2061 2050 7974 686f 6e20 6073  ` is a Python `s
+00014360: 7472 602c 2075 7365 6420 746f 2069 6e64  tr`, used to ind
+00014370: 6963 6174 6520 7468 650a 7479 7065 206f  icate the.type o
+00014380: 6620 7468 6520 6461 7461 2074 6861 7420  f the data that 
+00014390: 7769 6c6c 2062 6520 7265 636f 7264 6564  will be recorded
+000143a0: 2066 6f72 2074 6869 7320 6576 656e 742e   for this event.
+000143b0: 2054 6865 2064 6566 6175 6c74 2076 616c   The default val
+000143c0: 7565 2069 730a 6061 7070 6c69 6361 7469  ue is.`applicati
+000143d0: 6f6e 2f6a 736f 6e60 2c20 7768 6963 6820  on/json`, which 
+000143e0: 696e 6469 6361 7465 7320 7468 6174 2074  indicates that t
+000143f0: 6865 2060 6461 7461 6020 7761 7320 7365  he `data` was se
+00014400: 7269 616c 6973 6564 2075 7369 6e67 204a  rialised using J
+00014410: 534f 4e2e 0a41 6e20 616c 7465 726e 6174  SON..An alternat
+00014420: 6976 6520 7661 6c75 6520 666f 7220 7468  ive value for th
+00014430: 6973 2061 7267 756d 656e 7420 6973 2060  is argument is `
+00014440: 6170 706c 6963 6174 696f 6e2f 6f63 7465  application/octe
+00014450: 742d 7374 7265 616d 602e 0a0a 5468 6520  t-stream`...The 
+00014460: 6f70 7469 6f6e 616c 2061 7267 756d 656e  optional argumen
+00014470: 7420 6069 6460 2069 7320 6120 5079 7468  t `id` is a Pyth
+00014480: 6f6e 2060 5555 4944 6020 6f62 6a65 6374  on `UUID` object
+00014490: 2c20 7573 6564 2074 6f20 7370 6563 6966  , used to specif
+000144a0: 7920 7468 6520 756e 6971 7565 2049 440a  y the unique ID.
+000144b0: 6f66 2074 6865 2065 7665 6e74 2074 6861  of the event tha
+000144c0: 7420 7769 6c6c 2062 6520 7265 636f 7264  t will be record
+000144d0: 6564 2e20 5468 6973 2076 616c 7565 2077  ed. This value w
+000144e0: 696c 6c20 6465 6661 756c 7420 746f 2061  ill default to a
+000144f0: 206e 6577 2076 6572 7369 6f6e 2d34 2055   new version-4 U
+00014500: 5549 442e 0a0a 6060 6070 7974 686f 6e0a  UID...```python.
+00014510: 6e65 775f 6576 656e 7431 203d 204e 6577  new_event1 = New
+00014520: 4576 656e 7428 0a20 2020 2074 7970 653d  Event(.    type=
+00014530: 274f 7264 6572 4372 6561 7465 6427 2c0a  'OrderCreated',.
+00014540: 2020 2020 6461 7461 3d62 277b 226e 616d      data=b'{"nam
+00014550: 6522 3a20 2247 7265 6722 7d27 2c0a 290a  e": "Greg"}',.).
+00014560: 6173 7365 7274 206e 6577 5f65 7665 6e74  assert new_event
+00014570: 312e 7479 7065 203d 3d20 274f 7264 6572  1.type == 'Order
+00014580: 4372 6561 7465 6427 0a61 7373 6572 7420  Created'.assert 
+00014590: 6e65 775f 6576 656e 7431 2e64 6174 6120  new_event1.data 
+000145a0: 3d3d 2062 277b 226e 616d 6522 3a20 2247  == b'{"name": "G
+000145b0: 7265 6722 7d27 0a61 7373 6572 7420 6e65  reg"}'.assert ne
+000145c0: 775f 6576 656e 7431 2e6d 6574 6164 6174  w_event1.metadat
+000145d0: 6120 3d3d 2062 2727 0a61 7373 6572 7420  a == b''.assert 
+000145e0: 6e65 775f 6576 656e 7431 2e63 6f6e 7465  new_event1.conte
+000145f0: 6e74 5f74 7970 6520 3d3d 2027 6170 706c  nt_type == 'appl
+00014600: 6963 6174 696f 6e2f 6a73 6f6e 270a 6173  ication/json'.as
+00014610: 7365 7274 2069 7369 6e73 7461 6e63 6528  sert isinstance(
+00014620: 6e65 775f 6576 656e 7431 2e69 642c 2055  new_event1.id, U
+00014630: 5549 4429 0a0a 6576 656e 745f 6964 203d  UID)..event_id =
+00014640: 2075 7569 6434 2829 0a6e 6577 5f65 7665   uuid4().new_eve
+00014650: 6e74 3220 3d20 4e65 7745 7665 6e74 280a  nt2 = NewEvent(.
+00014660: 2020 2020 7479 7065 3d27 496d 6167 6543      type='ImageC
+00014670: 7265 6174 6564 272c 0a20 2020 2064 6174  reated',.    dat
+00014680: 613d 6227 3031 3031 3031 3031 3031 3031  a=b'010101010101
+00014690: 3031 272c 0a20 2020 206d 6574 6164 6174  01',.    metadat
+000146a0: 613d 6227 7b22 6122 3a20 317d 272c 0a20  a=b'{"a": 1}',. 
+000146b0: 2020 2063 6f6e 7465 6e74 5f74 7970 653d     content_type=
+000146c0: 2761 7070 6c69 6361 7469 6f6e 2f6f 6374  'application/oct
+000146d0: 6574 2d73 7472 6561 6d27 2c0a 2020 2020  et-stream',.    
+000146e0: 6964 3d65 7665 6e74 5f69 642c 0a29 0a61  id=event_id,.).a
+000146f0: 7373 6572 7420 6e65 775f 6576 656e 7432  ssert new_event2
+00014700: 2e74 7970 6520 3d3d 2027 496d 6167 6543  .type == 'ImageC
+00014710: 7265 6174 6564 270a 6173 7365 7274 206e  reated'.assert n
+00014720: 6577 5f65 7665 6e74 322e 6461 7461 203d  ew_event2.data =
+00014730: 3d20 6227 3031 3031 3031 3031 3031 3031  = b'010101010101
+00014740: 3031 270a 6173 7365 7274 206e 6577 5f65  01'.assert new_e
+00014750: 7665 6e74 322e 6d65 7461 6461 7461 203d  vent2.metadata =
+00014760: 3d20 6227 7b22 6122 3a20 317d 270a 6173  = b'{"a": 1}'.as
+00014770: 7365 7274 206e 6577 5f65 7665 6e74 322e  sert new_event2.
+00014780: 636f 6e74 656e 745f 7479 7065 203d 3d20  content_type == 
+00014790: 2761 7070 6c69 6361 7469 6f6e 2f6f 6374  'application/oct
+000147a0: 6574 2d73 7472 6561 6d27 0a61 7373 6572  et-stream'.asser
+000147b0: 7420 6e65 775f 6576 656e 7432 2e69 6420  t new_event2.id 
+000147c0: 3d3d 2065 7665 6e74 5f69 640a 6060 600a  == event_id.```.
+000147d0: 0a23 2323 2052 6563 6f72 6465 6420 6576  .### Recorded ev
+000147e0: 656e 7420 6f62 6a65 6374 730a 0a54 6865  ent objects..The
+000147f0: 2060 5265 636f 7264 6564 4576 656e 7460   `RecordedEvent`
+00014800: 2063 6c61 7373 2069 7320 7573 6564 2077   class is used w
+00014810: 6865 6e20 7265 6164 696e 6720 6576 656e  hen reading even
+00014820: 7473 2e0a 0a54 6865 2061 7474 7269 6275  ts...The attribu
+00014830: 7465 2060 7479 7065 6020 6973 2061 2050  te `type` is a P
+00014840: 7974 686f 6e20 6073 7472 602c 2075 7365  ython `str`, use
+00014850: 6420 746f 2069 6e64 6963 6174 6520 7468  d to indicate th
+00014860: 6520 7479 7065 206f 6620 6576 656e 740a  e type of event.
+00014870: 7468 6174 2077 6173 2072 6563 6f72 6465  that was recorde
+00014880: 642e 0a0a 5468 6520 6174 7472 6962 7574  d...The attribut
+00014890: 6520 6064 6174 6160 2069 7320 6120 5079  e `data` is a Py
+000148a0: 7468 6f6e 2060 6279 7465 7360 206f 626a  thon `bytes` obj
+000148b0: 6563 742c 2075 7365 6420 746f 2069 6e64  ect, used to ind
+000148c0: 6963 6174 6520 7468 6520 6461 7461 206f  icate the data o
+000148d0: 6620 7468 650a 6576 656e 7420 7468 6174  f the.event that
+000148e0: 2077 6173 2072 6563 6f72 6465 642e 0a0a   was recorded...
+000148f0: 5468 6520 6174 7472 6962 7574 6520 606d  The attribute `m
+00014900: 6574 6164 6174 6160 2069 7320 6120 5079  etadata` is a Py
+00014910: 7468 6f6e 2060 6279 7465 7360 206f 626a  thon `bytes` obj
+00014920: 6563 742c 2075 7365 6420 746f 2069 6e64  ect, used to ind
+00014930: 6963 6174 6520 7468 6520 6d65 7461 6461  icate the metada
+00014940: 7461 206f 660a 7468 6520 6576 656e 7420  ta of.the event 
+00014950: 7468 6174 2077 6173 2072 6563 6f72 6465  that was recorde
+00014960: 642e 0a0a 5468 6520 6174 7472 6962 7574  d...The attribut
+00014970: 6520 6063 6f6e 7465 6e74 5f74 7970 6560  e `content_type`
+00014980: 2069 7320 6120 5079 7468 6f6e 2060 7374   is a Python `st
+00014990: 7260 2c20 7573 6564 2074 6f20 696e 6469  r`, used to indi
+000149a0: 6361 7465 2074 6865 2074 7970 6520 6f66  cate the type of
+000149b0: 0a64 6174 6120 7468 6174 2077 6173 2072  .data that was r
+000149c0: 6563 6f72 6465 6420 666f 7220 7468 6973  ecorded for this
+000149d0: 2065 7665 6e74 2028 7573 7561 6c6c 7920   event (usually 
+000149e0: 6061 7070 6c69 6361 7469 6f6e 2f6a 736f  `application/jso
+000149f0: 6e60 2074 6f20 696e 6469 6361 7465 2074  n` to indicate t
+00014a00: 6861 740a 7468 6973 2064 6174 6120 6361  hat.this data ca
+00014a10: 6e20 6265 2070 6172 7365 6420 6173 204a  n be parsed as J
+00014a20: 534f 4e2c 2062 7574 2061 6c74 6572 6e61  SON, but alterna
+00014a30: 7469 7665 6c79 2060 6170 706c 6963 6174  tively `applicat
+00014a40: 696f 6e2f 6f63 7465 742d 7374 7265 616d  ion/octet-stream
+00014a50: 6020 746f 0a69 6e64 6963 6174 6520 7468  ` to.indicate th
+00014a60: 6174 2069 7420 6973 2073 6f6d 6574 6869  at it is somethi
+00014a70: 6e67 2065 6c73 6529 2e0a 0a54 6865 2061  ng else)...The a
+00014a80: 7474 7269 6275 7465 2060 6964 6020 6973  ttribute `id` is
+00014a90: 2061 2050 7974 686f 6e20 6055 5549 4460   a Python `UUID`
+00014aa0: 206f 626a 6563 742c 2075 7365 6420 746f   object, used to
+00014ab0: 2069 6e64 6963 6174 6520 7468 6520 756e   indicate the un
+00014ac0: 6971 7565 2049 4420 6f66 2074 6865 0a65  ique ID of the.e
+00014ad0: 7665 6e74 2074 6861 7420 7761 7320 7265  vent that was re
+00014ae0: 636f 7264 6564 2e20 506c 6561 7365 206e  corded. Please n
+00014af0: 6f74 652c 2077 6865 6e20 7265 636f 7264  ote, when record
+00014b00: 6564 2065 7665 6e74 7320 6172 6520 7265  ed events are re
+00014b10: 7475 726e 6564 2066 726f 6d20 6120 6361  turned from a ca
+00014b20: 6c6c 0a74 6f20 6072 6561 645f 7374 7265  ll.to `read_stre
+00014b30: 616d 5f65 7665 6e74 7328 2960 2069 6e20  am_events()` in 
+00014b40: 4576 656e 7453 746f 7265 4442 2076 3231  EventStoreDB v21
+00014b50: 2e31 302c 2074 6865 2063 6f6d 6d69 7420  .10, the commit 
+00014b60: 706f 7369 7469 6f6e 2069 7320 6e6f 7420  position is not 
+00014b70: 6163 7475 616c 6c79 0a73 6574 2069 6e20  actually.set in 
+00014b80: 7468 6520 7265 7370 6f6e 7365 2e20 5468  the response. Th
+00014b90: 6973 2061 7474 7269 6275 7465 2069 7320  is attribute is 
+00014ba0: 7479 7065 6420 6173 2061 6e20 6f70 7469  typed as an opti
+00014bb0: 6f6e 616c 2076 616c 7565 2028 604f 7074  onal value (`Opt
+00014bc0: 696f 6e61 6c5b 5555 4944 5d60 292c 0a61  ional[UUID]`),.a
+00014bd0: 6e64 2069 6e20 7468 6520 6361 7365 206f  nd in the case o
+00014be0: 6620 7573 696e 6720 4576 656e 7453 746f  f using EventSto
+00014bf0: 7265 4442 2076 3231 2e31 3020 7468 6520  reDB v21.10 the 
+00014c00: 7661 6c75 6520 6f66 2074 6869 7320 6174  value of this at
+00014c10: 7472 6962 7574 6520 7769 6c6c 2062 6520  tribute will be 
+00014c20: 604e 6f6e 6560 0a77 6865 6e20 7265 6164  `None`.when read
+00014c30: 696e 6720 7265 636f 7264 6564 2065 7665  ing recorded eve
+00014c40: 6e74 7320 6672 6f6d 2061 2073 7472 6561  nts from a strea
+00014c50: 6d2e 2052 6563 6f72 6465 6420 6576 656e  m. Recorded even
+00014c60: 7473 2077 696c 6c20 686f 7765 7665 7220  ts will however 
+00014c70: 6861 7665 2074 6869 730a 7661 6c75 6573  have this.values
+00014c80: 2073 6574 2077 6865 6e20 7265 6164 696e   set when readin
+00014c90: 6720 7265 636f 7264 6564 2065 7665 6e74  g recorded event
+00014ca0: 7320 6672 6f6d 2060 7265 6164 5f61 6c6c  s from `read_all
+00014cb0: 5f65 7665 6e74 7328 2960 2061 6e64 2066  _events()` and f
+00014cc0: 726f 6d20 626f 7468 0a63 6174 6368 2d75  rom both.catch-u
+00014cd0: 7020 616e 6420 7065 7273 6973 7465 6e74  p and persistent
+00014ce0: 2073 7562 7363 7269 7074 696f 6e73 2e0a   subscriptions..
+00014cf0: 0a54 6865 2061 7474 7269 6275 7465 2060  .The attribute `
+00014d00: 7374 7265 616d 5f6e 616d 6560 2069 7320  stream_name` is 
+00014d10: 6120 5079 7468 6f6e 2060 7374 7260 2c20  a Python `str`, 
+00014d20: 7573 6564 2074 6f20 696e 6469 6361 7465  used to indicate
+00014d30: 2074 6865 206e 616d 6520 6f66 2074 6865   the name of the
+00014d40: 0a73 7472 6561 6d20 696e 2077 6869 6368  .stream in which
+00014d50: 2074 6865 2065 7665 6e74 2077 6173 2072   the event was r
+00014d60: 6563 6f72 6465 642e 0a0a 5468 6520 6174  ecorded...The at
+00014d70: 7472 6962 7574 6520 6073 7472 6561 6d5f  tribute `stream_
+00014d80: 706f 7369 7469 6f6e 6020 6973 2061 2050  position` is a P
+00014d90: 7974 686f 6e20 6069 6e74 602c 2075 7365  ython `int`, use
+00014da0: 6420 746f 2069 6e64 6963 6174 6520 7468  d to indicate th
+00014db0: 6520 706f 7369 7469 6f6e 2069 6e20 7468  e position in th
+00014dc0: 650a 7374 7265 616d 2061 7420 7768 6963  e.stream at whic
+00014dd0: 6820 7468 6520 6576 656e 7420 7761 7320  h the event was 
+00014de0: 7265 636f 7264 6564 2e0a 0a54 6865 2061  recorded...The a
+00014df0: 7474 7269 6275 7465 2060 636f 6d6d 6974  ttribute `commit
+00014e00: 5f70 6f73 6974 696f 6e60 2069 7320 6120  _position` is a 
+00014e10: 5079 7468 6f6e 2060 696e 7460 2c20 7573  Python `int`, us
+00014e20: 6564 2074 6f20 696e 6469 6361 7465 2074  ed to indicate t
+00014e30: 6865 2063 6f6d 6d69 7420 706f 7369 7469  he commit positi
+00014e40: 6f6e 0a61 7420 7768 6963 6820 7468 6520  on.at which the 
+00014e50: 6576 656e 7420 7761 7320 7265 636f 7264  event was record
+00014e60: 6564 2e0a 0a60 6060 7079 7468 6f6e 0a66  ed...```python.f
+00014e70: 726f 6d20 6573 6462 636c 6965 6e74 2e65  rom esdbclient.e
+00014e80: 7665 6e74 7320 696d 706f 7274 2052 6563  vents import Rec
+00014e90: 6f72 6465 6445 7665 6e74 0a0a 7265 636f  ordedEvent..reco
+00014ea0: 7264 6564 5f65 7665 6e74 203d 2052 6563  rded_event = Rec
+00014eb0: 6f72 6465 6445 7665 6e74 280a 2020 2020  ordedEvent(.    
+00014ec0: 7479 7065 3d27 4f72 6465 7243 7265 6174  type='OrderCreat
+00014ed0: 6564 272c 0a20 2020 2064 6174 613d 6227  ed',.    data=b'
+00014ee0: 7b7d 272c 0a20 2020 206d 6574 6164 6174  {}',.    metadat
+00014ef0: 613d 6227 272c 0a20 2020 2063 6f6e 7465  a=b'',.    conte
+00014f00: 6e74 5f74 7970 653d 2761 7070 6c69 6361  nt_type='applica
+00014f10: 7469 6f6e 2f6a 736f 6e27 2c0a 2020 2020  tion/json',.    
+00014f20: 6964 3d75 7569 6434 2829 2c0a 2020 2020  id=uuid4(),.    
+00014f30: 7374 7265 616d 5f6e 616d 653d 2773 7472  stream_name='str
+00014f40: 6561 6d31 272c 0a20 2020 2073 7472 6561  eam1',.    strea
+00014f50: 6d5f 706f 7369 7469 6f6e 3d30 2c0a 2020  m_position=0,.  
+00014f60: 2020 636f 6d6d 6974 5f70 6f73 6974 696f    commit_positio
+00014f70: 6e3d 3531 322c 0a29 0a60 6060 0a0a 2323  n=512,.).```..##
+00014f80: 2320 4173 796e 6369 6f20 636c 6965 6e74  # Asyncio client
+00014f90: 0a0a 5468 6520 6065 7364 6263 6c69 656e  ..The `esdbclien
+00014fa0: 7460 2070 6163 6b61 6765 2061 6c73 6f20  t` package also 
+00014fb0: 696e 636c 7564 6573 2061 6e20 6561 726c  includes an earl
+00014fc0: 7920 7665 7273 696f 6e20 6f66 2061 6e20  y version of an 
+00014fd0: 6173 796e 6368 726f 6e6f 7573 2049 2f4f  asynchronous I/O
+00014fe0: 0a67 5250 4320 5079 7468 6f6e 2063 6c69  .gRPC Python cli
+00014ff0: 656e 742e 2049 7420 666f 6c6c 6f77 7320  ent. It follows 
+00015000: 6578 6163 746c 7920 7468 6520 7361 6d65  exactly the same
+00015010: 2062 6568 6176 696f 7273 2061 7320 7468   behaviors as th
+00015020: 6520 6d75 6c74 6974 6872 6561 6465 640a  e multithreaded.
+00015030: 6045 5344 4243 6c69 656e 7460 2c20 6275  `ESDBClient`, bu
+00015040: 7420 7573 6573 2060 6772 7063 2e61 696f  t uses `grpc.aio
+00015050: 6020 7061 636b 6167 6520 616e 6420 7468  ` package and th
+00015060: 6520 6061 7379 6e63 696f 6020 6d6f 6475  e `asyncio` modu
+00015070: 6c65 2c20 696e 7374 6561 6420 6f66 0a60  le, instead of.`
+00015080: 6772 7063 6020 616e 6420 6074 6872 6561  grpc` and `threa
+00015090: 6469 6e67 602e 0a0a 5468 6520 6061 7379  ding`...The `asy
+000150a0: 6e63 6020 6675 6e63 7469 6f6e 2060 4173  nc` function `As
+000150b0: 796e 6369 6f45 5344 4243 6c69 656e 7460  yncioESDBClient`
+000150c0: 2063 6f6e 7374 7275 6374 7320 7468 6520   constructs the 
+000150d0: 636c 6965 6e74 2c20 616e 6420 636f 6e6e  client, and conn
+000150e0: 6563 7473 2074 6f0a 6120 7365 7276 6572  ects to.a server
+000150f0: 2e20 4974 2063 616e 2062 6520 696d 706f  . It can be impo
+00015100: 7274 6564 2066 726f 6d20 6065 7364 6263  rted from `esdbc
+00015110: 6c69 656e 7460 2c20 616e 6420 6361 6e20  lient`, and can 
+00015120: 6265 2063 616c 6c65 6420 7769 7468 2074  be called with t
+00015130: 6865 2073 616d 650a 6172 6775 6d65 6e74  he same.argument
+00015140: 7320 6173 2060 4553 4442 436c 6965 6e74  s as `ESDBClient
+00015150: 602e 0a0a 6060 6070 7974 686f 6e0a 6672  `...```python.fr
+00015160: 6f6d 2065 7364 6263 6c69 656e 7420 696d  om esdbclient im
+00015170: 706f 7274 2041 7379 6e63 696f 4553 4442  port AsyncioESDB
+00015180: 436c 6965 6e74 0a60 6060 0a0a 5468 6520  Client.```..The 
+00015190: 6173 796e 6368 726f 6e6f 7573 2049 2f4f  asynchronous I/O
+000151a0: 2063 6c69 656e 7420 6861 7320 6061 7379   client has `asy
+000151b0: 6e63 6020 6d65 7468 6f64 7320 6061 7070  nc` methods `app
+000151c0: 656e 645f 6576 656e 7473 2829 602c 0a60  end_events()`,.`
+000151d0: 7265 6164 5f73 7472 6561 6d5f 6576 656e  read_stream_even
+000151e0: 7473 2829 602c 2060 7265 6164 5f61 6c6c  ts()`, `read_all
+000151f0: 5f65 7665 6e74 7328 2960 2c20 6073 7562  _events()`, `sub
+00015200: 7363 7269 6265 5f61 6c6c 5f65 7665 6e74  scribe_all_event
+00015210: 7328 2960 2c0a 6064 656c 6574 655f 7374  s()`,.`delete_st
+00015220: 7265 616d 2829 602c 2060 746f 6d62 7374  ream()`, `tombst
+00015230: 6f6e 655f 7374 7265 616d 2829 602c 2061  one_stream()`, a
+00015240: 6e64 2060 7265 636f 6e6e 6563 7428 2960  nd `reconnect()`
+00015250: 2e0a 0a54 6865 7365 206d 6574 686f 6473  ...These methods
+00015260: 2061 7265 2065 7175 6976 616c 656e 7420   are equivalent 
+00015270: 746f 2074 6865 206d 6574 686f 6473 206f  to the methods o
+00015280: 6e20 6045 5344 4243 6c69 656e 7460 2e20  n `ESDBClient`. 
+00015290: 5468 6579 2068 6176 6520 7468 6520 7361  They have the sa
+000152a0: 6d65 0a6d 6574 686f 6420 7369 676e 6174  me.method signat
+000152b0: 7572 6573 2c20 616e 6420 6361 6e20 6265  ures, and can be
+000152c0: 2063 616c 6c65 6420 7769 7468 2074 6865   called with the
+000152d0: 2073 616d 6520 6172 6775 6d65 6e74 732c   same arguments,
+000152e0: 2074 6f20 7468 6520 7361 6d65 2065 6666   to the same eff
+000152f0: 6563 742e 0a54 6865 206d 6574 686f 6473  ect..The methods
+00015300: 2077 6869 6368 2061 7070 6561 7220 6f6e   which appear on
+00015310: 2060 4553 4442 436c 6965 6e74 6020 6275   `ESDBClient` bu
+00015320: 7420 6e6f 7420 6f6e 2060 4173 796e 6369  t not on `Asynci
+00015330: 6f45 5344 4243 6c69 656e 7460 2077 696c  oESDBClient` wil
+00015340: 6c20 6265 0a61 6464 6564 2073 6f6f 6e2e  l be.added soon.
+00015350: 0a0a 5468 6520 6578 616d 706c 6520 6265  ..The example be
+00015360: 6c6f 7720 6465 6d6f 6e73 7472 6174 6573  low demonstrates
+00015370: 2060 6170 7065 6e64 5f65 7665 6e74 7328   `append_events(
+00015380: 2960 2c20 6072 6561 645f 7374 7265 616d  )`, `read_stream
+00015390: 5f65 7665 6e74 7328 2960 2061 6e64 0a60  _events()` and.`
+000153a0: 7375 6273 6372 6962 655f 616c 6c5f 6576  subscribe_all_ev
+000153b0: 656e 7473 2829 6020 6d65 7468 6f64 732e  ents()` methods.
+000153c0: 2054 6865 7365 2061 7265 2074 6865 206d   These are the m
+000153d0: 6f73 7420 7573 6566 756c 206d 6574 686f  ost useful metho
+000153e0: 6473 2066 6f72 2077 7269 7469 6e67 0a61  ds for writing.a
+000153f0: 6e20 6576 656e 742d 736f 7572 6365 6420  n event-sourced 
+00015400: 6170 706c 6963 6174 696f 6e2c 2061 6c6c  application, all
+00015410: 6f77 696e 6720 6e65 7720 6167 6772 6567  owing new aggreg
+00015420: 6174 6520 6576 656e 7473 2074 6f20 6265  ate events to be
+00015430: 2072 6563 6f72 6465 642c 2074 6865 0a72   recorded, the.r
+00015440: 6563 6f72 6465 6420 6576 656e 7473 206f  ecorded events o
+00015450: 6620 616e 2061 6767 7265 6761 7465 2074  f an aggregate t
+00015460: 6f20 6265 206f 6274 6169 6e65 6420 736f  o be obtained so
+00015470: 2061 6767 7265 6761 7465 7320 6361 6e20   aggregates can 
+00015480: 6265 2072 6563 6f6e 7374 7275 6374 6564  be reconstructed
+00015490: 2c0a 616e 6420 7468 6520 7374 6174 6520  ,.and the state 
+000154a0: 6f66 2061 6e20 6170 706c 6963 6174 696f  of an applicatio
+000154b0: 6e20 746f 2070 726f 7061 6761 7465 6420  n to propagated 
+000154c0: 616e 6420 7072 6f63 6573 7365 6420 7769  and processed wi
+000154d0: 7468 2022 6578 6163 746c 792d 6f6e 6365  th "exactly-once
+000154e0: 220a 7365 6d61 6e74 6963 732e 0a0a 6060  ".semantics...``
+000154f0: 6070 7974 686f 6e0a 696d 706f 7274 2061  `python.import a
+00015500: 7379 6e63 696f 0a0a 6173 796e 6320 6465  syncio..async de
+00015510: 6620 6465 6d6f 6e73 7472 6174 655f 6173  f demonstrate_as
+00015520: 796e 6369 6f5f 636c 6965 6e74 2829 3a0a  yncio_client():.
+00015530: 0a20 2020 2023 2043 6f6e 7374 7275 6374  .    # Construct
+00015540: 2063 6c69 656e 742e 0a20 2020 2063 6c69   client..    cli
+00015550: 656e 7420 3d20 6177 6169 7420 4173 796e  ent = await Asyn
+00015560: 6369 6f45 5344 4243 6c69 656e 7428 0a20  cioESDBClient(. 
+00015570: 2020 2020 2020 2075 7269 3d6f 732e 6765         uri=os.ge
+00015580: 7465 6e76 2822 4553 4442 5f55 5249 2229  tenv("ESDB_URI")
+00015590: 2c0a 2020 2020 2020 2020 726f 6f74 5f63  ,.        root_c
+000155a0: 6572 7469 6669 6361 7465 733d 6f73 2e67  ertificates=os.g
+000155b0: 6574 656e 7628 2245 5344 425f 524f 4f54  etenv("ESDB_ROOT
+000155c0: 5f43 4552 5449 4649 4341 5445 5322 292c  _CERTIFICATES"),
+000155d0: 0a20 2020 2029 0a0a 2020 2020 2320 4170  .    )..    # Ap
+000155e0: 7065 6e64 2065 7665 6e74 732e 0a20 2020  pend events..   
+000155f0: 2073 7472 6561 6d5f 6e61 6d65 203d 2073   stream_name = s
+00015600: 7472 2875 7569 6434 2829 290a 2020 2020  tr(uuid4()).    
+00015610: 6576 656e 7431 203d 204e 6577 4576 656e  event1 = NewEven
+00015620: 7428 224f 7264 6572 4372 6561 7465 6422  t("OrderCreated"
+00015630: 2c20 6461 7461 3d62 277b 7d27 290a 2020  , data=b'{}').  
+00015640: 2020 6576 656e 7432 203d 204e 6577 4576    event2 = NewEv
+00015650: 656e 7428 224f 7264 6572 5570 6461 7465  ent("OrderUpdate
+00015660: 6422 2c20 6461 7461 3d62 277b 7d27 290a  d", data=b'{}').
+00015670: 2020 2020 6576 656e 7433 203d 204e 6577      event3 = New
+00015680: 4576 656e 7428 224f 7264 6572 4465 6c65  Event("OrderDele
+00015690: 7465 6422 2c20 6461 7461 3d62 277b 7d27  ted", data=b'{}'
+000156a0: 290a 0a20 2020 2061 7761 6974 2063 6c69  )..    await cli
+000156b0: 656e 742e 6170 7065 6e64 5f65 7665 6e74  ent.append_event
+000156c0: 7328 0a20 2020 2020 2020 2073 7472 6561  s(.        strea
+000156d0: 6d5f 6e61 6d65 3d73 7472 6561 6d5f 6e61  m_name=stream_na
+000156e0: 6d65 2c0a 2020 2020 2020 2020 6578 7065  me,.        expe
+000156f0: 6374 6564 5f70 6f73 6974 696f 6e3d 4e6f  cted_position=No
+00015700: 6e65 2c0a 2020 2020 2020 2020 6576 656e  ne,.        even
+00015710: 7473 3d5b 6576 656e 7431 2c20 6576 656e  ts=[event1, even
+00015720: 7432 2c20 6576 656e 7433 5d0a 2020 2020  t2, event3].    
+00015730: 290a 0a20 2020 2023 2052 6561 6420 7374  )..    # Read st
+00015740: 7265 616d 2065 7665 6e74 732e 0a20 2020  ream events..   
+00015750: 2072 6563 6f72 6465 6420 3d20 6177 6169   recorded = awai
+00015760: 7420 636c 6965 6e74 2e72 6561 645f 7374  t client.read_st
+00015770: 7265 616d 5f65 7665 6e74 7328 7374 7265  ream_events(stre
+00015780: 616d 5f6e 616d 6529 0a20 2020 2061 7373  am_name).    ass
+00015790: 6572 7420 6c65 6e28 7265 636f 7264 6564  ert len(recorded
+000157a0: 2920 3d3d 2033 0a20 2020 2061 7373 6572  ) == 3.    asser
+000157b0: 7420 7265 636f 7264 6564 5b30 5d2e 6964  t recorded[0].id
+000157c0: 203d 3d20 6576 656e 7431 2e69 640a 2020   == event1.id.  
+000157d0: 2020 6173 7365 7274 2072 6563 6f72 6465    assert recorde
+000157e0: 645b 315d 2e69 6420 3d3d 2065 7665 6e74  d[1].id == event
+000157f0: 322e 6964 0a20 2020 2061 7373 6572 7420  2.id.    assert 
+00015800: 7265 636f 7264 6564 5b32 5d2e 6964 203d  recorded[2].id =
+00015810: 3d20 6576 656e 7433 2e69 640a 0a0a 2020  = event3.id...  
+00015820: 2020 2320 5375 6273 6372 6962 6520 616c    # Subscribe al
+00015830: 6c20 6576 656e 7473 2e0a 2020 2020 7265  l events..    re
+00015840: 6365 6976 6564 203d 205b 5d0a 2020 2020  ceived = [].    
+00015850: 6173 796e 6320 666f 7220 6576 656e 7420  async for event 
+00015860: 696e 2061 7761 6974 2063 6c69 656e 742e  in await client.
+00015870: 7375 6273 6372 6962 655f 616c 6c5f 6576  subscribe_all_ev
+00015880: 656e 7473 2829 3a0a 2020 2020 2020 2020  ents():.        
+00015890: 7265 6365 6976 6564 2e61 7070 656e 6428  received.append(
+000158a0: 6576 656e 7429 0a20 2020 2020 2020 2069  event).        i
+000158b0: 6620 6576 656e 742e 6964 203d 3d20 6576  f event.id == ev
+000158c0: 656e 7433 2e69 643a 0a20 2020 2020 2020  ent3.id:.       
+000158d0: 2020 2020 2062 7265 616b 0a20 2020 2061       break.    a
+000158e0: 7373 6572 7420 7265 636f 7264 6564 5b2d  ssert recorded[-
+000158f0: 335d 2e69 6420 3d3d 2065 7665 6e74 312e  3].id == event1.
+00015900: 6964 0a20 2020 2061 7373 6572 7420 7265  id.    assert re
+00015910: 636f 7264 6564 5b2d 325d 2e69 6420 3d3d  corded[-2].id ==
+00015920: 2065 7665 6e74 322e 6964 0a20 2020 2061   event2.id.    a
+00015930: 7373 6572 7420 7265 636f 7264 6564 5b2d  ssert recorded[-
+00015940: 315d 2e69 6420 3d3d 2065 7665 6e74 332e  1].id == event3.
+00015950: 6964 0a0a 0a20 2020 2023 2043 6c6f 7365  id...    # Close
+00015960: 2074 6865 2063 6c69 656e 742e 0a20 2020   the client..   
+00015970: 2061 7761 6974 2063 6c69 656e 742e 636c   await client.cl
+00015980: 6f73 6528 290a 0a0a 2320 5275 6e20 7468  ose()...# Run th
+00015990: 6520 6465 6d6f 2e0a 6173 796e 6369 6f2e  e demo..asyncio.
+000159a0: 6765 745f 6576 656e 745f 6c6f 6f70 2829  get_event_loop()
+000159b0: 2e72 756e 5f75 6e74 696c 5f63 6f6d 706c  .run_until_compl
+000159c0: 6574 6528 0a20 2020 2064 656d 6f6e 7374  ete(.    demonst
+000159d0: 7261 7465 5f61 7379 6e63 696f 5f63 6c69  rate_asyncio_cli
+000159e0: 656e 7428 290a 290a 6060 600a 0a23 2320  ent().).```..## 
+000159f0: 436f 6e74 7269 6275 746f 7273 0a0a 2323  Contributors..##
+00015a00: 2320 496e 7374 616c 6c20 506f 6574 7279  # Install Poetry
+00015a10: 0a0a 5468 6520 6669 7273 7420 7468 696e  ..The first thin
+00015a20: 6720 6973 2074 6f20 6368 6563 6b20 796f  g is to check yo
+00015a30: 7520 6861 7665 2050 6f65 7472 7920 696e  u have Poetry in
+00015a40: 7374 616c 6c65 642e 0a0a 2020 2020 2420  stalled...    $ 
+00015a50: 706f 6574 7279 202d 2d76 6572 7369 6f6e  poetry --version
+00015a60: 0a0a 4966 2079 6f75 2064 6f6e 2774 2c20  ..If you don't, 
+00015a70: 7468 656e 2070 6c65 6173 6520 5b69 6e73  then please [ins
+00015a80: 7461 6c6c 2050 6f65 7472 795d 2868 7474  tall Poetry](htt
+00015a90: 7073 3a2f 2f70 7974 686f 6e2d 706f 6574  ps://python-poet
+00015aa0: 7279 2e6f 7267 2f64 6f63 732f 2369 6e73  ry.org/docs/#ins
+00015ab0: 7461 6c6c 696e 672d 7769 7468 2d74 6865  talling-with-the
+00015ac0: 2d6f 6666 6963 6961 6c2d 696e 7374 616c  -official-instal
+00015ad0: 6c65 7229 2e0a 0a20 2020 2024 2063 7572  ler)...    $ cur
+00015ae0: 6c20 2d73 534c 2068 7474 7073 3a2f 2f69  l -sSL https://i
+00015af0: 6e73 7461 6c6c 2e70 7974 686f 6e2d 706f  nstall.python-po
+00015b00: 6574 7279 2e6f 7267 207c 2070 7974 686f  etry.org | pytho
+00015b10: 6e33 202d 0a0a 4974 2077 696c 6c20 6865  n3 -..It will he
+00015b20: 6c70 2074 6f20 6d61 6b65 2073 7572 6520  lp to make sure 
+00015b30: 506f 6574 7279 2773 2062 696e 2064 6972  Poetry's bin dir
+00015b40: 6563 746f 7279 2069 7320 696e 2079 6f75  ectory is in you
+00015b50: 7220 6050 4154 4860 2065 6e76 6972 6f6e  r `PATH` environ
+00015b60: 6d65 6e74 2076 6172 6961 626c 652e 0a0a  ment variable...
+00015b70: 4275 7420 696e 2061 6e79 2063 6173 652c  But in any case,
+00015b80: 206d 616b 6520 7375 7265 2079 6f75 206b   make sure you k
+00015b90: 6e6f 7720 7468 6520 7061 7468 2074 6f20  now the path to 
+00015ba0: 7468 6520 6070 6f65 7472 7960 2065 7865  the `poetry` exe
+00015bb0: 6375 7461 626c 652e 2054 6865 2050 6f65  cutable. The Poe
+00015bc0: 7472 790a 696e 7374 616c 6c65 7220 7465  try.installer te
+00015bd0: 6c6c 7320 796f 7520 7768 6572 6520 6974  lls you where it
+00015be0: 2068 6173 2062 6565 6e20 696e 7374 616c   has been instal
+00015bf0: 6c65 642c 2061 6e64 2068 6f77 2074 6f20  led, and how to 
+00015c00: 636f 6e66 6967 7572 6520 796f 7572 2073  configure your s
+00015c10: 6865 6c6c 2e0a 0a50 6c65 6173 6520 7265  hell...Please re
+00015c20: 6665 7220 746f 2074 6865 205b 506f 6574  fer to the [Poet
+00015c30: 7279 2064 6f63 735d 2868 7474 7073 3a2f  ry docs](https:/
+00015c40: 2f70 7974 686f 6e2d 706f 6574 7279 2e6f  /python-poetry.o
+00015c50: 7267 2f64 6f63 732f 2920 666f 7220 6775  rg/docs/) for gu
+00015c60: 6964 616e 6365 206f 6e0a 7573 696e 6720  idance on.using 
+00015c70: 506f 6574 7279 2e0a 0a23 2323 2053 6574  Poetry...### Set
+00015c80: 7570 2066 6f72 2050 7943 6861 726d 2075  up for PyCharm u
+00015c90: 7365 7273 0a0a 596f 7520 6361 6e20 6561  sers..You can ea
+00015ca0: 7369 6c79 206f 6274 6169 6e20 7468 6520  sily obtain the 
+00015cb0: 7072 6f6a 6563 7420 6669 6c65 7320 7573  project files us
+00015cc0: 696e 6720 5079 4368 6172 6d20 286d 656e  ing PyCharm (men
+00015cd0: 7520 2247 6974 203e 2043 6c6f 6e65 2e2e  u "Git > Clone..
+00015ce0: 2e22 292e 0a50 7943 6861 726d 2077 696c  .")..PyCharm wil
+00015cf0: 6c20 7468 656e 2075 7375 616c 6c79 2070  l then usually p
+00015d00: 726f 6d70 7420 796f 7520 746f 206f 7065  rompt you to ope
+00015d10: 6e20 7468 6520 7072 6f6a 6563 742e 0a0a  n the project...
+00015d20: 4f70 656e 2074 6865 2070 726f 6a65 6374  Open the project
+00015d30: 2069 6e20 6120 6e65 7720 7769 6e64 6f77   in a new window
+00015d40: 2e20 5079 4368 6172 6d20 7769 6c6c 2074  . PyCharm will t
+00015d50: 6865 6e20 7573 7561 6c6c 7920 7072 6f6d  hen usually prom
+00015d60: 7074 2079 6f75 2074 6f20 6372 6561 7465  pt you to create
+00015d70: 0a61 206e 6577 2076 6972 7475 616c 2065  .a new virtual e
+00015d80: 6e76 6972 6f6e 6d65 6e74 2e0a 0a43 7265  nvironment...Cre
+00015d90: 6174 6520 6120 6e65 7720 506f 6574 7279  ate a new Poetry
+00015da0: 2076 6972 7475 616c 2065 6e76 6972 6f6e   virtual environ
+00015db0: 6d65 6e74 2066 6f72 2074 6865 2070 726f  ment for the pro
+00015dc0: 6a65 6374 2e20 4966 2050 7943 6861 726d  ject. If PyCharm
+00015dd0: 2064 6f65 736e 2774 2061 6c72 6561 6479   doesn't already
+00015de0: 0a6b 6e6f 7720 7768 6572 6520 796f 7572  .know where your
+00015df0: 2060 706f 6574 7279 6020 6578 6563 7574   `poetry` execut
+00015e00: 6162 6c65 2069 732c 2074 6865 6e20 7365  able is, then se
+00015e10: 7420 7468 6520 7061 7468 2074 6f20 796f  t the path to yo
+00015e20: 7572 2060 706f 6574 7279 6020 6578 6563  ur `poetry` exec
+00015e30: 7574 6162 6c65 0a69 6e20 7468 6520 224e  utable.in the "N
+00015e40: 6577 2050 6f65 7472 7920 456e 7669 726f  ew Poetry Enviro
+00015e50: 6e6d 656e 7422 2066 6f72 6d20 696e 7075  nment" form inpu
+00015e60: 7420 6669 656c 6420 6c61 6265 6c6c 6564  t field labelled
+00015e70: 2022 506f 6574 7279 2065 7865 6375 7461   "Poetry executa
+00015e80: 626c 6522 2e20 496e 2074 6865 0a22 4e65  ble". In the."Ne
+00015e90: 7720 506f 6574 7279 2045 6e76 6972 6f6e  w Poetry Environ
+00015ea0: 6d65 6e74 2220 666f 726d 2c20 796f 7520  ment" form, you 
+00015eb0: 7769 6c6c 2061 6c73 6f20 6861 7665 2074  will also have t
+00015ec0: 6865 206f 7070 6f72 7475 6e69 7479 2074  he opportunity t
+00015ed0: 6f20 7365 6c65 6374 2077 6869 6368 0a50  o select which.P
+00015ee0: 7974 686f 6e20 6578 6563 7574 6162 6c65  ython executable
+00015ef0: 2077 696c 6c20 6265 2075 7365 6420 6279   will be used by
+00015f00: 2074 6865 2076 6972 7475 616c 2065 6e76   the virtual env
+00015f10: 6972 6f6e 6d65 6e74 2e0a 0a50 7943 6861  ironment...PyCha
+00015f20: 726d 2077 696c 6c20 7468 656e 2063 7265  rm will then cre
+00015f30: 6174 6520 6120 6e65 7720 506f 6574 7279  ate a new Poetry
+00015f40: 2076 6972 7475 616c 2065 6e76 6972 6f6e   virtual environ
+00015f50: 6d65 6e74 2066 6f72 2079 6f75 7220 7072  ment for your pr
+00015f60: 6f6a 6563 742c 2075 7369 6e67 0a61 2070  oject, using.a p
+00015f70: 6172 7469 6375 6c61 7220 7665 7273 696f  articular versio
+00015f80: 6e20 6f66 2050 7974 686f 6e2c 2061 6e64  n of Python, and
+00015f90: 2061 6c73 6f20 696e 7374 616c 6c20 696e   also install in
+00015fa0: 746f 2074 6869 7320 7669 7274 7561 6c20  to this virtual 
+00015fb0: 656e 7669 726f 6e6d 656e 7420 7468 650a  environment the.
+00015fc0: 7072 6f6a 6563 7427 7320 7061 636b 6167  project's packag
+00015fd0: 6520 6465 7065 6e64 656e 6369 6573 2061  e dependencies a
+00015fe0: 6363 6f72 6469 6e67 2074 6f20 7468 6520  ccording to the 
+00015ff0: 7072 6f6a 6563 7427 7320 6070 6f65 7472  project's `poetr
+00016000: 792e 6c6f 636b 6020 6669 6c65 2e0a 0a59  y.lock` file...Y
+00016010: 6f75 2063 616e 2061 6464 2064 6966 6665  ou can add diffe
+00016020: 7265 6e74 2050 6f65 7472 7920 656e 7669  rent Poetry envi
+00016030: 726f 6e6d 656e 7473 2066 6f72 2064 6966  ronments for dif
+00016040: 6665 7265 6e74 2050 7974 686f 6e20 7665  ferent Python ve
+00016050: 7273 696f 6e73 2c20 616e 6420 7377 6974  rsions, and swit
+00016060: 6368 0a62 6574 7765 656e 2074 6865 6d20  ch.between them 
+00016070: 7573 696e 6720 7468 6520 2250 7974 686f  using the "Pytho
+00016080: 6e20 496e 7465 7270 7265 7465 7222 2073  n Interpreter" s
+00016090: 6574 7469 6e67 7320 6f66 2050 7943 6861  ettings of PyCha
+000160a0: 726d 2e20 4966 2079 6f75 2077 616e 7420  rm. If you want 
+000160b0: 746f 2075 7365 0a61 2076 6572 7369 6f6e  to use.a version
+000160c0: 206f 6620 5079 7468 6f6e 2074 6861 7420   of Python that 
+000160d0: 6973 6e27 7420 696e 7374 616c 6c65 642c  isn't installed,
+000160e0: 2065 6974 6865 7220 7573 6520 796f 7572   either use your
+000160f0: 2066 6176 6f75 7269 7465 2070 6163 6b61   favourite packa
+00016100: 6765 206d 616e 6167 6572 2c0a 6f72 2069  ge manager,.or i
+00016110: 6e73 7461 6c6c 2050 7974 686f 6e20 6279  nstall Python by
+00016120: 2064 6f77 6e6c 6f61 6469 6e67 2061 6e20   downloading an 
+00016130: 696e 7374 616c 6c65 7220 666f 7220 7265  installer for re
+00016140: 6365 6e74 2076 6572 7369 6f6e 7320 6f66  cent versions of
+00016150: 2050 7974 686f 6e20 6469 7265 6374 6c79   Python directly
+00016160: 0a66 726f 6d20 7468 6520 5b50 7974 686f  .from the [Pytho
+00016170: 6e20 7765 6273 6974 655d 2868 7474 7073  n website](https
+00016180: 3a2f 2f77 7777 2e70 7974 686f 6e2e 6f72  ://www.python.or
+00016190: 672f 646f 776e 6c6f 6164 732f 292e 0a0a  g/downloads/)...
+000161a0: 4f6e 6365 2070 726f 6a65 6374 2064 6570  Once project dep
+000161b0: 656e 6465 6e63 6965 7320 6861 7665 2062  endencies have b
+000161c0: 6565 6e20 696e 7374 616c 6c65 642c 2079  een installed, y
+000161d0: 6f75 2073 686f 756c 6420 6265 2061 626c  ou should be abl
+000161e0: 6520 746f 2072 756e 2074 6573 7473 0a66  e to run tests.f
+000161f0: 726f 6d20 7769 7468 696e 2050 7943 6861  rom within PyCha
+00016200: 726d 2028 7269 6768 742d 636c 6963 6b20  rm (right-click 
+00016210: 6f6e 2074 6865 2060 7465 7374 7360 2066  on the `tests` f
+00016220: 6f6c 6465 7220 616e 6420 7365 6c65 6374  older and select
+00016230: 2074 6865 2027 5275 6e27 206f 7074 696f   the 'Run' optio
+00016240: 6e29 2e0a 0a42 6563 6175 7365 206f 6620  n)...Because of 
+00016250: 6120 636f 6e66 6c69 6374 2062 6574 7765  a conflict betwe
+00016260: 656e 2070 7974 6573 7420 616e 6420 5079  en pytest and Py
+00016270: 4368 6172 6d27 7320 6465 6275 6767 6572  Charm's debugger
+00016280: 2061 6e64 2074 6865 2063 6f76 6572 6167   and the coverag
+00016290: 6520 746f 6f6c 2c0a 796f 7520 6d61 7920  e tool,.you may 
+000162a0: 6e65 6564 2074 6f20 6164 6420 6060 2d2d  need to add ``--
+000162b0: 6e6f 2d63 6f76 6060 2061 7320 616e 206f  no-cov`` as an o
+000162c0: 7074 696f 6e20 746f 2074 6865 2074 6573  ption to the tes
+000162d0: 7420 7275 6e6e 6572 2074 656d 706c 6174  t runner templat
+000162e0: 652e 2041 6c74 6572 6e61 7469 7665 6c79  e. Alternatively
+000162f0: 2c0a 6a75 7374 2075 7365 2074 6865 2050  ,.just use the P
+00016300: 7974 686f 6e20 5374 616e 6461 7264 204c  ython Standard L
+00016310: 6962 7261 7279 2773 2060 6075 6e69 7474  ibrary's ``unitt
+00016320: 6573 7460 6020 6d6f 6475 6c65 2e0a 0a59  est`` module...Y
+00016330: 6f75 2073 686f 756c 6420 616c 736f 2062  ou should also b
+00016340: 6520 6162 6c65 2074 6f20 6f70 656e 2061  e able to open a
+00016350: 2074 6572 6d69 6e61 6c20 7769 6e64 6f77   terminal window
+00016360: 2069 6e20 5079 4368 6172 6d2c 2061 6e64   in PyCharm, and
+00016370: 2072 756e 2074 6865 2070 726f 6a65 6374   run the project
+00016380: 2773 0a4d 616b 6566 696c 6520 636f 6d6d  's.Makefile comm
+00016390: 616e 6473 2066 726f 6d20 7468 6520 636f  ands from the co
+000163a0: 6d6d 616e 6420 6c69 6e65 2028 7365 6520  mmand line (see 
+000163b0: 6265 6c6f 7729 2e0a 0a23 2323 2053 6574  below)...### Set
+000163c0: 7570 2066 726f 6d20 636f 6d6d 616e 6420  up from command 
+000163d0: 6c69 6e65 0a0a 4f62 7461 696e 2074 6865  line..Obtain the
+000163e0: 2070 726f 6a65 6374 2066 696c 6573 2c20   project files, 
+000163f0: 7573 696e 6720 4769 7420 6f72 2073 7569  using Git or sui
+00016400: 7461 626c 6520 616c 7465 726e 6174 6976  table alternativ
+00016410: 652e 0a0a 496e 2061 2074 6572 6d69 6e61  e...In a termina
+00016420: 6c20 6170 706c 6963 6174 696f 6e2c 2063  l application, c
+00016430: 6861 6e67 6520 796f 7572 2063 7572 7265  hange your curre
+00016440: 6e74 2077 6f72 6b69 6e67 2064 6972 6563  nt working direc
+00016450: 746f 7279 0a74 6f20 7468 6520 726f 6f74  tory.to the root
+00016460: 2066 6f6c 6465 7220 6f66 2074 6865 2070   folder of the p
+00016470: 726f 6a65 6374 2066 696c 6573 2e20 5468  roject files. Th
+00016480: 6572 6520 7368 6f75 6c64 2062 6520 6120  ere should be a 
+00016490: 4d61 6b65 6669 6c65 0a69 6e20 7468 6973  Makefile.in this
+000164a0: 2066 6f6c 6465 722e 0a0a 5573 6520 7468   folder...Use th
+000164b0: 6520 4d61 6b65 6669 6c65 2074 6f20 6372  e Makefile to cr
+000164c0: 6561 7465 2061 206e 6577 2050 6f65 7472  eate a new Poetr
+000164d0: 7920 7669 7274 7561 6c20 656e 7669 726f  y virtual enviro
+000164e0: 6e6d 656e 7420 666f 7220 7468 650a 7072  nment for the.pr
+000164f0: 6f6a 6563 7420 616e 6420 696e 7374 616c  oject and instal
+00016500: 6c20 7468 6520 7072 6f6a 6563 7427 7320  l the project's 
+00016510: 7061 636b 6167 6520 6465 7065 6e64 656e  package dependen
+00016520: 6369 6573 2069 6e74 6f20 6974 2c0a 7573  cies into it,.us
+00016530: 696e 6720 7468 6520 666f 6c6c 6f77 696e  ing the followin
+00016540: 6720 636f 6d6d 616e 642e 0a0a 2020 2020  g command...    
+00016550: 2420 6d61 6b65 2069 6e73 7461 6c6c 2d70  $ make install-p
+00016560: 6163 6b61 6765 730a 0a49 7427 7320 616c  ackages..It's al
+00016570: 736f 2070 6f73 7369 626c 6520 746f 2061  so possible to a
+00016580: 6c73 6f20 696e 7374 616c 6c20 7468 6520  lso install the 
+00016590: 7072 6f6a 6563 7420 696e 2027 6564 6974  project in 'edit
+000165a0: 6162 6c65 206d 6f64 6527 2e0a 0a20 2020  able mode'...   
+000165b0: 2024 206d 616b 6520 696e 7374 616c 6c0a   $ make install.
+000165c0: 0a50 6c65 6173 6520 6e6f 7465 2c20 6966  .Please note, if
+000165d0: 2079 6f75 2063 7265 6174 6520 7468 6520   you create the 
+000165e0: 7669 7274 7561 6c20 656e 7669 726f 6e6d  virtual environm
+000165f0: 656e 7420 696e 2074 6869 7320 7761 792c  ent in this way,
+00016600: 2061 6e64 2074 6865 6e20 7472 7920 746f   and then try to
+00016610: 0a6f 7065 6e20 7468 6520 7072 6f6a 6563  .open the projec
+00016620: 7420 696e 2050 7943 6861 726d 2061 6e64  t in PyCharm and
+00016630: 2063 6f6e 6669 6775 7265 2074 6865 2070   configure the p
+00016640: 726f 6a65 6374 2074 6f20 7573 6520 7468  roject to use th
+00016650: 6973 2076 6972 7475 616c 0a65 6e76 6972  is virtual.envir
+00016660: 6f6e 6d65 6e74 2061 7320 616e 2022 4578  onment as an "Ex
+00016670: 6973 7469 6e67 2050 6f65 7472 7920 456e  isting Poetry En
+00016680: 7669 726f 6e6d 656e 7422 2c20 5079 4368  vironment", PyCh
+00016690: 6172 6d20 736f 6d65 7469 6d65 7320 6861  arm sometimes ha
+000166a0: 7320 736f 6d65 0a69 7373 7565 7320 2864  s some.issues (d
+000166b0: 6f6e 2774 206b 6e6f 7720 7768 7929 2077  on't know why) w
+000166c0: 6869 6368 206d 6967 6874 2062 6520 7072  hich might be pr
+000166d0: 6f62 6c65 6d61 7469 632e 2049 6620 796f  oblematic. If yo
+000166e0: 7520 656e 636f 756e 7465 7220 7375 6368  u encounter such
+000166f0: 0a69 7373 7565 732c 2079 6f75 2063 616e  .issues, you can
+00016700: 2072 6573 6f6c 7665 2074 6865 7365 2069   resolve these i
+00016710: 7373 7565 7320 6279 2064 656c 6574 696e  ssues by deletin
+00016720: 6720 7468 6520 7669 7274 7561 6c20 656e  g the virtual en
+00016730: 7669 726f 6e6d 656e 740a 616e 6420 6372  vironment.and cr
+00016740: 6561 7469 6e67 2074 6865 2050 6f65 7472  eating the Poetr
+00016750: 7920 7669 7274 7561 6c20 656e 7669 726f  y virtual enviro
+00016760: 6e6d 656e 7420 7573 696e 6720 5079 4368  nment using PyCh
+00016770: 6172 6d20 2873 6565 2061 626f 7665 292e  arm (see above).
+00016780: 0a0a 2323 2320 5072 6f6a 6563 7420 4d61  ..### Project Ma
+00016790: 6b65 6669 6c65 2063 6f6d 6d61 6e64 730a  kefile commands.
+000167a0: 0a59 6f75 2063 616e 2073 7461 7274 2045  .You can start E
+000167b0: 7665 6e74 5374 6f72 6544 4220 7573 696e  ventStoreDB usin
+000167c0: 6720 7468 6520 666f 6c6c 6f77 696e 6720  g the following 
+000167d0: 636f 6d6d 616e 642e 0a0a 2020 2020 2420  command...    $ 
+000167e0: 6d61 6b65 2073 7461 7274 2d65 7665 6e74  make start-event
+000167f0: 7374 6f72 6564 620a 0a59 6f75 2063 616e  storedb..You can
+00016800: 2072 756e 2074 6573 7473 2075 7369 6e67   run tests using
+00016810: 2074 6865 2066 6f6c 6c6f 7769 6e67 2063   the following c
+00016820: 6f6d 6d61 6e64 2028 6e65 6564 7320 4576  ommand (needs Ev
+00016830: 656e 7453 746f 7265 4442 2074 6f20 6265  entStoreDB to be
+00016840: 2072 756e 6e69 6e67 292e 0a0a 2020 2020   running)...    
+00016850: 2420 6d61 6b65 2074 6573 740a 0a59 6f75  $ make test..You
+00016860: 2063 616e 2073 746f 7020 4576 656e 7453   can stop EventS
+00016870: 746f 7265 4442 2075 7369 6e67 2074 6865  toreDB using the
+00016880: 2066 6f6c 6c6f 7769 6e67 2063 6f6d 6d61   following comma
+00016890: 6e64 2e0a 0a20 2020 2024 206d 616b 6520  nd...    $ make 
+000168a0: 7374 6f70 2d65 7665 6e74 7374 6f72 6564  stop-eventstored
+000168b0: 620a 0a59 6f75 2063 616e 2063 6865 636b  b..You can check
+000168c0: 2074 6865 2066 6f72 6d61 7474 696e 6720   the formatting 
+000168d0: 6f66 2074 6865 2063 6f64 6520 7573 696e  of the code usin
+000168e0: 6720 7468 6520 666f 6c6c 6f77 696e 6720  g the following 
+000168f0: 636f 6d6d 616e 642e 0a0a 2020 2020 2420  command...    $ 
+00016900: 6d61 6b65 206c 696e 740a 0a59 6f75 2063  make lint..You c
+00016910: 616e 2072 6566 6f72 6d61 7420 7468 6520  an reformat the 
+00016920: 636f 6465 2075 7369 6e67 2074 6865 2066  code using the f
+00016930: 6f6c 6c6f 7769 6e67 2063 6f6d 6d61 6e64  ollowing command
+00016940: 2e0a 0a20 2020 2024 206d 616b 6520 666d  ...    $ make fm
+00016950: 740a 0a54 6573 7473 2062 656c 6f6e 6720  t..Tests belong 
+00016960: 696e 2060 2e2f 7465 7374 7360 2e20 436f  in `./tests`. Co
+00016970: 6465 2d75 6e64 6572 2d74 6573 7420 6265  de-under-test be
+00016980: 6c6f 6e67 7320 696e 2060 2e2f 6573 6462  longs in `./esdb
+00016990: 636c 6965 6e74 602e 0a0a 4564 6974 2070  client`...Edit p
+000169a0: 6163 6b61 6765 2064 6570 656e 6465 6e63  ackage dependenc
+000169b0: 6965 7320 696e 2060 7079 7072 6f6a 6563  ies in `pyprojec
+000169c0: 742e 746f 6d6c 602e 2055 7064 6174 6520  t.toml`. Update 
+000169d0: 696e 7374 616c 6c65 6420 7061 636b 6167  installed packag
+000169e0: 6573 2028 616e 6420 7468 650a 6070 6f65  es (and the.`poe
+000169f0: 7472 792e 6c6f 636b 6020 6669 6c65 2920  try.lock` file) 
+00016a00: 7573 696e 6720 7468 6520 666f 6c6c 6f77  using the follow
+00016a10: 696e 6720 636f 6d6d 616e 642e 0a0a 2020  ing command...  
+00016a20: 2020 2420 6d61 6b65 2075 7064 6174 652d    $ make update-
+00016a30: 7061 636b 6167 6573 0a                   packages.
```

### Comparing `esdbclient-1.0a1/esdbclient/client.py` & `esdbclient-1.0a2/esdbclient/client.py`

 * *Files 4% similar despite different names*

```diff
@@ -15,112 +15,112 @@
     Sequence,
     Tuple,
     TypeVar,
     cast,
     overload,
 )
 
+import dns.exception
 import dns.resolver
 import grpc
 from grpc import CallCredentials, RpcError
 
 from esdbclient.connection import (
     NODE_PREFERENCE_FOLLOWER,
     NODE_PREFERENCE_LEADER,
     NODE_PREFERENCE_RANDOM,
     NODE_PREFERENCE_REPLICA,
     URI_SCHEME_ESDB,
     URI_SCHEME_ESDB_DISCOVER,
     ConnectionSpec,
     ESDBConnection,
 )
-from esdbclient.esdbapi import (
-    NODE_STATE_FOLLOWER,
-    NODE_STATE_LEADER,
-    NODE_STATE_REPLICA,
-    BasicAuthCallCredentials,
-    BatchAppendRequest,
-    ClusterMember,
-    SubscriptionInfo,
-    SubscriptionReadRequest,
-    SubscriptionReadResponse,
-    handle_rpc_error,
-)
+from esdbclient.esdbapibase import BasicAuthCallCredentials, handle_rpc_error
 from esdbclient.events import NewEvent, RecordedEvent
 from esdbclient.exceptions import (
     DiscoveryFailed,
+    DNSError,
     FollowerNotFound,
     GossipSeedError,
     GrpcError,
     LeaderNotFound,
     NodeIsNotLeader,
+    NotFound,
     ReadOnlyReplicaNotFound,
-    StreamNotFound,
+    ServiceUnavailable,
+)
+from esdbclient.gossip import (
+    NODE_STATE_FOLLOWER,
+    NODE_STATE_LEADER,
+    NODE_STATE_REPLICA,
+    ClusterMember,
+)
+from esdbclient.persistent import (
+    ConsumerStrategy,
+    SubscriptionInfo,
+    SubscriptionReadRequests,
+    SubscriptionReadResponse,
 )
 
 # Matches the 'type' of "system" events.
 ESDB_SYSTEM_EVENTS_REGEX = r"\$.+"
 # Matches the 'type' of "PersistentConfig" events.
 ESDB_PERSISTENT_CONFIG_EVENTS_REGEX = r"PersistentConfig\d+"
 
 DEFAULT_EXCLUDE_FILTER = (ESDB_SYSTEM_EVENTS_REGEX, ESDB_PERSISTENT_CONFIG_EVENTS_REGEX)
 
 _TCallable = TypeVar("_TCallable", bound=Callable[..., Any])
 
 
 def autoreconnect(f: _TCallable) -> _TCallable:
     @wraps(f)
-    def wrapper(self, *args, **kwargs):  # type: ignore
-        assert isinstance(self, ESDBClient)
+    def autoreconnect_decorator(client: "ESDBClient", *args: Any, **kwargs: Any) -> Any:
         try:
-            return f(self, *args, **kwargs)
+            return f(client, *args, **kwargs)
 
         except NodeIsNotLeader:
-            if self.connection_spec.options.NodePreference == NODE_PREFERENCE_LEADER:
-                self.reconnect()
-                return f(self, *args, **kwargs)
+            if client.connection_spec.options.NodePreference == NODE_PREFERENCE_LEADER:
+                client.reconnect()
+                return f(client, *args, **kwargs)
             else:
                 raise
 
         except ValueError as e:
             if "Channel closed!" in str(e):
-                self.reconnect()
-                return f(self, *args, **kwargs)
+                client.reconnect()
+                return f(client, *args, **kwargs)
             else:  # pragma: no cover
                 raise
 
-    return cast(_TCallable, wrapper)
+        except ServiceUnavailable:
+            client.reconnect()
+            return f(client, *args, **kwargs)
+
+    return cast(_TCallable, autoreconnect_decorator)
 
 
 def retrygrpc(f: _TCallable) -> _TCallable:
     @wraps(f)
-    def wrapper(self, *args, **kwargs):  # type: ignore
-        assert isinstance(self, ESDBClient)
+    def retrygrpc_decorator(*args: Any, **kwargs: Any) -> Any:
         try:
-            return f(self, *args, **kwargs)
+            return f(*args, **kwargs)
         except GrpcError:
             sleep(0.1)
-            return f(self, *args, **kwargs)
-
-    return cast(_TCallable, wrapper)
+            return f(*args, **kwargs)
 
+    return cast(_TCallable, retrygrpc_decorator)
 
-class ESDBClient:
-    """
-    Encapsulates the EventStoreDB gRPC API.
-    """
 
+class BaseESDBClient:
     def __init__(
         self,
         uri: Optional[str] = None,
         *,
         root_certificates: Optional[str] = None,
     ) -> None:
-        self._is_reconnection_required = Event()
-        self._reconnection_lock = Lock()
         self.root_certificates = root_certificates
         self.connection_spec = ConnectionSpec(uri)
 
         self._default_deadline = self.connection_spec.options.DefaultDeadline
 
         self.grpc_options: Dict[str, Any] = {
             "grpc.max_receive_message_length": 17 * 1024 * 1024,
@@ -141,39 +141,57 @@
         if self.connection_spec.options.Tls:
             self._call_credentials = self._construct_call_credentials(
                 self.connection_spec.username, self.connection_spec.password
             )
         else:
             self._call_credentials = None
 
-        self._connection = self._connect_to_preferred_node()
-
-        # self._batch_append_futures_lock = Lock()
-        # self._batch_append_futures_queue = BatchAppendFutureQueue()
-        # self._batch_append_thread = Thread(
-        #     target=self._batch_append_future_result_loop, daemon=True
-        # )
-        # self._batch_append_thread.start()
-
     def _construct_call_credentials(
         self, username: Optional[str], password: Optional[str]
     ) -> Optional[CallCredentials]:
         if username and password:
             return grpc.metadata_call_credentials(
                 BasicAuthCallCredentials(username, password)
             )
         else:
             return None
 
+
+class ESDBClient(BaseESDBClient):
+    """
+    Encapsulates the EventStoreDB gRPC API.
+    """
+
+    def __init__(
+        self,
+        uri: Optional[str] = None,
+        *,
+        root_certificates: Optional[str] = None,
+    ) -> None:
+        super().__init__(uri, root_certificates=root_certificates)
+        self._is_reconnection_required = Event()
+        self._reconnection_lock = Lock()
+        self._connection = self._connect_to_preferred_node()
+
+        # self._batch_append_futures_lock = Lock()
+        # self._batch_append_futures_queue = BatchAppendFutureQueue()
+        # self._batch_append_thread = Thread(
+        #     target=self._batch_append_future_result_loop, daemon=True
+        # )
+        # self._batch_append_thread.start()
+
     def _connect_to_preferred_node(self) -> ESDBConnection:
         # Obtain the gossip seed (a list of gRPC targets).
         if self.connection_spec.scheme == URI_SCHEME_ESDB_DISCOVER:
             assert len(self.connection_spec.targets) == 1
             cluster_fqdn = self.connection_spec.targets[0]
-            answers = dns.resolver.resolve(cluster_fqdn, "A")
+            try:
+                answers = dns.resolver.resolve(cluster_fqdn, "A")
+            except dns.exception.DNSException as e:
+                raise DNSError() from e
             gossip_seed: Sequence[str] = [f"{s.address}:2113" for s in answers]
         else:
             assert self.connection_spec.scheme == URI_SCHEME_ESDB
             gossip_seed = self.connection_spec.targets
 
         # Check the gossip seed isn't empty.
         if len(gossip_seed) == 0:
@@ -260,14 +278,15 @@
     def reconnect(self) -> None:
         self._is_reconnection_required.set()
         with self._reconnection_lock:
             if self._is_reconnection_required.is_set():
                 new = self._connect_to_preferred_node()
                 old, self._connection = self._connection, new
                 old.close()
+                self._is_reconnection_required.clear()
             else:  # pragma: no cover
                 # Todo: Test with concurrent writes to wrong node state.
                 pass
 
     def _construct_connection(self, grpc_target: str) -> ESDBConnection:
         grpc_options: Tuple[Tuple[str, str], ...] = tuple(self.grpc_options.items())
         if self.connection_spec.options.Tls is True:
@@ -342,19 +361,17 @@
         stream_name: str,
         expected_position: Optional[int],
         events: Iterable[NewEvent],
         timeout: Optional[float] = None,
     ) -> int:
         timeout = timeout if timeout is not None else self._default_deadline
         return self._connection.streams.batch_append(
-            BatchAppendRequest(
-                stream_name=stream_name,
-                expected_position=expected_position,
-                events=events,
-            ),
+            stream_name=stream_name,
+            expected_position=expected_position,
+            events=events,
             timeout=timeout,
             metadata=self._call_metadata,
             credentials=self._call_credentials,
         ).commit_position
 
     @retrygrpc
     @autoreconnect
@@ -382,14 +399,15 @@
     @autoreconnect
     def delete_stream(
         self,
         stream_name: str,
         expected_position: Optional[int],
         timeout: Optional[float] = None,
     ) -> None:
+        # Todo: Reconsider using expected_position=None to indicate "stream exists"?
         timeout = timeout if timeout is not None else self._default_deadline
         self._connection.streams.delete(
             stream_name=stream_name,
             expected_position=expected_position,
             timeout=timeout,
             metadata=self._call_metadata,
             credentials=self._call_credentials,
@@ -417,47 +435,68 @@
     def read_stream_events(
         self,
         stream_name: str,
         stream_position: Optional[int] = None,
         backwards: bool = False,
         limit: int = sys.maxsize,
         timeout: Optional[float] = None,
+    ) -> Sequence[RecordedEvent]:
+        """
+        Lists recorded events from the named stream.
+        """
+        return tuple(
+            self.iter_stream_events(
+                stream_name=stream_name,
+                stream_position=stream_position,
+                backwards=backwards,
+                limit=limit,
+                timeout=timeout,
+            )
+        )
+
+    def iter_stream_events(
+        self,
+        stream_name: str,
+        stream_position: Optional[int] = None,
+        backwards: bool = False,
+        limit: int = sys.maxsize,
+        timeout: Optional[float] = None,
     ) -> Iterable[RecordedEvent]:
         """
         Reads recorded events from the named stream.
         """
         return self._connection.streams.read(
             stream_name=stream_name,
             stream_position=stream_position,
             backwards=backwards,
             limit=limit,
             timeout=timeout,
             metadata=self._call_metadata,
             credentials=self._call_credentials,
         )
 
-    @retrygrpc
-    @autoreconnect
     def read_all_events(
         self,
         commit_position: Optional[int] = None,
         backwards: bool = False,
         filter_exclude: Sequence[str] = DEFAULT_EXCLUDE_FILTER,
         filter_include: Sequence[str] = (),
+        filter_by_stream_name: bool = False,
         limit: int = sys.maxsize,
         timeout: Optional[float] = None,
     ) -> Iterable[RecordedEvent]:
         """
         Reads recorded events in "all streams" in the database.
         """
         return self._connection.streams.read(
             commit_position=commit_position,
             backwards=backwards,
             filter_exclude=filter_exclude,
             filter_include=filter_include,
+            filter_by_stream_name=filter_by_stream_name,
             limit=limit,
             timeout=timeout,
             metadata=self._call_metadata,
             credentials=self._call_credentials,
         )
 
     @retrygrpc
@@ -477,15 +516,18 @@
                     backwards=True,
                     limit=1,
                     timeout=timeout,
                     metadata=self._call_metadata,
                     credentials=self._call_credentials,
                 )
             )[0]
-        except StreamNotFound:
+        except NotFound:
+            # None is the correct expected position when appending both to a stream that
+            # never existed, and for appending to a stream that has been deleted (in
+            # this case the old "stream position" int is also correct, but None works).
             return None
         else:
             return last_event.stream_position
 
     @retrygrpc
     @autoreconnect
     def get_commit_position(
@@ -522,15 +564,15 @@
                 self.read_stream_events(
                     stream_name=metadata_stream_name,
                     backwards=True,
                     limit=1,
                     timeout=timeout,
                 )
             )
-        except StreamNotFound:
+        except NotFound:
             return {}, None
         else:
             metadata_event = metadata_events[0]
             return json.loads(metadata_event.data), metadata_event.stream_position
 
     def set_stream_metadata(
         self,
@@ -559,24 +601,26 @@
     @retrygrpc
     @autoreconnect
     def subscribe_all_events(
         self,
         commit_position: Optional[int] = None,
         filter_exclude: Sequence[str] = DEFAULT_EXCLUDE_FILTER,
         filter_include: Sequence[str] = (),
+        filter_by_stream_name: bool = False,
         timeout: Optional[float] = None,
     ) -> Iterator[RecordedEvent]:
         """
         Starts a catch-up subscription, from which all
         recorded events in the database can be received.
         """
         read_resp = self._connection.streams.read(
             commit_position=commit_position,
             filter_exclude=filter_exclude,
             filter_include=filter_include,
+            filter_by_stream_name=filter_by_stream_name,
             subscribe=True,
             timeout=timeout,
             metadata=self._call_metadata,
             credentials=self._call_credentials,
         )
         return CatchupSubscription(read_resp=read_resp)
 
@@ -605,42 +649,48 @@
     @overload
     def create_subscription(
         self,
         group_name: str,
         *,
         filter_exclude: Sequence[str] = DEFAULT_EXCLUDE_FILTER,
         filter_include: Sequence[str] = (),
+        filter_by_stream_name: bool = False,
+        consumer_strategy: ConsumerStrategy = "DispatchToSingle",
         timeout: Optional[float] = None,
     ) -> None:
         """
         Signature for creating persistent subscription from start of database.
         """
 
     @overload
     def create_subscription(
         self,
         group_name: str,
         *,
         commit_position: int,
         filter_exclude: Sequence[str] = DEFAULT_EXCLUDE_FILTER,
         filter_include: Sequence[str] = (),
+        filter_by_stream_name: bool = False,
+        consumer_strategy: ConsumerStrategy = "DispatchToSingle",
         timeout: Optional[float] = None,
     ) -> None:
         """
         Signature for creating persistent subscription from a commit position.
         """
 
     @overload
     def create_subscription(
         self,
         group_name: str,
         *,
         from_end: bool = True,
         filter_exclude: Sequence[str] = DEFAULT_EXCLUDE_FILTER,
         filter_include: Sequence[str] = (),
+        filter_by_stream_name: bool = False,
+        consumer_strategy: ConsumerStrategy = "DispatchToSingle",
         timeout: Optional[float] = None,
     ) -> None:
         """
         Signature for creating persistent subscription from end of database.
         """
 
     @retrygrpc
@@ -648,115 +698,124 @@
     def create_subscription(
         self,
         group_name: str,
         from_end: bool = False,
         commit_position: Optional[int] = None,
         filter_exclude: Sequence[str] = DEFAULT_EXCLUDE_FILTER,
         filter_include: Sequence[str] = (),
+        filter_by_stream_name: bool = False,
+        consumer_strategy: ConsumerStrategy = "DispatchToSingle",
         timeout: Optional[float] = None,
     ) -> None:
         """
         Creates a persistent subscription on all streams.
         """
         timeout = timeout if timeout is not None else self._default_deadline
 
         self._connection.persistent_subscriptions.create(
             group_name=group_name,
             from_end=from_end,
             commit_position=commit_position,
+            consumer_strategy=consumer_strategy,
             filter_exclude=filter_exclude,
             filter_include=filter_include,
+            filter_by_stream_name=filter_by_stream_name,
             timeout=timeout,
             metadata=self._call_metadata,
             credentials=self._call_credentials,
         )
 
     @overload
     def create_stream_subscription(
         self,
         group_name: str,
         stream_name: str,
         *,
+        consumer_strategy: ConsumerStrategy = "DispatchToSingle",
         timeout: Optional[float] = None,
     ) -> None:
         """
         Signature for creating stream subscription from start of stream.
         """
 
     @overload
     def create_stream_subscription(
         self,
         group_name: str,
         stream_name: str,
         *,
         stream_position: int,
+        consumer_strategy: ConsumerStrategy = "DispatchToSingle",
         timeout: Optional[float] = None,
     ) -> None:
         """
         Signature for creating stream subscription from stream position.
         """
 
     @overload
     def create_stream_subscription(
         self,
         group_name: str,
         stream_name: str,
         *,
         from_end: bool = True,
+        consumer_strategy: ConsumerStrategy = "DispatchToSingle",
         timeout: Optional[float] = None,
     ) -> None:
         """
         Signature for creating stream subscription from end of stream.
         """
 
     @retrygrpc
     @autoreconnect
     def create_stream_subscription(
         self,
         group_name: str,
         stream_name: str,
         from_end: bool = False,
         stream_position: Optional[int] = None,
+        consumer_strategy: ConsumerStrategy = "DispatchToSingle",
         timeout: Optional[float] = None,
     ) -> None:
         """
         Creates a persistent subscription on one stream.
         """
         timeout = timeout if timeout is not None else self._default_deadline
 
         self._connection.persistent_subscriptions.create(
             group_name=group_name,
             stream_name=stream_name,
             from_end=from_end,
             stream_position=stream_position,
+            consumer_strategy=consumer_strategy,
             timeout=timeout,
             metadata=self._call_metadata,
             credentials=self._call_credentials,
         )
 
     @retrygrpc
     @autoreconnect
     def read_subscription(
         self, group_name: str, timeout: Optional[float] = None
-    ) -> Tuple[SubscriptionReadRequest, SubscriptionReadResponse]:
+    ) -> Tuple[SubscriptionReadRequests, SubscriptionReadResponse]:
         """
         Reads a persistent subscription on all streams.
         """
         return self._connection.persistent_subscriptions.read(
             group_name=group_name,
             timeout=timeout,
             metadata=self._call_metadata,
             credentials=self._call_credentials,
         )
 
     @retrygrpc
     @autoreconnect
     def read_stream_subscription(
         self, group_name: str, stream_name: str, timeout: Optional[float] = None
-    ) -> Tuple[SubscriptionReadRequest, SubscriptionReadResponse]:
+    ) -> Tuple[SubscriptionReadRequests, SubscriptionReadResponse]:
         """
         Reads a persistent subscription on one stream.
         """
         return self._connection.persistent_subscriptions.read(
             group_name=group_name,
             stream_name=stream_name,
             timeout=timeout,
@@ -799,32 +858,28 @@
     @autoreconnect
     def list_subscriptions(
         self, timeout: Optional[float] = None
     ) -> Sequence[SubscriptionInfo]:
         """
         Lists all persistent subscriptions.
         """
-        timeout = timeout if timeout is not None else self._default_deadline
-
         return self._connection.persistent_subscriptions.list(
             timeout=timeout,
             metadata=self._call_metadata,
             credentials=self._call_credentials,
         )
 
     @retrygrpc
     @autoreconnect
     def list_stream_subscriptions(
         self, stream_name: str, timeout: Optional[float] = None
     ) -> Sequence[SubscriptionInfo]:
         """
         Lists persistent stream subscriptions.
         """
-        timeout = timeout if timeout is not None else self._default_deadline
-
         return self._connection.persistent_subscriptions.list(
             stream_name=stream_name,
             timeout=timeout,
             metadata=self._call_metadata,
             credentials=self._call_credentials,
         )
```

### Comparing `esdbclient-1.0a1/esdbclient/connection.py` & `esdbclient-1.0a2/esdbclient/connection.py`

 * *Files 7% similar despite different names*

```diff
@@ -1,20 +1,26 @@
 # -*- coding: utf-8 -*-
 from typing import Any, Dict, Optional, Sequence
 from urllib.parse import ParseResult, parse_qs, urlparse
 from uuid import uuid4
 
+import grpc.aio
 from grpc import Channel
 
-from esdbclient.esdbapi import (
+from esdbclient.gossip import (
+    AsyncioClusterGossipService,
+    AsyncioGossipService,
     ClusterGossipService,
     GossipService,
+)
+from esdbclient.persistent import (
+    AsyncioPersistentSubscriptionsService,
     PersistentSubscriptionsService,
-    StreamsService,
 )
+from esdbclient.streams import AsyncioStreamsService, StreamsService
 
 URI_SCHEME_ESDB = "esdb"
 URI_SCHEME_ESDB_DISCOVER = "esdb+discover"
 VALID_URI_SCHEMES = [
     URI_SCHEME_ESDB,
     URI_SCHEME_ESDB_DISCOVER,
 ]
@@ -321,7 +327,22 @@
     #     self._channel_connectivity_state = connectivity
     #     # print("Channel connectivity state:", connectivity)
 
     def close(self) -> None:
         # self.grpc_channel.unsubscribe(self._receive_channel_connectivity_state)
         # sleep(0.1)  # Allow connectivity polling to stop.
         self.grpc_channel.close()
+
+
+class AsyncioESDBConnection:
+    def __init__(self, grpc_channel: grpc.aio.Channel, grpc_target: str) -> None:
+        self.grpc_channel = grpc_channel
+        self.grpc_target = grpc_target
+        self.streams = AsyncioStreamsService(grpc_channel)
+        self.persistent_subscriptions = AsyncioPersistentSubscriptionsService(
+            grpc_channel
+        )
+        self.gossip = AsyncioGossipService(grpc_channel)
+        self.cluster_gossip = AsyncioClusterGossipService(grpc_channel)
+
+    async def close(self) -> None:
+        await self.grpc_channel.close(grace=5)
```

### Comparing `esdbclient-1.0a1/esdbclient/esdbapi.py` & `esdbclient-1.0a2/esdbclient/streams.py`

 * *Files 12% similar despite different names*

```diff
@@ -1,118 +1,217 @@
 # -*- coding: utf-8 -*-
-import queue
 import sys
-from base64 import b64encode
-from dataclasses import dataclass, field
+from dataclasses import dataclass
 from typing import (
-    TYPE_CHECKING,
+    AsyncIterable,
     Iterable,
     Iterator,
-    List,
     Optional,
     Sequence,
-    Tuple,
     Union,
     overload,
 )
 from uuid import UUID, uuid4
 
-import grpc
+import grpc.aio
 from google.protobuf import duration_pb2, empty_pb2
-from grpc import (
-    AuthMetadataContext,
-    AuthMetadataPluginCallback,
-    Call,
-    CallCredentials,
-    Channel,
-    RpcError,
-    StatusCode,
-)
+from grpc import CallCredentials, RpcError, StatusCode
 from typing_extensions import Literal
 
-if TYPE_CHECKING:  # pragma: no cover
-    from grpc import Metadata
-else:
-    Metadata = Tuple[Tuple[str, str], ...]
-
+from esdbclient.esdbapibase import ESDBService, Metadata, handle_rpc_error
 from esdbclient.events import NewEvent, RecordedEvent
 from esdbclient.exceptions import (
     AccessDeniedError,
     BadRequestError,
-    DeadlineExceeded,
     ESDBClientException,
-    ExceptionThrownByHandler,
-    ExpectedPositionError,
-    GrpcError,
     InvalidTransactionError,
     MaximumAppendSizeExceededError,
-    NodeIsNotLeader,
-    ServiceUnavailable,
-    StreamDeletedError,
-    StreamNotFound,
-    SubscriptionNotFound,
+    NotFound,
+    StreamIsDeleted,
+    SubscriptionConfirmationError,
     TimeoutError,
     UnknownError,
+    WrongExpectedPosition,
 )
-from esdbclient.protos.Grpc import (
-    cluster_pb2,
-    cluster_pb2_grpc,
-    gossip_pb2,
-    gossip_pb2_grpc,
-    persistent_pb2,
-    persistent_pb2_grpc,
-    shared_pb2,
-    status_pb2,
-    streams_pb2,
-    streams_pb2_grpc,
-)
+from esdbclient.protos.Grpc import shared_pb2, status_pb2, streams_pb2, streams_pb2_grpc
 
 
-class BasicAuthCallCredentials(grpc.AuthMetadataPlugin):
-    def __init__(self, username: str, password: str):
-        credentials = b64encode(f"{username}:{password}".encode())
-        self._metadata = (("authorization", (b"Basic " + credentials)),)
+class AsyncioReadResponse:
+    def __init__(
+        self,
+        read_resp_iter: AsyncIterable[streams_pb2.ReadResp],
+        stream_name: Optional[str],
+        is_subscription: bool,
+    ):
+        self.read_resp_iter = read_resp_iter.__aiter__()
+        self.stream_name = stream_name
+        self.subscription_id: Optional[UUID] = None
+        self.is_subscription = is_subscription
 
-    def __call__(
-        self, context: AuthMetadataContext, callback: AuthMetadataPluginCallback
-    ) -> None:
-        callback(self._metadata, None)
+    async def _get_next_read_resp(self) -> streams_pb2.ReadResp:
+        try:
+            read_resp = await self.read_resp_iter.__anext__()
+        except RpcError as e:
+            if e.code() == StatusCode.FAILED_PRECONDITION:
+                details = e.details() or ""
+                if self.stream_name and details and "is deleted" in details:
+                    raise StreamIsDeleted() from e
+                else:  # pragma: no cover
+                    raise handle_rpc_error(e) from e
+            else:
+                raise handle_rpc_error(e) from e
+        assert isinstance(read_resp, streams_pb2.ReadResp)
+        return read_resp
 
+    async def check_confirmation(self) -> None:
+        if self.is_subscription:
+            read_resp = await self._get_next_read_resp()
+            content_oneof = read_resp.WhichOneof("content")
+            if content_oneof != "confirmation":  # pragma: no cover
+                raise SubscriptionConfirmationError(
+                    f"Expected subscription confirmation, got: {read_resp}"
+                )
 
-def handle_rpc_error(e: RpcError) -> ESDBClientException:
-    """
-    Converts gRPC errors to client exceptions.
-    """
-    if isinstance(e, Call):
-        if (
-            e.code() == StatusCode.UNKNOWN
-            and "Exception was thrown by handler" in e.details()
-        ):
-            return ExceptionThrownByHandler(e)
-        elif e.code() == StatusCode.UNAVAILABLE:
-            return ServiceUnavailable(e)
-        elif e.code() == StatusCode.DEADLINE_EXCEEDED:
-            return DeadlineExceeded(e)
-        if e.code() == StatusCode.NOT_FOUND and e.details() == "Leader info available":
-            return NodeIsNotLeader(e)
-    return GrpcError(e)
+    def __aiter__(self) -> "AsyncioReadResponse":
+        return self
 
+    async def __anext__(self) -> "RecordedEvent":
+        while True:
+            read_resp = await self._get_next_read_resp()
+            content_oneof = read_resp.WhichOneof("content")
+            if content_oneof == "event":
+                event = read_resp.event.event
+                position_oneof = read_resp.event.WhichOneof("position")
+                if position_oneof == "commit_position":
+                    commit_position = read_resp.event.commit_position
+                else:  # pragma: no cover
+                    # We only get here with EventStoreDB < 22.10.
+                    assert position_oneof == "no_position", position_oneof
+                    commit_position = None
 
-@dataclass
-class BatchAppendRequest:
-    stream_name: str
-    expected_position: Optional[int]
-    events: Iterable[NewEvent]
-    correlation_id: UUID = field(default_factory=uuid4)
-    deadline: int = 315576000000
+                return RecordedEvent(
+                    id=UUID(event.id.string),
+                    type=event.metadata["type"],
+                    data=event.data,
+                    content_type=event.metadata["content-type"],
+                    metadata=event.custom_metadata,
+                    stream_name=event.stream_identifier.stream_name.decode("utf8"),
+                    stream_position=event.stream_revision,
+                    commit_position=commit_position,
+                )
+            elif content_oneof == "stream_not_found":
+                raise NotFound(f"Stream {self.stream_name!r} not found")
+            else:
+                pass  # pragma: no cover
+                # Todo: Maybe support other content_oneof values:
+                #   oneof content {
+                # 		ReadEvent event = 1;
+                # 		SubscriptionConfirmation confirmation = 2;
+                # 		Checkpoint checkpoint = 3;
+                # 		StreamNotFound stream_not_found = 4;
+                # 		uint64 first_stream_position = 5;
+                # 		uint64 last_stream_position = 6;
+                # 		AllStreamPosition last_all_stream_position = 7;
+                # 	}
+                #
+                # Todo: Not sure how to request to get first_stream_position,
+                #   last_stream_position, first_all_stream_position.
 
 
-@dataclass
-class BatchAppendResponse:
-    commit_position: int
+class ReadResponse(Iterable[RecordedEvent]):
+    def __init__(
+        self,
+        read_resp_iter: Iterable[streams_pb2.ReadResp],
+        stream_name: Optional[str],
+        is_subscription: bool,
+    ):
+        self.read_resp_iter = iter(read_resp_iter)
+        self.stream_name = stream_name
+        self.subscription_id: Optional[UUID] = None
+        if is_subscription:
+            read_resp = self._get_next_read_resp()
+            content_oneof = read_resp.WhichOneof("content")
+            if content_oneof == "confirmation":
+                pass
+                # Todo: What is 'read_resp.confirmation.subscription_id' for?
+            else:  # pragma: no cover
+                raise SubscriptionConfirmationError(
+                    f"Expected subscription confirmation, got: {read_resp}"
+                )
+
+    def __iter__(self) -> "ReadResponse":
+        return self
+
+    def __next__(self) -> RecordedEvent:
+        while True:
+            read_resp = self._get_next_read_resp()
+            content_oneof = read_resp.WhichOneof("content")
+            if content_oneof == "event":
+                event = read_resp.event.event
+                position_oneof = read_resp.event.WhichOneof("position")
+                if position_oneof == "commit_position":
+                    commit_position = read_resp.event.commit_position
+                else:  # pragma: no cover
+                    # We only get here with EventStoreDB < 22.10.
+                    assert position_oneof == "no_position", position_oneof
+                    commit_position = None
+
+                return RecordedEvent(
+                    id=UUID(event.id.string),
+                    type=event.metadata["type"],
+                    data=event.data,
+                    content_type=event.metadata["content-type"],
+                    metadata=event.custom_metadata,
+                    stream_name=event.stream_identifier.stream_name.decode("utf8"),
+                    stream_position=event.stream_revision,
+                    commit_position=commit_position,
+                )
+            elif content_oneof == "stream_not_found":
+                raise NotFound(f"Stream {self.stream_name!r} not found")
+            else:
+                pass  # pragma: no cover
+                # Todo: Maybe support other content_oneof values:
+                #   oneof content {
+                # 		ReadEvent event = 1;
+                # 		SubscriptionConfirmation confirmation = 2;
+                # 		Checkpoint checkpoint = 3;
+                # 		StreamNotFound stream_not_found = 4;
+                # 		uint64 first_stream_position = 5;
+                # 		uint64 last_stream_position = 6;
+                # 		AllStreamPosition last_all_stream_position = 7;
+                # 	}
+                #
+                # Todo: Not sure how to request to get first_stream_position,
+                #   last_stream_position, first_all_stream_position.
+
+    def _get_next_read_resp(self) -> streams_pb2.ReadResp:
+        try:
+            read_resp = next(self.read_resp_iter)
+        except RpcError as e:
+            if e.code() == StatusCode.FAILED_PRECONDITION:
+                details = e.details() or ""
+                if self.stream_name and details and "is deleted" in details:
+                    raise StreamIsDeleted() from e
+                else:  # pragma: no cover
+                    raise handle_rpc_error(e) from e
+            else:
+                raise handle_rpc_error(e) from e
+        assert isinstance(read_resp, streams_pb2.ReadResp)
+        return read_resp
+
+
+DEFAULT_BATCH_APPEND_REQUEST_DEADLINE = 315576000000
+
+# @dataclass
+# class BatchAppendRequest:
+#     stream_name: str
+#     expected_position: Optional[int]
+#     events: Iterable[NewEvent]
+#     correlation_id: UUID = field(default_factory=uuid4)
+#     deadline: int = DEFAULT_BATCH_APPEND_REQUEST_DEADLINE
 
 
 # if TYPE_CHECKING:  # pragma: no cover
 #
 #     class _BatchAppendFuture(Future[BatchAppendResponse]):
 #         pass
 #
@@ -130,150 +229,47 @@
 #
 # if TYPE_CHECKING:  # pragma: no cover
 #     BatchAppendFutureQueue = Queue[BatchAppendFuture]
 # else:
 #     BatchAppendFutureQueue = Queue
 
 
-class ESDBService:
-    def _metadata(
-        self, metadata: Optional[Metadata], requires_leader: bool = False
-    ) -> Metadata:
-        requires_leader_metadata: Metadata = (
-            ("requires-leader", "true" if requires_leader else "false"),
-        )
-        metadata = tuple() if metadata is None else metadata
-        return metadata + requires_leader_metadata
-
-
-class StreamsService(ESDBService):
-    """
-    Encapsulates the 'streams.Streams' gRPC service.
-    """
-
-    def __init__(self, channel: Channel):
-        self._stub = streams_pb2_grpc.StreamsStub(channel)
-
-    @overload
-    def read(
-        self,
-        *,
-        stream_name: Optional[str] = None,
-        stream_position: Optional[int] = None,
-        backwards: bool = False,
-        limit: int = sys.maxsize,
-        timeout: Optional[float] = None,
-        metadata: Optional[Metadata] = None,
-        credentials: Optional[CallCredentials] = None,
-    ) -> Iterable[RecordedEvent]:
-        """
-        Signature for reading events from a stream.
-        """
-
-    @overload
-    def read(
-        self,
-        *,
-        stream_name: Optional[str] = None,
-        stream_position: Optional[int] = None,
-        subscribe: Literal[True],
-        timeout: Optional[float] = None,
-        metadata: Optional[Metadata] = None,
-        credentials: Optional[CallCredentials] = None,
-    ) -> Iterable[RecordedEvent]:
-        """
-        Signature for reading events from a stream with a catch-up subscription.
-        """
-
-    @overload
-    def read(
-        self,
-        *,
-        commit_position: Optional[int] = None,
-        backwards: bool = False,
-        filter_exclude: Sequence[str] = (),
-        filter_include: Sequence[str] = (),
-        limit: int = sys.maxsize,
-        timeout: Optional[float] = None,
-        metadata: Optional[Metadata] = None,
-        credentials: Optional[CallCredentials] = None,
-    ) -> Iterable[RecordedEvent]:
-        """
-        Signature for reading all events.
-        """
-
-    @overload
-    def read(
-        self,
-        *,
-        commit_position: Optional[int] = None,
-        filter_exclude: Sequence[str] = (),
-        filter_include: Sequence[str] = (),
-        subscribe: Literal[True],
-        timeout: Optional[float] = None,
-        metadata: Optional[Metadata] = None,
-        credentials: Optional[CallCredentials] = None,
-    ) -> Iterable[RecordedEvent]:
-        """
-        Signature for reading all events with a catch-up subscription.
-        """
-
-    def read(
-        self,
-        *,
-        stream_name: Optional[str] = None,
-        stream_position: Optional[int] = None,
-        commit_position: Optional[int] = None,
-        backwards: bool = False,
-        filter_exclude: Sequence[str] = (),
-        filter_include: Sequence[str] = (),
-        limit: int = sys.maxsize,
-        subscribe: bool = False,
-        timeout: Optional[float] = None,
-        metadata: Optional[Metadata] = None,
-        credentials: Optional[CallCredentials] = None,
-    ) -> Iterable[RecordedEvent]:
-        """
-        Constructs and sends a gRPC 'ReadReq' to the 'Read' rpc.
+@dataclass
+class BatchAppendResponse:
+    commit_position: int
 
-        Returns a generator which yields RecordedEvent objects.
-        """
 
-        # Construct read request.
-        read_req = self._construct_read_request(
-            stream_name=stream_name,
-            stream_position=stream_position,
-            commit_position=commit_position,
-            backwards=backwards,
-            filter_exclude=filter_exclude,
-            filter_include=filter_include,
-            limit=limit,
-            subscribe=subscribe,
-        )
+# class BatchAppendFutureIterator(Iterator[streams_pb2.BatchAppendReq]):
+#     def __init__(self, queue: BatchAppendFutureQueue):
+#         self.queue = queue
+#         self.futures_by_correlation_id: Dict[UUID, BatchAppendFuture] = {}
+#
+#     def __next__(self) -> streams_pb2.BatchAppendReq:
+#         future = self.queue.get()
+#         batch = future.batch_append_request
+#         self.futures_by_correlation_id[batch.correlation_id] = future
+#         return _construct_batch_append_req(batch)
+#
+#     def pop_future(self, correlation_id: UUID) -> BatchAppendFuture:
+#         return self.futures_by_correlation_id.pop(correlation_id)
 
-        # Send the read request, and iterate over the response.
-        read_resp = self._stub.Read(
-            read_req,
-            timeout=timeout,
-            metadata=self._metadata(metadata),
-            credentials=credentials,
-        )
 
-        return ReadResponse(
-            read_resp, stream_name=stream_name, is_subscription=subscribe
-        )
+class BaseStreamsService(ESDBService):
+    def __init__(self, channel: Union[grpc.Channel, grpc.aio.Channel]):
+        self._stub = streams_pb2_grpc.StreamsStub(channel)
 
     def _construct_read_request(
         self,
         stream_name: Optional[str] = None,
         stream_position: Optional[int] = None,
         commit_position: Optional[int] = None,
         backwards: bool = False,
         filter_exclude: Sequence[str] = (),
         filter_include: Sequence[str] = (),
+        filter_by_stream_name: bool = False,
         limit: int = sys.maxsize,
         subscribe: bool = False,
     ) -> streams_pb2.ReadReq:
         # Construct ReadReq.Options.
         options = streams_pb2.ReadReq.Options()
 
         # Decide 'stream_option'.
@@ -330,179 +326,106 @@
 
         else:
             options.count = limit
 
         # Decide 'filter_option'.
         if filter_exclude or filter_include:
             if filter_include:
+                filter_include = (
+                    [filter_include]
+                    if isinstance(filter_include, str)
+                    else filter_include
+                )
                 filter_regex = "^" + "|".join(filter_include) + "$"
             else:
+                filter_exclude = (
+                    [filter_exclude]
+                    if isinstance(filter_exclude, str)
+                    else filter_exclude
+                )
                 filter_regex = "^(?!(" + "|".join(filter_exclude) + ")).*$"
 
-            filter = streams_pb2.ReadReq.Options.FilterOptions(
-                event_type=streams_pb2.ReadReq.Options.FilterOptions.Expression(
-                    regex=filter_regex
-                ),
+            filter_expression = streams_pb2.ReadReq.Options.FilterOptions.Expression(
+                regex=filter_regex
+            )
+            if filter_by_stream_name:
+                stream_identifier_filter = filter_expression
+                event_type_filter = None
+            else:
+                stream_identifier_filter = None
+                event_type_filter = filter_expression
+
+            filter_options = streams_pb2.ReadReq.Options.FilterOptions(
+                stream_identifier=stream_identifier_filter,
+                event_type=event_type_filter,
                 # Todo: What does 'window' mean?
                 # max=shared_pb2.Empty(),
                 count=shared_pb2.Empty(),
                 # Todo: What does 'checkpointIntervalMultiplier' mean?
                 checkpointIntervalMultiplier=5,
             )
-            options.filter.CopyFrom(filter)
+            options.filter.CopyFrom(filter_options)
         else:
             options.no_filter.CopyFrom(shared_pb2.Empty())
 
         # Decide 'uuid_option'.
         options.uuid_option.CopyFrom(
             streams_pb2.ReadReq.Options.UUIDOption(string=shared_pb2.Empty())
         )
 
         return streams_pb2.ReadReq(options=options)
 
-    def append(
-        self,
+    @staticmethod
+    def _construct_batch_append_req(
         stream_name: str,
         expected_position: Optional[int],
         events: Iterable[NewEvent],
-        timeout: Optional[float] = None,
-        metadata: Optional[Metadata] = None,
-        credentials: Optional[CallCredentials] = None,
-    ) -> int:
-        """
-        Constructs and sends a stream of gRPC 'AppendReq' to the 'Append' rpc.
-
-        Returns the commit position of the last appended event.
-        """
-        try:
-            response = self._stub.Append(
-                self._generate_append_requests(
-                    stream_name=stream_name,
-                    expected_position=expected_position,
-                    events=events,
-                ),
-                timeout=timeout,
-                metadata=self._metadata(metadata, requires_leader=True),
-                credentials=credentials,
-            )
-        except RpcError as e:
-            raise handle_rpc_error(e) from e
-        else:
-            assert isinstance(response, streams_pb2.AppendResp)
-            # Response 'result' is either 'success' or 'wrong_expected_version'.
-            result_oneof = response.WhichOneof("result")
-            if result_oneof == "success":
-                return response.success.position.commit_position
-            else:
-                assert result_oneof == "wrong_expected_version", result_oneof
-                wev = response.wrong_expected_version
-                cro_oneof = wev.WhichOneof("current_revision_option")
-                if cro_oneof == "current_revision":
-                    raise ExpectedPositionError(
-                        f"Current position is {wev.current_revision}"
-                    )
-                else:
-                    assert cro_oneof == "current_no_stream", cro_oneof
-                    raise ExpectedPositionError(
-                        f"Stream {stream_name!r} does not exist"
-                    )
-
-    def _generate_append_requests(
-        self,
-        stream_name: str,
-        expected_position: Optional[int],
-        events: Iterable[NewEvent],
-    ) -> Iterator[streams_pb2.AppendReq]:
-        # First, define append request that has 'content' as 'options'.
-        options = streams_pb2.AppendReq.Options(
+        deadline: int,
+        correlation_id: UUID,
+    ) -> streams_pb2.BatchAppendReq:
+        # Construct batch request 'options'.
+        options = streams_pb2.BatchAppendReq.Options(
             stream_identifier=shared_pb2.StreamIdentifier(
                 stream_name=stream_name.encode("utf8")
-            )
+            ),
+            deadline=duration_pb2.Duration(
+                seconds=deadline,
+                nanos=0,
+            ),
         )
-        # Decide 'expected_stream_revision'.
+        # Decide options 'expected_stream_revision'.
         if isinstance(expected_position, int):
             if expected_position >= 0:
                 # Stream is expected to exist.
-                options.revision = expected_position
+                options.stream_position = expected_position
             else:
                 # Disable optimistic concurrency control.
-                options.any.CopyFrom(shared_pb2.Empty())
+                options.any.CopyFrom(empty_pb2.Empty())
         else:
             # Stream is expected not to exist.
-            options.no_stream.CopyFrom(shared_pb2.Empty())
-
-        yield streams_pb2.AppendReq(options=options)
-
-        # Secondly, define append requests that has 'content' as 'proposed_message'.
+            options.no_stream.CopyFrom(empty_pb2.Empty())
+        # Construct batch request 'proposed_messages'.
+        # Todo: Split batch.events into chunks of 20?
+        proposed_messages = []
         for event in events:
-            proposed_message = streams_pb2.AppendReq.ProposedMessage(
+            proposed_message = streams_pb2.BatchAppendReq.ProposedMessage(
                 id=shared_pb2.UUID(string=str(event.id)),
                 metadata={"type": event.type, "content-type": event.content_type},
                 custom_metadata=event.metadata,
                 data=event.data,
             )
-            yield streams_pb2.AppendReq(proposed_message=proposed_message)
-
-    # def batch_append_multiplexed(
-    #     self,
-    #     futures_queue: BatchAppendFutureQueue,
-    #     timeout: Optional[float] = None,
-    #     metadata: Optional[Metadata] = None,
-    #     credentials: Optional[CallCredentials] = None,
-    # ) -> None:
-    #     # Construct batch append requests iterator.
-    #     requests = BatchAppendFutureIterator(futures_queue)
-    #
-    #     # Call the gRPC method.
-    #     try:
-    #         for response in self._stub.BatchAppend(
-    #             requests,
-    #             timeout=timeout,
-    #             metadata=self._metadata(metadata, requires_leader=True),
-    #             credentials=credentials,
-    #         ):
-    #             # Use the correlation ID to get the future.
-    #             assert isinstance(response, streams_pb2.BatchAppendResp)
-    #             correlation_id = UUID(response.correlation_id.string)
-    #             future = requests.pop_future(correlation_id)
-    #
-    #             # Convert the result.
-    #             stream_name = future.batch_append_request.stream_name
-    #             result = self._convert_batch_append_result(response, stream_name)
-    #
-    #             # Finish the future.
-    #             if isinstance(result, BatchAppendResponse):
-    #                 future.set_result(result)
-    #             else:
-    #                 assert isinstance(result, ESDBClientException)
-    #                 future.set_exception(result)
-    #
-    #         else:
-    #             # The response stream ended without an RPC error.
-    #             for (
-    #                 correlation_id
-    #             ) in requests.futures_by_correlation_id:  # pragma: no cover
-    #                 future = requests.pop_future(correlation_id)
-    #                 future.set_exception(
-    #                     ESDBClientException("Batch append response not received")
-    #                 )
-    #
-    #     except RpcError as rpc_error:
-    #         # The response stream ended with an RPC error.
-    #         try:
-    #             raise handle_rpc_error(rpc_error) from rpc_error
-    #         except GrpcError as grpc_error:
-    #             for (
-    #                 correlation_id
-    #             ) in requests.futures_by_correlation_id:  # pragma: no cover
-    #                 future = requests.pop_future(correlation_id)
-    #                 future.set_exception(grpc_error)
-    #             raise
+            proposed_messages.append(proposed_message)
+        return streams_pb2.BatchAppendReq(
+            correlation_id=shared_pb2.UUID(string=str(correlation_id)),
+            options=options,
+            proposed_messages=proposed_messages,
+            is_final=True,  # This specifies the end of an atomic transaction.
+        )
 
-    def _convert_batch_append_result(
+    def _convert_batch_append_resp(
         self, response: streams_pb2.BatchAppendResp, stream_name: str
     ) -> Union[BatchAppendResponse, ESDBClientException]:
         result: Union[BatchAppendResponse, ESDBClientException]
         # Response 'result' is either 'success' or 'error'.
         result_oneof = response.WhichOneof("result")
         if result_oneof == "success":
             # Construct response object.
@@ -517,31 +440,31 @@
             error_details = response.error.details
             if error_details.Is(shared_pb2.WrongExpectedVersion.DESCRIPTOR):
                 wrong_version = shared_pb2.WrongExpectedVersion()
                 error_details.Unpack(wrong_version)
 
                 csro_oneof = wrong_version.WhichOneof("current_stream_revision_option")
                 if csro_oneof == "current_no_stream":
-                    result = StreamNotFound(f"Stream {stream_name !r} not found")
+                    result = NotFound(f"Stream {stream_name !r} not found")
                 else:
                     assert csro_oneof == "current_stream_revision"
                     psn = wrong_version.current_stream_revision
-                    result = ExpectedPositionError(f"Current position is {psn}")
+                    result = WrongExpectedPosition(f"Current position is {psn}")
 
             # Todo: Write tests to cover all of this:
             elif error_details.Is(
                 shared_pb2.AccessDenied.DESCRIPTOR
             ):  # pragma: no cover
                 result = AccessDeniedError()
             elif error_details.Is(shared_pb2.StreamDeleted.DESCRIPTOR):
                 stream_deleted = shared_pb2.StreamDeleted()
                 error_details.Unpack(stream_deleted)
                 # Todo: Ask ESDB team if this is ever different from request value.
                 # stream_name = stream_deleted.stream_identifier.stream_name
-                result = StreamDeletedError(f"Stream {stream_name !r} is deleted")
+                result = StreamIsDeleted(f"Stream {stream_name !r} is deleted")
             elif error_details.Is(shared_pb2.Timeout.DESCRIPTOR):  # pragma: no cover
                 result = TimeoutError()
             elif error_details.Is(shared_pb2.Unknown.DESCRIPTOR):  # pragma: no cover
                 result = UnknownError()
             elif error_details.Is(
                 shared_pb2.InvalidTransaction.DESCRIPTOR
             ):  # pragma: no cover
@@ -558,51 +481,17 @@
                 error_details.Unpack(bad_request)
                 result = BadRequestError(f"Bad request: {bad_request.message}")
             else:
                 # Unexpected error details type.
                 result = ESDBClientException(error_details)  # pragma: no cover
         return result
 
-    def batch_append(
-        self,
-        batch_append_request: BatchAppendRequest,
-        timeout: Optional[float] = None,
-        metadata: Optional[Metadata] = None,
-        credentials: Optional[CallCredentials] = None,
-    ) -> BatchAppendResponse:
-        # Call the gRPC method.
-        try:
-            for response in self._stub.BatchAppend(
-                iter([_construct_batch_append_req(batch_append_request)]),
-                timeout=timeout,
-                metadata=self._metadata(metadata, requires_leader=True),
-                credentials=credentials,
-            ):
-                assert isinstance(response, streams_pb2.BatchAppendResp)
-                stream_name = batch_append_request.stream_name
-                result = self._convert_batch_append_result(response, stream_name)
-                if isinstance(result, BatchAppendResponse):
-                    return result
-                else:
-                    assert isinstance(result, ESDBClientException)
-                    raise result
-            else:  # pragma: no cover
-                raise ESDBClientException("Batch append response not received")
-
-        except RpcError as e:
-            raise handle_rpc_error(e) from e
-
-    def delete(
-        self,
-        stream_name: str,
-        expected_position: Optional[int],
-        timeout: Optional[float] = None,
-        metadata: Optional[Metadata] = None,
-        credentials: Optional[CallCredentials] = None,
-    ) -> None:
+    def _construct_delete_req(
+        self, stream_name: str, expected_position: Optional[int]
+    ) -> streams_pb2.DeleteReq:
         options = streams_pb2.DeleteReq.Options(
             stream_identifier=shared_pb2.StreamIdentifier(
                 stream_name=stream_name.encode("utf8")
             )
         )
         # Decide 'expected_stream_revision'.
         if isinstance(expected_position, int):
@@ -611,44 +500,19 @@
                 options.revision = expected_position
             else:
                 # Disable optimistic concurrency control.
                 options.any.CopyFrom(shared_pb2.Empty())
         else:
             # Stream is expected to exist.
             options.stream_exists.CopyFrom(shared_pb2.Empty())
+        return streams_pb2.DeleteReq(options=options)
 
-        delete_req = streams_pb2.DeleteReq(options=options)
-
-        try:
-            delete_resp = self._stub.Delete(
-                delete_req,
-                timeout=timeout,
-                metadata=self._metadata(metadata, requires_leader=True),
-                credentials=credentials,
-            )
-        except RpcError as e:
-            # Todo: Raise WrongExceptedVersion if expected_position is wrong...
-            raise handle_rpc_error(e) from e
-
-        else:
-            assert isinstance(delete_resp, streams_pb2.DeleteResp)
-            # position_option_oneof = delete_resp.WhichOneof("position_option")
-            # if position_option_oneof == "position":
-            #     return delete_resp.position
-            # else:
-            #     return delete_resp.no_position
-
-    def tombstone(
-        self,
-        stream_name: str,
-        expected_position: Optional[int],
-        timeout: Optional[float] = None,
-        metadata: Optional[Metadata] = None,
-        credentials: Optional[CallCredentials] = None,
-    ) -> None:
+    def _construct_tombstone_req(
+        self, stream_name: str, expected_position: Optional[int]
+    ) -> streams_pb2.TombstoneReq:
         options = streams_pb2.TombstoneReq.Options(
             stream_identifier=shared_pb2.StreamIdentifier(
                 stream_name=stream_name.encode("utf8")
             )
         )
         # Decide 'expected_stream_revision'.
         if isinstance(expected_position, int):
@@ -657,741 +521,603 @@
                 options.revision = expected_position
             else:
                 # Disable optimistic concurrency control.
                 options.any.CopyFrom(shared_pb2.Empty())
         else:
             # Stream is expected to exist.
             options.stream_exists.CopyFrom(shared_pb2.Empty())
+        return streams_pb2.TombstoneReq(options=options)
 
-        tombstone_req = streams_pb2.TombstoneReq(options=options)
 
+class AsyncioStreamsService(BaseStreamsService):
+    async def batch_append(
+        self,
+        stream_name: str,
+        expected_position: Optional[int],
+        events: Iterable[NewEvent],
+        timeout: Optional[float] = None,
+        metadata: Optional[Metadata] = None,
+        credentials: Optional[CallCredentials] = None,
+    ) -> BatchAppendResponse:
+        # Call the gRPC method.
         try:
-            tombstone_resp = self._stub.Tombstone(
-                tombstone_req,
+            req = self._construct_batch_append_req(
+                stream_name=stream_name,
+                expected_position=expected_position,
+                events=events,
+                deadline=DEFAULT_BATCH_APPEND_REQUEST_DEADLINE,
+                correlation_id=uuid4(),
+            )
+            async for response in self._stub.BatchAppend(
+                iter([req]),
                 timeout=timeout,
                 metadata=self._metadata(metadata, requires_leader=True),
                 credentials=credentials,
-            )
-        except RpcError as e:
-            # Todo: Raise WrongExceptedVersion if expected_position is wrong...
-            raise handle_rpc_error(e) from e
-
-        else:
-            assert isinstance(tombstone_resp, streams_pb2.TombstoneResp)
-            # position_option_oneof = tombstone_resp.WhichOneof("position_option")
-            # if position_option_oneof == "position":
-            #     return tombstone_resp.position
-            # else:
-            #     return tombstone_resp.no_position
-
-
-# class BatchAppendFutureIterator(Iterator[streams_pb2.BatchAppendReq]):
-#     def __init__(self, queue: BatchAppendFutureQueue):
-#         self.queue = queue
-#         self.futures_by_correlation_id: Dict[UUID, BatchAppendFuture] = {}
-#
-#     def __next__(self) -> streams_pb2.BatchAppendReq:
-#         future = self.queue.get()
-#         batch = future.batch_append_request
-#         self.futures_by_correlation_id[batch.correlation_id] = future
-#         return _construct_batch_append_req(batch)
-#
-#     def pop_future(self, correlation_id: UUID) -> BatchAppendFuture:
-#         return self.futures_by_correlation_id.pop(correlation_id)
-
-
-def _construct_batch_append_req(
-    batch: BatchAppendRequest,
-) -> streams_pb2.BatchAppendReq:
-    # Construct batch request 'options'.
-    options = streams_pb2.BatchAppendReq.Options(
-        stream_identifier=shared_pb2.StreamIdentifier(
-            stream_name=batch.stream_name.encode("utf8")
-        ),
-        deadline=duration_pb2.Duration(seconds=batch.deadline, nanos=0),
-    )
-    # Decide options 'expected_stream_revision'.
-    if isinstance(batch.expected_position, int):
-        if batch.expected_position >= 0:
-            # Stream is expected to exist.
-            options.stream_position = batch.expected_position
-        else:
-            # Disable optimistic concurrency control.
-            options.any.CopyFrom(empty_pb2.Empty())
-    else:
-        # Stream is expected not to exist.
-        options.no_stream.CopyFrom(empty_pb2.Empty())
-    # Construct batch request 'proposed_messages'.
-    # Todo: Split batch.events into chunks of 20?
-    proposed_messages = []
-    for event in batch.events:
-        proposed_message = streams_pb2.BatchAppendReq.ProposedMessage(
-            id=shared_pb2.UUID(string=str(event.id)),
-            metadata={"type": event.type, "content-type": event.content_type},
-            custom_metadata=event.metadata,
-            data=event.data,
-        )
-        proposed_messages.append(proposed_message)
-    batch_append_req = streams_pb2.BatchAppendReq(
-        correlation_id=shared_pb2.UUID(string=str(batch.correlation_id)),
-        options=options,
-        proposed_messages=proposed_messages,
-        is_final=True,  # This specifies the end of an atomic transaction.
-    )
-    return batch_append_req
-
-
-class ReadResponse(Iterable[RecordedEvent]):
-    def __init__(
-        self,
-        read_resp_iter: Iterable[streams_pb2.ReadResp],
-        stream_name: Optional[str],
-        is_subscription: bool,
-    ):
-        self.read_resp_iter = iter(read_resp_iter)
-        self.stream_name = stream_name
-        self.subscription_id: Optional[UUID] = None
-        if is_subscription:
-            read_resp = self._get_next_read_resp()
-            content_oneof = read_resp.WhichOneof("content")
-            if content_oneof == "confirmation":
-                # Todo: What is this actually for?
-                self.subscription_id = UUID(read_resp.confirmation.subscription_id)
+            ):
+                assert isinstance(response, streams_pb2.BatchAppendResp)
+                result = self._convert_batch_append_resp(response, stream_name)
+                if isinstance(result, BatchAppendResponse):
+                    return result
+                else:
+                    assert isinstance(result, ESDBClientException)
+                    raise result
             else:  # pragma: no cover
-                raise ESDBClientException(
-                    f"Expected subscription confirmation, got: {read_resp}"
-                )
-
-    def __iter__(self) -> "ReadResponse":
-        return self
-
-    def __next__(self) -> RecordedEvent:
-        while True:
-            read_resp = self._get_next_read_resp()
-            content_oneof = read_resp.WhichOneof("content")
-            if content_oneof == "event":
-                event = read_resp.event.event
-                position_oneof = read_resp.event.WhichOneof("position")
-                if position_oneof == "commit_position":
-                    commit_position = read_resp.event.commit_position
-                else:  # pragma: no cover
-                    # We only get here with EventStoreDB < 22.10.
-                    assert position_oneof == "no_position", position_oneof
-                    commit_position = None
-
-                return RecordedEvent(
-                    id=UUID(event.id.string),
-                    type=event.metadata["type"],
-                    data=event.data,
-                    content_type=event.metadata["content-type"],
-                    metadata=event.custom_metadata,
-                    stream_name=event.stream_identifier.stream_name.decode("utf8"),
-                    stream_position=event.stream_revision,
-                    commit_position=commit_position,
-                )
-            elif content_oneof == "stream_not_found":
-                raise StreamNotFound(f"Stream {self.stream_name!r} not found")
-            else:
-                pass  # pragma: no cover
-                # Todo: Maybe support other content_oneof values:
-                #   oneof content {
-                # 		ReadEvent event = 1;
-                # 		SubscriptionConfirmation confirmation = 2;
-                # 		Checkpoint checkpoint = 3;
-                # 		StreamNotFound stream_not_found = 4;
-                # 		uint64 first_stream_position = 5;
-                # 		uint64 last_stream_position = 6;
-                # 		AllStreamPosition last_all_stream_position = 7;
-                # 	}
-                #
-                # Todo: Not sure how to request to get first_stream_position,
-                #   last_stream_position, first_all_stream_position.
+                raise ESDBClientException("Batch append response not received")
 
-    def _get_next_read_resp(self) -> streams_pb2.ReadResp:
-        try:
-            read_resp = next(self.read_resp_iter)
         except RpcError as e:
             raise handle_rpc_error(e) from e
-        assert isinstance(read_resp, streams_pb2.ReadResp)
-        return read_resp
-
-
-class SubscriptionReadRequest:
-    def __init__(self, group_name: str, stream_name: Optional[str] = None) -> None:
-        self.group_name = group_name
-        self.stream_name = stream_name
-        self.queue: queue.Queue[shared_pb2.UUID] = queue.Queue()
-        self._has_requested_options = False
-
-    def __next__(self) -> persistent_pb2.ReadReq:
-        if not self._has_requested_options:
-            self._has_requested_options = True
-            options = persistent_pb2.ReadReq.Options(
-                group_name=self.group_name,
-                buffer_size=100,
-                uuid_option=persistent_pb2.ReadReq.Options.UUIDOption(
-                    # structured=shared_pb2.Empty(),
-                    string=shared_pb2.Empty(),
-                ),
-            )
-            # Decide 'stream_option'.
-            if isinstance(self.stream_name, str):
-                options.stream_identifier.CopyFrom(
-                    shared_pb2.StreamIdentifier(
-                        stream_name=self.stream_name.encode("utf8")
-                    )
-                )
-            else:
-                options.all.CopyFrom(shared_pb2.Empty())
-            return persistent_pb2.ReadReq(options=options)
-        else:
-            ids = []
-            # Send an Ack whenever there are 100 acks, or at least
-            # every 100ms when there are some acks, otherwise don't.
-            while True:
-                try:
-                    event_id = self.queue.get(timeout=0.1)
-                    ids.append(event_id)
-                    if len(ids) >= 100:
-                        return persistent_pb2.ReadReq(
-                            ack=persistent_pb2.ReadReq.Ack(ids=ids)
-                        )
-                except queue.Empty:
-                    if len(ids) >= 1:
-                        return persistent_pb2.ReadReq(
-                            ack=persistent_pb2.ReadReq.Ack(ids=ids)
-                        )
-                    else:  # pragma: no cover
-                        pass
-
-    def ack(self, event_id: UUID) -> None:
-        self.queue.put(shared_pb2.UUID(string=str(event_id)))
-
-    # Todo: Implement nack().
-
-
-class SubscriptionReadResponse:
-    def __init__(self, resp: Iterable[persistent_pb2.ReadResp]):
-        self.resp = iter(resp)
-
-    def __iter__(self) -> "SubscriptionReadResponse":
-        return self
-
-    def __next__(self) -> RecordedEvent:
-        while True:
-            try:
-                response = next(self.resp)
-            except RpcError as e:
-                if e.code() == StatusCode.NOT_FOUND:
-                    raise SubscriptionNotFound() from e
-                else:
-                    raise handle_rpc_error(e) from e
-            assert isinstance(response, persistent_pb2.ReadResp)
-            content_oneof = response.WhichOneof("content")
-            if content_oneof == "event":
-                event = response.event.event
-                position_oneof = response.event.WhichOneof("position")
-                if position_oneof == "commit_position":
-                    commit_position = response.event.commit_position
-                else:  # pragma: no cover
-                    # We only get here with EventStoreDB < 22.10.
-                    assert position_oneof == "no_position", position_oneof
-                    commit_position = None
-
-                return RecordedEvent(
-                    id=UUID(event.id.string),
-                    type=event.metadata.get("type", ""),
-                    data=event.data,
-                    metadata=event.custom_metadata,
-                    content_type=event.metadata.get("content-type", ""),
-                    stream_name=event.stream_identifier.stream_name.decode("utf8"),
-                    stream_position=event.stream_revision,
-                    commit_position=commit_position,
-                )
-
-
-@dataclass
-class SubscriptionInfo:
-    event_source: str
-    group_name: str
-    status: str
-    average_per_second: int
-    total_items: int
-    count_since_last_measurement: int
-    last_checkpointed_event_position: str
-    last_known_event_position: str
-    resolve_link_tos: bool
-    start_from: str
-    message_timeout_milliseconds: int
-    extra_statistics: bool
-    max_retry_count: int
-    live_buffer_size: int
-    buffer_size: int
-    read_batch_size: int
-    check_point_after_milliseconds: int
-    min_check_point_count: int
-    max_check_point_count: int
-    read_buffer_count: int
-    live_buffer_count: int
-    retry_buffer_count: int
-    total_in_flight_messages: int
-    outstanding_messages_count: int
-    named_consumer_strategy: str
-    max_subscriber_count: int
-    parked_message_count: int
-
-
-class PersistentSubscriptionsService(ESDBService):
-    """
-    Encapsulates the 'persistent.PersistentSubscriptions' gRPC service.
-    """
-
-    def __init__(self, channel: Channel):
-        self._stub = persistent_pb2_grpc.PersistentSubscriptionsStub(channel)
 
     @overload
-    def create(
+    async def read(
         self,
-        group_name: str,
         *,
-        from_end: bool = False,
-        commit_position: Optional[int] = None,
-        # Todo: Expose alternative consumer strategies.
-        consumer_strategy: str = "DispatchToSingle",
-        filter_exclude: Sequence[str] = (),
-        filter_include: Sequence[str] = (),
+        stream_name: Optional[str] = None,
+        stream_position: Optional[int] = None,
+        backwards: bool = False,
+        limit: int = sys.maxsize,
         timeout: Optional[float] = None,
         metadata: Optional[Metadata] = None,
         credentials: Optional[CallCredentials] = None,
-    ) -> None:
+    ) -> AsyncIterable[RecordedEvent]:
         """
-        Signature for creating a persistent "all streams" subscription.
+        Signature for reading events from a stream.
         """
 
     @overload
-    def create(
+    async def read(
         self,
-        group_name: str,
         *,
         stream_name: Optional[str] = None,
-        from_end: bool = False,
         stream_position: Optional[int] = None,
-        consumer_strategy: str = "DispatchToSingle",
+        subscribe: Literal[True],
         timeout: Optional[float] = None,
         metadata: Optional[Metadata] = None,
         credentials: Optional[CallCredentials] = None,
-    ) -> None:
+    ) -> AsyncIterable[RecordedEvent]:
         """
-        Signature for creating a persistent stream subscription.
+        Signature for reading events from a stream with a catch-up subscription.
         """
 
-    def create(
+    @overload
+    async def read(
         self,
-        group_name: str,
-        stream_name: Optional[str] = None,
-        from_end: bool = False,
+        *,
         commit_position: Optional[int] = None,
-        stream_position: Optional[int] = None,
-        # Todo: Expose alternative consumer strategies.
-        consumer_strategy: str = "DispatchToSingle",
+        backwards: bool = False,
         filter_exclude: Sequence[str] = (),
         filter_include: Sequence[str] = (),
+        filter_by_stream_name: bool = False,
+        limit: int = sys.maxsize,
         timeout: Optional[float] = None,
         metadata: Optional[Metadata] = None,
         credentials: Optional[CallCredentials] = None,
-    ) -> None:
-        # Construct 'settings'.
-        settings = persistent_pb2.CreateReq.Settings(
-            resolve_links=False,
-            extra_statistics=False,
-            max_retry_count=5,
-            min_checkpoint_count=10,  # server recorded position
-            max_checkpoint_count=10,  # server recorded position
-            max_subscriber_count=5,
-            live_buffer_size=1000,  # how many new events to hold in memory?
-            read_batch_size=8,  # how many events to read from DB records?
-            history_buffer_size=200,  # how many recorded events to hold in memory?
-            message_timeout_ms=1000,
-            checkpoint_after_ms=100,
-            consumer_strategy=consumer_strategy,
-        )
-
-        # Construct CreateReq.Options.
-        options = persistent_pb2.CreateReq.Options(
-            group_name=group_name,
-            settings=settings,
-        )
-
-        # Decide 'stream_option'.
-        if isinstance(stream_name, str):
-            # Todo: Support persistent subscription to a stream.
-            stream_options = persistent_pb2.CreateReq.StreamOptions(
-                stream_identifier=shared_pb2.StreamIdentifier(
-                    stream_name=stream_name.encode("utf8")
-                ),
-            )
-            # Decide 'revision_option'.
-            if isinstance(stream_position, int):
-                stream_options.revision = stream_position
-            elif from_end is False:
-                stream_options.start.CopyFrom(shared_pb2.Empty())
-            else:
-                stream_options.end.CopyFrom(shared_pb2.Empty())
-            options.stream.CopyFrom(stream_options)
-        else:
-            if commit_position is not None:
-                all_options = persistent_pb2.CreateReq.AllOptions(
-                    position=persistent_pb2.CreateReq.Position(
-                        commit_position=commit_position,
-                        prepare_position=commit_position,
-                    ),
-                )
-            elif from_end:
-                all_options = persistent_pb2.CreateReq.AllOptions(
-                    end=shared_pb2.Empty(),
-                )
-            else:
-                all_options = persistent_pb2.CreateReq.AllOptions(
-                    start=shared_pb2.Empty(),
-                )
-
-            # Decide 'filter_option'.
-            if filter_exclude or filter_include:
-                if filter_include:
-                    filter_regex = "^" + "|".join(filter_include) + "$"
-                else:
-                    filter_regex = "^(?!(" + "|".join(filter_exclude) + ")).*$"
-
-                filter = persistent_pb2.CreateReq.AllOptions.FilterOptions(
-                    event_type=persistent_pb2.CreateReq.AllOptions.FilterOptions.Expression(
-                        regex=filter_regex
-                    ),
-                    # Todo: What does 'window' mean?
-                    # max=shared_pb2.Empty(),
-                    count=shared_pb2.Empty(),
-                    # Todo: What does 'checkpointIntervalMultiplier' mean?
-                    checkpointIntervalMultiplier=5,
-                )
-                all_options.filter.CopyFrom(filter)
-            else:
-                no_filter = shared_pb2.Empty()
-                all_options.no_filter.CopyFrom(no_filter)
-
-            options.all.CopyFrom(all_options)
-
-        # Construct RPC request.
-        request = persistent_pb2.CreateReq(options=options)
+    ) -> AsyncIterable[RecordedEvent]:
+        """
+        Signature for reading all events.
+        """
 
-        # Call 'Create' RPC.
-        try:
-            response = self._stub.Create(
-                request,
-                timeout=timeout,
-                metadata=self._metadata(metadata, requires_leader=True),
-                credentials=credentials,
-            )
-        except RpcError as e:
-            raise handle_rpc_error(e) from e
-        assert isinstance(response, persistent_pb2.CreateResp)
+    @overload
+    async def read(
+        self,
+        *,
+        commit_position: Optional[int] = None,
+        filter_exclude: Sequence[str] = (),
+        filter_include: Sequence[str] = (),
+        filter_by_stream_name: bool = False,
+        subscribe: Literal[True],
+        timeout: Optional[float] = None,
+        metadata: Optional[Metadata] = None,
+        credentials: Optional[CallCredentials] = None,
+    ) -> AsyncIterable[RecordedEvent]:
+        """
+        Signature for reading all events with a catch-up subscription.
+        """
 
-    def read(
+    async def read(
         self,
-        group_name: str,
+        *,
         stream_name: Optional[str] = None,
+        stream_position: Optional[int] = None,
+        commit_position: Optional[int] = None,
+        backwards: bool = False,
+        filter_exclude: Sequence[str] = (),
+        filter_include: Sequence[str] = (),
+        filter_by_stream_name: bool = False,
+        limit: int = sys.maxsize,
+        subscribe: bool = False,
         timeout: Optional[float] = None,
         metadata: Optional[Metadata] = None,
         credentials: Optional[CallCredentials] = None,
-    ) -> Tuple[SubscriptionReadRequest, SubscriptionReadResponse]:
-        read_req = SubscriptionReadRequest(
-            group_name=group_name,
+    ) -> AsyncIterable[RecordedEvent]:
+        """
+        Constructs and sends a gRPC 'ReadReq' to the 'Read' rpc.
+
+        Returns a generator which yields RecordedEvent objects.
+        """
+
+        # Construct read request.
+        read_req = self._construct_read_request(
             stream_name=stream_name,
+            stream_position=stream_position,
+            commit_position=commit_position,
+            backwards=backwards,
+            filter_exclude=filter_exclude,
+            filter_include=filter_include,
+            filter_by_stream_name=filter_by_stream_name,
+            limit=limit,
+            subscribe=subscribe,
         )
-        read_resp = self._stub.Read(
+
+        # Send the read request, and iterate over the response.
+        unary_stream_call: AsyncIterable[streams_pb2.ReadResp] = self._stub.Read(
             read_req,
             timeout=timeout,
             metadata=self._metadata(metadata),
             credentials=credentials,
         )
-        return (read_req, SubscriptionReadResponse(read_resp))
 
-    def get_info(
+        response = AsyncioReadResponse(
+            unary_stream_call, stream_name=stream_name, is_subscription=subscribe
+        )
+        await response.check_confirmation()
+        return response
+
+    async def delete(
         self,
-        group_name: str,
-        stream_name: Optional[str] = None,
+        stream_name: str,
+        expected_position: Optional[int],
         timeout: Optional[float] = None,
         metadata: Optional[Metadata] = None,
         credentials: Optional[CallCredentials] = None,
-    ) -> SubscriptionInfo:
-        if stream_name is None:
-            options = persistent_pb2.GetInfoReq.Options(
-                all=shared_pb2.Empty(),
-                group_name=group_name,
-            )
-        else:
-            options = persistent_pb2.GetInfoReq.Options(
-                stream_identifier=shared_pb2.StreamIdentifier(
-                    stream_name=stream_name.encode("utf8")
-                ),
-                group_name=group_name,
-            )
+    ) -> None:
+        delete_req = self._construct_delete_req(stream_name, expected_position)
 
-        req = persistent_pb2.GetInfoReq(options=options)
         try:
-            resp = self._stub.GetInfo(
-                req,
+            delete_resp = await self._stub.Delete(
+                delete_req,
                 timeout=timeout,
-                metadata=self._metadata(metadata),
+                metadata=self._metadata(metadata, requires_leader=True),
                 credentials=credentials,
             )
         except RpcError as e:
-            if e.code() == StatusCode.NOT_FOUND:
-                raise SubscriptionNotFound() from e
+            if e.code() == StatusCode.FAILED_PRECONDITION:
+                details = e.details() or ""
+                if "WrongExpectedVersion" in details:
+                    if "Actual version: -1" in details:
+                        raise NotFound() from e
+                    else:
+                        raise WrongExpectedPosition() from e
+                elif "is deleted" in details:
+                    raise StreamIsDeleted() from e
+                else:  # pragma: no cover
+                    raise handle_rpc_error(e) from e
             else:
                 raise handle_rpc_error(e) from e
-
         else:
-            assert isinstance(resp, persistent_pb2.GetInfoResp)
-            s = resp.subscription_info
-            return SubscriptionInfo(
-                event_source=s.event_source,
-                group_name=s.group_name,
-                status=s.status,
-                average_per_second=s.average_per_second,
-                total_items=s.total_items,
-                count_since_last_measurement=s.count_since_last_measurement,
-                last_checkpointed_event_position=s.last_checkpointed_event_position,
-                last_known_event_position=s.last_known_event_position,
-                resolve_link_tos=s.resolve_link_tos,
-                start_from=s.start_from,
-                message_timeout_milliseconds=s.message_timeout_milliseconds,
-                extra_statistics=s.extra_statistics,
-                max_retry_count=s.max_retry_count,
-                live_buffer_size=s.live_buffer_size,
-                buffer_size=s.buffer_size,
-                read_batch_size=s.read_batch_size,
-                check_point_after_milliseconds=s.check_point_after_milliseconds,
-                min_check_point_count=s.min_check_point_count,
-                max_check_point_count=s.max_check_point_count,
-                read_buffer_count=s.read_buffer_count,
-                live_buffer_count=s.live_buffer_count,
-                retry_buffer_count=s.retry_buffer_count,
-                total_in_flight_messages=s.total_in_flight_messages,
-                outstanding_messages_count=s.outstanding_messages_count,
-                named_consumer_strategy=s.named_consumer_strategy,
-                max_subscriber_count=s.max_subscriber_count,
-                parked_message_count=s.parked_message_count,
-            )
+            assert isinstance(delete_resp, streams_pb2.DeleteResp), delete_resp
 
-    def list(
+    async def tombstone(
         self,
-        stream_name: Optional[str] = None,
+        stream_name: str,
+        expected_position: Optional[int],
         timeout: Optional[float] = None,
         metadata: Optional[Metadata] = None,
         credentials: Optional[CallCredentials] = None,
-    ) -> List[SubscriptionInfo]:
-        if stream_name is None:
-            options = persistent_pb2.ListReq.Options(
-                list_all_subscriptions=shared_pb2.Empty()
-            )
-        else:
-            options = persistent_pb2.ListReq.Options(
-                list_for_stream=persistent_pb2.ListReq.StreamOption(
-                    stream=shared_pb2.StreamIdentifier(
-                        stream_name=stream_name.encode("utf8")
-                    )
-                )
-            )
+    ) -> None:
+        tombstone_req = self._construct_tombstone_req(stream_name, expected_position)
 
-        req = persistent_pb2.ListReq(options=options)
         try:
-            resp = self._stub.List(
-                req,
+            tombstone_resp = await self._stub.Tombstone(
+                tombstone_req,
                 timeout=timeout,
-                metadata=self._metadata(metadata),
+                metadata=self._metadata(metadata, requires_leader=True),
                 credentials=credentials,
             )
         except RpcError as e:
-            if e.code() == StatusCode.NOT_FOUND:
-                return []
+            if e.code() == StatusCode.FAILED_PRECONDITION:
+                details = e.details() or ""
+                if "WrongExpectedVersion" in details:
+                    if "Actual version: -1" in details:
+                        raise NotFound() from e
+                    else:
+                        raise WrongExpectedPosition() from e
+                elif "is deleted" in details:
+                    raise StreamIsDeleted() from e
+                else:  # pragma: no cover
+                    raise handle_rpc_error(e) from e
             else:
                 raise handle_rpc_error(e) from e
+        else:
+            assert isinstance(tombstone_resp, streams_pb2.TombstoneResp)
 
-        assert isinstance(resp, persistent_pb2.ListResp)
-        return [
-            SubscriptionInfo(
-                event_source=s.event_source,
-                group_name=s.group_name,
-                status=s.status,
-                average_per_second=s.average_per_second,
-                total_items=s.total_items,
-                count_since_last_measurement=s.count_since_last_measurement,
-                last_checkpointed_event_position=s.last_checkpointed_event_position,
-                last_known_event_position=s.last_known_event_position,
-                resolve_link_tos=s.resolve_link_tos,
-                start_from=s.start_from,
-                message_timeout_milliseconds=s.message_timeout_milliseconds,
-                extra_statistics=s.extra_statistics,
-                max_retry_count=s.max_retry_count,
-                live_buffer_size=s.live_buffer_size,
-                buffer_size=s.buffer_size,
-                read_batch_size=s.read_batch_size,
-                check_point_after_milliseconds=s.check_point_after_milliseconds,
-                min_check_point_count=s.min_check_point_count,
-                max_check_point_count=s.max_check_point_count,
-                read_buffer_count=s.read_buffer_count,
-                live_buffer_count=s.live_buffer_count,
-                retry_buffer_count=s.retry_buffer_count,
-                total_in_flight_messages=s.total_in_flight_messages,
-                outstanding_messages_count=s.outstanding_messages_count,
-                named_consumer_strategy=s.named_consumer_strategy,
-                max_subscriber_count=s.max_subscriber_count,
-                parked_message_count=s.parked_message_count,
-            )
-            for s in resp.subscriptions
-        ]
 
-    def delete(
+class StreamsService(BaseStreamsService):
+    """
+    Encapsulates the 'streams.Streams' gRPC service.
+    """
+
+    @overload
+    def read(
         self,
-        group_name: str,
+        *,
         stream_name: Optional[str] = None,
+        stream_position: Optional[int] = None,
+        backwards: bool = False,
+        limit: int = sys.maxsize,
         timeout: Optional[float] = None,
         metadata: Optional[Metadata] = None,
         credentials: Optional[CallCredentials] = None,
-    ) -> None:
-        if stream_name is None:
-            options = persistent_pb2.DeleteReq.Options(
-                all=shared_pb2.Empty(),
-                group_name=group_name,
-            )
-        else:
-            options = persistent_pb2.DeleteReq.Options(
-                stream_identifier=shared_pb2.StreamIdentifier(
-                    stream_name=stream_name.encode("utf8")
-                ),
-                group_name=group_name,
-            )
-
-        req = persistent_pb2.DeleteReq(options=options)
-        try:
-            resp = self._stub.Delete(
-                req,
-                timeout=timeout,
-                metadata=self._metadata(metadata),
-                credentials=credentials,
-            )
-        except RpcError as e:
-            if e.code() == StatusCode.NOT_FOUND:
-                raise SubscriptionNotFound() from e
-            else:
-                raise handle_rpc_error(e) from e
-        assert isinstance(resp, persistent_pb2.DeleteResp)
+    ) -> Iterable[RecordedEvent]:
+        """
+        Signature for reading events from a stream.
+        """
 
+    @overload
+    def read(
+        self,
+        *,
+        stream_name: Optional[str] = None,
+        stream_position: Optional[int] = None,
+        subscribe: Literal[True],
+        timeout: Optional[float] = None,
+        metadata: Optional[Metadata] = None,
+        credentials: Optional[CallCredentials] = None,
+    ) -> Iterable[RecordedEvent]:
+        """
+        Signature for reading events from a stream with a catch-up subscription.
+        """
 
-@dataclass
-class ClusterMember:
-    state: str
-    address: str
-    port: int
+    @overload
+    def read(
+        self,
+        *,
+        commit_position: Optional[int] = None,
+        backwards: bool = False,
+        filter_exclude: Sequence[str] = (),
+        filter_include: Sequence[str] = (),
+        filter_by_stream_name: bool = False,
+        limit: int = sys.maxsize,
+        timeout: Optional[float] = None,
+        metadata: Optional[Metadata] = None,
+        credentials: Optional[CallCredentials] = None,
+    ) -> Iterable[RecordedEvent]:
+        """
+        Signature for reading all events.
+        """
 
+    @overload
+    def read(
+        self,
+        *,
+        commit_position: Optional[int] = None,
+        filter_exclude: Sequence[str] = (),
+        filter_include: Sequence[str] = (),
+        filter_by_stream_name: bool = False,
+        subscribe: Literal[True],
+        timeout: Optional[float] = None,
+        metadata: Optional[Metadata] = None,
+        credentials: Optional[CallCredentials] = None,
+    ) -> Iterable[RecordedEvent]:
+        """
+        Signature for reading all events with a catch-up subscription.
+        """
 
-NODE_STATE_LEADER = "NODE_STATE_LEADER"
-NODE_STATE_FOLLOWER = "NODE_STATE_FOLLOWER"
-NODE_STATE_REPLICA = "NODE_STATE_REPLICA"
-NODE_STATE_OTHER = "NODE_STATE_OTHER"
+    def read(
+        self,
+        *,
+        stream_name: Optional[str] = None,
+        stream_position: Optional[int] = None,
+        commit_position: Optional[int] = None,
+        backwards: bool = False,
+        filter_exclude: Sequence[str] = (),
+        filter_include: Sequence[str] = (),
+        filter_by_stream_name: bool = False,
+        limit: int = sys.maxsize,
+        subscribe: bool = False,
+        timeout: Optional[float] = None,
+        metadata: Optional[Metadata] = None,
+        credentials: Optional[CallCredentials] = None,
+    ) -> Iterable[RecordedEvent]:
+        """
+        Constructs and sends a gRPC 'ReadReq' to the 'Read' rpc.
 
-GOSSIP_API_NODE_STATES_MAPPING = {
-    gossip_pb2.MemberInfo.VNodeState.Follower: NODE_STATE_FOLLOWER,
-    gossip_pb2.MemberInfo.VNodeState.Leader: NODE_STATE_LEADER,
-    gossip_pb2.MemberInfo.VNodeState.ReadOnlyReplica: NODE_STATE_REPLICA,
-}
+        Returns a generator which yields RecordedEvent objects.
+        """
 
+        # Construct read request.
+        read_req = self._construct_read_request(
+            stream_name=stream_name,
+            stream_position=stream_position,
+            commit_position=commit_position,
+            backwards=backwards,
+            filter_exclude=filter_exclude,
+            filter_include=filter_include,
+            filter_by_stream_name=filter_by_stream_name,
+            limit=limit,
+            subscribe=subscribe,
+        )
 
-class GossipService(ESDBService):
-    """
-    Encapsulates the 'gossip.Gossip' gRPC service.
-    """
+        # Send the read request, and iterate over the response.
+        read_resp = self._stub.Read(
+            read_req,
+            timeout=timeout,
+            metadata=self._metadata(metadata),
+            credentials=credentials,
+        )
 
-    def __init__(self, channel: Channel):
-        self._stub = gossip_pb2_grpc.GossipStub(channel)
+        return ReadResponse(
+            read_resp, stream_name=stream_name, is_subscription=subscribe
+        )
 
-    def read(
+    def append(
         self,
+        stream_name: str,
+        expected_position: Optional[int],
+        events: Iterable[NewEvent],
         timeout: Optional[float] = None,
         metadata: Optional[Metadata] = None,
         credentials: Optional[CallCredentials] = None,
-    ) -> Sequence[ClusterMember]:
+    ) -> int:
+        """
+        Constructs and sends a stream of gRPC 'AppendReq' to the 'Append' rpc.
+
+        Returns the commit position of the last appended event.
+        """
         try:
-            read_resp = self._stub.Read(
-                shared_pb2.Empty(),
+            response = self._stub.Append(
+                self._generate_append_requests(
+                    stream_name=stream_name,
+                    expected_position=expected_position,
+                    events=events,
+                ),
                 timeout=timeout,
-                metadata=self._metadata(metadata),
+                metadata=self._metadata(metadata, requires_leader=True),
                 credentials=credentials,
             )
         except RpcError as e:
             raise handle_rpc_error(e) from e
+        else:
+            assert isinstance(response, streams_pb2.AppendResp)
+            # Response 'result' is either 'success' or 'wrong_expected_version'.
+            result_oneof = response.WhichOneof("result")
+            if result_oneof == "success":
+                return response.success.position.commit_position
+            else:
+                assert result_oneof == "wrong_expected_version", result_oneof
+                wev = response.wrong_expected_version
+                cro_oneof = wev.WhichOneof("current_revision_option")
+                if cro_oneof == "current_revision":
+                    raise WrongExpectedPosition(
+                        f"Current position is {wev.current_revision}"
+                    )
+                else:
+                    assert cro_oneof == "current_no_stream", cro_oneof
+                    raise WrongExpectedPosition(
+                        f"Stream {stream_name!r} does not exist"
+                    )
 
-        assert isinstance(read_resp, gossip_pb2.ClusterInfo)
-
-        members = []
-        for member_info in read_resp.members:
-            member = ClusterMember(
-                GOSSIP_API_NODE_STATES_MAPPING.get(member_info.state, NODE_STATE_OTHER),
-                member_info.http_end_point.address,
-                member_info.http_end_point.port,
+    def _generate_append_requests(
+        self,
+        stream_name: str,
+        expected_position: Optional[int],
+        events: Iterable[NewEvent],
+    ) -> Iterator[streams_pb2.AppendReq]:
+        # First, define append request that has 'content' as 'options'.
+        options = streams_pb2.AppendReq.Options(
+            stream_identifier=shared_pb2.StreamIdentifier(
+                stream_name=stream_name.encode("utf8")
             )
-            members.append(member)
-        return tuple(members)
+        )
+        # Decide 'expected_stream_revision'.
+        if isinstance(expected_position, int):
+            if expected_position >= 0:
+                # Stream is expected to exist.
+                options.revision = expected_position
+            else:
+                # Disable optimistic concurrency control.
+                options.any.CopyFrom(shared_pb2.Empty())
+        else:
+            # Stream is expected not to exist.
+            options.no_stream.CopyFrom(shared_pb2.Empty())
 
+        yield streams_pb2.AppendReq(options=options)
 
-CLUSTER_GOSSIP_NODE_STATES_MAPPING = {
-    cluster_pb2.MemberInfo.VNodeState.Follower: NODE_STATE_FOLLOWER,
-    cluster_pb2.MemberInfo.VNodeState.Leader: NODE_STATE_LEADER,
-    cluster_pb2.MemberInfo.VNodeState.ReadOnlyReplica: NODE_STATE_REPLICA,
-}
+        # Secondly, define append requests that has 'content' as 'proposed_message'.
+        for event in events:
+            proposed_message = streams_pb2.AppendReq.ProposedMessage(
+                id=shared_pb2.UUID(string=str(event.id)),
+                metadata={"type": event.type, "content-type": event.content_type},
+                custom_metadata=event.metadata,
+                data=event.data,
+            )
+            yield streams_pb2.AppendReq(proposed_message=proposed_message)
 
+    # def batch_append_multiplexed(
+    #     self,
+    #     futures_queue: BatchAppendFutureQueue,
+    #     timeout: Optional[float] = None,
+    #     metadata: Optional[Metadata] = None,
+    #     credentials: Optional[CallCredentials] = None,
+    # ) -> None:
+    #     # Construct batch append requests iterator.
+    #     requests = BatchAppendFutureIterator(futures_queue)
+    #
+    #     # Call the gRPC method.
+    #     try:
+    #         for response in self._stub.BatchAppend(
+    #             requests,
+    #             timeout=timeout,
+    #             metadata=self._metadata(metadata, requires_leader=True),
+    #             credentials=credentials,
+    #         ):
+    #             # Use the correlation ID to get the future.
+    #             assert isinstance(response, streams_pb2.BatchAppendResp)
+    #             correlation_id = UUID(response.correlation_id.string)
+    #             future = requests.pop_future(correlation_id)
+    #
+    #             # Convert the result.
+    #             stream_name = future.batch_append_request.stream_name
+    #             result = self._convert_batch_append_result(response, stream_name)
+    #
+    #             # Finish the future.
+    #             if isinstance(result, BatchAppendResponse):
+    #                 future.set_result(result)
+    #             else:
+    #                 assert isinstance(result, ESDBClientException)
+    #                 future.set_exception(result)
+    #
+    #         else:
+    #             # The response stream ended without an RPC error.
+    #             for (
+    #                 correlation_id
+    #             ) in requests.futures_by_correlation_id:  # pragma: no cover
+    #                 future = requests.pop_future(correlation_id)
+    #                 future.set_exception(
+    #                     ESDBClientException("Batch append response not received")
+    #                 )
+    #
+    #     except RpcError as rpc_error:
+    #         # The response stream ended with an RPC error.
+    #         try:
+    #             raise handle_rpc_error(rpc_error) from rpc_error
+    #         except GrpcError as grpc_error:
+    #             for (
+    #                 correlation_id
+    #             ) in requests.futures_by_correlation_id:  # pragma: no cover
+    #                 future = requests.pop_future(correlation_id)
+    #                 future.set_exception(grpc_error)
+    #             raise
 
-class ClusterGossipService(ESDBService):
-    """
-    Encapsulates the 'cluster.Gossip' gRPC service.
-    """
+    def batch_append(
+        self,
+        stream_name: str,
+        expected_position: Optional[int],
+        events: Iterable[NewEvent],
+        timeout: Optional[float] = None,
+        metadata: Optional[Metadata] = None,
+        credentials: Optional[CallCredentials] = None,
+    ) -> BatchAppendResponse:
+        # Call the gRPC method.
+        try:
+            req = self._construct_batch_append_req(
+                stream_name=stream_name,
+                expected_position=expected_position,
+                events=events,
+                deadline=DEFAULT_BATCH_APPEND_REQUEST_DEADLINE,
+                correlation_id=uuid4(),
+            )
+            for response in self._stub.BatchAppend(
+                iter([req]),
+                timeout=timeout,
+                metadata=self._metadata(metadata, requires_leader=True),
+                credentials=credentials,
+            ):
+                assert isinstance(response, streams_pb2.BatchAppendResp)
+                result = self._convert_batch_append_resp(response, stream_name)
+                if isinstance(result, BatchAppendResponse):
+                    return result
+                else:
+                    assert isinstance(result, ESDBClientException)
+                    raise result
+            else:  # pragma: no cover
+                raise ESDBClientException("Batch append response not received")
 
-    def __init__(self, channel: Channel):
-        self._stub = cluster_pb2_grpc.GossipStub(channel)
+        except RpcError as e:
+            raise handle_rpc_error(e) from e
 
-    def read(
+    def delete(
         self,
+        stream_name: str,
+        expected_position: Optional[int],
         timeout: Optional[float] = None,
         metadata: Optional[Metadata] = None,
         credentials: Optional[CallCredentials] = None,
-    ) -> Sequence[ClusterMember]:
-        """
-        Returns a sequence of ClusterMember
-        """
+    ) -> None:
+        delete_req = self._construct_delete_req(stream_name, expected_position)
 
         try:
-            read_resp = self._stub.Read(
-                shared_pb2.Empty(),
+            delete_resp = self._stub.Delete(
+                delete_req,
                 timeout=timeout,
-                metadata=self._metadata(metadata),
+                metadata=self._metadata(metadata, requires_leader=True),
                 credentials=credentials,
             )
         except RpcError as e:
-            raise handle_rpc_error(e) from e
+            if e.code() == StatusCode.FAILED_PRECONDITION:
+                details = e.details() or ""
+                if "WrongExpectedVersion" in details:
+                    if "Actual version: -1" in details:
+                        raise NotFound() from e
+                    else:
+                        raise WrongExpectedPosition() from e
+                elif "is deleted" in details:
+                    raise StreamIsDeleted() from e
+                else:  # pragma: no cover
+                    raise handle_rpc_error(e) from e
+            else:
+                raise handle_rpc_error(e) from e
+        else:
+            assert isinstance(delete_resp, streams_pb2.DeleteResp)
+            # position_option_oneof = delete_resp.WhichOneof("position_option")
+            # if position_option_oneof == "position":
+            #     return delete_resp.position
+            # else:
+            #     return delete_resp.no_position
 
-        assert isinstance(read_resp, cluster_pb2.ClusterInfo)
+    def tombstone(
+        self,
+        stream_name: str,
+        expected_position: Optional[int],
+        timeout: Optional[float] = None,
+        metadata: Optional[Metadata] = None,
+        credentials: Optional[CallCredentials] = None,
+    ) -> None:
+        tombstone_req = self._construct_tombstone_req(stream_name, expected_position)
 
-        members = []
-        for member_info in read_resp.members:
-            assert isinstance(member_info, cluster_pb2.MemberInfo)
-            # Todo: Here we might want to use member_info.advertise_host_to_client_as
-            #   and member_info.advertise_http_port_to_client_as, but I don't know
-            #   what the difference is. Are these different from
-            #   member_info.http_end_point.address and member_info.http_end_point.port?
-            member = ClusterMember(
-                state=CLUSTER_GOSSIP_NODE_STATES_MAPPING.get(
-                    member_info.state, NODE_STATE_OTHER
-                ),
-                address=member_info.http_end_point.address,
-                port=member_info.http_end_point.port,
+        try:
+            tombstone_resp = self._stub.Tombstone(
+                tombstone_req,
+                timeout=timeout,
+                metadata=self._metadata(metadata, requires_leader=True),
+                credentials=credentials,
             )
-            members.append(member)
-        return tuple(members)
+        except RpcError as e:
+            if e.code() == StatusCode.FAILED_PRECONDITION:
+                details = e.details() or ""
+                if "WrongExpectedVersion" in details:
+                    if "Actual version: -1" in details:
+                        raise NotFound() from e
+                    else:
+                        raise WrongExpectedPosition() from e
+                elif "is deleted" in details:
+                    raise StreamIsDeleted() from e
+                else:  # pragma: no cover
+                    raise handle_rpc_error(e) from e
+            else:
+                raise handle_rpc_error(e) from e
+        else:
+            assert isinstance(tombstone_resp, streams_pb2.TombstoneResp)
+            # position_option_oneof = tombstone_resp.WhichOneof("position_option")
+            # if position_option_oneof == "position":
+            #     return tombstone_resp.position
+            # else:
+            #     return tombstone_resp.no_position
```

### Comparing `esdbclient-1.0a1/esdbclient/events.py` & `esdbclient-1.0a2/esdbclient/events.py`

 * *Files identical despite different names*

### Comparing `esdbclient-1.0a1/esdbclient/exceptions.py` & `esdbclient-1.0a2/esdbclient/exceptions.py`

 * *Files 21% similar despite different names*

```diff
@@ -32,42 +32,46 @@
 
 class NodeIsNotLeader(ESDBClientException):
     """
     Raised when client attempts to write to a node that is not a leader.
     """
 
 
-class StreamNotFound(ESDBClientException):
+class NotFound(ESDBClientException):
     """
-    Raised when stream is not found.
+    Raised when stream or subscription is not found.
     """
 
 
-class SubscriptionNotFound(ESDBClientException):
+class SubscriptionConfirmationError(ESDBClientException):
     """
-    Raised when persistent subscription is not found.
+    Raised when subscription confirmation fails.
     """
 
 
-class ExpectedPositionError(ESDBClientException):
+class WrongExpectedPosition(ESDBClientException):
     """
     Raised when expected position does not match the
     actual position of the last event in a stream.
     """
 
 
 class AccessDeniedError(ESDBClientException):
     """
     Raised when access is denied by the server.
     """
 
 
-class StreamDeletedError(ESDBClientException):
+class StreamIsDeleted(ESDBClientException):
     """
-    Raised when appending to a deleted stream.
+    Raised when a deleted stream is encountered, for example when
+    appending to a stream that has been deleted, or when reading
+    from a tombstoned stream (reading from a "soft deleted" stream
+    causes a StreamNotFound exception), or when deleting or tombstoning
+    a stream that has been deleeted or tomebstoned.
     """
 
 
 class TimeoutError(ESDBClientException):
     """
     Raised when append operation is timed out by the server.
     """
@@ -93,23 +97,29 @@
 
 class BadRequestError(ESDBClientException):
     """
     Raised when append operation fails with a "bad request" error.
     """
 
 
-class GossipSeedError(ESDBClientException):
+class DiscoveryFailed(ESDBClientException):
+    """
+    Raised when client fails to satisfy node preference using gossip cluster info.
+    """
+
+
+class GossipSeedError(DiscoveryFailed):
     """
     Raised when client has no gossip seeds.
     """
 
 
-class DiscoveryFailed(ESDBClientException):
+class DNSError(DiscoveryFailed):
     """
-    Raised when client fails to satisfy node preference using gossip cluster info.
+    Raised when client request to DNS fails.
     """
 
 
 class LeaderNotFound(DiscoveryFailed):
     """
     Raised when NodePreference is 'follower' but the cluster has no such nodes.
     """
```

### Comparing `esdbclient-1.0a1/esdbclient/protos/Grpc/cluster_pb2.py` & `esdbclient-1.0a2/esdbclient/protos/Grpc/cluster_pb2.py`

 * *Files 2% similar despite different names*

```diff
@@ -65,15 +65,15 @@
     b' \x01(\x0b\x32\x1d.event_store.cluster.EndPoint"\xde\x01\n\x1aLeaderIsResigningOkRequest\x12+\n\tleader_id\x18\x01'
     b" \x01(\x0b\x32\x18.event_store.client.UUID\x12\x32\n\x0bleader_http\x18\x02"
     b" \x01(\x0b\x32\x1d.event_store.cluster.EndPoint\x12+\n\tserver_id\x18\x03"
     b" \x01(\x0b\x32\x18.event_store.client.UUID\x12\x32\n\x0bserver_http\x18\x04"
     b' \x01(\x0b\x32\x1d.event_store.cluster.EndPoint"?\n\x0b\x43lusterInfo\x12\x30\n\x07members\x18\x01'
     b' \x03(\x0b\x32\x1f.event_store.cluster.MemberInfo")\n\x08\x45ndPoint\x12\x0f\n\x07\x61\x64\x64ress\x18\x01'
     b" \x01(\t\x12\x0c\n\x04port\x18\x02"
-    b' \x01(\r"\xf3\x07\n\nMemberInfo\x12-\n\x0binstance_id\x18\x01'
+    b' \x01(\r"\x87\x08\n\nMemberInfo\x12-\n\x0binstance_id\x18\x01'
     b" \x01(\x0b\x32\x18.event_store.client.UUID\x12\x12\n\ntime_stamp\x18\x02"
     b" \x01(\x03\x12\x39\n\x05state\x18\x03"
     b" \x01(\x0e\x32*.event_store.cluster.MemberInfo.VNodeState\x12\x10\n\x08is_alive\x18\x04"
     b" \x01(\x08\x12\x35\n\x0ehttp_end_point\x18\x05"
     b" \x01(\x0b\x32\x1d.event_store.cluster.EndPoint\x12\x33\n\x0cinternal_tcp\x18\x06"
     b" \x01(\x0b\x32\x1d.event_store.cluster.EndPoint\x12\x33\n\x0c\x65xternal_tcp\x18\x07"
     b" \x01(\x0b\x32\x1d.event_store.cluster.EndPoint\x12\x1d\n\x15internal_tcp_uses_tls\x18\x08"
@@ -85,33 +85,35 @@
     b" \x01(\x03\x12\x14\n\x0c\x65poch_number\x18\x0e"
     b" \x01(\x05\x12*\n\x08\x65poch_id\x18\x0f"
     b" \x01(\x0b\x32\x18.event_store.client.UUID\x12\x15\n\rnode_priority\x18\x10"
     b" \x01(\x05\x12\x1c\n\x14is_read_only_replica\x18\x11"
     b" \x01(\x08\x12#\n\x1b\x61\x64vertise_host_to_client_as\x18\x12 \x01(\t\x12(\n"
     b" advertise_http_port_to_client_as\x18\x13"
     b" \x01(\r\x12'\n\x1f\x61\x64vertise_tcp_port_to_client_as\x18\x14"
-    b' \x01(\r"\x9a\x02\n\nVNodeState\x12\x10\n\x0cInitializing\x10\x00\x12\x12\n\x0e\x44iscoverLeader\x10\x01\x12\x0b\n\x07Unknown\x10\x02\x12\x0e\n\nPreReplica\x10\x03\x12\x0e\n\nCatchingUp\x10\x04\x12\t\n\x05\x43lone\x10\x05\x12\x0c\n\x08\x46ollower\x10\x06\x12\r\n\tPreLeader\x10\x07\x12\n\n\x06Leader\x10\x08\x12\x0b\n\x07Manager\x10\t\x12\x10\n\x0cShuttingDown\x10\n\x12\x0c\n\x08Shutdown\x10\x0b\x12\x16\n\x12ReadOnlyLeaderless\x10\x0c\x12\x16\n\x12PreReadOnlyReplica\x10\r\x12\x13\n\x0fReadOnlyReplica\x10\x0e\x12\x13\n\x0fResigningLeader\x10\x0f";\n\x0fReplicaLogWrite\x12\x14\n\x0clog_position\x18\x01'
+    b" \x01(\r\x12\x12\n\nes_version\x18\x15"
+    b' \x01(\t"\x9a\x02\n\nVNodeState\x12\x10\n\x0cInitializing\x10\x00\x12\x12\n\x0e\x44iscoverLeader\x10\x01\x12\x0b\n\x07Unknown\x10\x02\x12\x0e\n\nPreReplica\x10\x03\x12\x0e\n\nCatchingUp\x10\x04\x12\t\n\x05\x43lone\x10\x05\x12\x0c\n\x08\x46ollower\x10\x06\x12\r\n\tPreLeader\x10\x07\x12\n\n\x06Leader\x10\x08\x12\x0b\n\x07Manager\x10\t\x12\x10\n\x0cShuttingDown\x10\n\x12\x0c\n\x08Shutdown\x10\x0b\x12\x16\n\x12ReadOnlyLeaderless\x10\x0c\x12\x16\n\x12PreReadOnlyReplica\x10\r\x12\x13\n\x0fReadOnlyReplica\x10\x0e\x12\x13\n\x0fResigningLeader\x10\x0f";\n\x0fReplicaLogWrite\x12\x14\n\x0clog_position\x18\x01'
     b" \x01(\x03\x12\x12\n\nreplica_id\x18\x02"
     b' \x01(\x0c"$\n\x0cReplicatedTo\x12\x14\n\x0clog_position\x18\x01'
     b' \x01(\x03"G\n\x05\x45poch\x12\x16\n\x0e\x65poch_position\x18\x01'
     b" \x01(\x03\x12\x14\n\x0c\x65poch_number\x18\x02"
     b" \x01(\x05\x12\x10\n\x08\x65poch_id\x18\x03"
-    b' \x01(\x0c"\xc7\x01\n\x10SubscribeReplica\x12\x14\n\x0clog_position\x18\x01'
+    b' \x01(\x0c"\xd8\x01\n\x10SubscribeReplica\x12\x14\n\x0clog_position\x18\x01'
     b" \x01(\x03\x12\x10\n\x08\x63hunk_id\x18\x02 \x01(\x0c\x12.\n\nLastEpochs\x18\x03"
     b" \x03(\x0b\x32\x1a.event_store.cluster.Epoch\x12\n\n\x02ip\x18\x04"
     b" \x01(\x0c\x12\x0c\n\x04port\x18\x05 \x01(\x05\x12\x11\n\tleader_id\x18\x06"
     b" \x01(\x0c\x12\x17\n\x0fsubscription_id\x18\x07"
-    b" \x01(\x0c\x12\x15\n\ris_promotable\x18\x08"
-    b' \x01(\x08"F\n\x18ReplicaSubscriptionRetry\x12\x11\n\tleader_id\x18\x01'
+    b" \x01(\x0c\x12\x15\n\ris_promotable\x18\x08 \x01(\x08\x12\x0f\n\x07version\x18\t"
+    b' \x01(\x05"F\n\x18ReplicaSubscriptionRetry\x12\x11\n\tleader_id\x18\x01'
     b" \x01(\x0c\x12\x17\n\x0fsubscription_id\x18\x02"
     b' \x01(\x0c"^\n\x11ReplicaSubscribed\x12\x11\n\tleader_id\x18\x01'
     b" \x01(\x0c\x12\x17\n\x0fsubscription_id\x18\x02"
     b" \x01(\x0c\x12\x1d\n\x15subscription_position\x18\x03"
-    b' \x01(\x03"R\n\x15ReplicaLogPositionAck\x12\x17\n\x0fsubscription_id\x18\x01'
+    b' \x01(\x03"o\n\x15ReplicaLogPositionAck\x12\x17\n\x0fsubscription_id\x18\x01'
     b" \x01(\x0c\x12 \n\x18replication_log_position\x18\x02"
+    b" \x01(\x03\x12\x1b\n\x13writer_log_position\x18\x03"
     b' \x01(\x03"\x84\x01\n\x0b\x43reateChunk\x12\x11\n\tleader_id\x18\x01'
     b" \x01(\x0c\x12\x17\n\x0fsubscription_id\x18\x02"
     b" \x01(\x0c\x12\x1a\n\x12\x63hunk_header_bytes\x18\x03"
     b" \x01(\x0c\x12\x11\n\tfile_size\x18\x04"
     b" \x01(\x05\x12\x1a\n\x12is_completed_chunk\x18\x05"
     b' \x01(\x08"\xb1\x01\n\x0cRawChunkBulk\x12\x11\n\tleader_id\x18\x01'
     b" \x01(\x0c\x12\x17\n\x0fsubscription_id\x18\x02"
@@ -164,41 +166,41 @@
     _LEADERISRESIGNINGOKREQUEST._serialized_start = 1912
     _LEADERISRESIGNINGOKREQUEST._serialized_end = 2134
     _CLUSTERINFO._serialized_start = 2136
     _CLUSTERINFO._serialized_end = 2199
     _ENDPOINT._serialized_start = 2201
     _ENDPOINT._serialized_end = 2242
     _MEMBERINFO._serialized_start = 2245
-    _MEMBERINFO._serialized_end = 3256
-    _MEMBERINFO_VNODESTATE._serialized_start = 2974
-    _MEMBERINFO_VNODESTATE._serialized_end = 3256
-    _REPLICALOGWRITE._serialized_start = 3258
-    _REPLICALOGWRITE._serialized_end = 3317
-    _REPLICATEDTO._serialized_start = 3319
-    _REPLICATEDTO._serialized_end = 3355
-    _EPOCH._serialized_start = 3357
-    _EPOCH._serialized_end = 3428
-    _SUBSCRIBEREPLICA._serialized_start = 3431
-    _SUBSCRIBEREPLICA._serialized_end = 3630
-    _REPLICASUBSCRIPTIONRETRY._serialized_start = 3632
-    _REPLICASUBSCRIPTIONRETRY._serialized_end = 3702
-    _REPLICASUBSCRIBED._serialized_start = 3704
-    _REPLICASUBSCRIBED._serialized_end = 3798
-    _REPLICALOGPOSITIONACK._serialized_start = 3800
-    _REPLICALOGPOSITIONACK._serialized_end = 3882
-    _CREATECHUNK._serialized_start = 3885
-    _CREATECHUNK._serialized_end = 4017
-    _RAWCHUNKBULK._serialized_start = 4020
-    _RAWCHUNKBULK._serialized_end = 4197
-    _DATACHUNKBULK._serialized_start = 4200
-    _DATACHUNKBULK._serialized_end = 4388
-    _FOLLOWERASSIGNMENT._serialized_start = 4390
-    _FOLLOWERASSIGNMENT._serialized_end = 4454
-    _CLONEASSIGNMENT._serialized_start = 4456
-    _CLONEASSIGNMENT._serialized_end = 4517
-    _DROPSUBSCRIPTION._serialized_start = 4519
-    _DROPSUBSCRIPTION._serialized_end = 4581
-    _GOSSIP._serialized_start = 4584
-    _GOSSIP._serialized_end = 4741
-    _ELECTIONS._serialized_start = 4744
-    _ELECTIONS._serialized_end = 5425
+    _MEMBERINFO._serialized_end = 3276
+    _MEMBERINFO_VNODESTATE._serialized_start = 2994
+    _MEMBERINFO_VNODESTATE._serialized_end = 3276
+    _REPLICALOGWRITE._serialized_start = 3278
+    _REPLICALOGWRITE._serialized_end = 3337
+    _REPLICATEDTO._serialized_start = 3339
+    _REPLICATEDTO._serialized_end = 3375
+    _EPOCH._serialized_start = 3377
+    _EPOCH._serialized_end = 3448
+    _SUBSCRIBEREPLICA._serialized_start = 3451
+    _SUBSCRIBEREPLICA._serialized_end = 3667
+    _REPLICASUBSCRIPTIONRETRY._serialized_start = 3669
+    _REPLICASUBSCRIPTIONRETRY._serialized_end = 3739
+    _REPLICASUBSCRIBED._serialized_start = 3741
+    _REPLICASUBSCRIBED._serialized_end = 3835
+    _REPLICALOGPOSITIONACK._serialized_start = 3837
+    _REPLICALOGPOSITIONACK._serialized_end = 3948
+    _CREATECHUNK._serialized_start = 3951
+    _CREATECHUNK._serialized_end = 4083
+    _RAWCHUNKBULK._serialized_start = 4086
+    _RAWCHUNKBULK._serialized_end = 4263
+    _DATACHUNKBULK._serialized_start = 4266
+    _DATACHUNKBULK._serialized_end = 4454
+    _FOLLOWERASSIGNMENT._serialized_start = 4456
+    _FOLLOWERASSIGNMENT._serialized_end = 4520
+    _CLONEASSIGNMENT._serialized_start = 4522
+    _CLONEASSIGNMENT._serialized_end = 4583
+    _DROPSUBSCRIPTION._serialized_start = 4585
+    _DROPSUBSCRIPTION._serialized_end = 4647
+    _GOSSIP._serialized_start = 4650
+    _GOSSIP._serialized_end = 4807
+    _ELECTIONS._serialized_start = 4810
+    _ELECTIONS._serialized_end = 5491
 # @@protoc_insertion_point(module_scope)
```

### Comparing `esdbclient-1.0a1/esdbclient/protos/Grpc/cluster_pb2.pyi` & `esdbclient-1.0a2/esdbclient/protos/Grpc/cluster_pb2.pyi`

 * *Files 0% similar despite different names*

```diff
@@ -609,14 +609,15 @@
     EPOCH_NUMBER_FIELD_NUMBER: builtins.int
     EPOCH_ID_FIELD_NUMBER: builtins.int
     NODE_PRIORITY_FIELD_NUMBER: builtins.int
     IS_READ_ONLY_REPLICA_FIELD_NUMBER: builtins.int
     ADVERTISE_HOST_TO_CLIENT_AS_FIELD_NUMBER: builtins.int
     ADVERTISE_HTTP_PORT_TO_CLIENT_AS_FIELD_NUMBER: builtins.int
     ADVERTISE_TCP_PORT_TO_CLIENT_AS_FIELD_NUMBER: builtins.int
+    ES_VERSION_FIELD_NUMBER: builtins.int
     @property
     def instance_id(self) -> esdbclient.protos.Grpc.shared_pb2.UUID: ...
     time_stamp: builtins.int
     state: global___MemberInfo.VNodeState.ValueType
     is_alive: builtins.bool
     @property
     def http_end_point(self) -> global___EndPoint: ...
@@ -634,14 +635,15 @@
     @property
     def epoch_id(self) -> esdbclient.protos.Grpc.shared_pb2.UUID: ...
     node_priority: builtins.int
     is_read_only_replica: builtins.bool
     advertise_host_to_client_as: builtins.str
     advertise_http_port_to_client_as: builtins.int
     advertise_tcp_port_to_client_as: builtins.int
+    es_version: builtins.str
     def __init__(
         self,
         *,
         instance_id: esdbclient.protos.Grpc.shared_pb2.UUID | None = ...,
         time_stamp: builtins.int = ...,
         state: global___MemberInfo.VNodeState.ValueType = ...,
         is_alive: builtins.bool = ...,
@@ -657,14 +659,15 @@
         epoch_number: builtins.int = ...,
         epoch_id: esdbclient.protos.Grpc.shared_pb2.UUID | None = ...,
         node_priority: builtins.int = ...,
         is_read_only_replica: builtins.bool = ...,
         advertise_host_to_client_as: builtins.str = ...,
         advertise_http_port_to_client_as: builtins.int = ...,
         advertise_tcp_port_to_client_as: builtins.int = ...,
+        es_version: builtins.str = ...,
     ) -> None: ...
     def HasField(
         self,
         field_name: typing_extensions.Literal[
             "epoch_id",
             b"epoch_id",
             "external_tcp",
@@ -690,14 +693,16 @@
             b"chaser_checkpoint",
             "epoch_id",
             b"epoch_id",
             "epoch_number",
             b"epoch_number",
             "epoch_position",
             b"epoch_position",
+            "es_version",
+            b"es_version",
             "external_tcp",
             b"external_tcp",
             "external_tcp_uses_tls",
             b"external_tcp_uses_tls",
             "http_end_point",
             b"http_end_point",
             "instance_id",
@@ -804,38 +809,41 @@
     CHUNK_ID_FIELD_NUMBER: builtins.int
     LASTEPOCHS_FIELD_NUMBER: builtins.int
     IP_FIELD_NUMBER: builtins.int
     PORT_FIELD_NUMBER: builtins.int
     LEADER_ID_FIELD_NUMBER: builtins.int
     SUBSCRIPTION_ID_FIELD_NUMBER: builtins.int
     IS_PROMOTABLE_FIELD_NUMBER: builtins.int
+    VERSION_FIELD_NUMBER: builtins.int
     log_position: builtins.int
     chunk_id: builtins.bytes
     @property
     def LastEpochs(
         self,
     ) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[
         global___Epoch
     ]: ...
     ip: builtins.bytes
     port: builtins.int
     leader_id: builtins.bytes
     subscription_id: builtins.bytes
     is_promotable: builtins.bool
+    version: builtins.int
     def __init__(
         self,
         *,
         log_position: builtins.int = ...,
         chunk_id: builtins.bytes = ...,
         LastEpochs: collections.abc.Iterable[global___Epoch] | None = ...,
         ip: builtins.bytes = ...,
         port: builtins.int = ...,
         leader_id: builtins.bytes = ...,
         subscription_id: builtins.bytes = ...,
         is_promotable: builtins.bool = ...,
+        version: builtins.int = ...,
     ) -> None: ...
     def ClearField(
         self,
         field_name: typing_extensions.Literal[
             "LastEpochs",
             b"LastEpochs",
             "chunk_id",
@@ -848,14 +856,16 @@
             b"leader_id",
             "log_position",
             b"log_position",
             "port",
             b"port",
             "subscription_id",
             b"subscription_id",
+            "version",
+            b"version",
         ],
     ) -> None: ...
 
 global___SubscribeReplica = SubscribeReplica
 
 @typing_extensions.final
 class ReplicaSubscriptionRetry(google.protobuf.message.Message):
@@ -913,29 +923,34 @@
 
 @typing_extensions.final
 class ReplicaLogPositionAck(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     SUBSCRIPTION_ID_FIELD_NUMBER: builtins.int
     REPLICATION_LOG_POSITION_FIELD_NUMBER: builtins.int
+    WRITER_LOG_POSITION_FIELD_NUMBER: builtins.int
     subscription_id: builtins.bytes
     replication_log_position: builtins.int
+    writer_log_position: builtins.int
     def __init__(
         self,
         *,
         subscription_id: builtins.bytes = ...,
         replication_log_position: builtins.int = ...,
+        writer_log_position: builtins.int = ...,
     ) -> None: ...
     def ClearField(
         self,
         field_name: typing_extensions.Literal[
             "replication_log_position",
             b"replication_log_position",
             "subscription_id",
             b"subscription_id",
+            "writer_log_position",
+            b"writer_log_position",
         ],
     ) -> None: ...
 
 global___ReplicaLogPositionAck = ReplicaLogPositionAck
 
 @typing_extensions.final
 class CreateChunk(google.protobuf.message.Message):
```

### Comparing `esdbclient-1.0a1/esdbclient/protos/Grpc/cluster_pb2_grpc.py` & `esdbclient-1.0a2/esdbclient/protos/Grpc/cluster_pb2_grpc.py`

 * *Files identical despite different names*

### Comparing `esdbclient-1.0a1/esdbclient/protos/Grpc/code_pb2.py` & `esdbclient-1.0a2/esdbclient/protos/Grpc/code_pb2.py`

 * *Files identical despite different names*

### Comparing `esdbclient-1.0a1/esdbclient/protos/Grpc/code_pb2.pyi` & `esdbclient-1.0a2/esdbclient/protos/Grpc/code_pb2.pyi`

 * *Files identical despite different names*

### Comparing `esdbclient-1.0a1/esdbclient/protos/Grpc/gossip_pb2.py` & `esdbclient-1.0a2/esdbclient/protos/Grpc/gossip_pb2.py`

 * *Files identical despite different names*

### Comparing `esdbclient-1.0a1/esdbclient/protos/Grpc/gossip_pb2.pyi` & `esdbclient-1.0a2/esdbclient/protos/Grpc/gossip_pb2.pyi`

 * *Files identical despite different names*

### Comparing `esdbclient-1.0a1/esdbclient/protos/Grpc/gossip_pb2_grpc.py` & `esdbclient-1.0a2/esdbclient/protos/Grpc/gossip_pb2_grpc.py`

 * *Files identical despite different names*

### Comparing `esdbclient-1.0a1/esdbclient/protos/Grpc/persistent_pb2.py` & `esdbclient-1.0a2/esdbclient/protos/Grpc/persistent_pb2.py`

 * *Files identical despite different names*

### Comparing `esdbclient-1.0a1/esdbclient/protos/Grpc/persistent_pb2.pyi` & `esdbclient-1.0a2/esdbclient/protos/Grpc/persistent_pb2.pyi`

 * *Files identical despite different names*

### Comparing `esdbclient-1.0a1/esdbclient/protos/Grpc/persistent_pb2_grpc.py` & `esdbclient-1.0a2/esdbclient/protos/Grpc/persistent_pb2_grpc.py`

 * *Files identical despite different names*

### Comparing `esdbclient-1.0a1/esdbclient/protos/Grpc/shared_pb2.py` & `esdbclient-1.0a2/esdbclient/protos/Grpc/shared_pb2.py`

 * *Files identical despite different names*

### Comparing `esdbclient-1.0a1/esdbclient/protos/Grpc/shared_pb2.pyi` & `esdbclient-1.0a2/esdbclient/protos/Grpc/shared_pb2.pyi`

 * *Files identical despite different names*

### Comparing `esdbclient-1.0a1/esdbclient/protos/Grpc/status_pb2.py` & `esdbclient-1.0a2/esdbclient/protos/Grpc/status_pb2.py`

 * *Files identical despite different names*

### Comparing `esdbclient-1.0a1/esdbclient/protos/Grpc/status_pb2.pyi` & `esdbclient-1.0a2/esdbclient/protos/Grpc/status_pb2.pyi`

 * *Files identical despite different names*

### Comparing `esdbclient-1.0a1/esdbclient/protos/Grpc/streams_pb2.py` & `esdbclient-1.0a2/esdbclient/protos/Grpc/streams_pb2.py`

 * *Files identical despite different names*

### Comparing `esdbclient-1.0a1/esdbclient/protos/Grpc/streams_pb2.pyi` & `esdbclient-1.0a2/esdbclient/protos/Grpc/streams_pb2.pyi`

 * *Files identical despite different names*

### Comparing `esdbclient-1.0a1/esdbclient/protos/Grpc/streams_pb2_grpc.py` & `esdbclient-1.0a2/esdbclient/protos/Grpc/streams_pb2_grpc.py`

 * *Files identical despite different names*

### Comparing `esdbclient-1.0a1/pyproject.toml` & `esdbclient-1.0a2/pyproject.toml`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 [tool.poetry]
 name = "esdbclient"
-version = "1.0a1"
+version = "1.0a2"
 description = "Python gRPC Client for EventStoreDB"
 authors = [
     "John Bywater <john.bywater@appropriatesoftware.net>",
 ]
 license = "BSD 3-Clause"
 classifiers = [
     "Development Status :: 3 - Alpha",
@@ -45,14 +45,16 @@
 pre-commit-hooks = "*"
 pytest = "*"
 pytest-cov = "*"
 grpcio-tools = "*"
 grpc-stubs = "*"
 types-protobuf = "*"
 mypy-protobuf = "*"
+async-case = {version = "^10.1.0", python = "<=3.8"}
+
 
 [build-system]
 requires = ["poetry-core>=1.0.0"]
 build-backend = "poetry.core.masonry.api"
 
 [tool.black]
 line-length = 88
```

### Comparing `esdbclient-1.0a1/setup.py` & `esdbclient-1.0a2/setup.py`

 * *Files 2% similar despite different names*

```diff
@@ -14,5585 +14,5992 @@
 000000d0: 2e35 322e 2a27 2c0a 2027 7072 6f74 6f62  .52.*',. 'protob
 000000e0: 7566 3e3d 332e 3131 2e30 272c 0a20 2774  uf>=3.11.0',. 't
 000000f0: 7970 696e 675f 6578 7465 6e73 696f 6e73  yping_extensions
 00000100: 275d 0a0a 7365 7475 705f 6b77 6172 6773  ']..setup_kwargs
 00000110: 203d 207b 0a20 2020 2027 6e61 6d65 273a   = {.    'name':
 00000120: 2027 6573 6462 636c 6965 6e74 272c 0a20   'esdbclient',. 
 00000130: 2020 2027 7665 7273 696f 6e27 3a20 2731     'version': '1
-00000140: 2e30 6131 272c 0a20 2020 2027 6465 7363  .0a1',.    'desc
+00000140: 2e30 6132 272c 0a20 2020 2027 6465 7363  .0a2',.    'desc
 00000150: 7269 7074 696f 6e27 3a20 2750 7974 686f  ription': 'Pytho
 00000160: 6e20 6752 5043 2043 6c69 656e 7420 666f  n gRPC Client fo
 00000170: 7220 4576 656e 7453 746f 7265 4442 272c  r EventStoreDB',
 00000180: 0a20 2020 2027 6c6f 6e67 5f64 6573 6372  .    'long_descr
-00000190: 6970 7469 6f6e 273a 2027 2320 5079 7468  iption': '# Pyth
-000001a0: 6f6e 2067 5250 4320 436c 6965 6e74 2066  on gRPC Client f
-000001b0: 6f72 2045 7665 6e74 5374 6f72 6544 425c  or EventStoreDB\
-000001c0: 6e5c 6e54 6869 7320 5b50 7974 686f 6e20  n\nThis [Python 
-000001d0: 7061 636b 6167 655d 2868 7474 7073 3a2f  package](https:/
-000001e0: 2f70 7970 692e 6f72 672f 7072 6f6a 6563  /pypi.org/projec
-000001f0: 742f 6573 6462 636c 6965 6e74 2f29 2070  t/esdbclient/) p
-00000200: 726f 7669 6465 7320 6120 5079 7468 6f6e  rovides a Python
-00000210: 5c6e 6752 5043 2063 6c69 656e 7420 666f  \ngRPC client fo
-00000220: 7220 5b45 7665 6e74 5374 6f72 6544 425d  r [EventStoreDB]
-00000230: 2868 7474 7073 3a2f 2f77 7777 2e65 7665  (https://www.eve
-00000240: 6e74 7374 6f72 652e 636f 6d2f 292e 5c6e  ntstore.com/).\n
-00000250: 5c6e 5468 6973 2063 6c69 656e 7420 6861  \nThis client ha
-00000260: 7320 6265 656e 2064 6576 656c 6f70 6564  s been developed
-00000270: 2069 6e20 636f 6c6c 6162 6f72 6174 696f   in collaboratio
-00000280: 6e20 7769 7468 2074 6865 2045 7665 6e74  n with the Event
-00000290: 5374 6f72 6544 425c 6e74 6561 6d2e 2041  StoreDB\nteam. A
-000002a0: 6c74 686f 7567 6820 6e6f 7420 616c 6c20  lthough not all 
-000002b0: 7468 6520 6665 6174 7572 6573 206f 6620  the features of 
-000002c0: 4576 656e 7453 746f 7265 4442 2061 7265  EventStoreDB are
-000002d0: 2073 7570 706f 7274 6564 5c6e 6279 2074   supported\nby t
-000002e0: 6869 7320 636c 6965 6e74 2c20 6d61 6e79  his client, many
-000002f0: 206f 6620 7468 6520 6d6f 7374 2075 7365   of the most use
-00000300: 6675 6c20 6f6e 6573 2061 7265 2070 7265  ful ones are pre
-00000310: 7365 6e74 6564 5c6e 696e 2061 6e20 6561  sented\nin an ea
-00000320: 7379 2d74 6f2d 7573 6520 696e 7465 7266  sy-to-use interf
-00000330: 6163 652e 5c6e 5c6e 5468 6973 2063 6c69  ace.\n\nThis cli
-00000340: 656e 7420 6861 7320 6265 656e 2074 6573  ent has been tes
-00000350: 7465 6420 746f 2077 6f72 6b20 7769 7468  ted to work with
-00000360: 2045 7665 6e74 5374 6f72 6544 4220 4c54   EventStoreDB LT
-00000370: 5320 7665 7273 696f 6e73 2032 312e 3130  S versions 21.10
-00000380: 2c5c 6e77 6974 686f 7574 2061 6e64 2077  ,\nwithout and w
-00000390: 6974 686f 7574 2053 534c 2f54 4c53 2c20  ithout SSL/TLS, 
-000003a0: 616e 6420 7769 7468 2050 7974 686f 6e20  and with Python 
-000003b0: 7665 7273 696f 6e73 2033 2e37 2074 6f20  versions 3.7 to 
-000003c0: 332e 3131 2e20 5468 6572 655c 6e69 7320  3.11. There\nis 
-000003d0: 3130 3025 2074 6573 7420 636f 7665 7261  100% test covera
-000003e0: 6765 2e20 5468 6520 636f 6465 2068 6173  ge. The code has
-000003f0: 2074 7970 696e 6720 616e 6e6f 7461 7469   typing annotati
-00000400: 6f6e 732c 2063 6865 636b 6564 2077 6974  ons, checked wit
-00000410: 6820 6d79 7079 2e5c 6e54 6865 2063 6f64  h mypy.\nThe cod
-00000420: 6520 6973 2066 6f72 6d61 7474 6564 2077  e is formatted w
-00000430: 6974 6820 626c 6163 6b20 616e 6420 6973  ith black and is
-00000440: 6f72 742c 2061 6e64 2063 6865 636b 6564  ort, and checked
-00000450: 2077 6974 6820 666c 616b 6538 2e20 506f   with flake8. Po
-00000460: 6574 7279 5c6e 6973 2075 7365 6420 666f  etry\nis used fo
-00000470: 7220 7061 636b 6167 6520 6d61 6e61 6765  r package manage
-00000480: 6d65 6e74 2064 7572 696e 6720 6465 7665  ment during deve
-00000490: 6c6f 706d 656e 742c 2061 6e64 2066 6f72  lopment, and for
-000004a0: 2062 7569 6c64 696e 6720 616e 645c 6e70   building and\np
-000004b0: 7562 6c69 7368 696e 6720 6469 7374 7269  ublishing distri
-000004c0: 6275 7469 6f6e 7320 746f 205b 5079 5049  butions to [PyPI
-000004d0: 5d28 6874 7470 733a 2f2f 7079 7069 2e6f  ](https://pypi.o
-000004e0: 7267 2f70 726f 6a65 6374 2f65 7364 6263  rg/project/esdbc
-000004f0: 6c69 656e 742f 292e 5c6e 5c6e 2323 2053  lient/).\n\n## S
-00000500: 796e 6f70 7369 735c 6e5c 6e54 6865 2060  ynopsis\n\nThe `
-00000510: 4553 4442 436c 6965 6e74 6020 636c 6173  ESDBClient` clas
-00000520: 7320 6361 6e20 6265 2069 6d70 6f72 7465  s can be importe
-00000530: 6420 6672 6f6d 2074 6865 2060 6573 6462  d from the `esdb
-00000540: 636c 6965 6e74 6020 7061 636b 6167 652e  client` package.
-00000550: 5c6e 5c6e 546f 2072 756e 2074 6865 2063  \n\nTo run the c
-00000560: 6c69 656e 742c 2079 6f75 2077 696c 6c20  lient, you will 
-00000570: 6e65 6564 2061 2063 6f6e 6e65 6374 696f  need a connectio
-00000580: 6e20 7374 7269 6e67 2055 5249 2e20 416e  n string URI. An
-00000590: 642c 2074 6f5c 6e63 6f6e 6e65 6374 2074  d, to\nconnect t
-000005a0: 6f20 6120 2273 6563 7572 6522 2045 7665  o a "secure" Eve
-000005b0: 6e74 5374 6f72 6544 4220 7365 7276 6572  ntStoreDB server
-000005c0: 2c20 796f 7520 7769 6c6c 2061 6c73 6f20  , you will also 
-000005d0: 6e65 6564 2061 6e5c 6e53 534c 2f54 4c53  need an\nSSL/TLS
-000005e0: 2063 6572 7469 6669 6361 7465 2e5c 6e5c   certificate.\n\
-000005f0: 6e50 726f 6261 626c 7920 7468 6520 7468  nProbably the th
-00000600: 7265 6520 6d6f 7374 2075 7365 6675 6c20  ree most useful 
-00000610: 6d65 7468 6f64 7320 6f66 2060 4553 4442  methods of `ESDB
-00000620: 436c 6965 6e74 6020 6172 653a 5c6e 5c6e  Client` are:\n\n
-00000630: 2a20 6061 7070 656e 645f 6576 656e 7473  * `append_events
-00000640: 2829 6020 5468 6973 206d 6574 686f 6420  ()` This method 
-00000650: 6361 6e20 6265 2075 7365 6420 746f 2072  can be used to r
-00000660: 6563 6f72 645c 6e65 7665 6e74 7320 696e  ecord\nevents in
-00000670: 2061 2070 6172 7469 6375 6c61 7220 2273   a particular "s
-00000680: 7472 6561 6d22 2e20 5468 6973 2069 7320  tream". This is 
-00000690: 7573 6566 756c 2077 6865 6e20 6578 6563  useful when exec
-000006a0: 7574 696e 6720 6120 636f 6d6d 616e 645c  uting a command\
-000006b0: 6e69 6e20 616e 2061 7070 6c69 6361 7469  nin an applicati
-000006c0: 6f6e 2e20 4569 7468 6572 2061 6c6c 206f  on. Either all o
-000006d0: 7220 6e6f 6e65 206f 6620 7468 6520 6576  r none of the ev
-000006e0: 656e 7473 2077 696c 6c20 6265 2072 6563  ents will be rec
-000006f0: 6f72 6465 642e 5c6e 5c6e 2a20 6072 6561  orded.\n\n* `rea
-00000700: 645f 7374 7265 616d 5f65 7665 6e74 7328  d_stream_events(
-00000710: 2960 2054 6869 7320 6d65 7468 6f64 2063  )` This method c
-00000720: 616e 2062 6520 7573 6564 2074 6f20 7265  an be used to re
-00000730: 7472 6965 7665 2061 6c6c 2074 6865 2072  trieve all the r
-00000740: 6563 6f72 6465 645c 6e65 7665 6e74 7320  ecorded\nevents 
-00000750: 696e 2061 2022 7374 7265 616d 222e 2054  in a "stream". T
-00000760: 6869 7320 6973 2075 7365 6675 6c20 666f  his is useful fo
-00000770: 7220 7265 636f 6e73 7472 7563 7469 6e67  r reconstructing
-00000780: 2061 6e20 6167 6772 6567 6174 6520 6265   an aggregate be
-00000790: 666f 7265 5c6e 6578 6563 7574 696e 6720  fore\nexecuting 
-000007a0: 6120 636f 6d6d 616e 6420 696e 2061 6e20  a command in an 
-000007b0: 6170 706c 6963 6174 696f 6e2e 5c6e 5c6e  application.\n\n
-000007c0: 2a20 6073 7562 7363 7269 6265 5f61 6c6c  * `subscribe_all
-000007d0: 5f65 7665 6e74 7328 2960 2054 6869 7320  _events()` This 
-000007e0: 6d65 7468 6f64 2063 616e 2062 6520 7573  method can be us
-000007f0: 6564 2074 6f20 7265 6365 6976 6520 616c  ed to receive al
-00000800: 6c20 7265 636f 7264 6564 5c6e 6576 656e  l recorded\neven
-00000810: 7473 2061 6372 6f73 7320 616c 6c20 2273  ts across all "s
-00000820: 7472 6561 6d73 222e 2054 6869 7320 6973  treams". This is
-00000830: 2075 7365 6675 6c20 696e 2065 7665 6e74   useful in event
-00000840: 2d70 726f 6365 7373 696e 6720 636f 6d70  -processing comp
-00000850: 6f6e 656e 7473 2c5c 6e61 6e64 2073 7570  onents,\nand sup
-00000860: 706f 7274 7320 7072 6f63 6573 7369 6e67  ports processing
-00000870: 2065 7665 6e74 7320 7769 7468 2022 6578   events with "ex
-00000880: 6163 746c 792d 6f6e 6365 2220 7365 6d61  actly-once" sema
-00000890: 6e74 6963 732e 5c6e 5c6e 5468 6520 6578  ntics.\n\nThe ex
-000008a0: 616d 706c 6520 6265 6c6f 7720 7573 6573  ample below uses
-000008b0: 2061 6e20 2269 6e73 6563 7572 6522 2045   an "insecure" E
-000008c0: 7665 6e74 5374 6f72 6544 4220 7365 7276  ventStoreDB serv
-000008d0: 6572 2072 756e 6e69 6e67 206c 6f63 616c  er running local
-000008e0: 6c79 206f 6e20 706f 7274 2032 3131 342e  ly on port 2114.
-000008f0: 5c6e 5c6e 6060 6070 7974 686f 6e5c 6e69  \n\n```python\ni
-00000900: 6d70 6f72 7420 6573 6462 636c 6965 6e74  mport esdbclient
-00000910: 2c20 7575 6964 5c6e 5c6e 5c6e 2320 436f  , uuid\n\n\n# Co
-00000920: 6e73 7472 7563 7420 4553 4442 436c 6965  nstruct ESDBClie
-00000930: 6e74 2077 6974 6820 616e 2045 7665 6e74  nt with an Event
-00000940: 5374 6f72 6544 4220 5552 492e 5c6e 5c6e  StoreDB URI.\n\n
-00000950: 636c 6965 6e74 203d 2065 7364 6263 6c69  client = esdbcli
-00000960: 656e 742e 4553 4442 436c 6965 6e74 2875  ent.ESDBClient(u
-00000970: 7269 3d22 6573 6462 3a2f 2f6c 6f63 616c  ri="esdb://local
-00000980: 686f 7374 3a32 3131 343f 546c 733d 6661  host:2114?Tls=fa
-00000990: 6c73 6522 295c 6e5c 6e5c 6e23 2041 7070  lse")\n\n\n# App
-000009a0: 656e 6420 6576 656e 7473 2074 6f20 6120  end events to a 
-000009b0: 6e65 7720 7374 7265 616d 2e5c 6e5c 6e73  new stream.\n\ns
-000009c0: 7472 6561 6d5f 6e61 6d65 203d 2073 7472  tream_name = str
-000009d0: 2875 7569 642e 7575 6964 3428 2929 5c6e  (uuid.uuid4())\n
-000009e0: 5c6e 6576 656e 7431 203d 2065 7364 6263  \nevent1 = esdbc
-000009f0: 6c69 656e 742e 4e65 7745 7665 6e74 2874  lient.NewEvent(t
-00000a00: 7970 653d 5c27 4f72 6465 7243 7265 6174  ype=\'OrderCreat
-00000a10: 6564 5c27 2c20 6461 7461 3d62 5c27 6461  ed\', data=b\'da
-00000a20: 7461 315c 2729 5c6e 5c6e 636c 6965 6e74  ta1\')\n\nclient
-00000a30: 2e61 7070 656e 645f 6576 656e 7473 285c  .append_events(\
-00000a40: 6e20 2020 2073 7472 6561 6d5f 6e61 6d65  n    stream_name
-00000a50: 3d73 7472 6561 6d5f 6e61 6d65 2c5c 6e20  =stream_name,\n 
-00000a60: 2020 2065 7870 6563 7465 645f 706f 7369     expected_posi
-00000a70: 7469 6f6e 3d4e 6f6e 652c 5c6e 2020 2020  tion=None,\n    
-00000a80: 6576 656e 7473 3d5b 6576 656e 7431 5d2c  events=[event1],
-00000a90: 5c6e 295c 6e5c 6e5c 6e23 2041 7070 656e  \n)\n\n\n# Appen
-00000aa0: 6420 6d6f 7265 2065 7665 6e74 7320 746f  d more events to
-00000ab0: 2061 6e20 6578 6973 7469 6e67 2073 7472   an existing str
-00000ac0: 6561 6d2e 5c6e 5c6e 6576 656e 7432 203d  eam.\n\nevent2 =
-00000ad0: 2065 7364 6263 6c69 656e 742e 4e65 7745   esdbclient.NewE
-00000ae0: 7665 6e74 2874 7970 653d 5c27 4f72 6465  vent(type=\'Orde
-00000af0: 7255 7064 6174 6564 5c27 2c20 6461 7461  rUpdated\', data
-00000b00: 3d62 5c27 6461 7461 325c 2729 5c6e 6576  =b\'data2\')\nev
-00000b10: 656e 7433 203d 2065 7364 6263 6c69 656e  ent3 = esdbclien
-00000b20: 742e 4e65 7745 7665 6e74 2874 7970 653d  t.NewEvent(type=
-00000b30: 5c27 4f72 6465 7244 656c 6574 6564 5c27  \'OrderDeleted\'
-00000b40: 2c20 6461 7461 3d62 5c27 6461 7461 335c  , data=b\'data3\
-00000b50: 2729 5c6e 5c6e 636c 6965 6e74 2e61 7070  ')\n\nclient.app
-00000b60: 656e 645f 6576 656e 7473 285c 6e20 2020  end_events(\n   
-00000b70: 2073 7472 6561 6d5f 6e61 6d65 3d73 7472   stream_name=str
-00000b80: 6561 6d5f 6e61 6d65 2c5c 6e20 2020 2065  eam_name,\n    e
-00000b90: 7870 6563 7465 645f 706f 7369 7469 6f6e  xpected_position
-00000ba0: 3d30 2c5c 6e20 2020 2065 7665 6e74 733d  =0,\n    events=
-00000bb0: 5b65 7665 6e74 322c 2065 7665 6e74 335d  [event2, event3]
-00000bc0: 2c5c 6e29 5c6e 5c6e 5c6e 2320 5265 6164  ,\n)\n\n\n# Read
-00000bd0: 2061 6c6c 2065 7665 6e74 7320 7265 636f   all events reco
-00000be0: 7264 6564 2069 6e20 6120 7374 7265 616d  rded in a stream
-00000bf0: 2e5c 6e5c 6e72 6563 6f72 6465 6420 3d20  .\n\nrecorded = 
-00000c00: 6c69 7374 285c 6e20 2020 2063 6c69 656e  list(\n    clien
-00000c10: 742e 7265 6164 5f73 7472 6561 6d5f 6576  t.read_stream_ev
-00000c20: 656e 7473 285c 6e20 2020 2020 2020 2073  ents(\n        s
-00000c30: 7472 6561 6d5f 6e61 6d65 3d73 7472 6561  tream_name=strea
-00000c40: 6d5f 6e61 6d65 5c6e 2020 2020 295c 6e29  m_name\n    )\n)
-00000c50: 5c6e 5c6e 6173 7365 7274 206c 656e 2872  \n\nassert len(r
-00000c60: 6563 6f72 6465 6429 203d 3d20 335c 6e61  ecorded) == 3\na
-00000c70: 7373 6572 7420 7265 636f 7264 6564 5b30  ssert recorded[0
-00000c80: 5d2e 6461 7461 203d 3d20 6576 656e 7431  ].data == event1
-00000c90: 2e64 6174 615c 6e61 7373 6572 7420 7265  .data\nassert re
-00000ca0: 636f 7264 6564 5b31 5d2e 6461 7461 203d  corded[1].data =
-00000cb0: 3d20 6576 656e 7432 2e64 6174 615c 6e61  = event2.data\na
-00000cc0: 7373 6572 7420 7265 636f 7264 6564 5b32  ssert recorded[2
-00000cd0: 5d2e 6461 7461 203d 3d20 6576 656e 7433  ].data == event3
-00000ce0: 2e64 6174 615c 6e61 7373 6572 7420 7265  .data\nassert re
-00000cf0: 636f 7264 6564 5b30 5d2e 7479 7065 203d  corded[0].type =
-00000d00: 3d20 6576 656e 7431 2e74 7970 655c 6e61  = event1.type\na
-00000d10: 7373 6572 7420 7265 636f 7264 6564 5b31  ssert recorded[1
-00000d20: 5d2e 7479 7065 203d 3d20 6576 656e 7432  ].type == event2
-00000d30: 2e74 7970 655c 6e61 7373 6572 7420 7265  .type\nassert re
-00000d40: 636f 7264 6564 5b32 5d2e 7479 7065 203d  corded[2].type =
-00000d50: 3d20 6576 656e 7433 2e74 7970 655c 6e5c  = event3.type\n\
-00000d60: 6e5c 6e23 2049 6e20 616e 2065 7665 6e74  n\n# In an event
-00000d70: 2d70 726f 6365 7373 696e 6720 636f 6d70  -processing comp
-00000d80: 6f6e 656e 742c 2075 7365 2061 2022 6361  onent, use a "ca
-00000d90: 7463 682d 7570 2220 7375 6273 6372 6970  tch-up" subscrip
-00000da0: 7469 6f6e 5c6e 2320 746f 2072 6563 6569  tion\n# to recei
-00000db0: 7665 2061 6c6c 2065 7665 6e74 7320 6163  ve all events ac
-00000dc0: 726f 7373 2061 6c6c 2073 7472 6561 6d73  ross all streams
-00000dd0: 2c20 696e 636c 7564 696e 6720 6576 656e  , including even
-00000de0: 7473 2074 6861 745c 6e23 2068 6176 6520  ts that\n# have 
-00000df0: 6e6f 7420 7965 7420 6265 656e 2072 6563  not yet been rec
-00000e00: 6f72 6465 642c 2073 7461 7274 696e 6720  orded, starting 
-00000e10: 6672 6f6d 2074 6865 2063 6f6d 706f 6e65  from the compone
-00000e20: 6e74 5c27 7320 6c61 7374 5c6e 2320 7361  nt\'s last\n# sa
-00000e30: 7665 6420 2263 6f6d 6d69 7420 706f 7369  ved "commit posi
-00000e40: 7469 6f6e 222e 5c6e 5c6e 6c61 7374 5f73  tion".\n\nlast_s
-00000e50: 6176 6564 5f63 6f6d 6d69 745f 706f 7369  aved_commit_posi
-00000e60: 7469 6f6e 203d 2030 5c6e 5c6e 7375 6273  tion = 0\n\nsubs
-00000e70: 6372 6970 7469 6f6e 203d 2063 6c69 656e  cription = clien
-00000e80: 742e 7375 6273 6372 6962 655f 616c 6c5f  t.subscribe_all_
-00000e90: 6576 656e 7473 285c 6e20 2020 2063 6f6d  events(\n    com
-00000ea0: 6d69 745f 706f 7369 7469 6f6e 3d6c 6173  mit_position=las
-00000eb0: 745f 7361 7665 645f 636f 6d6d 6974 5f70  t_saved_commit_p
-00000ec0: 6f73 6974 696f 6e5c 6e29 5c6e 5c6e 2320  osition\n)\n\n# 
-00000ed0: 546f 2069 6d70 6c65 6d65 6e74 2022 6578  To implement "ex
-00000ee0: 6163 746c 792d 6f6e 6365 2220 7365 6d61  actly-once" sema
-00000ef0: 6e74 6963 732c 2069 7465 7261 7465 206f  ntics, iterate o
-00000f00: 7665 7220 7468 655c 6e23 2022 6361 7463  ver the\n# "catc
-00000f10: 682d 7570 2220 7375 6273 6372 6970 7469  h-up" subscripti
-00000f20: 6f6e 2e20 5072 6f63 6573 7320 6561 6368  on. Process each
-00000f30: 2072 6563 6569 7665 6420 6576 656e 742c   received event,
-00000f40: 5c6e 2320 696e 2074 7572 6e2c 2074 6872  \n# in turn, thr
-00000f50: 6f75 6768 2061 6e20 6576 656e 742d 7072  ough an event-pr
-00000f60: 6f63 6573 7369 6e67 2070 6f6c 6963 792e  ocessing policy.
-00000f70: 2053 6176 6520 7468 655c 6e23 2076 616c   Save the\n# val
-00000f80: 7565 206f 6620 7468 6520 636f 6d6d 6974  ue of the commit
-00000f90: 5f70 6f73 6974 696f 6e20 6174 7472 6962  _position attrib
-00000fa0: 7574 6520 6f66 2074 6865 2070 726f 6365  ute of the proce
-00000fb0: 7373 6564 5c6e 2320 6576 656e 7420 7769  ssed\n# event wi
-00000fc0: 7468 206e 6577 2073 7461 7465 2067 656e  th new state gen
-00000fd0: 6572 6174 6564 2062 7920 7468 6520 706f  erated by the po
-00000fe0: 6c69 6379 2069 6e20 7468 6520 7361 6d65  licy in the same
-00000ff0: 5c6e 2320 6174 6f6d 6963 2074 7261 6e73  \n# atomic trans
-00001000: 6163 7469 6f6e 2e20 5573 6520 7468 6520  action. Use the 
-00001010: 6c61 7374 2073 6176 6564 2022 636f 6d6d  last saved "comm
-00001020: 6974 2070 6f73 6974 696f 6e22 5c6e 2320  it position"\n# 
-00001030: 7768 656e 2072 6573 7461 7274 696e 6720  when restarting 
-00001040: 7468 6520 2263 6174 6368 2d75 7022 2073  the "catch-up" s
-00001050: 7562 7363 7269 7074 696f 6e2e 5c6e 5c6e  ubscription.\n\n
-00001060: 7265 6365 6976 6564 203d 205b 5d5c 6e66  received = []\nf
-00001070: 6f72 2065 7665 6e74 2069 6e20 7375 6273  or event in subs
-00001080: 6372 6970 7469 6f6e 3a5c 6e20 2020 2072  cription:\n    r
-00001090: 6563 6569 7665 642e 6170 7065 6e64 2865  eceived.append(e
-000010a0: 7665 6e74 295c 6e20 2020 2069 6620 6576  vent)\n    if ev
-000010b0: 656e 742e 6964 203d 3d20 6576 656e 7433  ent.id == event3
-000010c0: 2e69 643a 5c6e 2020 2020 2020 2020 6272  .id:\n        br
-000010d0: 6561 6b5c 6e5c 6e61 7373 6572 7420 7265  eak\n\nassert re
-000010e0: 6365 6976 6564 5b2d 335d 2e64 6174 6120  ceived[-3].data 
-000010f0: 3d3d 2065 7665 6e74 312e 6461 7461 5c6e  == event1.data\n
-00001100: 6173 7365 7274 2072 6563 6569 7665 645b  assert received[
-00001110: 2d32 5d2e 6461 7461 203d 3d20 6576 656e  -2].data == even
-00001120: 7432 2e64 6174 615c 6e61 7373 6572 7420  t2.data\nassert 
-00001130: 7265 6365 6976 6564 5b2d 315d 2e64 6174  received[-1].dat
-00001140: 6120 3d3d 2065 7665 6e74 332e 6461 7461  a == event3.data
-00001150: 5c6e 6173 7365 7274 2072 6563 6569 7665  \nassert receive
-00001160: 645b 2d33 5d2e 7479 7065 203d 3d20 6576  d[-3].type == ev
-00001170: 656e 7431 2e74 7970 655c 6e61 7373 6572  ent1.type\nasser
-00001180: 7420 7265 6365 6976 6564 5b2d 325d 2e74  t received[-2].t
-00001190: 7970 6520 3d3d 2065 7665 6e74 322e 7479  ype == event2.ty
-000011a0: 7065 5c6e 6173 7365 7274 2072 6563 6569  pe\nassert recei
-000011b0: 7665 645b 2d31 5d2e 7479 7065 203d 3d20  ved[-1].type == 
-000011c0: 6576 656e 7433 2e74 7970 655c 6e5c 6e61  event3.type\n\na
-000011d0: 7373 6572 7420 7265 6365 6976 6564 5b2d  ssert received[-
-000011e0: 335d 2e63 6f6d 6d69 745f 706f 7369 7469  3].commit_positi
-000011f0: 6f6e 203e 2030 5c6e 6173 7365 7274 2072  on > 0\nassert r
-00001200: 6563 6569 7665 645b 2d32 5d2e 636f 6d6d  eceived[-2].comm
-00001210: 6974 5f70 6f73 6974 696f 6e20 3e20 7265  it_position > re
-00001220: 6365 6976 6564 5b2d 335d 2e63 6f6d 6d69  ceived[-3].commi
-00001230: 745f 706f 7369 7469 6f6e 5c6e 6173 7365  t_position\nasse
-00001240: 7274 2072 6563 6569 7665 645b 2d31 5d2e  rt received[-1].
-00001250: 636f 6d6d 6974 5f70 6f73 6974 696f 6e20  commit_position 
-00001260: 3e20 7265 6365 6976 6564 5b2d 325d 2e63  > received[-2].c
-00001270: 6f6d 6d69 745f 706f 7369 7469 6f6e 5c6e  ommit_position\n
-00001280: 5c6e 5c6e 2320 436c 6f73 6520 7468 6520  \n\n# Close the 
-00001290: 636c 6965 6e74 2061 6674 6572 2075 7365  client after use
-000012a0: 2e5c 6e5c 6e63 6c69 656e 742e 636c 6f73  .\n\nclient.clos
-000012b0: 6528 295c 6e60 6060 5c6e 5c6e 5365 6520  e()\n```\n\nSee 
-000012c0: 6265 6c6f 7720 666f 7220 6d6f 7265 2064  below for more d
-000012d0: 6574 6169 6c73 2e5c 6e5c 6e46 6f72 2061  etails.\n\nFor a
-000012e0: 6e20 6578 616d 706c 6520 6f66 2075 7361  n example of usa
-000012f0: 6765 2c20 7365 6520 7468 6520 5b65 7665  ge, see the [eve
-00001300: 6e74 736f 7572 6369 6e67 2d65 7665 6e74  ntsourcing-event
-00001310: 7374 6f72 6564 625d 285c 6e68 7474 7073  storedb](\nhttps
-00001320: 3a2f 2f67 6974 6875 622e 636f 6d2f 7079  ://github.com/py
-00001330: 6576 656e 7473 6f75 7263 696e 672f 6576  eventsourcing/ev
-00001340: 656e 7473 6f75 7263 696e 672d 6576 656e  entsourcing-even
-00001350: 7473 746f 7265 6462 2920 7061 636b 6167  tstoredb) packag
-00001360: 652e 5c6e 5c6e 2323 2054 6162 6c65 206f  e.\n\n## Table o
-00001370: 6620 636f 6e74 656e 7473 5c6e 5c6e 3c21  f contents\n\n<!
-00001380: 2d2d 2054 4f43 202d 2d3e 5c6e 2a20 5b49  -- TOC -->\n* [I
-00001390: 6e73 7461 6c6c 2070 6163 6b61 6765 5d28  nstall package](
-000013a0: 2369 6e73 7461 6c6c 2d70 6163 6b61 6765  #install-package
-000013b0: 295c 6e20 202a 205b 4672 6f6d 2050 7950  )\n  * [From PyP
-000013c0: 495d 2823 6672 6f6d 2d70 7970 6929 5c6e  I](#from-pypi)\n
-000013d0: 2020 2a20 5b57 6974 6820 506f 6574 7279    * [With Poetry
-000013e0: 5d28 2377 6974 682d 706f 6574 7279 295c  ](#with-poetry)\
-000013f0: 6e2a 205b 4576 656e 7453 746f 7265 4442  n* [EventStoreDB
-00001400: 2073 6572 7665 725d 2823 6576 656e 7473   server](#events
-00001410: 746f 7265 6462 2d73 6572 7665 7229 5c6e  toredb-server)\n
-00001420: 2020 2a20 5b52 756e 2063 6f6e 7461 696e    * [Run contain
-00001430: 6572 5d28 2372 756e 2d63 6f6e 7461 696e  er](#run-contain
-00001440: 6572 295c 6e20 202a 205b 5374 6f70 2063  er)\n  * [Stop c
-00001450: 6f6e 7461 696e 6572 5d28 2373 746f 702d  ontainer](#stop-
-00001460: 636f 6e74 6169 6e65 7229 5c6e 2a20 5b45  container)\n* [E
-00001470: 7665 6e74 5374 6f72 6544 4220 636c 6965  ventStoreDB clie
-00001480: 6e74 5d28 2365 7665 6e74 7374 6f72 6564  nt](#eventstored
-00001490: 622d 636c 6965 6e74 295c 6e20 202a 205b  b-client)\n  * [
-000014a0: 496d 706f 7274 2063 6c61 7373 5d28 2369  Import class](#i
-000014b0: 6d70 6f72 742d 636c 6173 7329 5c6e 2020  mport-class)\n  
-000014c0: 2a20 5b43 6f6e 7374 7275 6374 2063 6c69  * [Construct cli
-000014d0: 656e 745d 2823 636f 6e73 7472 7563 742d  ent](#construct-
-000014e0: 636c 6965 6e74 295c 6e2a 205b 5374 7265  client)\n* [Stre
-000014f0: 616d 735d 2823 7374 7265 616d 7329 5c6e  ams](#streams)\n
-00001500: 2020 2a20 5b41 7070 656e 6420 6576 656e    * [Append even
-00001510: 7473 5d28 2361 7070 656e 642d 6576 656e  ts](#append-even
-00001520: 7473 295c 6e20 202a 205b 4170 7065 6e64  ts)\n  * [Append
-00001530: 2065 7665 6e74 5d28 2361 7070 656e 642d   event](#append-
-00001540: 6576 656e 7429 5c6e 2020 2a20 5b49 6465  event)\n  * [Ide
-00001550: 6d70 6f74 656e 7420 6170 7065 6e64 206f  mpotent append o
-00001560: 7065 7261 7469 6f6e 735d 2823 6964 656d  perations](#idem
-00001570: 706f 7465 6e74 2d61 7070 656e 642d 6f70  potent-append-op
-00001580: 6572 6174 696f 6e73 295c 6e20 202a 205b  erations)\n  * [
-00001590: 5265 6164 2073 7472 6561 6d20 6576 656e  Read stream even
-000015a0: 7473 5d28 2372 6561 642d 7374 7265 616d  ts](#read-stream
-000015b0: 2d65 7665 6e74 7329 5c6e 2020 2a20 5b52  -events)\n  * [R
-000015c0: 6561 6420 616c 6c20 6576 656e 7473 5d28  ead all events](
-000015d0: 2372 6561 642d 616c 6c2d 6576 656e 7473  #read-all-events
-000015e0: 295c 6e20 202a 205b 4765 7420 6375 7272  )\n  * [Get curr
-000015f0: 656e 7420 7374 7265 616d 2070 6f73 6974  ent stream posit
-00001600: 696f 6e5d 2823 6765 742d 6375 7272 656e  ion](#get-curren
-00001610: 742d 7374 7265 616d 2d70 6f73 6974 696f  t-stream-positio
-00001620: 6e29 5c6e 2020 2a20 5b47 6574 2063 7572  n)\n  * [Get cur
-00001630: 7265 6e74 2063 6f6d 6d69 7420 706f 7369  rent commit posi
-00001640: 7469 6f6e 5d28 2367 6574 2d63 7572 7265  tion](#get-curre
-00001650: 6e74 2d63 6f6d 6d69 742d 706f 7369 7469  nt-commit-positi
-00001660: 6f6e 295c 6e20 202a 205b 4765 7420 7374  on)\n  * [Get st
-00001670: 7265 616d 206d 6574 6164 6174 615d 2823  ream metadata](#
-00001680: 6765 742d 7374 7265 616d 2d6d 6574 6164  get-stream-metad
-00001690: 6174 6129 5c6e 2020 2a20 5b53 6574 2073  ata)\n  * [Set s
-000016a0: 7472 6561 6d20 6d65 7461 6461 7461 5d28  tream metadata](
-000016b0: 2373 6574 2d73 7472 6561 6d2d 6d65 7461  #set-stream-meta
-000016c0: 6461 7461 295c 6e20 202a 205b 4465 6c65  data)\n  * [Dele
-000016d0: 7465 2073 7472 6561 6d5d 2823 6465 6c65  te stream](#dele
-000016e0: 7465 2d73 7472 6561 6d29 5c6e 2020 2a20  te-stream)\n  * 
-000016f0: 5b54 6f6d 6273 746f 6e65 2073 7472 6561  [Tombstone strea
-00001700: 6d5d 2823 746f 6d62 7374 6f6e 652d 7374  m](#tombstone-st
-00001710: 7265 616d 295c 6e2a 205b 4361 7463 682d  ream)\n* [Catch-
-00001720: 7570 2073 7562 7363 7269 7074 696f 6e73  up subscriptions
-00001730: 5d28 2363 6174 6368 2d75 702d 7375 6273  ](#catch-up-subs
-00001740: 6372 6970 7469 6f6e 7329 5c6e 2020 2a20  criptions)\n  * 
-00001750: 5b48 6f77 2074 6f20 696d 706c 656d 656e  [How to implemen
-00001760: 7420 6578 6163 746c 792d 6f6e 6365 2065  t exactly-once e
-00001770: 7665 6e74 2070 726f 6365 7373 696e 675d  vent processing]
-00001780: 2823 686f 772d 746f 2d69 6d70 6c65 6d65  (#how-to-impleme
-00001790: 6e74 2d65 7861 6374 6c79 2d6f 6e63 652d  nt-exactly-once-
-000017a0: 6576 656e 742d 7072 6f63 6573 7369 6e67  event-processing
-000017b0: 295c 6e20 202a 205b 5375 6273 6372 6962  )\n  * [Subscrib
-000017c0: 6520 616c 6c20 6576 656e 7473 5d28 2373  e all events](#s
-000017d0: 7562 7363 7269 6265 2d61 6c6c 2d65 7665  ubscribe-all-eve
-000017e0: 6e74 7329 5c6e 2020 2a20 5b53 7562 7363  nts)\n  * [Subsc
-000017f0: 7269 6265 2073 7472 6561 6d20 6576 656e  ribe stream even
-00001800: 7473 5d28 2373 7562 7363 7269 6265 2d73  ts](#subscribe-s
-00001810: 7472 6561 6d2d 6576 656e 7473 295c 6e2a  tream-events)\n*
-00001820: 205b 5065 7273 6973 7465 6e74 2073 7562   [Persistent sub
-00001830: 7363 7269 7074 696f 6e73 5d28 2370 6572  scriptions](#per
-00001840: 7369 7374 656e 742d 7375 6273 6372 6970  sistent-subscrip
-00001850: 7469 6f6e 7329 5c6e 2020 2a20 5b43 7265  tions)\n  * [Cre
-00001860: 6174 6520 7375 6273 6372 6970 7469 6f6e  ate subscription
-00001870: 5d28 2363 7265 6174 652d 7375 6273 6372  ](#create-subscr
-00001880: 6970 7469 6f6e 295c 6e20 202a 205b 5265  iption)\n  * [Re
-00001890: 6164 2073 7562 7363 7269 7074 696f 6e5d  ad subscription]
-000018a0: 2823 7265 6164 2d73 7562 7363 7269 7074  (#read-subscript
-000018b0: 696f 6e29 5c6e 2020 2a20 5b47 6574 2073  ion)\n  * [Get s
-000018c0: 7562 7363 7269 7074 696f 6e20 696e 666f  ubscription info
-000018d0: 5d28 2367 6574 2d73 7562 7363 7269 7074  ](#get-subscript
-000018e0: 696f 6e2d 696e 666f 295c 6e20 202a 205b  ion-info)\n  * [
-000018f0: 4c69 7374 2073 7562 7363 7269 7074 696f  List subscriptio
-00001900: 6e73 5d28 236c 6973 742d 7375 6273 6372  ns](#list-subscr
-00001910: 6970 7469 6f6e 7329 5c6e 2020 2a20 5b44  iptions)\n  * [D
-00001920: 656c 6574 6520 7375 6273 6372 6970 7469  elete subscripti
-00001930: 6f6e 5d28 2364 656c 6574 652d 7375 6273  on](#delete-subs
-00001940: 6372 6970 7469 6f6e 295c 6e20 202a 205b  cription)\n  * [
-00001950: 4372 6561 7465 2073 7472 6561 6d20 7375  Create stream su
-00001960: 6273 6372 6970 7469 6f6e 5d28 2363 7265  bscription](#cre
-00001970: 6174 652d 7374 7265 616d 2d73 7562 7363  ate-stream-subsc
-00001980: 7269 7074 696f 6e29 5c6e 2020 2a20 5b52  ription)\n  * [R
-00001990: 6561 6420 7374 7265 616d 2073 7562 7363  ead stream subsc
-000019a0: 7269 7074 696f 6e5d 2823 7265 6164 2d73  ription](#read-s
-000019b0: 7472 6561 6d2d 7375 6273 6372 6970 7469  tream-subscripti
-000019c0: 6f6e 295c 6e20 202a 205b 4765 7420 7374  on)\n  * [Get st
-000019d0: 7265 616d 2073 7562 7363 7269 7074 696f  ream subscriptio
-000019e0: 6e20 696e 666f 5d28 2367 6574 2d73 7472  n info](#get-str
-000019f0: 6561 6d2d 7375 6273 6372 6970 7469 6f6e  eam-subscription
-00001a00: 2d69 6e66 6f29 5c6e 2020 2a20 5b4c 6973  -info)\n  * [Lis
-00001a10: 7420 7374 7265 616d 2073 7562 7363 7269  t stream subscri
-00001a20: 7074 696f 6e73 5d28 236c 6973 742d 7374  ptions](#list-st
-00001a30: 7265 616d 2d73 7562 7363 7269 7074 696f  ream-subscriptio
-00001a40: 6e73 295c 6e20 202a 205b 4465 6c65 7465  ns)\n  * [Delete
-00001a50: 2073 7472 6561 6d20 7375 6273 6372 6970   stream subscrip
-00001a60: 7469 6f6e 5d28 2364 656c 6574 652d 7374  tion](#delete-st
-00001a70: 7265 616d 2d73 7562 7363 7269 7074 696f  ream-subscriptio
-00001a80: 6e29 5c6e 2a20 5b43 6f6e 6e65 6374 696f  n)\n* [Connectio
-00001a90: 6e5d 2823 636f 6e6e 6563 7469 6f6e 295c  n](#connection)\
-00001aa0: 6e20 202a 205b 5265 636f 6e6e 6563 745d  n  * [Reconnect]
-00001ab0: 2823 7265 636f 6e6e 6563 7429 5c6e 2020  (#reconnect)\n  
-00001ac0: 2a20 5b43 6c6f 7365 5d28 2363 6c6f 7365  * [Close](#close
-00001ad0: 295c 6e2a 205b 4e6f 7465 735d 2823 6e6f  )\n* [Notes](#no
-00001ae0: 7465 7329 5c6e 2020 2a20 5b43 6f6e 6e65  tes)\n  * [Conne
-00001af0: 6374 696f 6e20 7374 7269 6e67 735d 2823  ction strings](#
-00001b00: 636f 6e6e 6563 7469 6f6e 2d73 7472 696e  connection-strin
-00001b10: 6773 295c 6e20 202a 205b 5265 6775 6c61  gs)\n  * [Regula
-00001b20: 7220 6578 7072 6573 7369 6f6e 2066 696c  r expression fil
-00001b30: 7465 7273 5d28 2372 6567 756c 6172 2d65  ters](#regular-e
-00001b40: 7870 7265 7373 696f 6e2d 6669 6c74 6572  xpression-filter
-00001b50: 7329 5c6e 2020 2a20 5b4e 6577 2065 7665  s)\n  * [New eve
-00001b60: 6e74 206f 626a 6563 7473 5d28 236e 6577  nt objects](#new
-00001b70: 2d65 7665 6e74 2d6f 626a 6563 7473 295c  -event-objects)\
-00001b80: 6e20 202a 205b 5265 636f 7264 6564 2065  n  * [Recorded e
-00001b90: 7665 6e74 206f 626a 6563 7473 5d28 2372  vent objects](#r
-00001ba0: 6563 6f72 6465 642d 6576 656e 742d 6f62  ecorded-event-ob
-00001bb0: 6a65 6374 7329 5c6e 2a20 5b43 6f6e 7472  jects)\n* [Contr
-00001bc0: 6962 7574 6f72 735d 2823 636f 6e74 7269  ibutors](#contri
-00001bd0: 6275 746f 7273 295c 6e20 202a 205b 496e  butors)\n  * [In
-00001be0: 7374 616c 6c20 506f 6574 7279 5d28 2369  stall Poetry](#i
-00001bf0: 6e73 7461 6c6c 2d70 6f65 7472 7929 5c6e  nstall-poetry)\n
-00001c00: 2020 2a20 5b53 6574 7570 2066 6f72 2050    * [Setup for P
-00001c10: 7943 6861 726d 2075 7365 7273 5d28 2373  yCharm users](#s
-00001c20: 6574 7570 2d66 6f72 2d70 7963 6861 726d  etup-for-pycharm
-00001c30: 2d75 7365 7273 295c 6e20 202a 205b 5365  -users)\n  * [Se
-00001c40: 7475 7020 6672 6f6d 2063 6f6d 6d61 6e64  tup from command
-00001c50: 206c 696e 655d 2823 7365 7475 702d 6672   line](#setup-fr
-00001c60: 6f6d 2d63 6f6d 6d61 6e64 2d6c 696e 6529  om-command-line)
-00001c70: 5c6e 2020 2a20 5b50 726f 6a65 6374 204d  \n  * [Project M
-00001c80: 616b 6566 696c 6520 636f 6d6d 616e 6473  akefile commands
-00001c90: 5d28 2370 726f 6a65 6374 2d6d 616b 6566  ](#project-makef
-00001ca0: 696c 652d 636f 6d6d 616e 6473 295c 6e3c  ile-commands)\n<
-00001cb0: 212d 2d20 544f 4320 2d2d 3e5c 6e5c 6e23  !-- TOC -->\n\n#
-00001cc0: 2320 496e 7374 616c 6c20 7061 636b 6167  # Install packag
-00001cd0: 655c 6e5c 6e49 7420 6973 2072 6563 6f6d  e\n\nIt is recom
-00001ce0: 6d65 6e64 6564 2074 6f20 696e 7374 616c  mended to instal
-00001cf0: 6c20 5079 7468 6f6e 2070 6163 6b61 6765  l Python package
-00001d00: 7320 696e 746f 2061 2050 7974 686f 6e20  s into a Python 
-00001d10: 7669 7274 7561 6c20 656e 7669 726f 6e6d  virtual environm
-00001d20: 656e 742e 5c6e 5c6e 2323 2320 4672 6f6d  ent.\n\n### From
-00001d30: 2050 7950 495c 6e5c 6e59 6f75 2063 616e   PyPI\n\nYou can
-00001d40: 2075 7365 2070 6970 2074 6f20 696e 7374   use pip to inst
-00001d50: 616c 6c20 7468 6973 2070 6163 6b61 6765  all this package
-00001d60: 2064 6972 6563 746c 7920 6672 6f6d 5c6e   directly from\n
-00001d70: 5b74 6865 2050 7974 686f 6e20 5061 636b  [the Python Pack
-00001d80: 6167 6520 496e 6465 785d 2868 7474 7073  age Index](https
-00001d90: 3a2f 2f70 7970 692e 6f72 672f 7072 6f6a  ://pypi.org/proj
-00001da0: 6563 742f 6573 6462 636c 6965 6e74 2f29  ect/esdbclient/)
-00001db0: 2e5c 6e5c 6e20 2020 2024 2070 6970 2069  .\n\n    $ pip i
-00001dc0: 6e73 7461 6c6c 2065 7364 6263 6c69 656e  nstall esdbclien
-00001dd0: 745c 6e5c 6e23 2323 2057 6974 6820 506f  t\n\n### With Po
-00001de0: 6574 7279 5c6e 5c6e 596f 7520 6361 6e20  etry\n\nYou can 
-00001df0: 7573 6520 506f 6574 7279 2074 6f20 6164  use Poetry to ad
-00001e00: 6420 7468 6973 2070 6163 6b61 6765 2074  d this package t
-00001e10: 6f20 796f 7572 2070 7970 726f 6a65 6374  o your pyproject
-00001e20: 2e74 6f6d 6c20 616e 6420 696e 7374 616c  .toml and instal
-00001e30: 6c20 6974 2e5c 6e5c 6e20 2020 2024 2070  l it.\n\n    $ p
-00001e40: 6f65 7472 7920 6164 6420 6573 6462 636c  oetry add esdbcl
-00001e50: 6965 6e74 5c6e 5c6e 2323 2045 7665 6e74  ient\n\n## Event
-00001e60: 5374 6f72 6544 4220 7365 7276 6572 5c6e  StoreDB server\n
-00001e70: 5c6e 5468 6520 4576 656e 7453 746f 7265  \nThe EventStore
-00001e80: 4442 2073 6572 7665 7220 6361 6e20 6265  DB server can be
-00001e90: 2072 756e 206c 6f63 616c 6c79 2075 7369   run locally usi
-00001ea0: 6e67 2074 6865 206f 6666 6963 6961 6c20  ng the official 
-00001eb0: 446f 636b 6572 2063 6f6e 7461 696e 6572  Docker container
-00001ec0: 2069 6d61 6765 2e5c 6e5c 6e23 2323 2052   image.\n\n### R
-00001ed0: 756e 2063 6f6e 7461 696e 6572 5c6e 5c6e  un container\n\n
-00001ee0: 466f 7220 6465 7665 6c6f 706d 656e 742c  For development,
-00001ef0: 2079 6f75 2063 616e 2072 756e 2061 2022   you can run a "
-00001f00: 7365 6375 7265 2220 4576 656e 7453 746f  secure" EventSto
-00001f10: 7265 4442 2073 6572 7665 7220 7573 696e  reDB server usin
-00001f20: 6720 7468 6520 666f 6c6c 6f77 696e 6720  g the following 
-00001f30: 636f 6d6d 616e 642e 5c6e 5c6e 2020 2020  command.\n\n    
-00001f40: 2420 646f 636b 6572 2072 756e 202d 6420  $ docker run -d 
-00001f50: 2d2d 6e61 6d65 2065 7665 6e74 7374 6f72  --name eventstor
-00001f60: 6564 622d 7365 6375 7265 202d 6974 202d  edb-secure -it -
-00001f70: 7020 3231 3133 3a32 3131 3320 2d2d 656e  p 2113:2113 --en
-00001f80: 7620 2248 4f4d 453d 2f74 6d70 2220 6576  v "HOME=/tmp" ev
-00001f90: 656e 7473 746f 7265 2f65 7665 6e74 7374  entstore/eventst
-00001fa0: 6f72 653a 3231 2e31 302e 392d 6275 7374  ore:21.10.9-bust
-00001fb0: 6572 2d73 6c69 6d20 2d2d 6465 765c 6e5c  er-slim --dev\n\
-00001fc0: 6e54 6865 2063 6f6e 6e65 6374 696f 6e20  nThe connection 
-00001fd0: 7374 7269 6e67 2066 6f72 2074 6869 7320  string for this 
-00001fe0: 2273 6563 7572 6522 2045 7665 6e74 5374  "secure" EventSt
-00001ff0: 6f72 6544 4220 7365 7276 6572 2077 6f75  oreDB server wou
-00002000: 6c64 2062 653a 5c6e 5c6e 2020 2020 6573  ld be:\n\n    es
-00002010: 6462 3a2f 2f61 646d 696e 3a63 6861 6e67  db://admin:chang
-00002020: 6569 7440 6c6f 6361 6c68 6f73 743a 3231  eit@localhost:21
-00002030: 3133 5c6e 5c6e 4173 2077 6520 7769 6c6c  13\n\nAs we will
-00002040: 2073 6565 2c20 7468 6520 636c 6965 6e74   see, the client
-00002050: 206e 6565 6473 2061 6e20 4576 656e 7453   needs an EventS
-00002060: 746f 7265 4442 2063 6f6e 6e65 6374 696f  toreDB connectio
-00002070: 6e20 7374 7269 6e67 2061 7320 7468 6520  n string as the 
-00002080: 7661 6c75 6520 6f66 5c6e 6974 7320 6075  value of\nits `u
-00002090: 7269 6020 636f 6e73 7472 7563 746f 7220  ri` constructor 
-000020a0: 6172 6775 6d65 6e74 2e5c 6e5c 6e54 6f20  argument.\n\nTo 
-000020b0: 636f 6e6e 6563 7420 746f 2061 2022 7365  connect to a "se
-000020c0: 6375 7265 2220 7365 7276 6572 2c20 796f  cure" server, yo
-000020d0: 7520 7769 6c6c 2075 7375 7361 6c6c 7920  u will ususally 
-000020e0: 6e65 6564 2074 6f20 696e 636c 7564 6520  need to include 
-000020f0: 6120 2275 7365 726e 616d 6522 5c6e 616e  a "username"\nan
-00002100: 6420 6120 2270 6173 7377 6f72 6422 2069  d a "password" i
-00002110: 6e20 7468 6520 636f 6e6e 6563 7469 6f6e  n the connection
-00002120: 2073 7472 696e 672c 2073 6f20 7468 6174   string, so that
-00002130: 2074 6865 2073 6572 7665 7220 6361 6e20   the server can 
-00002140: 6175 7468 656e 7469 6361 7465 2074 6865  authenticate the
-00002150: 5c6e 636c 6965 6e74 2e20 5468 6520 6465  \nclient. The de
-00002160: 6661 756c 7420 7573 6572 6e61 6d65 2069  fault username i
-00002170: 7320 2261 646d 696e 2220 616e 6420 7468  s "admin" and th
-00002180: 6520 6465 6661 756c 7420 7061 7373 776f  e default passwo
-00002190: 7264 2069 7320 2263 6861 6e67 6569 7422  rd is "changeit"
-000021a0: 2e5c 6e5c 6e53 6565 2074 6865 204e 6f74  .\n\nSee the Not
-000021b0: 6573 2073 6563 7469 6f6e 2062 656c 6f77  es section below
-000021c0: 2066 6f72 206d 6f72 6520 696e 666f 726d   for more inform
-000021d0: 6174 696f 6e20 6162 6f75 7420 4576 656e  ation about Even
-000021e0: 7453 746f 7265 4442 2063 6f6e 6e65 6374  tStoreDB connect
-000021f0: 696f 6e20 7374 7269 6e67 732e 5c6e 5c6e  ion strings.\n\n
-00002200: 546f 2063 6f6e 6e65 6374 2074 6f20 6120  To connect to a 
-00002210: 2273 6563 7572 6522 2073 6572 7665 722c  "secure" server,
-00002220: 2079 6f75 2077 696c 6c20 616c 736f 206e   you will also n
-00002230: 6565 6420 616e 2053 534c 2f54 4c53 2063  eed an SSL/TLS c
-00002240: 6572 7469 6669 6361 7465 2c20 736f 2074  ertificate, so t
-00002250: 6861 7420 7468 655c 6e63 6c69 656e 7420  hat the\nclient 
-00002260: 6361 6e20 6175 7468 656e 7469 6361 7465  can authenticate
-00002270: 2074 6865 2073 6572 7665 722e 2046 6f72   the server. For
-00002280: 2064 6576 656c 6f70 6d65 6e74 2c20 796f   development, yo
-00002290: 7520 6361 6e20 6569 7468 6572 2075 7365  u can either use
-000022a0: 2074 6865 2053 534c 2f54 4c53 5c6e 6365   the SSL/TLS\nce
-000022b0: 7274 6966 6963 6174 6520 6f66 2074 6865  rtificate of the
-000022c0: 2063 6572 7469 6669 6361 7465 2061 7574   certificate aut
-000022d0: 686f 7269 7479 2075 7365 6420 746f 2063  hority used to c
-000022e0: 7265 6174 6520 7468 6520 7365 7276 6572  reate the server
-000022f0: 5c27 7320 6365 7274 6966 6963 6174 652c  \'s certificate,
-00002300: 206f 725c 6e77 6865 6e20 7573 696e 6720   or\nwhen using 
-00002310: 6120 7369 6e67 6c65 2d6e 6f64 6520 636c  a single-node cl
-00002320: 7573 7465 722c 2079 6f75 2063 616e 2067  uster, you can g
-00002330: 6574 2074 6865 2063 6572 7469 6669 6361  et the certifica
-00002340: 7465 2066 726f 6d20 7468 6520 7365 7276  te from the serv
-00002350: 6572 2e20 596f 7520 6361 6e5c 6e67 6574  er. You can\nget
-00002360: 2074 6865 2073 6572 7665 7220 6365 7274   the server cert
-00002370: 6966 6963 6174 6520 7769 7468 2074 6865  ificate with the
-00002380: 2066 6f6c 6c6f 7769 6e67 2050 7974 686f   following Pytho
-00002390: 6e20 636f 6465 2e5c 6e5c 6e41 7320 7765  n code.\n\nAs we
-000023a0: 2077 696c 6c20 7365 652c 2077 6865 6e20   will see, when 
-000023b0: 636f 6e6e 6563 7469 6e67 2074 6f20 6120  connecting to a 
-000023c0: 2273 6563 7572 6522 2073 6572 7665 722c  "secure" server,
-000023d0: 2074 6865 2063 6c69 656e 7420 6e65 6564   the client need
-000023e0: 7320 616e 2053 534c 2f54 4c53 5c6e 6365  s an SSL/TLS\nce
-000023f0: 7274 6966 6963 6174 6520 6173 2074 6865  rtificate as the
-00002400: 2076 616c 7565 206f 6620 6974 7320 6072   value of its `r
-00002410: 6f6f 745f 6365 7274 6966 6963 6174 6573  oot_certificates
-00002420: 6020 636f 6e73 7472 7563 746f 7220 6172  ` constructor ar
-00002430: 6775 6d65 6e74 2e5c 6e5c 6e5c 6e60 6060  gument.\n\n\n```
-00002440: 7079 7468 6f6e 5c6e 696d 706f 7274 2073  python\nimport s
-00002450: 736c 5c6e 5c6e 5c6e 7365 7276 6572 5f63  sl\n\n\nserver_c
-00002460: 6572 7469 6669 6361 7465 203d 2073 736c  ertificate = ssl
-00002470: 2e67 6574 5f73 6572 7665 725f 6365 7274  .get_server_cert
-00002480: 6966 6963 6174 6528 6164 6472 3d28 5c27  ificate(addr=(\'
-00002490: 6c6f 6361 6c68 6f73 745c 272c 2032 3131  localhost\', 211
-000024a0: 3329 295c 6e60 6060 5c6e 5c6e 596f 7520  3))\n```\n\nYou 
-000024b0: 6361 6e20 616c 736f 2073 7461 7274 2061  can also start a
-000024c0: 6e20 2269 6e73 6563 7572 6522 2073 6572  n "insecure" ser
-000024d0: 7665 7220 7573 696e 6720 7468 6520 666f  ver using the fo
-000024e0: 6c6c 6f77 696e 6720 636f 6d6d 616e 642e  llowing command.
-000024f0: 5c6e 5c6e 2020 2020 2420 646f 636b 6572  \n\n    $ docker
-00002500: 2072 756e 202d 6420 2d2d 6e61 6d65 2065   run -d --name e
-00002510: 7665 6e74 7374 6f72 6564 622d 696e 7365  ventstoredb-inse
-00002520: 6375 7265 202d 6974 202d 7020 3231 3134  cure -it -p 2114
-00002530: 3a32 3131 3320 6576 656e 7473 746f 7265  :2113 eventstore
-00002540: 2f65 7665 6e74 7374 6f72 653a 3231 2e31  /eventstore:21.1
-00002550: 302e 392d 6275 7374 6572 2d73 6c69 6d20  0.9-buster-slim 
-00002560: 2d2d 696e 7365 6375 7265 5c6e 5c6e 5468  --insecure\n\nTh
-00002570: 6520 636f 6e6e 6563 7469 6f6e 2073 7472  e connection str
-00002580: 696e 6720 5552 4920 666f 7220 7468 6973  ing URI for this
-00002590: 2022 696e 7365 6375 7265 2220 7365 7276   "insecure" serv
-000025a0: 6572 2077 6f75 6c64 2062 653a 5c6e 5c6e  er would be:\n\n
-000025b0: 2020 2020 6573 6462 3a2f 2f6c 6f63 616c      esdb://local
-000025c0: 686f 7374 3a32 3131 343f 546c 733d 6661  host:2114?Tls=fa
-000025d0: 6c73 655c 6e5c 6e41 7320 7765 2077 696c  lse\n\nAs we wil
-000025e0: 6c20 7365 652c 2077 6865 6e20 636f 6e6e  l see, when conn
-000025f0: 6563 7469 6e67 2074 6f20 616e 2022 696e  ecting to an "in
-00002600: 7365 6375 7265 2220 7365 7276 6572 2c20  secure" server, 
-00002610: 7468 6572 6520 6973 206e 6f20 6e65 6564  there is no need
-00002620: 2074 6f20 696e 636c 7564 655c 6e61 2022   to include\na "
-00002630: 7573 6572 6e61 6d65 2220 616e 6420 6120  username" and a 
-00002640: 2270 6173 7377 6f72 6422 2069 6e20 7468  "password" in th
-00002650: 6520 636f 6e6e 6563 7469 6f6e 2073 7472  e connection str
-00002660: 696e 672e 2049 6620 796f 7520 646f 2c20  ing. If you do, 
-00002670: 7468 6573 6520 7661 6c75 6573 2077 696c  these values wil
-00002680: 6c5c 6e62 6520 6967 6e6f 7265 6420 6279  l\nbe ignored by
-00002690: 2074 6865 2063 6c69 656e 742c 2073 6f20   the client, so 
-000026a0: 7468 6174 2074 6865 7920 7769 6c6c 206e  that they will n
-000026b0: 6f74 2062 6520 7365 6e74 2074 6f20 7468  ot be sent to th
-000026c0: 6520 7365 7276 6572 206f 7665 7220 616e  e server over an
-000026d0: 5c6e 696e 7365 6375 7265 2063 6861 6e6e  \ninsecure chann
-000026e0: 656c 2e5c 6e5c 6e50 6c65 6173 6520 6e6f  el.\n\nPlease no
-000026f0: 7465 2c20 7468 6520 2269 6e73 6563 7572  te, the "insecur
-00002700: 6522 2063 6f6e 6e65 6374 696f 6e20 7374  e" connection st
-00002710: 7269 6e67 2075 7365 7320 7468 6520 7175  ring uses the qu
-00002720: 6572 7920 7374 7269 6e67 2060 3f54 6c73  ery string `?Tls
-00002730: 3d66 616c 7365 602e 2054 6865 5c6e 7661  =false`. The\nva
-00002740: 6c75 6520 6f66 2074 6869 7320 6669 656c  lue of this fiel
-00002750: 6420 6973 2062 7920 6465 6661 756c 7420  d is by default 
-00002760: 6074 7275 6560 2e20 5365 6520 7468 6520  `true`. See the 
-00002770: 4e6f 7465 7320 7365 6374 696f 6e20 6265  Notes section be
-00002780: 6c6f 7720 666f 7220 6d6f 7265 5c6e 696e  low for more\nin
-00002790: 666f 726d 6174 696f 6e20 6162 6f75 7420  formation about 
-000027a0: 4576 656e 7453 746f 7265 4442 2063 6f6e  EventStoreDB con
-000027b0: 6e65 6374 696f 6e20 7374 7269 6e67 7320  nection strings 
-000027c0: 616e 6420 7468 6520 6669 656c 6473 2074  and the fields t
-000027d0: 6861 7420 6361 6e20 6265 2075 7365 645c  hat can be used\
-000027e0: 6e69 6e20 7468 6520 7175 6572 7920 7374  nin the query st
-000027f0: 7269 6e67 2074 6f20 7370 6563 6966 7920  ring to specify 
-00002800: 636f 6e6e 6563 7469 6f6e 206f 7074 696f  connection optio
-00002810: 6e73 2e5c 6e5c 6e23 2323 2053 746f 7020  ns.\n\n### Stop 
-00002820: 636f 6e74 6169 6e65 725c 6e5c 6e54 6f20  container\n\nTo 
-00002830: 7374 6f70 2061 6e64 2072 656d 6f76 6520  stop and remove 
-00002840: 7468 6520 2273 6563 7572 6522 2063 6f6e  the "secure" con
-00002850: 7461 696e 6572 2c20 7573 6520 7468 6520  tainer, use the 
-00002860: 666f 6c6c 6f77 696e 6720 446f 636b 6572  following Docker
-00002870: 2063 6f6d 6d61 6e64 732e 5c6e 5c6e 2020   commands.\n\n  
-00002880: 2020 2420 646f 636b 6572 2073 746f 7020    $ docker stop 
-00002890: 6576 656e 7473 746f 7265 6462 2d73 6563  eventstoredb-sec
-000028a0: 7572 655c 6e5c 7424 2064 6f63 6b65 7220  ure\n\t$ docker 
-000028b0: 726d 2065 7665 6e74 7374 6f72 6564 622d  rm eventstoredb-
-000028c0: 7365 6375 7265 5c6e 5c6e 546f 2073 746f  secure\n\nTo sto
-000028d0: 7020 616e 6420 7265 6d6f 7665 2074 6865  p and remove the
-000028e0: 2022 696e 7365 6375 7265 2220 636f 6e74   "insecure" cont
-000028f0: 6169 6e65 722c 2075 7365 2074 6865 2066  ainer, use the f
-00002900: 6f6c 6c6f 7769 6e67 2044 6f63 6b65 7220  ollowing Docker 
-00002910: 636f 6d6d 616e 6473 2e5c 6e5c 6e20 2020  commands.\n\n   
-00002920: 2024 2064 6f63 6b65 7220 7374 6f70 2065   $ docker stop e
-00002930: 7665 6e74 7374 6f72 6564 622d 696e 7365  ventstoredb-inse
-00002940: 6375 7265 5c6e 5c74 2420 646f 636b 6572  cure\n\t$ docker
-00002950: 2072 6d20 6576 656e 7473 746f 7265 6462   rm eventstoredb
-00002960: 2d69 6e73 6563 7572 655c 6e5c 6e5c 6e23  -insecure\n\n\n#
-00002970: 2320 4576 656e 7453 746f 7265 4442 2063  # EventStoreDB c
-00002980: 6c69 656e 745c 6e5c 6e54 6869 7320 4576  lient\n\nThis Ev
-00002990: 656e 7453 746f 7265 4442 2063 6c69 656e  entStoreDB clien
-000029a0: 7420 6973 2069 6d70 6c65 6d65 6e74 6564  t is implemented
-000029b0: 2069 6e20 7468 6520 6065 7364 6263 6c69   in the `esdbcli
-000029c0: 656e 7460 2070 6163 6b61 6765 2077 6974  ent` package wit
-000029d0: 685c 6e74 6865 2060 4553 4442 436c 6965  h\nthe `ESDBClie
-000029e0: 6e74 6020 636c 6173 732e 5c6e 5c6e 2323  nt` class.\n\n##
-000029f0: 2320 496d 706f 7274 2063 6c61 7373 5c6e  # Import class\n
-00002a00: 5c6e 5468 6520 6045 5344 4243 6c69 656e  \nThe `ESDBClien
-00002a10: 7460 2063 6c61 7373 2063 616e 2062 6520  t` class can be 
-00002a20: 696d 706f 7274 6564 2066 726f 6d20 7468  imported from th
-00002a30: 6520 6065 7364 6263 6c69 656e 7460 2070  e `esdbclient` p
-00002a40: 6163 6b61 6765 2e5c 6e5c 6e60 6060 7079  ackage.\n\n```py
-00002a50: 7468 6f6e 5c6e 6672 6f6d 2065 7364 6263  thon\nfrom esdbc
-00002a60: 6c69 656e 7420 696d 706f 7274 2045 5344  lient import ESD
-00002a70: 4243 6c69 656e 745c 6e60 6060 5c6e 5c6e  BClient\n```\n\n
-00002a80: 2323 2320 436f 6e73 7472 7563 7420 636c  ### Construct cl
-00002a90: 6965 6e74 5c6e 5c6e 5468 6520 6045 5344  ient\n\nThe `ESD
-00002aa0: 4243 6c69 656e 7460 2063 6c61 7373 2063  BClient` class c
-00002ab0: 616e 2062 6520 636f 6e73 7472 7563 7465  an be constructe
-00002ac0: 6420 7769 7468 2061 2060 7572 6960 2061  d with a `uri` a
-00002ad0: 7267 756d 656e 742c 2077 6869 6368 2069  rgument, which i
-00002ae0: 7320 7265 7175 6972 6564 2e5c 6e41 6e64  s required.\nAnd
-00002af0: 2c20 746f 2063 6f6e 6e65 6374 2074 6f20  , to connect to 
-00002b00: 6120 2273 6563 7572 6522 2045 7665 6e74  a "secure" Event
-00002b10: 5374 6f72 6544 4220 7365 7276 6572 2c20  StoreDB server, 
-00002b20: 7468 6520 6f70 7469 6f6e 616c 2060 726f  the optional `ro
-00002b30: 6f74 5f63 6572 7469 6669 6361 7465 7360  ot_certificates`
-00002b40: 5c6e 6172 6775 6d65 6e74 2069 7320 616c  \nargument is al
-00002b50: 736f 2072 6571 7569 7265 642e 5c6e 5c6e  so required.\n\n
-00002b60: 5468 6520 6075 7269 6020 6172 6775 6d65  The `uri` argume
-00002b70: 6e74 2069 7320 6578 7065 6374 6564 2074  nt is expected t
-00002b80: 6f20 6265 2061 6e20 4576 656e 7453 746f  o be an EventSto
-00002b90: 7265 4442 2063 6f6e 6e65 6374 696f 6e20  reDB connection 
-00002ba0: 7374 7269 6e67 2055 5249 2074 6861 745c  string URI that\
-00002bb0: 6e63 6f6e 666f 726d 7320 7769 7468 2074  nconforms with t
-00002bc0: 6865 2073 7461 6e64 6172 6420 4576 656e  he standard Even
-00002bd0: 7453 746f 7265 4442 2022 6573 6462 2220  tStoreDB "esdb" 
-00002be0: 6f72 2022 6573 6462 2b64 6973 636f 7665  or "esdb+discove
-00002bf0: 7222 2055 5249 2073 6368 656d 6573 2e20  r" URI schemes. 
-00002c00: 5468 655c 6e73 796e 7461 7820 616e 6420  The\nsyntax and 
-00002c10: 7365 6d61 6e74 6963 7320 6f66 2045 7665  semantics of Eve
-00002c20: 6e74 5374 6f72 6544 4220 636f 6e6e 6563  ntStoreDB connec
-00002c30: 7469 6f6e 2073 7472 696e 6773 2061 7265  tion strings are
-00002c40: 2065 7870 6c61 696e 6564 2069 6e20 7468   explained in th
-00002c50: 6520 4e6f 7465 735c 6e73 6563 7469 6f6e  e Notes\nsection
-00002c60: 2062 656c 6f77 2e5c 6e5c 6e46 6f72 2065   below.\n\nFor e
-00002c70: 7861 6d70 6c65 2c20 7468 6520 666f 6c6c  xample, the foll
-00002c80: 6f77 696e 6720 636f 6e6e 6563 7469 6f6e  owing connection
-00002c90: 2073 7472 696e 6720 7370 6563 6966 6965   string specifie
-00002ca0: 7320 7468 6174 2074 6865 2063 6c69 656e  s that the clien
-00002cb0: 7420 7368 6f75 6c64 5c6e 6174 7465 6d70  t should\nattemp
-00002cc0: 7420 746f 2063 7265 6165 2061 2022 7365  t to creae a "se
-00002cd0: 6375 7265 2220 636f 6e6e 6563 7469 6f6e  cure" connection
-00002ce0: 2074 6f20 706f 7274 2032 3131 3320 6f6e   to port 2113 on
-00002cf0: 2022 6c6f 6361 6c68 6f73 7422 2c20 616e   "localhost", an
-00002d00: 6420 7573 6520 7468 655c 6e63 7265 6465  d use the\ncrede
-00002d10: 6e74 6961 6c73 2022 7573 6572 6e61 6d65  ntials "username
-00002d20: 2220 616e 6420 2270 6173 7377 6f72 6422  " and "password"
-00002d30: 2077 6865 6e20 6d61 6b69 6e67 2063 616c   when making cal
-00002d40: 6c73 2074 6f20 7468 6520 7365 7276 6572  ls to the server
-00002d50: 2e5c 6e5c 6e20 2020 2065 7364 623a 2f2f  .\n\n    esdb://
-00002d60: 7573 6572 6e61 6d65 3a70 6173 7377 6f72  username:passwor
-00002d70: 6440 6c6f 6361 6c68 6f73 743a 3231 3133  d@localhost:2113
-00002d80: 5c6e 5c6e 5468 6520 636c 6965 6e74 206d  \n\nThe client m
-00002d90: 7573 7420 6265 2063 6f6e 6669 6775 7265  ust be configure
-00002da0: 6420 746f 2063 7265 6174 6520 6120 2273  d to create a "s
-00002db0: 6563 7572 6522 2063 6f6e 6e65 6374 696f  ecure" connectio
-00002dc0: 6e20 746f 2061 2022 7365 6375 7265 2220  n to a "secure" 
-00002dd0: 7365 7276 6572 2c5c 6e61 6e64 2061 6e20  server,\nand an 
-00002de0: 2269 6e73 6563 7572 6522 2063 6f6e 6e65  "insecure" conne
-00002df0: 6374 696f 6e20 746f 2061 6e20 2269 6e73  ction to an "ins
-00002e00: 6563 7572 6522 2073 6572 7665 722e 2042  ecure" server. B
-00002e10: 7920 6465 6661 756c 742c 2074 6865 2063  y default, the c
-00002e20: 6c69 656e 7420 7769 6c6c 5c6e 6174 7465  lient will\natte
-00002e30: 6d70 7420 746f 2063 7265 6174 6520 6120  mpt to create a 
-00002e40: 2273 6563 7572 6522 2063 6f6e 6e65 6374  "secure" connect
-00002e50: 696f 6e2e 2041 6e64 2073 6f2c 2077 6865  ion. And so, whe
-00002e60: 6e20 7573 696e 6720 616e 2022 696e 7365  n using an "inse
-00002e70: 6375 7265 2220 7365 7276 6572 2c5c 6e74  cure" server,\nt
-00002e80: 6865 2063 6f6e 6e65 6374 696f 6e20 7374  he connection st
-00002e90: 7269 6e67 206d 7573 7420 7370 6563 6966  ring must specif
-00002ea0: 7920 7468 6174 2074 6865 2063 6c69 656e  y that the clien
-00002eb0: 7420 7368 6f75 6c64 2061 7474 656d 7074  t should attempt
-00002ec0: 2074 6f20 6d61 6b65 2061 6e20 2269 6e73   to make an "ins
-00002ed0: 6563 7572 6522 5c6e 636f 6e6e 6563 7469  ecure"\nconnecti
-00002ee0: 6f6e 2e5c 6e5c 6e54 6865 2066 6f6c 6c6f  on.\n\nThe follo
-00002ef0: 7769 6e67 2063 6f6e 6e65 6374 696f 6e20  wing connection 
-00002f00: 7374 7269 6e67 2073 7065 6369 6669 6573  string specifies
-00002f10: 2074 6861 7420 7468 6520 636c 6965 6e74   that the client
-00002f20: 2073 686f 756c 645c 6e61 7474 656d 7074   should\nattempt
-00002f30: 2074 6f20 6372 6561 6520 616e 2022 696e   to creae an "in
-00002f40: 7365 6375 7265 2220 636f 6e6e 6563 7469  secure" connecti
-00002f50: 6f6e 2074 6f20 706f 7274 2032 3131 3420  on to port 2114 
-00002f60: 6f6e 2022 6c6f 6361 6c68 6f73 7422 2e5c  on "localhost".\
-00002f70: 6e57 6865 6e20 636f 6e6e 6563 7469 6e67  nWhen connecting
-00002f80: 2074 6f20 616e 2022 696e 7365 6375 7265   to an "insecure
-00002f90: 2220 7365 7276 6572 2c20 7468 6520 636c  " server, the cl
-00002fa0: 6965 6e74 2077 696c 6c20 6967 6e6f 7265  ient will ignore
-00002fb0: 2061 6e79 5c6e 7573 6572 6e61 6d65 2061   any\nusername a
-00002fc0: 6e64 2070 6173 7377 6f72 6420 696e 666f  nd password info
-00002fd0: 726d 6174 696f 6e20 696e 636c 7564 6564  rmation included
-00002fe0: 2069 6e20 7468 6520 636f 6e6e 6563 7469   in the connecti
-00002ff0: 6f6e 2073 7472 696e 672e 5c6e 5c6e 2020  on string.\n\n  
-00003000: 2020 6573 6462 3a2f 2f6c 6f63 616c 686f    esdb://localho
-00003010: 7374 3a32 3131 343f 546c 733d 6661 6c73  st:2114?Tls=fals
-00003020: 655c 6e5c 6e55 6e6c 6573 7320 7468 6520  e\n\nUnless the 
-00003030: 636f 6e6e 6563 7469 6f6e 2073 7472 696e  connection strin
-00003040: 6720 5552 4920 696e 636c 7564 6573 2074  g URI includes t
-00003050: 6865 2066 6965 6c64 2d76 616c 7565 2060  he field-value `
-00003060: 546c 733d 6661 6c73 6560 2069 6e5c 6e74  Tls=false` in\nt
-00003070: 6865 2071 7565 7279 2073 7472 696e 672c  he query string,
-00003080: 2074 6865 2060 726f 6f74 5f63 6572 7469   the `root_certi
-00003090: 6669 6361 7465 7360 2063 6f6e 7374 7275  ficates` constru
-000030a0: 6374 6f72 2061 7267 756d 656e 7420 6973  ctor argument is
-000030b0: 2061 6c73 6f20 7265 7175 6972 6564 2e5c   also required.\
-000030c0: 6e5c 6e57 6865 6e20 636f 6e6e 6563 7469  n\nWhen connecti
-000030d0: 6e67 2074 6f20 6120 2273 6563 7572 6522  ng to a "secure"
-000030e0: 2073 6572 7665 722c 2074 6865 2060 726f   server, the `ro
-000030f0: 6f74 5f63 6572 7469 6669 6361 7465 7360  ot_certificates`
-00003100: 2061 7267 756d 656e 7420 6973 2065 7870   argument is exp
-00003110: 6563 7465 6420 746f 5c6e 6265 2061 2050  ected to\nbe a P
-00003120: 7974 686f 6e20 6073 7472 6020 636f 6e74  ython `str` cont
-00003130: 6169 6e69 6e67 2050 454d 2065 6e63 6f64  aining PEM encod
-00003140: 6564 2053 534c 2f54 4c53 2072 6f6f 7420  ed SSL/TLS root 
-00003150: 6365 7274 6966 6963 6174 6573 2c20 616e  certificates, an
-00003160: 6420 6974 2069 7320 7573 6564 2066 6f72  d it is used for
-00003170: 5c6e 6175 7468 656e 7469 6361 7469 6e67  \nauthenticating
-00003180: 2074 6865 2073 6572 7665 7220 746f 2074   the server to t
-00003190: 6865 2063 6c69 656e 742e 2054 6869 7320  he client. This 
-000031a0: 7661 6c75 6520 6973 2070 6173 7365 6420  value is passed 
-000031b0: 6469 7265 6374 6c79 2074 6f5c 6e60 6772  directly to\n`gr
-000031c0: 7063 2e73 736c 5f63 6861 6e6e 656c 5f63  pc.ssl_channel_c
-000031d0: 7265 6465 6e74 6961 6c73 2829 602e 2049  redentials()`. I
-000031e0: 7420 6973 2063 6f6d 6d6f 6e6c 7920 7468  t is commonly th
-000031f0: 6520 6365 7274 6966 6963 6174 6520 6f66  e certificate of
-00003200: 2074 6865 2063 6572 7469 6669 6361 7465   the certificate
-00003210: 5c6e 6175 7468 6f72 6974 7920 7468 6174  \nauthority that
-00003220: 2077 6173 2072 6573 706f 6e73 6962 6c65   was responsible
-00003230: 2066 6f72 2067 656e 6572 6174 696e 6720   for generating 
-00003240: 7468 6520 5353 4c2f 544c 5320 6365 7274  the SSL/TLS cert
-00003250: 6966 6963 6174 6520 7573 6564 2062 7920  ificate used by 
-00003260: 7468 655c 6e45 7665 6e74 5374 6f72 6544  the\nEventStoreD
-00003270: 4220 7365 7276 6572 2e20 4275 742c 2061  B server. But, a
-00003280: 6c74 6572 6e61 7469 7665 6c79 2066 6f72  lternatively for
-00003290: 2064 6576 656c 6f70 6d65 6e74 2c20 796f   development, yo
-000032a0: 7520 6361 6e20 7573 6520 7468 6520 7365  u can use the se
-000032b0: 7276 6572 5c27 735c 6e63 6572 7469 6669  rver\'s\ncertifi
-000032c0: 6361 7465 2069 7473 656c 662e 5c6e 5c6e  cate itself.\n\n
-000032d0: 496e 2074 6865 2065 7861 6d70 6c65 2062  In the example b
-000032e0: 656c 6f77 2c20 7468 6520 636f 6e73 7472  elow, the constr
-000032f0: 7563 746f 7220 6172 6775 6d65 6e74 2076  uctor argument v
-00003300: 616c 7565 7320 6172 6520 7461 6b65 6e20  alues are taken 
-00003310: 6672 6f6d 2074 6865 206f 7065 7261 7469  from the operati
-00003320: 6e67 5c6e 7379 7374 656d 2065 6e76 6972  ng\nsystem envir
-00003330: 6f6e 6d65 6e74 2e20 5468 6973 2069 7320  onment. This is 
-00003340: 6120 7479 7069 6361 6c20 6172 7261 6e67  a typical arrang
-00003350: 656d 656e 7420 696e 2061 2070 726f 6475  ement in a produ
-00003360: 6374 696f 6e20 656e 7669 726f 6e6d 656e  ction environmen
-00003370: 742e 5c6e 5c6e 6060 6070 7974 686f 6e5c  t.\n\n```python\
-00003380: 6e69 6d70 6f72 7420 6f73 5c6e 5c6e 636c  nimport os\n\ncl
-00003390: 6965 6e74 203d 2045 5344 4243 6c69 656e  ient = ESDBClien
-000033a0: 7428 5c6e 2020 2020 7572 693d 6f73 2e67  t(\n    uri=os.g
-000033b0: 6574 656e 7628 2245 5344 425f 5552 4922  etenv("ESDB_URI"
-000033c0: 292c 5c6e 2020 2020 726f 6f74 5f63 6572  ),\n    root_cer
-000033d0: 7469 6669 6361 7465 733d 6f73 2e67 6574  tificates=os.get
-000033e0: 656e 7628 2245 5344 425f 524f 4f54 5f43  env("ESDB_ROOT_C
-000033f0: 4552 5449 4649 4341 5445 5322 292c 5c6e  ERTIFICATES"),\n
-00003400: 295c 6e60 6060 5c6e 5c6e 5c6e 2323 2053  )\n```\n\n\n## S
-00003410: 7472 6561 6d73 5c6e 5c6e 496e 2045 7665  treams\n\nIn Eve
-00003420: 6e74 5374 6f72 6544 422c 2061 2022 7374  ntStoreDB, a "st
-00003430: 7265 616d 2220 6973 2061 2073 6571 7565  ream" is a seque
-00003440: 6e63 6520 6f66 2072 6563 6f72 6465 6420  nce of recorded 
-00003450: 6576 656e 7473 2074 6861 7420 616c 6c20  events that all 
-00003460: 6861 7665 5c6e 7468 6520 7361 6d65 2022  have\nthe same "
-00003470: 7374 7265 616d 206e 616d 6522 2e20 5468  stream name". Th
-00003480: 6572 6520 7769 6c6c 206e 6f72 6d61 6c6c  ere will normall
-00003490: 7920 6265 206d 616e 7920 7374 7265 616d  y be many stream
-000034a0: 7320 696e 2061 2064 6174 6162 6173 652e  s in a database.
-000034b0: 5c6e 4561 6368 2072 6563 6f72 6465 6420  \nEach recorded 
-000034c0: 6576 656e 7420 6861 7320 6120 2273 7472  event has a "str
-000034d0: 6561 6d20 706f 7369 7469 6f6e 2220 696e  eam position" in
-000034e0: 2069 7473 2073 7472 6561 6d2c 2061 6e64   its stream, and
-000034f0: 2061 2022 636f 6d6d 6974 2070 6f73 6974   a "commit posit
-00003500: 696f 6e22 5c6e 696e 2074 6865 2064 6174  ion"\nin the dat
-00003510: 6162 6173 652e 2054 6865 2073 7472 6561  abase. The strea
-00003520: 6d20 706f 7369 7469 6f6e 7320 6f66 2074  m positions of t
-00003530: 6865 2072 6563 6f72 6465 6420 6576 656e  he recorded even
-00003540: 7473 2069 6e20 6120 7374 7265 616d 2069  ts in a stream i
-00003550: 7320 6120 6761 706c 6573 735c 6e73 6571  s a gapless\nseq
-00003560: 7565 6e63 6520 7374 6172 7469 6e67 2066  uence starting f
-00003570: 726f 6d20 7a65 726f 2e20 5468 6520 636f  rom zero. The co
-00003580: 6d6d 6974 2070 6f73 6974 696f 6e73 206f  mmit positions o
-00003590: 6620 7468 6520 7265 636f 7264 6564 2065  f the recorded e
-000035a0: 7665 6e74 7320 696e 2074 6865 2064 6174  vents in the dat
-000035b0: 6162 6173 655c 6e66 6f72 6d20 6120 7365  abase\nform a se
-000035c0: 7175 656e 6365 2074 6861 7420 6973 206e  quence that is n
-000035d0: 6f74 2067 6170 6c65 7373 2e5c 6e5c 6e54  ot gapless.\n\nT
-000035e0: 6865 206d 6574 686f 6473 2060 6170 7065  he methods `appe
-000035f0: 6e64 5f65 7665 6e74 7328 2960 2c20 6072  nd_events()`, `r
-00003600: 6561 645f 7374 7265 616d 5f65 7665 6e74  ead_stream_event
-00003610: 7328 2960 2061 6e64 2060 7265 6164 5f61  s()` and `read_a
-00003620: 6c6c 5f65 7665 6e74 7328 2960 2063 616e  ll_events()` can
-00003630: 5c6e 6265 2075 7365 6420 746f 2072 6563  \nbe used to rec
-00003640: 6f72 6420 616e 6420 7265 6164 2065 7665  ord and read eve
-00003650: 6e74 7320 696e 2074 6865 2064 6174 6162  nts in the datab
-00003660: 6173 652e 5c6e 5c6e 2323 2320 4170 7065  ase.\n\n### Appe
-00003670: 6e64 2065 7665 6e74 735c 6e5c 6e54 6865  nd events\n\nThe
-00003680: 2060 6170 7065 6e64 5f65 7665 6e74 7328   `append_events(
-00003690: 2960 206d 6574 686f 6420 6361 6e20 6265  )` method can be
-000036a0: 2075 7365 6420 746f 2077 7269 7465 2061   used to write a
-000036b0: 2073 6571 7565 6e63 6520 6f66 206e 6577   sequence of new
-000036c0: 2065 7665 6e74 7320 6174 6f6d 6963 616c   events atomical
-000036d0: 6c79 5c6e 746f 2061 2022 7374 7265 616d  ly\nto a "stream
-000036e0: 222e 2057 7269 7469 6e67 206e 6577 2065  ". Writing new e
-000036f0: 7665 6e74 7320 6569 7468 6572 2063 7265  vents either cre
-00003700: 6174 6573 2061 2073 7472 6561 6d2c 206f  ates a stream, o
-00003710: 7220 6170 7065 6e64 7320 6576 656e 7473  r appends events
-00003720: 2074 6f20 7468 6520 656e 645c 6e6f 6620   to the end\nof 
-00003730: 6120 7374 7265 616d 2e20 5468 6973 206d  a stream. This m
-00003740: 6574 686f 6420 6973 2069 6465 6d70 6f74  ethod is idempot
-00003750: 656e 7420 2873 6565 2062 656c 6f77 292e  ent (see below).
-00003760: 5c6e 5c6e 5468 6973 206d 6574 686f 6420  \n\nThis method 
-00003770: 6361 6e20 6265 2075 7365 6420 746f 2072  can be used to r
-00003780: 6563 6f72 6420 6174 6f6d 6963 616c 6c79  ecord atomically
-00003790: 2061 6c6c 2074 6865 206e 6577 5c6e 6576   all the new\nev
-000037a0: 656e 7473 2074 6861 7420 6172 6520 6765  ents that are ge
-000037b0: 6e65 7261 7465 6420 7768 656e 2065 7865  nerated when exe
-000037c0: 6375 7469 6e67 2061 2063 6f6d 6d61 6e64  cuting a command
-000037d0: 2069 6e20 616e 2061 7070 6c69 6361 7469   in an applicati
-000037e0: 6f6e 2e5c 6e5c 6e54 6872 6565 2061 7267  on.\n\nThree arg
-000037f0: 756d 656e 7473 2061 7265 2072 6571 7569  uments are requi
-00003800: 7265 642c 2060 7374 7265 616d 5f6e 616d  red, `stream_nam
-00003810: 6560 2c20 6065 7870 6563 7465 645f 706f  e`, `expected_po
-00003820: 7369 7469 6f6e 605c 6e61 6e64 2060 6576  sition`\nand `ev
-00003830: 656e 7473 602e 5c6e 5c6e 5468 6520 6073  ents`.\n\nThe `s
-00003840: 7472 6561 6d5f 6e61 6d65 6020 6172 6775  tream_name` argu
-00003850: 6d65 6e74 2069 7320 7265 7175 6972 6564  ment is required
-00003860: 2c20 616e 6420 6973 2065 7870 6563 7465  , and is expecte
-00003870: 6420 746f 2062 6520 6120 5079 7468 6f6e  d to be a Python
-00003880: 5c6e 6073 7472 6020 6f62 6a65 6374 2074  \n`str` object t
-00003890: 6861 7420 756e 6971 7565 6c79 2069 6465  hat uniquely ide
-000038a0: 6e74 6966 6965 7320 7468 6520 7374 7265  ntifies the stre
-000038b0: 616d 2069 6e20 7468 6520 6461 7461 6261  am in the databa
-000038c0: 7365 2e5c 6e5c 6e54 6865 2060 6578 7065  se.\n\nThe `expe
-000038d0: 6374 6564 5f70 6f73 6974 696f 6e60 2061  cted_position` a
-000038e0: 7267 756d 656e 7420 6973 2072 6571 7569  rgument is requi
-000038f0: 7265 642c 2069 7320 6578 7065 6374 6564  red, is expected
-00003900: 2074 6f20 6265 3a20 604e 6f6e 6560 5c6e   to be: `None`\n
-00003910: 6966 2065 7665 6e74 7320 6172 6520 6265  if events are be
-00003920: 696e 6720 7772 6974 7465 6e20 746f 2061  ing written to a
-00003930: 206e 6577 2073 7472 6561 6d2c 2061 6e64   new stream, and
-00003940: 206f 7468 6572 7769 7365 2061 6e20 5079   otherwise an Py
-00003950: 7468 6f6e 2060 696e 7460 5c6e 6571 7561  thon `int`\nequa
-00003960: 6c20 746f 2074 6865 2070 6f73 6974 696f  l to the positio
-00003970: 6e20 696e 2074 6865 2073 7472 6561 6d20  n in the stream 
-00003980: 6f66 2074 6865 206c 6173 7420 7265 636f  of the last reco
-00003990: 7264 6564 2065 7665 6e74 2069 6e20 7468  rded event in th
-000039a0: 6520 7374 7265 616d 2e5c 6e5c 6e54 6865  e stream.\n\nThe
-000039b0: 2060 6576 656e 7473 6020 6172 6775 6d65   `events` argume
-000039c0: 6e74 2069 7320 7265 7175 6972 6564 2c20  nt is required, 
-000039d0: 616e 6420 6973 2065 7870 6563 7465 6420  and is expected 
-000039e0: 746f 2062 6520 6120 7365 7175 656e 6365  to be a sequence
-000039f0: 206f 6620 6e65 775c 6e65 7665 6e74 206f   of new\nevent o
-00003a00: 626a 6563 7473 2074 6f20 6265 2061 7070  bjects to be app
-00003a10: 656e 6465 6420 746f 2074 6865 206e 616d  ended to the nam
-00003a20: 6564 2073 7472 6561 6d2e 2054 6865 2060  ed stream. The `
-00003a30: 4e65 7745 7665 6e74 6020 636c 6173 7320  NewEvent` class 
-00003a40: 7368 6f75 6c64 5c6e 6265 2075 7365 6420  should\nbe used 
-00003a50: 746f 2063 6f6e 7374 7275 6374 206e 6577  to construct new
-00003a60: 2065 7665 6e74 206f 626a 6563 7473 2028   event objects (
-00003a70: 7365 6520 6265 6c6f 7729 2e5c 6e5c 6e54  see below).\n\nT
-00003a80: 6869 7320 6d65 7468 6f64 2074 616b 6573  his method takes
-00003a90: 2061 6e20 6f70 7469 6f6e 616c 2060 7469   an optional `ti
-00003aa0: 6d65 6f75 7460 2061 7267 756d 656e 742c  meout` argument,
-00003ab0: 2077 6869 6368 2069 7320 6120 5079 7468   which is a Pyth
-00003ac0: 6f6e 2060 666c 6f61 7460 2074 6861 7420  on `float` that 
-00003ad0: 7365 7473 5c6e 6120 6465 6164 6c69 6e65  sets\na deadline
-00003ae0: 2066 6f72 2074 6865 2063 6f6d 706c 6574   for the complet
-00003af0: 696f 6e20 6f66 2074 6865 2067 5250 4320  ion of the gRPC 
-00003b00: 6f70 6572 6174 696f 6e2e 5c6e 5c6e 5374  operation.\n\nSt
-00003b10: 7265 616d 7320 6172 6520 6372 6561 7465  reams are create
-00003b20: 6420 6279 2077 7269 7469 6e67 2065 7665  d by writing eve
-00003b30: 6e74 732e 2054 6865 2063 6f72 7265 6374  nts. The correct
-00003b40: 2076 616c 7565 206f 6620 7468 6520 6065   value of the `e
-00003b50: 7870 6563 7465 645f 706f 7369 7469 6f6e  xpected_position
-00003b60: 605c 6e61 7267 756d 656e 7420 7768 656e  `\nargument when
-00003b70: 2077 7269 7469 6e67 2074 6865 2066 6972   writing the fir
-00003b80: 7374 2065 7665 6e74 206f 6620 6120 6e65  st event of a ne
-00003b90: 7720 7374 7265 616d 2069 7320 604e 6f6e  w stream is `Non
-00003ba0: 6560 2e20 506c 6561 7365 206e 6f74 652c  e`. Please note,
-00003bb0: 2069 7420 6973 5c6e 6e6f 7420 706f 7373   it is\nnot poss
-00003bc0: 6962 6c65 2074 6f20 736f 6d65 686f 7720  ible to somehow 
-00003bd0: 6372 6561 7465 2061 6e20 2265 6d70 7479  create an "empty
-00003be0: 2220 7374 7265 616d 2069 6e20 4576 656e  " stream in Even
-00003bf0: 7453 746f 7265 4442 2e5c 6e5c 6e54 6865  tStoreDB.\n\nThe
-00003c00: 2073 7472 6561 6d20 706f 7369 7469 6f6e   stream position
-00003c10: 7320 6f66 2072 6563 6f72 6465 6420 6576  s of recorded ev
-00003c20: 656e 7473 2069 6e20 6120 7374 7265 616d  ents in a stream
-00003c30: 2073 7461 7274 2066 726f 6d20 7a65 726f   start from zero
-00003c40: 2c20 616e 6420 666f 726d 2061 2067 6170  , and form a gap
-00003c50: 6c65 7373 5c6e 7365 7175 656e 6365 206f  less\nsequence o
-00003c60: 6620 696e 7465 6765 7273 2e20 5468 6520  f integers. The 
-00003c70: 7374 7265 616d 2070 6f73 6974 696f 6e20  stream position 
-00003c80: 6f66 2074 6865 2066 6972 7374 2072 6563  of the first rec
-00003c90: 6f72 6465 6420 6576 656e 7420 696e 2061  orded event in a
-00003ca0: 2073 7472 6561 6d20 6973 5c6e 6030 602e   stream is\n`0`.
-00003cb0: 2041 6e64 2073 6f20 7768 656e 2061 7070   And so when app
-00003cc0: 656e 6469 6e67 2074 6865 2073 6563 6f6e  ending the secon
-00003cd0: 6420 6e65 7720 6576 656e 7420 746f 2061  d new event to a
-00003ce0: 2073 7472 6561 6d20 7468 6174 2068 6173   stream that has
-00003cf0: 206f 6e65 2072 6563 6f72 6465 6420 6576   one recorded ev
-00003d00: 656e 742c 5c6e 7468 6520 636f 7272 6563  ent,\nthe correc
-00003d10: 7420 7661 6c75 6520 6f66 2074 6865 2060  t value of the `
-00003d20: 6578 7065 6374 6564 5f70 6f73 6974 696f  expected_positio
-00003d30: 6e60 2061 7267 756d 656e 7420 6973 2060  n` argument is `
-00003d40: 3060 2e20 5369 6d69 6c61 726c 792c 2074  0`. Similarly, t
-00003d50: 6865 2073 7472 6561 6d5c 6e70 6f73 6974  he stream\nposit
-00003d60: 696f 6e20 6f66 2074 6865 2073 6563 6f6e  ion of the secon
-00003d70: 6420 7265 636f 7264 6564 2065 7665 6e74  d recorded event
-00003d80: 2069 6e20 6120 7374 7265 616d 2069 7320   in a stream is 
-00003d90: 6031 602c 2061 6e64 2073 6f20 7768 656e  `1`, and so when
-00003da0: 2061 7070 656e 6469 6e67 2074 6865 5c6e   appending the\n
-00003db0: 7468 6972 6420 6e65 7720 6576 656e 7420  third new event 
-00003dc0: 746f 2061 2073 7472 6561 6d20 7468 6174  to a stream that
-00003dd0: 2068 6173 2074 776f 2072 6563 6f72 6465   has two recorde
-00003de0: 6420 6576 656e 7473 2c20 7468 6520 636f  d events, the co
-00003df0: 7272 6563 7420 7661 6c75 6520 6f66 2074  rrect value of t
-00003e00: 6865 5c6e 6065 7870 6563 7465 645f 706f  he\n`expected_po
-00003e10: 7369 7469 6f6e 6020 6172 6775 6d65 6e74  sition` argument
-00003e20: 2069 7320 6031 602e 2041 6e64 2073 6f20   is `1`. And so 
-00003e30: 6f6e 2e2e 2e20 2854 6865 7265 2069 7320  on... (There is 
-00003e40: 6120 7468 656f 7265 7469 6361 6c20 6d61  a theoretical ma
-00003e50: 7869 6d75 6d5c 6e6e 756d 6265 7220 6f66  ximum\nnumber of
-00003e60: 2072 6563 6f72 6465 6420 6576 656e 7473   recorded events
-00003e70: 2074 6861 7420 616e 7920 7374 7265 616d   that any stream
-00003e80: 2063 616e 2068 6176 652c 2062 7574 2049   can have, but I
-00003e90: 5c27 6d20 6e6f 7420 7375 7265 2077 6861  \'m not sure wha
-00003ea0: 7420 6974 2069 733b 5c6e 6d61 7962 6520  t it is;\nmaybe 
-00003eb0: 392c 3232 332c 3337 322c 3033 362c 3835  9,223,372,036,85
-00003ec0: 342c 3737 352c 3830 3720 6265 6361 7573  4,775,807 becaus
-00003ed0: 6520 6974 2069 7320 696d 706c 656d 656e  e it is implemen
-00003ee0: 7465 6420 6173 2061 2060 6c6f 6e67 6020  ted as a `long` 
-00003ef0: 696e 2043 233f 295c 6e5c 6e49 6620 7468  in C#?)\n\nIf th
-00003f00: 6572 6520 6973 2061 206d 6973 6d61 7463  ere is a mismatc
-00003f10: 6820 6265 7477 6565 6e20 7468 6520 6769  h between the gi
-00003f20: 7665 6e20 7661 6c75 6520 6f66 2074 6865  ven value of the
-00003f30: 2060 6578 7065 6374 6564 5f70 6f73 6974   `expected_posit
-00003f40: 696f 6e60 2061 7267 756d 656e 745c 6e61  ion` argument\na
-00003f50: 6e64 2074 6865 2070 6f73 6974 696f 6e20  nd the position 
-00003f60: 6f66 2074 6865 206c 6173 7420 7265 636f  of the last reco
-00003f70: 7264 6564 2065 7665 6e74 2069 6e20 6120  rded event in a 
-00003f80: 7374 7265 616d 2c20 7468 656e 2061 6e20  stream, then an 
-00003f90: 6045 7870 6563 7465 6450 6f73 6974 696f  `ExpectedPositio
-00003fa0: 6e45 7272 6f72 605c 6e65 7863 6570 7469  nError`\nexcepti
-00003fb0: 6f6e 2077 696c 6c20 6265 2072 6169 7365  on will be raise
-00003fc0: 642e 2054 6869 7320 6566 6665 6374 6976  d. This effectiv
-00003fd0: 656c 7920 6163 636f 6d70 6c69 7368 6573  ely accomplishes
-00003fe0: 206f 7074 696d 6973 7469 6320 636f 6e63   optimistic conc
-00003ff0: 7572 7265 6e63 7920 636f 6e74 726f 6c2e  urrency control.
-00004000: 5c6e 5c6e 4966 2079 6f75 2077 6973 6820  \n\nIf you wish 
-00004010: 746f 2064 6973 6162 6c65 206f 7074 696d  to disable optim
-00004020: 6973 7469 6320 636f 6e63 7572 7265 6e63  istic concurrenc
-00004030: 7920 636f 6e74 726f 6c20 7768 656e 2061  y control when a
-00004040: 7070 656e 6469 6e67 206e 6577 2065 7665  ppending new eve
-00004050: 6e74 732c 2079 6f75 5c6e 6361 6e20 7365  nts, you\ncan se
-00004060: 7420 7468 6520 6065 7870 6563 7465 645f  t the `expected_
-00004070: 706f 7369 7469 6f6e 6020 746f 2061 206e  position` to a n
-00004080: 6567 6174 6976 6520 696e 7465 6765 722e  egative integer.
-00004090: 5c6e 5c6e 4966 2079 6f75 206e 6565 6420  \n\nIf you need 
-000040a0: 746f 2064 6973 636f 7665 7220 7468 6520  to discover the 
-000040b0: 6375 7272 656e 7420 706f 7369 7469 6f6e  current position
-000040c0: 206f 6620 7468 6520 6c61 7374 2072 6563   of the last rec
-000040d0: 6f72 6465 6420 6576 656e 7420 696e 2061  orded event in a
-000040e0: 2073 7472 6561 6d2c 5c6e 796f 7520 6361   stream,\nyou ca
-000040f0: 6e20 7573 6520 7468 6520 6067 6574 5f73  n use the `get_s
-00004100: 7472 6561 6d5f 706f 7369 7469 6f6e 2829  tream_position()
-00004110: 6020 6d65 7468 6f64 2028 7365 6520 6265  ` method (see be
-00004120: 6c6f 7729 2e5c 6e5c 6e50 6c65 6173 6520  low).\n\nPlease 
-00004130: 6e6f 7465 2c20 7468 6520 6170 7065 6e64  note, the append
-00004140: 2065 7665 6e74 7320 6f70 6572 6174 696f   events operatio
-00004150: 6e20 6973 2061 746f 6d69 632c 2073 6f20  n is atomic, so 
-00004160: 7468 6174 2065 6974 6865 7220 616c 6c5c  that either all\
-00004170: 6e6f 7220 6e6f 6e65 206f 6620 7468 6520  nor none of the 
-00004180: 6769 7665 6e20 6e65 7720 6576 656e 7473  given new events
-00004190: 2077 696c 6c20 6265 2072 6563 6f72 6465   will be recorde
-000041a0: 642e 2042 7920 6465 7369 676e 2c20 6974  d. By design, it
-000041b0: 2069 7320 6f6e 6c79 5c6e 706f 7373 6962   is only\npossib
-000041c0: 6c65 2077 6974 6820 4576 656e 7453 746f  le with EventSto
-000041d0: 7265 4442 2074 6f20 6174 6f6d 6963 616c  reDB to atomical
-000041e0: 6c79 2072 6563 6f72 6420 6e65 7720 6576  ly record new ev
-000041f0: 656e 7473 2069 6e20 6f6e 6520 7374 7265  ents in one stre
-00004200: 616d 2e5c 6e5c 6e49 6e20 7468 6520 6578  am.\n\nIn the ex
-00004210: 616d 706c 6520 6265 6c6f 772c 2061 206e  ample below, a n
-00004220: 6577 2065 7665 6e74 2069 7320 6170 7065  ew event is appe
-00004230: 6e64 6564 2074 6f20 6120 6e65 7720 7374  nded to a new st
-00004240: 7265 616d 2e5c 6e5c 6e60 6060 7079 7468  ream.\n\n```pyth
-00004250: 6f6e 5c6e 6672 6f6d 2075 7569 6420 696d  on\nfrom uuid im
-00004260: 706f 7274 2075 7569 6434 5c6e 5c6e 6672  port uuid4\n\nfr
-00004270: 6f6d 2065 7364 6263 6c69 656e 7420 696d  om esdbclient im
-00004280: 706f 7274 204e 6577 4576 656e 745c 6e5c  port NewEvent\n\
-00004290: 6e23 2043 6f6e 7374 7275 6374 206e 6577  n# Construct new
-000042a0: 2065 7665 6e74 206f 626a 6563 742e 5c6e   event object.\n
-000042b0: 6576 656e 7431 203d 204e 6577 4576 656e  event1 = NewEven
-000042c0: 7428 7479 7065 3d5c 274f 7264 6572 4372  t(type=\'OrderCr
-000042d0: 6561 7465 645c 272c 2064 6174 613d 625c  eated\', data=b\
-000042e0: 2764 6174 6131 5c27 295c 6e5c 6e23 2044  'data1\')\n\n# D
-000042f0: 6566 696e 6520 7374 7265 616d 206e 616d  efine stream nam
-00004300: 652e 5c6e 7374 7265 616d 5f6e 616d 6531  e.\nstream_name1
-00004310: 203d 2073 7472 2875 7569 6434 2829 295c   = str(uuid4())\
-00004320: 6e5c 6e23 2041 7070 656e 6420 6c69 7374  n\n# Append list
-00004330: 206f 6620 6576 656e 7473 2074 6f20 6e65   of events to ne
-00004340: 7720 7374 7265 616d 2e5c 6e63 6f6d 6d69  w stream.\ncommi
-00004350: 745f 706f 7369 7469 6f6e 3120 3d20 636c  t_position1 = cl
-00004360: 6965 6e74 2e61 7070 656e 645f 6576 656e  ient.append_even
-00004370: 7473 285c 6e20 2020 2073 7472 6561 6d5f  ts(\n    stream_
-00004380: 6e61 6d65 3d73 7472 6561 6d5f 6e61 6d65  name=stream_name
-00004390: 312c 5c6e 2020 2020 6578 7065 6374 6564  1,\n    expected
-000043a0: 5f70 6f73 6974 696f 6e3d 4e6f 6e65 2c5c  _position=None,\
-000043b0: 6e20 2020 2065 7665 6e74 733d 5b65 7665  n    events=[eve
-000043c0: 6e74 315d 2c5c 6e29 5c6e 6060 605c 6e5c  nt1],\n)\n```\n\
-000043d0: 6e49 6e20 7468 6520 6578 616d 706c 6520  nIn the example 
-000043e0: 6265 6c6f 772c 2074 776f 2073 7562 7365  below, two subse
-000043f0: 7175 656e 7420 6576 656e 7473 2061 7265  quent events are
-00004400: 2061 7070 656e 6465 6420 746f 2061 6e20   appended to an 
-00004410: 6578 6973 7469 6e67 5c6e 7374 7265 616d  existing\nstream
-00004420: 2e5c 6e5c 6e60 6060 7079 7468 6f6e 5c6e  .\n\n```python\n
-00004430: 6576 656e 7432 203d 204e 6577 4576 656e  event2 = NewEven
-00004440: 7428 7479 7065 3d5c 274f 7264 6572 5570  t(type=\'OrderUp
-00004450: 6461 7465 645c 272c 2064 6174 613d 625c  dated\', data=b\
-00004460: 2764 6174 6132 5c27 295c 6e65 7665 6e74  'data2\')\nevent
-00004470: 3320 3d20 4e65 7745 7665 6e74 2874 7970  3 = NewEvent(typ
-00004480: 653d 5c27 4f72 6465 7244 656c 6574 6564  e=\'OrderDeleted
-00004490: 5c27 2c20 6461 7461 3d62 5c27 6461 7461  \', data=b\'data
-000044a0: 335c 2729 5c6e 5c6e 636f 6d6d 6974 5f70  3\')\n\ncommit_p
-000044b0: 6f73 6974 696f 6e32 203d 2063 6c69 656e  osition2 = clien
-000044c0: 742e 6170 7065 6e64 5f65 7665 6e74 7328  t.append_events(
-000044d0: 5c6e 2020 2020 7374 7265 616d 5f6e 616d  \n    stream_nam
-000044e0: 653d 7374 7265 616d 5f6e 616d 6531 2c5c  e=stream_name1,\
-000044f0: 6e20 2020 2065 7870 6563 7465 645f 706f  n    expected_po
-00004500: 7369 7469 6f6e 3d30 2c5c 6e20 2020 2065  sition=0,\n    e
-00004510: 7665 6e74 733d 5b65 7665 6e74 322c 2065  vents=[event2, e
-00004520: 7665 6e74 335d 2c5c 6e29 5c6e 6060 605c  vent3],\n)\n```\
-00004530: 6e5c 6e49 6620 7468 6520 6f70 6572 6174  n\nIf the operat
-00004540: 696f 6e20 6973 2073 7563 6365 7373 6675  ion is successfu
-00004550: 6c2c 2074 6869 7320 6d65 7468 6f64 2072  l, this method r
-00004560: 6574 7572 6e73 2061 6e20 696e 7465 6765  eturns an intege
-00004570: 725c 6e72 6570 7265 7365 6e74 696e 6720  r\nrepresenting 
-00004580: 7468 6520 6f76 6572 616c 6c20 2263 6f6d  the overall "com
-00004590: 6d69 7420 706f 7369 7469 6f6e 2220 6173  mit position" as
-000045a0: 2069 7420 7761 7320 7768 656e 2074 6865   it was when the
-000045b0: 206f 7065 7261 7469 6f6e 5c6e 7761 7320   operation\nwas 
-000045c0: 636f 6d70 6c65 7465 642e 204f 7468 6572  completed. Other
-000045d0: 7769 7365 2c20 616e 2065 7863 6570 7469  wise, an excepti
-000045e0: 6f6e 2077 696c 6c20 6265 2072 6169 7365  on will be raise
-000045f0: 642e 5c6e 5c6e 4120 2263 6f6d 6d69 7420  d.\n\nA "commit 
-00004600: 706f 7369 7469 6f6e 2220 6973 2061 206d  position" is a m
-00004610: 6f6e 6f74 6f6e 6963 616c 6c79 2069 6e63  onotonically inc
-00004620: 7265 6173 696e 6720 696e 7465 6765 7220  reasing integer 
-00004630: 7265 7072 6573 656e 7469 6e67 5c6e 7468  representing\nth
-00004640: 6520 706f 7369 7469 6f6e 206f 6620 7468  e position of th
-00004650: 6520 7265 636f 7264 6564 2065 7665 6e74  e recorded event
-00004660: 2069 6e20 6120 2274 6f74 616c 206f 7264   in a "total ord
-00004670: 6572 2220 6f66 2061 6c6c 2072 6563 6f72  er" of all recor
-00004680: 6465 645c 6e65 7665 6e74 7320 696e 2074  ded\nevents in t
-00004690: 6865 2064 6174 6162 6173 6520 6163 726f  he database acro
-000046a0: 7373 2061 6c6c 2073 7472 6561 6d73 2e20  ss all streams. 
-000046b0: 4974 2069 7320 7468 6520 6163 7475 616c  It is the actual
-000046c0: 2070 6f73 6974 696f 6e5c 6e6f 6620 7468   position\nof th
-000046d0: 6520 6576 656e 7420 7265 636f 7264 206f  e event record o
-000046e0: 6e20 6469 736b 2c20 616e 6420 7468 6572  n disk, and ther
-000046f0: 6520 6172 6520 7573 7561 6c6c 7920 6c61  e are usually la
-00004700: 7267 6520 6469 6666 6572 656e 6365 735c  rge differences\
-00004710: 6e62 6574 7765 656e 2073 7563 6365 7373  nbetween success
-00004720: 6976 6520 636f 6d6d 6974 732e 2049 6e20  ive commits. In 
-00004730: 636f 6e73 6571 7565 6e63 652c 2074 6865  consequence, the
-00004740: 2073 6571 7565 6e63 6520 6f66 2063 6f6d   sequence of com
-00004750: 6d69 745c 6e70 6f73 6974 696f 6e73 2069  mit\npositions i
-00004760: 7320 6e6f 7420 6761 706c 6573 732e 2049  s not gapless. I
-00004770: 6e64 6565 642c 2074 6865 7265 2061 7265  ndeed, there are
-00004780: 2075 7375 616c 6c79 206c 6172 6765 2064   usually large d
-00004790: 6966 6665 7265 6e63 6573 5c6e 6265 7477  ifferences\nbetw
-000047a0: 6565 6e20 7468 6520 636f 6d6d 6974 2070  een the commit p
-000047b0: 6f73 6974 696f 6e73 206f 6620 7375 6363  ositions of succ
-000047c0: 6573 7369 7665 2072 6563 6f72 6465 6420  essive recorded 
-000047d0: 6576 656e 7473 2e5c 6e5c 6e54 6865 2022  events.\n\nThe "
-000047e0: 636f 6d6d 6974 2070 6f73 6974 696f 6e22  commit position"
-000047f0: 2072 6574 7572 6e65 6420 6279 2060 6170   returned by `ap
-00004800: 7065 6e64 5f65 7665 6e74 7328 2960 2069  pend_events()` i
-00004810: 7320 7468 6174 206f 6620 7468 6520 6c61  s that of the la
-00004820: 7374 5c6e 7265 636f 7264 6564 2065 7665  st\nrecorded eve
-00004830: 6e74 2069 6e20 7468 6520 6769 7665 6e20  nt in the given 
-00004840: 6261 7463 6820 6f66 206e 6577 2065 7665  batch of new eve
-00004850: 6e74 732e 5c6e 5c6e 5468 6520 2263 6f6d  nts.\n\nThe "com
-00004860: 6d69 7420 706f 7369 7469 6f6e 2220 7265  mit position" re
-00004870: 7475 726e 6564 2069 6e20 7468 6973 2077  turned in this w
-00004880: 6179 2063 616e 2074 6865 7265 666f 7265  ay can therefore
-00004890: 2062 6520 7573 6564 2074 6f20 7761 6974   be used to wait
-000048a0: 5c6e 666f 7220 6120 646f 776e 7374 7265  \nfor a downstre
-000048b0: 616d 2063 6f6d 706f 6e65 6e74 2074 6f20  am component to 
-000048c0: 6861 7665 2070 726f 6365 7373 6564 2061  have processed a
-000048d0: 6c6c 2074 6865 2065 7665 6e74 7320 7468  ll the events th
-000048e0: 6174 2077 6572 6520 7265 636f 7264 6564  at were recorded
-000048f0: 2e5c 6e5c 6e46 6f72 2065 7861 6d70 6c65  .\n\nFor example
-00004900: 2c20 636f 6e73 6964 6572 2061 2075 7365  , consider a use
-00004910: 7220 696e 7465 7266 6163 6520 636f 6d6d  r interface comm
-00004920: 616e 6420 7468 6174 2072 6573 756c 7473  and that results
-00004930: 2069 6e20 7468 6520 7265 636f 7264 696e   in the recordin
-00004940: 675c 6e6f 6620 6e65 7720 6576 656e 7473  g\nof new events
-00004950: 2c20 616e 6420 6120 7175 6572 7920 696e  , and a query in
-00004960: 746f 2061 6e20 6576 656e 7475 616c 6c79  to an eventually
-00004970: 2063 6f6e 7369 7374 656e 7420 6d61 7465   consistent mate
-00004980: 7269 616c 697a 6564 5c6e 7669 6577 2069  rialized\nview i
-00004990: 6e20 6120 646f 776e 7374 7265 616d 2063  n a downstream c
-000049a0: 6f6d 706f 6e65 6e74 2074 6861 7420 6973  omponent that is
-000049b0: 2075 7064 6174 6564 2066 726f 6d20 7468   updated from th
-000049c0: 6573 6520 6576 656e 7473 2e20 4966 2074  ese events. If t
-000049d0: 6865 206e 6577 5c6e 6576 656e 7473 2068  he new\nevents h
-000049e0: 6176 6520 6e6f 7420 7965 7420 6265 656e  ave not yet been
-000049f0: 2070 726f 6365 7373 6564 2c20 7468 6520   processed, the 
-00004a00: 7669 6577 2077 6f75 6c64 2062 6520 7374  view would be st
-00004a10: 616c 652e 2054 6865 2022 636f 6d6d 6974  ale. The "commit
-00004a20: 2070 6f73 6974 696f 6e22 5c6e 6361 6e20   position"\ncan 
-00004a30: 6265 2075 7365 6420 6279 2074 6865 2075  be used by the u
-00004a40: 7365 7220 696e 7465 7266 6163 6520 746f  ser interface to
-00004a50: 2070 6f6c 6c20 7468 6520 646f 776e 7374   poll the downst
-00004a60: 7265 616d 2063 6f6d 706f 6e65 6e74 2075  ream component u
-00004a70: 6e74 696c 2069 7420 6861 735c 6e70 726f  ntil it has\npro
-00004a80: 6365 7373 6564 2074 686f 7365 206e 6577  cessed those new
-00004a90: 2065 7665 6e74 732c 2061 6674 6572 2077   events, after w
-00004aa0: 6869 6368 2074 696d 6520 7468 6520 7669  hich time the vi
-00004ab0: 6577 2077 696c 6c20 6e6f 7420 6265 2073  ew will not be s
-00004ac0: 7461 6c65 2e5c 6e5c 6e5c 6e23 2323 2041  tale.\n\n\n### A
-00004ad0: 7070 656e 6420 6576 656e 745c 6e5c 6e54  ppend event\n\nT
-00004ae0: 6865 2060 6170 7065 6e64 5f65 7665 6e74  he `append_event
-00004af0: 2829 6020 6d65 7468 6f64 2063 616e 2062  ()` method can b
-00004b00: 6520 7573 6564 2074 6f20 7772 6974 6520  e used to write 
-00004b10: 6120 7369 6e67 6c65 206e 6577 2065 7665  a single new eve
-00004b20: 6e74 2074 6f20 6120 7374 7265 616d 2e5c  nt to a stream.\
-00004b30: 6e5c 6e54 6872 6565 2061 7267 756d 656e  n\nThree argumen
-00004b40: 7473 2061 7265 2072 6571 7569 7265 642c  ts are required,
-00004b50: 2060 7374 7265 616d 5f6e 616d 6560 2c20   `stream_name`, 
-00004b60: 6065 7870 6563 7465 645f 706f 7369 7469  `expected_positi
-00004b70: 6f6e 6020 616e 6420 6065 7665 6e74 602e  on` and `event`.
-00004b80: 5c6e 5c6e 5468 6973 206d 6574 686f 6420  \n\nThis method 
-00004b90: 776f 726b 7320 696e 2074 6865 2073 616d  works in the sam
-00004ba0: 6520 7761 7920 6173 2060 6170 7065 6e64  e way as `append
-00004bb0: 5f65 7665 6e74 7328 2960 2c20 686f 7765  _events()`, howe
-00004bc0: 7665 7220 6065 7665 6e74 6020 6973 2065  ver `event` is e
-00004bd0: 7870 6563 7465 645c 6e74 6f20 6265 2061  xpected\nto be a
-00004be0: 2073 696e 676c 6520 604e 6577 4576 656e   single `NewEven
-00004bf0: 7460 2e5c 6e5c 6e54 6869 7320 6d65 7468  t`.\n\nThis meth
-00004c00: 6f64 2074 616b 6573 2061 6e20 6f70 7469  od takes an opti
-00004c10: 6f6e 616c 2060 7469 6d65 6f75 7460 2061  onal `timeout` a
-00004c20: 7267 756d 656e 742c 2077 6869 6368 2069  rgument, which i
-00004c30: 7320 6120 5079 7468 6f6e 2060 666c 6f61  s a Python `floa
-00004c40: 7460 2074 6861 7420 7365 7473 5c6e 6120  t` that sets\na 
-00004c50: 6465 6164 6c69 6e65 2066 6f72 2074 6865  deadline for the
-00004c60: 2063 6f6d 706c 6574 696f 6e20 6f66 2074   completion of t
-00004c70: 6865 2067 5250 4320 6f70 6572 6174 696f  he gRPC operatio
-00004c80: 6e2e 5c6e 5c6e 5369 6e63 6520 7468 6520  n.\n\nSince the 
-00004c90: 6861 6e64 6c69 6e67 206f 6620 6120 636f  handling of a co
-00004ca0: 6d6d 616e 6420 696e 2079 6f75 7220 6170  mmand in your ap
-00004cb0: 706c 6963 6174 696f 6e20 6d61 7920 7265  plication may re
-00004cc0: 7375 6c74 2069 6e20 6f6e 6520 6f72 206d  sult in one or m
-00004cd0: 616e 795c 6e6e 6577 2065 7665 6e74 732c  any\nnew events,
-00004ce0: 2061 6e64 2074 6865 2072 6573 756c 7473   and the results
-00004cf0: 206f 6620 6861 6e64 6c69 6e67 2061 2063   of handling a c
-00004d00: 6f6d 6d61 6e64 2073 686f 756c 6420 6265  ommand should be
-00004d10: 2072 6563 6f72 6465 6420 6174 6f6d 6963   recorded atomic
-00004d20: 616c 6c79 2c5c 6e61 6e64 2074 6865 2077  ally,\nand the w
-00004d30: 7269 7469 6e67 206f 6620 6e65 7720 6576  riting of new ev
-00004d40: 656e 7473 2067 656e 6572 6174 6564 2062  ents generated b
-00004d50: 7920 6120 636f 6d6d 616e 6420 6861 6e64  y a command hand
-00004d60: 6c65 7220 6973 2075 7375 616c 6c79 2061  ler is usually a
-00004d70: 2063 6f6e 6365 726e 5c6e 7468 6174 2069   concern\nthat i
-00004d80: 7320 6661 6374 6f72 6564 206f 7574 2061  s factored out a
-00004d90: 6e64 2075 7365 6420 6576 6572 7977 6865  nd used everywhe
-00004da0: 7265 2069 6e20 6120 7072 6f6a 6563 742c  re in a project,
-00004db0: 2069 7420 6973 2071 7569 7465 2075 7375   it is quite usu
-00004dc0: 616c 2069 6e20 6120 7072 6f6a 6563 745c  al in a project\
-00004dd0: 6e74 6f20 6f6e 6c79 2075 7365 2060 6170  nto only use `ap
-00004de0: 7065 6e64 5f65 7665 6e74 7328 2960 2074  pend_events()` t
-00004df0: 6f20 7265 636f 7264 206e 6577 2065 7665  o record new eve
-00004e00: 6e74 732e 2046 6f72 2074 6869 7320 7265  nts. For this re
-00004e10: 6173 6f6e 2c20 616e 2065 7861 6d70 6c65  ason, an example
-00004e20: 2069 735c 6e6e 6f74 2070 726f 7669 6465   is\nnot provide
-00004e30: 6420 6865 7265 2e5c 6e5c 6e5c 6e23 2323  d here.\n\n\n###
-00004e40: 2049 6465 6d70 6f74 656e 7420 6170 7065   Idempotent appe
-00004e50: 6e64 206f 7065 7261 7469 6f6e 735c 6e5c  nd operations\n\
-00004e60: 6e53 6f6d 6574 696d 6573 2069 7420 6d61  nSometimes it ma
-00004e70: 7920 6861 7070 656e 2074 6861 7420 6120  y happen that a 
-00004e80: 6e65 7720 6576 656e 7420 6973 2073 7563  new event is suc
-00004e90: 6365 7373 6675 6c6c 7920 7265 636f 7264  cessfully record
-00004ea0: 6564 2061 6e64 2074 6865 6e20 736f 6d65  ed and then some
-00004eb0: 686f 775c 6e74 6865 2063 6f6e 6e65 6374  how\nthe connect
-00004ec0: 696f 6e20 746f 2074 6865 2064 6174 6162  ion to the datab
-00004ed0: 6173 6520 6765 7473 2069 6e74 6572 7275  ase gets interru
-00004ee0: 7074 6564 2062 6566 6f72 6520 7468 6520  pted before the 
-00004ef0: 7375 6363 6573 7366 756c 2063 616c 6c20  successful call 
-00004f00: 6361 6e20 7265 7475 726e 5c6e 7375 6363  can return\nsucc
-00004f10: 6573 7366 756c 6c79 2074 6f20 7468 6520  essfully to the 
-00004f20: 636c 6965 6e74 2e20 496e 2063 6173 6520  client. In case 
-00004f30: 6f66 2061 6e20 6572 726f 7220 7768 656e  of an error when
-00004f40: 2061 7070 656e 6469 6e67 2061 6e20 6576   appending an ev
-00004f50: 656e 742c 2069 7420 6d61 7920 6265 5c6e  ent, it may be\n
-00004f60: 6465 7369 7261 626c 6520 746f 2072 6574  desirable to ret
-00004f70: 7279 2061 7070 656e 6469 6e67 2074 6865  ry appending the
-00004f80: 2073 616d 6520 6576 656e 7420 6174 2074   same event at t
-00004f90: 6865 2073 616d 6520 706f 7369 7469 6f6e  he same position
-00004fa0: 2e20 4966 2074 6865 2065 7665 6e74 2077  . If the event w
-00004fb0: 6173 5c6e 696e 2066 6163 7420 7375 6363  as\nin fact succ
-00004fc0: 6573 7366 756c 6c79 2072 6563 6f72 6465  essfully recorde
-00004fd0: 642c 2069 7420 6973 2063 6f6e 7665 6e69  d, it is conveni
-00004fe0: 656e 7420 666f 7220 7468 6520 7265 7472  ent for the retr
-00004ff0: 7920 746f 2072 6574 7572 6e20 7375 6363  y to return succ
-00005000: 6573 7366 756c 6c79 5c6e 7769 7468 6f75  essfully\nwithou
-00005010: 7420 7261 6973 696e 6720 616e 2065 7272  t raising an err
-00005020: 6f72 2064 7565 2074 6f20 6f70 7469 6d69  or due to optimi
-00005030: 7374 6963 2063 6f6e 6375 7272 656e 6379  stic concurrency
-00005040: 2063 6f6e 7472 6f6c 2028 6173 2064 6573   control (as des
-00005050: 6372 6962 6564 2061 626f 7665 292e 5c6e  cribed above).\n
-00005060: 5c6e 5468 6520 6578 616d 706c 6520 6265  \nThe example be
-00005070: 6c6f 7720 7368 6f77 7320 7468 6520 6061  low shows the `a
-00005080: 7070 656e 645f 6576 656e 7473 2829 6020  ppend_events()` 
-00005090: 6d65 7468 6f64 2062 6569 6e67 2063 616c  method being cal
-000050a0: 6c65 6420 6167 6169 6e20 7769 7468 5c6e  led again with\n
-000050b0: 6065 7665 6e74 3360 2061 6e64 2060 6578  `event3` and `ex
-000050c0: 7065 6374 6564 5f70 6f73 6974 696f 6e3d  pected_position=
-000050d0: 3260 2e20 5765 2063 616e 2073 6565 2074  2`. We can see t
-000050e0: 6861 7420 7265 7065 6174 696e 6720 7468  hat repeating th
-000050f0: 6520 6361 6c6c 2074 6f5c 6e60 6170 7065  e call to\n`appe
-00005100: 6e64 5f65 7665 6e74 7328 2960 2072 6574  nd_events()` ret
-00005110: 7572 6e73 2073 7563 6365 7373 6675 6c6c  urns successfull
-00005120: 792e 5c6e 5c6e 6060 6070 7974 686f 6e5c  y.\n\n```python\
-00005130: 6e23 2052 6574 7279 2061 7070 656e 6469  n# Retry appendi
-00005140: 6e67 2065 7665 6e74 332e 5c6e 636f 6d6d  ng event3.\ncomm
-00005150: 6974 5f70 6f73 6974 696f 6e5f 7265 7472  it_position_retr
-00005160: 7920 3d20 636c 6965 6e74 2e61 7070 656e  y = client.appen
-00005170: 645f 6576 656e 7473 285c 6e20 2020 2073  d_events(\n    s
-00005180: 7472 6561 6d5f 6e61 6d65 3d73 7472 6561  tream_name=strea
-00005190: 6d5f 6e61 6d65 312c 5c6e 2020 2020 6578  m_name1,\n    ex
-000051a0: 7065 6374 6564 5f70 6f73 6974 696f 6e3d  pected_position=
-000051b0: 302c 5c6e 2020 2020 6576 656e 7473 3d5b  0,\n    events=[
-000051c0: 6576 656e 7432 2c20 6576 656e 7433 5d2c  event2, event3],
-000051d0: 5c6e 295c 6e60 6060 5c6e 5c6e 5765 2063  \n)\n```\n\nWe c
-000051e0: 616e 2073 6565 2074 6861 7420 7468 6520  an see that the 
-000051f0: 7361 6d65 2063 6f6d 6d69 7420 706f 7369  same commit posi
-00005200: 7469 6f6e 2069 7320 7265 7475 726e 6564  tion is returned
-00005210: 2061 7320 6162 6f76 652e 5c6e 5c6e 6060   as above.\n\n``
-00005220: 6070 7974 686f 6e5c 6e61 7373 6572 7420  `python\nassert 
-00005230: 636f 6d6d 6974 5f70 6f73 6974 696f 6e5f  commit_position_
-00005240: 7265 7472 7920 3d3d 2063 6f6d 6d69 745f  retry == commit_
-00005250: 706f 7369 7469 6f6e 325c 6e60 6060 5c6e  position2\n```\n
-00005260: 5c6e 5765 2063 616e 2061 6c73 6f20 7365  \nWe can also se
-00005270: 6520 7468 6520 7374 7265 616d 2068 6173  e the stream has
-00005280: 2062 6565 6e20 756e 6368 616e 6765 6420   been unchanged 
-00005290: 6465 7370 6974 6520 6361 6c6c 696e 6720  despite calling 
-000052a0: 7468 6520 6170 7065 6e64 5f65 7665 6e74  the append_event
-000052b0: 7328 295c 6e74 7769 6365 2077 6974 6820  s()\ntwice with 
-000052c0: 7468 6520 7361 6d65 2061 7267 756d 656e  the same argumen
-000052d0: 7473 2c20 6279 2063 616c 6c69 6e67 2060  ts, by calling `
-000052e0: 7265 6164 5f73 7472 6561 6d5f 6576 656e  read_stream_even
-000052f0: 7473 2829 602e 2054 6861 7420 6973 2c20  ts()`. That is, 
-00005300: 7468 6572 655c 6e61 7265 2073 7469 6c6c  there\nare still
-00005310: 206f 6e6c 7920 7468 7265 6520 6576 656e   only three even
-00005320: 7473 2069 6e20 7468 6520 7374 7265 616d  ts in the stream
-00005330: 2e5c 6e5c 6e60 6060 7079 7468 6f6e 5c6e  .\n\n```python\n
-00005340: 7265 7370 6f6e 7365 203d 2063 6c69 656e  response = clien
-00005350: 742e 7265 6164 5f73 7472 6561 6d5f 6576  t.read_stream_ev
-00005360: 656e 7473 285c 6e20 2020 2073 7472 6561  ents(\n    strea
-00005370: 6d5f 6e61 6d65 3d73 7472 6561 6d5f 6e61  m_name=stream_na
-00005380: 6d65 315c 6e29 5c6e 5c6e 6576 656e 7473  me1\n)\n\nevents
-00005390: 203d 206c 6973 7428 7265 7370 6f6e 7365   = list(response
-000053a0: 295c 6e61 7373 6572 7420 6c65 6e28 6576  )\nassert len(ev
-000053b0: 656e 7473 2920 3d3d 2033 5c6e 6060 605c  ents) == 3\n```\
-000053c0: 6e5c 6e54 6869 7320 6964 656d 706f 7465  n\nThis idempote
-000053d0: 6e74 2062 6568 6176 696f 7572 2069 7320  nt behaviour is 
-000053e0: 6163 7469 7661 7465 6420 6265 6361 7573  activated becaus
-000053f0: 6520 7468 6520 604e 6577 4576 656e 7460  e the `NewEvent`
-00005400: 2063 6c61 7373 2068 6173 2061 6e20 6069   class has an `i
-00005410: 6460 5c6e 6174 7472 6962 7574 6520 7468  d`\nattribute th
-00005420: 6174 2c20 6279 2064 6566 6175 6c74 2c20  at, by default, 
-00005430: 6973 2061 7373 6967 6e65 6420 6120 6e65  is assigned a ne
-00005440: 7720 616e 6420 756e 6971 7565 2076 6572  w and unique ver
-00005450: 7369 6f6e 2d34 2055 5549 4420 7768 656e  sion-4 UUID when
-00005460: 2061 6e5c 6e69 6e73 7461 6e63 6520 6f66   an\ninstance of
-00005470: 2060 4e65 7745 7665 6e74 6020 6973 2063   `NewEvent` is c
-00005480: 6f6e 7374 7275 6374 6564 2e20 4966 2065  onstructed. If e
-00005490: 7665 6e74 7320 7769 7468 2074 6865 2073  vents with the s
-000054a0: 616d 6520 6069 6460 2061 7265 2061 7070  ame `id` are app
-000054b0: 656e 6465 645c 6e61 7420 7468 6520 7361  ended\nat the sa
-000054c0: 6d65 2060 6578 7065 6374 6564 5f70 6f73  me `expected_pos
-000054d0: 6974 696f 6e60 2c20 7468 6520 7374 7265  ition`, the stre
-000054e0: 616d 2077 696c 6c20 6265 2075 6e63 6861  am will be uncha
-000054f0: 6e67 6564 2c20 7468 6520 6f70 6572 6174  nged, the operat
-00005500: 696f 6e20 7769 6c6c 5c6e 636f 6d70 6c65  ion will\ncomple
-00005510: 7465 2073 7563 6365 7373 6675 6c6c 792c  te successfully,
-00005520: 2061 6e64 2074 6865 2073 616d 6520 636f   and the same co
-00005530: 6d6d 6974 2070 6f73 6974 696f 6e20 7769  mmit position wi
-00005540: 6c6c 2062 6520 7265 7475 726e 6564 2074  ll be returned t
-00005550: 6f20 7468 6520 6361 6c6c 6572 2e5c 6e5c  o the caller.\n\
-00005560: 6e60 6060 7079 7468 6f6e 5c6e 6672 6f6d  n```python\nfrom
-00005570: 2075 7569 6420 696d 706f 7274 2055 5549   uuid import UUI
-00005580: 445c 6e5c 6e5c 6e61 7373 6572 7420 6973  D\n\n\nassert is
-00005590: 696e 7374 616e 6365 2865 7665 6e74 312e  instance(event1.
-000055a0: 6964 2c20 5555 4944 295c 6e61 7373 6572  id, UUID)\nasser
-000055b0: 7420 6973 696e 7374 616e 6365 2865 7665  t isinstance(eve
-000055c0: 6e74 322e 6964 2c20 5555 4944 295c 6e61  nt2.id, UUID)\na
-000055d0: 7373 6572 7420 6973 696e 7374 616e 6365  ssert isinstance
-000055e0: 2865 7665 6e74 332e 6964 2c20 5555 4944  (event3.id, UUID
-000055f0: 295c 6e5c 6e61 7373 6572 7420 6576 656e  )\n\nassert even
-00005600: 7431 2e69 6420 213d 2065 7665 6e74 322e  t1.id != event2.
-00005610: 6964 5c6e 6173 7365 7274 2065 7665 6e74  id\nassert event
-00005620: 322e 6964 2021 3d20 6576 656e 7433 2e69  2.id != event3.i
-00005630: 645c 6e5c 6e61 7373 6572 7420 6576 656e  d\n\nassert even
-00005640: 7473 5b30 5d2e 6964 203d 3d20 6576 656e  ts[0].id == even
-00005650: 7431 2e69 645c 6e61 7373 6572 7420 6576  t1.id\nassert ev
-00005660: 656e 7473 5b31 5d2e 6964 203d 3d20 6576  ents[1].id == ev
-00005670: 656e 7432 2e69 645c 6e61 7373 6572 7420  ent2.id\nassert 
-00005680: 6576 656e 7473 5b32 5d2e 6964 203d 3d20  events[2].id == 
-00005690: 6576 656e 7433 2e69 645c 6e60 6060 5c6e  event3.id\n```\n
-000056a0: 5c6e 4974 2069 7320 706f 7373 6962 6c65  \nIt is possible
-000056b0: 2074 6f20 7365 7420 7468 6520 6069 6460   to set the `id`
-000056c0: 2063 6f6e 7374 7275 6374 6f72 2061 7267   constructor arg
-000056d0: 756d 656e 7420 6f66 2060 4e65 7745 7665  ument of `NewEve
-000056e0: 6e74 6020 7768 656e 2069 6e73 7461 6e74  nt` when instant
-000056f0: 6961 7469 6e67 5c6e 7468 6520 604e 6577  iating\nthe `New
-00005700: 4576 656e 7460 2063 6c61 7373 2c20 6275  Event` class, bu
-00005710: 7420 696e 2074 6865 2065 7861 6d70 6c65  t in the example
-00005720: 7320 6162 6f76 6520 7765 2068 6176 6520  s above we have 
-00005730: 6265 656e 2075 7369 6e67 2074 6865 2064  been using the d
-00005740: 6566 6175 6c74 5c6e 6265 6861 7669 6f75  efault\nbehaviou
-00005750: 722c 2077 6869 6368 2069 7320 7468 6174  r, which is that
-00005760: 2074 6865 2060 6964 6020 7661 6c75 6520   the `id` value 
-00005770: 6973 2067 656e 6572 6174 6564 2077 6865  is generated whe
-00005780: 6e20 7468 6520 604e 6577 4576 656e 7460  n the `NewEvent`
-00005790: 2063 6c61 7373 2069 735c 6e69 6e73 7461   class is\ninsta
-000057a0: 6e74 6961 7465 642e 5c6e 5c6e 5c6e 2323  ntiated.\n\n\n##
-000057b0: 2320 5265 6164 2073 7472 6561 6d20 6576  # Read stream ev
-000057c0: 656e 7473 5c6e 5c6e 5468 6520 6072 6561  ents\n\nThe `rea
-000057d0: 645f 7374 7265 616d 5f65 7665 6e74 7328  d_stream_events(
-000057e0: 2960 206d 6574 686f 6420 6361 6e20 6265  )` method can be
-000057f0: 2075 7365 6420 746f 2072 6561 6420 7468   used to read th
-00005800: 6520 7265 636f 7264 6564 2065 7665 6e74  e recorded event
-00005810: 7320 6f66 2061 2073 7472 6561 6d2e 5c6e  s of a stream.\n
-00005820: 5c6e 5468 6973 206d 6574 686f 6420 6361  \nThis method ca
-00005830: 6e20 6265 2075 7365 6420 746f 2072 6574  n be used to ret
-00005840: 7269 6576 6520 616c 6c20 7468 6520 7265  rieve all the re
-00005850: 636f 7264 6564 2065 7665 6e74 7320 666f  corded events fo
-00005860: 7220 616e 2061 6767 7265 6761 7465 2062  r an aggregate b
-00005870: 6566 6f72 655c 6e65 7865 6375 7469 6e67  efore\nexecuting
-00005880: 2061 2063 6f6d 6d61 6e64 2069 6e20 616e   a command in an
-00005890: 2061 7070 6c69 6361 7469 6f6e 2e5c 6e5c   application.\n\
-000058a0: 6e54 6869 7320 6d65 7468 6f64 2068 6173  nThis method has
-000058b0: 206f 6e65 2072 6571 7569 7265 6420 6172   one required ar
-000058c0: 6775 6d65 6e74 2c20 6073 7472 6561 6d5f  gument, `stream_
-000058d0: 6e61 6d65 602c 2077 6869 6368 2069 7320  name`, which is 
-000058e0: 7468 6520 6e61 6d65 206f 665c 6e74 6865  the name of\nthe
-000058f0: 2073 7472 6561 6d20 6672 6f6d 2077 6869   stream from whi
-00005900: 6368 2074 6f20 7265 6164 2065 7665 6e74  ch to read event
-00005910: 732e 2042 7920 6465 6661 756c 742c 2074  s. By default, t
-00005920: 6865 2072 6563 6f72 6465 6420 6576 656e  he recorded even
-00005930: 7473 2069 6e20 7468 655c 6e73 7472 6561  ts in the\nstrea
-00005940: 6d20 6172 6520 7265 7475 726e 6564 2069  m are returned i
-00005950: 6e20 7468 6520 6f72 6465 7220 7468 6579  n the order they
-00005960: 2077 6572 6520 7265 636f 7264 6564 2e5c   were recorded.\
-00005970: 6e5c 6e54 6865 206d 6574 686f 6420 6072  n\nThe method `r
-00005980: 6561 645f 7374 7265 616d 5f65 7665 6e74  ead_stream_event
-00005990: 7328 2960 2061 6c73 6f20 7375 7070 6f72  s()` also suppor
-000059a0: 7473 2066 6f75 7220 6f70 7469 6f6e 616c  ts four optional
-000059b0: 2061 7267 756d 656e 7473 2c5c 6e60 7374   arguments,\n`st
-000059c0: 7265 616d 5f70 6f73 6974 696f 6e60 2c20  ream_position`, 
-000059d0: 6062 6163 6b77 6172 6473 602c 2060 6c69  `backwards`, `li
-000059e0: 6d69 7460 2c20 616e 6420 6074 696d 656f  mit`, and `timeo
-000059f0: 7574 602e 5c6e 5c6e 5468 6520 6f70 7469  ut`.\n\nThe opti
-00005a00: 6f6e 616c 2060 7374 7265 616d 5f70 6f73  onal `stream_pos
-00005a10: 6974 696f 6e60 2061 7267 756d 656e 7420  ition` argument 
-00005a20: 6973 2061 6e20 6f70 7469 6f6e 616c 2069  is an optional i
-00005a30: 6e74 6567 6572 2074 6861 7420 6361 6e20  nteger that can 
-00005a40: 6265 2075 7365 6420 746f 5c6e 696e 6469  be used to\nindi
-00005a50: 6361 7465 2074 6865 2070 6f73 6974 696f  cate the positio
-00005a60: 6e20 696e 2074 6865 2073 7472 6561 6d20  n in the stream 
-00005a70: 6672 6f6d 2077 6869 6368 2074 6f20 7374  from which to st
-00005a80: 6172 7420 7265 6164 696e 672e 2054 6869  art reading. Thi
-00005a90: 7320 6172 6775 6d65 6e74 2069 735c 6e60  s argument is\n`
-00005aa0: 4e6f 6e65 6020 6279 2064 6566 6175 6c74  None` by default
-00005ab0: 2c20 7768 6963 6820 6d65 616e 7320 7468  , which means th
-00005ac0: 6520 7374 7265 616d 2077 696c 6c20 6265  e stream will be
-00005ad0: 2072 6561 6420 6569 7468 6572 2066 726f   read either fro
-00005ae0: 6d20 7468 6520 7374 6172 7420 6f66 2074  m the start of t
-00005af0: 6865 5c6e 7374 7265 616d 2028 7468 6520  he\nstream (the 
-00005b00: 6465 6661 756c 7420 6265 6861 7669 6f75  default behaviou
-00005b10: 7229 2c20 6f72 2066 726f 6d20 7468 6520  r), or from the 
-00005b20: 656e 6420 6f66 2074 6865 2073 7472 6561  end of the strea
-00005b30: 6d20 6966 2060 6261 636b 7761 7264 7360  m if `backwards`
-00005b40: 2069 735c 6e60 5472 7565 6020 2873 6565   is\n`True` (see
-00005b50: 2062 656c 6f77 292e 2057 6865 6e20 7265   below). When re
-00005b60: 6164 696e 6720 6120 7374 7265 616d 2066  ading a stream f
-00005b70: 726f 6d20 6120 7370 6563 6966 6963 2070  rom a specific p
-00005b80: 6f73 6974 696f 6e20 696e 2074 6865 2073  osition in the s
-00005b90: 7472 6561 6d2c 2074 6865 5c6e 7265 636f  tream, the\nreco
-00005ba0: 7264 6564 2065 7665 6e74 2061 7420 7468  rded event at th
-00005bb0: 6174 2070 6f73 6974 696f 6e20 5749 4c4c  at position WILL
-00005bc0: 2062 6520 696e 636c 7564 6564 2c20 626f   be included, bo
-00005bd0: 7468 2077 6865 6e20 7265 6164 696e 6720  th when reading 
-00005be0: 666f 7277 6172 6473 5c6e 6672 6f6d 2074  forwards\nfrom t
-00005bf0: 6861 7420 706f 7369 7469 6f6e 2c20 616e  hat position, an
-00005c00: 6420 7768 656e 2072 6561 6469 6e67 2062  d when reading b
-00005c10: 6163 6b77 6172 6473 2066 726f 6d20 7468  ackwards from th
-00005c20: 6174 2070 6f73 6974 696f 6e2e 5c6e 5c6e  at position.\n\n
-00005c30: 5468 6520 6f70 7469 6f6e 616c 2061 7267  The optional arg
-00005c40: 756d 656e 7420 6062 6163 6b77 6172 6473  ument `backwards
-00005c50: 6020 6973 2061 2062 6f6f 6c65 616e 2c20  ` is a boolean, 
-00005c60: 6279 2064 6566 6175 6c74 2060 4661 6c73  by default `Fals
-00005c70: 6560 2c20 7768 6963 6820 6d65 616e 7320  e`, which means 
-00005c80: 7468 655c 6e73 7472 6561 6d20 7769 6c6c  the\nstream will
-00005c90: 2062 6520 7265 6164 2066 6f72 7761 7264   be read forward
-00005ca0: 7320 6279 2064 6566 6175 6c74 2c20 736f  s by default, so
-00005cb0: 2074 6861 7420 6576 656e 7473 2061 7265   that events are
-00005cc0: 2072 6574 7572 6e65 6420 696e 2074 6865   returned in the
-00005cd0: 5c6e 6f72 6465 7220 7468 6579 2077 6572  \norder they wer
-00005ce0: 6520 6170 7065 6e64 6564 2c20 4966 2060  e appended, If `
-00005cf0: 6261 636b 7761 7264 7360 2069 7320 6054  backwards` is `T
-00005d00: 7275 6560 2c20 7468 6520 7374 7265 616d  rue`, the stream
-00005d10: 2077 696c 6c20 6265 2072 6561 645c 6e62   will be read\nb
-00005d20: 6163 6b77 6172 6473 2c20 736f 2074 6861  ackwards, so tha
-00005d30: 7420 6576 656e 7473 2061 7265 2072 6574  t events are ret
-00005d40: 7572 6e65 6420 696e 2072 6576 6572 7365  urned in reverse
-00005d50: 206f 7264 6572 2e5c 6e5c 6e54 6865 206f   order.\n\nThe o
-00005d60: 7074 696f 6e61 6c20 6172 6775 6d65 6e74  ptional argument
-00005d70: 2060 6c69 6d69 7460 2069 7320 616e 2069   `limit` is an i
-00005d80: 6e74 6567 6572 2077 6869 6368 206c 696d  nteger which lim
-00005d90: 6974 7320 7468 6520 6e75 6d62 6572 206f  its the number o
-00005da0: 6620 6576 656e 7473 2074 6861 7420 7769  f events that wi
-00005db0: 6c6c 5c6e 6265 2072 6574 7572 6e65 642e  ll\nbe returned.
-00005dc0: 2054 6865 2064 6566 6175 6c74 2076 616c   The default val
-00005dd0: 7565 2069 7320 6073 7973 2e6d 6178 696e  ue is `sys.maxin
-00005de0: 7460 2e5c 6e5c 6e54 6865 206f 7074 696f  t`.\n\nThe optio
-00005df0: 6e61 6c20 6172 6775 6d65 6e74 2060 7469  nal argument `ti
-00005e00: 6d65 6f75 7460 2069 7320 6120 5079 7468  meout` is a Pyth
-00005e10: 6f6e 2060 666c 6f61 7460 2077 6869 6368  on `float` which
-00005e20: 2073 6574 7320 6120 6465 6164 6c69 6e65   sets a deadline
-00005e30: 2066 6f72 2074 6865 2063 6f6d 706c 6574   for the complet
-00005e40: 696f 6e20 6f66 5c6e 7468 6520 6752 5043  ion of\nthe gRPC
-00005e50: 206f 7065 7261 7469 6f6e 2e5c 6e5c 6e54   operation.\n\nT
-00005e60: 6869 7320 6d65 7468 6f64 2072 6574 7572  his method retur
-00005e70: 6e73 2061 2050 7974 686f 6e20 6974 6572  ns a Python iter
-00005e80: 6162 6c65 206f 626a 6563 7420 7468 6174  able object that
-00005e90: 2079 6965 6c64 7320 6052 6563 6f72 6465   yields `Recorde
-00005ea0: 6445 7665 6e74 6020 6f62 6a65 6374 732e  dEvent` objects.
-00005eb0: 5c6e 5468 6573 6520 7265 636f 7264 6564  \nThese recorded
-00005ec0: 2065 7665 6e74 206f 626a 6563 7473 2061   event objects a
-00005ed0: 7265 2069 6e73 7461 6e63 6573 206f 6620  re instances of 
-00005ee0: 7468 6520 6052 6563 6f72 6465 6445 7665  the `RecordedEve
-00005ef0: 6e74 6020 636c 6173 7320 2873 6565 2062  nt` class (see b
-00005f00: 656c 6f77 295c 6e5c 6e54 6865 2065 7861  elow)\n\nThe exa
-00005f10: 6d70 6c65 2062 656c 6f77 2073 686f 7773  mple below shows
-00005f20: 2068 6f77 2074 6f20 7265 6164 2074 6865   how to read the
-00005f30: 2072 6563 6f72 6465 6420 6576 656e 7473   recorded events
-00005f40: 206f 6620 6120 7374 7265 616d 5c6e 666f   of a stream\nfo
-00005f50: 7277 6172 6473 2066 726f 6d20 7468 6520  rwards from the 
-00005f60: 7374 6172 7420 6f66 2074 6865 2073 7472  start of the str
-00005f70: 6561 6d20 746f 2074 6865 2065 6e64 206f  eam to the end o
-00005f80: 6620 7468 6520 7374 7265 616d 2e20 5468  f the stream. Th
-00005f90: 655c 6e6e 616d 6520 6f66 2061 2073 7472  e\nname of a str
-00005fa0: 6561 6d20 6973 2067 6976 656e 2077 6865  eam is given whe
-00005fb0: 6e20 6361 6c6c 696e 6720 7468 6520 6d65  n calling the me
-00005fc0: 7468 6f64 2e20 496e 2074 6869 7320 6578  thod. In this ex
-00005fd0: 616d 706c 652c 5c6e 7468 6520 6974 6572  ample,\nthe iter
-00005fe0: 6162 6c65 2072 6573 706f 6e73 6520 6f62  able response ob
-00005ff0: 6a65 6374 2069 7320 636f 6e76 6572 7465  ject is converte
-00006000: 6420 696e 746f 2061 2050 7974 686f 6e20  d into a Python 
-00006010: 606c 6973 7460 2c20 7768 6963 685c 6e63  `list`, which\nc
-00006020: 6f6e 7461 696e 7320 616c 6c20 7468 6520  ontains all the 
-00006030: 7265 636f 7264 6564 2065 7665 6e74 206f  recorded event o
-00006040: 626a 6563 7473 2074 6861 7420 7765 7265  bjects that were
-00006050: 2072 6561 6420 6672 6f6d 2074 6865 2073   read from the s
-00006060: 7472 6561 6d2e 5c6e 5c6e 6060 6070 7974  tream.\n\n```pyt
-00006070: 686f 6e5c 6e72 6573 706f 6e73 6520 3d20  hon\nresponse = 
-00006080: 636c 6965 6e74 2e72 6561 645f 7374 7265  client.read_stre
-00006090: 616d 5f65 7665 6e74 7328 5c6e 2020 2020  am_events(\n    
-000060a0: 7374 7265 616d 5f6e 616d 653d 7374 7265  stream_name=stre
-000060b0: 616d 5f6e 616d 6531 5c6e 295c 6e5c 6e65  am_name1\n)\n\ne
-000060c0: 7665 6e74 7320 3d20 6c69 7374 2872 6573  vents = list(res
-000060d0: 706f 6e73 6529 5c6e 6060 605c 6e5c 6e4e  ponse)\n```\n\nN
-000060e0: 6f77 2074 6861 7420 7765 2068 6176 6520  ow that we have 
-000060f0: 6120 6c69 7374 206f 6620 6576 656e 7420  a list of event 
-00006100: 6f62 6a65 6374 732c 2077 6520 6361 6e20  objects, we can 
-00006110: 6368 6563 6b20 7765 2067 6f74 2074 6865  check we got the
-00006120: 5c6e 7468 7265 6520 6576 656e 7473 2074  \nthree events t
-00006130: 6861 7420 7765 7265 2061 7070 656e 6465  hat were appende
-00006140: 6420 746f 2074 6865 2073 7472 6561 6d2c  d to the stream,
-00006150: 2061 6e64 2074 6861 7420 7468 6579 2061   and that they a
-00006160: 7265 5c6e 6f72 6465 7265 6420 6578 6163  re\nordered exac
-00006170: 746c 7920 6173 2074 6865 7920 7765 7265  tly as they were
-00006180: 2061 7070 656e 6465 642e 5c6e 5c6e 6060   appended.\n\n``
-00006190: 6070 7974 686f 6e5c 6e61 7373 6572 7420  `python\nassert 
-000061a0: 6c65 6e28 6576 656e 7473 2920 3d3d 2033  len(events) == 3
-000061b0: 5c6e 5c6e 6173 7365 7274 2065 7665 6e74  \n\nassert event
-000061c0: 735b 305d 2e73 7472 6561 6d5f 6e61 6d65  s[0].stream_name
-000061d0: 203d 3d20 7374 7265 616d 5f6e 616d 6531   == stream_name1
-000061e0: 5c6e 6173 7365 7274 2065 7665 6e74 735b  \nassert events[
-000061f0: 305d 2e73 7472 6561 6d5f 706f 7369 7469  0].stream_positi
-00006200: 6f6e 203d 3d20 305c 6e61 7373 6572 7420  on == 0\nassert 
-00006210: 6576 656e 7473 5b30 5d2e 7479 7065 203d  events[0].type =
-00006220: 3d20 6576 656e 7431 2e74 7970 655c 6e61  = event1.type\na
-00006230: 7373 6572 7420 6576 656e 7473 5b30 5d2e  ssert events[0].
-00006240: 6461 7461 203d 3d20 6576 656e 7431 2e64  data == event1.d
-00006250: 6174 615c 6e5c 6e61 7373 6572 7420 6576  ata\n\nassert ev
-00006260: 656e 7473 5b31 5d2e 7374 7265 616d 5f6e  ents[1].stream_n
-00006270: 616d 6520 3d3d 2073 7472 6561 6d5f 6e61  ame == stream_na
-00006280: 6d65 315c 6e61 7373 6572 7420 6576 656e  me1\nassert even
-00006290: 7473 5b31 5d2e 7374 7265 616d 5f70 6f73  ts[1].stream_pos
-000062a0: 6974 696f 6e20 3d3d 2031 5c6e 6173 7365  ition == 1\nasse
-000062b0: 7274 2065 7665 6e74 735b 315d 2e74 7970  rt events[1].typ
-000062c0: 6520 3d3d 2065 7665 6e74 322e 7479 7065  e == event2.type
-000062d0: 5c6e 6173 7365 7274 2065 7665 6e74 735b  \nassert events[
-000062e0: 315d 2e64 6174 6120 3d3d 2065 7665 6e74  1].data == event
-000062f0: 322e 6461 7461 5c6e 5c6e 6173 7365 7274  2.data\n\nassert
-00006300: 2065 7665 6e74 735b 325d 2e73 7472 6561   events[2].strea
-00006310: 6d5f 6e61 6d65 203d 3d20 7374 7265 616d  m_name == stream
-00006320: 5f6e 616d 6531 5c6e 6173 7365 7274 2065  _name1\nassert e
-00006330: 7665 6e74 735b 325d 2e73 7472 6561 6d5f  vents[2].stream_
-00006340: 706f 7369 7469 6f6e 203d 3d20 325c 6e61  position == 2\na
-00006350: 7373 6572 7420 6576 656e 7473 5b32 5d2e  ssert events[2].
-00006360: 7479 7065 203d 3d20 6576 656e 7433 2e74  type == event3.t
-00006370: 7970 655c 6e61 7373 6572 7420 6576 656e  ype\nassert even
-00006380: 7473 5b32 5d2e 6461 7461 203d 3d20 6576  ts[2].data == ev
-00006390: 656e 7433 2e64 6174 615c 6e60 6060 5c6e  ent3.data\n```\n
-000063a0: 5c6e 5468 6520 6578 616d 706c 6520 6265  \nThe example be
-000063b0: 6c6f 7720 7368 6f77 7320 686f 7720 746f  low shows how to
-000063c0: 2072 6561 6420 7265 636f 7264 6564 2065   read recorded e
-000063d0: 7665 6e74 7320 696e 2061 2073 7472 6561  vents in a strea
-000063e0: 6d20 666f 7277 6172 6473 2066 726f 6d5c  m forwards from\
-000063f0: 6e61 2073 7065 6369 6669 6320 7374 7265  na specific stre
-00006400: 616d 2070 6f73 6974 696f 6e20 746f 2074  am position to t
-00006410: 6865 2065 6e64 206f 6620 7468 6520 7374  he end of the st
-00006420: 7265 616d 2e5c 6e5c 6e60 6060 7079 7468  ream.\n\n```pyth
-00006430: 6f6e 5c6e 6576 656e 7473 203d 206c 6973  on\nevents = lis
-00006440: 7428 5c6e 2020 2020 636c 6965 6e74 2e72  t(\n    client.r
-00006450: 6561 645f 7374 7265 616d 5f65 7665 6e74  ead_stream_event
-00006460: 7328 5c6e 2020 2020 2020 2020 7374 7265  s(\n        stre
-00006470: 616d 5f6e 616d 653d 7374 7265 616d 5f6e  am_name=stream_n
-00006480: 616d 6531 2c5c 6e20 2020 2020 2020 2073  ame1,\n        s
-00006490: 7472 6561 6d5f 706f 7369 7469 6f6e 3d31  tream_position=1
-000064a0: 2c5c 6e20 2020 2029 5c6e 295c 6e5c 6e61  ,\n    )\n)\n\na
-000064b0: 7373 6572 7420 6c65 6e28 6576 656e 7473  ssert len(events
-000064c0: 2920 3d3d 2032 5c6e 5c6e 6173 7365 7274  ) == 2\n\nassert
-000064d0: 2065 7665 6e74 735b 305d 2e73 7472 6561   events[0].strea
-000064e0: 6d5f 6e61 6d65 203d 3d20 7374 7265 616d  m_name == stream
-000064f0: 5f6e 616d 6531 5c6e 6173 7365 7274 2065  _name1\nassert e
-00006500: 7665 6e74 735b 305d 2e73 7472 6561 6d5f  vents[0].stream_
-00006510: 706f 7369 7469 6f6e 203d 3d20 315c 6e61  position == 1\na
-00006520: 7373 6572 7420 6576 656e 7473 5b30 5d2e  ssert events[0].
-00006530: 7479 7065 203d 3d20 6576 656e 7432 2e74  type == event2.t
-00006540: 7970 655c 6e61 7373 6572 7420 6576 656e  ype\nassert even
-00006550: 7473 5b30 5d2e 6461 7461 203d 3d20 6576  ts[0].data == ev
-00006560: 656e 7432 2e64 6174 615c 6e5c 6e61 7373  ent2.data\n\nass
-00006570: 6572 7420 6576 656e 7473 5b31 5d2e 7374  ert events[1].st
-00006580: 7265 616d 5f6e 616d 6520 3d3d 2073 7472  ream_name == str
-00006590: 6561 6d5f 6e61 6d65 315c 6e61 7373 6572  eam_name1\nasser
-000065a0: 7420 6576 656e 7473 5b31 5d2e 7374 7265  t events[1].stre
-000065b0: 616d 5f70 6f73 6974 696f 6e20 3d3d 2032  am_position == 2
-000065c0: 5c6e 6173 7365 7274 2065 7665 6e74 735b  \nassert events[
-000065d0: 315d 2e74 7970 6520 3d3d 2065 7665 6e74  1].type == event
-000065e0: 332e 7479 7065 5c6e 6173 7365 7274 2065  3.type\nassert e
-000065f0: 7665 6e74 735b 315d 2e64 6174 6120 3d3d  vents[1].data ==
-00006600: 2065 7665 6e74 332e 6461 7461 5c6e 6060   event3.data\n``
-00006610: 605c 6e5c 6e54 6865 2065 7861 6d70 6c65  `\n\nThe example
-00006620: 2062 656c 6f77 2073 686f 7773 2068 6f77   below shows how
-00006630: 2074 6f20 7265 6164 2074 6865 2072 6563   to read the rec
-00006640: 6f72 6465 6420 6576 656e 7473 2069 6e20  orded events in 
-00006650: 6120 7374 7265 616d 2062 6163 6b77 6172  a stream backwar
-00006660: 6473 2066 726f 6d5c 6e74 6865 2065 6e64  ds from\nthe end
-00006670: 206f 6620 7468 6520 7374 7265 616d 2074   of the stream t
-00006680: 6f20 7468 6520 7374 6172 7420 6f66 2074  o the start of t
-00006690: 6865 2073 7472 6561 6d2e 5c6e 5c6e 6060  he stream.\n\n``
-000066a0: 6070 7974 686f 6e5c 6e65 7665 6e74 7320  `python\nevents 
-000066b0: 3d20 6c69 7374 285c 6e20 2020 2063 6c69  = list(\n    cli
-000066c0: 656e 742e 7265 6164 5f73 7472 6561 6d5f  ent.read_stream_
-000066d0: 6576 656e 7473 285c 6e20 2020 2020 2020  events(\n       
-000066e0: 2073 7472 6561 6d5f 6e61 6d65 3d73 7472   stream_name=str
-000066f0: 6561 6d5f 6e61 6d65 312c 5c6e 2020 2020  eam_name1,\n    
-00006700: 2020 2020 6261 636b 7761 7264 733d 5472      backwards=Tr
-00006710: 7565 2c5c 6e20 2020 2029 5c6e 295c 6e5c  ue,\n    )\n)\n\
-00006720: 6e61 7373 6572 7420 6c65 6e28 6576 656e  nassert len(even
-00006730: 7473 2920 3d3d 2033 5c6e 5c6e 6173 7365  ts) == 3\n\nasse
-00006740: 7274 2065 7665 6e74 735b 305d 2e73 7472  rt events[0].str
-00006750: 6561 6d5f 6e61 6d65 203d 3d20 7374 7265  eam_name == stre
-00006760: 616d 5f6e 616d 6531 5c6e 6173 7365 7274  am_name1\nassert
-00006770: 2065 7665 6e74 735b 305d 2e73 7472 6561   events[0].strea
-00006780: 6d5f 706f 7369 7469 6f6e 203d 3d20 325c  m_position == 2\
-00006790: 6e61 7373 6572 7420 6576 656e 7473 5b30  nassert events[0
-000067a0: 5d2e 7479 7065 203d 3d20 6576 656e 7433  ].type == event3
-000067b0: 2e74 7970 655c 6e61 7373 6572 7420 6576  .type\nassert ev
-000067c0: 656e 7473 5b30 5d2e 6461 7461 203d 3d20  ents[0].data == 
-000067d0: 6576 656e 7433 2e64 6174 615c 6e5c 6e61  event3.data\n\na
-000067e0: 7373 6572 7420 6576 656e 7473 5b31 5d2e  ssert events[1].
-000067f0: 7374 7265 616d 5f6e 616d 6520 3d3d 2073  stream_name == s
-00006800: 7472 6561 6d5f 6e61 6d65 315c 6e61 7373  tream_name1\nass
-00006810: 6572 7420 6576 656e 7473 5b31 5d2e 7374  ert events[1].st
-00006820: 7265 616d 5f70 6f73 6974 696f 6e20 3d3d  ream_position ==
-00006830: 2031 5c6e 6173 7365 7274 2065 7665 6e74   1\nassert event
-00006840: 735b 315d 2e74 7970 6520 3d3d 2065 7665  s[1].type == eve
-00006850: 6e74 322e 7479 7065 5c6e 6173 7365 7274  nt2.type\nassert
-00006860: 2065 7665 6e74 735b 315d 2e64 6174 6120   events[1].data 
-00006870: 3d3d 2065 7665 6e74 322e 6461 7461 5c6e  == event2.data\n
-00006880: 6060 605c 6e5c 6e54 6865 2065 7861 6d70  ```\n\nThe examp
-00006890: 6c65 2062 656c 6f77 2073 686f 7773 2068  le below shows h
-000068a0: 6f77 2074 6f20 7265 6164 2061 206c 696d  ow to read a lim
-000068b0: 6974 6564 206e 756d 6265 7220 2874 776f  ited number (two
-000068c0: 2920 6f66 2074 6865 2072 6563 6f72 6465  ) of the recorde
-000068d0: 6420 6576 656e 7473 5c6e 696e 2061 2073  d events\nin a s
-000068e0: 7472 6561 6d20 666f 7277 6172 6473 2066  tream forwards f
-000068f0: 726f 6d20 7468 6520 7374 6172 7420 6f66  rom the start of
-00006900: 2074 6865 2073 7472 6561 6d2e 5c6e 5c6e   the stream.\n\n
-00006910: 6060 6070 7974 686f 6e5c 6e65 7665 6e74  ```python\nevent
-00006920: 7320 3d20 6c69 7374 285c 6e20 2020 2063  s = list(\n    c
-00006930: 6c69 656e 742e 7265 6164 5f73 7472 6561  lient.read_strea
-00006940: 6d5f 6576 656e 7473 285c 6e20 2020 2020  m_events(\n     
-00006950: 2020 2073 7472 6561 6d5f 6e61 6d65 3d73     stream_name=s
-00006960: 7472 6561 6d5f 6e61 6d65 312c 5c6e 2020  tream_name1,\n  
-00006970: 2020 2020 2020 6c69 6d69 743d 322c 5c6e        limit=2,\n
-00006980: 2020 2020 295c 6e29 5c6e 5c6e 6173 7365      )\n)\n\nasse
-00006990: 7274 206c 656e 2865 7665 6e74 7329 203d  rt len(events) =
-000069a0: 3d20 325c 6e5c 6e61 7373 6572 7420 6576  = 2\n\nassert ev
-000069b0: 656e 7473 5b30 5d2e 7374 7265 616d 5f6e  ents[0].stream_n
-000069c0: 616d 6520 3d3d 2073 7472 6561 6d5f 6e61  ame == stream_na
-000069d0: 6d65 315c 6e61 7373 6572 7420 6576 656e  me1\nassert even
-000069e0: 7473 5b30 5d2e 7374 7265 616d 5f70 6f73  ts[0].stream_pos
-000069f0: 6974 696f 6e20 3d3d 2030 5c6e 6173 7365  ition == 0\nasse
-00006a00: 7274 2065 7665 6e74 735b 305d 2e74 7970  rt events[0].typ
-00006a10: 6520 3d3d 2065 7665 6e74 312e 7479 7065  e == event1.type
-00006a20: 5c6e 6173 7365 7274 2065 7665 6e74 735b  \nassert events[
-00006a30: 305d 2e64 6174 6120 3d3d 2065 7665 6e74  0].data == event
-00006a40: 312e 6461 7461 5c6e 5c6e 6173 7365 7274  1.data\n\nassert
-00006a50: 2065 7665 6e74 735b 315d 2e73 7472 6561   events[1].strea
-00006a60: 6d5f 6e61 6d65 203d 3d20 7374 7265 616d  m_name == stream
-00006a70: 5f6e 616d 6531 5c6e 6173 7365 7274 2065  _name1\nassert e
-00006a80: 7665 6e74 735b 315d 2e73 7472 6561 6d5f  vents[1].stream_
-00006a90: 706f 7369 7469 6f6e 203d 3d20 315c 6e61  position == 1\na
-00006aa0: 7373 6572 7420 6576 656e 7473 5b31 5d2e  ssert events[1].
-00006ab0: 7479 7065 203d 3d20 6576 656e 7432 2e74  type == event2.t
-00006ac0: 7970 655c 6e61 7373 6572 7420 6576 656e  ype\nassert even
-00006ad0: 7473 5b31 5d2e 6461 7461 203d 3d20 6576  ts[1].data == ev
-00006ae0: 656e 7432 2e64 6174 615c 6e60 6060 5c6e  ent2.data\n```\n
-00006af0: 5c6e 5468 6520 6578 616d 706c 6520 6265  \nThe example be
-00006b00: 6c6f 7720 7368 6f77 7320 686f 7720 746f  low shows how to
-00006b10: 2072 6561 6420 6120 6c69 6d69 7465 6420   read a limited 
-00006b20: 6e75 6d62 6572 2028 6f6e 6529 206f 6620  number (one) of 
-00006b30: 7468 6520 7265 636f 7264 6564 5c6e 6576  the recorded\nev
-00006b40: 656e 7473 2069 6e20 6120 7374 7265 616d  ents in a stream
-00006b50: 2062 6163 6b77 6172 6473 2066 726f 6d20   backwards from 
-00006b60: 6120 6769 7665 6e20 7374 7265 616d 2070  a given stream p
-00006b70: 6f73 6974 696f 6e2e 5c6e 5c6e 6060 6070  osition.\n\n```p
-00006b80: 7974 686f 6e5c 6e65 7665 6e74 7320 3d20  ython\nevents = 
-00006b90: 6c69 7374 285c 6e20 2020 2063 6c69 656e  list(\n    clien
-00006ba0: 742e 7265 6164 5f73 7472 6561 6d5f 6576  t.read_stream_ev
-00006bb0: 656e 7473 285c 6e20 2020 2020 2020 2073  ents(\n        s
-00006bc0: 7472 6561 6d5f 6e61 6d65 3d73 7472 6561  tream_name=strea
-00006bd0: 6d5f 6e61 6d65 312c 5c6e 2020 2020 2020  m_name1,\n      
-00006be0: 2020 7374 7265 616d 5f70 6f73 6974 696f    stream_positio
-00006bf0: 6e3d 322c 5c6e 2020 2020 2020 2020 6261  n=2,\n        ba
-00006c00: 636b 7761 7264 733d 5472 7565 2c5c 6e20  ckwards=True,\n 
-00006c10: 2020 2020 2020 206c 696d 6974 3d31 2c5c         limit=1,\
-00006c20: 6e20 2020 2029 5c6e 295c 6e5c 6e61 7373  n    )\n)\n\nass
-00006c30: 6572 7420 6c65 6e28 6576 656e 7473 2920  ert len(events) 
-00006c40: 3d3d 2031 5c6e 5c6e 6173 7365 7274 2065  == 1\n\nassert e
-00006c50: 7665 6e74 735b 305d 2e73 7472 6561 6d5f  vents[0].stream_
-00006c60: 6e61 6d65 203d 3d20 7374 7265 616d 5f6e  name == stream_n
-00006c70: 616d 6531 5c6e 6173 7365 7274 2065 7665  ame1\nassert eve
-00006c80: 6e74 735b 305d 2e73 7472 6561 6d5f 706f  nts[0].stream_po
-00006c90: 7369 7469 6f6e 203d 3d20 325c 6e61 7373  sition == 2\nass
-00006ca0: 6572 7420 6576 656e 7473 5b30 5d2e 7479  ert events[0].ty
-00006cb0: 7065 203d 3d20 6576 656e 7433 2e74 7970  pe == event3.typ
-00006cc0: 655c 6e61 7373 6572 7420 6576 656e 7473  e\nassert events
-00006cd0: 5b30 5d2e 6461 7461 203d 3d20 6576 656e  [0].data == even
-00006ce0: 7433 2e64 6174 615c 6e60 6060 5c6e 5c6e  t3.data\n```\n\n
-00006cf0: 2323 2320 5265 6164 2061 6c6c 2065 7665  ### Read all eve
-00006d00: 6e74 735c 6e5c 6e54 6865 206d 6574 686f  nts\n\nThe metho
-00006d10: 6420 6072 6561 645f 616c 6c5f 6576 656e  d `read_all_even
-00006d20: 7473 2829 6020 6361 6e20 6265 2075 7365  ts()` can be use
-00006d30: 6420 746f 2072 6561 6420 616c 6c20 7265  d to read all re
-00006d40: 636f 7264 6564 2065 7665 6e74 735c 6e69  corded events\ni
-00006d50: 6e20 7468 6520 6461 7461 6261 7365 2069  n the database i
-00006d60: 6e20 7468 6520 6f72 6465 7220 7468 6579  n the order they
-00006d70: 2077 6572 6520 7265 636f 7264 6564 2e20   were recorded. 
-00006d80: 416e 2069 7465 7261 626c 6520 6f62 6a65  An iterable obje
-00006d90: 6374 206f 665c 6e72 6563 6f72 6465 6420  ct of\nrecorded 
-00006da0: 6576 656e 7473 2069 7320 7265 7475 726e  events is return
-00006db0: 6564 2e20 5468 6973 2069 7465 7261 626c  ed. This iterabl
-00006dc0: 6520 6f62 6a65 6374 2077 696c 6c20 7374  e object will st
-00006dd0: 6f70 2077 6865 6e20 6974 2068 6173 5c6e  op when it has\n
-00006de0: 7969 656c 6465 6420 7468 6520 6c61 7374  yielded the last
-00006df0: 2072 6563 6f72 6465 6420 6576 656e 742e   recorded event.
-00006e00: 5c6e 5c6e 5468 6973 206d 6574 686f 6420  \n\nThis method 
-00006e10: 7375 7070 6f72 7473 2073 6978 206f 7074  supports six opt
-00006e20: 696f 6e61 6c20 6172 6775 6d65 6e74 732c  ional arguments,
-00006e30: 2060 636f 6d6d 6974 5f70 6f73 6974 696f   `commit_positio
-00006e40: 6e60 2c20 6062 6163 6b77 6172 6473 602c  n`, `backwards`,
-00006e50: 5c6e 6066 696c 7465 725f 6578 636c 7564  \n`filter_exclud
-00006e60: 6560 2c20 6066 696c 7465 725f 696e 636c  e`, `filter_incl
-00006e70: 7564 6560 2c20 606c 696d 6974 602c 2061  ude`, `limit`, a
-00006e80: 6e64 2060 7469 6d65 6f75 7460 2e5c 6e5c  nd `timeout`.\n\
-00006e90: 6e54 6865 206f 7074 696f 6e61 6c20 6172  nThe optional ar
-00006ea0: 6775 6d65 6e74 2060 636f 6d6d 6974 5f70  gument `commit_p
-00006eb0: 6f73 6974 696f 6e60 2069 7320 616e 206f  osition` is an o
-00006ec0: 7074 696f 6e61 6c20 696e 7465 6765 7220  ptional integer 
-00006ed0: 7468 6174 2063 616e 2062 6520 7573 6564  that can be used
-00006ee0: 2074 6f5c 6e73 7065 6369 6679 2074 6865   to\nspecify the
-00006ef0: 2063 6f6d 6d69 7420 706f 7369 7469 6f6e   commit position
-00006f00: 2066 726f 6d20 7768 6963 6820 746f 2073   from which to s
-00006f10: 7461 7274 2072 6561 6469 6e67 2e20 5468  tart reading. Th
-00006f20: 6973 2061 7267 756d 656e 7420 6973 2060  is argument is `
-00006f30: 4e6f 6e65 6020 6279 5c6e 6465 6661 756c  None` by\ndefaul
-00006f40: 742c 206d 6561 6e69 6e67 2074 6861 7420  t, meaning that 
-00006f50: 616c 6c20 7468 6520 6576 656e 7473 2077  all the events w
-00006f60: 696c 6c20 6265 2072 6561 6420 6569 7468  ill be read eith
-00006f70: 6572 2066 726f 6d20 7468 6520 7374 6172  er from the star
-00006f80: 742c 206f 725c 6e66 726f 6d20 7468 6520  t, or\nfrom the 
-00006f90: 656e 6420 6966 2060 6261 636b 7761 7264  end if `backward
-00006fa0: 7360 2069 7320 6054 7275 6560 2028 7365  s` is `True` (se
-00006fb0: 6520 6265 6c6f 7729 2e20 506c 6561 7365  e below). Please
-00006fc0: 206e 6f74 652c 2069 6620 7370 6563 6966   note, if specif
-00006fd0: 6965 642c 5c6e 7468 6520 7370 6563 6966  ied,\nthe specif
-00006fe0: 6965 6420 706f 7369 7469 6f6e 206d 7573  ied position mus
-00006ff0: 7420 6265 2061 6e20 6163 7475 616c 6c79  t be an actually
-00007000: 2065 7869 7374 696e 6720 636f 6d6d 6974   existing commit
-00007010: 2070 6f73 6974 696f 6e2c 2062 6563 6175   position, becau
-00007020: 7365 5c6e 616e 7920 6f74 6865 7220 6e75  se\nany other nu
-00007030: 6d62 6572 2077 696c 6c20 7265 7375 6c74  mber will result
-00007040: 2069 6e20 6120 7365 7276 6572 2065 7272   in a server err
-00007050: 6f72 2028 6174 206c 6561 7374 2069 6e20  or (at least in 
-00007060: 4576 656e 7453 746f 7265 4442 2076 3231  EventStoreDB v21
-00007070: 2e31 3029 2e5c 6e5c 6e54 6865 206f 7074  .10).\n\nThe opt
-00007080: 696f 6e61 6c20 6172 6775 6d65 6e74 2060  ional argument `
-00007090: 6261 636b 7761 7264 7360 2069 7320 6120  backwards` is a 
-000070a0: 626f 6f6c 6561 6e20 7768 6963 6820 6973  boolean which is
-000070b0: 2062 7920 6465 6661 756c 7420 6046 616c   by default `Fal
-000070c0: 7365 6020 6d65 616e 696e 6720 7468 655c  se` meaning the\
-000070d0: 6e65 7665 6e74 7320 7769 6c6c 2062 6520  nevents will be 
-000070e0: 7265 6164 2066 6f72 7761 7264 7320 6279  read forwards by
-000070f0: 2064 6566 6175 6c74 2c20 736f 2074 6861   default, so tha
-00007100: 7420 6576 656e 7473 2061 7265 2072 6574  t events are ret
-00007110: 7572 6e65 6420 696e 2074 6865 5c6e 6f72  urned in the\nor
-00007120: 6465 7220 7468 6579 2077 6572 6520 636f  der they were co
-00007130: 6d6d 6974 7465 642c 2049 6620 6062 6163  mmitted, If `bac
-00007140: 6b77 6172 6473 6020 6973 2060 5472 7565  kwards` is `True
-00007150: 602c 2074 6865 2065 7665 6e74 7320 7769  `, the events wi
-00007160: 6c6c 2062 6520 7265 6164 5c6e 6261 636b  ll be read\nback
-00007170: 7761 7264 732c 2073 6f20 7468 6174 2065  wards, so that e
-00007180: 7665 6e74 7320 6172 6520 7265 7475 726e  vents are return
-00007190: 6564 2069 6e20 7265 7665 7273 6520 6f72  ed in reverse or
-000071a0: 6465 722e 5c6e 5c6e 5468 6520 6f70 7469  der.\n\nThe opti
-000071b0: 6f6e 616c 2061 7267 756d 656e 7420 6066  onal argument `f
-000071c0: 696c 7465 725f 6578 636c 7564 6560 2069  ilter_exclude` i
-000071d0: 7320 6120 7365 7175 656e 6365 206f 6620  s a sequence of 
-000071e0: 7265 6775 6c61 7220 6578 7072 6573 7369  regular expressi
-000071f0: 6f6e 7320 7468 6174 5c6e 6d61 7463 6820  ons that\nmatch 
-00007200: 7468 6520 7479 7065 2073 7472 696e 6773  the type strings
-00007210: 206f 6620 7265 636f 7264 6564 2065 7665   of recorded eve
-00007220: 6e74 7320 7468 6174 2073 686f 756c 6420  nts that should 
-00007230: 6e6f 7420 6265 2069 6e63 6c75 6465 642e  not be included.
-00007240: 2042 7920 6465 6661 756c 742c 5c6e 7468   By default,\nth
-00007250: 6973 2061 7267 756d 656e 7420 7769 6c6c  is argument will
-00007260: 206d 6174 6368 2022 7379 7374 656d 2065   match "system e
-00007270: 7665 6e74 7322 2c20 736f 2074 6861 7420  vents", so that 
-00007280: 7468 6579 2077 696c 6c20 6e6f 7420 6265  they will not be
-00007290: 2069 6e63 6c75 6465 642e 5c6e 5468 6973   included.\nThis
-000072a0: 2061 7267 756d 656e 7420 6973 2069 676e   argument is ign
-000072b0: 6f72 6564 2069 6620 6066 696c 7465 725f  ored if `filter_
-000072c0: 696e 636c 7564 6560 2069 7320 7365 7420  include` is set 
-000072d0: 746f 2061 206e 6f6e 2d65 6d70 7479 2073  to a non-empty s
-000072e0: 6571 7565 6e63 652e 5c6e 5c6e 5468 6520  equence.\n\nThe 
-000072f0: 6f70 7469 6f6e 616c 2061 7267 756d 656e  optional argumen
-00007300: 7420 6066 696c 7465 725f 696e 636c 7564  t `filter_includ
-00007310: 6560 2069 7320 6120 7365 7175 656e 6365  e` is a sequence
-00007320: 206f 6620 7265 6775 6c61 7220 6578 7072   of regular expr
-00007330: 6573 7369 6f6e 735c 6e74 6861 7420 6d61  essions\nthat ma
-00007340: 7463 6820 7468 6520 7479 7065 2073 7472  tch the type str
-00007350: 696e 6773 206f 6620 7265 636f 7264 6564  ings of recorded
-00007360: 2065 7665 6e74 7320 7468 6174 2073 686f   events that sho
-00007370: 756c 6420 6265 2069 6e63 6c75 6465 642e  uld be included.
-00007380: 2042 795c 6e64 6566 6175 6c74 2c20 7468   By\ndefault, th
-00007390: 6973 2061 7267 756d 656e 7420 6973 2061  is argument is a
-000073a0: 6e20 656d 7074 7920 7475 706c 652e 2049  n empty tuple. I
-000073b0: 6620 7468 6973 2061 7267 756d 656e 7420  f this argument 
-000073c0: 6973 2073 6574 2074 6f20 615c 6e6e 6f6e  is set to a\nnon
-000073d0: 2d65 6d70 7479 2073 6571 7565 6e63 652c  -empty sequence,
-000073e0: 2074 6865 2060 6669 6c74 6572 5f65 7863   the `filter_exc
-000073f0: 6c75 6465 6020 6172 6775 6d65 6e74 2069  lude` argument i
-00007400: 7320 6967 6e6f 7265 642e 5c6e 5c6e 5468  s ignored.\n\nTh
-00007410: 6520 6f70 7469 6f6e 616c 2061 7267 756d  e optional argum
-00007420: 656e 7420 606c 696d 6974 6020 6973 2061  ent `limit` is a
-00007430: 6e20 696e 7465 6765 7220 7768 6963 6820  n integer which 
-00007440: 6c69 6d69 7473 2074 6865 206e 756d 6265  limits the numbe
-00007450: 7220 6f66 2065 7665 6e74 7320 7468 6174  r of events that
-00007460: 2077 696c 6c5c 6e62 6520 7265 7475 726e   will\nbe return
-00007470: 6564 2e20 5468 6520 6465 6661 756c 7420  ed. The default 
-00007480: 7661 6c75 6520 6973 2060 7379 732e 6d61  value is `sys.ma
-00007490: 7869 6e74 602e 5c6e 5c6e 5468 6520 6f70  xint`.\n\nThe op
-000074a0: 7469 6f6e 616c 2061 7267 756d 656e 7420  tional argument 
-000074b0: 6074 696d 656f 7574 6020 6973 2061 2050  `timeout` is a P
-000074c0: 7974 686f 6e20 6066 6c6f 6174 6020 7768  ython `float` wh
-000074d0: 6963 6820 7365 7473 2061 2064 6561 646c  ich sets a deadl
-000074e0: 696e 6520 666f 7220 7468 6520 636f 6d70  ine for the comp
-000074f0: 6c65 7469 6f6e 206f 665c 6e74 6865 2067  letion of\nthe g
-00007500: 5250 4320 6f70 6572 6174 696f 6e2e 5c6e  RPC operation.\n
-00007510: 5c6e 5468 6520 6669 6c74 6572 696e 6720  \nThe filtering 
-00007520: 6f66 2065 7665 6e74 7320 6973 2064 6f6e  of events is don
-00007530: 6520 6f6e 2074 6865 2045 7665 6e74 5374  e on the EventSt
-00007540: 6f72 6544 4220 7365 7276 6572 2e20 5468  oreDB server. Th
-00007550: 655c 6e60 6c69 6d69 7460 2061 7267 756d  e\n`limit` argum
-00007560: 656e 7420 6973 2061 7070 6c69 6564 206f  ent is applied o
-00007570: 6e20 7468 6520 7365 7276 6572 2061 6674  n the server aft
-00007580: 6572 2066 696c 7465 7269 6e67 2e20 5365  er filtering. Se
-00007590: 6520 6265 6c6f 7720 666f 725c 6e6d 6f72  e below for\nmor
-000075a0: 6520 696e 666f 726d 6174 696f 6e20 6162  e information ab
-000075b0: 6f75 7420 6669 6c74 6572 2072 6567 756c  out filter regul
-000075c0: 6172 2065 7870 7265 7373 696f 6e73 2e5c  ar expressions.\
-000075d0: 6e5c 6e57 6865 6e20 7265 6164 696e 6720  n\nWhen reading 
-000075e0: 666f 7277 6172 6473 2066 726f 6d20 6120  forwards from a 
-000075f0: 7370 6563 6966 6963 2063 6f6d 6d69 7420  specific commit 
-00007600: 706f 7369 7469 6f6e 2c20 7468 6520 6576  position, the ev
-00007610: 656e 7420 6174 2074 6865 2073 7065 6369  ent at the speci
-00007620: 6669 6564 5c6e 706f 7369 7469 6f6e 2057  fied\nposition W
-00007630: 494c 4c20 6265 2069 6e63 6c75 6465 642e  ILL be included.
-00007640: 2048 6f77 6576 6572 2c20 7768 656e 2072   However, when r
-00007650: 6561 6469 6e67 2062 6163 6b77 6172 6473  eading backwards
-00007660: 2c20 7468 6520 6576 656e 7420 6174 2074  , the event at t
-00007670: 6865 5c6e 7370 6563 6966 6965 6420 706f  he\nspecified po
-00007680: 7369 7469 6f6e 2077 696c 6c20 4e4f 5420  sition will NOT 
-00007690: 6265 2069 6e63 6c75 6465 642e 2028 5468  be included. (Th
-000076a0: 6973 206e 6f6e 2d69 6e63 6c75 7369 7665  is non-inclusive
-000076b0: 2062 6568 6176 696f 7572 2c20 6f66 2065   behaviour, of e
-000076c0: 7863 6c75 6469 6e67 5c6e 7468 6520 7370  xcluding\nthe sp
-000076d0: 6563 6966 6965 6420 636f 6d6d 6974 2070  ecified commit p
-000076e0: 6f73 6974 696f 6e20 7768 656e 2072 6561  osition when rea
-000076f0: 6469 6e67 2061 6c6c 2073 7472 6561 6d73  ding all streams
-00007700: 2062 6163 6b77 6172 6473 2c20 6469 6666   backwards, diff
-00007710: 6572 7320 6672 6f6d 2074 6865 5c6e 6265  ers from the\nbe
-00007720: 6861 7669 6f75 7220 7768 656e 2072 6561  haviour when rea
-00007730: 6469 6e67 2061 2073 7472 6561 6d20 6261  ding a stream ba
-00007740: 636b 7761 7264 7320 6672 6f6d 2061 2073  ckwards from a s
-00007750: 7065 6369 6669 6320 7374 7265 616d 2070  pecific stream p
-00007760: 6f73 6974 696f 6e2c 2049 5c27 6d5c 6e6e  osition, I\'m\nn
-00007770: 6f74 2073 7572 6520 7768 792e 295c 6e5c  ot sure why.)\n\
-00007780: 6e54 6865 2065 7861 6d70 6c65 2062 656c  nThe example bel
-00007790: 6f77 2073 686f 7773 2068 6f77 2074 6f20  ow shows how to 
-000077a0: 7265 6164 2061 6c6c 2065 7665 6e74 7320  read all events 
-000077b0: 696e 2074 6865 2064 6174 6162 6173 6520  in the database 
-000077c0: 696e 2074 6865 5c6e 6f72 6465 7220 7468  in the\norder th
-000077d0: 6579 2077 6572 6520 7265 636f 7264 6564  ey were recorded
-000077e0: 2e5c 6e5c 6e60 6060 7079 7468 6f6e 5c6e  .\n\n```python\n
-000077f0: 6576 656e 7473 203d 206c 6973 7428 636c  events = list(cl
-00007800: 6965 6e74 2e72 6561 645f 616c 6c5f 6576  ient.read_all_ev
-00007810: 656e 7473 2829 295c 6e5c 6e61 7373 6572  ents())\n\nasser
-00007820: 7420 6c65 6e28 6576 656e 7473 2920 3e3d  t len(events) >=
-00007830: 2033 5c6e 6060 605c 6e5c 6e54 6865 2065   3\n```\n\nThe e
-00007840: 7861 6d70 6c65 2062 656c 6f77 2073 686f  xample below sho
-00007850: 7773 2068 6f77 2074 6f20 7265 6164 2061  ws how to read a
-00007860: 6c6c 2072 6563 6f72 6465 6420 6576 656e  ll recorded even
-00007870: 7473 2066 726f 6d20 6120 7370 6563 6966  ts from a specif
-00007880: 6963 2063 6f6d 6d69 7420 706f 7369 7469  ic commit positi
-00007890: 6f6e 2e5c 6e5c 6e60 6060 7079 7468 6f6e  on.\n\n```python
-000078a0: 5c6e 6576 656e 7473 203d 206c 6973 7428  \nevents = list(
-000078b0: 5c6e 2020 2020 636c 6965 6e74 2e72 6561  \n    client.rea
-000078c0: 645f 616c 6c5f 6576 656e 7473 285c 6e20  d_all_events(\n 
-000078d0: 2020 2020 2020 2063 6f6d 6d69 745f 706f         commit_po
-000078e0: 7369 7469 6f6e 3d63 6f6d 6d69 745f 706f  sition=commit_po
-000078f0: 7369 7469 6f6e 315c 6e20 2020 2029 5c6e  sition1\n    )\n
-00007900: 295c 6e5c 6e61 7373 6572 7420 6c65 6e28  )\n\nassert len(
-00007910: 6576 656e 7473 2920 3d3d 2033 5c6e 5c6e  events) == 3\n\n
-00007920: 6173 7365 7274 2065 7665 6e74 735b 305d  assert events[0]
-00007930: 2e73 7472 6561 6d5f 6e61 6d65 203d 3d20  .stream_name == 
-00007940: 7374 7265 616d 5f6e 616d 6531 5c6e 6173  stream_name1\nas
-00007950: 7365 7274 2065 7665 6e74 735b 305d 2e73  sert events[0].s
-00007960: 7472 6561 6d5f 706f 7369 7469 6f6e 203d  tream_position =
-00007970: 3d20 305c 6e61 7373 6572 7420 6576 656e  = 0\nassert even
-00007980: 7473 5b30 5d2e 7479 7065 203d 3d20 6576  ts[0].type == ev
-00007990: 656e 7431 2e74 7970 655c 6e61 7373 6572  ent1.type\nasser
-000079a0: 7420 6576 656e 7473 5b30 5d2e 6461 7461  t events[0].data
-000079b0: 203d 3d20 6576 656e 7431 2e64 6174 615c   == event1.data\
-000079c0: 6e5c 6e61 7373 6572 7420 6576 656e 7473  n\nassert events
-000079d0: 5b31 5d2e 7374 7265 616d 5f6e 616d 6520  [1].stream_name 
-000079e0: 3d3d 2073 7472 6561 6d5f 6e61 6d65 315c  == stream_name1\
-000079f0: 6e61 7373 6572 7420 6576 656e 7473 5b31  nassert events[1
-00007a00: 5d2e 7374 7265 616d 5f70 6f73 6974 696f  ].stream_positio
-00007a10: 6e20 3d3d 2031 5c6e 6173 7365 7274 2065  n == 1\nassert e
-00007a20: 7665 6e74 735b 315d 2e74 7970 6520 3d3d  vents[1].type ==
-00007a30: 2065 7665 6e74 322e 7479 7065 5c6e 6173   event2.type\nas
-00007a40: 7365 7274 2065 7665 6e74 735b 315d 2e64  sert events[1].d
-00007a50: 6174 6120 3d3d 2065 7665 6e74 322e 6461  ata == event2.da
-00007a60: 7461 5c6e 5c6e 6173 7365 7274 2065 7665  ta\n\nassert eve
-00007a70: 6e74 735b 325d 2e73 7472 6561 6d5f 6e61  nts[2].stream_na
-00007a80: 6d65 203d 3d20 7374 7265 616d 5f6e 616d  me == stream_nam
-00007a90: 6531 5c6e 6173 7365 7274 2065 7665 6e74  e1\nassert event
-00007aa0: 735b 325d 2e73 7472 6561 6d5f 706f 7369  s[2].stream_posi
-00007ab0: 7469 6f6e 203d 3d20 325c 6e61 7373 6572  tion == 2\nasser
-00007ac0: 7420 6576 656e 7473 5b32 5d2e 7479 7065  t events[2].type
-00007ad0: 203d 3d20 6576 656e 7433 2e74 7970 655c   == event3.type\
-00007ae0: 6e61 7373 6572 7420 6576 656e 7473 5b32  nassert events[2
-00007af0: 5d2e 6461 7461 203d 3d20 6576 656e 7433  ].data == event3
-00007b00: 2e64 6174 615c 6e60 6060 5c6e 5c6e 5468  .data\n```\n\nTh
-00007b10: 6520 6578 616d 706c 6520 6265 6c6f 7720  e example below 
-00007b20: 7368 6f77 7320 686f 7720 746f 2072 6561  shows how to rea
-00007b30: 6420 616c 6c20 7265 636f 7264 6564 2065  d all recorded e
-00007b40: 7665 6e74 7320 696e 2072 6576 6572 7365  vents in reverse
-00007b50: 206f 7264 6572 2e5c 6e5c 6e60 6060 7079   order.\n\n```py
-00007b60: 7468 6f6e 5c6e 6576 656e 7473 203d 206c  thon\nevents = l
-00007b70: 6973 7428 5c6e 2020 2020 636c 6965 6e74  ist(\n    client
-00007b80: 2e72 6561 645f 616c 6c5f 6576 656e 7473  .read_all_events
-00007b90: 285c 6e20 2020 2020 2020 2062 6163 6b77  (\n        backw
-00007ba0: 6172 6473 3d54 7275 655c 6e20 2020 2029  ards=True\n    )
-00007bb0: 5c6e 295c 6e5c 6e61 7373 6572 7420 6c65  \n)\n\nassert le
-00007bc0: 6e28 6576 656e 7473 2920 3e3d 2033 5c6e  n(events) >= 3\n
-00007bd0: 5c6e 6173 7365 7274 2065 7665 6e74 735b  \nassert events[
-00007be0: 305d 2e73 7472 6561 6d5f 6e61 6d65 203d  0].stream_name =
-00007bf0: 3d20 7374 7265 616d 5f6e 616d 6531 5c6e  = stream_name1\n
-00007c00: 6173 7365 7274 2065 7665 6e74 735b 305d  assert events[0]
-00007c10: 2e73 7472 6561 6d5f 706f 7369 7469 6f6e  .stream_position
-00007c20: 203d 3d20 325c 6e61 7373 6572 7420 6576   == 2\nassert ev
-00007c30: 656e 7473 5b30 5d2e 7479 7065 203d 3d20  ents[0].type == 
-00007c40: 6576 656e 7433 2e74 7970 655c 6e61 7373  event3.type\nass
-00007c50: 6572 7420 6576 656e 7473 5b30 5d2e 6461  ert events[0].da
-00007c60: 7461 203d 3d20 6576 656e 7433 2e64 6174  ta == event3.dat
-00007c70: 615c 6e5c 6e61 7373 6572 7420 6576 656e  a\n\nassert even
-00007c80: 7473 5b31 5d2e 7374 7265 616d 5f6e 616d  ts[1].stream_nam
-00007c90: 6520 3d3d 2073 7472 6561 6d5f 6e61 6d65  e == stream_name
-00007ca0: 315c 6e61 7373 6572 7420 6576 656e 7473  1\nassert events
-00007cb0: 5b31 5d2e 7374 7265 616d 5f70 6f73 6974  [1].stream_posit
-00007cc0: 696f 6e20 3d3d 2031 5c6e 6173 7365 7274  ion == 1\nassert
-00007cd0: 2065 7665 6e74 735b 315d 2e74 7970 6520   events[1].type 
-00007ce0: 3d3d 2065 7665 6e74 322e 7479 7065 5c6e  == event2.type\n
-00007cf0: 6173 7365 7274 2065 7665 6e74 735b 315d  assert events[1]
-00007d00: 2e64 6174 6120 3d3d 2065 7665 6e74 322e  .data == event2.
-00007d10: 6461 7461 5c6e 5c6e 6173 7365 7274 2065  data\n\nassert e
-00007d20: 7665 6e74 735b 325d 2e73 7472 6561 6d5f  vents[2].stream_
-00007d30: 6e61 6d65 203d 3d20 7374 7265 616d 5f6e  name == stream_n
-00007d40: 616d 6531 5c6e 6173 7365 7274 2065 7665  ame1\nassert eve
-00007d50: 6e74 735b 325d 2e73 7472 6561 6d5f 706f  nts[2].stream_po
-00007d60: 7369 7469 6f6e 203d 3d20 305c 6e61 7373  sition == 0\nass
-00007d70: 6572 7420 6576 656e 7473 5b32 5d2e 7479  ert events[2].ty
-00007d80: 7065 203d 3d20 6576 656e 7431 2e74 7970  pe == event1.typ
-00007d90: 655c 6e61 7373 6572 7420 6576 656e 7473  e\nassert events
-00007da0: 5b32 5d2e 6461 7461 203d 3d20 6576 656e  [2].data == even
-00007db0: 7431 2e64 6174 615c 6e60 6060 5c6e 5c6e  t1.data\n```\n\n
-00007dc0: 5468 6520 6578 616d 706c 6520 6265 6c6f  The example belo
-00007dd0: 7720 7368 6f77 7320 686f 7720 746f 2072  w shows how to r
-00007de0: 6561 6420 6120 6c69 6d69 7465 6420 6e75  ead a limited nu
-00007df0: 6d62 6572 2028 6f6e 6529 206f 6620 7468  mber (one) of th
-00007e00: 6520 7265 636f 7264 6564 2065 7665 6e74  e recorded event
-00007e10: 735c 6e69 6e20 7468 6520 6461 7461 6261  s\nin the databa
-00007e20: 7365 2066 6f72 7761 7264 7320 6672 6f6d  se forwards from
-00007e30: 2061 2073 7065 6369 6669 6320 636f 6d6d   a specific comm
-00007e40: 6974 2070 6f73 6974 696f 6e2e 2050 6c65  it position. Ple
-00007e50: 6173 6520 6e6f 7465 2c20 7768 656e 2072  ase note, when r
-00007e60: 6561 6469 6e67 5c6e 616c 6c20 6576 656e  eading\nall even
-00007e70: 7473 2066 6f72 7761 7264 7320 6672 6f6d  ts forwards from
-00007e80: 2061 2073 7065 6369 6669 6320 636f 6d6d   a specific comm
-00007e90: 6974 2070 6f73 6974 696f 6e2c 2074 6865  it position, the
-00007ea0: 2065 7665 6e74 2061 7420 7468 6520 7370   event at the sp
-00007eb0: 6563 6966 6965 645c 6e70 6f73 6974 696f  ecified\npositio
-00007ec0: 6e20 5749 4c4c 2062 6520 696e 636c 7564  n WILL be includ
-00007ed0: 6564 2e5c 6e5c 6e5c 6e60 6060 7079 7468  ed.\n\n\n```pyth
-00007ee0: 6f6e 5c6e 6576 656e 7473 203d 206c 6973  on\nevents = lis
-00007ef0: 7428 5c6e 2020 2020 636c 6965 6e74 2e72  t(\n    client.r
-00007f00: 6561 645f 616c 6c5f 6576 656e 7473 285c  ead_all_events(\
-00007f10: 6e20 2020 2020 2020 2063 6f6d 6d69 745f  n        commit_
-00007f20: 706f 7369 7469 6f6e 3d63 6f6d 6d69 745f  position=commit_
-00007f30: 706f 7369 7469 6f6e 312c 5c6e 2020 2020  position1,\n    
-00007f40: 2020 2020 6c69 6d69 743d 312c 5c6e 2020      limit=1,\n  
-00007f50: 2020 295c 6e29 5c6e 5c6e 6173 7365 7274    )\n)\n\nassert
-00007f60: 206c 656e 2865 7665 6e74 7329 203d 3d20   len(events) == 
-00007f70: 315c 6e5c 6e61 7373 6572 7420 6576 656e  1\n\nassert even
-00007f80: 7473 5b30 5d2e 7374 7265 616d 5f6e 616d  ts[0].stream_nam
-00007f90: 6520 3d3d 2073 7472 6561 6d5f 6e61 6d65  e == stream_name
-00007fa0: 315c 6e61 7373 6572 7420 6576 656e 7473  1\nassert events
-00007fb0: 5b30 5d2e 7374 7265 616d 5f70 6f73 6974  [0].stream_posit
-00007fc0: 696f 6e20 3d3d 2030 5c6e 6173 7365 7274  ion == 0\nassert
-00007fd0: 2065 7665 6e74 735b 305d 2e74 7970 6520   events[0].type 
-00007fe0: 3d3d 2065 7665 6e74 312e 7479 7065 5c6e  == event1.type\n
-00007ff0: 6173 7365 7274 2065 7665 6e74 735b 305d  assert events[0]
-00008000: 2e64 6174 6120 3d3d 2065 7665 6e74 312e  .data == event1.
-00008010: 6461 7461 5c6e 5c6e 6173 7365 7274 2065  data\n\nassert e
-00008020: 7665 6e74 735b 305d 2e63 6f6d 6d69 745f  vents[0].commit_
-00008030: 706f 7369 7469 6f6e 203d 3d20 636f 6d6d  position == comm
-00008040: 6974 5f70 6f73 6974 696f 6e31 5c6e 6060  it_position1\n``
-00008050: 605c 6e5c 6e54 6865 2065 7861 6d70 6c65  `\n\nThe example
-00008060: 2062 656c 6f77 2073 686f 7773 2068 6f77   below shows how
-00008070: 2074 6f20 7265 6164 2061 206c 696d 6974   to read a limit
-00008080: 6564 206e 756d 6265 7220 286f 6e65 2920  ed number (one) 
-00008090: 6f66 2074 6865 2072 6563 6f72 6465 6420  of the recorded 
-000080a0: 6576 656e 7473 5c6e 696e 2074 6865 2064  events\nin the d
-000080b0: 6174 6162 6173 6520 6261 636b 7761 7264  atabase backward
-000080c0: 7320 6672 6f6d 2074 6865 2065 6e64 2e20  s from the end. 
-000080d0: 5468 6973 2067 6976 6573 2074 6865 206c  This gives the l
-000080e0: 6173 7420 7265 636f 7264 6564 2065 7665  ast recorded eve
-000080f0: 6e74 2e5c 6e5c 6e60 6060 7079 7468 6f6e  nt.\n\n```python
-00008100: 5c6e 6576 656e 7473 203d 206c 6973 7428  \nevents = list(
-00008110: 5c6e 2020 2020 636c 6965 6e74 2e72 6561  \n    client.rea
-00008120: 645f 616c 6c5f 6576 656e 7473 285c 6e20  d_all_events(\n 
-00008130: 2020 2020 2020 2062 6163 6b77 6172 6473         backwards
-00008140: 3d54 7275 652c 5c6e 2020 2020 2020 2020  =True,\n        
-00008150: 6c69 6d69 743d 312c 5c6e 2020 2020 295c  limit=1,\n    )\
-00008160: 6e29 5c6e 5c6e 6173 7365 7274 206c 656e  n)\n\nassert len
-00008170: 2865 7665 6e74 7329 203d 3d20 315c 6e5c  (events) == 1\n\
-00008180: 6e61 7373 6572 7420 6576 656e 7473 5b30  nassert events[0
-00008190: 5d2e 7374 7265 616d 5f6e 616d 6520 3d3d  ].stream_name ==
-000081a0: 2073 7472 6561 6d5f 6e61 6d65 315c 6e61   stream_name1\na
-000081b0: 7373 6572 7420 6576 656e 7473 5b30 5d2e  ssert events[0].
-000081c0: 7374 7265 616d 5f70 6f73 6974 696f 6e20  stream_position 
-000081d0: 3d3d 2032 5c6e 6173 7365 7274 2065 7665  == 2\nassert eve
-000081e0: 6e74 735b 305d 2e74 7970 6520 3d3d 2065  nts[0].type == e
-000081f0: 7665 6e74 332e 7479 7065 5c6e 6173 7365  vent3.type\nasse
-00008200: 7274 2065 7665 6e74 735b 305d 2e64 6174  rt events[0].dat
-00008210: 6120 3d3d 2065 7665 6e74 332e 6461 7461  a == event3.data
-00008220: 5c6e 6060 605c 6e5c 6e54 6865 2065 7861  \n```\n\nThe exa
-00008230: 6d70 6c65 2062 656c 6f77 2073 686f 7773  mple below shows
-00008240: 2068 6f77 2074 6f20 7265 6164 2061 206c   how to read a l
-00008250: 696d 6974 6564 206e 756d 6265 7220 286f  imited number (o
-00008260: 6e65 2920 6f66 2074 6865 2072 6563 6f72  ne) of the recor
-00008270: 6465 6420 6576 656e 7473 5c6e 696e 2074  ded events\nin t
-00008280: 6865 2064 6174 6162 6173 6520 6261 636b  he database back
-00008290: 7761 7264 7320 6672 6f6d 2061 2073 7065  wards from a spe
-000082a0: 6369 6669 6320 636f 6d6d 6974 2070 6f73  cific commit pos
-000082b0: 6974 696f 6e2e 2050 6c65 6173 6520 6e6f  ition. Please no
-000082c0: 7465 2c20 7768 656e 2072 6561 6469 6e67  te, when reading
-000082d0: 5c6e 616c 6c20 6576 656e 7473 2062 6163  \nall events bac
-000082e0: 6b77 6172 6473 2066 726f 6d20 6120 7370  kwards from a sp
-000082f0: 6563 6966 6963 2063 6f6d 6d69 7420 706f  ecific commit po
-00008300: 7369 7469 6f6e 2c20 7468 6520 6576 656e  sition, the even
-00008310: 7420 6174 2074 6865 2073 7065 6369 6669  t at the specifi
-00008320: 6564 5c6e 706f 7369 7469 6f6e 2057 494c  ed\nposition WIL
-00008330: 4c20 4e4f 5420 6265 2069 6e63 6c75 6465  L NOT be include
-00008340: 642e 5c6e 5c6e 6060 6070 7974 686f 6e5c  d.\n\n```python\
-00008350: 6e65 7665 6e74 7320 3d20 6c69 7374 285c  nevents = list(\
-00008360: 6e20 2020 2063 6c69 656e 742e 7265 6164  n    client.read
-00008370: 5f61 6c6c 5f65 7665 6e74 7328 5c6e 2020  _all_events(\n  
-00008380: 2020 2020 2020 636f 6d6d 6974 5f70 6f73        commit_pos
-00008390: 6974 696f 6e3d 636f 6d6d 6974 5f70 6f73  ition=commit_pos
-000083a0: 6974 696f 6e32 2c5c 6e20 2020 2020 2020  ition2,\n       
-000083b0: 2062 6163 6b77 6172 6473 3d54 7275 652c   backwards=True,
-000083c0: 5c6e 2020 2020 2020 2020 6c69 6d69 743d  \n        limit=
-000083d0: 312c 5c6e 2020 2020 295c 6e29 5c6e 5c6e  1,\n    )\n)\n\n
-000083e0: 6173 7365 7274 206c 656e 2865 7665 6e74  assert len(event
-000083f0: 7329 203d 3d20 315c 6e5c 6e61 7373 6572  s) == 1\n\nasser
-00008400: 7420 6576 656e 7473 5b30 5d2e 636f 6d6d  t events[0].comm
-00008410: 6974 5f70 6f73 6974 696f 6e20 3c20 636f  it_position < co
-00008420: 6d6d 6974 5f70 6f73 6974 696f 6e32 5c6e  mmit_position2\n
-00008430: 6060 605c 6e5c 6e5c 6e23 2323 2047 6574  ```\n\n\n### Get
-00008440: 2063 7572 7265 6e74 2073 7472 6561 6d20   current stream 
-00008450: 706f 7369 7469 6f6e 5c6e 5c6e 5468 6520  position\n\nThe 
-00008460: 6067 6574 5f73 7472 6561 6d5f 706f 7369  `get_stream_posi
-00008470: 7469 6f6e 2829 6020 6d65 7468 6f64 2063  tion()` method c
-00008480: 616e 2062 6520 7573 6564 2074 6f5c 6e67  an be used to\ng
-00008490: 6574 2074 6865 2022 7374 7265 616d 2070  et the "stream p
-000084a0: 6f73 6974 696f 6e22 206f 6620 7468 6520  osition" of the 
-000084b0: 6c61 7374 2072 6563 6f72 6465 6420 6576  last recorded ev
-000084c0: 656e 7420 696e 2061 2073 7472 6561 6d2e  ent in a stream.
-000084d0: 5c6e 5c6e 5468 6973 206d 6574 686f 6420  \n\nThis method 
-000084e0: 6861 7320 6120 6073 7472 6561 6d5f 6e61  has a `stream_na
-000084f0: 6d65 6020 6172 6775 6d65 6e74 2c20 7768  me` argument, wh
-00008500: 6963 6820 6973 2072 6571 7569 7265 642e  ich is required.
-00008510: 5c6e 5c6e 5468 6973 206d 6574 686f 6420  \n\nThis method 
-00008520: 616c 736f 2074 616b 6573 2061 6e20 6f70  also takes an op
-00008530: 7469 6f6e 616c 2060 7469 6d65 6f75 7460  tional `timeout`
-00008540: 2061 7267 756d 656e 742c 2074 6861 745c   argument, that\
-00008550: 6e69 7320 6578 7065 6374 6564 2074 6f20  nis expected to 
-00008560: 6265 2061 2050 7974 686f 6e20 6066 6c6f  be a Python `flo
-00008570: 6174 602c 2077 6869 6368 2073 6574 7320  at`, which sets 
-00008580: 6120 6465 6164 6c69 6e65 5c6e 666f 7220  a deadline\nfor 
-00008590: 7468 6520 636f 6d70 6c65 7469 6f6e 206f  the completion o
-000085a0: 6620 7468 6520 6752 5043 206f 7065 7261  f the gRPC opera
-000085b0: 7469 6f6e 2e5c 6e5c 6e54 6865 2073 6571  tion.\n\nThe seq
-000085c0: 7565 6e63 6520 6f66 2070 6f73 6974 696f  uence of positio
-000085d0: 6e73 2069 6e20 6120 7374 7265 616d 2069  ns in a stream i
-000085e0: 7320 6761 706c 6573 732e 2049 7420 6973  s gapless. It is
-000085f0: 207a 6572 6f2d 6261 7365 642c 5c6e 736f   zero-based,\nso
-00008600: 2074 6861 7420 6120 7374 7265 616d 2077   that a stream w
-00008610: 6974 6820 6f6e 6520 7265 636f 7264 6564  ith one recorded
-00008620: 2065 7665 6e74 2068 6173 2061 2063 7572   event has a cur
-00008630: 7265 6e74 2073 7472 6561 6d5c 6e70 6f73  rent stream\npos
-00008640: 6974 696f 6e20 6f66 2060 3060 2e20 5468  ition of `0`. Th
-00008650: 6520 6375 7272 656e 7420 7374 7265 616d  e current stream
-00008660: 2070 6f73 6974 696f 6e20 6973 2060 3160   position is `1`
-00008670: 2077 6865 6e20 6120 7374 7265 616d 2068   when a stream h
-00008680: 6173 5c6e 7477 6f20 6576 656e 7473 2c20  as\ntwo events, 
-00008690: 616e 6420 6974 2069 7320 6032 6020 7768  and it is `2` wh
-000086a0: 656e 2074 6865 7265 2061 7265 2065 7665  en there are eve
-000086b0: 6e74 732c 2061 6e64 2073 6f20 6f6e 2e5c  nts, and so on.\
-000086c0: 6e5c 6e49 6e20 7468 6520 6578 616d 706c  n\nIn the exampl
-000086d0: 6520 6265 6c6f 772c 2074 6865 2063 7572  e below, the cur
-000086e0: 7265 6e74 2073 7472 6561 6d20 706f 7369  rent stream posi
-000086f0: 7469 6f6e 2069 7320 6f62 7461 696e 6564  tion is obtained
-00008700: 206f 6620 7468 655c 6e73 7472 6561 6d20   of the\nstream 
-00008710: 746f 2077 6869 6368 2065 7665 6e74 7320  to which events 
-00008720: 7765 7265 2061 7070 656e 6465 6420 696e  were appended in
-00008730: 2074 6865 2065 7861 6d70 6c65 7320 6162   the examples ab
-00008740: 6f76 652e 5c6e 4265 6361 7573 6520 7468  ove.\nBecause th
-00008750: 6520 7365 7175 656e 6365 206f 6620 7374  e sequence of st
-00008760: 7265 616d 2070 6f73 6974 696f 6e73 2069  ream positions i
-00008770: 7320 7a65 726f 2d62 6173 6564 2c20 616e  s zero-based, an
-00008780: 6420 6265 6361 7573 655c 6e74 6872 6565  d because\nthree
-00008790: 2065 7665 6e74 7320 7765 7265 2061 7070   events were app
-000087a0: 656e 6465 642c 2073 6f20 7468 6520 6375  ended, so the cu
-000087b0: 7272 656e 7420 7374 7265 616d 2070 6f73  rrent stream pos
-000087c0: 6974 696f 6e20 6973 2060 3260 2e5c 6e5c  ition is `2`.\n\
-000087d0: 6e60 6060 7079 7468 6f6e 5c6e 7374 7265  n```python\nstre
-000087e0: 616d 5f70 6f73 6974 696f 6e20 3d20 636c  am_position = cl
-000087f0: 6965 6e74 2e67 6574 5f73 7472 6561 6d5f  ient.get_stream_
-00008800: 706f 7369 7469 6f6e 285c 6e20 2020 2073  position(\n    s
-00008810: 7472 6561 6d5f 6e61 6d65 3d73 7472 6561  tream_name=strea
-00008820: 6d5f 6e61 6d65 315c 6e29 5c6e 5c6e 6173  m_name1\n)\n\nas
-00008830: 7365 7274 2073 7472 6561 6d5f 706f 7369  sert stream_posi
-00008840: 7469 6f6e 203d 3d20 325c 6e60 6060 5c6e  tion == 2\n```\n
-00008850: 5c6e 4966 2061 2073 7472 6561 6d20 646f  \nIf a stream do
-00008860: 6573 206e 6f74 2065 7869 7374 2c20 7468  es not exist, th
-00008870: 6520 7265 7475 726e 6564 2073 7472 6561  e returned strea
-00008880: 6d20 706f 7369 7469 6f6e 2076 616c 7565  m position value
-00008890: 2069 7320 604e 6f6e 6560 2c5c 6e77 6869   is `None`,\nwhi
-000088a0: 6368 206d 6174 6368 6573 2074 6865 2072  ch matches the r
-000088b0: 6571 7569 7265 6420 6578 7065 6374 6564  equired expected
-000088c0: 2070 6f73 6974 696f 6e20 7768 656e 2061   position when a
-000088d0: 7070 656e 6469 6e67 2074 6865 2066 6972  ppending the fir
-000088e0: 7374 2065 7665 6e74 5c6e 6f66 2061 206e  st event\nof a n
-000088f0: 6577 2073 7472 6561 6d20 2873 6565 2061  ew stream (see a
-00008900: 626f 7665 292e 5c6e 5c6e 6060 6070 7974  bove).\n\n```pyt
-00008910: 686f 6e5c 6e73 7472 6561 6d5f 706f 7369  hon\nstream_posi
-00008920: 7469 6f6e 203d 2063 6c69 656e 742e 6765  tion = client.ge
-00008930: 745f 7374 7265 616d 5f70 6f73 6974 696f  t_stream_positio
-00008940: 6e28 5c6e 2020 2020 7374 7265 616d 5f6e  n(\n    stream_n
-00008950: 616d 653d 7374 7228 7575 6964 3428 2929  ame=str(uuid4())
-00008960: 5c6e 295c 6e5c 6e61 7373 6572 7420 7374  \n)\n\nassert st
-00008970: 7265 616d 5f70 6f73 6974 696f 6e20 3d3d  ream_position ==
-00008980: 204e 6f6e 655c 6e60 6060 5c6e 5c6e 5468   None\n```\n\nTh
-00008990: 6973 206d 6574 686f 6420 7461 6b65 7320  is method takes 
-000089a0: 616e 206f 7074 696f 6e61 6c20 6172 6775  an optional argu
-000089b0: 6d65 6e74 2060 7469 6d65 6f75 7460 2077  ment `timeout` w
-000089c0: 6869 6368 2069 7320 6120 5079 7468 6f6e  hich is a Python
-000089d0: 2060 666c 6f61 7460 2074 6861 7420 7365   `float` that se
-000089e0: 7473 5c6e 6120 6465 6164 6c69 6e65 2066  ts\na deadline f
-000089f0: 6f72 2074 6865 2063 6f6d 706c 6574 696f  or the completio
-00008a00: 6e20 6f66 2074 6865 2067 5250 4320 6f70  n of the gRPC op
-00008a10: 6572 6174 696f 6e2e 5c6e 5c6e 5c6e 2323  eration.\n\n\n##
-00008a20: 2320 4765 7420 6375 7272 656e 7420 636f  # Get current co
-00008a30: 6d6d 6974 2070 6f73 6974 696f 6e5c 6e5c  mmit position\n\
-00008a40: 6e54 6865 206d 6574 686f 6420 6067 6574  nThe method `get
-00008a50: 5f63 6f6d 6d69 745f 706f 7369 7469 6f6e  _commit_position
-00008a60: 2829 6020 6361 6e20 6265 2075 7365 6420  ()` can be used 
-00008a70: 746f 2067 6574 2074 6865 2063 7572 7265  to get the curre
-00008a80: 6e74 5c6e 636f 6d6d 6974 2070 6f73 6974  nt\ncommit posit
-00008a90: 696f 6e20 6f66 2074 6865 2064 6174 6162  ion of the datab
-00008aa0: 6173 652e 5c6e 5c6e 6060 6070 7974 686f  ase.\n\n```pytho
-00008ab0: 6e5c 6e63 6f6d 6d69 745f 706f 7369 7469  n\ncommit_positi
-00008ac0: 6f6e 203d 2063 6c69 656e 742e 6765 745f  on = client.get_
-00008ad0: 636f 6d6d 6974 5f70 6f73 6974 696f 6e28  commit_position(
-00008ae0: 295c 6e60 6060 5c6e 5c6e 5468 6973 206d  )\n```\n\nThis m
-00008af0: 6574 686f 6420 7461 6b65 7320 616e 206f  ethod takes an o
-00008b00: 7074 696f 6e61 6c20 6172 6775 6d65 6e74  ptional argument
-00008b10: 2060 7469 6d65 6f75 7460 2077 6869 6368   `timeout` which
-00008b20: 2069 7320 6120 5079 7468 6f6e 2060 666c   is a Python `fl
-00008b30: 6f61 7460 2074 6861 7420 7365 7473 5c6e  oat` that sets\n
-00008b40: 6120 6465 6164 6c69 6e65 2066 6f72 2074  a deadline for t
-00008b50: 6865 2063 6f6d 706c 6574 696f 6e20 6f66  he completion of
-00008b60: 2074 6865 2067 5250 4320 6f70 6572 6174   the gRPC operat
-00008b70: 696f 6e2e 5c6e 5c6e 5468 6973 206d 6574  ion.\n\nThis met
-00008b80: 686f 6420 6361 6e20 6265 2075 7365 6675  hod can be usefu
-00008b90: 6c20 746f 206d 6561 7375 7265 2070 726f  l to measure pro
-00008ba0: 6772 6573 7320 6f66 2061 2064 6f77 6e73  gress of a downs
-00008bb0: 7472 6561 6d20 636f 6d70 6f6e 656e 745c  tream component\
-00008bc0: 6e74 6861 7420 6973 2070 726f 6365 7373  nthat is process
-00008bd0: 696e 6720 616c 6c20 7265 636f 7264 6564  ing all recorded
-00008be0: 2065 7665 6e74 732c 2062 7920 636f 6d70   events, by comp
-00008bf0: 6172 696e 6720 7468 6520 6375 7272 656e  aring the curren
-00008c00: 7420 636f 6d6d 6974 5c6e 706f 7369 7469  t commit\npositi
-00008c10: 6f6e 2077 6974 6820 7468 6520 7265 636f  on with the reco
-00008c20: 7264 6564 2063 6f6d 6d69 7420 706f 7369  rded commit posi
-00008c30: 7469 6f6e 206f 6620 7468 6520 6c61 7374  tion of the last
-00008c40: 2073 7563 6365 7373 6675 6c6c 7920 7072   successfully pr
-00008c50: 6f63 6573 7365 645c 6e65 7665 6e74 2069  ocessed\nevent i
-00008c60: 6e20 6120 646f 776e 7374 7265 616d 2063  n a downstream c
-00008c70: 6f6d 706f 6e65 6e74 2e5c 6e5c 6e54 6865  omponent.\n\nThe
-00008c80: 2076 616c 7565 206f 6620 7468 6520 6063   value of the `c
-00008c90: 6f6d 6d69 745f 706f 7369 7469 6f6e 6020  ommit_position` 
-00008ca0: 6172 6775 6d65 6e74 2077 6865 6e20 7265  argument when re
-00008cb0: 6164 696e 6720 6576 656e 7473 2065 6974  ading events eit
-00008cc0: 6865 7220 6279 2075 7369 6e67 5c6e 7468  her by using\nth
-00008cd0: 6520 6072 6561 645f 616c 6c5f 6576 656e  e `read_all_even
-00008ce0: 7473 2829 6020 6d65 7468 6f64 206f 7220  ts()` method or 
-00008cf0: 6279 2075 7369 6e67 2061 2063 6174 6368  by using a catch
-00008d00: 2d75 7020 7375 6273 6372 6970 7469 6f6e  -up subscription
-00008d10: 2077 6f75 6c64 2075 7375 616c 6c79 5c6e   would usually\n
-00008d20: 6265 2064 6574 6572 6d69 6e65 6420 6279  be determined by
-00008d30: 2074 6865 2072 6563 6f72 6465 6420 636f   the recorded co
-00008d40: 6d6d 6974 2070 6f73 6974 696f 6e20 6f66  mmit position of
-00008d50: 2074 6865 206c 6173 7420 7375 6363 6573   the last succes
-00008d60: 7366 756c 6c79 2070 726f 6365 7373 6564  sfully processed
-00008d70: 5c6e 6576 656e 7420 696e 2061 2064 6f77  \nevent in a dow
-00008d80: 6e73 7472 6561 6d20 636f 6d70 6f6e 656e  nstream componen
-00008d90: 742e 5c6e 5c6e 5c6e 5c6e 2323 2320 4765  t.\n\n\n\n### Ge
-00008da0: 7420 7374 7265 616d 206d 6574 6164 6174  t stream metadat
-00008db0: 615c 6e5c 6e54 6865 206d 6574 686f 6420  a\n\nThe method 
-00008dc0: 6067 6574 5f73 7472 6561 6d5f 6d65 7461  `get_stream_meta
-00008dd0: 6461 7461 2829 6020 6765 7473 2074 6865  data()` gets the
-00008de0: 206d 6574 6164 6174 6120 666f 7220 6120   metadata for a 
-00008df0: 7374 7265 616d 2c20 616c 6f6e 675c 6e77  stream, along\nw
-00008e00: 6974 6820 7468 6520 7665 7273 696f 6e20  ith the version 
-00008e10: 6f66 2074 6865 2073 7472 6561 6d20 6d65  of the stream me
-00008e20: 7461 6461 7461 2e5c 6e5c 6e60 6060 7079  tadata.\n\n```py
-00008e30: 7468 6f6e 5c6e 6d65 7461 6461 7461 2c20  thon\nmetadata, 
-00008e40: 6d65 7461 6461 7461 5f76 6572 7369 6f6e  metadata_version
-00008e50: 203d 2063 6c69 656e 742e 6765 745f 7374   = client.get_st
-00008e60: 7265 616d 5f6d 6574 6164 6174 6128 7374  ream_metadata(st
-00008e70: 7265 616d 5f6e 616d 653d 7374 7265 616d  ream_name=stream
-00008e80: 5f6e 616d 6531 295c 6e60 6060 5c6e 5c6e  _name1)\n```\n\n
-00008e90: 5468 6520 7265 7475 726e 6564 2060 6d65  The returned `me
-00008ea0: 7461 6461 7461 6020 7661 6c75 6520 6973  tadata` value is
-00008eb0: 2061 2050 7974 686f 6e20 6064 6963 7460   a Python `dict`
-00008ec0: 2e20 5468 6520 7265 7475 726e 6564 2060  . The returned `
-00008ed0: 6d65 7461 6461 7461 5f76 6572 7369 6f6e  metadata_version
-00008ee0: 605c 6e76 616c 7565 2069 7320 6569 7468  `\nvalue is eith
-00008ef0: 6572 2061 6e20 6069 6e74 602c 206f 7220  er an `int`, or 
-00008f00: 604e 6f6e 6560 2069 6620 7468 6520 7374  `None` if the st
-00008f10: 7265 616d 2064 6f65 7320 6e6f 7420 6578  ream does not ex
-00008f20: 6973 742e 2054 6865 7365 2076 616c 7565  ist. These value
-00008f30: 7320 6361 6e5c 6e62 6520 7061 7373 6564  s can\nbe passed
-00008f40: 2069 6e74 6f20 6073 6574 5f73 7472 6561   into `set_strea
-00008f50: 6d5f 6d65 7461 6461 7461 2829 602e 5c6e  m_metadata()`.\n
-00008f60: 5c6e 5c6e 2323 2320 5365 7420 7374 7265  \n\n### Set stre
-00008f70: 616d 206d 6574 6164 6174 615c 6e5c 6e54  am metadata\n\nT
-00008f80: 6865 206d 6574 686f 6420 6073 6574 5f73  he method `set_s
-00008f90: 7472 6561 6d5f 6d65 7461 6461 7461 2829  tream_metadata()
-00008fa0: 6020 7365 7473 2074 6865 206d 6574 6164  ` sets the metad
-00008fb0: 6174 6120 666f 7220 6120 7374 7265 616d  ata for a stream
-00008fc0: 2c20 616c 6f6e 675c 6e77 6974 6820 7468  , along\nwith th
-00008fd0: 6520 7665 7273 696f 6e20 6f66 2074 6865  e version of the
-00008fe0: 2073 7472 6561 6d20 6d65 7461 6461 7461   stream metadata
-00008ff0: 2e5c 6e5c 6e60 6060 7079 7468 6f6e 5c6e  .\n\n```python\n
-00009000: 6d65 7461 6461 7461 5b22 666f 6f22 5d20  metadata["foo"] 
-00009010: 3d20 2262 6172 225c 6e5c 6e63 6c69 656e  = "bar"\n\nclien
-00009020: 742e 7365 745f 7374 7265 616d 5f6d 6574  t.set_stream_met
-00009030: 6164 6174 6128 5c6e 2020 2020 7374 7265  adata(\n    stre
-00009040: 616d 5f6e 616d 653d 7374 7265 616d 5f6e  am_name=stream_n
-00009050: 616d 6531 2c5c 6e20 2020 206d 6574 6164  ame1,\n    metad
-00009060: 6174 613d 6d65 7461 6461 7461 2c5c 6e20  ata=metadata,\n 
-00009070: 2020 2065 7870 6563 7465 645f 706f 7369     expected_posi
-00009080: 7469 6f6e 3d6d 6574 6164 6174 615f 7665  tion=metadata_ve
-00009090: 7273 696f 6e2c 5c6e 295c 6e60 6060 5c6e  rsion,\n)\n```\n
-000090a0: 5c6e 5468 6520 6065 7870 6563 7465 645f  \nThe `expected_
-000090b0: 706f 7369 7469 6f6e 6020 6172 6775 6d65  position` argume
-000090c0: 6e74 2073 686f 756c 6420 6265 2074 6865  nt should be the
-000090d0: 2063 7572 7265 6e74 2076 6572 7369 6f6e   current version
-000090e0: 206f 6620 7468 6520 7374 7265 616d 206d   of the stream m
-000090f0: 6574 6164 6174 612e 5c6e 5c6e 506c 6561  etadata.\n\nPlea
-00009100: 7365 2072 6566 6572 2074 6f20 7468 6520  se refer to the 
-00009110: 4576 656e 7453 746f 7265 4442 2064 6f63  EventStoreDB doc
-00009120: 756d 656e 7461 7469 6f6e 2066 6f72 206d  umentation for m
-00009130: 6f72 6520 696e 666f 726d 6174 696f 6e20  ore information 
-00009140: 6162 6f75 7420 7374 7265 616d 5c6e 6d65  about stream\nme
-00009150: 7461 6461 7461 2e5c 6e5c 6e23 2323 2044  tadata.\n\n### D
-00009160: 656c 6574 6520 7374 7265 616d 5c6e 5c6e  elete stream\n\n
-00009170: 5468 6520 6d65 7468 6f64 2060 6465 6c65  The method `dele
-00009180: 7465 5f73 7472 6561 6d28 2960 2063 616e  te_stream()` can
-00009190: 2062 6520 7573 6564 2074 6f20 2264 656c   be used to "del
-000091a0: 6574 6522 2061 2073 7472 6561 6d2e 5c6e  ete" a stream.\n
-000091b0: 5c6e 6060 6070 7974 686f 6e5c 6e63 6f6d  \n```python\ncom
-000091c0: 6d69 745f 706f 7369 7469 6f6e 203d 2063  mit_position = c
-000091d0: 6c69 656e 742e 6465 6c65 7465 5f73 7472  lient.delete_str
-000091e0: 6561 6d28 7374 7265 616d 5f6e 616d 653d  eam(stream_name=
-000091f0: 7374 7265 616d 5f6e 616d 6531 2c20 6578  stream_name1, ex
-00009200: 7065 6374 6564 5f70 6f73 6974 696f 6e3d  pected_position=
-00009210: 3229 5c6e 6060 605c 6e5c 6e41 6674 6572  2)\n```\n\nAfter
-00009220: 2064 656c 6574 696e 6720 6120 7374 7265   deleting a stre
-00009230: 616d 2c20 6974 5c27 7320 7374 696c 6c20  am, it\'s still 
-00009240: 706f 7373 6962 6c65 2074 6f20 6170 7065  possible to appe
-00009250: 6e64 206e 6577 2065 7665 6e74 732e 2052  nd new events. R
-00009260: 6561 6469 6e67 2066 726f 6d20 615c 6e64  eading from a\nd
-00009270: 656c 6574 6564 2073 7472 6561 6d20 7769  eleted stream wi
-00009280: 6c6c 2072 6574 7572 6e20 6f6e 6c79 2065  ll return only e
-00009290: 7665 6e74 7320 7468 6174 2068 6176 6520  vents that have 
-000092a0: 6265 656e 2061 7070 656e 6465 6420 6166  been appended af
-000092b0: 7465 7220 6974 2077 6173 5c6e 6465 6c65  ter it was\ndele
-000092c0: 7465 642e 5c6e 5c6e 2323 2320 546f 6d62  ted.\n\n### Tomb
-000092d0: 7374 6f6e 6520 7374 7265 616d 5c6e 5c6e  stone stream\n\n
-000092e0: 5468 6520 6d65 7468 6f64 2060 746f 6d62  The method `tomb
-000092f0: 7374 6f6e 655f 7374 7265 616d 2829 6020  stone_stream()` 
-00009300: 6361 6e20 6265 2075 7365 6420 746f 2022  can be used to "
-00009310: 746f 6d62 7374 6f6e 6522 2061 2073 7472  tombstone" a str
-00009320: 6561 6d2e 5c6e 5c6e 6060 6070 7974 686f  eam.\n\n```pytho
-00009330: 6e5c 6e63 6f6d 6d69 745f 706f 7369 7469  n\ncommit_positi
-00009340: 6f6e 203d 2063 6c69 656e 742e 746f 6d62  on = client.tomb
-00009350: 7374 6f6e 655f 7374 7265 616d 2873 7472  stone_stream(str
-00009360: 6561 6d5f 6e61 6d65 3d73 7472 6561 6d5f  eam_name=stream_
-00009370: 6e61 6d65 312c 2065 7870 6563 7465 645f  name1, expected_
-00009380: 706f 7369 7469 6f6e 3d32 295c 6e60 6060  position=2)\n```
-00009390: 5c6e 5c6e 4166 7465 7220 746f 6d62 7374  \n\nAfter tombst
-000093a0: 6f6e 696e 6720 6120 7374 7265 616d 2c20  oning a stream, 
-000093b0: 6974 5c27 7320 6e6f 7420 706f 7373 6962  it\'s not possib
-000093c0: 6c65 2074 6f20 6170 7065 6e64 206e 6577  le to append new
-000093d0: 2065 7665 6e74 732e 5c6e 5c6e 5c6e 2323   events.\n\n\n##
-000093e0: 2043 6174 6368 2d75 7020 7375 6273 6372   Catch-up subscr
-000093f0: 6970 7469 6f6e 735c 6e5c 6e41 2022 6361  iptions\n\nA "ca
-00009400: 7463 682d 7570 2073 7562 7363 7269 7074  tch-up subscript
-00009410: 696f 6e22 2063 616e 2062 6520 7573 6564  ion" can be used
-00009420: 2074 6f20 7265 6365 6976 6520 616c 7265   to receive alre
-00009430: 6164 7920 7265 636f 7264 6564 2065 7665  ady recorded eve
-00009440: 6e74 732c 2062 7574 5c6e 6974 2077 696c  nts, but\nit wil
-00009450: 6c20 616c 736f 2072 6574 7572 6e20 6576  l also return ev
-00009460: 656e 7473 2074 6861 7420 6172 6520 7265  ents that are re
-00009470: 636f 7264 6564 2061 6674 6572 2074 6865  corded after the
-00009480: 2073 7562 7363 7269 7074 696f 6e20 7761   subscription wa
-00009490: 7320 7374 6172 7465 642e 5c6e 5c6e 5468  s started.\n\nTh
-000094a0: 6520 6d65 7468 6f64 2060 7375 6273 6372  e method `subscr
-000094b0: 6962 655f 616c 6c5f 6576 656e 7473 2829  ibe_all_events()
-000094c0: 6020 7374 6172 7473 2061 2063 6174 6368  ` starts a catch
-000094d0: 2d75 7020 7375 6273 6372 6970 7469 6f6e  -up subscription
-000094e0: 2074 6f20 7265 6365 6976 6520 616c 6c5c   to receive all\
-000094f0: 6e65 7665 6e74 7320 696e 2074 6865 2064  nevents in the d
-00009500: 6174 6162 6173 652e 2054 6865 206d 6574  atabase. The met
-00009510: 686f 6420 6073 7562 7363 7269 6265 5f73  hod `subscribe_s
-00009520: 7472 6561 6d5f 6576 656e 7473 2829 6020  tream_events()` 
-00009530: 7374 6172 7473 2061 2063 6174 6368 2d75  starts a catch-u
-00009540: 705c 6e73 7562 7363 7269 7074 696f 6e20  p\nsubscription 
-00009550: 746f 2072 6563 6569 7665 2065 7665 6e74  to receive event
-00009560: 7320 6672 6f6d 2061 2073 7065 6369 6669  s from a specifi
-00009570: 6320 7374 7265 616d 2e5c 6e5c 6e43 6174  c stream.\n\nCat
-00009580: 6368 2d75 7020 7375 6273 6372 6970 7469  ch-up subscripti
-00009590: 6f6e 7320 6172 6520 7369 6d70 6c79 2061  ons are simply a
-000095a0: 2073 7472 6561 6d69 6e67 2067 5250 4320   streaming gRPC 
-000095b0: 6361 6c6c 2077 6869 6368 2069 735c 6e6b  call which is\nk
-000095c0: 6570 7420 6f70 656e 2062 7920 7468 6520  ept open by the 
-000095d0: 7365 7276 6572 2c20 7769 7468 206e 6577  server, with new
-000095e0: 6c79 2072 6563 6f72 6465 6420 6576 656e  ly recorded even
-000095f0: 7473 2073 656e 7420 746f 2074 6865 2063  ts sent to the c
-00009600: 6c69 656e 745c 6e61 7320 7468 6520 636c  lient\nas the cl
-00009610: 6965 6e74 2069 7465 7261 7465 7320 6f76  ient iterates ov
-00009620: 6572 2074 6865 2073 7562 7363 7269 7074  er the subscript
-00009630: 696f 6e2e 5c6e 5c6e 4d61 6e79 2063 6174  ion.\n\nMany cat
-00009640: 6368 2d75 7020 7375 6273 6372 6970 7469  ch-up subscripti
-00009650: 6f6e 7320 6361 6e20 6265 2063 7265 6174  ons can be creat
-00009660: 6564 2c20 636f 6e63 7572 7265 6e74 6c79  ed, concurrently
-00009670: 206f 7220 7375 6363 6573 7369 7665 6c79   or successively
-00009680: 2c20 616e 6420 616c 6c5c 6e77 696c 6c20  , and all\nwill 
-00009690: 7265 6365 6976 6520 616c 6c20 7468 6520  receive all the 
-000096a0: 7265 636f 7264 6564 2065 7665 6e74 7320  recorded events 
-000096b0: 7468 6579 2068 6176 6520 6265 656e 2072  they have been r
-000096c0: 6571 7565 7374 6564 2074 6f20 7265 6365  equested to rece
-000096d0: 6976 652e 5c6e 5c6e 5265 6365 6976 6564  ive.\n\nReceived
-000096e0: 2072 6563 6f72 6465 6420 6576 656e 7473   recorded events
-000096f0: 2061 7265 2069 6e73 7461 6e63 6573 206f   are instances o
-00009700: 6620 7468 6520 6052 6563 6f72 6465 6445  f the `RecordedE
-00009710: 7665 6e74 6020 636c 6173 7320 2873 6565  vent` class (see
-00009720: 2062 656c 6f77 292e 5c6e 5265 636f 7264   below).\nRecord
-00009730: 6564 2065 7665 6e74 206f 626a 6563 7473  ed event objects
-00009740: 2068 6176 6520 6120 636f 6d6d 6974 2070   have a commit p
-00009750: 6f73 6974 696f 6e2c 2061 6d6f 6e73 7420  osition, amonst 
-00009760: 6f74 6865 7220 6174 7472 6962 7574 6573  other attributes
-00009770: 2e5c 6e5c 6e23 2323 2048 6f77 2074 6f20  .\n\n### How to 
-00009780: 696d 706c 656d 656e 7420 6578 6163 746c  implement exactl
-00009790: 792d 6f6e 6365 2065 7665 6e74 2070 726f  y-once event pro
-000097a0: 6365 7373 696e 675c 6e5c 6e54 6865 2063  cessing\n\nThe c
-000097b0: 6f6d 6d69 7420 706f 7369 7469 6f6e 7320  ommit positions 
-000097c0: 6f66 2072 6563 6f72 6465 6420 6576 656e  of recorded even
-000097d0: 7473 2074 6861 7420 6172 6520 7265 6365  ts that are rece
-000097e0: 6976 6564 2061 6e64 2070 726f 6365 7373  ived and process
-000097f0: 6564 2062 7920 615c 6e64 6f77 6e73 7472  ed by a\ndownstr
-00009800: 6561 6d20 636f 6d70 6f6e 656e 7420 6172  eam component ar
-00009810: 6520 7573 6566 756c 6c79 2072 6563 6f72  e usefully recor
-00009820: 6465 6420 6279 2074 6865 2064 6f77 6e73  ded by the downs
-00009830: 7472 6561 6d20 636f 6d70 6f6e 656e 7420  tream component 
-00009840: 736f 2074 6861 745c 6e74 6865 2063 6f6d  so that\nthe com
-00009850: 6d69 7420 706f 7369 7469 6f6e 206f 6620  mit position of 
-00009860: 6c61 7374 2070 726f 6365 7373 6564 2065  last processed e
-00009870: 7665 6e74 2063 616e 2062 6520 6465 7465  vent can be dete
-00009880: 726d 696e 6564 2e5c 6e5c 6e54 6865 206c  rmined.\n\nThe l
-00009890: 6173 7420 7265 636f 7264 6564 2063 6f6d  ast recorded com
-000098a0: 6d69 7420 706f 7369 7469 6f6e 2063 616e  mit position can
-000098b0: 2062 6520 7573 6564 2074 6f20 7370 6563   be used to spec
-000098c0: 6966 7920 7468 6520 636f 6d6d 6974 2070  ify the commit p
-000098d0: 6f73 6974 696f 6e20 6672 6f6d 2077 6869  osition from whi
-000098e0: 6368 5c6e 746f 2073 7562 7363 7269 6265  ch\nto subscribe
-000098f0: 2077 6865 6e20 7072 6f63 6573 7369 6e67   when processing
-00009900: 2069 7320 7265 7375 6d65 642e 2053 696e   is resumed. Sin
-00009910: 6365 2074 6869 7320 636f 6d6d 6974 2070  ce this commit p
-00009920: 6f73 6974 696f 6e20 7769 6c6c 2072 6570  osition will rep
-00009930: 7265 7365 6e74 2074 6865 5c6e 706f 7369  resent the\nposi
-00009940: 7469 6f6e 206f 6620 7468 6520 6c61 7374  tion of the last
-00009950: 2073 7563 6365 7373 6675 6c6c 7920 7072   successfully pr
-00009960: 6f63 6573 7365 6420 6576 656e 7420 696e  ocessed event in
-00009970: 2061 2064 6f77 6e73 7472 6561 6d20 636f   a downstream co
-00009980: 6d70 6f6e 656e 742c 2073 6f20 6974 5c6e  mponent, so it\n
-00009990: 7769 6c6c 2062 6520 7573 7561 6c20 746f  will be usual to
-000099a0: 2077 616e 7420 7468 6520 6e65 7874 2065   want the next e
-000099b0: 7665 6e74 2061 6674 6572 2074 6869 7320  vent after this 
-000099c0: 706f 7369 7469 6f6e 2c20 6265 6361 7573  position, becaus
-000099d0: 6520 7468 6174 2069 7320 7468 6520 6e65  e that is the ne
-000099e0: 7874 5c6e 6576 656e 7420 7468 6174 2068  xt\nevent that h
-000099f0: 6173 206e 6f74 2079 6574 2062 6565 6e20  as not yet been 
-00009a00: 7072 6f63 6573 7365 642e 2046 6f72 2074  processed. For t
-00009a10: 6869 7320 7265 6173 6f6e 2c20 7768 656e  his reason, when
-00009a20: 2073 7562 7363 7269 6269 6e67 2066 6f72   subscribing for
-00009a30: 2065 7665 6e74 735c 6e66 726f 6d20 6120   events\nfrom a 
-00009a40: 7370 6563 6966 6963 2063 6f6d 6d69 7420  specific commit 
-00009a50: 706f 7369 7469 6f6e 2075 7369 6e67 2061  position using a
-00009a60: 2063 6174 6368 2d75 7020 7375 6273 6372   catch-up subscr
-00009a70: 6970 7469 6f6e 2069 6e20 4576 656e 7453  iption in EventS
-00009a80: 746f 7265 4442 2c20 7468 655c 6e72 6563  toreDB, the\nrec
-00009a90: 6f72 6465 6420 6576 656e 7420 6174 2074  orded event at t
-00009aa0: 6865 2073 7065 6369 6669 6564 2063 6f6d  he specified com
-00009ab0: 6d69 7420 706f 7369 7469 6f6e 2077 696c  mit position wil
-00009ac0: 6c20 4e4f 5420 6265 2069 6e63 6c75 6465  l NOT be include
-00009ad0: 6420 696e 2074 6865 2073 6571 7565 6e63  d in the sequenc
-00009ae0: 655c 6e6f 6620 7265 636f 7264 6564 2065  e\nof recorded e
-00009af0: 7665 6e74 7320 7468 6174 2061 7265 2072  vents that are r
-00009b00: 6563 6569 7665 642e 5c6e 5c6e 546f 2061  eceived.\n\nTo a
-00009b10: 6363 6f6d 706c 6973 6820 2265 7861 6374  ccomplish "exact
-00009b20: 6c79 2d6f 6e63 6522 2070 726f 6365 7373  ly-once" process
-00009b30: 696e 6720 6f66 2072 6563 6f72 6465 6420  ing of recorded 
-00009b40: 6576 656e 7473 2069 6e20 6120 646f 776e  events in a down
-00009b50: 7374 7265 616d 5c6e 636f 6d70 6f6e 656e  stream\ncomponen
-00009b60: 7420 7768 656e 2075 7369 6e67 2061 2063  t when using a c
-00009b70: 6174 6368 2d75 7020 7375 6273 6372 6970  atch-up subscrip
-00009b80: 7469 6f6e 2c20 7468 6520 636f 6d6d 6974  tion, the commit
-00009b90: 2070 6f73 6974 696f 6e20 6f66 2061 2072   position of a r
-00009ba0: 6563 6f72 6465 645c 6e65 7665 6e74 2073  ecorded\nevent s
-00009bb0: 686f 756c 6420 6265 2072 6563 6f72 6465  hould be recorde
-00009bc0: 6420 6174 6f6d 6963 616c 6c79 2061 6e64  d atomically and
-00009bd0: 2075 6e69 7175 656c 7920 616c 6f6e 6720   uniquely along 
-00009be0: 7769 7468 2074 6865 2072 6573 756c 7420  with the result 
-00009bf0: 6f66 2070 726f 6365 7373 696e 675c 6e72  of processing\nr
-00009c00: 6563 6f72 6465 6420 6576 656e 7473 2c20  ecorded events, 
-00009c10: 666f 7220 6578 616d 706c 6520 696e 2074  for example in t
-00009c20: 6865 2073 616d 6520 6461 7461 6261 7365  he same database
-00009c30: 2061 7320 6d61 7465 7269 616c 6973 6564   as materialised
-00009c40: 2076 6965 7773 2077 6865 6e5c 6e69 6d70   views when\nimp
-00009c50: 6c65 6d65 6e74 696e 6720 6576 656e 7475  lementing eventu
-00009c60: 616c 6c79 2d63 6f6e 7369 7374 656e 7420  ally-consistent 
-00009c70: 4351 5253 2c20 6f72 2069 6e20 7468 6520  CQRS, or in the 
-00009c80: 7361 6d65 2064 6174 6162 6173 6520 6173  same database as
-00009c90: 2061 2064 6f77 6e73 7472 6561 6d5c 6e61   a downstream\na
-00009ca0: 6e61 6c79 7469 6373 206f 7220 7265 706f  nalytics or repo
-00009cb0: 7274 696e 6720 6f72 2061 7263 6869 7669  rting or archivi
-00009cc0: 6e67 2061 7070 6c69 6361 7469 6f6e 2e20  ng application. 
-00009cd0: 4279 2072 6563 6f72 6469 6e67 2074 6865  By recording the
-00009ce0: 2063 6f6d 6d69 7420 706f 7369 7469 6f6e   commit position
-00009cf0: 5c6e 6f66 2072 6563 6f72 6465 6420 6576  \nof recorded ev
-00009d00: 656e 7473 2061 746f 6d69 6361 6c6c 7920  ents atomically 
-00009d10: 7769 7468 2074 6865 206e 6577 2073 7461  with the new sta
-00009d20: 7465 2074 6861 7420 7265 7375 6c74 7320  te that results 
-00009d30: 6672 6f6d 2070 726f 6365 7373 696e 675c  from processing\
-00009d40: 6e72 6563 6f72 6465 6420 6576 656e 7473  nrecorded events
-00009d50: 2c20 2264 7561 6c20 7772 6974 696e 6722  , "dual writing"
-00009d60: 2069 6e20 7468 6520 636f 6e73 756d 7074   in the consumpt
-00009d70: 696f 6e20 6f66 2072 6563 6f72 6465 6420  ion of recorded 
-00009d80: 6576 656e 7473 2063 616e 2062 655c 6e61  events can be\na
-00009d90: 766f 6964 6564 2e20 4279 2061 6c73 6f20  voided. By also 
-00009da0: 7265 636f 7264 696e 6720 7468 6520 636f  recording the co
-00009db0: 6d6d 6974 2070 6f73 6974 696f 6e20 756e  mmit position un
-00009dc0: 6971 7565 6c79 2c20 7468 6520 6e65 7720  iquely, the new 
-00009dd0: 7374 6174 6520 6361 6e6e 6f74 2062 655c  state cannot be\
-00009de0: 6e72 6563 6f72 6465 6420 7477 6963 652c  nrecorded twice,
-00009df0: 2061 6e64 2068 656e 6365 2074 6865 2072   and hence the r
-00009e00: 6563 6f72 6465 6420 7374 6174 6520 6f66  ecorded state of
-00009e10: 2074 6865 2064 6f77 6e73 7472 6561 6d20   the downstream 
-00009e20: 636f 6d70 6f6e 656e 7420 7769 6c6c 2062  component will b
-00009e30: 655c 6e75 7064 6174 6564 206f 6e6c 7920  e\nupdated only 
-00009e40: 6f6e 6365 2066 6f72 2061 6e79 2072 6563  once for any rec
-00009e50: 6f72 6465 6420 6576 656e 742e 2042 7920  orded event. By 
-00009e60: 7573 696e 6720 7468 6520 6772 6561 7465  using the greate
-00009e70: 7374 2072 6563 6f72 6465 6420 636f 6d6d  st recorded comm
-00009e80: 6974 5c6e 706f 7369 7469 6f6e 2074 6f20  it\nposition to 
-00009e90: 7265 7375 6d65 2061 2063 6174 6368 2d75  resume a catch-u
-00009ea0: 7020 7375 6273 6372 6970 7469 6f6e 2c20  p subscription, 
-00009eb0: 616c 6c20 7265 636f 7264 6564 2065 7665  all recorded eve
-00009ec0: 6e74 7320 7769 6c6c 2065 7665 6e74 7561  nts will eventua
-00009ed0: 6c6c 795c 6e62 6520 7072 6f63 6573 7365  lly\nbe processe
-00009ee0: 642e 2054 6865 2063 6f6d 6269 6e61 7469  d. The combinati
-00009ef0: 6f6e 206f 6620 7468 6520 2261 742d 6d6f  on of the "at-mo
-00009f00: 7374 2d6f 6e63 6522 2063 6f6e 6469 7469  st-once" conditi
-00009f10: 6f6e 2061 6e64 2074 6865 2022 6174 2d6c  on and the "at-l
-00009f20: 6561 7374 2d6f 6e63 6522 5c6e 636f 6e64  east-once"\ncond
-00009f30: 6974 696f 6e20 6769 7665 7320 7468 6520  ition gives the 
-00009f40: 2265 7861 6374 6c79 2d6f 6e63 6522 2063  "exactly-once" c
-00009f50: 6f6e 6469 7469 6f6e 2e5c 6e5c 6e54 6865  ondition.\n\nThe
-00009f60: 2064 616e 6765 7220 7769 7468 2022 6475   danger with "du
-00009f70: 616c 2077 7269 7469 6e67 2220 696e 2074  al writing" in t
-00009f80: 6865 2063 6f6e 7375 6d70 7469 6f6e 206f  he consumption o
-00009f90: 6620 7265 636f 7264 6564 2065 7665 6e74  f recorded event
-00009fa0: 7320 6973 2074 6861 7420 6966 2061 5c6e  s is that if a\n
-00009fb0: 7265 636f 7264 6564 2065 7665 6e74 2069  recorded event i
-00009fc0: 7320 7375 6363 6573 7366 756c 6c79 2070  s successfully p
-00009fd0: 726f 6365 7373 6564 2061 6e64 206e 6577  rocessed and new
-00009fe0: 2073 7461 7465 2072 6563 6f72 6465 6420   state recorded 
-00009ff0: 6174 6f6d 6963 616c 6c79 2069 6e20 6f6e  atomically in on
-0000a000: 655c 6e74 7261 6e73 6163 7469 6f6e 2077  e\ntransaction w
-0000a010: 6974 6820 7468 6520 636f 6d6d 6974 2070  ith the commit p
-0000a020: 6f73 6974 696f 6e20 7265 636f 7264 6564  osition recorded
-0000a030: 2069 6e20 6120 7365 7061 7261 7465 2074   in a separate t
-0000a040: 7261 6e73 6163 7469 6f6e 2c20 6f6e 6520  ransaction, one 
-0000a050: 6d61 795c 6e68 6170 7065 6e20 616e 6420  may\nhappen and 
-0000a060: 6e6f 7420 7468 6520 6f74 6865 722e 2049  not the other. I
-0000a070: 6620 7468 6520 6e65 7720 7374 6174 6520  f the new state 
-0000a080: 6973 2072 6563 6f72 6465 6420 6275 7420  is recorded but 
-0000a090: 7468 6520 706f 7369 7469 6f6e 2069 7320  the position is 
-0000a0a0: 6c6f 7374 2c5c 6e61 6e64 2074 6865 6e20  lost,\nand then 
-0000a0b0: 7468 6520 7072 6f63 6573 7369 6e67 2069  the processing i
-0000a0c0: 7320 7374 6f70 7065 6420 616e 6420 7265  s stopped and re
-0000a0d0: 7375 6d65 642c 2074 6865 2072 6563 6f72  sumed, the recor
-0000a0e0: 6465 6420 6576 656e 7420 6d61 7920 6265  ded event may be
-0000a0f0: 2070 726f 6365 7373 6564 5c6e 7477 6963   processed\ntwic
-0000a100: 652e 204f 6e20 7468 6520 6f74 6865 7220  e. On the other 
-0000a110: 6861 6e64 2c20 6966 2074 6865 2063 6f6d  hand, if the com
-0000a120: 6d69 7420 706f 7369 7469 6f6e 2069 7320  mit position is 
-0000a130: 7265 636f 7264 6564 2062 7574 2074 6865  recorded but the
-0000a140: 206e 6577 2073 7461 7465 2069 735c 6e6c   new state is\nl
-0000a150: 6f73 742c 2074 6865 2072 6563 6f72 6465  ost, the recorde
-0000a160: 6420 6576 656e 7420 6d61 7920 6566 6665  d event may effe
-0000a170: 6374 6976 656c 7920 6e6f 7420 6265 2070  ctively not be p
-0000a180: 726f 6365 7373 6564 2061 7420 616c 6c2e  rocessed at all.
-0000a190: 2042 7920 6569 7468 6572 5c6e 7072 6f63   By either\nproc
-0000a1a0: 6573 7369 6e67 2061 6e20 6576 656e 7420  essing an event 
-0000a1b0: 6d6f 7265 2074 6861 6e20 6f6e 6365 2c20  more than once, 
-0000a1c0: 6f72 2062 7920 6661 696c 696e 6720 746f  or by failing to
-0000a1d0: 2070 726f 6365 7373 2061 6e20 6576 656e   process an even
-0000a1e0: 742c 2074 6865 2072 6563 6f72 6465 645c  t, the recorded\
-0000a1f0: 6e73 7461 7465 206f 6620 7468 6520 646f  nstate of the do
-0000a200: 776e 7374 7265 616d 2063 6f6d 706f 6e65  wnstream compone
-0000a210: 6e74 206d 6967 6874 2062 6520 696e 6163  nt might be inac
-0000a220: 6375 7261 7465 2c20 6f72 2070 6f73 7369  curate, or possi
-0000a230: 626c 7920 696e 636f 6e73 6973 7465 6e74  bly inconsistent
-0000a240: 2c20 616e 645c 6e70 6572 6861 7073 2063  , and\nperhaps c
-0000a250: 6174 6173 7472 6f70 6869 6361 6c6c 7920  atastrophically 
-0000a260: 736f 2e20 5375 6368 2063 6f6e 7365 7175  so. Such consequ
-0000a270: 656e 6365 7320 6d61 7920 6f72 206d 6179  ences may or may
-0000a280: 206e 6f74 206d 6174 7465 7220 696e 2079   not matter in y
-0000a290: 6f75 7220 7369 7475 6174 696f 6e2e 5c6e  our situation.\n
-0000a2a0: 4275 7420 736f 6d65 7469 6d65 7320 696e  But sometimes in
-0000a2b0: 636f 6e73 6973 7465 6e63 6965 7320 6d61  consistencies ma
-0000a2c0: 7920 6861 6c74 2070 726f 6365 7373 696e  y halt processin
-0000a2d0: 6720 756e 7469 6c20 7468 6520 6973 7375  g until the issu
-0000a2e0: 6520 6973 2072 6573 6f6c 7665 642e 2059  e is resolved. Y
-0000a2f0: 6f75 2063 616e 5c6e 6176 6f69 6420 2264  ou can\navoid "d
-0000a300: 7561 6c20 7772 6974 696e 6722 2069 6e20  ual writing" in 
-0000a310: 7468 6520 636f 6e73 756d 7074 696f 6e20  the consumption 
-0000a320: 6f66 2065 7665 6e74 7320 6279 2061 746f  of events by ato
-0000a330: 6d69 6361 6c6c 7920 7265 636f 7264 696e  mically recordin
-0000a340: 6720 7468 6520 636f 6d6d 6974 5c6e 706f  g the commit\npo
-0000a350: 7369 7469 6f6e 206f 6620 6120 7265 636f  sition of a reco
-0000a360: 7264 6564 2065 7665 6e74 2061 6c6f 6e67  rded event along
-0000a370: 2077 6974 6820 7468 6520 6e65 7720 7374   with the new st
-0000a380: 6174 6520 7468 6174 2072 6573 756c 7473  ate that results
-0000a390: 2066 726f 6d20 7072 6f63 6573 7369 6e67   from processing
-0000a3a0: 2074 6861 745c 6e65 7665 6e74 2069 6e20   that\nevent in 
-0000a3b0: 7468 6520 7361 6d65 2061 746f 6d69 6320  the same atomic 
-0000a3c0: 7472 616e 7361 6374 696f 6e2e 2042 7920  transaction. By 
-0000a3d0: 6d61 6b69 6e67 2074 6865 2072 6563 6f72  making the recor
-0000a3e0: 6469 6e67 206f 6620 7468 6520 636f 6d6d  ding of the comm
-0000a3f0: 6974 2070 6f73 6974 696f 6e73 5c6e 756e  it positions\nun
-0000a400: 6971 7565 2c20 736f 2074 6861 7420 7472  ique, so that tr
-0000a410: 616e 7361 6374 696f 6e73 2077 696c 6c20  ansactions will 
-0000a420: 6265 2072 6f6c 6c65 6420 6261 636b 2077  be rolled back w
-0000a430: 6865 6e20 7468 6572 6520 6973 2061 2063  hen there is a c
-0000a440: 6f6e 666c 6963 742c 2079 6f75 2077 696c  onflict, you wil
-0000a450: 6c5c 6e70 7265 7665 6e74 2074 6865 2072  l\nprevent the r
-0000a460: 6573 756c 7473 206f 6620 616e 7920 6475  esults of any du
-0000a470: 706c 6963 6174 6520 7072 6f63 6573 7369  plicate processi
-0000a480: 6e67 206f 6620 6120 7265 636f 7264 6564  ng of a recorded
-0000a490: 2065 7665 6e74 2062 6569 6e67 2063 6f6d   event being com
-0000a4a0: 6d69 7474 6564 2e5c 6e5c 6e52 6563 6f72  mitted.\n\nRecor
-0000a4b0: 6465 6420 6576 656e 7473 2072 6563 6569  ded events recei
-0000a4c0: 7665 6420 6672 6f6d 2061 2063 6174 6368  ved from a catch
-0000a4d0: 2d75 7020 7375 6273 6372 6970 7469 6f6e  -up subscription
-0000a4e0: 2063 616e 6e6f 7420 6265 2061 636b 6e6f   cannot be ackno
-0000a4f0: 776c 6564 6765 6420 6261 636b 5c6e 746f  wledged back\nto
-0000a500: 2074 6865 2045 7665 6e74 5374 6f72 6544   the EventStoreD
-0000a510: 4220 7365 7276 6572 2e20 4163 6b6e 6f77  B server. Acknow
-0000a520: 6c65 6467 696e 6720 6576 656e 7473 2c20  ledging events, 
-0000a530: 686f 7765 7665 722c 2069 7320 616e 2061  however, is an a
-0000a540: 7370 6563 7420 6f66 2022 7065 7273 6973  spect of "persis
-0000a550: 7465 6e74 5c6e 7375 6273 6372 6970 7469  tent\nsubscripti
-0000a560: 6f6e 7322 2028 7365 6520 6265 6c6f 7729  ons" (see below)
-0000a570: 2e20 486f 7069 6e67 2074 6f20 7265 6c79  . Hoping to rely
-0000a580: 206f 6e20 6163 6b6e 6f77 6c65 6467 696e   on acknowledgin
-0000a590: 6720 6576 656e 7473 2074 6f20 616e 2075  g events to an u
-0000a5a0: 7073 7472 6561 6d5c 6e63 6f6d 706f 6e65  pstream\ncompone
-0000a5b0: 6e74 2069 7320 616e 2065 7861 6d70 6c65  nt is an example
-0000a5c0: 206f 6620 6475 616c 2077 7269 7469 6e67   of dual writing
-0000a5d0: 2e5c 6e5c 6e23 2323 2053 7562 7363 7269  .\n\n### Subscri
-0000a5e0: 6265 2061 6c6c 2065 7665 6e74 735c 6e5c  be all events\n\
-0000a5f0: 6e54 6865 6073 7562 7363 7269 6265 5f61  nThe`subscribe_a
-0000a600: 6c6c 5f65 7665 6e74 7328 2960 206d 6574  ll_events()` met
-0000a610: 686f 6420 6361 6e20 6265 2075 7365 6420  hod can be used 
-0000a620: 746f 2073 7461 7274 2061 2022 6361 7463  to start a "catc
-0000a630: 682d 7570 2220 7375 6273 6372 6970 7469  h-up" subscripti
-0000a640: 6f6e 5c6e 7468 6174 2063 616e 2072 6574  on\nthat can ret
-0000a650: 7572 6e20 616c 6c20 6576 656e 7473 2069  urn all events i
-0000a660: 6e20 7468 6520 6461 7461 6261 7365 2e5c  n the database.\
-0000a670: 6e5c 6e54 6869 7320 6d65 7468 6f64 2063  n\nThis method c
-0000a680: 616e 2062 6520 7573 6564 2062 7920 6120  an be used by a 
-0000a690: 646f 776e 7374 7265 616d 2063 6f6d 706f  downstream compo
-0000a6a0: 6e65 6e74 5c6e 746f 2070 726f 6365 7373  nent\nto process
-0000a6b0: 2072 6563 6f72 6465 6420 6576 656e 7473   recorded events
-0000a6c0: 2077 6974 6820 6578 6163 746c 792d 6f6e   with exactly-on
-0000a6d0: 6365 2073 656d 616e 7469 6373 2e5c 6e5c  ce semantics.\n\
-0000a6e0: 6e54 6869 7320 6d65 7468 6f64 2074 616b  nThis method tak
-0000a6f0: 6573 2061 6e20 6f70 7469 6f6e 616c 2060  es an optional `
-0000a700: 636f 6d6d 6974 5f70 6f73 6974 696f 6e60  commit_position`
-0000a710: 2061 7267 756d 656e 742c 2077 6869 6368   argument, which
-0000a720: 2063 616e 2062 655c 6e75 7365 6420 746f   can be\nused to
-0000a730: 2073 7065 6369 6679 2061 2063 6f6d 6d69   specify a commi
-0000a740: 7420 706f 7369 7469 6f6e 2066 726f 6d20  t position from 
-0000a750: 7768 6963 6820 746f 2073 7562 7363 7269  which to subscri
-0000a760: 6265 2066 6f72 5c6e 7265 636f 7264 6564  be for\nrecorded
-0000a770: 2065 7665 6e74 732e 2054 6865 2064 6566   events. The def
-0000a780: 6175 6c74 2076 616c 7565 2069 7320 604e  ault value is `N
-0000a790: 6f6e 6560 2c20 7768 6963 6820 6d65 616e  one`, which mean
-0000a7a0: 735c 6e74 6865 2073 7562 7363 7269 7074  s\nthe subscript
-0000a7b0: 696f 6e20 7769 6c6c 206f 7065 7261 7465  ion will operate
-0000a7c0: 2066 726f 6d20 7468 6520 6669 7273 7420   from the first 
-0000a7d0: 7265 636f 7264 6564 2065 7665 6e74 5c6e  recorded event\n
-0000a7e0: 696e 2074 6865 2064 6174 6162 6173 652e  in the database.
-0000a7f0: 2049 6620 6120 636f 6d6d 6974 2070 6f73   If a commit pos
-0000a800: 6974 696f 6e20 6973 2067 6976 656e 2c20  ition is given, 
-0000a810: 6974 206d 7573 7420 6d61 7463 685c 6e61  it must match\na
-0000a820: 6e20 6163 7475 616c 6c79 2065 7869 7374  n actually exist
-0000a830: 696e 6720 636f 6d6d 6974 2070 6f73 6974  ing commit posit
-0000a840: 696f 6e20 696e 2074 6865 2064 6174 6162  ion in the datab
-0000a850: 6173 652e 2054 6865 2065 7665 6e74 735c  ase. The events\
-0000a860: 6e74 6861 7420 6172 6520 6f62 7461 696e  nthat are obtain
-0000a870: 6564 2077 696c 6c20 6e6f 7420 696e 636c  ed will not incl
-0000a880: 7564 6520 7468 6520 6576 656e 7420 7265  ude the event re
-0000a890: 636f 7264 6564 2061 7420 7468 6174 2063  corded at that c
-0000a8a0: 6f6d 6d69 745c 6e70 6f73 6974 696f 6e2e  ommit\nposition.
-0000a8b0: 5c6e 5c6e 5468 6973 206d 6574 686f 6420  \n\nThis method 
-0000a8c0: 616c 736f 2074 616b 6573 2074 6872 6565  also takes three
-0000a8d0: 206f 7468 6572 206f 7074 696f 6e61 6c20   other optional 
-0000a8e0: 6172 6775 6d65 6e74 732c 2060 6669 6c74  arguments, `filt
-0000a8f0: 6572 5f65 7863 6c75 6465 602c 5c6e 6066  er_exclude`,\n`f
-0000a900: 696c 7465 725f 696e 636c 7564 6560 2c20  ilter_include`, 
-0000a910: 616e 6420 6074 696d 656f 7574 602e 5c6e  and `timeout`.\n
-0000a920: 5c6e 5468 6520 6172 6775 6d65 6e74 2060  \nThe argument `
-0000a930: 6669 6c74 6572 5f65 7863 6c75 6465 6020  filter_exclude` 
-0000a940: 6973 2061 2073 6571 7565 6e63 6520 6f66  is a sequence of
-0000a950: 2072 6567 756c 6172 2065 7870 7265 7373   regular express
-0000a960: 696f 6e73 206d 6174 6368 696e 675c 6e74  ions matching\nt
-0000a970: 6865 2074 7970 6520 7374 7269 6e67 7320  he type strings 
-0000a980: 6f66 2072 6563 6f72 6465 6420 6576 656e  of recorded even
-0000a990: 7473 2074 6861 7420 7368 6f75 6c64 2062  ts that should b
-0000a9a0: 6520 6578 636c 7564 6564 2e20 4279 2064  e excluded. By d
-0000a9b0: 6566 6175 6c74 2c5c 6e74 6869 7320 6172  efault,\nthis ar
-0000a9c0: 6775 6d65 6e74 2077 696c 6c20 6d61 7463  gument will matc
-0000a9d0: 6820 2273 7973 7465 6d20 6576 656e 7473  h "system events
-0000a9e0: 222c 2073 6f20 7468 6174 2074 6865 7920  ", so that they 
-0000a9f0: 7769 6c6c 206e 6f74 2062 6520 696e 636c  will not be incl
-0000aa00: 7564 6564 2e5c 6e54 6869 7320 6172 6775  uded.\nThis argu
-0000aa10: 6d65 6e74 2069 7320 6967 6e6f 7265 6420  ment is ignored 
-0000aa20: 6966 2060 6669 6c74 6572 5f69 6e63 6c75  if `filter_inclu
-0000aa30: 6465 6020 6973 2073 6574 2074 6f20 6120  de` is set to a 
-0000aa40: 6e6f 6e2d 656d 7074 7920 7365 7175 656e  non-empty sequen
-0000aa50: 6365 2e5c 6e5c 6e54 6865 2061 7267 756d  ce.\n\nThe argum
-0000aa60: 656e 7420 6066 696c 7465 725f 696e 636c  ent `filter_incl
-0000aa70: 7564 6560 2069 7320 6120 7365 7175 656e  ude` is a sequen
-0000aa80: 6365 206f 6620 7265 6775 6c61 7220 6578  ce of regular ex
-0000aa90: 7072 6573 7369 6f6e 735c 6e6d 6174 6368  pressions\nmatch
-0000aaa0: 696e 6720 7468 6520 7479 7065 2073 7472  ing the type str
-0000aab0: 696e 6773 206f 6620 7265 636f 7264 6564  ings of recorded
-0000aac0: 2065 7665 6e74 7320 7468 6174 2073 686f   events that sho
-0000aad0: 756c 6420 6265 2069 6e63 6c75 6465 642e  uld be included.
-0000aae0: 2042 795c 6e64 6566 6175 6c74 2c20 7468   By\ndefault, th
-0000aaf0: 6973 2061 7267 756d 656e 7420 6973 2061  is argument is a
-0000ab00: 6e20 656d 7074 7920 7475 706c 652e 2049  n empty tuple. I
-0000ab10: 6620 7468 6973 2061 7267 756d 656e 7420  f this argument 
-0000ab20: 6973 2073 6574 2074 6f20 615c 6e6e 6f6e  is set to a\nnon
-0000ab30: 2d65 6d70 7479 2073 6571 7565 6e63 652c  -empty sequence,
-0000ab40: 2074 6865 2060 6669 6c74 6572 5f65 7863   the `filter_exc
-0000ab50: 6c75 6465 6020 6172 6775 6d65 6e74 2069  lude` argument i
-0000ab60: 7320 6967 6e6f 7265 642e 5c6e 5c6e 506c  s ignored.\n\nPl
-0000ab70: 6561 7365 206e 6f74 652c 2074 6865 2066  ease note, the f
-0000ab80: 696c 7465 7269 6e67 2068 6170 7065 6e73  iltering happens
-0000ab90: 206f 6e20 7468 6520 4576 656e 7453 746f   on the EventSto
-0000aba0: 7265 4442 2073 6572 7665 722c 2061 6e64  reDB server, and
-0000abb0: 2074 6865 5c6e 606c 696d 6974 6020 6172   the\n`limit` ar
-0000abc0: 6775 6d65 6e74 2069 7320 6170 706c 6965  gument is applie
-0000abd0: 6420 6f6e 2074 6865 2073 6572 7665 7220  d on the server 
-0000abe0: 6166 7465 7220 6669 6c74 6572 696e 672e  after filtering.
-0000abf0: 2053 6565 2062 656c 6f77 2066 6f72 5c6e   See below for\n
-0000ac00: 6d6f 7265 2069 6e66 6f72 6d61 7469 6f6e  more information
-0000ac10: 2061 626f 7574 2066 696c 7465 7220 7265   about filter re
-0000ac20: 6775 6c61 7220 6578 7072 6573 7369 6f6e  gular expression
-0000ac30: 732e 5c6e 5c6e 5468 6520 6172 6775 6d65  s.\n\nThe argume
-0000ac40: 6e74 2060 7469 6d65 6f75 7460 2069 7320  nt `timeout` is 
-0000ac50: 6120 5079 7468 6f6e 2060 666c 6f61 7460  a Python `float`
-0000ac60: 2077 6869 6368 2073 6574 7320 6120 6465   which sets a de
-0000ac70: 6164 6c69 6e65 2066 6f72 2074 6865 2063  adline for the c
-0000ac80: 6f6d 706c 6574 696f 6e20 6f66 5c6e 7468  ompletion of\nth
-0000ac90: 6520 6752 5043 206f 7065 7261 7469 6f6e  e gRPC operation
-0000aca0: 2e20 5468 6973 2070 726f 6261 626c 7920  . This probably 
-0000acb0: 6973 6e5c 2774 2076 6572 7920 7573 6566  isn\'t very usef
-0000acc0: 756c 2c20 6275 7420 6973 2069 6e63 6c75  ul, but is inclu
-0000acd0: 6465 6420 666f 725c 6e63 6f6d 706c 6574  ded for\ncomplet
-0000ace0: 656e 6573 7320 616e 6420 636f 6e73 6973  eness and consis
-0000acf0: 7465 6e63 7920 7769 7468 2074 6865 206f  tency with the o
-0000ad00: 7468 6572 206d 6574 686f 6473 2e5c 6e5c  ther methods.\n\
-0000ad10: 6e54 6869 7320 6d65 7468 6f64 2072 6574  nThis method ret
-0000ad20: 7572 6e73 2061 2050 7974 686f 6e20 6974  urns a Python it
-0000ad30: 6572 6174 6f72 2074 6861 7420 7969 656c  erator that yiel
-0000ad40: 6473 2072 6563 6f72 6465 6420 6576 656e  ds recorded even
-0000ad50: 7473 2c20 696e 636c 7564 696e 6720 6576  ts, including ev
-0000ad60: 656e 7473 5c6e 7468 6174 2061 7265 2072  ents\nthat are r
-0000ad70: 6563 6f72 6465 6420 6166 7465 7220 7468  ecorded after th
-0000ad80: 6520 7375 6273 6372 6970 7469 6f6e 2077  e subscription w
-0000ad90: 6173 2063 7265 6174 6564 2e20 4974 6572  as created. Iter
-0000ada0: 6174 696e 6720 6f76 6572 2074 6869 7320  ating over this 
-0000adb0: 6f62 6a65 6374 2077 696c 6c5c 6e74 6865  object will\nthe
-0000adc0: 7265 666f 7265 206e 6f74 2073 746f 702c  refore not stop,
-0000add0: 2075 6e6c 6573 7320 7468 6520 636f 6e6e   unless the conn
-0000ade0: 6563 7469 6f6e 2074 6f20 7468 6520 6461  ection to the da
-0000adf0: 7461 6261 7365 2069 7320 6c6f 7374 2e20  tabase is lost. 
-0000ae00: 5468 6520 636f 6e6e 6563 7469 6f6e 2077  The connection w
-0000ae10: 696c 6c5c 6e62 6520 636c 6f73 6564 2077  ill\nbe closed w
-0000ae20: 6865 6e20 7468 6520 6974 6572 6174 6f72  hen the iterator
-0000ae30: 206f 626a 6563 7420 6973 2064 656c 6574   object is delet
-0000ae40: 6564 2066 726f 6d20 6d65 6d6f 7279 2c20  ed from memory, 
-0000ae50: 7768 6963 6820 7769 6c6c 2068 6170 7065  which will happe
-0000ae60: 6e20 7768 656e 2074 6865 5c6e 6974 6572  n when the\niter
-0000ae70: 6174 6f72 206f 626a 6563 7420 676f 6573  ator object goes
-0000ae80: 206f 7574 206f 6620 7363 6f70 6520 6f72   out of scope or
-0000ae90: 2069 7320 6578 706c 6963 6974 6c79 2064   is explicitly d
-0000aea0: 656c 6574 6564 2028 7365 6520 6265 6c6f  eleted (see belo
-0000aeb0: 7729 2e20 5468 6520 636f 6e6e 6563 7469  w). The connecti
-0000aec0: 6f6e 5c6e 6d61 7920 616c 736f 2062 6520  on\nmay also be 
-0000aed0: 636c 6f73 6564 2062 7920 7468 6520 7365  closed by the se
-0000aee0: 7276 6572 2e5c 6e5c 6e54 6865 2073 7562  rver.\n\nThe sub
-0000aef0: 7363 7269 7074 696f 6e20 6f62 6a65 6374  scription object
-0000af00: 2063 616e 2062 6520 7573 6564 2064 6972   can be used dir
-0000af10: 6563 746c 792c 2062 7574 2069 7420 6d69  ectly, but it mi
-0000af20: 6768 7420 6265 2075 7365 6420 7769 7468  ght be used with
-0000af30: 696e 2061 2074 6872 6561 6465 645c 6e6c  in a threaded\nl
-0000af40: 6f6f 7020 6465 6469 6361 7465 6420 746f  oop dedicated to
-0000af50: 2072 6563 6569 7669 6e67 2065 7665 6e74   receiving event
-0000af60: 7320 7468 6174 2063 616e 2062 6520 7374  s that can be st
-0000af70: 6f70 7065 6420 696e 2061 2063 6f6e 7472  opped in a contr
-0000af80: 6f6c 6c65 6420 7761 792c 2077 6974 685c  olled way, with\
-0000af90: 6e72 6563 6f72 6465 6420 6576 656e 7473  nrecorded events
-0000afa0: 2070 7574 206f 6e20 6120 7175 6575 6520   put on a queue 
-0000afb0: 666f 7220 7072 6f63 6573 7369 6e67 2069  for processing i
-0000afc0: 6e20 6120 6469 6666 6572 656e 7420 7468  n a different th
-0000afd0: 7265 6164 2e20 5468 6973 2070 6163 6b61  read. This packa
-0000afe0: 6765 5c6e 646f 6573 6e5c 2774 2070 726f  ge\ndoesn\'t pro
-0000aff0: 7669 6465 2073 7563 6820 6120 7468 7265  vide such a thre
-0000b000: 6164 6564 206f 7220 7175 6575 696e 6720  aded or queuing 
-0000b010: 6f62 6a65 6374 2063 6c61 7373 2e20 4a75  object class. Ju
-0000b020: 7374 206d 616b 6520 7375 7265 2074 6f20  st make sure to 
-0000b030: 7265 636f 6e73 7472 7563 745c 6e74 6865  reconstruct\nthe
-0000b040: 2073 7562 7363 7269 7074 696f 6e20 2861   subscription (a
-0000b050: 6e64 2074 6865 2071 7565 7565 2920 7573  nd the queue) us
-0000b060: 696e 6720 7468 6520 6c61 7374 2072 6563  ing the last rec
-0000b070: 6f72 6465 6420 636f 6d6d 6974 2070 6f73  orded commit pos
-0000b080: 6974 696f 6e20 7768 656e 2072 6573 756d  ition when resum
-0000b090: 696e 675c 6e74 6865 2073 7562 7363 7269  ing\nthe subscri
-0000b0a0: 7074 696f 6e20 6166 7465 7220 616e 2065  ption after an e
-0000b0b0: 7272 6f72 2c20 746f 2062 6520 7375 7265  rror, to be sure
-0000b0c0: 2061 6c6c 2065 7665 6e74 7320 6172 6520   all events are 
-0000b0d0: 7072 6f63 6573 7365 6420 6f6e 6365 2e5c  processed once.\
-0000b0e0: 6e5c 6e54 6865 2065 7861 6d70 6c65 2062  n\nThe example b
-0000b0f0: 656c 6f77 2073 686f 7773 2068 6f77 2074  elow shows how t
-0000b100: 6f20 7375 6273 6372 6962 6520 746f 2072  o subscribe to r
-0000b110: 6563 6569 7665 2061 6c6c 2072 6563 6f72  eceive all recor
-0000b120: 6465 645c 6e65 7665 6e74 7320 6672 6f6d  ded\nevents from
-0000b130: 2074 6865 2073 7461 7274 2c20 616e 6420   the start, and 
-0000b140: 7468 656e 2072 6573 756d 696e 6720 6672  then resuming fr
-0000b150: 6f6d 2061 2073 7065 6369 6669 6320 636f  om a specific co
-0000b160: 6d6d 6974 2070 6f73 6974 696f 6e2e 5c6e  mmit position.\n
-0000b170: 5468 7265 6520 616c 7265 6164 792d 7265  Three already-re
-0000b180: 636f 7264 6564 2065 7665 6e74 7320 6172  corded events ar
-0000b190: 6520 7265 6365 6976 6564 2c20 616e 6420  e received, and 
-0000b1a0: 7468 656e 2074 6872 6565 206e 6577 2065  then three new e
-0000b1b0: 7665 6e74 7320 6172 655c 6e72 6563 6f72  vents are\nrecor
-0000b1c0: 6465 642c 2077 6869 6368 2061 7265 2074  ded, which are t
-0000b1d0: 6865 6e20 7265 6365 6976 6564 2076 6961  hen received via
-0000b1e0: 2074 6865 2073 7562 7363 7269 7074 696f   the subscriptio
-0000b1f0: 6e2e 5c6e 5c6e 6060 6070 7974 686f 6e5c  n.\n\n```python\
-0000b200: 6e5c 6e23 2041 7070 656e 6420 616e 2065  n\n# Append an e
-0000b210: 7665 6e74 2074 6f20 6120 6e65 7720 7374  vent to a new st
-0000b220: 7265 616d 2e5c 6e73 7472 6561 6d5f 6e61  ream.\nstream_na
-0000b230: 6d65 3220 3d20 7374 7228 7575 6964 3428  me2 = str(uuid4(
-0000b240: 2929 5c6e 6576 656e 7434 203d 204e 6577  ))\nevent4 = New
-0000b250: 4576 656e 7428 7479 7065 3d5c 274f 7264  Event(type=\'Ord
-0000b260: 6572 4372 6561 7465 645c 272c 2064 6174  erCreated\', dat
-0000b270: 613d 625c 2764 6174 6134 5c27 295c 6e63  a=b\'data4\')\nc
-0000b280: 6c69 656e 742e 6170 7065 6e64 5f65 7665  lient.append_eve
-0000b290: 6e74 7328 5c6e 2020 2020 7374 7265 616d  nts(\n    stream
-0000b2a0: 5f6e 616d 653d 7374 7265 616d 5f6e 616d  _name=stream_nam
-0000b2b0: 6532 2c5c 6e20 2020 2065 7870 6563 7465  e2,\n    expecte
-0000b2c0: 645f 706f 7369 7469 6f6e 3d4e 6f6e 652c  d_position=None,
-0000b2d0: 5c6e 2020 2020 6576 656e 7473 3d5b 6576  \n    events=[ev
-0000b2e0: 656e 7434 5d2c 5c6e 295c 6e5c 6e23 2053  ent4],\n)\n\n# S
-0000b2f0: 7562 7363 7269 6265 2066 726f 6d20 7468  ubscribe from th
-0000b300: 6520 6669 7273 7420 7265 636f 7264 6564  e first recorded
-0000b310: 2065 7665 6e74 2069 6e20 7468 6520 6461   event in the da
-0000b320: 7461 6261 7365 2e5c 6e73 7562 7363 7269  tabase.\nsubscri
-0000b330: 7074 696f 6e20 3d20 636c 6965 6e74 2e73  ption = client.s
-0000b340: 7562 7363 7269 6265 5f61 6c6c 5f65 7665  ubscribe_all_eve
-0000b350: 6e74 7328 295c 6e72 6563 6569 7665 645f  nts()\nreceived_
-0000b360: 6576 656e 7473 203d 205b 5d5c 6e5c 6e23  events = []\n\n#
-0000b370: 2050 726f 6365 7373 2065 7665 6e74 7320   Process events 
-0000b380: 7265 6365 6976 6564 2066 726f 6d20 7468  received from th
-0000b390: 6520 6361 7463 682d 7570 2073 7562 7363  e catch-up subsc
-0000b3a0: 7269 7074 696f 6e2e 5c6e 666f 7220 6576  ription.\nfor ev
-0000b3b0: 656e 7420 696e 2073 7562 7363 7269 7074  ent in subscript
-0000b3c0: 696f 6e3a 5c6e 2020 2020 6c61 7374 5f63  ion:\n    last_c
-0000b3d0: 6f6d 6d69 745f 706f 7369 7469 6f6e 203d  ommit_position =
-0000b3e0: 2065 7665 6e74 2e63 6f6d 6d69 745f 706f   event.commit_po
-0000b3f0: 7369 7469 6f6e 5c6e 2020 2020 7265 6365  sition\n    rece
-0000b400: 6976 6564 5f65 7665 6e74 732e 6170 7065  ived_events.appe
-0000b410: 6e64 2865 7665 6e74 295c 6e20 2020 2069  nd(event)\n    i
-0000b420: 6620 6576 656e 742e 6964 203d 3d20 6576  f event.id == ev
-0000b430: 656e 7434 2e69 643a 5c6e 2020 2020 2020  ent4.id:\n      
-0000b440: 2020 6272 6561 6b5c 6e5c 6e61 7373 6572    break\n\nasser
-0000b450: 7420 7265 6365 6976 6564 5f65 7665 6e74  t received_event
-0000b460: 735b 2d34 5d2e 6964 203d 3d20 6576 656e  s[-4].id == even
-0000b470: 7431 2e69 645c 6e61 7373 6572 7420 7265  t1.id\nassert re
-0000b480: 6365 6976 6564 5f65 7665 6e74 735b 2d33  ceived_events[-3
-0000b490: 5d2e 6964 203d 3d20 6576 656e 7432 2e69  ].id == event2.i
-0000b4a0: 645c 6e61 7373 6572 7420 7265 6365 6976  d\nassert receiv
-0000b4b0: 6564 5f65 7665 6e74 735b 2d32 5d2e 6964  ed_events[-2].id
-0000b4c0: 203d 3d20 6576 656e 7433 2e69 645c 6e61   == event3.id\na
-0000b4d0: 7373 6572 7420 7265 6365 6976 6564 5f65  ssert received_e
-0000b4e0: 7665 6e74 735b 2d31 5d2e 6964 203d 3d20  vents[-1].id == 
-0000b4f0: 6576 656e 7434 2e69 645c 6e5c 6e23 2041  event4.id\n\n# A
-0000b500: 7070 656e 6420 7375 6273 6571 7565 6e74  ppend subsequent
-0000b510: 2065 7665 6e74 7320 746f 2074 6865 2073   events to the s
-0000b520: 7472 6561 6d2e 5c6e 6576 656e 7435 203d  tream.\nevent5 =
-0000b530: 204e 6577 4576 656e 7428 7479 7065 3d5c   NewEvent(type=\
-0000b540: 274f 7264 6572 5570 6461 7465 645c 272c  'OrderUpdated\',
-0000b550: 2064 6174 613d 625c 2764 6174 6135 5c27   data=b\'data5\'
-0000b560: 295c 6e63 6c69 656e 742e 6170 7065 6e64  )\nclient.append
-0000b570: 5f65 7665 6e74 7328 5c6e 2020 2020 7374  _events(\n    st
-0000b580: 7265 616d 5f6e 616d 653d 7374 7265 616d  ream_name=stream
-0000b590: 5f6e 616d 6532 2c5c 6e20 2020 2065 7870  _name2,\n    exp
-0000b5a0: 6563 7465 645f 706f 7369 7469 6f6e 3d30  ected_position=0
-0000b5b0: 2c5c 6e20 2020 2065 7665 6e74 733d 5b65  ,\n    events=[e
-0000b5c0: 7665 6e74 355d 2c5c 6e29 5c6e 5c6e 2320  vent5],\n)\n\n# 
-0000b5d0: 5265 6365 6976 6520 7375 6273 6571 7565  Receive subseque
-0000b5e0: 6e74 2065 7665 6e74 7320 6672 6f6d 2074  nt events from t
-0000b5f0: 6865 2073 7562 7363 7269 7074 696f 6e2e  he subscription.
-0000b600: 5c6e 666f 7220 6576 656e 7420 696e 2073  \nfor event in s
-0000b610: 7562 7363 7269 7074 696f 6e3a 5c6e 2020  ubscription:\n  
-0000b620: 2020 6c61 7374 5f63 6f6d 6d69 745f 706f    last_commit_po
-0000b630: 7369 7469 6f6e 203d 2065 7665 6e74 2e63  sition = event.c
-0000b640: 6f6d 6d69 745f 706f 7369 7469 6f6e 5c6e  ommit_position\n
-0000b650: 2020 2020 7265 6365 6976 6564 5f65 7665      received_eve
-0000b660: 6e74 732e 6170 7065 6e64 2865 7665 6e74  nts.append(event
-0000b670: 295c 6e20 2020 2069 6620 6576 656e 742e  )\n    if event.
-0000b680: 6964 203d 3d20 6576 656e 7435 2e69 643a  id == event5.id:
-0000b690: 5c6e 2020 2020 2020 2020 6272 6561 6b5c  \n        break\
-0000b6a0: 6e5c 6e5c 6e61 7373 6572 7420 7265 6365  n\n\nassert rece
-0000b6b0: 6976 6564 5f65 7665 6e74 735b 2d35 5d2e  ived_events[-5].
-0000b6c0: 6964 203d 3d20 6576 656e 7431 2e69 645c  id == event1.id\
-0000b6d0: 6e61 7373 6572 7420 7265 6365 6976 6564  nassert received
-0000b6e0: 5f65 7665 6e74 735b 2d34 5d2e 6964 203d  _events[-4].id =
-0000b6f0: 3d20 6576 656e 7432 2e69 645c 6e61 7373  = event2.id\nass
-0000b700: 6572 7420 7265 6365 6976 6564 5f65 7665  ert received_eve
-0000b710: 6e74 735b 2d33 5d2e 6964 203d 3d20 6576  nts[-3].id == ev
-0000b720: 656e 7433 2e69 645c 6e61 7373 6572 7420  ent3.id\nassert 
-0000b730: 7265 6365 6976 6564 5f65 7665 6e74 735b  received_events[
-0000b740: 2d32 5d2e 6964 203d 3d20 6576 656e 7434  -2].id == event4
-0000b750: 2e69 645c 6e61 7373 6572 7420 7265 6365  .id\nassert rece
-0000b760: 6976 6564 5f65 7665 6e74 735b 2d31 5d2e  ived_events[-1].
-0000b770: 6964 203d 3d20 6576 656e 7435 2e69 645c  id == event5.id\
-0000b780: 6e5c 6e5c 6e23 2041 7070 656e 6420 6d6f  n\n\n# Append mo
-0000b790: 7265 2065 7665 6e74 7320 746f 2074 6865  re events to the
-0000b7a0: 2073 7472 6561 6d2e 5c6e 6576 656e 7436   stream.\nevent6
-0000b7b0: 203d 204e 6577 4576 656e 7428 7479 7065   = NewEvent(type
-0000b7c0: 3d5c 274f 7264 6572 4465 6c65 7465 645c  =\'OrderDeleted\
-0000b7d0: 272c 2064 6174 613d 625c 2764 6174 6136  ', data=b\'data6
-0000b7e0: 5c27 295c 6e63 6c69 656e 742e 6170 7065  \')\nclient.appe
-0000b7f0: 6e64 5f65 7665 6e74 7328 5c6e 2020 2020  nd_events(\n    
-0000b800: 7374 7265 616d 5f6e 616d 653d 7374 7265  stream_name=stre
-0000b810: 616d 5f6e 616d 6532 2c5c 6e20 2020 2065  am_name2,\n    e
-0000b820: 7870 6563 7465 645f 706f 7369 7469 6f6e  xpected_position
-0000b830: 3d31 2c5c 6e20 2020 2065 7665 6e74 733d  =1,\n    events=
-0000b840: 5b65 7665 6e74 365d 2c5c 6e29 5c6e 5c6e  [event6],\n)\n\n
-0000b850: 5c6e 2320 5265 7375 6d65 2073 7562 7363  \n# Resume subsc
-0000b860: 7269 6269 6e67 2066 726f 6d20 7468 6520  ribing from the 
-0000b870: 6c61 7374 2063 6f6d 6d69 7420 706f 7369  last commit posi
-0000b880: 7469 6f6e 2e5c 6e73 7562 7363 7269 7074  tion.\nsubscript
-0000b890: 696f 6e20 3d20 636c 6965 6e74 2e73 7562  ion = client.sub
-0000b8a0: 7363 7269 6265 5f61 6c6c 5f65 7665 6e74  scribe_all_event
-0000b8b0: 7328 5c6e 2020 2020 636f 6d6d 6974 5f70  s(\n    commit_p
-0000b8c0: 6f73 6974 696f 6e3d 6c61 7374 5f63 6f6d  osition=last_com
-0000b8d0: 6d69 745f 706f 7369 7469 6f6e 5c6e 295c  mit_position\n)\
-0000b8e0: 6e5c 6e5c 6e23 2043 6174 6368 2075 7020  n\n\n# Catch up 
-0000b8f0: 6279 2072 6563 6569 7669 6e67 2074 6865  by receiving the
-0000b900: 206e 6577 2065 7665 6e74 2066 726f 6d20   new event from 
-0000b910: 7468 6520 7375 6273 6372 6970 7469 6f6e  the subscription
-0000b920: 2e5c 6e66 6f72 2065 7665 6e74 2069 6e20  .\nfor event in 
-0000b930: 7375 6273 6372 6970 7469 6f6e 3a5c 6e20  subscription:\n 
-0000b940: 2020 2072 6563 6569 7665 645f 6576 656e     received_even
-0000b950: 7473 2e61 7070 656e 6428 6576 656e 7429  ts.append(event)
-0000b960: 5c6e 2020 2020 6966 2065 7665 6e74 2e69  \n    if event.i
-0000b970: 6420 3d3d 2065 7665 6e74 362e 6964 3a5c  d == event6.id:\
-0000b980: 6e20 2020 2020 2020 2062 7265 616b 5c6e  n        break\n
-0000b990: 5c6e 6173 7365 7274 2072 6563 6569 7665  \nassert receive
-0000b9a0: 645f 6576 656e 7473 5b2d 365d 2e69 6420  d_events[-6].id 
-0000b9b0: 3d3d 2065 7665 6e74 312e 6964 5c6e 6173  == event1.id\nas
-0000b9c0: 7365 7274 2072 6563 6569 7665 645f 6576  sert received_ev
-0000b9d0: 656e 7473 5b2d 355d 2e69 6420 3d3d 2065  ents[-5].id == e
-0000b9e0: 7665 6e74 322e 6964 5c6e 6173 7365 7274  vent2.id\nassert
-0000b9f0: 2072 6563 6569 7665 645f 6576 656e 7473   received_events
-0000ba00: 5b2d 345d 2e69 6420 3d3d 2065 7665 6e74  [-4].id == event
-0000ba10: 332e 6964 5c6e 6173 7365 7274 2072 6563  3.id\nassert rec
-0000ba20: 6569 7665 645f 6576 656e 7473 5b2d 335d  eived_events[-3]
-0000ba30: 2e69 6420 3d3d 2065 7665 6e74 342e 6964  .id == event4.id
-0000ba40: 5c6e 6173 7365 7274 2072 6563 6569 7665  \nassert receive
-0000ba50: 645f 6576 656e 7473 5b2d 325d 2e69 6420  d_events[-2].id 
-0000ba60: 3d3d 2065 7665 6e74 352e 6964 5c6e 6173  == event5.id\nas
-0000ba70: 7365 7274 2072 6563 6569 7665 645f 6576  sert received_ev
-0000ba80: 656e 7473 5b2d 315d 2e69 6420 3d3d 2065  ents[-1].id == e
-0000ba90: 7665 6e74 362e 6964 5c6e 5c6e 5c6e 2320  vent6.id\n\n\n# 
-0000baa0: 4170 7065 6e64 2074 6872 6565 206d 6f72  Append three mor
-0000bab0: 6520 6576 656e 7473 2074 6f20 6120 6e65  e events to a ne
-0000bac0: 7720 7374 7265 616d 2e5c 6e73 7472 6561  w stream.\nstrea
-0000bad0: 6d5f 6e61 6d65 3320 3d20 7374 7228 7575  m_name3 = str(uu
-0000bae0: 6964 3428 2929 5c6e 6576 656e 7437 203d  id4())\nevent7 =
-0000baf0: 204e 6577 4576 656e 7428 7479 7065 3d5c   NewEvent(type=\
-0000bb00: 274f 7264 6572 4372 6561 7465 645c 272c  'OrderCreated\',
-0000bb10: 2064 6174 613d 625c 2764 6174 6137 5c27   data=b\'data7\'
-0000bb20: 295c 6e65 7665 6e74 3820 3d20 4e65 7745  )\nevent8 = NewE
-0000bb30: 7665 6e74 2874 7970 653d 5c27 4f72 6465  vent(type=\'Orde
-0000bb40: 7255 7064 6174 6564 5c27 2c20 6461 7461  rUpdated\', data
-0000bb50: 3d62 5c27 6461 7461 385c 2729 5c6e 6576  =b\'data8\')\nev
-0000bb60: 656e 7439 203d 204e 6577 4576 656e 7428  ent9 = NewEvent(
-0000bb70: 7479 7065 3d5c 274f 7264 6572 4465 6c65  type=\'OrderDele
-0000bb80: 7465 645c 272c 2064 6174 613d 625c 2764  ted\', data=b\'d
-0000bb90: 6174 6139 5c27 295c 6e5c 6e63 6c69 656e  ata9\')\n\nclien
-0000bba0: 742e 6170 7065 6e64 5f65 7665 6e74 7328  t.append_events(
-0000bbb0: 5c6e 2020 2020 7374 7265 616d 5f6e 616d  \n    stream_nam
-0000bbc0: 653d 7374 7265 616d 5f6e 616d 6533 2c5c  e=stream_name3,\
-0000bbd0: 6e20 2020 2065 7870 6563 7465 645f 706f  n    expected_po
-0000bbe0: 7369 7469 6f6e 3d4e 6f6e 652c 5c6e 2020  sition=None,\n  
-0000bbf0: 2020 6576 656e 7473 3d5b 6576 656e 7437    events=[event7
-0000bc00: 2c20 6576 656e 7438 2c20 6576 656e 7439  , event8, event9
-0000bc10: 5d2c 5c6e 295c 6e5c 6e23 2052 6563 6569  ],\n)\n\n# Recei
-0000bc20: 7665 2074 6865 2074 6872 6565 206e 6577  ve the three new
-0000bc30: 2065 7665 6e74 7320 6672 6f6d 2074 6865   events from the
-0000bc40: 2072 6573 756d 6564 2073 7562 7363 7269   resumed subscri
-0000bc50: 7074 696f 6e2e 5c6e 666f 7220 6576 656e  ption.\nfor even
-0000bc60: 7420 696e 2073 7562 7363 7269 7074 696f  t in subscriptio
-0000bc70: 6e3a 5c6e 2020 2020 7265 6365 6976 6564  n:\n    received
-0000bc80: 5f65 7665 6e74 732e 6170 7065 6e64 2865  _events.append(e
-0000bc90: 7665 6e74 295c 6e20 2020 2069 6620 6576  vent)\n    if ev
-0000bca0: 656e 742e 6964 203d 3d20 6576 656e 7439  ent.id == event9
-0000bcb0: 2e69 643a 5c6e 2020 2020 2020 2020 6272  .id:\n        br
-0000bcc0: 6561 6b5c 6e5c 6e61 7373 6572 7420 7265  eak\n\nassert re
-0000bcd0: 6365 6976 6564 5f65 7665 6e74 735b 2d39  ceived_events[-9
-0000bce0: 5d2e 6964 203d 3d20 6576 656e 7431 2e69  ].id == event1.i
-0000bcf0: 645c 6e61 7373 6572 7420 7265 6365 6976  d\nassert receiv
-0000bd00: 6564 5f65 7665 6e74 735b 2d38 5d2e 6964  ed_events[-8].id
-0000bd10: 203d 3d20 6576 656e 7432 2e69 645c 6e61   == event2.id\na
-0000bd20: 7373 6572 7420 7265 6365 6976 6564 5f65  ssert received_e
-0000bd30: 7665 6e74 735b 2d37 5d2e 6964 203d 3d20  vents[-7].id == 
-0000bd40: 6576 656e 7433 2e69 645c 6e61 7373 6572  event3.id\nasser
-0000bd50: 7420 7265 6365 6976 6564 5f65 7665 6e74  t received_event
-0000bd60: 735b 2d36 5d2e 6964 203d 3d20 6576 656e  s[-6].id == even
-0000bd70: 7434 2e69 645c 6e61 7373 6572 7420 7265  t4.id\nassert re
-0000bd80: 6365 6976 6564 5f65 7665 6e74 735b 2d35  ceived_events[-5
-0000bd90: 5d2e 6964 203d 3d20 6576 656e 7435 2e69  ].id == event5.i
-0000bda0: 645c 6e61 7373 6572 7420 7265 6365 6976  d\nassert receiv
-0000bdb0: 6564 5f65 7665 6e74 735b 2d34 5d2e 6964  ed_events[-4].id
-0000bdc0: 203d 3d20 6576 656e 7436 2e69 645c 6e61   == event6.id\na
-0000bdd0: 7373 6572 7420 7265 6365 6976 6564 5f65  ssert received_e
-0000bde0: 7665 6e74 735b 2d33 5d2e 6964 203d 3d20  vents[-3].id == 
-0000bdf0: 6576 656e 7437 2e69 645c 6e61 7373 6572  event7.id\nasser
-0000be00: 7420 7265 6365 6976 6564 5f65 7665 6e74  t received_event
-0000be10: 735b 2d32 5d2e 6964 203d 3d20 6576 656e  s[-2].id == even
-0000be20: 7438 2e69 645c 6e61 7373 6572 7420 7265  t8.id\nassert re
-0000be30: 6365 6976 6564 5f65 7665 6e74 735b 2d31  ceived_events[-1
-0000be40: 5d2e 6964 203d 3d20 6576 656e 7439 2e69  ].id == event9.i
-0000be50: 645c 6e60 6060 5c6e 5c6e 5468 6520 6361  d\n```\n\nThe ca
-0000be60: 7463 682d 7570 2073 7562 7363 7269 7074  tch-up subscript
-0000be70: 696f 6e20 6752 5043 206f 7065 7261 7469  ion gRPC operati
-0000be80: 6f6e 2069 7320 656e 6465 6420 6173 2073  on is ended as s
-0000be90: 6f6f 6e20 6173 2074 6865 2073 7562 7363  oon as the subsc
-0000bea0: 7269 7074 696f 6e20 6f62 6a65 6374 5c6e  ription object\n
-0000beb0: 676f 6573 206f 7574 206f 6620 7363 6f70  goes out of scop
-0000bec0: 6520 6f72 2069 7320 6578 706c 6963 6974  e or is explicit
-0000bed0: 6c79 2064 656c 6574 6564 2066 726f 6d20  ly deleted from 
-0000bee0: 6d65 6d6f 7279 2e5c 6e5c 6e60 6060 7079  memory.\n\n```py
-0000bef0: 7468 6f6e 5c6e 2320 456e 6420 7468 6520  thon\n# End the 
-0000bf00: 7375 6273 6372 6970 7469 6f6e 2e5c 6e64  subscription.\nd
-0000bf10: 656c 2073 7562 7363 7269 7074 696f 6e5c  el subscription\
-0000bf20: 6e60 6060 5c6e 5c6e 2323 2320 5375 6273  n```\n\n### Subs
-0000bf30: 6372 6962 6520 7374 7265 616d 2065 7665  cribe stream eve
-0000bf40: 6e74 735c 6e5c 6e54 6865 6073 7562 7363  nts\n\nThe`subsc
-0000bf50: 7269 6265 5f73 7472 6561 6d5f 6576 656e  ribe_stream_even
-0000bf60: 7473 2829 6020 6d65 7468 6f64 2063 616e  ts()` method can
-0000bf70: 2062 6520 7573 6564 2074 6f20 7374 6172   be used to star
-0000bf80: 7420 6120 2263 6174 6368 2d75 7022 2073  t a "catch-up" s
-0000bf90: 7562 7363 7269 7074 696f 6e5c 6e74 6861  ubscription\ntha
-0000bfa0: 7420 6361 6e20 7265 7475 726e 2061 6c6c  t can return all
-0000bfb0: 2065 7665 6e74 7320 696e 2061 2073 7472   events in a str
-0000bfc0: 6561 6d2e 5c6e 5c6e 5468 6973 206d 6574  eam.\n\nThis met
-0000bfd0: 686f 6420 7461 6b65 7320 6120 6073 7472  hod takes a `str
-0000bfe0: 6561 6d5f 6e61 6d65 6020 6172 6775 6d65  eam_name` argume
-0000bff0: 6e74 2c20 7768 6963 6820 7370 6563 6966  nt, which specif
-0000c000: 6965 7320 7468 6520 6e61 6d65 206f 6620  ies the name of 
-0000c010: 7468 6520 7374 7265 616d 5c6e 6672 6f6d  the stream\nfrom
-0000c020: 2077 6869 6368 2072 6563 6f72 6465 6420   which recorded 
-0000c030: 6576 656e 7473 2077 696c 6c20 6265 2072  events will be r
-0000c040: 6563 6569 7665 642e 5c6e 5c6e 5468 6973  eceived.\n\nThis
-0000c050: 206d 6574 686f 6420 7461 6b65 7320 616e   method takes an
-0000c060: 206f 7074 696f 6e61 6c20 6073 7472 6561   optional `strea
-0000c070: 6d5f 706f 7369 7469 6f6e 6020 6172 6775  m_position` argu
-0000c080: 6d65 6e74 2c20 7768 6963 6820 7370 6563  ment, which spec
-0000c090: 6966 6965 7320 615c 6e73 7472 6561 6d20  ifies a\nstream 
-0000c0a0: 706f 7369 7469 6f6e 2069 6e20 7468 6520  position in the 
-0000c0b0: 7374 7265 616d 2066 726f 6d20 7768 6963  stream from whic
-0000c0c0: 6820 7265 636f 7264 6564 2065 7665 6e74  h recorded event
-0000c0d0: 7320 7769 6c6c 2062 6520 7265 6365 6976  s will be receiv
-0000c0e0: 6564 2e20 5468 655c 6e65 7665 6e74 2061  ed. The\nevent a
-0000c0f0: 7420 7468 6520 7370 6563 6966 6965 6420  t the specified 
-0000c100: 7374 7265 616d 2070 6f73 6974 696f 6e20  stream position 
-0000c110: 7769 6c6c 206e 6f74 2062 6520 696e 636c  will not be incl
-0000c120: 7564 6564 2e5c 6e5c 6e54 6869 7320 6d65  uded.\n\nThis me
-0000c130: 7468 6f64 2074 616b 6573 2061 6e20 6f70  thod takes an op
-0000c140: 7469 6f6e 616c 2060 7469 6d65 6f75 7460  tional `timeout`
-0000c150: 2061 7267 756d 656e 742c 2077 6869 6368   argument, which
-0000c160: 2069 7320 6120 5079 7468 6f6e 2060 666c   is a Python `fl
-0000c170: 6f61 7460 2074 6861 7420 7365 7473 5c6e  oat` that sets\n
-0000c180: 6120 6465 6164 6c69 6e65 2066 6f72 2074  a deadline for t
-0000c190: 6865 2063 6f6d 706c 6574 696f 6e20 6f66  he completion of
-0000c1a0: 2074 6865 2067 5250 4320 6f70 6572 6174   the gRPC operat
-0000c1b0: 696f 6e2e 5c6e 5c6e 5468 6520 6578 616d  ion.\n\nThe exam
-0000c1c0: 706c 6520 6265 6c6f 7720 7368 6f77 7320  ple below shows 
-0000c1d0: 686f 7720 746f 2073 7461 7274 2061 2063  how to start a c
-0000c1e0: 6174 6368 2d75 7020 7375 6273 6372 6970  atch-up subscrip
-0000c1f0: 7469 6f6e 2074 6f20 6120 7374 7265 616d  tion to a stream
-0000c200: 2e5c 6e5c 6e60 6060 7079 7468 6f6e 5c6e  .\n\n```python\n
-0000c210: 5c6e 2320 5375 6273 6372 6962 6520 746f  \n# Subscribe to
-0000c220: 2065 7665 6e74 7320 6672 6f6d 2073 7472   events from str
-0000c230: 6561 6d32 2c20 6672 6f6d 2074 6865 2073  eam2, from the s
-0000c240: 7461 7274 2e5c 6e73 7562 7363 7269 7074  tart.\nsubscript
-0000c250: 696f 6e20 3d20 636c 6965 6e74 2e73 7562  ion = client.sub
-0000c260: 7363 7269 6265 5f73 7472 6561 6d5f 6576  scribe_stream_ev
-0000c270: 656e 7473 2873 7472 6561 6d5f 6e61 6d65  ents(stream_name
-0000c280: 3d73 7472 6561 6d5f 6e61 6d65 3229 5c6e  =stream_name2)\n
-0000c290: 5c6e 2320 5265 6164 2066 726f 6d20 7468  \n# Read from th
-0000c2a0: 6520 7375 6273 6372 6970 7469 6f6e 2e5c  e subscription.\
-0000c2b0: 6e65 7665 6e74 7320 3d20 5b5d 5c6e 666f  nevents = []\nfo
-0000c2c0: 7220 6576 656e 7420 696e 2073 7562 7363  r event in subsc
-0000c2d0: 7269 7074 696f 6e3a 5c6e 2020 2020 6576  ription:\n    ev
-0000c2e0: 656e 7473 2e61 7070 656e 6428 6576 656e  ents.append(even
-0000c2f0: 7429 5c6e 2020 2020 6966 2065 7665 6e74  t)\n    if event
-0000c300: 2e69 6420 3d3d 2065 7665 6e74 362e 6964  .id == event6.id
-0000c310: 3a5c 6e20 2020 2020 2020 2062 7265 616b  :\n        break
-0000c320: 5c6e 5c6e 2320 4368 6563 6b20 7765 2067  \n\n# Check we g
-0000c330: 6f74 2065 7665 6e74 7320 6f6e 6c79 2066  ot events only f
-0000c340: 726f 6d20 7374 7265 616d 322e 5c6e 6173  rom stream2.\nas
-0000c350: 7365 7274 206c 656e 2865 7665 6e74 7329  sert len(events)
-0000c360: 203d 3d20 335c 6e65 7665 6e74 735b 305d   == 3\nevents[0]
-0000c370: 2e73 7472 6561 6d5f 6e61 6d65 203d 3d20  .stream_name == 
-0000c380: 7374 7265 616d 5f6e 616d 6532 5c6e 6576  stream_name2\nev
-0000c390: 656e 7473 5b31 5d2e 7374 7265 616d 5f6e  ents[1].stream_n
-0000c3a0: 616d 6520 3d3d 2073 7472 6561 6d5f 6e61  ame == stream_na
-0000c3b0: 6d65 325c 6e65 7665 6e74 735b 325d 2e73  me2\nevents[2].s
-0000c3c0: 7472 6561 6d5f 6e61 6d65 203d 3d20 7374  tream_name == st
-0000c3d0: 7265 616d 5f6e 616d 6532 5c6e 5c6e 2320  ream_name2\n\n# 
-0000c3e0: 4170 7065 6e64 2061 6e6f 7468 6572 2065  Append another e
-0000c3f0: 7665 6e74 2074 6f20 7374 7265 616d 332e  vent to stream3.
-0000c400: 5c6e 6576 656e 7431 3020 3d20 4e65 7745  \nevent10 = NewE
-0000c410: 7665 6e74 2874 7970 653d 224f 7264 6572  vent(type="Order
-0000c420: 556e 6465 6c65 7465 6422 2c20 6461 7461  Undeleted", data
-0000c430: 3d62 5c27 6461 7461 3130 5c27 295c 6e63  =b\'data10\')\nc
-0000c440: 6c69 656e 742e 6170 7065 6e64 5f65 7665  lient.append_eve
-0000c450: 6e74 7328 5c6e 2020 2020 7374 7265 616d  nts(\n    stream
-0000c460: 5f6e 616d 653d 7374 7265 616d 5f6e 616d  _name=stream_nam
-0000c470: 6533 2c5c 6e20 2020 2065 7870 6563 7465  e3,\n    expecte
-0000c480: 645f 706f 7369 7469 6f6e 3d32 2c5c 6e20  d_position=2,\n 
-0000c490: 2020 2065 7665 6e74 733d 5b65 7665 6e74     events=[event
-0000c4a0: 3130 5d2c 5c6e 295c 6e5c 6e23 2041 7070  10],\n)\n\n# App
-0000c4b0: 656e 6420 616e 6f74 6865 7220 6576 656e  end another even
-0000c4c0: 7420 746f 2073 7472 6561 6d32 2e5c 6e65  t to stream2.\ne
-0000c4d0: 7665 6e74 3131 203d 204e 6577 4576 656e  vent11 = NewEven
-0000c4e0: 7428 7479 7065 3d22 4f72 6465 7255 6e64  t(type="OrderUnd
-0000c4f0: 656c 6574 6564 222c 2064 6174 613d 625c  eleted", data=b\
-0000c500: 2764 6174 6131 315c 2729 5c6e 636c 6965  'data11\')\nclie
-0000c510: 6e74 2e61 7070 656e 645f 6576 656e 7473  nt.append_events
-0000c520: 285c 6e20 2020 2073 7472 6561 6d5f 6e61  (\n    stream_na
-0000c530: 6d65 3d73 7472 6561 6d5f 6e61 6d65 322c  me=stream_name2,
-0000c540: 5c6e 2020 2020 6578 7065 6374 6564 5f70  \n    expected_p
-0000c550: 6f73 6974 696f 6e3d 322c 5c6e 2020 2020  osition=2,\n    
-0000c560: 6576 656e 7473 3d5b 6576 656e 7431 315d  events=[event11]
-0000c570: 5c6e 295c 6e5c 6e23 2043 6f6e 7469 6e75  \n)\n\n# Continu
-0000c580: 6520 7265 6164 696e 6720 6672 6f6d 2074  e reading from t
-0000c590: 6865 2073 7562 7363 7269 7074 696f 6e2e  he subscription.
-0000c5a0: 5c6e 666f 7220 6576 656e 7420 696e 2073  \nfor event in s
-0000c5b0: 7562 7363 7269 7074 696f 6e3a 5c6e 2020  ubscription:\n  
-0000c5c0: 2020 6576 656e 7473 2e61 7070 656e 6428    events.append(
-0000c5d0: 6576 656e 7429 5c6e 2020 2020 6966 2065  event)\n    if e
-0000c5e0: 7665 6e74 2e69 6420 3d3d 2065 7665 6e74  vent.id == event
-0000c5f0: 3131 2e69 643a 5c6e 2020 2020 2020 2020  11.id:\n        
-0000c600: 6272 6561 6b5c 6e5c 6e23 2043 6865 636b  break\n\n# Check
-0000c610: 2077 6520 676f 7420 6576 656e 7473 206f   we got events o
-0000c620: 6e6c 7920 6672 6f6d 2073 7472 6561 6d32  nly from stream2
-0000c630: 2e5c 6e61 7373 6572 7420 6c65 6e28 6576  .\nassert len(ev
-0000c640: 656e 7473 2920 3d3d 2034 5c6e 6576 656e  ents) == 4\neven
-0000c650: 7473 5b30 5d2e 7374 7265 616d 5f6e 616d  ts[0].stream_nam
-0000c660: 6520 3d3d 2073 7472 6561 6d5f 6e61 6d65  e == stream_name
-0000c670: 325c 6e65 7665 6e74 735b 315d 2e73 7472  2\nevents[1].str
-0000c680: 6561 6d5f 6e61 6d65 203d 3d20 7374 7265  eam_name == stre
-0000c690: 616d 5f6e 616d 6532 5c6e 6576 656e 7473  am_name2\nevents
-0000c6a0: 5b32 5d2e 7374 7265 616d 5f6e 616d 6520  [2].stream_name 
-0000c6b0: 3d3d 2073 7472 6561 6d5f 6e61 6d65 325c  == stream_name2\
-0000c6c0: 6e65 7665 6e74 735b 335d 2e73 7472 6561  nevents[3].strea
-0000c6d0: 6d5f 6e61 6d65 203d 3d20 7374 7265 616d  m_name == stream
-0000c6e0: 5f6e 616d 6532 5c6e 6060 605c 6e5c 6e54  _name2\n```\n\nT
-0000c6f0: 6865 2065 7861 6d70 6c65 2062 656c 6f77  he example below
-0000c700: 2073 686f 7773 2068 6f77 2074 6f20 7374   shows how to st
-0000c710: 6172 7420 6120 6361 7463 682d 7570 2073  art a catch-up s
-0000c720: 7562 7363 7269 7074 696f 6e20 746f 2061  ubscription to a
-0000c730: 2073 7472 6561 6d20 6672 6f6d 2061 5c6e   stream from a\n
-0000c740: 7370 6563 6966 6963 2073 7472 6561 6d20  specific stream 
-0000c750: 706f 7369 7469 6f6e 2e5c 6e5c 6e60 6060  position.\n\n```
-0000c760: 7079 7468 6f6e 5c6e 5c6e 2320 5375 6273  python\n\n# Subs
-0000c770: 6372 6962 6520 746f 2065 7665 6e74 7320  cribe to events 
-0000c780: 6672 6f6d 2073 7472 6561 6d32 2c20 6672  from stream2, fr
-0000c790: 6f6d 2074 6865 2073 7461 7274 2e5c 6e73  om the start.\ns
-0000c7a0: 7562 7363 7269 7074 696f 6e20 3d20 636c  ubscription = cl
-0000c7b0: 6965 6e74 2e73 7562 7363 7269 6265 5f73  ient.subscribe_s
-0000c7c0: 7472 6561 6d5f 6576 656e 7473 285c 6e20  tream_events(\n 
-0000c7d0: 2020 2073 7472 6561 6d5f 6e61 6d65 3d73     stream_name=s
-0000c7e0: 7472 6561 6d5f 6e61 6d65 322c 5c6e 2020  tream_name2,\n  
-0000c7f0: 2020 7374 7265 616d 5f70 6f73 6974 696f    stream_positio
-0000c800: 6e3d 312c 5c6e 295c 6e5c 6e23 2052 6561  n=1,\n)\n\n# Rea
-0000c810: 6420 6576 656e 7420 6672 6f6d 2074 6865  d event from the
-0000c820: 2073 7562 7363 7269 7074 696f 6e2e 5c6e   subscription.\n
-0000c830: 6576 656e 7473 203d 205b 5d5c 6e66 6f72  events = []\nfor
-0000c840: 2065 7665 6e74 2069 6e20 7375 6273 6372   event in subscr
-0000c850: 6970 7469 6f6e 3a5c 6e20 2020 2065 7665  iption:\n    eve
-0000c860: 6e74 732e 6170 7065 6e64 2865 7665 6e74  nts.append(event
-0000c870: 295c 6e20 2020 2069 6620 6576 656e 742e  )\n    if event.
-0000c880: 6964 203d 3d20 6576 656e 7431 312e 6964  id == event11.id
-0000c890: 3a5c 6e20 2020 2020 2020 2062 7265 616b  :\n        break
-0000c8a0: 5c6e 5c6e 2320 4368 6563 6b20 7765 2067  \n\n# Check we g
-0000c8b0: 6f74 2065 7665 6e74 7320 6f6e 6c79 2061  ot events only a
-0000c8c0: 6674 6572 2070 6f73 6974 696f 6e20 312e  fter position 1.
-0000c8d0: 5c6e 6173 7365 7274 206c 656e 2865 7665  \nassert len(eve
-0000c8e0: 6e74 7329 203d 3d20 325c 6e65 7665 6e74  nts) == 2\nevent
-0000c8f0: 735b 305d 2e69 6420 3d3d 2065 7665 6e74  s[0].id == event
-0000c900: 362e 6964 5c6e 6576 656e 7473 5b30 5d2e  6.id\nevents[0].
-0000c910: 7374 7265 616d 5f70 6f73 6974 696f 6e20  stream_position 
-0000c920: 3d3d 2032 5c6e 6576 656e 7473 5b30 5d2e  == 2\nevents[0].
-0000c930: 7374 7265 616d 5f6e 616d 6520 3d3d 2073  stream_name == s
-0000c940: 7472 6561 6d5f 6e61 6d65 325c 6e65 7665  tream_name2\neve
-0000c950: 6e74 735b 315d 2e69 6420 3d3d 2065 7665  nts[1].id == eve
-0000c960: 6e74 3131 2e69 645c 6e65 7665 6e74 735b  nt11.id\nevents[
-0000c970: 315d 2e73 7472 6561 6d5f 706f 7369 7469  1].stream_positi
-0000c980: 6f6e 203d 3d20 335c 6e65 7665 6e74 735b  on == 3\nevents[
-0000c990: 315d 2e73 7472 6561 6d5f 6e61 6d65 203d  1].stream_name =
-0000c9a0: 3d20 7374 7265 616d 5f6e 616d 6532 5c6e  = stream_name2\n
-0000c9b0: 6060 605c 6e5c 6e23 2320 5065 7273 6973  ```\n\n## Persis
-0000c9c0: 7465 6e74 2073 7562 7363 7269 7074 696f  tent subscriptio
-0000c9d0: 6e73 5c6e 5c6e 2323 2320 4372 6561 7465  ns\n\n### Create
-0000c9e0: 2073 7562 7363 7269 7074 696f 6e5c 6e5c   subscription\n\
-0000c9f0: 6e54 6865 206d 6574 686f 6420 6063 7265  nThe method `cre
-0000ca00: 6174 655f 7375 6273 6372 6970 7469 6f6e  ate_subscription
-0000ca10: 2829 6020 6361 6e20 6265 2075 7365 6420  ()` can be used 
-0000ca20: 746f 2063 7265 6174 6520 615c 6e22 7065  to create a\n"pe
-0000ca30: 7273 6973 7465 6e74 2073 7562 7363 7269  rsistent subscri
-0000ca40: 7074 696f 6e22 2074 6f20 4576 656e 7453  ption" to EventS
-0000ca50: 746f 7265 4442 2e5c 6e5c 6e54 6869 7320  toreDB.\n\nThis 
-0000ca60: 6d65 7468 6f64 2074 616b 6573 2061 2072  method takes a r
-0000ca70: 6571 7569 7265 6420 6067 726f 7570 5f6e  equired `group_n
-0000ca80: 616d 6560 2061 7267 756d 656e 742c 2077  ame` argument, w
-0000ca90: 6869 6368 2069 7320 7468 655c 6e6e 616d  hich is the\nnam
-0000caa0: 6520 6f66 2061 2022 6772 6f75 7022 206f  e of a "group" o
-0000cab0: 6620 636f 6e73 756d 6572 7320 6f66 2074  f consumers of t
-0000cac0: 6865 2073 7562 7363 7269 7074 696f 6e2e  he subscription.
-0000cad0: 5c6e 5c6e 5468 6973 206d 6574 686f 6420  \n\nThis method 
-0000cae0: 7461 6b65 7320 616e 206f 7074 696f 6e61  takes an optiona
-0000caf0: 6c20 6066 726f 6d5f 656e 6460 2061 7267  l `from_end` arg
-0000cb00: 756d 656e 742c 2077 6869 6368 2063 616e  ument, which can
-0000cb10: 2062 655c 6e75 7365 6420 746f 2073 7065   be\nused to spe
-0000cb20: 6369 6679 2074 6861 7420 7468 6520 6772  cify that the gr
-0000cb30: 6f75 7020 6f66 2063 6f6e 7375 6d65 7273  oup of consumers
-0000cb40: 206f 6620 7468 6520 7375 6273 6372 6970   of the subscrip
-0000cb50: 7469 6f6e 2073 686f 756c 645c 6e6f 6e6c  tion should\nonl
-0000cb60: 7920 7265 6365 6976 6520 6576 656e 7473  y receive events
-0000cb70: 2074 6861 7420 7765 7265 2072 6563 6f72   that were recor
-0000cb80: 6465 6420 6166 7465 7220 7468 6520 7375  ded after the su
-0000cb90: 6273 6372 6970 7469 6f6e 2077 6173 2063  bscription was c
-0000cba0: 7265 6174 6564 2e5c 6e5c 6e54 6869 7320  reated.\n\nThis 
-0000cbb0: 6d65 7468 6f64 2074 616b 6573 2061 6e20  method takes an 
-0000cbc0: 6f70 7469 6f6e 616c 2060 636f 6d6d 6974  optional `commit
-0000cbd0: 5f70 6f73 6974 696f 6e60 2061 7267 756d  _position` argum
-0000cbe0: 656e 742c 2077 6869 6368 2063 616e 2062  ent, which can b
-0000cbf0: 655c 6e75 7365 6420 746f 2073 7065 6369  e\nused to speci
-0000cc00: 6679 2061 2063 6f6d 6d69 7420 706f 7369  fy a commit posi
-0000cc10: 7469 6f6e 2066 726f 6d20 7768 6963 6820  tion from which 
-0000cc20: 7468 6520 6772 6f75 7020 6f66 2063 6f6e  the group of con
-0000cc30: 7375 6d65 7273 206f 665c 6e74 6865 2073  sumers of\nthe s
-0000cc40: 7562 7363 7269 7074 696f 6e20 7368 6f75  ubscription shou
-0000cc50: 6c64 2072 6563 6569 7665 2065 7665 6e74  ld receive event
-0000cc60: 732e 2050 6c65 6173 6520 6e6f 7465 2c20  s. Please note, 
-0000cc70: 7468 6520 7265 636f 7264 6564 2065 7665  the recorded eve
-0000cc80: 6e74 5c6e 6174 2074 6865 2073 7065 6369  nt\nat the speci
-0000cc90: 6669 6564 2063 6f6d 6d69 7420 706f 7369  fied commit posi
-0000cca0: 7469 6f6e 204d 4159 2062 6520 696e 636c  tion MAY be incl
-0000ccb0: 7564 6564 2069 6e20 7468 6520 7265 636f  uded in the reco
-0000ccc0: 7264 6564 2065 7665 6e74 735c 6e72 6563  rded events\nrec
-0000ccd0: 6569 7665 6420 6279 2074 6865 2067 726f  eived by the gro
-0000cce0: 7570 206f 6620 636f 6e73 756d 6572 732e  up of consumers.
-0000ccf0: 5c6e 5c6e 4966 206e 6569 7468 6572 2060  \n\nIf neither `
-0000cd00: 6672 6f6d 5f65 6e64 6020 6f72 2060 636f  from_end` or `co
-0000cd10: 6d6d 6974 5f70 6f73 6974 696f 6e60 2061  mmit_position` a
-0000cd20: 7265 2073 7065 6369 6669 6564 2c20 7468  re specified, th
-0000cd30: 6520 6772 6f75 7020 6f66 2063 6f6e 7375  e group of consu
-0000cd40: 6d65 7273 5c6e 6f66 2074 6865 2073 7562  mers\nof the sub
-0000cd50: 7363 7269 7074 696f 6e20 7769 6c6c 2072  scription will r
-0000cd60: 6563 6569 7665 2061 6c6c 2072 6563 6f72  eceive all recor
-0000cd70: 6465 6420 6576 656e 7473 2e5c 6e5c 6e54  ded events.\n\nT
-0000cd80: 6869 7320 6d65 7468 6f64 2061 6c73 6f20  his method also 
-0000cd90: 7461 6b65 7320 6f70 7469 6f6e 2060 6669  takes option `fi
-0000cda0: 6c74 6572 5f65 7863 6c75 6465 602c 2060  lter_exclude`, `
-0000cdb0: 6669 6c74 6572 5f69 6e63 6c75 6465 605c  filter_include`\
-0000cdc0: 6e61 7267 756d 656e 7473 2c20 7768 6963  narguments, whic
-0000cdd0: 6820 776f 726b 2069 6e20 7468 6520 7361  h work in the sa
-0000cde0: 6d65 2077 6179 2061 7320 7468 6579 2064  me way as they d
-0000cdf0: 6f20 696e 2074 6865 2060 7375 6273 6372  o in the `subscr
-0000ce00: 6962 655f 616c 6c5f 6576 656e 7473 2829  ibe_all_events()
-0000ce10: 605c 6e6d 6574 686f 642e 5c6e 5c6e 5468  `\nmethod.\n\nTh
-0000ce20: 6973 206d 6574 686f 6420 616c 736f 2074  is method also t
-0000ce30: 616b 6573 2061 6e20 6f70 7469 6f6e 616c  akes an optional
-0000ce40: 2060 7469 6d65 6f75 7460 2061 7267 756d   `timeout` argum
-0000ce50: 656e 742c 2074 6861 745c 6e69 7320 6578  ent, that\nis ex
-0000ce60: 7065 6374 6564 2074 6f20 6265 2061 2050  pected to be a P
-0000ce70: 7974 686f 6e20 6066 6c6f 6174 602c 2077  ython `float`, w
-0000ce80: 6869 6368 2073 6574 7320 6120 6465 6164  hich sets a dead
-0000ce90: 6c69 6e65 5c6e 666f 7220 7468 6520 636f  line\nfor the co
-0000cea0: 6d70 6c65 7469 6f6e 206f 6620 7468 6520  mpletion of the 
-0000ceb0: 6752 5043 206f 7065 7261 7469 6f6e 2e5c  gRPC operation.\
-0000cec0: 6e5c 6e54 6865 206d 6574 686f 6420 6063  n\nThe method `c
-0000ced0: 7265 6174 655f 7375 6273 6372 6970 7469  reate_subscripti
-0000cee0: 6f6e 2829 6020 646f 6573 206e 6f74 2072  on()` does not r
-0000cef0: 6574 7572 6e20 6120 7661 6c75 652c 2062  eturn a value, b
-0000cf00: 6563 6175 7365 5c6e 7265 636f 7264 6564  ecause\nrecorded
-0000cf10: 2065 7665 6e74 7320 6172 6520 6f62 7461   events are obta
-0000cf20: 696e 6564 2062 7920 7468 6520 6772 6f75  ined by the grou
-0000cf30: 7020 6f66 2063 6f6e 7375 6d65 7273 206f  p of consumers o
-0000cf40: 6620 7468 6520 7375 6273 6372 6970 7469  f the subscripti
-0000cf50: 6f6e 5c6e 7573 696e 6720 7468 6520 6072  on\nusing the `r
-0000cf60: 6561 645f 7375 6273 6372 6970 7469 6f6e  ead_subscription
-0000cf70: 2829 6020 6d65 7468 6f64 2e5c 6e5c 6e2a  ()` method.\n\n*
-0000cf80: 506c 6561 7365 206e 6f74 652c 2069 6e20  Please note, in 
-0000cf90: 7468 6973 2076 6572 7369 6f6e 206f 6620  this version of 
-0000cfa0: 7468 6973 2063 6c69 656e 7420 7468 6520  this client the 
-0000cfb0: 2263 6f6e 7375 6d65 7220 7374 7261 7465  "consumer strate
-0000cfc0: 6779 2220 6973 5c6e 7365 7420 746f 2022  gy" is\nset to "
-0000cfd0: 4469 7370 6174 6368 546f 5369 6e67 6c65  DispatchToSingle
-0000cfe0: 222e 2053 7570 706f 7274 2066 6f72 2063  ". Support for c
-0000cff0: 686f 6f73 696e 6720 6f74 6865 7220 636f  hoosing other co
-0000d000: 6e73 756d 6572 2073 7472 6174 6567 6965  nsumer strategie
-0000d010: 735c 6e73 7570 706f 7274 6564 2062 7920  s\nsupported by 
-0000d020: 4576 656e 7453 746f 7265 4442 2077 696c  EventStoreDB wil
-0000d030: 6c20 696e 2066 7574 7572 6520 6265 2073  l in future be s
-0000d040: 7570 706f 7274 6564 2069 6e20 7468 6973  upported in this
-0000d050: 2063 6c69 656e 742e 2a5c 6e5c 6e49 6e20   client.*\n\nIn 
-0000d060: 7468 6520 6578 616d 706c 6520 6265 6c6f  the example belo
-0000d070: 772c 2061 2070 6572 7369 7374 656e 7420  w, a persistent 
-0000d080: 7375 6273 6372 6970 7469 6f6e 2069 7320  subscription is 
-0000d090: 6372 6561 7465 642e 5c6e 5c6e 6060 6070  created.\n\n```p
-0000d0a0: 7974 686f 6e5c 6e23 2043 7265 6174 6520  ython\n# Create 
-0000d0b0: 6120 7065 7273 6973 7465 6e74 2073 7562  a persistent sub
-0000d0c0: 7363 7269 7074 696f 6e2e 5c6e 6772 6f75  scription.\ngrou
-0000d0d0: 705f 6e61 6d65 203d 2066 2267 726f 7570  p_name = f"group
-0000d0e0: 2d7b 7575 6964 3428 297d 225c 6e63 6c69  -{uuid4()}"\ncli
-0000d0f0: 656e 742e 6372 6561 7465 5f73 7562 7363  ent.create_subsc
-0000d100: 7269 7074 696f 6e28 6772 6f75 705f 6e61  ription(group_na
-0000d110: 6d65 3d67 726f 7570 5f6e 616d 6529 5c6e  me=group_name)\n
-0000d120: 6060 605c 6e5c 6e23 2323 2052 6561 6420  ```\n\n### Read 
-0000d130: 7375 6273 6372 6970 7469 6f6e 5c6e 5c6e  subscription\n\n
-0000d140: 5468 6520 6d65 7468 6f64 2060 7265 6164  The method `read
-0000d150: 5f73 7562 7363 7269 7074 696f 6e28 2960  _subscription()`
-0000d160: 2063 616e 2062 6520 7573 6564 2062 7920   can be used by 
-0000d170: 6120 6772 6f75 7020 6f66 2063 6f6e 7375  a group of consu
-0000d180: 6d65 7273 2074 6f20 7265 6365 6976 655c  mers to receive\
-0000d190: 6e72 6563 6f72 6465 6420 6576 656e 7473  nrecorded events
-0000d1a0: 2066 726f 6d20 6120 7065 7273 6973 7465   from a persiste
-0000d1b0: 6e74 2073 7562 7363 7269 7074 696f 6e20  nt subscription 
-0000d1c0: 6372 6561 7465 6420 7573 696e 6720 6063  created using `c
-0000d1d0: 7265 6174 655f 7375 6273 6372 6970 7469  reate_subscripti
-0000d1e0: 6f6e 602e 5c6e 5c6e 5468 6973 206d 6574  on`.\n\nThis met
-0000d1f0: 686f 6420 7461 6b65 7320 6120 7265 7175  hod takes a requ
-0000d200: 6972 6564 2060 6772 6f75 705f 6e61 6d65  ired `group_name
-0000d210: 6020 6172 6775 6d65 6e74 2c20 7768 6963  ` argument, whic
-0000d220: 6820 6973 5c6e 7468 6520 6e61 6d65 206f  h is\nthe name o
-0000d230: 6620 6120 2267 726f 7570 2220 6f66 2063  f a "group" of c
-0000d240: 6f6e 7375 6d65 7273 206f 6620 7468 6520  onsumers of the 
-0000d250: 7375 6273 6372 6970 7469 6f6e 2073 7065  subscription spe
-0000d260: 6369 6669 6564 5c6e 7768 656e 2060 6372  cified\nwhen `cr
-0000d270: 6561 7465 5f73 7562 7363 7269 7074 696f  eate_subscriptio
-0000d280: 6e28 2960 2077 6173 2063 616c 6c65 642e  n()` was called.
-0000d290: 5c6e 5c6e 5468 6973 206d 6574 686f 6420  \n\nThis method 
-0000d2a0: 616c 736f 2074 616b 6573 2061 6e20 6f70  also takes an op
-0000d2b0: 7469 6f6e 616c 2060 7469 6d65 6f75 7460  tional `timeout`
-0000d2c0: 2061 7267 756d 656e 742c 2074 6861 745c   argument, that\
-0000d2d0: 6e69 7320 6578 7065 6374 6564 2074 6f20  nis expected to 
-0000d2e0: 6265 2061 2050 7974 686f 6e20 6066 6c6f  be a Python `flo
-0000d2f0: 6174 602c 2077 6869 6368 2073 6574 7320  at`, which sets 
-0000d300: 6120 6465 6164 6c69 6e65 5c6e 666f 7220  a deadline\nfor 
-0000d310: 7468 6520 636f 6d70 6c65 7469 6f6e 206f  the completion o
-0000d320: 6620 7468 6520 6752 5043 206f 7065 7261  f the gRPC opera
-0000d330: 7469 6f6e 2e5c 6e5c 6e54 6869 7320 6d65  tion.\n\nThis me
-0000d340: 7468 6f64 2072 6574 7572 6e73 2061 2032  thod returns a 2
-0000d350: 2d74 7570 6c65 3a20 6120 2272 6561 6420  -tuple: a "read 
-0000d360: 7265 7175 6573 7422 206f 626a 6563 7420  request" object 
-0000d370: 616e 6420 6120 2272 6561 6420 7265 7370  and a "read resp
-0000d380: 6f6e 7365 2220 6f62 6a65 6374 2e5c 6e5c  onse" object.\n\
-0000d390: 6e60 6060 7079 7468 6f6e 5c6e 7265 6164  n```python\nread
-0000d3a0: 5f72 6571 2c20 7265 6164 5f72 6573 7020  _req, read_resp 
-0000d3b0: 3d20 636c 6965 6e74 2e72 6561 645f 7375  = client.read_su
-0000d3c0: 6273 6372 6970 7469 6f6e 2867 726f 7570  bscription(group
-0000d3d0: 5f6e 616d 653d 6772 6f75 705f 6e61 6d65  _name=group_name
-0000d3e0: 295c 6e60 6060 5c6e 5c6e 5468 6520 2272  )\n```\n\nThe "r
-0000d3f0: 6561 6420 7265 7370 6f6e 7365 2220 6f62  ead response" ob
-0000d400: 6a65 6374 2069 7320 616e 2069 7465 7261  ject is an itera
-0000d410: 746f 7220 7468 6174 2079 6965 6c64 7320  tor that yields 
-0000d420: 7265 636f 7264 6564 2065 7665 6e74 7320  recorded events 
-0000d430: 6672 6f6d 5c6e 7468 6520 7370 6563 6966  from\nthe specif
-0000d440: 6965 6420 636f 6d6d 6974 2070 6f73 6974  ied commit posit
-0000d450: 696f 6e2e 5c6e 5c6e 5468 6520 2272 6561  ion.\n\nThe "rea
-0000d460: 6420 7265 7175 6573 7422 206f 626a 6563  d request" objec
-0000d470: 7420 6861 7320 616e 2060 6163 6b28 2960  t has an `ack()`
-0000d480: 206d 6574 686f 6420 7468 6174 2063 616e   method that can
-0000d490: 2062 6520 7573 6564 2062 7920 6120 636f   be used by a co
-0000d4a0: 6e73 756d 6572 5c6e 696e 2061 2067 726f  nsumer\nin a gro
-0000d4b0: 7570 2074 6f20 6163 6b6e 6f77 6c65 6467  up to acknowledg
-0000d4c0: 6520 746f 2074 6865 2073 6572 7665 7220  e to the server 
-0000d4d0: 7468 6174 2069 7420 6861 7320 7265 6365  that it has rece
-0000d4e0: 6976 6564 2061 6e64 2073 7563 6365 7373  ived and success
-0000d4f0: 6675 6c6c 795c 6e70 726f 6365 7373 6564  fully\nprocessed
-0000d500: 2061 2072 6563 6f72 6465 6420 6576 656e   a recorded even
-0000d510: 742e 2054 6869 7320 7769 6c6c 2070 7265  t. This will pre
-0000d520: 7665 6e74 2074 6861 7420 7265 636f 7264  vent that record
-0000d530: 6564 2065 7665 6e74 2062 6569 6e67 2072  ed event being r
-0000d540: 6563 6569 7665 645c 6e62 7920 616e 6f74  eceived\nby anot
-0000d550: 6865 7220 636f 6e73 756d 6572 2069 6e20  her consumer in 
-0000d560: 7468 6520 7361 6d65 2067 726f 7570 2e20  the same group. 
-0000d570: 5468 6520 6061 636b 2829 6020 6d65 7468  The `ack()` meth
-0000d580: 6f64 2074 616b 6573 2061 6e20 6065 7665  od takes an `eve
-0000d590: 6e74 5f69 6460 5c6e 6172 6775 6d65 6e74  nt_id`\nargument
-0000d5a0: 2c20 7768 6963 6820 6973 2074 6865 2049  , which is the I
-0000d5b0: 4420 6f66 2074 6865 2072 6563 6f72 6465  D of the recorde
-0000d5c0: 6420 6576 656e 7420 7468 6174 2068 6173  d event that has
-0000d5d0: 2062 6565 6e20 7265 6365 6976 6564 2e5c   been received.\
-0000d5e0: 6e5c 6e54 6865 2065 7861 6d70 6c65 2062  n\nThe example b
-0000d5f0: 656c 6f77 2069 7465 7261 7465 7320 6f76  elow iterates ov
-0000d600: 6572 2074 6865 2022 7265 6164 2072 6573  er the "read res
-0000d610: 706f 6e73 6522 206f 626a 6563 742c 2061  ponse" object, a
-0000d620: 6e64 2063 616c 6c73 2060 6163 6b28 2960  nd calls `ack()`
-0000d630: 5c6e 6f6e 2074 6865 2022 7265 6164 2072  \non the "read r
-0000d640: 6573 706f 6e73 6522 206f 626a 6563 742e  esponse" object.
-0000d650: 2054 6865 2066 6f72 206c 6f6f 7020 6272   The for loop br
-0000d660: 6561 6b73 2077 6865 6e20 7765 2068 6176  eaks when we hav
-0000d670: 6520 7265 6365 6976 6564 5c6e 7468 6520  e received\nthe 
-0000d680: 6c61 7374 2065 7665 6e74 2c20 736f 2074  last event, so t
-0000d690: 6861 7420 7765 2063 616e 2063 6f6e 7469  hat we can conti
-0000d6a0: 6e75 6520 7769 7468 2074 6865 2065 7861  nue with the exa
-0000d6b0: 6d70 6c65 7320 6265 6c6f 772e 5c6e 5c6e  mples below.\n\n
-0000d6c0: 6060 6070 7974 686f 6e5c 6e65 7665 6e74  ```python\nevent
-0000d6d0: 7320 3d20 5b5d 5c6e 666f 7220 6576 656e  s = []\nfor even
-0000d6e0: 7420 696e 2072 6561 645f 7265 7370 3a5c  t in read_resp:\
-0000d6f0: 6e20 2020 2065 7665 6e74 732e 6170 7065  n    events.appe
-0000d700: 6e64 2865 7665 6e74 295c 6e5c 6e20 2020  nd(event)\n\n   
-0000d710: 2023 2041 636b 6e6f 776c 6564 6765 2074   # Acknowledge t
-0000d720: 6865 2072 6563 6569 7665 6420 6576 656e  he received even
-0000d730: 742e 5c6e 2020 2020 7265 6164 5f72 6571  t.\n    read_req
-0000d740: 2e61 636b 2865 7665 6e74 5f69 643d 6576  .ack(event_id=ev
-0000d750: 656e 742e 6964 295c 6e5c 6e20 2020 2023  ent.id)\n\n    #
-0000d760: 2042 7265 616b 2077 6865 6e20 7468 6520   Break when the 
-0000d770: 6c61 7374 2065 7665 6e74 2068 6173 2062  last event has b
-0000d780: 6565 6e20 7265 6365 6976 6564 2e5c 6e20  een received.\n 
-0000d790: 2020 2069 6620 6576 656e 742e 6964 203d     if event.id =
-0000d7a0: 3d20 6576 656e 7431 312e 6964 3a5c 6e20  = event11.id:\n 
-0000d7b0: 2020 2020 2020 2062 7265 616b 5c6e 6060         break\n``
-0000d7c0: 605c 6e5c 6e54 6865 2072 6563 6569 7665  `\n\nThe receive
-0000d7d0: 6420 6576 656e 7473 2061 7265 2074 6865  d events are the
-0000d7e0: 2065 7665 6e74 7320 7765 2061 7070 656e   events we appen
-0000d7f0: 6465 6420 6162 6f76 652e 5c6e 5c6e 6060  ded above.\n\n``
-0000d800: 6070 7974 686f 6e5c 6e61 7373 6572 7420  `python\nassert 
-0000d810: 6576 656e 7473 5b2d 3131 5d2e 6964 203d  events[-11].id =
-0000d820: 3d20 6576 656e 7431 2e69 645c 6e61 7373  = event1.id\nass
-0000d830: 6572 7420 6576 656e 7473 5b2d 3130 5d2e  ert events[-10].
-0000d840: 6964 203d 3d20 6576 656e 7432 2e69 645c  id == event2.id\
-0000d850: 6e61 7373 6572 7420 6576 656e 7473 5b2d  nassert events[-
-0000d860: 395d 2e69 6420 3d3d 2065 7665 6e74 332e  9].id == event3.
-0000d870: 6964 5c6e 6173 7365 7274 2065 7665 6e74  id\nassert event
-0000d880: 735b 2d38 5d2e 6964 203d 3d20 6576 656e  s[-8].id == even
-0000d890: 7434 2e69 645c 6e61 7373 6572 7420 6576  t4.id\nassert ev
-0000d8a0: 656e 7473 5b2d 375d 2e69 6420 3d3d 2065  ents[-7].id == e
-0000d8b0: 7665 6e74 352e 6964 5c6e 6173 7365 7274  vent5.id\nassert
-0000d8c0: 2065 7665 6e74 735b 2d36 5d2e 6964 203d   events[-6].id =
-0000d8d0: 3d20 6576 656e 7436 2e69 645c 6e61 7373  = event6.id\nass
-0000d8e0: 6572 7420 6576 656e 7473 5b2d 355d 2e69  ert events[-5].i
-0000d8f0: 6420 3d3d 2065 7665 6e74 372e 6964 5c6e  d == event7.id\n
-0000d900: 6173 7365 7274 2065 7665 6e74 735b 2d34  assert events[-4
-0000d910: 5d2e 6964 203d 3d20 6576 656e 7438 2e69  ].id == event8.i
-0000d920: 645c 6e61 7373 6572 7420 6576 656e 7473  d\nassert events
-0000d930: 5b2d 335d 2e69 6420 3d3d 2065 7665 6e74  [-3].id == event
-0000d940: 392e 6964 5c6e 6173 7365 7274 2065 7665  9.id\nassert eve
-0000d950: 6e74 735b 2d32 5d2e 6964 203d 3d20 6576  nts[-2].id == ev
-0000d960: 656e 7431 302e 6964 5c6e 6173 7365 7274  ent10.id\nassert
-0000d970: 2065 7665 6e74 735b 2d31 5d2e 6964 203d   events[-1].id =
-0000d980: 3d20 6576 656e 7431 312e 6964 5c6e 6060  = event11.id\n``
-0000d990: 605c 6e5c 6e54 6865 2022 7265 6164 2072  `\n\nThe "read r
-0000d9a0: 6571 7565 7374 2220 6f62 6a65 6374 2061  equest" object a
-0000d9b0: 6c73 6f20 6861 7320 616e 2060 6e61 636b  lso has an `nack
-0000d9c0: 2829 6020 6d65 7468 6f64 2074 6861 7420  ()` method that 
-0000d9d0: 6361 6e20 6265 2075 7365 6420 6279 2061  can be used by a
-0000d9e0: 2063 6f6e 7375 6d65 725c 6e69 6e20 6120   consumer\nin a 
-0000d9f0: 6772 6f75 7020 746f 2061 636b 6e6f 776c  group to acknowl
-0000da00: 6564 6765 2074 6f20 7468 6520 7365 7276  edge to the serv
-0000da10: 6572 2074 6861 7420 6974 2068 6173 2066  er that it has f
-0000da20: 6169 6c65 6420 7375 6363 6573 7366 756c  ailed successful
-0000da30: 6c79 2074 6f5c 6e70 726f 6365 7373 2061  ly to\nprocess a
-0000da40: 2072 6563 6f72 6465 6420 6576 656e 742e   recorded event.
-0000da50: 2054 6869 7320 7769 6c6c 2061 6c6c 6f77   This will allow
-0000da60: 2074 6861 7420 7265 636f 7264 6564 2065   that recorded e
-0000da70: 7665 6e74 2074 6f20 6265 2072 6563 6569  vent to be recei
-0000da80: 7665 645c 6e62 7920 7468 6973 206f 7220  ved\nby this or 
-0000da90: 616e 6f74 6865 7220 636f 6e73 756d 6572  another consumer
-0000daa0: 2069 6e20 7468 6520 7361 6d65 2067 726f   in the same gro
-0000dab0: 7570 2e5c 6e5c 6e49 7420 6d69 6768 7420  up.\n\nIt might 
-0000dac0: 6265 206d 6f72 6520 7573 6566 756c 2074  be more useful t
-0000dad0: 6f20 656e 6361 7073 756c 6174 6520 7468  o encapsulate th
-0000dae0: 6520 7265 7175 6573 7420 616e 6420 7265  e request and re
-0000daf0: 7370 6f6e 7365 206f 626a 6563 7473 2061  sponse objects a
-0000db00: 6e64 2074 6f20 6974 6572 6174 655c 6e6f  nd to iterate\no
-0000db10: 7665 7220 7468 6520 2272 6561 6420 7265  ver the "read re
-0000db20: 7370 6f6e 7365 2220 696e 2061 2073 6570  sponse" in a sep
-0000db30: 6172 6174 6520 7468 7265 6164 2c20 746f  arate thread, to
-0000db40: 2063 616c 6c20 6261 636b 2074 6f20 6120   call back to a 
-0000db50: 6861 6e64 6c65 7220 6675 6e63 7469 6f6e  handler function
-0000db60: 2077 6865 6e5c 6e61 2072 6563 6f72 6465   when\na recorde
-0000db70: 6420 6576 656e 7420 6973 2072 6563 6569  d event is recei
-0000db80: 7665 642c 2061 6e64 2063 616c 6c20 6061  ved, and call `a
-0000db90: 636b 2829 6020 6966 2074 6865 2068 616e  ck()` if the han
-0000dba0: 646c 6572 2064 6f65 7320 6e6f 7420 7261  dler does not ra
-0000dbb0: 6973 6520 616e 5c6e 6578 6365 7074 696f  ise an\nexceptio
-0000dbc0: 6e2c 2061 6e64 2074 6f20 6361 6c6c 2060  n, and to call `
-0000dbd0: 6e61 636b 2829 6020 6966 2061 6e20 6578  nack()` if an ex
-0000dbe0: 6365 7074 696f 6e20 6973 2072 6169 7365  ception is raise
-0000dbf0: 642e 2054 6865 2065 7861 6d70 6c65 2062  d. The example b
-0000dc00: 656c 6f77 2073 686f 7773 2068 6f77 5c6e  elow shows how\n
-0000dc10: 7468 6973 206d 6967 6874 2062 6520 646f  this might be do
-0000dc20: 6e65 2e5c 6e5c 6e60 6060 7079 7468 6f6e  ne.\n\n```python
-0000dc30: 5c6e 6672 6f6d 2074 6872 6561 6469 6e67  \nfrom threading
-0000dc40: 2069 6d70 6f72 7420 5468 7265 6164 5c6e   import Thread\n
-0000dc50: 5c6e 5c6e 636c 6173 7320 5375 6273 6372  \n\nclass Subscr
-0000dc60: 6970 7469 6f6e 5265 6164 6572 3a5c 6e20  iptionReader:\n 
-0000dc70: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
-0000dc80: 7365 6c66 2c20 636c 6965 6e74 2c20 6772  self, client, gr
-0000dc90: 6f75 705f 6e61 6d65 2c20 6361 6c6c 6261  oup_name, callba
-0000dca0: 636b 293a 5c6e 2020 2020 2020 2020 7365  ck):\n        se
-0000dcb0: 6c66 2e63 6c69 656e 7420 3d20 636c 6965  lf.client = clie
-0000dcc0: 6e74 5c6e 2020 2020 2020 2020 7365 6c66  nt\n        self
-0000dcd0: 2e67 726f 7570 5f6e 616d 6520 3d20 6772  .group_name = gr
-0000dce0: 6f75 705f 6e61 6d65 5c6e 2020 2020 2020  oup_name\n      
-0000dcf0: 2020 7365 6c66 2e63 616c 6c62 6163 6b20    self.callback 
-0000dd00: 3d20 6361 6c6c 6261 636b 5c6e 2020 2020  = callback\n    
-0000dd10: 2020 2020 7365 6c66 2e74 6872 6561 6420      self.thread 
-0000dd20: 3d20 5468 7265 6164 2874 6172 6765 743d  = Thread(target=
-0000dd30: 7365 6c66 2e72 6561 645f 7375 6273 6372  self.read_subscr
-0000dd40: 6970 7469 6f6e 2c20 6461 656d 6f6e 3d54  iption, daemon=T
-0000dd50: 7275 6529 5c6e 2020 2020 2020 2020 7365  rue)\n        se
-0000dd60: 6c66 2e65 7272 6f72 203d 204e 6f6e 655c  lf.error = None\
-0000dd70: 6e5c 6e20 2020 2064 6566 2073 7461 7274  n\n    def start
-0000dd80: 2873 656c 6629 3a5c 6e20 2020 2020 2020  (self):\n       
-0000dd90: 2073 656c 662e 7468 7265 6164 2e73 7461   self.thread.sta
-0000dda0: 7274 2829 5c6e 5c6e 2020 2020 6465 6620  rt()\n\n    def 
-0000ddb0: 6a6f 696e 2873 656c 6629 3a5c 6e20 2020  join(self):\n   
-0000ddc0: 2020 2020 2073 656c 662e 7468 7265 6164       self.thread
-0000ddd0: 2e6a 6f69 6e28 295c 6e5c 6e20 2020 2064  .join()\n\n    d
-0000dde0: 6566 2072 6561 645f 7375 6273 6372 6970  ef read_subscrip
-0000ddf0: 7469 6f6e 2873 656c 6629 3a5c 6e20 2020  tion(self):\n   
-0000de00: 2020 2020 2072 6571 2c20 7265 7370 203d       req, resp =
-0000de10: 2073 656c 662e 636c 6965 6e74 2e72 6561   self.client.rea
-0000de20: 645f 7375 6273 6372 6970 7469 6f6e 2867  d_subscription(g
-0000de30: 726f 7570 5f6e 616d 653d 7365 6c66 2e67  roup_name=self.g
-0000de40: 726f 7570 5f6e 616d 6529 5c6e 2020 2020  roup_name)\n    
-0000de50: 2020 2020 666f 7220 6576 656e 7420 696e      for event in
-0000de60: 2072 6573 703a 5c6e 2020 2020 2020 2020   resp:\n        
-0000de70: 2020 2020 7472 793a 5c6e 2020 2020 2020      try:\n      
-0000de80: 2020 2020 2020 2020 2020 7365 6c66 2e63            self.c
-0000de90: 616c 6c62 6163 6b28 6576 656e 7429 5c6e  allback(event)\n
-0000dea0: 2020 2020 2020 2020 2020 2020 6578 6365              exce
-0000deb0: 7074 2045 7863 6570 7469 6f6e 2061 7320  pt Exception as 
-0000dec0: 653a 5c6e 2020 2020 2020 2020 2020 2020  e:\n            
-0000ded0: 2020 2020 2320 7265 712e 6e61 636b 2865      # req.nack(e
-0000dee0: 7665 6e74 2e69 6429 2020 2320 6e6f 7420  vent.id)  # not 
-0000def0: 7965 7420 696d 706c 656d 656e 7465 642e  yet implemented.
-0000df00: 2e2e 2e5c 6e20 2020 2020 2020 2020 2020  ...\n           
-0000df10: 2020 2020 2073 656c 662e 6572 726f 7220       self.error 
-0000df20: 3d20 655c 6e20 2020 2020 2020 2020 2020  = e\n           
-0000df30: 2020 2020 2062 7265 616b 5c6e 2020 2020       break\n    
-0000df40: 2020 2020 2020 2020 656c 7365 3a5c 6e20          else:\n 
-0000df50: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0000df60: 6571 2e61 636b 2865 7665 6e74 2e69 6429  eq.ack(event.id)
-0000df70: 5c6e 5c6e 5c6e 2320 4372 6561 7465 2061  \n\n\n# Create a
-0000df80: 6e6f 7468 6572 2070 6572 7369 7374 656e  nother persisten
-0000df90: 7420 7375 6273 6372 6970 7469 6f6e 2e5c  t subscription.\
-0000dfa0: 6e67 726f 7570 5f6e 616d 6520 3d20 6622  ngroup_name = f"
-0000dfb0: 6772 6f75 702d 7b75 7569 6434 2829 7d22  group-{uuid4()}"
-0000dfc0: 5c6e 636c 6965 6e74 2e63 7265 6174 655f  \nclient.create_
-0000dfd0: 7375 6273 6372 6970 7469 6f6e 2867 726f  subscription(gro
-0000dfe0: 7570 5f6e 616d 653d 6772 6f75 705f 6e61  up_name=group_na
-0000dff0: 6d65 295c 6e5c 6e65 7665 6e74 7320 3d20  me)\n\nevents = 
-0000e000: 5b5d 5c6e 5c6e 6465 6620 6861 6e64 6c65  []\n\ndef handle
-0000e010: 5f65 7665 6e74 2865 7665 6e74 293a 5c6e  _event(event):\n
-0000e020: 2020 2020 6576 656e 7473 2e61 7070 656e      events.appen
-0000e030: 6428 6576 656e 7429 5c6e 2020 2020 6966  d(event)\n    if
-0000e040: 2065 7665 6e74 2e69 6420 3d3d 2065 7665   event.id == eve
-0000e050: 6e74 3131 2e69 643a 5c6e 2020 2020 2020  nt11.id:\n      
-0000e060: 2020 7261 6973 6520 4578 6365 7074 696f    raise Exceptio
-0000e070: 6e28 295c 6e5c 6e5c 6e72 6561 6465 7220  n()\n\n\nreader 
-0000e080: 3d20 5375 6273 6372 6970 7469 6f6e 5265  = SubscriptionRe
-0000e090: 6164 6572 285c 6e20 2020 2063 6c69 656e  ader(\n    clien
-0000e0a0: 743d 636c 6965 6e74 2c5c 6e20 2020 2067  t=client,\n    g
-0000e0b0: 726f 7570 5f6e 616d 653d 6772 6f75 705f  roup_name=group_
-0000e0c0: 6e61 6d65 2c5c 6e20 2020 2063 616c 6c62  name,\n    callb
-0000e0d0: 6163 6b3d 6861 6e64 6c65 5f65 7665 6e74  ack=handle_event
-0000e0e0: 5c6e 295c 6e5c 6e72 6561 6465 722e 7374  \n)\n\nreader.st
-0000e0f0: 6172 7428 295c 6e72 6561 6465 722e 6a6f  art()\nreader.jo
-0000e100: 696e 2829 5c6e 5c6e 6173 7365 7274 2065  in()\n\nassert e
-0000e110: 7665 6e74 735b 2d31 5d2e 6964 203d 3d20  vents[-1].id == 
-0000e120: 6576 656e 7431 312e 6964 5c6e 6060 605c  event11.id\n```\
-0000e130: 6e5c 6e50 6c65 6173 6520 6e6f 7465 2c20  n\nPlease note, 
-0000e140: 7768 656e 2070 726f 6365 7373 696e 6720  when processing 
-0000e150: 6576 656e 7473 2069 6e20 6120 646f 776e  events in a down
-0000e160: 7374 7265 616d 2063 6f6d 706f 6e65 6e74  stream component
-0000e170: 2c20 7468 6520 636f 6d6d 6974 2070 6f73  , the commit pos
-0000e180: 6974 696f 6e20 6f66 5c6e 7468 6520 6c61  ition of\nthe la
-0000e190: 7374 2073 7563 6365 7373 6675 6c6c 7920  st successfully 
-0000e1a0: 7072 6f63 6573 7365 6420 6576 656e 7420  processed event 
-0000e1b0: 6973 2075 7365 6675 6c6c 7920 7265 636f  is usefully reco
-0000e1c0: 7264 6564 2062 7920 7468 6520 646f 776e  rded by the down
-0000e1d0: 7374 7265 616d 2063 6f6d 706f 6e65 6e74  stream component
-0000e1e0: 5c6e 736f 2074 6861 7420 7468 6520 636f  \nso that the co
-0000e1f0: 6d6d 6974 2070 6f73 6974 696f 6e20 6361  mmit position ca
-0000e200: 6e20 6265 2064 6574 6572 6d69 6e65 6420  n be determined 
-0000e210: 6279 2074 6865 2064 6f77 6e73 7472 6561  by the downstrea
-0000e220: 6d20 636f 6d70 6f6e 656e 7420 6672 6f6d  m component from
-0000e230: 2069 7473 206f 776e 5c6e 7265 636f 7264   its own\nrecord
-0000e240: 6564 2077 6865 6e20 6974 2069 7320 7265  ed when it is re
-0000e250: 7374 6172 7465 642e 2054 6869 7320 636f  started. This co
-0000e260: 6d6d 6974 2070 6f73 6974 696f 6e20 6361  mmit position ca
-0000e270: 6e20 6265 2075 7365 6420 746f 2073 7065  n be used to spe
-0000e280: 6369 6679 2074 6865 2063 6f6d 6d69 745c  cify the commit\
-0000e290: 6e70 6f73 6974 696f 6e20 6672 6f6d 2077  nposition from w
-0000e2a0: 6869 6368 2074 6f20 7375 6273 6372 6962  hich to subscrib
-0000e2b0: 652e 2053 696e 6365 2074 6869 7320 636f  e. Since this co
-0000e2c0: 6d6d 6974 2070 6f73 6974 696f 6e20 7265  mmit position re
-0000e2d0: 7072 6573 656e 7473 2074 6865 2070 6f73  presents the pos
-0000e2e0: 6974 696f 6e20 6f66 5c6e 7468 6520 6c61  ition of\nthe la
-0000e2f0: 7374 2073 7563 6365 7373 6675 6c6c 7920  st successfully 
-0000e300: 7072 6f63 6573 7365 6420 6576 656e 7420  processed event 
-0000e310: 696e 2061 2064 6f77 6e73 7472 6561 6d20  in a downstream 
-0000e320: 636f 6d70 6f6e 656e 742c 2073 6f20 6974  component, so it
-0000e330: 2077 696c 6c20 6265 2075 7375 616c 2074   will be usual t
-0000e340: 6f5c 6e77 616e 7420 746f 2072 6561 6420  o\nwant to read 
-0000e350: 6672 6f6d 2074 6865 206e 6578 7420 6576  from the next ev
-0000e360: 656e 7420 6166 7465 7220 7468 6973 2070  ent after this p
-0000e370: 6f73 6974 696f 6e2c 2062 6563 6175 7365  osition, because
-0000e380: 2074 6861 7420 6973 2074 6865 206e 6578   that is the nex
-0000e390: 7420 6576 656e 745c 6e74 6861 7420 6e65  t event\nthat ne
-0000e3a0: 6564 7320 746f 2062 6520 7072 6f63 6573  eds to be proces
-0000e3b0: 7365 642e 2048 6f77 6576 6572 2c20 7768  sed. However, wh
-0000e3c0: 656e 2073 7562 7363 7269 6269 6e67 2066  en subscribing f
-0000e3d0: 6f72 2065 7665 6e74 7320 7573 696e 6720  or events using 
-0000e3e0: 6120 7065 7273 6973 7465 6e74 5c6e 7375  a persistent\nsu
-0000e3f0: 6273 6372 6970 7469 6f6e 2069 6e20 4576  bscription in Ev
-0000e400: 656e 7453 746f 7265 4442 2c20 7468 6520  entStoreDB, the 
-0000e410: 6576 656e 7420 6174 2074 6865 2073 7065  event at the spe
-0000e420: 6369 6669 6564 2063 6f6d 6d69 7420 706f  cified commit po
-0000e430: 7369 7469 6f6e 204d 4159 2062 6520 7265  sition MAY be re
-0000e440: 7475 726e 6564 5c6e 6173 2074 6865 2066  turned\nas the f
-0000e450: 6972 7374 2065 7665 6e74 2069 6e20 7468  irst event in th
-0000e460: 6520 7265 6365 6976 6564 2073 6571 7565  e received seque
-0000e470: 6e63 6520 6f66 2072 6563 6f72 6465 6420  nce of recorded 
-0000e480: 6576 656e 7473 2c20 616e 6420 736f 2069  events, and so i
-0000e490: 7420 6d61 795c 6e62 6520 6e65 6365 7373  t may\nbe necess
-0000e4a0: 6172 7920 746f 2063 6865 636b 2074 6865  ary to check the
-0000e4b0: 2063 6f6d 6d69 7420 706f 7369 7469 6f6e   commit position
-0000e4c0: 206f 6620 7468 6520 7265 6365 6976 6564   of the received
-0000e4d0: 2065 7665 6e74 7320 616e 6420 746f 2064   events and to d
-0000e4e0: 6973 6361 7264 5c6e 616e 7920 2072 6563  iscard\nany  rec
-0000e4f0: 6f72 6465 6420 6576 656e 7420 6f62 6a65  orded event obje
-0000e500: 6374 2074 6861 7420 6861 7320 6120 636f  ct that has a co
-0000e510: 6d6d 6974 2070 6f73 6974 696f 6e20 6571  mmit position eq
-0000e520: 7561 6c20 746f 2074 6865 2063 6f6d 6d69  ual to the commi
-0000e530: 7420 706f 7369 7469 6f6e 5c6e 7370 6563  t position\nspec
-0000e540: 6966 6965 6420 696e 2074 6865 2072 6571  ified in the req
-0000e550: 7565 7374 2e5c 6e5c 6e57 6869 6c73 7420  uest.\n\nWhilst 
-0000e560: 7468 6572 6520 6172 6520 736f 6d65 2061  there are some a
-0000e570: 6476 616e 7461 6765 7320 6f66 2070 6572  dvantages of per
-0000e580: 7369 7374 656e 7420 7375 6273 6372 6970  sistent subscrip
-0000e590: 7469 6f6e 732c 2069 6e20 7061 7274 6963  tions, in partic
-0000e5a0: 756c 6172 2074 6865 5c6e 7072 6f63 6573  ular the\nproces
-0000e5b0: 7369 6e67 206f 6620 7265 636f 7264 6564  sing of recorded
-0000e5c0: 2065 7665 6e74 7320 6279 2061 2067 726f   events by a gro
-0000e5d0: 7570 206f 6620 636f 6e73 756d 6572 732c  up of consumers,
-0000e5e0: 2062 7920 7472 6163 6b69 6e67 2069 6e20   by tracking in 
-0000e5f0: 7468 655c 6e75 7073 7472 6561 6d20 7365  the\nupstream se
-0000e600: 7276 6572 2074 6865 2070 6f73 6974 696f  rver the positio
-0000e610: 6e20 696e 2074 6865 2063 6f6d 6d69 7420  n in the commit 
-0000e620: 7365 7175 656e 6365 206f 6620 6576 656e  sequence of even
-0000e630: 7473 2074 6861 7420 6861 7665 2062 6565  ts that have bee
-0000e640: 6e20 7072 6f63 6573 7365 642c 5c6e 7468  n processed,\nth
-0000e650: 6572 6520 6973 2061 2064 616e 6765 7220  ere is a danger 
-0000e660: 6f66 2022 6475 616c 2077 7269 7469 6e67  of "dual writing
-0000e670: 2220 696e 2074 6865 2063 6f6e 7375 6d70  " in the consump
-0000e680: 7469 6f6e 206f 6620 6576 656e 7473 2e20  tion of events. 
-0000e690: 5265 6c69 6162 696c 6974 795c 6e69 6e20  Reliability\nin 
-0000e6a0: 7072 6f63 6573 7369 6e67 206f 6620 7265  processing of re
-0000e6b0: 636f 7264 6564 2065 7665 6e74 7320 6279  corded events by
-0000e6c0: 2061 2067 726f 7570 206f 6620 636f 6e73   a group of cons
-0000e6d0: 756d 6572 7320 7769 6c6c 2072 656c 7920  umers will rely 
-0000e6e0: 696e 7374 6561 6420 6f6e 5c6e 6964 656d  instead on\nidem
-0000e6f0: 706f 7465 6e74 2068 616e 646c 696e 6720  potent handling 
-0000e700: 6f66 2064 7570 6c69 6361 7465 206d 6573  of duplicate mes
-0000e710: 7361 6765 732c 2061 6e64 2072 6573 696c  sages, and resil
-0000e720: 6965 6e63 6520 746f 206f 7574 2d6f 662d  ience to out-of-
-0000e730: 6f72 6465 7220 6465 6c69 7665 7279 2e5c  order delivery.\
-0000e740: 6e5c 6e23 2323 2047 6574 2073 7562 7363  n\n### Get subsc
-0000e750: 7269 7074 696f 6e20 696e 666f 5c6e 5c6e  ription info\n\n
-0000e760: 5468 6520 6067 6574 5f73 7562 7363 7269  The `get_subscri
-0000e770: 7074 696f 6e5f 696e 666f 2829 6020 6d65  ption_info()` me
-0000e780: 7468 6f64 2063 616e 2062 6520 7573 6564  thod can be used
-0000e790: 2074 6f20 6765 7420 696e 666f 726d 6174   to get informat
-0000e7a0: 696f 6e20 666f 7220 615c 6e70 6572 7369  ion for a\npersi
-0000e7b0: 7374 656e 7420 7375 6273 6372 6970 7469  stent subscripti
-0000e7c0: 6f6e 2e5c 6e5c 6e54 6869 7320 6d65 7468  on.\n\nThis meth
-0000e7d0: 6f64 2068 6173 206f 6e65 2072 6571 7569  od has one requi
-0000e7e0: 7265 6420 6172 6775 6d65 6e74 2c20 6067  red argument, `g
-0000e7f0: 726f 7570 5f6e 616d 6560 2c20 7768 6963  roup_name`, whic
-0000e800: 685c 6e73 686f 756c 6420 6d61 7463 6820  h\nshould match 
-0000e810: 7468 6520 7661 6c75 6520 6f66 2074 6865  the value of the
-0000e820: 2061 7267 756d 656e 7420 7573 6564 2077   argument used w
-0000e830: 6865 6e20 6361 6c6c 696e 6720 6063 7265  hen calling `cre
-0000e840: 6174 655f 7375 6273 6372 6970 7469 6f6e  ate_subscription
-0000e850: 2829 602e 5c6e 5c6e 5468 6973 206d 6574  ()`.\n\nThis met
-0000e860: 686f 6420 616c 736f 2074 616b 6573 2061  hod also takes a
-0000e870: 6e20 6f70 7469 6f6e 616c 2060 7469 6d65  n optional `time
-0000e880: 6f75 7460 2061 7267 756d 656e 742c 2074  out` argument, t
-0000e890: 6861 745c 6e69 7320 6578 7065 6374 6564  hat\nis expected
-0000e8a0: 2074 6f20 6265 2061 2050 7974 686f 6e20   to be a Python 
-0000e8b0: 6066 6c6f 6174 602c 2077 6869 6368 2073  `float`, which s
-0000e8c0: 6574 7320 6120 6465 6164 6c69 6e65 5c6e  ets a deadline\n
-0000e8d0: 666f 7220 7468 6520 636f 6d70 6c65 7469  for the completi
-0000e8e0: 6f6e 206f 6620 7468 6520 6752 5043 206f  on of the gRPC o
-0000e8f0: 7065 7261 7469 6f6e 2e5c 6e5c 6e60 6060  peration.\n\n```
-0000e900: 7079 7468 6f6e 5c6e 7375 6273 6372 6970  python\nsubscrip
-0000e910: 7469 6f6e 5f69 6e66 6f20 3d20 636c 6965  tion_info = clie
-0000e920: 6e74 2e67 6574 5f73 7562 7363 7269 7074  nt.get_subscript
-0000e930: 696f 6e5f 696e 666f 285c 6e20 2020 2067  ion_info(\n    g
-0000e940: 726f 7570 5f6e 616d 653d 6772 6f75 705f  roup_name=group_
-0000e950: 6e61 6d65 2c5c 6e29 5c6e 6060 605c 6e5c  name,\n)\n```\n\
-0000e960: 6e54 6865 2072 6574 7572 6e65 6420 7661  nThe returned va
-0000e970: 6c75 6520 6973 2061 2060 5375 6273 6372  lue is a `Subscr
-0000e980: 6970 7469 6f6e 496e 666f 6020 6f62 6a65  iptionInfo` obje
-0000e990: 6374 2e5c 6e5c 6e23 2323 204c 6973 7420  ct.\n\n### List 
-0000e9a0: 7375 6273 6372 6970 7469 6f6e 735c 6e5c  subscriptions\n\
-0000e9b0: 6e54 6865 2060 6c69 7374 5f73 7562 7363  nThe `list_subsc
-0000e9c0: 7269 7074 696f 6e73 2829 6020 6d65 7468  riptions()` meth
-0000e9d0: 6f64 2063 616e 2062 6520 7573 6564 2074  od can be used t
-0000e9e0: 6f20 6765 7420 696e 666f 726d 6174 696f  o get informatio
-0000e9f0: 6e20 666f 7220 616c 6c5c 6e65 7869 7374  n for all\nexist
-0000ea00: 696e 6720 7065 7273 6973 7465 6e74 2073  ing persistent s
-0000ea10: 7562 7363 7269 7074 696f 6e73 2e5c 6e5c  ubscriptions.\n\
-0000ea20: 6e54 6869 7320 6d65 7468 6f64 2074 616b  nThis method tak
-0000ea30: 6573 2061 6e20 6f70 7469 6f6e 616c 2060  es an optional `
-0000ea40: 7469 6d65 6f75 7460 2061 7267 756d 656e  timeout` argumen
-0000ea50: 742c 2074 6861 745c 6e69 7320 6578 7065  t, that\nis expe
-0000ea60: 6374 6564 2074 6f20 6265 2061 2050 7974  cted to be a Pyt
-0000ea70: 686f 6e20 6066 6c6f 6174 602c 2077 6869  hon `float`, whi
-0000ea80: 6368 2073 6574 7320 6120 6465 6164 6c69  ch sets a deadli
-0000ea90: 6e65 5c6e 666f 7220 7468 6520 636f 6d70  ne\nfor the comp
-0000eaa0: 6c65 7469 6f6e 206f 6620 7468 6520 6752  letion of the gR
-0000eab0: 5043 206f 7065 7261 7469 6f6e 2e5c 6e5c  PC operation.\n\
-0000eac0: 6e60 6060 7079 7468 6f6e 5c6e 7375 6273  n```python\nsubs
-0000ead0: 6372 6970 7469 6f6e 7320 3d20 636c 6965  criptions = clie
-0000eae0: 6e74 2e6c 6973 745f 7375 6273 6372 6970  nt.list_subscrip
-0000eaf0: 7469 6f6e 7328 295c 6e60 6060 5c6e 5c6e  tions()\n```\n\n
-0000eb00: 5468 6520 7265 7475 726e 6564 2076 616c  The returned val
-0000eb10: 7565 2069 7320 6120 6c69 7374 206f 6620  ue is a list of 
-0000eb20: 6053 7562 7363 7269 7074 696f 6e49 6e66  `SubscriptionInf
-0000eb30: 6f60 206f 626a 6563 7473 2e5c 6e5c 6e23  o` objects.\n\n#
-0000eb40: 2323 2044 656c 6574 6520 7375 6273 6372  ## Delete subscr
-0000eb50: 6970 7469 6f6e 5c6e 5c6e 5468 6520 6064  iption\n\nThe `d
-0000eb60: 656c 6574 655f 7375 6273 6372 6970 7469  elete_subscripti
-0000eb70: 6f6e 2829 6020 6d65 7468 6f64 2063 616e  on()` method can
-0000eb80: 2062 6520 7573 6564 2074 6f20 6465 6c65   be used to dele
-0000eb90: 7465 2061 2070 6572 7369 7374 656e 745c  te a persistent\
-0000eba0: 6e73 7562 7363 7269 7074 696f 6e2e 5c6e  nsubscription.\n
-0000ebb0: 5c6e 5468 6973 206d 6574 686f 6420 6861  \nThis method ha
-0000ebc0: 7320 6f6e 6520 7265 7175 6972 6564 2061  s one required a
-0000ebd0: 7267 756d 656e 742c 2060 6772 6f75 705f  rgument, `group_
-0000ebe0: 6e61 6d65 602c 2077 6869 6368 5c6e 7368  name`, which\nsh
-0000ebf0: 6f75 6c64 206d 6174 6368 2074 6865 2076  ould match the v
-0000ec00: 616c 7565 206f 6620 6172 6775 6d65 6e74  alue of argument
-0000ec10: 2075 7365 6420 7768 656e 2063 616c 6c69   used when calli
-0000ec20: 6e67 2060 6372 6561 7465 5f73 7562 7363  ng `create_subsc
-0000ec30: 7269 7074 696f 6e28 2960 2e5c 6e5c 6e54  ription()`.\n\nT
-0000ec40: 6869 7320 6d65 7468 6f64 2061 6c73 6f20  his method also 
-0000ec50: 7461 6b65 7320 616e 206f 7074 696f 6e61  takes an optiona
-0000ec60: 6c20 6074 696d 656f 7574 6020 6172 6775  l `timeout` argu
-0000ec70: 6d65 6e74 2c20 7468 6174 5c6e 6973 2065  ment, that\nis e
-0000ec80: 7870 6563 7465 6420 746f 2062 6520 6120  xpected to be a 
-0000ec90: 5079 7468 6f6e 2060 666c 6f61 7460 2c20  Python `float`, 
-0000eca0: 7768 6963 6820 7365 7473 2061 2064 6561  which sets a dea
-0000ecb0: 646c 696e 655c 6e66 6f72 2074 6865 2063  dline\nfor the c
-0000ecc0: 6f6d 706c 6574 696f 6e20 6f66 2074 6865  ompletion of the
-0000ecd0: 2067 5250 4320 6f70 6572 6174 696f 6e2e   gRPC operation.
-0000ece0: 5c6e 5c6e 6060 6070 7974 686f 6e5c 6e63  \n\n```python\nc
-0000ecf0: 6c69 656e 742e 6465 6c65 7465 5f73 7562  lient.delete_sub
-0000ed00: 7363 7269 7074 696f 6e28 5c6e 2020 2020  scription(\n    
-0000ed10: 6772 6f75 705f 6e61 6d65 3d67 726f 7570  group_name=group
-0000ed20: 5f6e 616d 652c 5c6e 295c 6e60 6060 5c6e  _name,\n)\n```\n
-0000ed30: 5c6e 2323 2320 4372 6561 7465 2073 7472  \n### Create str
-0000ed40: 6561 6d20 7375 6273 6372 6970 7469 6f6e  eam subscription
-0000ed50: 5c6e 5c6e 5468 6520 6063 7265 6174 655f  \n\nThe `create_
-0000ed60: 7374 7265 616d 5f73 7562 7363 7269 7074  stream_subscript
-0000ed70: 696f 6e28 2960 206d 6574 686f 6420 6361  ion()` method ca
-0000ed80: 6e20 6265 2075 7365 6420 746f 2063 7265  n be used to cre
-0000ed90: 6174 6520 6120 7065 7273 6973 7465 6e74  ate a persistent
-0000eda0: 5c6e 7375 6273 6372 6970 7469 6f6e 2066  \nsubscription f
-0000edb0: 6f72 2061 2073 7472 6561 6d2e 5c6e 5c6e  or a stream.\n\n
-0000edc0: 5468 6973 206d 6574 686f 6420 6861 7320  This method has 
-0000edd0: 7477 6f20 7265 7175 6972 6564 2061 7267  two required arg
-0000ede0: 756d 656e 7473 2c20 6067 726f 7570 5f6e  uments, `group_n
-0000edf0: 616d 6560 2061 6e64 2060 7374 7265 616d  ame` and `stream
-0000ee00: 5f6e 616d 6560 2e20 5468 655c 6e60 6772  _name`. The\n`gr
-0000ee10: 6f75 705f 6e61 6d65 6020 6172 6775 6d65  oup_name` argume
-0000ee20: 6e74 206e 616d 6573 2074 6865 2067 726f  nt names the gro
-0000ee30: 7570 206f 6620 636f 6e73 756d 6572 7320  up of consumers 
-0000ee40: 7468 6174 2077 696c 6c20 7265 6365 6976  that will receiv
-0000ee50: 6520 6576 656e 7473 5c6e 6672 6f6d 2074  e events\nfrom t
-0000ee60: 6869 7320 7375 6273 6372 6970 7469 6f6e  his subscription
-0000ee70: 2e20 5468 6520 6073 7472 6561 6d5f 6e61  . The `stream_na
-0000ee80: 6d65 6020 6172 6775 6d65 6e74 2073 7065  me` argument spe
-0000ee90: 6369 6669 6573 2077 6869 6368 2073 7472  cifies which str
-0000eea0: 6561 6d5c 6e74 6865 2073 7562 7363 7269  eam\nthe subscri
-0000eeb0: 7074 696f 6e20 7769 6c6c 2066 6f6c 6c6f  ption will follo
-0000eec0: 772e 2054 6865 2076 616c 7565 7320 6f66  w. The values of
-0000eed0: 2062 6f74 6820 7468 6573 6520 6172 6775   both these argu
-0000eee0: 6d65 6e74 7320 6172 6520 6578 7065 6374  ments are expect
-0000eef0: 6564 5c6e 746f 2062 6520 5079 7468 6f6e  ed\nto be Python
-0000ef00: 2060 7374 7260 206f 626a 6563 7473 2e5c   `str` objects.\
-0000ef10: 6e5c 6e54 6869 7320 6d65 7468 6f64 2068  n\nThis method h
-0000ef20: 6173 2061 6e20 6f70 7469 6f6e 616c 2060  as an optional `
-0000ef30: 7374 7265 616d 5f70 6f73 6974 696f 6e60  stream_position`
-0000ef40: 2061 7267 756d 656e 742c 2077 6869 6368   argument, which
-0000ef50: 2073 7065 6369 6669 6573 2061 5c6e 7374   specifies a\nst
-0000ef60: 7265 616d 2070 6f73 6974 696f 6e20 6672  ream position fr
-0000ef70: 6f6d 2077 6869 6368 2074 6f20 7375 6273  om which to subs
-0000ef80: 6372 6962 652e 2054 6865 2072 6563 6f72  cribe. The recor
-0000ef90: 6465 6420 6576 656e 7420 6174 2074 6869  ded event at thi
-0000efa0: 7320 7374 7265 616d 5c6e 706f 7369 7469  s stream\npositi
-0000efb0: 6f6e 2077 696c 6c20 6265 2072 6563 6569  on will be recei
-0000efc0: 7665 6420 7768 656e 2072 6561 6469 6e67  ved when reading
-0000efd0: 2074 6865 2073 7562 7363 7269 7074 696f   the subscriptio
-0000efe0: 6e2e 5c6e 5c6e 5468 6973 206d 6574 686f  n.\n\nThis metho
-0000eff0: 6420 6861 7320 616e 206f 7074 696f 6e61  d has an optiona
-0000f000: 6c20 6066 726f 6d5f 656e 6460 2061 7267  l `from_end` arg
-0000f010: 756d 656e 742c 2077 6869 6368 2069 7320  ument, which is 
-0000f020: 6120 5079 7468 6f6e 2060 626f 6f6c 602e  a Python `bool`.
-0000f030: 5c6e 4279 2064 6566 6175 6c74 2c20 7468  \nBy default, th
-0000f040: 6520 7661 6c75 6520 6f66 2074 6869 7320  e value of this 
-0000f050: 6172 6775 6d65 6e74 2069 7320 4661 6c73  argument is Fals
-0000f060: 652e 2049 6620 7468 6973 2061 7267 756d  e. If this argum
-0000f070: 656e 7420 6973 2073 6574 5c6e 746f 2061  ent is set\nto a
-0000f080: 2054 7275 6520 7661 6c75 652c 2072 6561   True value, rea
-0000f090: 6469 6e67 2066 726f 6d20 7468 6520 7375  ding from the su
-0000f0a0: 6273 6372 6970 7469 6f6e 2077 696c 6c20  bscription will 
-0000f0b0: 7265 6365 6976 6520 6f6e 6c79 2065 7665  receive only eve
-0000f0c0: 6e74 735c 6e72 6563 6f72 6465 6420 6166  nts\nrecorded af
-0000f0d0: 7465 7220 7468 6520 7375 6273 6372 6970  ter the subscrip
-0000f0e0: 7469 6f6e 2077 6173 2063 7265 6174 6564  tion was created
-0000f0f0: 2e20 5468 6174 2069 732c 2069 7420 6973  . That is, it is
-0000f100: 206e 6f74 2069 6e63 6c75 7369 7665 5c6e   not inclusive\n
-0000f110: 6f66 2074 6865 2063 7572 7265 6e74 2073  of the current s
-0000f120: 7472 6561 6d20 706f 7369 7469 6f6e 2e5c  tream position.\
-0000f130: 6e5c 6e54 6869 7320 6d65 7468 6f64 2061  n\nThis method a
-0000f140: 6c73 6f20 7461 6b65 7320 616e 206f 7074  lso takes an opt
-0000f150: 696f 6e61 6c20 6074 696d 656f 7574 6020  ional `timeout` 
-0000f160: 6172 6775 6d65 6e74 2c20 7468 6174 5c6e  argument, that\n
-0000f170: 6973 2065 7870 6563 7465 6420 746f 2062  is expected to b
-0000f180: 6520 6120 5079 7468 6f6e 2060 666c 6f61  e a Python `floa
-0000f190: 7460 2c20 7768 6963 6820 7365 7473 2061  t`, which sets a
-0000f1a0: 2064 6561 646c 696e 655c 6e66 6f72 2074   deadline\nfor t
-0000f1b0: 6865 2063 6f6d 706c 6574 696f 6e20 6f66  he completion of
-0000f1c0: 2074 6865 2067 5250 4320 6f70 6572 6174   the gRPC operat
-0000f1d0: 696f 6e2e 5c6e 5c6e 5468 6973 206d 6574  ion.\n\nThis met
-0000f1e0: 686f 6420 646f 6573 206e 6f74 2072 6574  hod does not ret
-0000f1f0: 7572 6e20 6120 7661 6c75 652e 2045 7665  urn a value. Eve
-0000f200: 6e74 7320 6361 6e20 6265 2072 6563 6569  nts can be recei
-0000f210: 7665 6420 6279 2069 7465 7261 7469 6e67  ved by iterating
-0000f220: 5c6e 6f76 6572 2074 6865 2076 616c 7565  \nover the value
-0000f230: 2072 6574 7572 6e65 6420 6279 2063 616c   returned by cal
-0000f240: 6c69 6e67 2060 7265 6164 5f73 7472 6561  ling `read_strea
-0000f250: 6d5f 7375 6273 6372 6970 7469 6f6e 2829  m_subscription()
-0000f260: 6020 2873 6565 2062 656c 6f77 292e 5c6e  ` (see below).\n
-0000f270: 5c6e 5468 6520 6578 616d 706c 6520 6265  \nThe example be
-0000f280: 6c6f 7720 6372 6561 7465 7320 6120 7065  low creates a pe
-0000f290: 7273 6973 7465 6e74 2073 7472 6561 6d20  rsistent stream 
-0000f2a0: 7375 6273 6372 6970 7469 6f6e 2066 726f  subscription fro
-0000f2b0: 6d20 7468 6520 7374 6172 7420 6f66 2074  m the start of t
-0000f2c0: 6865 2073 7472 6561 6d2e 5c6e 5c6e 6060  he stream.\n\n``
-0000f2d0: 6070 7974 686f 6e5c 6e23 2043 7265 6174  `python\n# Creat
-0000f2e0: 6520 6120 7065 7273 6973 7465 6e74 2073  e a persistent s
-0000f2f0: 7472 6561 6d20 7375 6273 6372 6970 7469  tream subscripti
-0000f300: 6f6e 2066 726f 6d20 7374 6172 7420 6f66  on from start of
-0000f310: 2074 6865 2073 7472 6561 6d2e 5c6e 6772   the stream.\ngr
-0000f320: 6f75 705f 6e61 6d65 3120 3d20 6622 6772  oup_name1 = f"gr
-0000f330: 6f75 702d 7b75 7569 6434 2829 7d22 5c6e  oup-{uuid4()}"\n
-0000f340: 636c 6965 6e74 2e63 7265 6174 655f 7374  client.create_st
-0000f350: 7265 616d 5f73 7562 7363 7269 7074 696f  ream_subscriptio
-0000f360: 6e28 5c6e 2020 2020 6772 6f75 705f 6e61  n(\n    group_na
-0000f370: 6d65 3d67 726f 7570 5f6e 616d 6531 2c5c  me=group_name1,\
-0000f380: 6e20 2020 2073 7472 6561 6d5f 6e61 6d65  n    stream_name
-0000f390: 3d73 7472 6561 6d5f 6e61 6d65 322c 5c6e  =stream_name2,\n
-0000f3a0: 295c 6e60 6060 5c6e 5c6e 5468 6520 6578  )\n```\n\nThe ex
-0000f3b0: 616d 706c 6520 6265 6c6f 7720 6372 6561  ample below crea
-0000f3c0: 7465 7320 6120 7065 7273 6973 7465 6e74  tes a persistent
-0000f3d0: 2073 7472 6561 6d20 7375 6273 6372 6970   stream subscrip
-0000f3e0: 7469 6f6e 2066 726f 6d20 6120 7374 7265  tion from a stre
-0000f3f0: 616d 2070 6f73 6974 696f 6e2e 5c6e 5c6e  am position.\n\n
-0000f400: 6060 6070 7974 686f 6e5c 6e23 2043 7265  ```python\n# Cre
-0000f410: 6174 6520 6120 7065 7273 6973 7465 6e74  ate a persistent
-0000f420: 2073 7472 6561 6d20 7375 6273 6372 6970   stream subscrip
-0000f430: 7469 6f6e 2066 726f 6d20 6120 7374 7265  tion from a stre
-0000f440: 616d 2070 6f73 6974 696f 6e2e 5c6e 6772  am position.\ngr
-0000f450: 6f75 705f 6e61 6d65 3220 3d20 6622 6772  oup_name2 = f"gr
-0000f460: 6f75 702d 7b75 7569 6434 2829 7d22 5c6e  oup-{uuid4()}"\n
-0000f470: 636c 6965 6e74 2e63 7265 6174 655f 7374  client.create_st
-0000f480: 7265 616d 5f73 7562 7363 7269 7074 696f  ream_subscriptio
-0000f490: 6e28 5c6e 2020 2020 6772 6f75 705f 6e61  n(\n    group_na
-0000f4a0: 6d65 3d67 726f 7570 5f6e 616d 6532 2c5c  me=group_name2,\
-0000f4b0: 6e20 2020 2073 7472 6561 6d5f 6e61 6d65  n    stream_name
-0000f4c0: 3d73 7472 6561 6d5f 6e61 6d65 322c 5c6e  =stream_name2,\n
-0000f4d0: 2020 2020 7374 7265 616d 5f70 6f73 6974      stream_posit
-0000f4e0: 696f 6e3d 325c 6e29 5c6e 6060 605c 6e5c  ion=2\n)\n```\n\
-0000f4f0: 6e54 6865 2065 7861 6d70 6c65 2062 656c  nThe example bel
-0000f500: 6f77 2063 7265 6174 6573 2061 2070 6572  ow creates a per
-0000f510: 7369 7374 656e 7420 7374 7265 616d 2073  sistent stream s
-0000f520: 7562 7363 7269 7074 696f 6e20 6672 6f6d  ubscription from
-0000f530: 2074 6865 2065 6e64 206f 6620 7468 6520   the end of the 
-0000f540: 7374 7265 616d 2e5c 6e5c 6e60 6060 7079  stream.\n\n```py
-0000f550: 7468 6f6e 5c6e 2320 4372 6561 7465 2061  thon\n# Create a
-0000f560: 2070 6572 7369 7374 656e 7420 7374 7265   persistent stre
-0000f570: 616d 2073 7562 7363 7269 7074 696f 6e20  am subscription 
-0000f580: 6672 6f6d 2065 6e64 206f 6620 7468 6520  from end of the 
-0000f590: 7374 7265 616d 2e5c 6e67 726f 7570 5f6e  stream.\ngroup_n
-0000f5a0: 616d 6533 203d 2066 2267 726f 7570 2d7b  ame3 = f"group-{
-0000f5b0: 7575 6964 3428 297d 225c 6e63 6c69 656e  uuid4()}"\nclien
-0000f5c0: 742e 6372 6561 7465 5f73 7472 6561 6d5f  t.create_stream_
-0000f5d0: 7375 6273 6372 6970 7469 6f6e 285c 6e20  subscription(\n 
-0000f5e0: 2020 2067 726f 7570 5f6e 616d 653d 6772     group_name=gr
-0000f5f0: 6f75 705f 6e61 6d65 332c 5c6e 2020 2020  oup_name3,\n    
-0000f600: 7374 7265 616d 5f6e 616d 653d 7374 7265  stream_name=stre
-0000f610: 616d 5f6e 616d 6532 2c5c 6e20 2020 2066  am_name2,\n    f
-0000f620: 726f 6d5f 656e 643d 5472 7565 5c6e 295c  rom_end=True\n)\
-0000f630: 6e60 6060 5c6e 5c6e 2323 2320 5265 6164  n```\n\n### Read
-0000f640: 2073 7472 6561 6d20 7375 6273 6372 6970   stream subscrip
-0000f650: 7469 6f6e 5c6e 5c6e 5468 6520 6072 6561  tion\n\nThe `rea
-0000f660: 645f 7374 7265 616d 5f73 7562 7363 7269  d_stream_subscri
-0000f670: 7074 696f 6e28 2960 206d 6574 686f 6420  ption()` method 
-0000f680: 6361 6e20 6265 2075 7365 6420 746f 2063  can be used to c
-0000f690: 7265 6174 6520 6120 7065 7273 6973 7465  reate a persiste
-0000f6a0: 6e74 5c6e 7375 6273 6372 6970 7469 6f6e  nt\nsubscription
-0000f6b0: 2066 6f72 2061 2073 7472 6561 6d2e 5c6e   for a stream.\n
-0000f6c0: 5c6e 5468 6973 206d 6574 686f 6420 6861  \nThis method ha
-0000f6d0: 7320 7477 6f20 7265 7175 6972 6564 2061  s two required a
-0000f6e0: 7267 756d 656e 7473 2c20 6067 726f 7570  rguments, `group
-0000f6f0: 5f6e 616d 6560 2061 6e64 2060 7374 7265  _name` and `stre
-0000f700: 616d 5f6e 616d 6560 2c20 7768 6963 685c  am_name`, which\
-0000f710: 6e73 686f 756c 6420 6d61 7463 6820 7468  nshould match th
-0000f720: 6520 7661 6c75 6573 206f 6620 6172 6775  e values of argu
-0000f730: 6d65 6e74 7320 7573 6564 2077 6865 6e20  ments used when 
-0000f740: 6361 6c6c 696e 6720 6063 7265 6174 655f  calling `create_
-0000f750: 7374 7265 616d 5f73 7562 7363 7269 7074  stream_subscript
-0000f760: 696f 6e28 2960 2e5c 6e5c 6e54 6869 7320  ion()`.\n\nThis 
-0000f770: 6d65 7468 6f64 2061 6c73 6f20 7461 6b65  method also take
-0000f780: 7320 616e 206f 7074 696f 6e61 6c20 6074  s an optional `t
-0000f790: 696d 656f 7574 6020 6172 6775 6d65 6e74  imeout` argument
-0000f7a0: 2c20 7468 6174 5c6e 6973 2065 7870 6563  , that\nis expec
-0000f7b0: 7465 6420 746f 2062 6520 6120 5079 7468  ted to be a Pyth
-0000f7c0: 6f6e 2060 666c 6f61 7460 2c20 7768 6963  on `float`, whic
-0000f7d0: 6820 7365 7473 2061 2064 6561 646c 696e  h sets a deadlin
-0000f7e0: 655c 6e66 6f72 2074 6865 2063 6f6d 706c  e\nfor the compl
-0000f7f0: 6574 696f 6e20 6f66 2074 6865 2067 5250  etion of the gRP
-0000f800: 4320 6f70 6572 6174 696f 6e2e 5c6e 5c6e  C operation.\n\n
-0000f810: 4a75 7374 206c 696b 6520 6072 6561 645f  Just like `read_
-0000f820: 7375 6273 6372 6970 7469 6f6e 602c 2074  subscription`, t
-0000f830: 6869 7320 6d65 7468 6f64 2072 6574 7572  his method retur
-0000f840: 6e73 2061 2032 2d74 7570 6c65 3a20 6120  ns a 2-tuple: a 
-0000f850: 2272 6561 6420 7265 7175 6573 7422 206f  "read request" o
-0000f860: 626a 6563 745c 6e61 6e64 2061 2022 7265  bject\nand a "re
-0000f870: 6164 2072 6573 706f 6e73 6522 206f 626a  ad response" obj
-0000f880: 6563 742e 5c6e 5c6e 6060 6070 7974 686f  ect.\n\n```pytho
-0000f890: 6e5c 6e72 6561 645f 7265 712c 2072 6561  n\nread_req, rea
-0000f8a0: 645f 7265 7370 203d 2063 6c69 656e 742e  d_resp = client.
-0000f8b0: 7265 6164 5f73 7472 6561 6d5f 7375 6273  read_stream_subs
-0000f8c0: 6372 6970 7469 6f6e 285c 6e20 2020 2067  cription(\n    g
-0000f8d0: 726f 7570 5f6e 616d 653d 6772 6f75 705f  roup_name=group_
-0000f8e0: 6e61 6d65 312c 5c6e 2020 2020 7374 7265  name1,\n    stre
-0000f8f0: 616d 5f6e 616d 653d 7374 7265 616d 5f6e  am_name=stream_n
-0000f900: 616d 6532 2c5c 6e29 5c6e 6060 605c 6e5c  ame2,\n)\n```\n\
-0000f910: 6e54 6865 2065 7861 6d70 6c65 2062 656c  nThe example bel
-0000f920: 6f77 2069 7465 7261 7465 7320 6f76 6572  ow iterates over
-0000f930: 2074 6865 2022 7265 6164 2072 6573 706f   the "read respo
-0000f940: 6e73 6522 206f 626a 6563 742c 2061 6e64  nse" object, and
-0000f950: 2063 616c 6c73 2060 6163 6b28 2960 5c6e   calls `ack()`\n
-0000f960: 6f6e 2074 6865 2022 7265 6164 2072 6573  on the "read res
-0000f970: 706f 6e73 6522 206f 626a 6563 742e 2054  ponse" object. T
-0000f980: 6865 2066 6f72 206c 6f6f 7020 6272 6561  he for loop brea
-0000f990: 6b73 2077 6865 6e20 7765 2068 6176 6520  ks when we have 
-0000f9a0: 7265 6365 6976 6564 5c6e 7468 6520 6c61  received\nthe la
-0000f9b0: 7374 2065 7665 6e74 2069 6e20 7468 6520  st event in the 
-0000f9c0: 7374 7265 616d 2c20 736f 2074 6861 7420  stream, so that 
-0000f9d0: 7765 2063 616e 2066 696e 6973 6820 7468  we can finish th
-0000f9e0: 6520 6578 616d 706c 6573 2069 6e20 7468  e examples in th
-0000f9f0: 6973 5c6e 646f 6375 6d65 6e74 6174 696f  is\ndocumentatio
-0000fa00: 6e2e 5c6e 5c6e 6060 6070 7974 686f 6e5c  n.\n\n```python\
-0000fa10: 6e65 7665 6e74 7320 3d20 5b5d 5c6e 666f  nevents = []\nfo
-0000fa20: 7220 6576 656e 7420 696e 2072 6561 645f  r event in read_
-0000fa30: 7265 7370 3a5c 6e20 2020 2065 7665 6e74  resp:\n    event
-0000fa40: 732e 6170 7065 6e64 2865 7665 6e74 295c  s.append(event)\
-0000fa50: 6e5c 6e20 2020 2023 2041 636b 6e6f 776c  n\n    # Acknowl
-0000fa60: 6564 6765 2074 6865 2072 6563 6569 7665  edge the receive
-0000fa70: 6420 6576 656e 742e 5c6e 2020 2020 7265  d event.\n    re
-0000fa80: 6164 5f72 6571 2e61 636b 2865 7665 6e74  ad_req.ack(event
-0000fa90: 5f69 643d 6576 656e 742e 6964 295c 6e5c  _id=event.id)\n\
-0000faa0: 6e20 2020 2023 2042 7265 616b 2077 6865  n    # Break whe
-0000fab0: 6e20 7468 6520 6c61 7374 2065 7665 6e74  n the last event
-0000fac0: 2068 6173 2062 6565 6e20 7265 6365 6976   has been receiv
-0000fad0: 6564 2e5c 6e20 2020 2069 6620 6576 656e  ed.\n    if even
-0000fae0: 742e 6964 203d 3d20 6576 656e 7431 312e  t.id == event11.
-0000faf0: 6964 3a5c 6e20 2020 2020 2020 2062 7265  id:\n        bre
-0000fb00: 616b 5c6e 6060 605c 6e5c 6e57 6520 6361  ak\n```\n\nWe ca
-0000fb10: 6e20 6368 6563 6b20 7765 2072 6563 6569  n check we recei
-0000fb20: 7665 6420 616c 6c20 7468 6520 6576 656e  ved all the even
-0000fb30: 7473 2074 6861 7420 7765 7265 2061 7070  ts that were app
-0000fb40: 656e 6465 6420 746f 2060 7374 7265 616d  ended to `stream
-0000fb50: 5f6e 616d 6532 605c 6e69 6e20 7468 6520  _name2`\nin the 
-0000fb60: 6578 616d 706c 6573 2061 626f 7665 2e5c  examples above.\
-0000fb70: 6e5c 6e60 6060 7079 7468 6f6e 5c6e 6173  n\n```python\nas
-0000fb80: 7365 7274 206c 656e 2865 7665 6e74 7329  sert len(events)
-0000fb90: 203d 3d20 345c 6e61 7373 6572 7420 6576   == 4\nassert ev
-0000fba0: 656e 7473 5b30 5d2e 7374 7265 616d 5f6e  ents[0].stream_n
-0000fbb0: 616d 6520 3d3d 2073 7472 6561 6d5f 6e61  ame == stream_na
-0000fbc0: 6d65 325c 6e61 7373 6572 7420 6576 656e  me2\nassert even
-0000fbd0: 7473 5b30 5d2e 6964 203d 3d20 6576 656e  ts[0].id == even
-0000fbe0: 7434 2e69 645c 6e61 7373 6572 7420 6576  t4.id\nassert ev
-0000fbf0: 656e 7473 5b31 5d2e 7374 7265 616d 5f6e  ents[1].stream_n
-0000fc00: 616d 6520 3d3d 2073 7472 6561 6d5f 6e61  ame == stream_na
-0000fc10: 6d65 325c 6e61 7373 6572 7420 6576 656e  me2\nassert even
-0000fc20: 7473 5b31 5d2e 6964 203d 3d20 6576 656e  ts[1].id == even
-0000fc30: 7435 2e69 645c 6e61 7373 6572 7420 6576  t5.id\nassert ev
-0000fc40: 656e 7473 5b32 5d2e 7374 7265 616d 5f6e  ents[2].stream_n
-0000fc50: 616d 6520 3d3d 2073 7472 6561 6d5f 6e61  ame == stream_na
-0000fc60: 6d65 325c 6e61 7373 6572 7420 6576 656e  me2\nassert even
-0000fc70: 7473 5b32 5d2e 6964 203d 3d20 6576 656e  ts[2].id == even
-0000fc80: 7436 2e69 645c 6e61 7373 6572 7420 6576  t6.id\nassert ev
-0000fc90: 656e 7473 5b33 5d2e 7374 7265 616d 5f6e  ents[3].stream_n
-0000fca0: 616d 6520 3d3d 2073 7472 6561 6d5f 6e61  ame == stream_na
-0000fcb0: 6d65 325c 6e61 7373 6572 7420 6576 656e  me2\nassert even
-0000fcc0: 7473 5b33 5d2e 6964 203d 3d20 6576 656e  ts[3].id == even
-0000fcd0: 7431 312e 6964 5c6e 6060 605c 6e5c 6e23  t11.id\n```\n\n#
-0000fce0: 2323 2047 6574 2073 7472 6561 6d20 7375  ## Get stream su
-0000fcf0: 6273 6372 6970 7469 6f6e 2069 6e66 6f5c  bscription info\
-0000fd00: 6e5c 6e54 6865 2060 6765 745f 7374 7265  n\nThe `get_stre
-0000fd10: 616d 5f73 7562 7363 7269 7074 696f 6e5f  am_subscription_
-0000fd20: 696e 666f 2829 6020 6d65 7468 6f64 2063  info()` method c
-0000fd30: 616e 2062 6520 7573 6564 2074 6f20 6765  an be used to ge
-0000fd40: 7420 696e 666f 726d 6174 696f 6e20 666f  t information fo
-0000fd50: 7220 615c 6e70 6572 7369 7374 656e 7420  r a\npersistent 
-0000fd60: 7375 6273 6372 6970 7469 6f6e 2066 6f72  subscription for
-0000fd70: 2061 2073 7472 6561 6d2e 5c6e 5c6e 5468   a stream.\n\nTh
-0000fd80: 6973 206d 6574 686f 6420 6861 7320 7477  is method has tw
-0000fd90: 6f20 7265 7175 6972 6564 2061 7267 756d  o required argum
-0000fda0: 656e 7473 2c20 6067 726f 7570 5f6e 616d  ents, `group_nam
-0000fdb0: 6560 2061 6e64 2060 7374 7265 616d 5f6e  e` and `stream_n
-0000fdc0: 616d 6560 2c20 7768 6963 685c 6e73 686f  ame`, which\nsho
-0000fdd0: 756c 6420 6d61 7463 6820 7468 6520 7661  uld match the va
-0000fde0: 6c75 6573 206f 6620 6172 6775 6d65 6e74  lues of argument
-0000fdf0: 7320 7573 6564 2077 6865 6e20 6361 6c6c  s used when call
-0000fe00: 696e 6720 6063 7265 6174 655f 7374 7265  ing `create_stre
-0000fe10: 616d 5f73 7562 7363 7269 7074 696f 6e28  am_subscription(
-0000fe20: 2960 2e5c 6e5c 6e54 6869 7320 6d65 7468  )`.\n\nThis meth
-0000fe30: 6f64 2061 6c73 6f20 7461 6b65 7320 616e  od also takes an
-0000fe40: 206f 7074 696f 6e61 6c20 6074 696d 656f   optional `timeo
-0000fe50: 7574 6020 6172 6775 6d65 6e74 2c20 7468  ut` argument, th
-0000fe60: 6174 5c6e 6973 2065 7870 6563 7465 6420  at\nis expected 
-0000fe70: 746f 2062 6520 6120 5079 7468 6f6e 2060  to be a Python `
-0000fe80: 666c 6f61 7460 2c20 7768 6963 6820 7365  float`, which se
-0000fe90: 7473 2061 2064 6561 646c 696e 655c 6e66  ts a deadline\nf
-0000fea0: 6f72 2074 6865 2063 6f6d 706c 6574 696f  or the completio
-0000feb0: 6e20 6f66 2074 6865 2067 5250 4320 6f70  n of the gRPC op
-0000fec0: 6572 6174 696f 6e2e 5c6e 5c6e 6060 6070  eration.\n\n```p
-0000fed0: 7974 686f 6e5c 6e73 7562 7363 7269 7074  ython\nsubscript
-0000fee0: 696f 6e5f 696e 666f 203d 2063 6c69 656e  ion_info = clien
-0000fef0: 742e 6765 745f 7374 7265 616d 5f73 7562  t.get_stream_sub
-0000ff00: 7363 7269 7074 696f 6e5f 696e 666f 285c  scription_info(\
-0000ff10: 6e20 2020 2067 726f 7570 5f6e 616d 653d  n    group_name=
-0000ff20: 6772 6f75 705f 6e61 6d65 312c 5c6e 2020  group_name1,\n  
-0000ff30: 2020 7374 7265 616d 5f6e 616d 653d 7374    stream_name=st
-0000ff40: 7265 616d 5f6e 616d 6532 2c5c 6e29 5c6e  ream_name2,\n)\n
-0000ff50: 6060 605c 6e5c 6e54 6865 2072 6574 7572  ```\n\nThe retur
-0000ff60: 6e65 6420 7661 6c75 6520 6973 2061 2060  ned value is a `
-0000ff70: 5375 6273 6372 6970 7469 6f6e 496e 666f  SubscriptionInfo
-0000ff80: 6020 6f62 6a65 6374 2e5c 6e5c 6e23 2323  ` object.\n\n###
-0000ff90: 204c 6973 7420 7374 7265 616d 2073 7562   List stream sub
-0000ffa0: 7363 7269 7074 696f 6e73 5c6e 5c6e 5468  scriptions\n\nTh
-0000ffb0: 6520 606c 6973 745f 7374 7265 616d 5f73  e `list_stream_s
-0000ffc0: 7562 7363 7269 7074 696f 6e73 2829 6020  ubscriptions()` 
-0000ffd0: 6d65 7468 6f64 2063 616e 2062 6520 7573  method can be us
-0000ffe0: 6564 2074 6f20 6765 7420 696e 666f 726d  ed to get inform
-0000fff0: 6174 696f 6e20 666f 7220 616c 6c5c 6e74  ation for all\nt
-00010000: 6865 2070 6572 7369 7374 656e 7420 7375  he persistent su
-00010010: 6273 6372 6970 7469 6f6e 7320 666f 7220  bscriptions for 
-00010020: 6120 7374 7265 616d 2e5c 6e5c 6e54 6869  a stream.\n\nThi
-00010030: 7320 6d65 7468 6f64 2068 6173 206f 6e65  s method has one
-00010040: 2072 6571 7569 7265 6420 6172 6775 6d65   required argume
-00010050: 6e74 2c20 6073 7472 6561 6d5f 6e61 6d65  nt, `stream_name
-00010060: 602e 5c6e 5c6e 5468 6973 206d 6574 686f  `.\n\nThis metho
-00010070: 6420 616c 736f 2074 616b 6573 2061 6e20  d also takes an 
-00010080: 6f70 7469 6f6e 616c 2060 7469 6d65 6f75  optional `timeou
-00010090: 7460 2061 7267 756d 656e 742c 2074 6861  t` argument, tha
-000100a0: 745c 6e69 7320 6578 7065 6374 6564 2074  t\nis expected t
-000100b0: 6f20 6265 2061 2050 7974 686f 6e20 6066  o be a Python `f
-000100c0: 6c6f 6174 602c 2077 6869 6368 2073 6574  loat`, which set
-000100d0: 7320 6120 6465 6164 6c69 6e65 5c6e 666f  s a deadline\nfo
-000100e0: 7220 7468 6520 636f 6d70 6c65 7469 6f6e  r the completion
-000100f0: 206f 6620 7468 6520 6752 5043 206f 7065   of the gRPC ope
-00010100: 7261 7469 6f6e 2e5c 6e5c 6e60 6060 7079  ration.\n\n```py
-00010110: 7468 6f6e 5c6e 7375 6273 6372 6970 7469  thon\nsubscripti
-00010120: 6f6e 7320 3d20 636c 6965 6e74 2e6c 6973  ons = client.lis
-00010130: 745f 7374 7265 616d 5f73 7562 7363 7269  t_stream_subscri
-00010140: 7074 696f 6e73 285c 6e20 2020 2073 7472  ptions(\n    str
-00010150: 6561 6d5f 6e61 6d65 3d73 7472 6561 6d5f  eam_name=stream_
-00010160: 6e61 6d65 322c 5c6e 295c 6e60 6060 5c6e  name2,\n)\n```\n
-00010170: 5c6e 5468 6520 7265 7475 726e 6564 2076  \nThe returned v
-00010180: 616c 7565 2069 7320 6120 6c69 7374 206f  alue is a list o
-00010190: 6620 6053 7562 7363 7269 7074 696f 6e49  f `SubscriptionI
-000101a0: 6e66 6f60 206f 626a 6563 7473 2e5c 6e5c  nfo` objects.\n\
-000101b0: 6e23 2323 2044 656c 6574 6520 7374 7265  n### Delete stre
-000101c0: 616d 2073 7562 7363 7269 7074 696f 6e5c  am subscription\
-000101d0: 6e5c 6e54 6865 2060 6465 6c65 7465 5f73  n\nThe `delete_s
-000101e0: 7472 6561 6d5f 7375 6273 6372 6970 7469  tream_subscripti
-000101f0: 6f6e 2829 6020 6d65 7468 6f64 2063 616e  on()` method can
-00010200: 2062 6520 7573 6564 2074 6f20 6465 6c65   be used to dele
-00010210: 7465 2061 2070 6572 7369 7374 656e 745c  te a persistent\
-00010220: 6e73 7562 7363 7269 7074 696f 6e20 666f  nsubscription fo
-00010230: 7220 6120 7374 7265 616d 2e5c 6e5c 6e54  r a stream.\n\nT
-00010240: 6869 7320 6d65 7468 6f64 2068 6173 2074  his method has t
-00010250: 776f 2072 6571 7569 7265 6420 6172 6775  wo required argu
-00010260: 6d65 6e74 732c 2060 6772 6f75 705f 6e61  ments, `group_na
-00010270: 6d65 6020 616e 6420 6073 7472 6561 6d5f  me` and `stream_
-00010280: 6e61 6d65 602c 2077 6869 6368 5c6e 7368  name`, which\nsh
-00010290: 6f75 6c64 206d 6174 6368 2074 6865 2076  ould match the v
-000102a0: 616c 7565 7320 6f66 2061 7267 756d 656e  alues of argumen
-000102b0: 7473 2075 7365 6420 7768 656e 2063 616c  ts used when cal
-000102c0: 6c69 6e67 2060 6372 6561 7465 5f73 7472  ling `create_str
-000102d0: 6561 6d5f 7375 6273 6372 6970 7469 6f6e  eam_subscription
-000102e0: 2829 602e 5c6e 5c6e 5468 6973 206d 6574  ()`.\n\nThis met
-000102f0: 686f 6420 616c 736f 2074 616b 6573 2061  hod also takes a
-00010300: 6e20 6f70 7469 6f6e 616c 2060 7469 6d65  n optional `time
-00010310: 6f75 7460 2061 7267 756d 656e 742c 2074  out` argument, t
-00010320: 6861 745c 6e69 7320 6578 7065 6374 6564  hat\nis expected
-00010330: 2074 6f20 6265 2061 2050 7974 686f 6e20   to be a Python 
-00010340: 6066 6c6f 6174 602c 2077 6869 6368 2073  `float`, which s
-00010350: 6574 7320 6120 6465 6164 6c69 6e65 5c6e  ets a deadline\n
-00010360: 666f 7220 7468 6520 636f 6d70 6c65 7469  for the completi
-00010370: 6f6e 206f 6620 7468 6520 6752 5043 206f  on of the gRPC o
-00010380: 7065 7261 7469 6f6e 2e5c 6e5c 6e60 6060  peration.\n\n```
-00010390: 7079 7468 6f6e 5c6e 636c 6965 6e74 2e64  python\nclient.d
-000103a0: 656c 6574 655f 7374 7265 616d 5f73 7562  elete_stream_sub
-000103b0: 7363 7269 7074 696f 6e28 5c6e 2020 2020  scription(\n    
-000103c0: 6772 6f75 705f 6e61 6d65 3d67 726f 7570  group_name=group
-000103d0: 5f6e 616d 6531 2c5c 6e20 2020 2073 7472  _name1,\n    str
-000103e0: 6561 6d5f 6e61 6d65 3d73 7472 6561 6d5f  eam_name=stream_
-000103f0: 6e61 6d65 322c 5c6e 295c 6e60 6060 5c6e  name2,\n)\n```\n
-00010400: 5c6e 2323 2043 6f6e 6e65 6374 696f 6e5c  \n## Connection\
-00010410: 6e5c 6e23 2323 2052 6563 6f6e 6e65 6374  n\n### Reconnect
-00010420: 5c6e 5c6e 5468 6520 6072 6563 6f6e 6e65  \n\nThe `reconne
-00010430: 6374 2829 6020 6d65 7468 6f64 2063 616e  ct()` method can
-00010440: 2062 6520 7573 6564 2074 6f20 6d61 6e75   be used to manu
-00010450: 616c 6c79 2072 6563 6f6e 6e65 6374 2074  ally reconnect t
-00010460: 6865 2063 6c69 656e 7420 746f 2061 5c6e  he client to a\n
-00010470: 7375 6974 6162 6c65 2045 7665 6e74 5374  suitable EventSt
-00010480: 6f72 6544 4220 6e6f 6465 2e20 5468 6973  oreDB node. This
-00010490: 206d 6574 686f 6420 7573 6573 2074 6865   method uses the
-000104a0: 2073 616d 6520 726f 7574 696e 652c 2066   same routine, f
-000104b0: 6f72 2064 6973 636f 7665 7269 6e67 2074  or discovering t
-000104c0: 6865 5c6e 636c 7573 7465 7220 6e6f 6465  he\ncluster node
-000104d0: 7320 616e 6420 636f 6e6e 6563 7469 6e67  s and connecting
-000104e0: 2074 6f20 6120 7375 6974 6162 6c65 206e   to a suitable n
-000104f0: 6f64 6520 6163 636f 7264 696e 6720 746f  ode according to
-00010500: 2074 6865 206e 6f64 6520 7072 6566 6572   the node prefer
-00010510: 656e 6365 5c6e 7370 6563 6966 6965 6420  ence\nspecified 
-00010520: 696e 2074 6865 2063 6f6e 6e65 6374 696f  in the connectio
-00010530: 6e20 7374 7269 6e67 2c20 7468 6174 2069  n string, that i
-00010540: 7320 7573 6564 2077 6865 6e20 7468 6520  s used when the 
-00010550: 636c 6965 6e74 2069 735c 6e69 6e73 7461  client is\ninsta
-00010560: 6e74 6961 7465 642e 2054 6869 7320 6d65  ntiated. This me
-00010570: 7468 6f64 2069 7320 7468 7265 6164 2d73  thod is thread-s
-00010580: 6166 652c 2061 6e64 2069 7420 6973 2022  afe, and it is "
-00010590: 636f 6e73 6572 7661 7469 7665 225c 6e69  conservative"\ni
-000105a0: 6e20 7468 6174 206f 6e6c 7920 6f6e 6520  n that only one 
-000105b0: 7265 636f 6e6e 6563 7469 6f6e 2077 696c  reconnection wil
-000105c0: 6c20 6f63 6375 722e 2043 6f6e 6375 7272  l occur. Concurr
-000105d0: 656e 7420 6174 7465 6d70 7473 2074 6f20  ent attempts to 
-000105e0: 7265 636f 6e6e 6563 745c 6e77 696c 6c20  reconnect\nwill 
-000105f0: 626c 6f63 6b20 756e 7469 6c20 7468 6520  block until the 
-00010600: 636c 6965 6e74 2068 6173 2072 6563 6f6e  client has recon
-00010610: 6e65 6374 6564 2073 7563 6365 7373 6675  nected successfu
-00010620: 6c6c 792c 2061 6e64 2074 6865 6e20 7468  lly, and then th
-00010630: 6579 2077 696c 6c5c 6e61 6c6c 2072 6574  ey will\nall ret
-00010640: 7572 6e20 6e6f 726d 616c 6c79 2e5c 6e5c  urn normally.\n\
-00010650: 6e60 6060 7079 7468 6f6e 5c6e 636c 6965  n```python\nclie
-00010660: 6e74 2e72 6563 6f6e 6e65 6374 2829 5c6e  nt.reconnect()\n
-00010670: 6060 605c 6e5c 6e41 6e20 6578 616d 706c  ```\n\nAn exampl
-00010680: 6520 6f66 2077 6865 6e20 6974 206d 6967  e of when it mig
-00010690: 6874 2062 6520 6465 7369 7261 626c 6520  ht be desirable 
-000106a0: 746f 2072 6563 6f6e 6e65 6374 206d 616e  to reconnect man
-000106b0: 7561 6c6c 7920 6973 2077 6865 6e20 2866  ually is when (f
-000106c0: 6f72 2070 6572 666f 726d 616e 6365 5c6e  or performance\n
-000106d0: 7265 6173 6f6e 7329 2074 6865 206e 6f64  reasons) the nod
-000106e0: 6520 7072 6566 6572 656e 6365 2069 7320  e preference is 
-000106f0: 666f 7220 7468 6520 636c 6965 6e74 2074  for the client t
-00010700: 6f20 6265 2063 6f6e 6e65 6374 6564 2074  o be connected t
-00010710: 6f20 6120 666f 6c6c 6f77 6572 206e 6f64  o a follower nod
-00010720: 6520 696e 2074 6865 5c6e 636c 7573 7465  e in the\ncluste
-00010730: 722c 2061 6e64 2c20 6166 7465 7220 6120  r, and, after a 
-00010740: 636c 7573 7465 7220 6c65 6164 6572 2065  cluster leader e
-00010750: 6c65 6374 696f 6e2c 2074 6865 2066 6f6c  lection, the fol
-00010760: 6c6f 7765 7220 6e6f 6465 2062 6563 6f6d  lower node becom
-00010770: 6573 2061 206c 6561 6465 7220 6e6f 6465  es a leader node
-00010780: 2e5c 6e52 6563 6f6e 6e65 6374 696e 6720  .\nReconnecting 
-00010790: 746f 2061 2066 6f6c 6c6f 7765 7220 6e6f  to a follower no
-000107a0: 6465 2069 6e20 7468 6973 2063 6173 6520  de in this case 
-000107b0: 6973 2063 7572 7265 6e74 6c79 2062 6579  is currently bey
-000107c0: 6f6e 6420 7468 6520 6361 7061 6269 6c69  ond the capabili
-000107d0: 7469 6573 206f 665c 6e74 6869 7320 636c  ties of\nthis cl
-000107e0: 6965 6e74 2c20 6275 7420 7468 6973 2062  ient, but this b
-000107f0: 6568 6176 696f 7220 6d69 6768 7420 6265  ehavior might be
-00010800: 2069 6d70 6c65 6d65 6e74 6564 2069 6e20   implemented in 
-00010810: 6120 6675 7475 7265 2072 656c 6561 7365  a future release
-00010820: 2e5c 6e5c 6e50 6c65 6173 6520 6e6f 7465  .\n\nPlease note
-00010830: 2c20 616c 6c20 7468 6520 636c 6965 6e74  , all the client
-00010840: 206d 6574 686f 6473 2075 7365 2061 6e20   methods use an 
-00010850: 6040 6175 746f 7265 636f 6e6e 6563 7460  `@autoreconnect`
-00010860: 2064 6563 6f72 6174 6f72 2028 7768 6963   decorator (whic
-00010870: 6820 6361 6c6c 7320 7468 655c 6e60 7265  h calls the\n`re
-00010880: 636f 6e6e 6563 7428 2960 206d 6574 686f  connect()` metho
-00010890: 6429 2061 6e64 2061 2060 4072 6574 7279  d) and a `@retry
-000108a0: 6020 6465 636f 7261 746f 7220 7468 6174  ` decorator that
-000108b0: 2077 696c 6c20 7265 7472 7920 6f70 6572   will retry oper
-000108c0: 6174 696f 6e73 2074 6861 7420 6661 696c  ations that fail
-000108d0: 5c6e 6475 6520 746f 2063 6f6e 6e65 6374  \ndue to connect
-000108e0: 6976 6974 7920 6973 7375 6573 2e20 5468  ivity issues. Th
-000108f0: 6973 206d 6561 6e73 2c20 666f 7220 6578  is means, for ex
-00010900: 616d 706c 652c 2074 6861 7420 7768 656e  ample, that when
-00010910: 2074 6865 206e 6f64 6520 7072 6566 6572   the node prefer
-00010920: 656e 6365 5c6e 6973 2066 6f72 2074 6865  ence\nis for the
-00010930: 2063 6c69 656e 7420 746f 2062 6520 636f   client to be co
-00010940: 6e6e 6563 7465 6420 746f 2061 206c 6561  nnected to a lea
-00010950: 6465 7220 2877 6869 6368 2069 7320 7468  der (which is th
-00010960: 6520 6465 6661 756c 7429 2061 6e64 2077  e default) and w
-00010970: 6865 6e2c 2061 6674 6572 2061 5c6e 636c  hen, after a\ncl
-00010980: 7573 7465 7220 6c65 6164 6572 2065 6c65  uster leader ele
-00010990: 6374 696f 6e2c 2074 6865 206e 6f64 6520  ction, the node 
-000109a0: 746f 2077 6869 6368 2074 6865 2063 6c69  to which the cli
-000109b0: 656e 7420 6973 2063 6f6e 6e65 6374 6564  ent is connected
-000109c0: 2062 6563 6f6d 6573 2061 2066 6f6c 6c6f   becomes a follo
-000109d0: 7765 722c 5c6e 736f 2074 6861 7420 7772  wer,\nso that wr
-000109e0: 6974 6520 6f70 6572 6174 696f 6e73 2077  ite operations w
-000109f0: 696c 6c20 6265 6769 6e20 746f 2066 6169  ill begin to fai
-00010a00: 6c20 6265 6361 7573 6520 7468 6520 636c  l because the cl
-00010a10: 6965 6e74 2069 7320 6e6f 206c 6f6e 6765  ient is no longe
-00010a20: 7220 636f 6e6e 6563 7465 645c 6e74 6f20  r connected\nto 
-00010a30: 6120 6c65 6164 6572 2c20 7468 656e 2074  a leader, then t
-00010a40: 6865 2063 6c69 656e 7420 7769 6c6c 2061  he client will a
-00010a50: 7574 6f6d 6174 6963 616c 6c79 2072 6563  utomatically rec
-00010a60: 6f6e 6e65 6374 2074 6f20 7468 6520 6e65  onnect to the ne
-00010a70: 7720 6c65 6164 6572 2061 6e64 2061 6c73  w leader and als
-00010a80: 6f5c 6e74 6865 2063 6c69 656e 7420 7769  o\nthe client wi
-00010a90: 6c6c 2072 6574 7279 2074 6865 2066 6169  ll retry the fai
-00010aa0: 6c65 6420 7772 6974 6520 6f70 6572 6174  led write operat
-00010ab0: 696f 6e73 2e20 5468 6520 636c 6965 6e74  ions. The client
-00010ac0: 2061 6c73 6f20 7769 6c6c 2072 6563 6f6e   also will recon
-00010ad0: 6e65 6374 5c6e 6163 636f 7264 696e 6720  nect\naccording 
-00010ae0: 746f 2074 6865 206e 6f64 6520 7072 6566  to the node pref
-00010af0: 6572 656e 6365 2077 6865 6e20 7468 6572  erence when ther
-00010b00: 6520 6172 6520 636f 6e6e 6563 7469 7669  e are connectivi
-00010b10: 7479 2069 7373 7565 7320 6361 7573 696e  ty issues causin
-00010b20: 6720 7265 6164 5c6e 6f70 6572 6174 696f  g read\noperatio
-00010b30: 6e73 2074 6f20 6661 696c 2077 6974 6820  ns to fail with 
-00010b40: 7468 6520 6375 7272 656e 7420 636f 6e6e  the current conn
-00010b50: 6563 7469 6f6e 2e5c 6e5c 6e50 6c65 6173  ection.\n\nPleas
-00010b60: 6520 616c 736f 206e 6f74 652c 2061 6e20  e also note, an 
-00010b70: 6576 656e 742d 7072 6f63 6573 7369 6e67  event-processing
-00010b80: 2063 6f6d 706f 6e65 6e74 2074 6861 7420   component that 
-00010b90: 7573 6573 2061 2063 6174 6368 2d75 7020  uses a catch-up 
-00010ba0: 7375 6273 6372 6970 7469 6f6e 2077 696c  subscription wil
-00010bb0: 6c5c 6e6e 6565 6420 746f 2062 6520 6d6f  l\nneed to be mo
-00010bc0: 6e69 746f 7265 6420 666f 7220 6572 726f  nitored for erro
-00010bd0: 7273 2c20 616e 642c 2069 6620 6974 2066  rs, and, if it f
-00010be0: 6169 6c73 2061 6674 6572 2074 6865 2073  ails after the s
-00010bf0: 7562 7363 7269 7074 696f 6e20 7374 6172  ubscription star
-00010c00: 7465 642c 2069 745c 6e77 696c 6c20 6e65  ted, it\nwill ne
-00010c10: 6564 2074 6f20 6265 2072 6573 7461 7274  ed to be restart
-00010c20: 6564 2066 726f 6d20 7468 6520 6c61 7374  ed from the last
-00010c30: 2073 6176 6564 2063 6f6d 6d69 7420 706f   saved commit po
-00010c40: 7369 7469 6f6e 2e20 496e 2074 6869 7320  sition. In this 
-00010c50: 6361 7365 2c20 7468 655c 6e63 6c69 656e  case, the\nclien
-00010c60: 7420 7769 6c6c 2061 7574 6f6d 6174 6963  t will automatic
-00010c70: 616c 6c79 2072 6563 6f6e 6e65 6374 2074  ally reconnect t
-00010c80: 6f20 6120 6e6f 6465 2069 6e20 7468 6520  o a node in the 
-00010c90: 636c 7573 7465 7220 7768 656e 2074 6865  cluster when the
-00010ca0: 2073 7562 7365 7175 656e 7420 6361 6c6c   subsequent call
-00010cb0: 5c6e 746f 2073 7461 7274 2061 2063 6174  \nto start a cat
-00010cc0: 6368 2d75 7020 7375 6273 6372 6970 7469  ch-up subscripti
-00010cd0: 6f6e 2069 7320 6d61 6465 2e20 596f 7520  on is made. You 
-00010ce0: 6a75 7374 206e 6565 6420 746f 2063 6174  just need to cat
-00010cf0: 6368 2074 6865 2065 7272 6f72 2c20 7265  ch the error, re
-00010d00: 6164 5c6e 7468 6520 6c61 7374 2073 6176  ad\nthe last sav
-00010d10: 6564 2063 6f6d 6d69 7420 706f 7369 7469  ed commit positi
-00010d20: 6f6e 2c20 616e 6420 7265 7374 6172 7420  on, and restart 
-00010d30: 7468 6520 6576 656e 7420 7072 6f63 6573  the event proces
-00010d40: 7369 6e67 2c20 7573 696e 6720 7468 6520  sing, using the 
-00010d50: 7361 6d65 5c6e 6045 5344 4243 6c69 656e  same\n`ESDBClien
-00010d60: 7460 2069 6e73 7461 6e63 652c 2062 7574  t` instance, but
-00010d70: 2077 6974 6820 6120 6e65 7720 6361 6c6c   with a new call
-00010d80: 2074 6f20 6073 7562 7363 7269 6265 5f61   to `subscribe_a
-00010d90: 6c6c 5f65 7665 6e74 7328 2960 2e5c 6e5c  ll_events()`.\n\
-00010da0: 6e5c 6e23 2323 2043 6c6f 7365 5c6e 5c6e  n\n### Close\n\n
-00010db0: 5468 6520 6063 6c6f 7365 2829 6020 6d65  The `close()` me
-00010dc0: 7468 6f64 2063 616e 2062 6520 7573 6564  thod can be used
-00010dd0: 2074 6f20 636c 6561 6e6c 7920 636c 6f73   to cleanly clos
-00010de0: 6520 7468 6520 6752 5043 2063 6f6e 6e65  e the gRPC conne
-00010df0: 6374 696f 6e2e 5c6e 5c6e 6060 6070 7974  ction.\n\n```pyt
-00010e00: 686f 6e5c 6e63 6c69 656e 742e 636c 6f73  hon\nclient.clos
-00010e10: 6528 295c 6e60 6060 5c6e 5c6e 2323 204e  e()\n```\n\n## N
-00010e20: 6f74 6573 5c6e 5c6e 2323 2320 436f 6e6e  otes\n\n### Conn
-00010e30: 6563 7469 6f6e 2073 7472 696e 6773 5c6e  ection strings\n
-00010e40: 5c6e 5468 6520 4576 656e 7453 746f 7265  \nThe EventStore
-00010e50: 4442 2063 6f6e 6e65 6374 696f 6e20 7374  DB connection st
-00010e60: 7269 6e67 2069 7320 6120 5552 4920 7468  ring is a URI th
-00010e70: 6174 2063 6f6e 666f 726d 7320 7769 7468  at conforms with
-00010e80: 206f 6e65 206f 6620 7477 6f20 706f 7373   one of two poss
-00010e90: 6962 6c65 5c6e 7363 6865 6d65 732c 2065  ible\nschemes, e
-00010ea0: 6974 6865 7220 7468 6520 2265 7364 6222  ither the "esdb"
-00010eb0: 2073 6368 656d 6520 6f72 2074 6865 2022   scheme or the "
-00010ec0: 6573 6462 2b64 6973 636f 7665 7222 2073  esdb+discover" s
-00010ed0: 6368 656d 652e 2054 6865 2073 796e 7461  cheme. The synta
-00010ee0: 7820 616e 645c 6e73 656d 616e 7469 6373  x and\nsemantics
-00010ef0: 206f 6620 7468 6520 4576 656e 7453 746f   of the EventSto
-00010f00: 7265 4442 2055 5249 2073 6368 656d 6573  reDB URI schemes
-00010f10: 2061 7265 2065 7870 6c61 696e 6564 2062   are explained b
-00010f20: 656c 6f77 2e20 5468 6520 7379 6e74 6178  elow. The syntax
-00010f30: 2069 735c 6e64 6566 696e 6564 2075 7369   is\ndefined usi
-00010f40: 6e67 205b 4542 4e46 5d28 6874 7470 733a  ng [EBNF](https:
-00010f50: 2f2f 656e 2e77 696b 6970 6564 6961 2e6f  //en.wikipedia.o
-00010f60: 7267 2f77 696b 692f 4578 7465 6e64 6564  rg/wiki/Extended
-00010f70: 5f42 6163 6b75 73e2 8093 4e61 7572 5f66  _Backus...Naur_f
-00010f80: 6f72 6d29 2e5c 6e5c 6e54 6865 2022 6573  orm).\n\nThe "es
-00010f90: 6462 2220 5552 4920 7363 6865 6d65 2063  db" URI scheme c
-00010fa0: 616e 2062 6520 6465 6669 6e65 6420 696e  an be defined in
-00010fb0: 2074 6865 2066 6f6c 6c6f 7769 6e67 2077   the following w
-00010fc0: 6179 2e5c 6e5c 6e20 2020 2065 7364 622d  ay.\n\n    esdb-
-00010fd0: 7572 6920 3d20 2265 7364 623a 2f2f 2220  uri = "esdb://" 
-00010fe0: 2c20 5b20 7573 6572 2d69 6e66 6f20 2c20  , [ user-info , 
-00010ff0: 2240 2220 5d20 2c20 6772 7063 2d74 6172  "@" ] , grpc-tar
-00011000: 6765 742c 207b 2022 2c22 202c 2067 7270  get, { "," , grp
-00011010: 632d 7461 7267 6574 207d 202c 205b 2022  c-target } , [ "
-00011020: 3f22 202c 2071 7565 7279 2d73 7472 696e  ?" , query-strin
-00011030: 6720 5d20 3b5c 6e5c 6e49 6e20 7468 6520  g ] ;\n\nIn the 
-00011040: 2265 7364 6222 2055 5249 2073 6368 656d  "esdb" URI schem
-00011050: 652c 2061 6674 6572 2074 6865 206f 7074  e, after the opt
-00011060: 696f 6e61 6c20 7573 6572 2069 6e66 6f20  ional user info 
-00011070: 7374 7269 6e67 2c20 7468 6572 6520 6d75  string, there mu
-00011080: 7374 2062 6520 6174 206c 6561 7374 5c6e  st be at least\n
-00011090: 6f6e 6520 6752 5043 2074 6172 6765 742e  one gRPC target.
-000110a0: 2049 6620 7468 6572 6520 6172 6520 7365   If there are se
-000110b0: 7665 7261 6c20 6752 5043 2074 6172 6765  veral gRPC targe
-000110c0: 7473 2c20 7468 6579 206d 7573 7420 6265  ts, they must be
-000110d0: 2073 6570 6172 6174 6564 2066 726f 6d20   separated from 
-000110e0: 6561 6368 5c6e 6f74 6865 7220 7769 7468  each\nother with
-000110f0: 2074 6865 2022 2c22 2063 6861 7261 6374   the "," charact
-00011100: 6572 2e20 4561 6368 2067 5250 4320 7461  er. Each gRPC ta
-00011110: 7267 6574 2073 686f 756c 6420 696e 6469  rget should indi
-00011120: 6361 7465 2061 6e20 4576 656e 7453 746f  cate an EventSto
-00011130: 7265 4442 2067 5250 435c 6e73 6572 7665  reDB gRPC\nserve
-00011140: 7220 736f 636b 6574 2c20 6279 2073 7065  r socket, by spe
-00011150: 6369 6679 696e 6720 6120 686f 7374 2061  cifying a host a
-00011160: 6e64 2061 2070 6f72 7420 6e75 6d62 6572  nd a port number
-00011170: 2073 6570 6172 6174 6564 2077 6974 6820   separated with 
-00011180: 7468 6520 223a 2220 6368 6172 6163 7465  the ":" characte
-00011190: 722e 5c6e 5468 6520 686f 7374 206d 6179  r.\nThe host may
-000111a0: 2062 6520 6120 686f 7374 6e61 6d65 2074   be a hostname t
-000111b0: 6861 7420 6361 6e20 6265 2072 6573 6f6c  hat can be resol
-000111c0: 7665 6420 746f 2061 6e20 4950 2061 6464  ved to an IP add
-000111d0: 7265 7373 2c20 6f72 2061 6e20 4950 2061  ress, or an IP a
-000111e0: 6464 7265 7373 2e5c 6e5c 6e20 2020 2067  ddress.\n\n    g
-000111f0: 7270 632d 7461 7267 6574 203d 2028 2068  rpc-target = ( h
-00011200: 6f73 746e 616d 6520 7c20 6970 2d61 6464  ostname | ip-add
-00011210: 7265 7373 2029 202c 2022 3a22 202c 2070  ress ) , ":" , p
-00011220: 6f72 742d 6e75 6d62 6572 203b 5c6e 5c6e  ort-number ;\n\n
-00011230: 5c6e 5468 6520 2265 7364 622b 6469 7363  \nThe "esdb+disc
-00011240: 6f76 6572 2220 5552 4920 7363 6865 6d65  over" URI scheme
-00011250: 2063 616e 2062 6520 6465 6669 6e65 6420   can be defined 
-00011260: 696e 2074 6865 2066 6f6c 6c6f 7769 6e67  in the following
-00011270: 2077 6179 2e5c 6e5c 6e20 2020 2065 7364   way.\n\n    esd
-00011280: 622d 6469 7363 6f76 6572 2d75 7269 203d  b-discover-uri =
-00011290: 2022 6573 6462 2b64 6973 636f 7665 723a   "esdb+discover:
-000112a0: 2f2f 2220 2c20 5b20 7573 6572 2d69 6e66  //" , [ user-inf
-000112b0: 6f2c 2022 4022 205d 202c 2063 6c75 7374  o, "@" ] , clust
-000112c0: 6572 2d64 6f6d 6169 6e6e 616d 6520 2c20  er-domainname , 
-000112d0: 5b20 223f 2220 2c20 7175 6572 792d 7374  [ "?" , query-st
-000112e0: 7269 6e67 205d 203b 5c6e 5c6e 496e 2074  ring ] ;\n\nIn t
-000112f0: 6865 2022 6573 6462 2b64 6973 636f 7665  he "esdb+discove
-00011300: 7222 2055 5249 2073 6368 656d 652c 2061  r" URI scheme, a
-00011310: 6674 6572 2074 6865 2075 7365 7220 696e  fter the user in
-00011320: 666f 2073 7472 696e 672c 2074 6865 7265  fo string, there
-00011330: 206d 7573 7420 6265 2061 2064 6f6d 6169   must be a domai
-00011340: 6e5c 6e6e 616d 6520 7768 6963 6820 7368  n\nname which sh
-00011350: 6f75 6c64 2069 6465 6e74 6966 7920 6120  ould identify a 
-00011360: 636c 7573 7465 7220 6f66 2045 7665 6e74  cluster of Event
-00011370: 5374 6f72 6544 4220 7365 7276 6572 732e  StoreDB servers.
-00011380: 2054 6865 2063 6c69 656e 7420 7769 6c6c   The client will
-00011390: 2075 7365 2061 2044 4e53 5c6e 7365 7276   use a DNS\nserv
-000113a0: 6572 2074 6f20 7265 736f 6c76 6520 7468  er to resolve th
-000113b0: 6520 646f 6d61 696e 206e 616d 6520 746f  e domain name to
-000113c0: 2061 206c 6973 7420 6f66 2061 6464 7265   a list of addre
-000113d0: 7373 6573 206f 6620 4576 656e 7453 746f  sses of EventSto
-000113e0: 7265 4442 2073 6572 7665 7273 2c5c 6e62  reDB servers,\nb
-000113f0: 7920 7175 6572 7969 6e67 2066 6f72 205c  y querying for \
-00011400: 2741 5c27 2072 6563 6f72 6473 2e20 496e  'A\' records. In
-00011410: 2074 6869 7320 6361 7365 2c20 7468 6520   this case, the 
-00011420: 706f 7274 206e 756d 6265 7220 2232 3131  port number "211
-00011430: 3322 2077 696c 6c20 6265 2075 7365 6420  3" will be used 
-00011440: 746f 5c6e 636f 6e73 7472 7563 7420 6752  to\nconstruct gR
-00011450: 5043 2074 6172 6765 7473 2066 726f 6d20  PC targets from 
-00011460: 7468 6520 6164 6472 6573 7365 7320 6f62  the addresses ob
-00011470: 7461 696e 6564 2066 726f 6d20 5c27 415c  tained from \'A\
-00011480: 2720 7265 636f 7264 7320 7072 6f76 6964  ' records provid
-00011490: 6564 2062 7920 7468 655c 6e44 4e53 2073  ed by the\nDNS s
-000114a0: 6572 7665 722e 2054 6865 7265 666f 7265  erver. Therefore
-000114b0: 2c20 6966 2079 6f75 2077 616e 7420 746f  , if you want to
-000114c0: 2075 7365 2074 6865 2022 6573 6462 2b64   use the "esdb+d
-000114d0: 6973 636f 7665 7222 2055 5249 2073 6368  iscover" URI sch
-000114e0: 656d 652c 2079 6f75 2077 696c 6c5c 6e6e  eme, you will\nn
-000114f0: 6565 6420 746f 2063 6f6e 6669 6775 7265  eed to configure
-00011500: 2044 4e53 2077 6865 6e20 7365 7474 696e   DNS when settin
-00011510: 6720 7570 2079 6f75 7220 4576 656e 7453  g up your EventS
-00011520: 746f 7265 4442 2063 6c75 7374 6572 2e5c  toreDB cluster.\
-00011530: 6e5c 6e57 6974 6820 626f 7468 2074 6865  n\nWith both the
-00011540: 2022 6573 6462 2220 616e 6420 2265 7364   "esdb" and "esd
-00011550: 622b 6469 736f 6376 6572 2220 5552 4920  b+disocver" URI 
-00011560: 7363 6865 6d65 732c 2074 6865 2063 6c69  schemes, the cli
-00011570: 656e 7420 6669 7273 746c 7920 6f62 7461  ent firstly obta
-00011580: 696e 735c 6e61 206c 6973 7420 6f66 2067  ins\na list of g
-00011590: 5250 4320 7461 7267 6574 733a 2065 6974  RPC targets: eit
-000115a0: 6865 7220 6469 7265 6374 6c79 2066 726f  her directly fro
-000115b0: 6d20 2265 7364 6222 2063 6f6e 6e65 6374  m "esdb" connect
-000115c0: 696f 6e20 7374 7269 6e67 733b 206f 7220  ion strings; or 
-000115d0: 696e 6469 7265 6374 6c79 5c6e 6672 6f6d  indirectly\nfrom
-000115e0: 2022 6573 6462 2b64 6973 636f 7665 7222   "esdb+discover"
-000115f0: 2063 6f6e 6e65 6374 696f 6e20 7374 7269   connection stri
-00011600: 6e67 7320 7669 6120 444e 532e 2054 6869  ngs via DNS. Thi
-00011610: 7320 6c69 7374 206f 6620 7461 7267 6574  s list of target
-00011620: 7320 6973 206b 6e6f 776e 2061 7320 7468  s is known as th
-00011630: 655c 6e22 676f 7373 6970 2073 6565 6422  e\n"gossip seed"
-00011640: 2e20 5468 6520 636c 6965 6e74 2077 696c  . The client wil
-00011650: 6c20 7468 656e 2061 7474 656d 7074 2074  l then attempt t
-00011660: 6f20 636f 6e6e 6563 7420 746f 2065 6163  o connect to eac
-00011670: 6820 6752 5043 2074 6172 6765 7420 696e  h gRPC target in
-00011680: 2074 7572 6e2c 5c6e 6174 7465 6d70 7469   turn,\nattempti
-00011690: 6e67 2074 6f20 6361 6c6c 2074 6865 2045  ng to call the E
-000116a0: 7665 6e74 5374 6f72 6544 4220 476f 7373  ventStoreDB Goss
-000116b0: 6970 2041 5049 2074 6f20 6f62 7461 696e  ip API to obtain
-000116c0: 2069 6e66 6f72 6d61 7469 6f6e 2061 626f   information abo
-000116d0: 7574 2074 6865 5c6e 4576 656e 7453 746f  ut the\nEventSto
-000116e0: 7265 4442 2063 6c75 7374 6572 2e20 4120  reDB cluster. A 
-000116f0: 6d65 6d62 6572 206f 6620 7468 6520 636c  member of the cl
-00011700: 7573 7465 7220 6973 2073 656c 6563 7465  uster is selecte
-00011710: 6420 6279 2074 6865 2063 6c69 656e 742c  d by the client,
-00011720: 2061 6363 6f72 6469 6e67 5c6e 746f 2074   according\nto t
-00011730: 6865 2022 6e6f 6465 2070 7265 6665 7265  he "node prefere
-00011740: 6e63 6522 206f 7074 696f 6e20 2873 6565  nce" option (see
-00011750: 2062 656c 6f77 292e 2054 6865 2063 6c69   below). The cli
-00011760: 656e 7420 6d61 7920 7468 656e 206e 6565  ent may then nee
-00011770: 6420 746f 2063 6c6f 7365 2069 7473 5c6e  d to close its\n
-00011780: 636f 6e6e 6563 7469 6f6e 2061 6e64 2072  connection and r
-00011790: 6563 6f6e 6e65 6374 2074 6f20 7468 6520  econnect to the 
-000117a0: 7365 6c65 6374 6564 2073 6572 7665 722e  selected server.
-000117b0: 5c6e 5c6e 496e 2062 6f74 6820 7468 6520  \n\nIn both the 
-000117c0: 2265 7364 6222 2061 6e64 2022 6573 6462  "esdb" and "esdb
-000117d0: 2b64 6973 636f 7665 7222 2073 6368 656d  +discover" schem
-000117e0: 6573 2c20 7468 6520 5552 4920 6d61 7920  es, the URI may 
-000117f0: 696e 636c 7564 6520 6120 7573 6572 2069  include a user i
-00011800: 6e66 6f20 7374 7269 6e67 2e5c 6e49 6620  nfo string.\nIf 
-00011810: 6974 2065 7869 7374 7320 696e 2074 6865  it exists in the
-00011820: 2055 5249 2c20 7468 6520 7573 6572 2069   URI, the user i
-00011830: 6e66 6f20 7374 7269 6e67 206d 7573 7420  nfo string must 
-00011840: 6265 2073 6570 6172 6174 6564 2066 726f  be separated fro
-00011850: 6d20 7468 6520 7265 7374 206f 6620 7468  m the rest of th
-00011860: 6520 5552 495c 6e77 6974 6820 7468 6520  e URI\nwith the 
-00011870: 2240 2220 6368 6172 6163 7465 722e 2054  "@" character. T
-00011880: 6865 2075 7365 7220 696e 666f 2073 7472  he user info str
-00011890: 696e 6720 6d75 7374 2069 6e63 6c75 6465  ing must include
-000118a0: 2061 2075 7365 726e 616d 6520 616e 6420   a username and 
-000118b0: 6120 7061 7373 776f 7264 2c5c 6e73 6570  a password,\nsep
-000118c0: 6172 6174 6564 2077 6974 6820 7468 6520  arated with the 
-000118d0: 223a 2220 6368 6172 6163 7465 722e 5c6e  ":" character.\n
-000118e0: 5c6e 2020 2020 7573 6572 2d69 6e66 6f20  \n    user-info 
-000118f0: 3d20 7573 6572 6e61 6d65 202c 2022 3a22  = username , ":"
-00011900: 202c 2070 6173 7377 6f72 6420 3b5c 6e5c   , password ;\n\
-00011910: 6e54 6865 2075 7365 7220 696e 666f 2069  nThe user info i
-00011920: 7320 7365 6e74 2062 7920 7468 6520 636c  s sent by the cl
-00011930: 6965 6e74 2061 7320 2263 616c 6c20 6372  ient as "call cr
-00011940: 6564 656e 7469 616c 7322 2069 6e20 6561  edentials" in ea
-00011950: 6368 2063 616c 6c20 746f 2061 2022 7365  ch call to a "se
-00011960: 6375 7265 225c 6e73 6572 7665 722c 2069  cure"\nserver, i
-00011970: 6e20 6120 2262 6173 6963 2061 7574 6822  n a "basic auth"
-00011980: 2061 7574 686f 7269 7a61 7469 6f6e 2068   authorization h
-00011990: 6561 6465 722e 2054 6869 7320 6175 7468  eader. This auth
-000119a0: 6f72 697a 6174 696f 6e20 6865 6164 6572  orization header
-000119b0: 2069 7320 7573 6564 2062 795c 6e74 6865   is used by\nthe
-000119c0: 2073 6572 7665 7220 746f 2061 7574 6865   server to authe
-000119d0: 6e74 6963 6174 6520 7468 6520 636c 6965  nticate the clie
-000119e0: 6e74 2e20 5468 6520 6175 7468 6f72 697a  nt. The authoriz
-000119f0: 6174 696f 6e20 6865 6164 6572 2069 7320  ation header is 
-00011a00: 6e6f 7420 7365 6e74 2074 6f5c 6e22 696e  not sent to\n"in
-00011a10: 7365 6375 7265 2220 7365 7276 6572 732e  secure" servers.
-00011a20: 5c6e 5c6e 496e 2062 6f74 6820 7468 6520  \n\nIn both the 
-00011a30: 2265 7364 6222 2061 6e64 2022 6573 6462  "esdb" and "esdb
-00011a40: 2b64 6973 636f 7665 7222 2073 6368 656d  +discover" schem
-00011a50: 6573 2c20 7468 6520 6f70 7469 6f6e 616c  es, the optional
-00011a60: 2071 7565 7279 2073 7472 696e 6720 6d75   query string mu
-00011a70: 7374 2062 6520 6f6e 655c 6e6f 7220 6d61  st be one\nor ma
-00011a80: 6e79 2066 6965 6c64 2d76 616c 7565 2061  ny field-value a
-00011a90: 7267 756d 656e 7473 2c20 7365 7061 7261  rguments, separa
-00011aa0: 7465 6420 6672 6f6d 2065 6163 6820 6f74  ted from each ot
-00011ab0: 6865 7220 7769 7468 2074 6865 2022 2622  her with the "&"
-00011ac0: 2063 6861 7261 6374 6572 2e5c 6e5c 6e20   character.\n\n 
-00011ad0: 2020 2071 7565 7279 2d73 7472 696e 6720     query-string 
-00011ae0: 3d20 6669 656c 642d 7661 6c75 652c 207b  = field-value, {
-00011af0: 2022 2622 2c20 6669 656c 642d 7661 6c75   "&", field-valu
-00011b00: 6520 7d20 3b5c 6e5c 6e45 6163 6820 6669  e } ;\n\nEach fi
-00011b10: 656c 642d 7661 6c75 6520 6172 6775 6d65  eld-value argume
-00011b20: 6e74 206d 7573 7420 6265 206f 6e65 206f  nt must be one o
-00011b30: 6620 7468 6520 7375 7070 6f72 7465 6420  f the supported 
-00011b40: 6669 656c 6473 2c20 616e 6420 616e 5c6e  fields, and an\n
-00011b50: 6170 7072 6f70 7269 6174 6520 7661 6c75  appropriate valu
-00011b60: 652c 2073 6570 6172 6174 6564 2077 6974  e, separated wit
-00011b70: 6820 7468 6520 223d 2220 6368 6172 6163  h the "=" charac
-00011b80: 7465 722e 5c6e 5c6e 2020 2020 6669 656c  ter.\n\n    fiel
-00011b90: 642d 7661 6c75 6520 3d20 2820 2254 6c73  d-value = ( "Tls
-00011ba0: 222c 2022 3d22 202c 2022 7472 7565 2220  ", "=" , "true" 
-00011bb0: 7c20 2266 616c 7365 2220 295c 6e20 2020  | "false" )\n   
-00011bc0: 2020 2020 2020 2020 2020 2020 207c 2028               | (
-00011bd0: 2022 546c 7356 6572 6966 7943 6572 7422   "TlsVerifyCert"
-00011be0: 2c20 223d 2220 2c20 2274 7275 6522 207c  , "=" , "true" |
-00011bf0: 2022 6661 6c73 6522 2029 5c6e 2020 2020   "false" )\n    
-00011c00: 2020 2020 2020 2020 2020 2020 7c20 2820              | ( 
-00011c10: 2243 6f6e 6e65 6374 696f 6e4e 616d 6522  "ConnectionName"
-00011c20: 2c20 223d 2220 2c20 7374 7269 6e67 2029  , "=" , string )
-00011c30: 5c6e 2020 2020 2020 2020 2020 2020 2020  \n              
-00011c40: 2020 7c20 2820 224e 6f64 6550 7265 6665    | ( "NodePrefe
-00011c50: 7265 6e63 6522 2c20 223d 2220 2c20 226c  rence", "=" , "l
-00011c60: 6561 6465 7222 207c 2022 666f 6c6c 6f77  eader" | "follow
-00011c70: 6572 2220 7c20 2272 6561 646f 6e6c 7972  er" | "readonlyr
-00011c80: 6570 6c69 6361 2220 7c20 2272 616e 646f  eplica" | "rando
-00011c90: 6d22 2029 5c6e 2020 2020 2020 2020 2020  m" )\n          
-00011ca0: 2020 2020 2020 7c20 2820 2244 6566 6175        | ( "Defau
-00011cb0: 6c74 4465 6164 6c69 6e65 222c 2022 3d22  ltDeadline", "="
-00011cc0: 202c 2069 6e74 6567 6572 2029 5c6e 2020   , integer )\n  
-00011cd0: 2020 2020 2020 2020 2020 2020 2020 7c20                | 
-00011ce0: 2820 2247 6f73 7369 7054 696d 656f 7574  ( "GossipTimeout
-00011cf0: 222c 2022 3d22 202c 2069 6e74 6567 6572  ", "=" , integer
-00011d00: 2029 5c6e 2020 2020 2020 2020 2020 2020   )\n            
-00011d10: 2020 2020 7c20 2820 224d 6178 4469 7363      | ( "MaxDisc
-00011d20: 6f76 6572 4174 7465 6d70 7473 222c 2022  overAttempts", "
-00011d30: 3d22 202c 2069 6e74 6567 6572 2029 5c6e  =" , integer )\n
-00011d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011d50: 7c20 2820 2244 6973 636f 7665 7279 496e  | ( "DiscoveryIn
-00011d60: 7465 7276 616c 222c 2022 3d22 202c 2069  terval", "=" , i
-00011d70: 6e74 6567 6572 2029 5c6e 2020 2020 2020  nteger )\n      
-00011d80: 2020 2020 2020 2020 2020 7c20 2820 224d            | ( "M
-00011d90: 6178 4469 7363 6f76 6572 4174 7465 6d70  axDiscoverAttemp
-00011da0: 7473 222c 2022 3d22 202c 2069 6e74 6567  ts", "=" , integ
-00011db0: 6572 2029 5c6e 2020 2020 2020 2020 2020  er )\n          
-00011dc0: 2020 2020 2020 7c20 2820 224b 6565 7041        | ( "KeepA
-00011dd0: 6c69 7665 496e 7465 7276 616c 222c 2022  liveInterval", "
-00011de0: 3d22 202c 2069 6e74 6567 6572 2029 5c6e  =" , integer )\n
-00011df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011e00: 7c20 2820 224b 6565 7041 6c69 7665 496e  | ( "KeepAliveIn
-00011e10: 7465 7276 616c 222c 2022 3d22 202c 2069  terval", "=" , i
-00011e20: 6e74 6567 6572 2029 203b 5c6e 5c6e 5468  nteger ) ;\n\nTh
-00011e30: 6520 7461 626c 6520 6265 6c6f 7720 6465  e table below de
-00011e40: 7363 7269 6265 7320 7468 6520 7175 6572  scribes the quer
-00011e50: 7920 6669 656c 642d 7661 6c75 6573 2073  y field-values s
-00011e60: 7570 706f 7274 6564 2062 7920 7468 6973  upported by this
-00011e70: 2063 6c69 656e 742e 5c6e 5c6e 7c20 4669   client.\n\n| Fi
-00011e80: 656c 6420 2020 2020 2020 2020 2020 2020  eld             
-00011e90: 2020 7c20 5661 6c75 6520 2020 2020 2020    | Value       
-00011ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011ed0: 2020 2020 2020 2020 2020 7c20 4465 7363            | Desc
-00011ee0: 7269 7074 696f 6e20 2020 2020 2020 2020  ription         
-00011ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011f70: 2020 2020 2020 2020 2020 2020 2020 7c5c                |\
-00011f80: 6e7c 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  n|--------------
-00011f90: 2d2d 2d2d 2d2d 2d7c 2d2d 2d2d 2d2d 2d2d  -------|--------
-00011fa0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011fb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011fc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011fd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d7c  ---------------|
-00011fe0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011ff0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00012000: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00012010: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00012020: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00012030: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00012040: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00012050: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00012060: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00012070: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00012080: 2d2d 2d7c 5c6e 7c20 546c 7320 2020 2020  ---|\n| Tls     
-00012090: 2020 2020 2020 2020 2020 2020 7c20 2274              | "t
-000120a0: 7275 6522 2c20 2266 616c 7365 2220 2864  rue", "false" (d
-000120b0: 6566 6175 6c74 3a20 2274 7275 6522 2920  efault: "true") 
-000120c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000120d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000120e0: 2020 2020 7c20 4966 2022 7472 7565 2220      | If "true" 
-000120f0: 7468 6520 636c 6965 6e74 2077 696c 6c20  the client will 
-00012100: 6372 6561 7465 2061 2022 7365 6375 7265  create a "secure
-00012110: 2220 6752 5043 2063 6861 6e6e 656c 2e20  " gRPC channel. 
-00012120: 4966 2022 6661 6c73 6522 2074 6865 2063  If "false" the c
-00012130: 6c69 656e 7420 7769 6c6c 2063 7265 6174  lient will creat
-00012140: 6520 616e 2022 696e 7365 6375 7265 2220  e an "insecure" 
-00012150: 6752 5043 2063 6861 6e6e 656c 2e20 5468  gRPC channel. Th
-00012160: 6973 206d 7573 7420 6d61 7463 6820 7468  is must match th
-00012170: 6520 7365 7276 6572 2063 6f6e 6669 6775  e server configu
-00012180: 7261 7469 6f6e 2e20 7c5c 6e7c 2054 6c73  ration. |\n| Tls
-00012190: 5665 7269 6679 4365 7274 2020 2020 2020  VerifyCert      
-000121a0: 207c 2022 7472 7565 222c 2022 6661 6c73   | "true", "fals
-000121b0: 6522 2028 6465 6661 756c 743a 2022 7472  e" (default: "tr
-000121c0: 7565 2229 2020 2020 2020 2020 2020 2020  ue")            
-000121d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000121e0: 2020 2020 2020 2020 207c 204e 4f54 2059           | NOT Y
-000121f0: 4554 2049 4d50 4c45 4d45 4e54 4544 2020  ET IMPLEMENTED  
-00012200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012280: 2020 2020 2020 2020 2020 2020 207c 5c6e               |\n
-00012290: 7c20 436f 6e6e 6563 7469 6f6e 4e61 6d65  | ConnectionName
-000122a0: 2020 2020 2020 7c20 7374 7269 6e67 2028        | string (
-000122b0: 6465 6661 756c 743a 2061 7574 6f2d 6765  default: auto-ge
-000122c0: 6e65 7261 7465 6420 7665 7273 696f 6e2d  nerated version-
-000122d0: 3420 5555 4944 2920 2020 2020 2020 2020  4 UUID)         
-000122e0: 2020 2020 2020 2020 2020 2020 2020 7c20                | 
-000122f0: 5365 6e74 2069 6e20 6361 6c6c 206d 6574  Sent in call met
-00012300: 6164 6174 6120 666f 7220 6576 6572 7920  adata for every 
-00012310: 6361 6c6c 2c20 746f 2069 6465 6e74 6966  call, to identif
-00012320: 7920 7468 6520 636c 6965 6e74 2074 6f20  y the client to 
-00012330: 7468 6520 636c 7573 7465 722e 2020 2020  the cluster.    
-00012340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012390: 2020 7c5c 6e7c 204e 6f64 6550 7265 6665    |\n| NodePrefe
-000123a0: 7265 6e63 6520 2020 2020 207c 2022 6c65  rence      | "le
-000123b0: 6164 6572 222c 2022 666f 6c6c 6f77 6572  ader", "follower
-000123c0: 222c 2022 7265 6164 6f6e 6c79 7265 706c  ", "readonlyrepl
-000123d0: 6963 6122 2c20 2272 616e 646f 6d22 2028  ica", "random" (
-000123e0: 6465 6661 756c 743a 2022 6c65 6164 6572  default: "leader
-000123f0: 2229 207c 2054 6865 206e 6f64 6520 7374  ") | The node st
-00012400: 6174 6520 7072 6566 6572 7265 6420 6279  ate preferred by
-00012410: 2074 6865 2063 6c69 656e 742e 2054 6865   the client. The
-00012420: 2063 6c69 656e 7420 7769 6c6c 2073 656c   client will sel
-00012430: 6563 7420 6120 6e6f 6465 2066 726f 6d20  ect a node from 
-00012440: 7468 6520 636c 7573 7465 7220 696e 666f  the cluster info
-00012450: 2072 6563 6569 7665 6420 6672 6f6d 2074   received from t
-00012460: 6865 2047 6f73 7369 7020 4150 4920 6163  he Gossip API ac
-00012470: 636f 7264 696e 6720 746f 2074 6869 7320  cording to this 
-00012480: 7072 6566 6572 656e 6365 2e20 2020 2020  preference.     
-00012490: 2020 2020 2020 207c 5c6e 7c20 4465 6661         |\n| Defa
-000124a0: 756c 7444 6561 646c 696e 6520 2020 2020  ultDeadline     
-000124b0: 7c20 696e 7465 6765 7220 2864 6566 6175  | integer (defau
-000124c0: 6c74 3a20 604e 6f6e 6560 2920 2020 2020  lt: `None`)     
-000124d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000124e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000124f0: 2020 2020 2020 2020 7c20 5468 6520 6465          | The de
-00012500: 6661 756c 7420 7661 6c75 6520 2869 6e20  fault value (in 
-00012510: 7365 636f 6e64 7329 206f 6620 7468 6520  seconds) of the 
-00012520: 6074 696d 656f 7574 6020 6172 6775 6d65  `timeout` argume
-00012530: 6e74 206f 6620 636c 6965 6e74 2022 7772  nt of client "wr
-00012540: 6974 6522 206d 6574 686f 6473 2073 7563  ite" methods suc
-00012550: 6820 6173 2060 6170 7065 6e64 5f65 7665  h as `append_eve
-00012560: 6e74 7328 2960 2e20 2020 2020 2020 2020  nts()`.         
-00012570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012590: 2020 2020 2020 2020 2020 2020 7c5c 6e7c              |\n|
-000125a0: 2047 6f73 7369 7054 696d 656f 7574 2020   GossipTimeout  
-000125b0: 2020 2020 207c 2069 6e74 6567 6572 2028       | integer (
-000125c0: 6465 6661 756c 743a 2035 2920 2020 2020  default: 5)     
-000125d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000125e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000125f0: 2020 2020 2020 2020 2020 2020 207c 2054               | T
-00012600: 6865 2064 6566 6175 6c74 2076 616c 7565  he default value
-00012610: 2028 696e 2073 6563 6f6e 6473 2920 6f66   (in seconds) of
-00012620: 2074 6865 2060 7469 6d65 6f75 7460 2061   the `timeout` a
-00012630: 7267 756d 656e 7420 6f66 2067 6f73 7369  rgument of gossi
-00012640: 7020 7265 6164 206d 6574 686f 6473 2c20  p read methods, 
-00012650: 7375 6368 2061 7320 6072 6561 645f 676f  such as `read_go
-00012660: 7373 6970 2829 602e 2020 2020 2020 2020  ssip()`.        
-00012670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000126a0: 207c 5c6e 7c20 4d61 7844 6973 636f 7665   |\n| MaxDiscove
-000126b0: 7241 7474 656d 7074 7320 7c20 696e 7465  rAttempts | inte
-000126c0: 6765 7220 2864 6566 6175 6c74 3a20 3130  ger (default: 10
-000126d0: 2920 2020 2020 2020 2020 2020 2020 2020  )               
-000126e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000126f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012700: 2020 7c20 5468 6520 6e75 6d62 6572 206f    | The number o
-00012710: 6620 6174 7465 6d70 7473 2074 6f20 7265  f attempts to re
-00012720: 6164 2067 6f73 7369 7020 7768 656e 2063  ad gossip when c
-00012730: 6f6e 6e65 6374 696e 6720 6f72 2072 6563  onnecting or rec
-00012740: 6f6e 6e65 6374 696e 6720 746f 2061 2063  onnecting to a c
-00012750: 6c75 7374 6572 206d 656d 6265 722e 2020  luster member.  
-00012760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000127a0: 2020 2020 2020 7c5c 6e7c 2044 6973 636f        |\n| Disco
-000127b0: 7665 7279 496e 7465 7276 616c 2020 207c  veryInterval   |
-000127c0: 2069 6e74 6567 6572 2028 6465 6661 756c   integer (defaul
-000127d0: 743a 2031 3030 2920 2020 2020 2020 2020  t: 100)         
-000127e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000127f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012800: 2020 2020 2020 207c 2048 6f77 206c 6f6e         | How lon
-00012810: 6720 746f 2077 6169 7420 2869 6e20 6d69  g to wait (in mi
-00012820: 6c6c 6973 6563 6f6e 6473 2920 6265 7477  lliseconds) betw
-00012830: 6565 6e20 676f 7373 6970 2072 6574 7269  een gossip retri
-00012840: 6573 2e20 2020 2020 2020 2020 2020 2020  es.             
-00012850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000128a0: 2020 2020 2020 2020 2020 207c 5c6e 7c20             |\n| 
-000128b0: 4b65 6570 416c 6976 6549 6e74 6572 7661  KeepAliveInterva
-000128c0: 6c20 2020 7c20 696e 7465 6765 7220 2864  l   | integer (d
-000128d0: 6566 6175 6c74 3a20 604e 6f6e 6560 2920  efault: `None`) 
-000128e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000128f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012900: 2020 2020 2020 2020 2020 2020 7c20 5468              | Th
-00012910: 6520 7661 6c75 6520 6f66 2074 6865 2022  e value of the "
-00012920: 6772 7063 2e6b 6565 7061 6c69 7665 5f6d  grpc.keepalive_m
-00012930: 7322 2067 5250 4320 6368 616e 6e65 6c20  s" gRPC channel 
-00012940: 6f70 7469 6f6e 2e20 2020 2020 2020 2020  option.         
-00012950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000129a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000129b0: 7c5c 6e7c 204b 6565 7041 6c69 7665 5469  |\n| KeepAliveTi
-000129c0: 6d65 6f75 7420 2020 207c 2069 6e74 6567  meout    | integ
-000129d0: 6572 2028 6465 6661 756c 743a 2060 4e6f  er (default: `No
-000129e0: 6e65 6029 2020 2020 2020 2020 2020 2020  ne`)            
-000129f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012a10: 207c 2054 6865 2076 616c 7565 206f 6620   | The value of 
-00012a20: 7468 6520 2267 7270 632e 6b65 6570 616c  the "grpc.keepal
-00012a30: 6976 655f 7469 6d65 6f75 745f 6d73 2220  ive_timeout_ms" 
-00012a40: 6752 5043 2063 6861 6e6e 656c 206f 7074  gRPC channel opt
-00012a50: 696f 6e2e 2020 2020 2020 2020 2020 2020  ion.            
-00012a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012ab0: 2020 2020 207c 5c6e 5c6e 5c6e 4865 7265       |\n\n\nHere
-00012ac0: 2061 7265 2073 6f6d 6520 6578 616d 706c   are some exampl
-00012ad0: 6573 206f 6620 4576 656e 7453 746f 7265  es of EventStore
-00012ae0: 4442 2063 6f6e 6e65 6374 696f 6e20 7374  DB connection st
-00012af0: 7269 6e67 2055 5249 732e 5c6e 5c6e 2020  ring URIs.\n\n  
-00012b00: 2020 2320 4765 7420 636c 7573 7465 7220    # Get cluster 
-00012b10: 696e 666f 2066 726f 6d20 7365 6375 7265  info from secure
-00012b20: 2073 6572 7665 7220 736f 636b 6574 206c   server socket l
-00012b30: 6f63 616c 686f 7374 3a32 3131 332c 5c6e  ocalhost:2113,\n
-00012b40: 2020 2020 2320 616e 6420 7573 6520 2261      # and use "a
-00012b50: 646d 696e 2220 616e 6420 2263 6861 6e67  dmin" and "chang
-00012b60: 6569 7422 2061 7320 7573 6572 6e61 6d65  eit" as username
-00012b70: 2061 6e64 2070 6173 7377 6f72 645c 6e20   and password\n 
-00012b80: 2020 2023 2077 6865 6e20 6d61 6b69 6e67     # when making
-00012b90: 2063 616c 6c73 2074 6f20 4576 656e 7453   calls to EventS
-00012ba0: 746f 7265 4442 2041 5049 206d 6574 686f  toreDB API metho
-00012bb0: 6473 2e5c 6e5c 6e20 2020 2065 7364 623a  ds.\n\n    esdb:
-00012bc0: 2f2f 6164 6d69 6e3a 6368 616e 6765 6974  //admin:changeit
-00012bd0: 406c 6f63 616c 686f 7374 3a32 3131 335c  @localhost:2113\
-00012be0: 6e5c 6e5c 6e20 2020 2023 2047 6574 2063  n\n\n    # Get c
-00012bf0: 6c75 7374 6572 2069 6e66 6f20 6672 6f6d  luster info from
-00012c00: 2069 6e73 6563 7572 6520 7365 7276 6572   insecure server
-00012c10: 2073 6f63 6b65 7420 3132 372e 302e 302e   socket 127.0.0.
-00012c20: 313a 3231 3134 5c6e 5c6e 2020 2020 6573  1:2114\n\n    es
-00012c30: 6462 3a2f 2f31 3237 2e30 2e30 2e31 3a32  db://127.0.0.1:2
-00012c40: 3131 343f 546c 733d 6661 6c73 655c 6e5c  114?Tls=false\n\
-00012c50: 6e5c 6e20 2020 2023 2047 6574 2063 6c75  n\n    # Get clu
-00012c60: 7374 6572 2069 6e66 6f20 6672 6f6d 2061  ster info from a
-00012c70: 6464 7265 7373 6573 2069 6e20 5c27 415c  ddresses in \'A\
-00012c80: 2720 7265 636f 7264 7320 666f 7220 636c  ' records for cl
-00012c90: 7573 7465 7231 2e65 7861 6d70 6c65 2e63  uster1.example.c
-00012ca0: 6f6d 2c5c 6e20 2020 2023 2061 6e64 2075  om,\n    # and u
-00012cb0: 7365 2061 2064 6566 6175 6c74 2064 6561  se a default dea
-00012cc0: 646c 696e 6520 666f 7220 6d61 6b69 6e67  dline for making
-00012cd0: 2063 616c 6c73 2074 6f20 4576 656e 7453   calls to EventS
-00012ce0: 746f 7265 2041 5049 206d 6574 686f 642e  tore API method.
-00012cf0: 5c6e 5c6e 2020 2020 6573 6462 2b64 6973  \n\n    esdb+dis
-00012d00: 636f 7665 723a 2f2f 6164 6d69 6e3a 6368  cover://admin:ch
-00012d10: 616e 6765 6974 4063 6c75 7374 6572 312e  angeit@cluster1.
-00012d20: 6578 616d 706c 652e 636f 6d3f 4465 6661  example.com?Defa
-00012d30: 756c 7444 6561 646c 696e 653d 355c 6e5c  ultDeadline=5\n\
-00012d40: 6e5c 6e20 2020 2023 2047 6574 2063 6c75  n\n    # Get clu
-00012d50: 7374 6572 2069 6e66 6f20 6672 6f6d 2065  ster info from e
-00012d60: 6974 6865 7220 6c6f 6361 6c68 6f73 743a  ither localhost:
-00012d70: 3231 3131 206f 7220 6c6f 6361 6c68 6f73  2111 or localhos
-00012d80: 743a 3231 3132 206f 725c 6e20 2020 2023  t:2112 or\n    #
-00012d90: 206c 6f63 616c 686f 7374 3a32 3131 332c   localhost:2113,
-00012da0: 2061 6e64 2074 6865 6e20 636f 6e6e 6563   and then connec
-00012db0: 7420 746f 2061 2066 6f6c 6c6f 7765 7220  t to a follower 
-00012dc0: 6e6f 6465 2069 6e20 7468 6520 636c 7573  node in the clus
-00012dd0: 7465 722e 5c6e 5c6e 2020 2020 6573 6462  ter.\n\n    esdb
-00012de0: 3a2f 2f61 646d 696e 3a63 6861 6e67 6569  ://admin:changei
-00012df0: 7440 6c6f 6361 6c68 6f73 743a 3231 3131  t@localhost:2111
-00012e00: 2c6c 6f63 616c 686f 7374 3a32 3131 322c  ,localhost:2112,
-00012e10: 6c6f 6361 6c68 6f73 743a 3231 3133 3f4e  localhost:2113?N
-00012e20: 6f64 6550 7265 6665 7265 6e63 653d 666f  odePreference=fo
-00012e30: 6c6c 6f77 6572 5c6e 5c6e 5c6e 2020 2020  llower\n\n\n    
-00012e40: 2320 4765 7420 636c 7573 7465 7220 696e  # Get cluster in
-00012e50: 666f 2066 726f 6d20 6164 6472 6573 7365  fo from addresse
-00012e60: 7320 696e 205c 2741 5c27 2072 6563 6f72  s in \'A\' recor
-00012e70: 6473 2066 6f72 2063 6c75 7374 6572 312e  ds for cluster1.
-00012e80: 6578 616d 706c 652e 636f 6d2c 5c6e 2020  example.com,\n  
-00012e90: 2020 2320 616e 6420 636f 6e66 6967 7572    # and configur
-00012ea0: 6520 226b 6565 7020 616c 6976 6522 2074  e "keep alive" t
-00012eb0: 696d 656f 7574 2061 6e64 2069 6e74 6572  imeout and inter
-00012ec0: 7661 6c20 696e 2074 6865 2067 5250 4320  val in the gRPC 
-00012ed0: 6368 616e 6e65 6c2e 5c6e 5c6e 2020 2020  channel.\n\n    
-00012ee0: 6573 6462 2b64 6973 636f 7665 723a 2f2f  esdb+discover://
-00012ef0: 6164 6d69 6e3a 6368 616e 6765 6974 4063  admin:changeit@c
-00012f00: 6c75 7374 6572 312e 6578 616d 706c 652e  luster1.example.
-00012f10: 636f 6d3f 4b65 6570 416c 6976 6549 6e74  com?KeepAliveInt
-00012f20: 6572 7661 6c3d 3130 3030 3026 4b65 6570  erval=10000&Keep
-00012f30: 416c 6976 6554 696d 656f 7574 3d31 3030  AliveTimeout=100
-00012f40: 3030 5c6e 5c6e 5c6e 506c 6561 7365 206e  00\n\n\nPlease n
-00012f50: 6f74 652c 2074 6865 2063 6c69 656e 7420  ote, the client 
-00012f60: 6973 2069 6e73 656e 7369 7469 7665 2074  is insensitive t
-00012f70: 6f20 7468 6520 6361 7365 206f 6620 6669  o the case of fi
-00012f80: 656c 6473 2061 6e64 2076 616c 7565 732e  elds and values.
-00012f90: 2049 6620 6669 656c 6473 2061 7265 5c6e   If fields are\n
-00012fa0: 7265 7065 6174 6564 2069 6e20 7468 6520  repeated in the 
-00012fb0: 7175 6572 7920 7374 7269 6e67 2c20 7468  query string, th
-00012fc0: 6520 7175 6572 7920 7374 7269 6e67 2077  e query string w
-00012fd0: 696c 6c20 6265 2070 6172 7365 6420 7769  ill be parsed wi
-00012fe0: 7468 6f75 7420 6572 726f 722e 2048 6f77  thout error. How
-00012ff0: 6576 6572 2c5c 6e74 6865 2063 6f6e 6e65  ever,\nthe conne
-00013000: 6374 696f 6e20 6f70 7469 6f6e 7320 7573  ction options us
-00013010: 6564 2062 7920 7468 6520 636c 6965 6e74  ed by the client
-00013020: 2077 696c 6c20 7573 6520 7468 6520 7661   will use the va
-00013030: 6c75 6520 6f66 2074 6865 2066 6972 7374  lue of the first
-00013040: 2066 6965 6c64 2e20 416c 6c5c 6e74 6865   field. All\nthe
-00013050: 206f 7468 6572 2066 6965 6c64 2d76 616c   other field-val
-00013060: 7565 7320 696e 2074 6865 2071 7565 7279  ues in the query
-00013070: 2073 7472 696e 6720 7769 7468 2074 6865   string with the
-00013080: 2073 616d 6520 6669 656c 6420 6e61 6d65   same field name
-00013090: 2077 696c 6c20 6265 2069 676e 6f72 6564   will be ignored
-000130a0: 2e5c 6e46 6965 6c64 7320 7769 7468 6f75  .\nFields withou
-000130b0: 7420 7661 6c75 6573 2077 696c 6c20 616c  t values will al
-000130c0: 736f 2062 6520 6967 6e6f 7265 642e 5c6e  so be ignored.\n
-000130d0: 5c6e 4966 2074 6865 2063 6c69 656e 745c  \nIf the client\
-000130e0: 2773 206e 6f64 6520 7072 6566 6572 656e  's node preferen
-000130f0: 6365 2069 7320 226c 6561 6465 7222 2061  ce is "leader" a
-00013100: 6e64 2074 6865 206e 6f64 6520 6265 636f  nd the node beco
-00013110: 6d65 7320 615c 6e22 666f 6c6c 6f77 6572  mes a\n"follower
-00013120: 222c 2074 6865 2063 6c69 656e 7420 7769  ", the client wi
-00013130: 6c6c 2061 7474 656d 7074 2074 6f20 7265  ll attempt to re
-00013140: 636f 6e6e 6563 7420 746f 2074 6865 2063  connect to the c
-00013150: 7572 7265 6e74 206c 6561 6465 7220 7768  urrent leader wh
-00013160: 656e 2061 206d 6574 686f 645c 6e69 7320  en a method\nis 
-00013170: 6361 6c6c 6564 2074 6861 7420 6578 7065  called that expe
-00013180: 6374 7320 746f 2063 616c 6c20 6120 6c65  cts to call a le
-00013190: 6164 6572 2e20 4d65 7468 6f64 7320 7768  ader. Methods wh
-000131a0: 6963 6820 6d75 7461 7465 2074 6865 2073  ich mutate the s
-000131b0: 7461 7465 206f 6620 7468 6520 6461 7461  tate of the data
-000131c0: 6261 7365 5c6e 6578 7065 6374 2074 6f20  base\nexpect to 
-000131d0: 6361 6c6c 2061 206c 6561 6465 722e 2046  call a leader. F
-000131e0: 6f72 2073 7563 6820 6d65 7468 6f64 732c  or such methods,
-000131f0: 2074 6865 2048 5454 5020 6865 6164 6572   the HTTP header
-00013200: 2272 6571 7569 7265 732d 6c65 6164 6572  "requires-leader
-00013210: 2220 6973 2073 6574 2074 6f5c 6e22 7472  " is set to\n"tr
-00013220: 7565 222c 2061 6e64 2074 6869 7320 6865  ue", and this he
-00013230: 6164 6572 2069 7320 6f62 7365 7276 6564  ader is observed
-00013240: 2062 7920 7468 6520 7365 7276 6572 2c20   by the server, 
-00013250: 616e 6420 736f 2061 206e 6f64 6520 7768  and so a node wh
-00013260: 6963 6820 6973 206e 6f74 2061 206c 6561  ich is not a lea
-00013270: 6465 725c 6e74 6861 7420 7265 6365 6976  der\nthat receiv
-00013280: 6573 2073 7563 6820 6120 7265 7175 6573  es such a reques
-00013290: 7420 7769 6c6c 2072 6574 7572 6e20 616e  t will return an
-000132a0: 2065 7272 6f72 2e20 5468 6973 2065 7272   error. This err
-000132b0: 6f72 2069 7320 6465 7465 6374 6564 2062  or is detected b
-000132c0: 7920 7468 6520 636c 6965 6e74 2c5c 6e77  y the client,\nw
-000132d0: 6869 6368 2077 696c 6c20 7468 656e 2063  hich will then c
-000132e0: 6c6f 7365 2074 6865 2063 7572 7265 6e74  lose the current
-000132f0: 2067 5250 4320 636f 6e6e 6563 7469 6f6e   gRPC connection
-00013300: 2061 6e64 2063 7265 6174 6520 6120 6e65   and create a ne
-00013310: 7720 636f 6e6e 6563 7469 6f6e 2074 6f20  w connection to 
-00013320: 7468 655c 6e6c 6561 6465 722e 2054 6865  the\nleader. The
-00013330: 2072 6571 7565 7374 2077 696c 6c20 7468   request will th
-00013340: 656e 2062 6520 7265 7472 6965 6420 7769  en be retried wi
-00013350: 7468 2074 6865 206c 6561 6465 722e 5c6e  th the leader.\n
-00013360: 5c6e 4966 2074 6865 2063 6c69 656e 745c  \nIf the client\
-00013370: 2773 206e 6f64 6520 7072 6566 6572 656e  's node preferen
-00013380: 6365 2069 7320 2266 6f6c 6c6f 7765 7222  ce is "follower"
-00013390: 2061 6e64 2074 6865 7265 2061 7265 206e   and there are n
-000133a0: 6f20 666f 6c6c 6f77 6572 5c6e 6e6f 6465  o follower\nnode
-000133b0: 7320 696e 2074 6865 2063 6c75 7374 6572  s in the cluster
-000133c0: 2c20 7468 656e 2074 6865 2063 6c69 656e  , then the clien
-000133d0: 7420 7769 6c6c 2072 6169 7365 2061 6e20  t will raise an 
-000133e0: 6578 6365 7074 696f 6e2e 2053 696d 696c  exception. Simil
-000133f0: 6172 6c79 2c20 6966 2074 6865 5c6e 636c  arly, if the\ncl
-00013400: 6965 6e74 5c27 7320 6e6f 6465 2070 7265  ient\'s node pre
-00013410: 6665 7265 6e63 6520 6973 2022 7265 6164  ference is "read
-00013420: 6f6e 6c79 7265 706c 6963 6122 2061 6e64  onlyreplica" and
-00013430: 2074 6865 7265 2061 7265 206e 6f20 7265   there are no re
-00013440: 6164 2d6f 6e6c 7920 7265 706c 6963 615c  ad-only replica\
-00013450: 6e6e 6f64 6573 2069 6e20 7468 6520 636c  nnodes in the cl
-00013460: 7573 7465 722c 2074 6865 6e20 7468 6520  uster, then the 
-00013470: 636c 6965 6e74 2077 696c 6c20 616c 736f  client will also
-00013480: 2072 6169 7365 2061 6e20 6578 6365 7074   raise an except
-00013490: 696f 6e2e 5c6e 5c6e 5468 6520 6752 5043  ion.\n\nThe gRPC
-000134a0: 2063 6861 6e6e 656c 206f 7074 696f 6e20   channel option 
-000134b0: 2267 7270 632e 6d61 785f 7265 6365 6976  "grpc.max_receiv
-000134c0: 655f 6d65 7373 6167 655f 6c65 6e67 7468  e_message_length
-000134d0: 2220 6973 2061 7574 6f6d 6174 6963 616c  " is automatical
-000134e0: 6c79 5c6e 636f 6e66 6967 7572 6564 2074  ly\nconfigured t
-000134f0: 6f20 7468 6520 7661 6c75 6520 6031 3720  o the value `17 
-00013500: 2a20 3130 3234 202a 2031 3032 3460 2e20  * 1024 * 1024`. 
-00013510: 5468 6973 2076 616c 7565 2063 616e 6e6f  This value canno
-00013520: 7420 6265 2063 6861 6e67 6564 2e5c 6e5c  t be changed.\n\
-00013530: 6e5c 6e23 2323 2052 6567 756c 6172 2065  n\n### Regular e
-00013540: 7870 7265 7373 696f 6e20 6669 6c74 6572  xpression filter
-00013550: 735c 6e5c 6e54 6865 2066 696c 7465 7220  s\n\nThe filter 
-00013560: 6172 6775 6d65 6e74 7320 696e 2060 7265  arguments in `re
-00013570: 6164 5f61 6c6c 5f65 7665 6e74 7328 2960  ad_all_events()`
-00013580: 2c20 6073 7562 7363 7269 6265 5f61 6c6c  , `subscribe_all
-00013590: 5f65 7665 6e74 7328 2960 2c5c 6e60 6372  _events()`,\n`cr
-000135a0: 6561 7465 5f73 7562 7363 7269 7074 696f  eate_subscriptio
-000135b0: 6e28 2960 2061 6e64 2060 636f 6d6d 6974  n()` and `commit
-000135c0: 5f70 6f73 6974 696f 6e28 2960 2061 7265  _position()` are
-000135d0: 2061 7070 6c69 6564 2074 6f20 7468 6520   applied to the 
-000135e0: 6074 7970 6560 5c6e 6174 7472 6962 7574  `type`\nattribut
-000135f0: 6520 6f66 2072 6563 6f72 6465 6420 6576  e of recorded ev
-00013600: 656e 7473 2e5c 6e5c 6e54 6865 2064 6566  ents.\n\nThe def
-00013610: 6175 6c74 2076 616c 7565 206f 6620 7468  ault value of th
-00013620: 6520 6066 696c 7465 725f 6578 636c 7564  e `filter_exclud
-00013630: 6560 2061 7267 756d 656e 7473 2069 7320  e` arguments is 
-00013640: 6465 7369 676e 6564 2074 6f20 6578 636c  designed to excl
-00013650: 7564 655c 6e45 7665 6e74 5374 6f72 6544  ude\nEventStoreD
-00013660: 4220 2273 7973 7465 6d22 2061 6e64 2022  B "system" and "
-00013670: 7065 7273 6973 7465 6e63 6520 7375 6273  persistence subs
-00013680: 6372 6970 7469 6f6e 2063 6f6e 6669 6722  cription config"
-00013690: 2065 7665 6e74 732c 2077 6869 6368 5c6e   events, which\n
-000136a0: 6f74 6865 7277 6973 6520 776f 756c 6420  otherwise would 
-000136b0: 6265 2069 6e63 6c75 6465 642e 2053 7973  be included. Sys
-000136c0: 7465 6d20 6576 656e 7473 2067 656e 6572  tem events gener
-000136d0: 6174 6564 2062 7920 4576 656e 7453 746f  ated by EventSto
-000136e0: 7265 4442 2061 6c6c 5c6e 6861 7665 2060  reDB all\nhave `
-000136f0: 7479 7065 6020 7374 7269 6e67 7320 7468  type` strings th
-00013700: 6174 2073 7461 7274 2077 6974 6820 7468  at start with th
-00013710: 6520 6024 6020 7369 676e 2e20 5065 7273  e `$` sign. Pers
-00013720: 6973 7465 6e63 6520 7375 6273 6372 6970  istence subscrip
-00013730: 7469 6f6e 5c6e 6576 656e 7473 2067 656e  tion\nevents gen
-00013740: 6572 6174 6564 2077 6865 6e20 6d61 6e69  erated when mani
-00013750: 7075 6c61 7469 6e67 2070 6572 7369 7374  pulating persist
-00013760: 656e 6365 2073 7562 7363 7269 7074 696f  ence subscriptio
-00013770: 6e73 2061 6c6c 2068 6176 6520 6074 7970  ns all have `typ
-00013780: 6560 5c6e 7374 7269 6e67 7320 7468 6174  e`\nstrings that
-00013790: 2073 7461 7274 2077 6974 6820 6050 6572   start with `Per
-000137a0: 7369 7374 656e 7443 6f6e 6669 6760 2e5c  sistentConfig`.\
-000137b0: 6e5c 6e46 6f72 2065 7861 6d70 6c65 2c20  n\nFor example, 
-000137c0: 746f 206d 6174 6368 2074 6865 2074 7970  to match the typ
-000137d0: 6520 6f66 2045 7665 6e74 5374 6f72 6544  e of EventStoreD
-000137e0: 4220 7379 7374 656d 2065 7665 6e74 732c  B system events,
-000137f0: 2075 7365 2074 6865 2072 6567 756c 6172   use the regular
-00013800: 5c6e 6578 7072 6573 7369 6f6e 2060 725c  \nexpression `r\
-00013810: 275c 5c24 2e2b 5c27 602e 2050 6c65 6173  '\\$.+\'`. Pleas
-00013820: 6520 6e6f 7465 2c20 7468 6520 636f 6e73  e note, the cons
-00013830: 7461 6e74 2060 4553 4442 5f53 5953 5445  tant `ESDB_SYSTE
-00013840: 4d5f 4556 454e 5453 5f52 4547 4558 6020  M_EVENTS_REGEX` 
-00013850: 6973 5c6e 7365 7420 746f 2060 725c 275c  is\nset to `r\'\
-00013860: 5c24 2e2b 5c27 602e 2059 6f75 2063 616e  \$.+\'`. You can
-00013870: 2069 6d70 6f72 7420 7468 6973 2076 616c   import this val
-00013880: 7565 5c6e 2860 6672 6f6d 2065 7364 6263  ue\n(`from esdbc
-00013890: 6c69 656e 7420 696d 706f 7274 2045 5344  lient import ESD
-000138a0: 425f 5359 5354 454d 5f45 5645 4e54 535f  B_SYSTEM_EVENTS_
-000138b0: 5245 4745 5860 2920 616e 6420 7573 655c  REGEX`) and use\
-000138c0: 6e69 7420 7768 656e 2062 7569 6c64 696e  nit when buildin
-000138d0: 6720 6c6f 6e67 6572 2073 6571 7565 6e63  g longer sequenc
-000138e0: 6573 206f 6620 7265 6775 6c61 7220 6578  es of regular ex
-000138f0: 7072 6573 7369 6f6e 732e 5c6e 5c6e 5369  pressions.\n\nSi
-00013900: 6d69 6c61 726c 792c 2074 6f20 6d61 7463  milarly, to matc
-00013910: 6820 7468 6520 7479 7065 206f 6620 4576  h the type of Ev
-00013920: 656e 7453 746f 7265 4442 2070 6572 7369  entStoreDB persi
-00013930: 7374 656e 6365 2073 7562 7363 7269 7074  stence subscript
-00013940: 696f 6e20 6576 656e 7473 2c20 7573 6520  ion events, use 
-00013950: 7468 655c 6e72 6567 756c 6172 2065 7870  the\nregular exp
-00013960: 7265 7373 696f 6e20 6072 5c27 5065 7273  ression `r\'Pers
-00013970: 6973 7465 6e74 436f 6e66 6967 5c5c 642b  istentConfig\\d+
-00013980: 5c27 602e 2054 6865 2063 6f6e 7374 616e  \'`. The constan
-00013990: 7420 6045 5344 425f 5045 5253 4953 5445  t `ESDB_PERSISTE
-000139a0: 4e54 5f43 4f4e 4649 475f 4556 454e 5453  NT_CONFIG_EVENTS
-000139b0: 5f52 4547 4558 605c 6e69 7320 7365 7420  _REGEX`\nis set 
-000139c0: 746f 2060 725c 2750 6572 7369 7374 656e  to `r\'Persisten
-000139d0: 7443 6f6e 6669 675c 5c64 2b5c 2760 2e20  tConfig\\d+\'`. 
-000139e0: 596f 7520 6361 6e20 616c 736f 2069 6d70  You can also imp
-000139f0: 6f72 7420 7468 6973 2076 616c 7565 5c6e  ort this value\n
-00013a00: 2860 6672 6f6d 2065 7364 6263 6c69 656e  (`from esdbclien
-00013a10: 7420 696d 706f 7274 2045 5344 425f 5045  t import ESDB_PE
-00013a20: 5253 4953 5445 4e54 5f43 4f4e 4649 475f  RSISTENT_CONFIG_
-00013a30: 4556 454e 5453 5f52 4547 4558 6029 2061  EVENTS_REGEX`) a
-00013a40: 6e64 2075 7365 2069 7420 7768 656e 2062  nd use it when b
-00013a50: 7569 6c64 696e 675c 6e6c 6f6e 6765 7220  uilding\nlonger 
-00013a60: 7365 7175 656e 6365 7320 6f66 2072 6567  sequences of reg
-00013a70: 756c 6172 2065 7870 7265 7373 696f 6e73  ular expressions
-00013a80: 2e5c 6e5c 6e54 6865 2063 6f6e 7374 616e  .\n\nThe constan
-00013a90: 7420 6044 4546 4155 4c54 5f45 5843 4c55  t `DEFAULT_EXCLU
-00013aa0: 4445 5f46 494c 5445 5260 2069 7320 6120  DE_FILTER` is a 
-00013ab0: 7365 7175 656e 6365 206f 6620 7265 6775  sequence of regu
-00013ac0: 6c61 7220 6578 7072 6573 7369 6f6e 7320  lar expressions 
-00013ad0: 7468 6174 206d 6174 6368 5c6e 7468 6520  that match\nthe 
-00013ae0: 6576 656e 7473 2074 6861 7420 4576 656e  events that Even
-00013af0: 7453 746f 7265 4442 2067 656e 6572 6174  tStoreDB generat
-00013b00: 6573 2069 6e74 6572 6e61 6c6c 792c 2065  es internally, e
-00013b10: 7665 6e74 7320 7468 6174 2061 7265 2065  vents that are e
-00013b20: 7874 7261 6e65 6f75 7320 746f 2074 686f  xtraneous to tho
-00013b30: 7365 5c6e 7768 6963 6820 796f 7520 6170  se\nwhich you ap
-00013b40: 7065 6e64 2075 7369 6e67 2074 6865 2060  pend using the `
-00013b50: 6170 7065 6e64 5f65 7665 6e74 7328 2960  append_events()`
-00013b60: 206d 6574 686f 642e 5c6e 5c6e 466f 7220   method.\n\nFor 
-00013b70: 6578 616d 706c 652c 2074 6f20 6578 636c  example, to excl
-00013b80: 7564 6520 7379 7374 656d 2065 7665 6e74  ude system event
-00013b90: 7320 616e 6420 7065 7273 6973 7465 6e63  s and persistenc
-00013ba0: 6520 7375 6273 6372 6970 7469 6f6e 2063  e subscription c
-00013bb0: 6f6e 6669 6775 7261 7469 6f6e 2065 7665  onfiguration eve
-00013bc0: 6e74 732c 5c6e 616e 6420 736e 6170 7368  nts,\nand snapsh
-00013bd0: 6f74 732c 2079 6f75 206d 6967 6874 2075  ots, you might u
-00013be0: 7365 2074 6865 2073 6571 7565 6e63 6520  se the sequence 
-00013bf0: 6044 4546 4155 4c54 5f45 5843 4c55 4445  `DEFAULT_EXCLUDE
-00013c00: 5f46 494c 5445 5220 2b20 5b5c 272e 2a53  _FILTER + [\'.*S
-00013c10: 6e61 7073 686f 745c 275d 6020 6173 5c6e  napshot\']` as\n
-00013c20: 7468 6520 7661 6c75 6520 6f66 2074 6865  the value of the
-00013c30: 2060 6669 6c74 6572 5f65 7863 6c75 6465   `filter_exclude
-00013c40: 6020 6172 6775 6d65 6e74 2077 6865 6e20  ` argument when 
-00013c50: 6361 6c6c 696e 6720 6072 6561 645f 616c  calling `read_al
-00013c60: 6c5f 6576 656e 7473 2829 602c 5c6e 6073  l_events()`,\n`s
-00013c70: 7562 7363 7269 6265 5f61 6c6c 5f65 7665  ubscribe_all_eve
-00013c80: 6e74 7328 2960 2c20 6063 7265 6174 655f  nts()`, `create_
-00013c90: 7375 6273 6372 6970 7469 6f6e 2829 6020  subscription()` 
-00013ca0: 6f72 2060 6765 745f 636f 6d6d 6974 5f70  or `get_commit_p
-00013cb0: 6f73 6974 696f 6e28 2960 2e5c 6e5c 6e23  osition()`.\n\n#
-00013cc0: 2323 204e 6577 2065 7665 6e74 206f 626a  ## New event obj
-00013cd0: 6563 7473 5c6e 5c6e 5468 6520 604e 6577  ects\n\nThe `New
-00013ce0: 4576 656e 7460 2063 6c61 7373 2069 7320  Event` class is 
-00013cf0: 7573 6564 2077 6865 6e20 6170 7065 6e64  used when append
-00013d00: 696e 6720 6576 656e 7473 2e5c 6e5c 6e54  ing events.\n\nT
-00013d10: 6865 2072 6571 7569 7265 6420 6172 6775  he required argu
-00013d20: 6d65 6e74 2060 7479 7065 6020 6973 2061  ment `type` is a
-00013d30: 2050 7974 686f 6e20 6073 7472 6020 6f62   Python `str` ob
-00013d40: 6a65 6374 2c20 7573 6564 2074 6f20 696e  ject, used to in
-00013d50: 6469 6361 7465 2074 6865 2074 7970 6520  dicate the type 
-00013d60: 6f66 5c6e 7468 6520 6576 656e 7420 7468  of\nthe event th
-00013d70: 6174 2077 696c 6c20 6265 2072 6563 6f72  at will be recor
-00013d80: 6465 642e 5c6e 5c6e 5468 6520 7265 7175  ded.\n\nThe requ
-00013d90: 6972 6564 2061 7267 756d 656e 7420 6064  ired argument `d
-00013da0: 6174 6160 2069 7320 6120 5079 7468 6f6e  ata` is a Python
-00013db0: 2060 6279 7465 7360 206f 626a 6563 742c   `bytes` object,
-00013dc0: 2075 7365 6420 746f 2069 6e64 6963 6174   used to indicat
-00013dd0: 6520 7468 6520 6461 7461 206f 665c 6e74  e the data of\nt
-00013de0: 6865 2065 7665 6e74 2074 6861 7420 7769  he event that wi
-00013df0: 6c6c 2062 6520 7265 636f 7264 6564 2e5c  ll be recorded.\
-00013e00: 6e5c 6e54 6865 206f 7074 696f 6e61 6c20  n\nThe optional 
-00013e10: 6172 6775 6d65 6e74 2060 6d65 7461 6461  argument `metada
-00013e20: 7461 6020 6973 2061 2050 7974 686f 6e20  ta` is a Python 
-00013e30: 6062 7974 6573 6020 6f62 6a65 6374 2c20  `bytes` object, 
-00013e40: 7573 6564 2074 6f20 696e 6469 6361 7465  used to indicate
-00013e50: 2061 6e79 5c6e 6d65 7461 6461 7461 206f   any\nmetadata o
-00013e60: 6620 7468 6520 6576 656e 7420 7468 6174  f the event that
-00013e70: 2077 696c 6c20 6265 2072 6563 6f72 6465   will be recorde
-00013e80: 642e 2054 6865 2064 6566 6175 6c74 2076  d. The default v
-00013e90: 616c 7565 2069 7320 616e 2065 6d70 7479  alue is an empty
-00013ea0: 2060 6279 7465 7360 5c6e 6f62 6a65 6374   `bytes`\nobject
-00013eb0: 2e5c 6e5c 6e54 6865 206f 7074 696f 6e61  .\n\nThe optiona
-00013ec0: 6c20 6172 6775 6d65 6e74 2060 636f 6e74  l argument `cont
-00013ed0: 656e 745f 7479 7065 6020 6973 2061 2050  ent_type` is a P
-00013ee0: 7974 686f 6e20 6073 7472 6020 6f62 6a65  ython `str` obje
-00013ef0: 6374 2c20 7573 6564 2074 6f20 696e 6469  ct, used to indi
-00013f00: 6361 7465 2074 6865 5c6e 7479 7065 206f  cate the\ntype o
-00013f10: 6620 7468 6520 6461 7461 2074 6861 7420  f the data that 
-00013f20: 7769 6c6c 2062 6520 7265 636f 7264 6564  will be recorded
-00013f30: 2066 6f72 2074 6869 7320 6576 656e 742e   for this event.
-00013f40: 2054 6865 2064 6566 6175 6c74 2076 616c   The default val
-00013f50: 7565 2069 735c 6e60 6170 706c 6963 6174  ue is\n`applicat
-00013f60: 696f 6e2f 6a73 6f6e 602c 2077 6869 6368  ion/json`, which
-00013f70: 2069 6e64 6963 6174 6573 2074 6861 7420   indicates that 
-00013f80: 7468 6520 6064 6174 6160 2077 6173 2073  the `data` was s
-00013f90: 6572 6961 6c69 7365 6420 7573 696e 6720  erialised using 
-00013fa0: 4a53 4f4e 2e5c 6e41 6e20 616c 7465 726e  JSON.\nAn altern
-00013fb0: 6174 6976 6520 7661 6c75 6520 666f 7220  ative value for 
-00013fc0: 7468 6973 2061 7267 756d 656e 7420 6973  this argument is
-00013fd0: 2060 6170 706c 6963 6174 696f 6e2f 6f63   `application/oc
-00013fe0: 7465 742d 7374 7265 616d 602e 5c6e 5c6e  tet-stream`.\n\n
-00013ff0: 5468 6520 6f70 7469 6f6e 616c 2061 7267  The optional arg
-00014000: 756d 656e 7420 6069 6460 2069 7320 6120  ument `id` is a 
-00014010: 5079 7468 6f6e 2060 5555 4944 6020 6f62  Python `UUID` ob
-00014020: 6a65 6374 2c20 7573 6564 2074 6f20 7370  ject, used to sp
-00014030: 6563 6966 7920 7468 6520 756e 6971 7565  ecify the unique
-00014040: 2049 445c 6e6f 6620 7468 6520 6576 656e   ID\nof the even
-00014050: 7420 7468 6174 2077 696c 6c20 6265 2072  t that will be r
-00014060: 6563 6f72 6465 642e 2054 6869 7320 7661  ecorded. This va
-00014070: 6c75 6520 7769 6c6c 2064 6566 6175 6c74  lue will default
-00014080: 2074 6f20 6120 6e65 7720 7665 7273 696f   to a new versio
-00014090: 6e2d 3420 5555 4944 2e5c 6e5c 6e60 6060  n-4 UUID.\n\n```
-000140a0: 7079 7468 6f6e 5c6e 6e65 775f 6576 656e  python\nnew_even
-000140b0: 7431 203d 204e 6577 4576 656e 7428 5c6e  t1 = NewEvent(\n
-000140c0: 2020 2020 7479 7065 3d5c 274f 7264 6572      type=\'Order
-000140d0: 4372 6561 7465 645c 272c 5c6e 2020 2020  Created\',\n    
-000140e0: 6461 7461 3d62 5c27 7b22 6e61 6d65 223a  data=b\'{"name":
-000140f0: 2022 4772 6567 227d 5c27 2c5c 6e29 5c6e   "Greg"}\',\n)\n
-00014100: 6173 7365 7274 206e 6577 5f65 7665 6e74  assert new_event
-00014110: 312e 7479 7065 203d 3d20 5c27 4f72 6465  1.type == \'Orde
-00014120: 7243 7265 6174 6564 5c27 5c6e 6173 7365  rCreated\'\nasse
-00014130: 7274 206e 6577 5f65 7665 6e74 312e 6461  rt new_event1.da
-00014140: 7461 203d 3d20 625c 277b 226e 616d 6522  ta == b\'{"name"
-00014150: 3a20 2247 7265 6722 7d5c 275c 6e61 7373  : "Greg"}\'\nass
-00014160: 6572 7420 6e65 775f 6576 656e 7431 2e6d  ert new_event1.m
-00014170: 6574 6164 6174 6120 3d3d 2062 5c27 5c27  etadata == b\'\'
-00014180: 5c6e 6173 7365 7274 206e 6577 5f65 7665  \nassert new_eve
-00014190: 6e74 312e 636f 6e74 656e 745f 7479 7065  nt1.content_type
-000141a0: 203d 3d20 5c27 6170 706c 6963 6174 696f   == \'applicatio
-000141b0: 6e2f 6a73 6f6e 5c27 5c6e 6173 7365 7274  n/json\'\nassert
-000141c0: 2069 7369 6e73 7461 6e63 6528 6e65 775f   isinstance(new_
-000141d0: 6576 656e 7431 2e69 642c 2055 5549 4429  event1.id, UUID)
-000141e0: 5c6e 5c6e 6576 656e 745f 6964 203d 2075  \n\nevent_id = u
-000141f0: 7569 6434 2829 5c6e 6e65 775f 6576 656e  uid4()\nnew_even
-00014200: 7432 203d 204e 6577 4576 656e 7428 5c6e  t2 = NewEvent(\n
-00014210: 2020 2020 7479 7065 3d5c 2749 6d61 6765      type=\'Image
-00014220: 4372 6561 7465 645c 272c 5c6e 2020 2020  Created\',\n    
-00014230: 6461 7461 3d62 5c27 3031 3031 3031 3031  data=b\'01010101
-00014240: 3031 3031 3031 5c27 2c5c 6e20 2020 206d  010101\',\n    m
-00014250: 6574 6164 6174 613d 625c 277b 2261 223a  etadata=b\'{"a":
-00014260: 2031 7d5c 272c 5c6e 2020 2020 636f 6e74   1}\',\n    cont
-00014270: 656e 745f 7479 7065 3d5c 2761 7070 6c69  ent_type=\'appli
-00014280: 6361 7469 6f6e 2f6f 6374 6574 2d73 7472  cation/octet-str
-00014290: 6561 6d5c 272c 5c6e 2020 2020 6964 3d65  eam\',\n    id=e
-000142a0: 7665 6e74 5f69 642c 5c6e 295c 6e61 7373  vent_id,\n)\nass
-000142b0: 6572 7420 6e65 775f 6576 656e 7432 2e74  ert new_event2.t
-000142c0: 7970 6520 3d3d 205c 2749 6d61 6765 4372  ype == \'ImageCr
-000142d0: 6561 7465 645c 275c 6e61 7373 6572 7420  eated\'\nassert 
-000142e0: 6e65 775f 6576 656e 7432 2e64 6174 6120  new_event2.data 
-000142f0: 3d3d 2062 5c27 3031 3031 3031 3031 3031  == b\'0101010101
-00014300: 3031 3031 5c27 5c6e 6173 7365 7274 206e  0101\'\nassert n
-00014310: 6577 5f65 7665 6e74 322e 6d65 7461 6461  ew_event2.metada
-00014320: 7461 203d 3d20 625c 277b 2261 223a 2031  ta == b\'{"a": 1
-00014330: 7d5c 275c 6e61 7373 6572 7420 6e65 775f  }\'\nassert new_
-00014340: 6576 656e 7432 2e63 6f6e 7465 6e74 5f74  event2.content_t
-00014350: 7970 6520 3d3d 205c 2761 7070 6c69 6361  ype == \'applica
-00014360: 7469 6f6e 2f6f 6374 6574 2d73 7472 6561  tion/octet-strea
-00014370: 6d5c 275c 6e61 7373 6572 7420 6e65 775f  m\'\nassert new_
-00014380: 6576 656e 7432 2e69 6420 3d3d 2065 7665  event2.id == eve
-00014390: 6e74 5f69 645c 6e60 6060 5c6e 5c6e 2323  nt_id\n```\n\n##
-000143a0: 2320 5265 636f 7264 6564 2065 7665 6e74  # Recorded event
-000143b0: 206f 626a 6563 7473 5c6e 5c6e 5468 6520   objects\n\nThe 
-000143c0: 6052 6563 6f72 6465 6445 7665 6e74 6020  `RecordedEvent` 
-000143d0: 636c 6173 7320 6973 2075 7365 6420 7768  class is used wh
-000143e0: 656e 2072 6561 6469 6e67 2065 7665 6e74  en reading event
-000143f0: 732e 5c6e 5c6e 5468 6520 6174 7472 6962  s.\n\nThe attrib
-00014400: 7574 6520 6074 7970 6560 2069 7320 6120  ute `type` is a 
-00014410: 5079 7468 6f6e 2060 7374 7260 206f 626a  Python `str` obj
-00014420: 6563 742c 2075 7365 6420 746f 2069 6e64  ect, used to ind
-00014430: 6963 6174 6520 7468 6520 7479 7065 206f  icate the type o
-00014440: 6620 6576 656e 745c 6e74 6861 7420 7761  f event\nthat wa
-00014450: 7320 7265 636f 7264 6564 2e5c 6e5c 6e54  s recorded.\n\nT
-00014460: 6865 2061 7474 7269 6275 7465 2060 6461  he attribute `da
-00014470: 7461 6020 6973 2061 2050 7974 686f 6e20  ta` is a Python 
-00014480: 6062 7974 6573 6020 6f62 6a65 6374 2c20  `bytes` object, 
-00014490: 7573 6564 2074 6f20 696e 6469 6361 7465  used to indicate
-000144a0: 2074 6865 2064 6174 6120 6f66 2074 6865   the data of the
-000144b0: 5c6e 6576 656e 7420 7468 6174 2077 6173  \nevent that was
-000144c0: 2072 6563 6f72 6465 642e 5c6e 5c6e 5468   recorded.\n\nTh
-000144d0: 6520 6174 7472 6962 7574 6520 606d 6574  e attribute `met
-000144e0: 6164 6174 6160 2069 7320 6120 5079 7468  adata` is a Pyth
-000144f0: 6f6e 2060 6279 7465 7360 206f 626a 6563  on `bytes` objec
-00014500: 742c 2075 7365 6420 746f 2069 6e64 6963  t, used to indic
-00014510: 6174 6520 7468 6520 6d65 7461 6461 7461  ate the metadata
-00014520: 206f 665c 6e74 6865 2065 7665 6e74 2074   of\nthe event t
-00014530: 6861 7420 7761 7320 7265 636f 7264 6564  hat was recorded
-00014540: 2e5c 6e5c 6e54 6865 2061 7474 7269 6275  .\n\nThe attribu
-00014550: 7465 2060 636f 6e74 656e 745f 7479 7065  te `content_type
-00014560: 6020 6973 2061 2050 7974 686f 6e20 6073  ` is a Python `s
-00014570: 7472 6020 6f62 6a65 6374 2c20 7573 6564  tr` object, used
-00014580: 2074 6f20 696e 6469 6361 7465 2074 6865   to indicate the
-00014590: 2074 7970 6520 6f66 5c6e 6461 7461 2074   type of\ndata t
-000145a0: 6861 7420 7761 7320 7265 636f 7264 6564  hat was recorded
-000145b0: 2066 6f72 2074 6869 7320 6576 656e 7420   for this event 
-000145c0: 2875 7375 616c 6c79 2060 6170 706c 6963  (usually `applic
-000145d0: 6174 696f 6e2f 6a73 6f6e 6020 746f 2069  ation/json` to i
-000145e0: 6e64 6963 6174 6520 7468 6174 5c6e 7468  ndicate that\nth
-000145f0: 6973 2064 6174 6120 6361 6e20 6265 2070  is data can be p
-00014600: 6172 7365 6420 6173 204a 534f 4e2c 2062  arsed as JSON, b
-00014610: 7574 2061 6c74 6572 6e61 7469 7665 6c79  ut alternatively
-00014620: 2060 6170 706c 6963 6174 696f 6e2f 6f63   `application/oc
-00014630: 7465 742d 7374 7265 616d 6020 746f 5c6e  tet-stream` to\n
-00014640: 696e 6469 6361 7465 2074 6861 7420 6974  indicate that it
-00014650: 2069 7320 736f 6d65 7468 696e 6720 656c   is something el
-00014660: 7365 292e 5c6e 5c6e 5468 6520 6174 7472  se).\n\nThe attr
-00014670: 6962 7574 6520 6069 6460 2069 7320 6120  ibute `id` is a 
-00014680: 5079 7468 6f6e 2060 5555 4944 6020 6f62  Python `UUID` ob
-00014690: 6a65 6374 2c20 7573 6564 2074 6f20 696e  ject, used to in
-000146a0: 6469 6361 7465 2074 6865 2075 6e69 7175  dicate the uniqu
-000146b0: 6520 4944 206f 6620 7468 655c 6e65 7665  e ID of the\neve
-000146c0: 6e74 2074 6861 7420 7761 7320 7265 636f  nt that was reco
-000146d0: 7264 6564 2e20 506c 6561 7365 206e 6f74  rded. Please not
-000146e0: 652c 2077 6865 6e20 7265 636f 7264 6564  e, when recorded
-000146f0: 2065 7665 6e74 7320 6172 6520 7265 7475   events are retu
-00014700: 726e 6564 2066 726f 6d20 6120 6361 6c6c  rned from a call
-00014710: 5c6e 746f 2060 7265 6164 5f73 7472 6561  \nto `read_strea
-00014720: 6d5f 6576 656e 7473 2829 6020 696e 2045  m_events()` in E
-00014730: 7665 6e74 5374 6f72 6544 4220 7632 312e  ventStoreDB v21.
-00014740: 3130 2c20 7468 6520 636f 6d6d 6974 2070  10, the commit p
-00014750: 6f73 6974 696f 6e20 6973 206e 6f74 2061  osition is not a
-00014760: 6374 7561 6c6c 795c 6e73 6574 2069 6e20  ctually\nset in 
-00014770: 7468 6520 7265 7370 6f6e 7365 2e20 5468  the response. Th
-00014780: 6973 2061 7474 7269 6275 7465 2069 7320  is attribute is 
-00014790: 7479 7065 6420 6173 2061 6e20 6f70 7469  typed as an opti
-000147a0: 6f6e 616c 2076 616c 7565 2028 604f 7074  onal value (`Opt
-000147b0: 696f 6e61 6c5b 5555 4944 5d60 292c 5c6e  ional[UUID]`),\n
-000147c0: 616e 6420 696e 2074 6865 2063 6173 6520  and in the case 
-000147d0: 6f66 2075 7369 6e67 2045 7665 6e74 5374  of using EventSt
-000147e0: 6f72 6544 4220 7632 312e 3130 2074 6865  oreDB v21.10 the
-000147f0: 2076 616c 7565 206f 6620 7468 6973 2061   value of this a
-00014800: 7474 7269 6275 7465 2077 696c 6c20 6265  ttribute will be
-00014810: 2060 4e6f 6e65 605c 6e77 6865 6e20 7265   `None`\nwhen re
-00014820: 6164 696e 6720 7265 636f 7264 6564 2065  ading recorded e
-00014830: 7665 6e74 7320 6672 6f6d 2061 2073 7472  vents from a str
-00014840: 6561 6d2e 2052 6563 6f72 6465 6420 6576  eam. Recorded ev
-00014850: 656e 7473 2077 696c 6c20 686f 7765 7665  ents will howeve
-00014860: 7220 6861 7665 2074 6869 735c 6e76 616c  r have this\nval
-00014870: 7565 7320 7365 7420 7768 656e 2072 6561  ues set when rea
-00014880: 6469 6e67 2072 6563 6f72 6465 6420 6576  ding recorded ev
-00014890: 656e 7473 2066 726f 6d20 6072 6561 645f  ents from `read_
-000148a0: 616c 6c5f 6576 656e 7473 2829 6020 616e  all_events()` an
-000148b0: 6420 6672 6f6d 2062 6f74 685c 6e63 6174  d from both\ncat
-000148c0: 6368 2d75 7020 616e 6420 7065 7273 6973  ch-up and persis
-000148d0: 7465 6e74 2073 7562 7363 7269 7074 696f  tent subscriptio
-000148e0: 6e73 2e5c 6e5c 6e54 6865 2061 7474 7269  ns.\n\nThe attri
-000148f0: 6275 7465 2060 7374 7265 616d 5f6e 616d  bute `stream_nam
-00014900: 6560 2069 7320 6120 5079 7468 6f6e 2060  e` is a Python `
-00014910: 7374 7260 206f 626a 6563 742c 2075 7365  str` object, use
-00014920: 6420 746f 2069 6e64 6963 6174 6520 7468  d to indicate th
-00014930: 6520 6e61 6d65 206f 6620 7468 655c 6e73  e name of the\ns
-00014940: 7472 6561 6d20 696e 2077 6869 6368 2074  tream in which t
-00014950: 6865 2065 7665 6e74 2077 6173 2072 6563  he event was rec
-00014960: 6f72 6465 642e 5c6e 5c6e 5468 6520 6174  orded.\n\nThe at
-00014970: 7472 6962 7574 6520 6073 7472 6561 6d5f  tribute `stream_
-00014980: 706f 7369 7469 6f6e 6020 6973 2061 2050  position` is a P
-00014990: 7974 686f 6e20 6069 6e74 602c 2075 7365  ython `int`, use
-000149a0: 6420 746f 2069 6e64 6963 6174 6520 7468  d to indicate th
-000149b0: 6520 706f 7369 7469 6f6e 2069 6e20 7468  e position in th
-000149c0: 655c 6e73 7472 6561 6d20 6174 2077 6869  e\nstream at whi
-000149d0: 6368 2074 6865 2065 7665 6e74 2077 6173  ch the event was
-000149e0: 2072 6563 6f72 6465 642e 5c6e 5c6e 5468   recorded.\n\nTh
-000149f0: 6520 6174 7472 6962 7574 6520 6063 6f6d  e attribute `com
-00014a00: 6d69 745f 706f 7369 7469 6f6e 6020 6973  mit_position` is
-00014a10: 2061 2050 7974 686f 6e20 6069 6e74 602c   a Python `int`,
-00014a20: 2075 7365 6420 746f 2069 6e64 6963 6174   used to indicat
-00014a30: 6520 7468 6520 636f 6d6d 6974 2070 6f73  e the commit pos
-00014a40: 6974 696f 6e5c 6e61 7420 7768 6963 6820  ition\nat which 
-00014a50: 7468 6520 6576 656e 7420 7761 7320 7265  the event was re
-00014a60: 636f 7264 6564 2e5c 6e5c 6e60 6060 7079  corded.\n\n```py
-00014a70: 7468 6f6e 5c6e 6672 6f6d 2065 7364 6263  thon\nfrom esdbc
-00014a80: 6c69 656e 742e 6576 656e 7473 2069 6d70  lient.events imp
-00014a90: 6f72 7420 5265 636f 7264 6564 4576 656e  ort RecordedEven
-00014aa0: 745c 6e5c 6e72 6563 6f72 6465 645f 6576  t\n\nrecorded_ev
-00014ab0: 656e 7420 3d20 5265 636f 7264 6564 4576  ent = RecordedEv
-00014ac0: 656e 7428 5c6e 2020 2020 7479 7065 3d5c  ent(\n    type=\
-00014ad0: 274f 7264 6572 4372 6561 7465 645c 272c  'OrderCreated\',
-00014ae0: 5c6e 2020 2020 6461 7461 3d62 5c27 7b7d  \n    data=b\'{}
-00014af0: 5c27 2c5c 6e20 2020 206d 6574 6164 6174  \',\n    metadat
-00014b00: 613d 625c 275c 272c 5c6e 2020 2020 636f  a=b\'\',\n    co
-00014b10: 6e74 656e 745f 7479 7065 3d5c 2761 7070  ntent_type=\'app
-00014b20: 6c69 6361 7469 6f6e 2f6a 736f 6e5c 272c  lication/json\',
-00014b30: 5c6e 2020 2020 6964 3d75 7569 6434 2829  \n    id=uuid4()
-00014b40: 2c5c 6e20 2020 2073 7472 6561 6d5f 6e61  ,\n    stream_na
-00014b50: 6d65 3d5c 2773 7472 6561 6d31 5c27 2c5c  me=\'stream1\',\
-00014b60: 6e20 2020 2073 7472 6561 6d5f 706f 7369  n    stream_posi
-00014b70: 7469 6f6e 3d30 2c5c 6e20 2020 2063 6f6d  tion=0,\n    com
-00014b80: 6d69 745f 706f 7369 7469 6f6e 3d35 3132  mit_position=512
-00014b90: 2c5c 6e29 5c6e 6060 605c 6e5c 6e23 2320  ,\n)\n```\n\n## 
-00014ba0: 436f 6e74 7269 6275 746f 7273 5c6e 5c6e  Contributors\n\n
-00014bb0: 2323 2320 496e 7374 616c 6c20 506f 6574  ### Install Poet
-00014bc0: 7279 5c6e 5c6e 5468 6520 6669 7273 7420  ry\n\nThe first 
-00014bd0: 7468 696e 6720 6973 2074 6f20 6368 6563  thing is to chec
-00014be0: 6b20 796f 7520 6861 7665 2050 6f65 7472  k you have Poetr
-00014bf0: 7920 696e 7374 616c 6c65 642e 5c6e 5c6e  y installed.\n\n
-00014c00: 2020 2020 2420 706f 6574 7279 202d 2d76      $ poetry --v
-00014c10: 6572 7369 6f6e 5c6e 5c6e 4966 2079 6f75  ersion\n\nIf you
-00014c20: 2064 6f6e 5c27 742c 2074 6865 6e20 706c   don\'t, then pl
-00014c30: 6561 7365 205b 696e 7374 616c 6c20 506f  ease [install Po
-00014c40: 6574 7279 5d28 6874 7470 733a 2f2f 7079  etry](https://py
-00014c50: 7468 6f6e 2d70 6f65 7472 792e 6f72 672f  thon-poetry.org/
-00014c60: 646f 6373 2f23 696e 7374 616c 6c69 6e67  docs/#installing
-00014c70: 2d77 6974 682d 7468 652d 6f66 6669 6369  -with-the-offici
-00014c80: 616c 2d69 6e73 7461 6c6c 6572 292e 5c6e  al-installer).\n
-00014c90: 5c6e 2020 2020 2420 6375 726c 202d 7353  \n    $ curl -sS
-00014ca0: 4c20 6874 7470 733a 2f2f 696e 7374 616c  L https://instal
-00014cb0: 6c2e 7079 7468 6f6e 2d70 6f65 7472 792e  l.python-poetry.
-00014cc0: 6f72 6720 7c20 7079 7468 6f6e 3320 2d5c  org | python3 -\
-00014cd0: 6e5c 6e49 7420 7769 6c6c 2068 656c 7020  n\nIt will help 
-00014ce0: 746f 206d 616b 6520 7375 7265 2050 6f65  to make sure Poe
-00014cf0: 7472 795c 2773 2062 696e 2064 6972 6563  try\'s bin direc
-00014d00: 746f 7279 2069 7320 696e 2079 6f75 7220  tory is in your 
-00014d10: 6050 4154 4860 2065 6e76 6972 6f6e 6d65  `PATH` environme
-00014d20: 6e74 2076 6172 6961 626c 652e 5c6e 5c6e  nt variable.\n\n
-00014d30: 4275 7420 696e 2061 6e79 2063 6173 652c  But in any case,
-00014d40: 206d 616b 6520 7375 7265 2079 6f75 206b   make sure you k
-00014d50: 6e6f 7720 7468 6520 7061 7468 2074 6f20  now the path to 
-00014d60: 7468 6520 6070 6f65 7472 7960 2065 7865  the `poetry` exe
-00014d70: 6375 7461 626c 652e 2054 6865 2050 6f65  cutable. The Poe
-00014d80: 7472 795c 6e69 6e73 7461 6c6c 6572 2074  try\ninstaller t
-00014d90: 656c 6c73 2079 6f75 2077 6865 7265 2069  ells you where i
-00014da0: 7420 6861 7320 6265 656e 2069 6e73 7461  t has been insta
-00014db0: 6c6c 6564 2c20 616e 6420 686f 7720 746f  lled, and how to
-00014dc0: 2063 6f6e 6669 6775 7265 2079 6f75 7220   configure your 
-00014dd0: 7368 656c 6c2e 5c6e 5c6e 506c 6561 7365  shell.\n\nPlease
-00014de0: 2072 6566 6572 2074 6f20 7468 6520 5b50   refer to the [P
-00014df0: 6f65 7472 7920 646f 6373 5d28 6874 7470  oetry docs](http
-00014e00: 733a 2f2f 7079 7468 6f6e 2d70 6f65 7472  s://python-poetr
-00014e10: 792e 6f72 672f 646f 6373 2f29 2066 6f72  y.org/docs/) for
-00014e20: 2067 7569 6461 6e63 6520 6f6e 5c6e 7573   guidance on\nus
-00014e30: 696e 6720 506f 6574 7279 2e5c 6e5c 6e23  ing Poetry.\n\n#
-00014e40: 2323 2053 6574 7570 2066 6f72 2050 7943  ## Setup for PyC
-00014e50: 6861 726d 2075 7365 7273 5c6e 5c6e 596f  harm users\n\nYo
-00014e60: 7520 6361 6e20 6561 7369 6c79 206f 6274  u can easily obt
-00014e70: 6169 6e20 7468 6520 7072 6f6a 6563 7420  ain the project 
-00014e80: 6669 6c65 7320 7573 696e 6720 5079 4368  files using PyCh
-00014e90: 6172 6d20 286d 656e 7520 2247 6974 203e  arm (menu "Git >
-00014ea0: 2043 6c6f 6e65 2e2e 2e22 292e 5c6e 5079   Clone...").\nPy
-00014eb0: 4368 6172 6d20 7769 6c6c 2074 6865 6e20  Charm will then 
-00014ec0: 7573 7561 6c6c 7920 7072 6f6d 7074 2079  usually prompt y
-00014ed0: 6f75 2074 6f20 6f70 656e 2074 6865 2070  ou to open the p
-00014ee0: 726f 6a65 6374 2e5c 6e5c 6e4f 7065 6e20  roject.\n\nOpen 
-00014ef0: 7468 6520 7072 6f6a 6563 7420 696e 2061  the project in a
-00014f00: 206e 6577 2077 696e 646f 772e 2050 7943   new window. PyC
-00014f10: 6861 726d 2077 696c 6c20 7468 656e 2075  harm will then u
-00014f20: 7375 616c 6c79 2070 726f 6d70 7420 796f  sually prompt yo
-00014f30: 7520 746f 2063 7265 6174 655c 6e61 206e  u to create\na n
-00014f40: 6577 2076 6972 7475 616c 2065 6e76 6972  ew virtual envir
-00014f50: 6f6e 6d65 6e74 2e5c 6e5c 6e43 7265 6174  onment.\n\nCreat
-00014f60: 6520 6120 6e65 7720 506f 6574 7279 2076  e a new Poetry v
-00014f70: 6972 7475 616c 2065 6e76 6972 6f6e 6d65  irtual environme
-00014f80: 6e74 2066 6f72 2074 6865 2070 726f 6a65  nt for the proje
-00014f90: 6374 2e20 4966 2050 7943 6861 726d 2064  ct. If PyCharm d
-00014fa0: 6f65 736e 5c27 7420 616c 7265 6164 795c  oesn\'t already\
-00014fb0: 6e6b 6e6f 7720 7768 6572 6520 796f 7572  nknow where your
-00014fc0: 2060 706f 6574 7279 6020 6578 6563 7574   `poetry` execut
-00014fd0: 6162 6c65 2069 732c 2074 6865 6e20 7365  able is, then se
-00014fe0: 7420 7468 6520 7061 7468 2074 6f20 796f  t the path to yo
-00014ff0: 7572 2060 706f 6574 7279 6020 6578 6563  ur `poetry` exec
-00015000: 7574 6162 6c65 5c6e 696e 2074 6865 2022  utable\nin the "
-00015010: 4e65 7720 506f 6574 7279 2045 6e76 6972  New Poetry Envir
-00015020: 6f6e 6d65 6e74 2220 666f 726d 2069 6e70  onment" form inp
-00015030: 7574 2066 6965 6c64 206c 6162 656c 6c65  ut field labelle
-00015040: 6420 2250 6f65 7472 7920 6578 6563 7574  d "Poetry execut
-00015050: 6162 6c65 222e 2049 6e20 7468 655c 6e22  able". In the\n"
-00015060: 4e65 7720 506f 6574 7279 2045 6e76 6972  New Poetry Envir
-00015070: 6f6e 6d65 6e74 2220 666f 726d 2c20 796f  onment" form, yo
-00015080: 7520 7769 6c6c 2061 6c73 6f20 6861 7665  u will also have
-00015090: 2074 6865 206f 7070 6f72 7475 6e69 7479   the opportunity
-000150a0: 2074 6f20 7365 6c65 6374 2077 6869 6368   to select which
-000150b0: 5c6e 5079 7468 6f6e 2065 7865 6375 7461  \nPython executa
-000150c0: 626c 6520 7769 6c6c 2062 6520 7573 6564  ble will be used
-000150d0: 2062 7920 7468 6520 7669 7274 7561 6c20   by the virtual 
-000150e0: 656e 7669 726f 6e6d 656e 742e 5c6e 5c6e  environment.\n\n
-000150f0: 5079 4368 6172 6d20 7769 6c6c 2074 6865  PyCharm will the
-00015100: 6e20 6372 6561 7465 2061 206e 6577 2050  n create a new P
-00015110: 6f65 7472 7920 7669 7274 7561 6c20 656e  oetry virtual en
-00015120: 7669 726f 6e6d 656e 7420 666f 7220 796f  vironment for yo
-00015130: 7572 2070 726f 6a65 6374 2c20 7573 696e  ur project, usin
-00015140: 675c 6e61 2070 6172 7469 6375 6c61 7220  g\na particular 
-00015150: 7665 7273 696f 6e20 6f66 2050 7974 686f  version of Pytho
-00015160: 6e2c 2061 6e64 2061 6c73 6f20 696e 7374  n, and also inst
-00015170: 616c 6c20 696e 746f 2074 6869 7320 7669  all into this vi
-00015180: 7274 7561 6c20 656e 7669 726f 6e6d 656e  rtual environmen
-00015190: 7420 7468 655c 6e70 726f 6a65 6374 5c27  t the\nproject\'
-000151a0: 7320 7061 636b 6167 6520 6465 7065 6e64  s package depend
-000151b0: 656e 6369 6573 2061 6363 6f72 6469 6e67  encies according
-000151c0: 2074 6f20 7468 6520 7072 6f6a 6563 745c   to the project\
-000151d0: 2773 2060 706f 6574 7279 2e6c 6f63 6b60  's `poetry.lock`
-000151e0: 2066 696c 652e 5c6e 5c6e 596f 7520 6361   file.\n\nYou ca
-000151f0: 6e20 6164 6420 6469 6666 6572 656e 7420  n add different 
-00015200: 506f 6574 7279 2065 6e76 6972 6f6e 6d65  Poetry environme
-00015210: 6e74 7320 666f 7220 6469 6666 6572 656e  nts for differen
-00015220: 7420 5079 7468 6f6e 2076 6572 7369 6f6e  t Python version
-00015230: 732c 2061 6e64 2073 7769 7463 685c 6e62  s, and switch\nb
-00015240: 6574 7765 656e 2074 6865 6d20 7573 696e  etween them usin
-00015250: 6720 7468 6520 2250 7974 686f 6e20 496e  g the "Python In
-00015260: 7465 7270 7265 7465 7222 2073 6574 7469  terpreter" setti
-00015270: 6e67 7320 6f66 2050 7943 6861 726d 2e20  ngs of PyCharm. 
-00015280: 4966 2079 6f75 2077 616e 7420 746f 2075  If you want to u
-00015290: 7365 5c6e 6120 7665 7273 696f 6e20 6f66  se\na version of
-000152a0: 2050 7974 686f 6e20 7468 6174 2069 736e   Python that isn
-000152b0: 5c27 7420 696e 7374 616c 6c65 642c 2065  \'t installed, e
-000152c0: 6974 6865 7220 7573 6520 796f 7572 2066  ither use your f
-000152d0: 6176 6f75 7269 7465 2070 6163 6b61 6765  avourite package
-000152e0: 206d 616e 6167 6572 2c5c 6e6f 7220 696e   manager,\nor in
-000152f0: 7374 616c 6c20 5079 7468 6f6e 2062 7920  stall Python by 
-00015300: 646f 776e 6c6f 6164 696e 6720 616e 2069  downloading an i
-00015310: 6e73 7461 6c6c 6572 2066 6f72 2072 6563  nstaller for rec
-00015320: 656e 7420 7665 7273 696f 6e73 206f 6620  ent versions of 
-00015330: 5079 7468 6f6e 2064 6972 6563 746c 795c  Python directly\
-00015340: 6e66 726f 6d20 7468 6520 5b50 7974 686f  nfrom the [Pytho
-00015350: 6e20 7765 6273 6974 655d 2868 7474 7073  n website](https
-00015360: 3a2f 2f77 7777 2e70 7974 686f 6e2e 6f72  ://www.python.or
-00015370: 672f 646f 776e 6c6f 6164 732f 292e 5c6e  g/downloads/).\n
-00015380: 5c6e 4f6e 6365 2070 726f 6a65 6374 2064  \nOnce project d
-00015390: 6570 656e 6465 6e63 6965 7320 6861 7665  ependencies have
-000153a0: 2062 6565 6e20 696e 7374 616c 6c65 642c   been installed,
-000153b0: 2079 6f75 2073 686f 756c 6420 6265 2061   you should be a
-000153c0: 626c 6520 746f 2072 756e 2074 6573 7473  ble to run tests
-000153d0: 5c6e 6672 6f6d 2077 6974 6869 6e20 5079  \nfrom within Py
-000153e0: 4368 6172 6d20 2872 6967 6874 2d63 6c69  Charm (right-cli
-000153f0: 636b 206f 6e20 7468 6520 6074 6573 7473  ck on the `tests
-00015400: 6020 666f 6c64 6572 2061 6e64 2073 656c  ` folder and sel
-00015410: 6563 7420 7468 6520 5c27 5275 6e5c 2720  ect the \'Run\' 
-00015420: 6f70 7469 6f6e 292e 5c6e 5c6e 4265 6361  option).\n\nBeca
-00015430: 7573 6520 6f66 2061 2063 6f6e 666c 6963  use of a conflic
-00015440: 7420 6265 7477 6565 6e20 7079 7465 7374  t between pytest
-00015450: 2061 6e64 2050 7943 6861 726d 5c27 7320   and PyCharm\'s 
-00015460: 6465 6275 6767 6572 2061 6e64 2074 6865  debugger and the
-00015470: 2063 6f76 6572 6167 6520 746f 6f6c 2c5c   coverage tool,\
-00015480: 6e79 6f75 206d 6179 206e 6565 6420 746f  nyou may need to
-00015490: 2061 6464 2060 602d 2d6e 6f2d 636f 7660   add ``--no-cov`
-000154a0: 6020 6173 2061 6e20 6f70 7469 6f6e 2074  ` as an option t
-000154b0: 6f20 7468 6520 7465 7374 2072 756e 6e65  o the test runne
-000154c0: 7220 7465 6d70 6c61 7465 2e20 416c 7465  r template. Alte
-000154d0: 726e 6174 6976 656c 792c 5c6e 6a75 7374  rnatively,\njust
-000154e0: 2075 7365 2074 6865 2050 7974 686f 6e20   use the Python 
-000154f0: 5374 616e 6461 7264 204c 6962 7261 7279  Standard Library
-00015500: 5c27 7320 6060 756e 6974 7465 7374 6060  \'s ``unittest``
-00015510: 206d 6f64 756c 652e 5c6e 5c6e 596f 7520   module.\n\nYou 
-00015520: 7368 6f75 6c64 2061 6c73 6f20 6265 2061  should also be a
-00015530: 626c 6520 746f 206f 7065 6e20 6120 7465  ble to open a te
-00015540: 726d 696e 616c 2077 696e 646f 7720 696e  rminal window in
-00015550: 2050 7943 6861 726d 2c20 616e 6420 7275   PyCharm, and ru
-00015560: 6e20 7468 6520 7072 6f6a 6563 745c 2773  n the project\'s
-00015570: 5c6e 4d61 6b65 6669 6c65 2063 6f6d 6d61  \nMakefile comma
-00015580: 6e64 7320 6672 6f6d 2074 6865 2063 6f6d  nds from the com
-00015590: 6d61 6e64 206c 696e 6520 2873 6565 2062  mand line (see b
-000155a0: 656c 6f77 292e 5c6e 5c6e 2323 2320 5365  elow).\n\n### Se
-000155b0: 7475 7020 6672 6f6d 2063 6f6d 6d61 6e64  tup from command
-000155c0: 206c 696e 655c 6e5c 6e4f 6274 6169 6e20   line\n\nObtain 
-000155d0: 7468 6520 7072 6f6a 6563 7420 6669 6c65  the project file
-000155e0: 732c 2075 7369 6e67 2047 6974 206f 7220  s, using Git or 
-000155f0: 7375 6974 6162 6c65 2061 6c74 6572 6e61  suitable alterna
-00015600: 7469 7665 2e5c 6e5c 6e49 6e20 6120 7465  tive.\n\nIn a te
-00015610: 726d 696e 616c 2061 7070 6c69 6361 7469  rminal applicati
-00015620: 6f6e 2c20 6368 616e 6765 2079 6f75 7220  on, change your 
-00015630: 6375 7272 656e 7420 776f 726b 696e 6720  current working 
-00015640: 6469 7265 6374 6f72 795c 6e74 6f20 7468  directory\nto th
-00015650: 6520 726f 6f74 2066 6f6c 6465 7220 6f66  e root folder of
-00015660: 2074 6865 2070 726f 6a65 6374 2066 696c   the project fil
-00015670: 6573 2e20 5468 6572 6520 7368 6f75 6c64  es. There should
-00015680: 2062 6520 6120 4d61 6b65 6669 6c65 5c6e   be a Makefile\n
-00015690: 696e 2074 6869 7320 666f 6c64 6572 2e5c  in this folder.\
-000156a0: 6e5c 6e55 7365 2074 6865 204d 616b 6566  n\nUse the Makef
-000156b0: 696c 6520 746f 2063 7265 6174 6520 6120  ile to create a 
-000156c0: 6e65 7720 506f 6574 7279 2076 6972 7475  new Poetry virtu
-000156d0: 616c 2065 6e76 6972 6f6e 6d65 6e74 2066  al environment f
-000156e0: 6f72 2074 6865 5c6e 7072 6f6a 6563 7420  or the\nproject 
-000156f0: 616e 6420 696e 7374 616c 6c20 7468 6520  and install the 
-00015700: 7072 6f6a 6563 745c 2773 2070 6163 6b61  project\'s packa
-00015710: 6765 2064 6570 656e 6465 6e63 6965 7320  ge dependencies 
-00015720: 696e 746f 2069 742c 5c6e 7573 696e 6720  into it,\nusing 
-00015730: 7468 6520 666f 6c6c 6f77 696e 6720 636f  the following co
-00015740: 6d6d 616e 642e 5c6e 5c6e 2020 2020 2420  mmand.\n\n    $ 
-00015750: 6d61 6b65 2069 6e73 7461 6c6c 2d70 6163  make install-pac
-00015760: 6b61 6765 735c 6e5c 6e49 745c 2773 2061  kages\n\nIt\'s a
-00015770: 6c73 6f20 706f 7373 6962 6c65 2074 6f20  lso possible to 
-00015780: 616c 736f 2069 6e73 7461 6c6c 2074 6865  also install the
-00015790: 2070 726f 6a65 6374 2069 6e20 5c27 6564   project in \'ed
-000157a0: 6974 6162 6c65 206d 6f64 655c 272e 5c6e  itable mode\'.\n
-000157b0: 5c6e 2020 2020 2420 6d61 6b65 2069 6e73  \n    $ make ins
-000157c0: 7461 6c6c 5c6e 5c6e 506c 6561 7365 206e  tall\n\nPlease n
-000157d0: 6f74 652c 2069 6620 796f 7520 6372 6561  ote, if you crea
-000157e0: 7465 2074 6865 2076 6972 7475 616c 2065  te the virtual e
-000157f0: 6e76 6972 6f6e 6d65 6e74 2069 6e20 7468  nvironment in th
-00015800: 6973 2077 6179 2c20 616e 6420 7468 656e  is way, and then
-00015810: 2074 7279 2074 6f5c 6e6f 7065 6e20 7468   try to\nopen th
-00015820: 6520 7072 6f6a 6563 7420 696e 2050 7943  e project in PyC
-00015830: 6861 726d 2061 6e64 2063 6f6e 6669 6775  harm and configu
-00015840: 7265 2074 6865 2070 726f 6a65 6374 2074  re the project t
-00015850: 6f20 7573 6520 7468 6973 2076 6972 7475  o use this virtu
-00015860: 616c 5c6e 656e 7669 726f 6e6d 656e 7420  al\nenvironment 
-00015870: 6173 2061 6e20 2245 7869 7374 696e 6720  as an "Existing 
-00015880: 506f 6574 7279 2045 6e76 6972 6f6e 6d65  Poetry Environme
-00015890: 6e74 222c 2050 7943 6861 726d 2073 6f6d  nt", PyCharm som
-000158a0: 6574 696d 6573 2068 6173 2073 6f6d 655c  etimes has some\
-000158b0: 6e69 7373 7565 7320 2864 6f6e 5c27 7420  nissues (don\'t 
-000158c0: 6b6e 6f77 2077 6879 2920 7768 6963 6820  know why) which 
-000158d0: 6d69 6768 7420 6265 2070 726f 626c 656d  might be problem
-000158e0: 6174 6963 2e20 4966 2079 6f75 2065 6e63  atic. If you enc
-000158f0: 6f75 6e74 6572 2073 7563 685c 6e69 7373  ounter such\niss
-00015900: 7565 732c 2079 6f75 2063 616e 2072 6573  ues, you can res
-00015910: 6f6c 7665 2074 6865 7365 2069 7373 7565  olve these issue
-00015920: 7320 6279 2064 656c 6574 696e 6720 7468  s by deleting th
-00015930: 6520 7669 7274 7561 6c20 656e 7669 726f  e virtual enviro
-00015940: 6e6d 656e 745c 6e61 6e64 2063 7265 6174  nment\nand creat
-00015950: 696e 6720 7468 6520 506f 6574 7279 2076  ing the Poetry v
-00015960: 6972 7475 616c 2065 6e76 6972 6f6e 6d65  irtual environme
-00015970: 6e74 2075 7369 6e67 2050 7943 6861 726d  nt using PyCharm
-00015980: 2028 7365 6520 6162 6f76 6529 2e5c 6e5c   (see above).\n\
-00015990: 6e23 2323 2050 726f 6a65 6374 204d 616b  n### Project Mak
-000159a0: 6566 696c 6520 636f 6d6d 616e 6473 5c6e  efile commands\n
-000159b0: 5c6e 596f 7520 6361 6e20 7374 6172 7420  \nYou can start 
-000159c0: 4576 656e 7453 746f 7265 4442 2075 7369  EventStoreDB usi
-000159d0: 6e67 2074 6865 2066 6f6c 6c6f 7769 6e67  ng the following
-000159e0: 2063 6f6d 6d61 6e64 2e5c 6e5c 6e20 2020   command.\n\n   
-000159f0: 2024 206d 616b 6520 7374 6172 742d 6576   $ make start-ev
-00015a00: 656e 7473 746f 7265 6462 5c6e 5c6e 596f  entstoredb\n\nYo
-00015a10: 7520 6361 6e20 7275 6e20 7465 7374 7320  u can run tests 
-00015a20: 7573 696e 6720 7468 6520 666f 6c6c 6f77  using the follow
-00015a30: 696e 6720 636f 6d6d 616e 6420 286e 6565  ing command (nee
-00015a40: 6473 2045 7665 6e74 5374 6f72 6544 4220  ds EventStoreDB 
-00015a50: 746f 2062 6520 7275 6e6e 696e 6729 2e5c  to be running).\
-00015a60: 6e5c 6e20 2020 2024 206d 616b 6520 7465  n\n    $ make te
-00015a70: 7374 5c6e 5c6e 596f 7520 6361 6e20 7374  st\n\nYou can st
-00015a80: 6f70 2045 7665 6e74 5374 6f72 6544 4220  op EventStoreDB 
-00015a90: 7573 696e 6720 7468 6520 666f 6c6c 6f77  using the follow
-00015aa0: 696e 6720 636f 6d6d 616e 642e 5c6e 5c6e  ing command.\n\n
-00015ab0: 2020 2020 2420 6d61 6b65 2073 746f 702d      $ make stop-
-00015ac0: 6576 656e 7473 746f 7265 6462 5c6e 5c6e  eventstoredb\n\n
-00015ad0: 596f 7520 6361 6e20 6368 6563 6b20 7468  You can check th
-00015ae0: 6520 666f 726d 6174 7469 6e67 206f 6620  e formatting of 
-00015af0: 7468 6520 636f 6465 2075 7369 6e67 2074  the code using t
-00015b00: 6865 2066 6f6c 6c6f 7769 6e67 2063 6f6d  he following com
-00015b10: 6d61 6e64 2e5c 6e5c 6e20 2020 2024 206d  mand.\n\n    $ m
-00015b20: 616b 6520 6c69 6e74 5c6e 5c6e 596f 7520  ake lint\n\nYou 
-00015b30: 6361 6e20 7265 666f 726d 6174 2074 6865  can reformat the
-00015b40: 2063 6f64 6520 7573 696e 6720 7468 6520   code using the 
-00015b50: 666f 6c6c 6f77 696e 6720 636f 6d6d 616e  following comman
-00015b60: 642e 5c6e 5c6e 2020 2020 2420 6d61 6b65  d.\n\n    $ make
-00015b70: 2066 6d74 5c6e 5c6e 5465 7374 7320 6265   fmt\n\nTests be
-00015b80: 6c6f 6e67 2069 6e20 602e 2f74 6573 7473  long in `./tests
-00015b90: 602e 2043 6f64 652d 756e 6465 722d 7465  `. Code-under-te
-00015ba0: 7374 2062 656c 6f6e 6773 2069 6e20 602e  st belongs in `.
-00015bb0: 2f65 7364 6263 6c69 656e 7460 2e5c 6e5c  /esdbclient`.\n\
-00015bc0: 6e45 6469 7420 7061 636b 6167 6520 6465  nEdit package de
-00015bd0: 7065 6e64 656e 6369 6573 2069 6e20 6070  pendencies in `p
-00015be0: 7970 726f 6a65 6374 2e74 6f6d 6c60 2e20  yproject.toml`. 
-00015bf0: 5570 6461 7465 2069 6e73 7461 6c6c 6564  Update installed
-00015c00: 2070 6163 6b61 6765 7320 2861 6e64 2074   packages (and t
-00015c10: 6865 5c6e 6070 6f65 7472 792e 6c6f 636b  he\n`poetry.lock
-00015c20: 6020 6669 6c65 2920 7573 696e 6720 7468  ` file) using th
-00015c30: 6520 666f 6c6c 6f77 696e 6720 636f 6d6d  e following comm
-00015c40: 616e 642e 5c6e 5c6e 2020 2020 2420 6d61  and.\n\n    $ ma
-00015c50: 6b65 2075 7064 6174 652d 7061 636b 6167  ke update-packag
-00015c60: 6573 5c6e 272c 0a20 2020 2027 6175 7468  es\n',.    'auth
-00015c70: 6f72 273a 2027 4a6f 686e 2042 7977 6174  or': 'John Bywat
-00015c80: 6572 272c 0a20 2020 2027 6175 7468 6f72  er',.    'author
-00015c90: 5f65 6d61 696c 273a 2027 6a6f 686e 2e62  _email': 'john.b
-00015ca0: 7977 6174 6572 4061 7070 726f 7072 6961  ywater@appropria
-00015cb0: 7465 736f 6674 7761 7265 2e6e 6574 272c  tesoftware.net',
-00015cc0: 0a20 2020 2027 6d61 696e 7461 696e 6572  .    'maintainer
-00015cd0: 273a 2027 4e6f 6e65 272c 0a20 2020 2027  ': 'None',.    '
-00015ce0: 6d61 696e 7461 696e 6572 5f65 6d61 696c  maintainer_email
-00015cf0: 273a 2027 4e6f 6e65 272c 0a20 2020 2027  ': 'None',.    '
-00015d00: 7572 6c27 3a20 2768 7474 7073 3a2f 2f67  url': 'https://g
-00015d10: 6974 6875 622e 636f 6d2f 7079 6576 656e  ithub.com/pyeven
-00015d20: 7473 6f75 7263 696e 672f 6573 6462 636c  tsourcing/esdbcl
-00015d30: 6965 6e74 272c 0a20 2020 2027 7061 636b  ient',.    'pack
-00015d40: 6167 6573 273a 2070 6163 6b61 6765 732c  ages': packages,
-00015d50: 0a20 2020 2027 7061 636b 6167 655f 6461  .    'package_da
-00015d60: 7461 273a 2070 6163 6b61 6765 5f64 6174  ta': package_dat
-00015d70: 612c 0a20 2020 2027 696e 7374 616c 6c5f  a,.    'install_
-00015d80: 7265 7175 6972 6573 273a 2069 6e73 7461  requires': insta
-00015d90: 6c6c 5f72 6571 7569 7265 732c 0a20 2020  ll_requires,.   
-00015da0: 2027 7079 7468 6f6e 5f72 6571 7569 7265   'python_require
-00015db0: 7327 3a20 273e 3d33 2e37 2c3c 342e 3027  s': '>=3.7,<4.0'
-00015dc0: 2c0a 7d0a 0a0a 7365 7475 7028 2a2a 7365  ,.}...setup(**se
-00015dd0: 7475 705f 6b77 6172 6773 290a            tup_kwargs).
+00000190: 6970 7469 6f6e 273a 2027 6672 6f6d 2065  iption': 'from e
+000001a0: 7364 6263 6c69 656e 7420 696d 706f 7274  sdbclient import
+000001b0: 2041 7379 6e63 696f 4553 4442 436c 6965   AsyncioESDBClie
+000001c0: 6e74 2320 5079 7468 6f6e 2067 5250 4320  nt# Python gRPC 
+000001d0: 436c 6965 6e74 2066 6f72 2045 7665 6e74  Client for Event
+000001e0: 5374 6f72 6544 425c 6e5c 6e54 6869 7320  StoreDB\n\nThis 
+000001f0: 5b50 7974 686f 6e20 7061 636b 6167 655d  [Python package]
+00000200: 2868 7474 7073 3a2f 2f70 7970 692e 6f72  (https://pypi.or
+00000210: 672f 7072 6f6a 6563 742f 6573 6462 636c  g/project/esdbcl
+00000220: 6965 6e74 2f29 2070 726f 7669 6465 7320  ient/) provides 
+00000230: 6120 5079 7468 6f6e 5c6e 6752 5043 2063  a Python\ngRPC c
+00000240: 6c69 656e 7420 666f 7220 5b45 7665 6e74  lient for [Event
+00000250: 5374 6f72 6544 425d 2868 7474 7073 3a2f  StoreDB](https:/
+00000260: 2f77 7777 2e65 7665 6e74 7374 6f72 652e  /www.eventstore.
+00000270: 636f 6d2f 292e 5c6e 5c6e 5468 6973 2063  com/).\n\nThis c
+00000280: 6c69 656e 7420 6861 7320 6265 656e 2064  lient has been d
+00000290: 6576 656c 6f70 6564 2069 6e20 636f 6c6c  eveloped in coll
+000002a0: 6162 6f72 6174 696f 6e20 7769 7468 2074  aboration with t
+000002b0: 6865 2045 7665 6e74 5374 6f72 6544 425c  he EventStoreDB\
+000002c0: 6e74 6561 6d2e 2041 6c74 686f 7567 6820  nteam. Although 
+000002d0: 6e6f 7420 616c 6c20 7468 6520 6665 6174  not all the feat
+000002e0: 7572 6573 206f 6620 4576 656e 7453 746f  ures of EventSto
+000002f0: 7265 4442 2061 7265 2073 7570 706f 7274  reDB are support
+00000300: 6564 5c6e 6279 2074 6869 7320 636c 6965  ed\nby this clie
+00000310: 6e74 2c20 6d61 6e79 206f 6620 7468 6520  nt, many of the 
+00000320: 6d6f 7374 2075 7365 6675 6c20 6f6e 6573  most useful ones
+00000330: 2061 7265 2070 7265 7365 6e74 6564 5c6e   are presented\n
+00000340: 696e 2061 6e20 6561 7379 2d74 6f2d 7573  in an easy-to-us
+00000350: 6520 696e 7465 7266 6163 652e 5c6e 5c6e  e interface.\n\n
+00000360: 5468 6973 2063 6c69 656e 7420 6861 7320  This client has 
+00000370: 6265 656e 2074 6573 7465 6420 746f 2077  been tested to w
+00000380: 6f72 6b20 7769 7468 2045 7665 6e74 5374  ork with EventSt
+00000390: 6f72 6544 4220 4c54 5320 7665 7273 696f  oreDB LTS versio
+000003a0: 6e73 2032 312e 3130 2c5c 6e77 6974 686f  ns 21.10,\nwitho
+000003b0: 7574 2061 6e64 2077 6974 686f 7574 2053  ut and without S
+000003c0: 534c 2f54 4c53 2c20 616e 6420 7769 7468  SL/TLS, and with
+000003d0: 2050 7974 686f 6e20 7665 7273 696f 6e73   Python versions
+000003e0: 2033 2e37 2074 6f20 332e 3131 2e20 5468   3.7 to 3.11. Th
+000003f0: 6572 655c 6e69 7320 3130 3025 2074 6573  ere\nis 100% tes
+00000400: 7420 636f 7665 7261 6765 2e20 5468 6520  t coverage. The 
+00000410: 636f 6465 2068 6173 2074 7970 696e 6720  code has typing 
+00000420: 616e 6e6f 7461 7469 6f6e 732c 2063 6865  annotations, che
+00000430: 636b 6564 2077 6974 6820 6d79 7079 2e5c  cked with mypy.\
+00000440: 6e54 6865 2063 6f64 6520 6973 2066 6f72  nThe code is for
+00000450: 6d61 7474 6564 2077 6974 6820 626c 6163  matted with blac
+00000460: 6b20 616e 6420 6973 6f72 742c 2061 6e64  k and isort, and
+00000470: 2063 6865 636b 6564 2077 6974 6820 666c   checked with fl
+00000480: 616b 6538 2e20 506f 6574 7279 5c6e 6973  ake8. Poetry\nis
+00000490: 2075 7365 6420 666f 7220 7061 636b 6167   used for packag
+000004a0: 6520 6d61 6e61 6765 6d65 6e74 2064 7572  e management dur
+000004b0: 696e 6720 6465 7665 6c6f 706d 656e 742c  ing development,
+000004c0: 2061 6e64 2066 6f72 2062 7569 6c64 696e   and for buildin
+000004d0: 6720 616e 645c 6e70 7562 6c69 7368 696e  g and\npublishin
+000004e0: 6720 6469 7374 7269 6275 7469 6f6e 7320  g distributions 
+000004f0: 746f 205b 5079 5049 5d28 6874 7470 733a  to [PyPI](https:
+00000500: 2f2f 7079 7069 2e6f 7267 2f70 726f 6a65  //pypi.org/proje
+00000510: 6374 2f65 7364 6263 6c69 656e 742f 292e  ct/esdbclient/).
+00000520: 5c6e 5c6e 2323 2053 796e 6f70 7369 735c  \n\n## Synopsis\
+00000530: 6e5c 6e54 6865 2060 4553 4442 436c 6965  n\nThe `ESDBClie
+00000540: 6e74 6020 636c 6173 7320 6361 6e20 6265  nt` class can be
+00000550: 2069 6d70 6f72 7465 6420 6672 6f6d 2074   imported from t
+00000560: 6865 2060 6573 6462 636c 6965 6e74 6020  he `esdbclient` 
+00000570: 7061 636b 6167 652e 5c6e 5c6e 546f 2072  package.\n\nTo r
+00000580: 756e 2074 6865 2063 6c69 656e 742c 2079  un the client, y
+00000590: 6f75 2077 696c 6c20 6e65 6564 2061 2063  ou will need a c
+000005a0: 6f6e 6e65 6374 696f 6e20 7374 7269 6e67  onnection string
+000005b0: 2055 5249 2e20 416e 642c 2074 6f5c 6e63   URI. And, to\nc
+000005c0: 6f6e 6e65 6374 2074 6f20 6120 2273 6563  onnect to a "sec
+000005d0: 7572 6522 2045 7665 6e74 5374 6f72 6544  ure" EventStoreD
+000005e0: 4220 7365 7276 6572 2c20 796f 7520 7769  B server, you wi
+000005f0: 6c6c 2061 6c73 6f20 6e65 6564 2061 6e5c  ll also need an\
+00000600: 6e53 534c 2f54 4c53 2063 6572 7469 6669  nSSL/TLS certifi
+00000610: 6361 7465 2e5c 6e5c 6e50 726f 6261 626c  cate.\n\nProbabl
+00000620: 7920 7468 6520 7468 7265 6520 6d6f 7374  y the three most
+00000630: 2075 7365 6675 6c20 6d65 7468 6f64 7320   useful methods 
+00000640: 6f66 2060 4553 4442 436c 6965 6e74 6020  of `ESDBClient` 
+00000650: 6172 653a 5c6e 5c6e 2a20 6061 7070 656e  are:\n\n* `appen
+00000660: 645f 6576 656e 7473 2829 6020 5468 6973  d_events()` This
+00000670: 206d 6574 686f 6420 6361 6e20 6265 2075   method can be u
+00000680: 7365 6420 746f 2072 6563 6f72 645c 6e65  sed to record\ne
+00000690: 7665 6e74 7320 696e 2061 2070 6172 7469  vents in a parti
+000006a0: 6375 6c61 7220 2273 7472 6561 6d22 2e20  cular "stream". 
+000006b0: 5468 6973 2069 7320 7573 6566 756c 2077  This is useful w
+000006c0: 6865 6e20 6578 6563 7574 696e 6720 6120  hen executing a 
+000006d0: 636f 6d6d 616e 645c 6e69 6e20 616e 2061  command\nin an a
+000006e0: 7070 6c69 6361 7469 6f6e 2e20 4569 7468  pplication. Eith
+000006f0: 6572 2061 6c6c 206f 7220 6e6f 6e65 206f  er all or none o
+00000700: 6620 7468 6520 6576 656e 7473 2077 696c  f the events wil
+00000710: 6c20 6265 2072 6563 6f72 6465 642e 5c6e  l be recorded.\n
+00000720: 5c6e 2a20 6072 6561 645f 7374 7265 616d  \n* `read_stream
+00000730: 5f65 7665 6e74 7328 2960 2054 6869 7320  _events()` This 
+00000740: 6d65 7468 6f64 2063 616e 2062 6520 7573  method can be us
+00000750: 6564 2074 6f20 7265 7472 6965 7665 2061  ed to retrieve a
+00000760: 6c6c 2074 6865 2072 6563 6f72 6465 645c  ll the recorded\
+00000770: 6e65 7665 6e74 7320 696e 2061 2022 7374  nevents in a "st
+00000780: 7265 616d 222e 2054 6869 7320 6973 2075  ream". This is u
+00000790: 7365 6675 6c20 666f 7220 7265 636f 6e73  seful for recons
+000007a0: 7472 7563 7469 6e67 2061 6e20 6167 6772  tructing an aggr
+000007b0: 6567 6174 6520 6265 666f 7265 5c6e 6578  egate before\nex
+000007c0: 6563 7574 696e 6720 6120 636f 6d6d 616e  ecuting a comman
+000007d0: 6420 696e 2061 6e20 6170 706c 6963 6174  d in an applicat
+000007e0: 696f 6e2e 5c6e 5c6e 2a20 6073 7562 7363  ion.\n\n* `subsc
+000007f0: 7269 6265 5f61 6c6c 5f65 7665 6e74 7328  ribe_all_events(
+00000800: 2960 2054 6869 7320 6d65 7468 6f64 2063  )` This method c
+00000810: 616e 2062 6520 7573 6564 2074 6f20 7265  an be used to re
+00000820: 6365 6976 6520 616c 6c20 7265 636f 7264  ceive all record
+00000830: 6564 5c6e 6576 656e 7473 2061 6372 6f73  ed\nevents acros
+00000840: 7320 616c 6c20 2273 7472 6561 6d73 222e  s all "streams".
+00000850: 2054 6869 7320 6973 2075 7365 6675 6c20   This is useful 
+00000860: 696e 2065 7665 6e74 2d70 726f 6365 7373  in event-process
+00000870: 696e 6720 636f 6d70 6f6e 656e 7473 2c5c  ing components,\
+00000880: 6e61 6e64 2073 7570 706f 7274 7320 7072  nand supports pr
+00000890: 6f63 6573 7369 6e67 2065 7665 6e74 7320  ocessing events 
+000008a0: 7769 7468 2022 6578 6163 746c 792d 6f6e  with "exactly-on
+000008b0: 6365 2220 7365 6d61 6e74 6963 732e 5c6e  ce" semantics.\n
+000008c0: 5c6e 5468 6520 6578 616d 706c 6520 6265  \nThe example be
+000008d0: 6c6f 7720 7573 6573 2061 6e20 2269 6e73  low uses an "ins
+000008e0: 6563 7572 6522 2045 7665 6e74 5374 6f72  ecure" EventStor
+000008f0: 6544 4220 7365 7276 6572 2072 756e 6e69  eDB server runni
+00000900: 6e67 206c 6f63 616c 6c79 206f 6e20 706f  ng locally on po
+00000910: 7274 2032 3131 342e 5c6e 5c6e 6060 6070  rt 2114.\n\n```p
+00000920: 7974 686f 6e5c 6e69 6d70 6f72 7420 6573  ython\nimport es
+00000930: 6462 636c 6965 6e74 2c20 7575 6964 5c6e  dbclient, uuid\n
+00000940: 5c6e 5c6e 2320 436f 6e73 7472 7563 7420  \n\n# Construct 
+00000950: 4553 4442 436c 6965 6e74 2077 6974 6820  ESDBClient with 
+00000960: 616e 2045 7665 6e74 5374 6f72 6544 4220  an EventStoreDB 
+00000970: 5552 492e 5c6e 5c6e 636c 6965 6e74 203d  URI.\n\nclient =
+00000980: 2065 7364 6263 6c69 656e 742e 4553 4442   esdbclient.ESDB
+00000990: 436c 6965 6e74 2875 7269 3d22 6573 6462  Client(uri="esdb
+000009a0: 3a2f 2f6c 6f63 616c 686f 7374 3a32 3131  ://localhost:211
+000009b0: 343f 546c 733d 6661 6c73 6522 295c 6e5c  4?Tls=false")\n\
+000009c0: 6e5c 6e23 2041 7070 656e 6420 6576 656e  n\n# Append even
+000009d0: 7473 2074 6f20 6120 6e65 7720 7374 7265  ts to a new stre
+000009e0: 616d 2e5c 6e5c 6e73 7472 6561 6d5f 6e61  am.\n\nstream_na
+000009f0: 6d65 203d 2073 7472 2875 7569 642e 7575  me = str(uuid.uu
+00000a00: 6964 3428 2929 5c6e 5c6e 6576 656e 7431  id4())\n\nevent1
+00000a10: 203d 2065 7364 6263 6c69 656e 742e 4e65   = esdbclient.Ne
+00000a20: 7745 7665 6e74 2874 7970 653d 5c27 4f72  wEvent(type=\'Or
+00000a30: 6465 7243 7265 6174 6564 5c27 2c20 6461  derCreated\', da
+00000a40: 7461 3d62 5c27 6461 7461 315c 2729 5c6e  ta=b\'data1\')\n
+00000a50: 5c6e 636c 6965 6e74 2e61 7070 656e 645f  \nclient.append_
+00000a60: 6576 656e 7473 285c 6e20 2020 2073 7472  events(\n    str
+00000a70: 6561 6d5f 6e61 6d65 3d73 7472 6561 6d5f  eam_name=stream_
+00000a80: 6e61 6d65 2c5c 6e20 2020 2065 7870 6563  name,\n    expec
+00000a90: 7465 645f 706f 7369 7469 6f6e 3d4e 6f6e  ted_position=Non
+00000aa0: 652c 5c6e 2020 2020 6576 656e 7473 3d5b  e,\n    events=[
+00000ab0: 6576 656e 7431 5d2c 5c6e 295c 6e5c 6e5c  event1],\n)\n\n\
+00000ac0: 6e23 2041 7070 656e 6420 6d6f 7265 2065  n# Append more e
+00000ad0: 7665 6e74 7320 746f 2061 6e20 6578 6973  vents to an exis
+00000ae0: 7469 6e67 2073 7472 6561 6d2e 5c6e 5c6e  ting stream.\n\n
+00000af0: 6576 656e 7432 203d 2065 7364 6263 6c69  event2 = esdbcli
+00000b00: 656e 742e 4e65 7745 7665 6e74 2874 7970  ent.NewEvent(typ
+00000b10: 653d 5c27 4f72 6465 7255 7064 6174 6564  e=\'OrderUpdated
+00000b20: 5c27 2c20 6461 7461 3d62 5c27 6461 7461  \', data=b\'data
+00000b30: 325c 2729 5c6e 6576 656e 7433 203d 2065  2\')\nevent3 = e
+00000b40: 7364 6263 6c69 656e 742e 4e65 7745 7665  sdbclient.NewEve
+00000b50: 6e74 2874 7970 653d 5c27 4f72 6465 7244  nt(type=\'OrderD
+00000b60: 656c 6574 6564 5c27 2c20 6461 7461 3d62  eleted\', data=b
+00000b70: 5c27 6461 7461 335c 2729 5c6e 5c6e 636c  \'data3\')\n\ncl
+00000b80: 6965 6e74 2e61 7070 656e 645f 6576 656e  ient.append_even
+00000b90: 7473 285c 6e20 2020 2073 7472 6561 6d5f  ts(\n    stream_
+00000ba0: 6e61 6d65 3d73 7472 6561 6d5f 6e61 6d65  name=stream_name
+00000bb0: 2c5c 6e20 2020 2065 7870 6563 7465 645f  ,\n    expected_
+00000bc0: 706f 7369 7469 6f6e 3d30 2c5c 6e20 2020  position=0,\n   
+00000bd0: 2065 7665 6e74 733d 5b65 7665 6e74 322c   events=[event2,
+00000be0: 2065 7665 6e74 335d 2c5c 6e29 5c6e 5c6e   event3],\n)\n\n
+00000bf0: 5c6e 2320 5265 6164 2061 6c6c 2065 7665  \n# Read all eve
+00000c00: 6e74 7320 7265 636f 7264 6564 2069 6e20  nts recorded in 
+00000c10: 6120 7374 7265 616d 2e5c 6e5c 6e72 6563  a stream.\n\nrec
+00000c20: 6f72 6465 6420 3d20 636c 6965 6e74 2e72  orded = client.r
+00000c30: 6561 645f 7374 7265 616d 5f65 7665 6e74  ead_stream_event
+00000c40: 7328 5c6e 2020 2020 7374 7265 616d 5f6e  s(\n    stream_n
+00000c50: 616d 653d 7374 7265 616d 5f6e 616d 655c  ame=stream_name\
+00000c60: 6e29 5c6e 5c6e 6173 7365 7274 206c 656e  n)\n\nassert len
+00000c70: 2872 6563 6f72 6465 6429 203d 3d20 335c  (recorded) == 3\
+00000c80: 6e61 7373 6572 7420 7265 636f 7264 6564  nassert recorded
+00000c90: 5b30 5d2e 6461 7461 203d 3d20 6576 656e  [0].data == even
+00000ca0: 7431 2e64 6174 615c 6e61 7373 6572 7420  t1.data\nassert 
+00000cb0: 7265 636f 7264 6564 5b31 5d2e 6461 7461  recorded[1].data
+00000cc0: 203d 3d20 6576 656e 7432 2e64 6174 615c   == event2.data\
+00000cd0: 6e61 7373 6572 7420 7265 636f 7264 6564  nassert recorded
+00000ce0: 5b32 5d2e 6461 7461 203d 3d20 6576 656e  [2].data == even
+00000cf0: 7433 2e64 6174 615c 6e61 7373 6572 7420  t3.data\nassert 
+00000d00: 7265 636f 7264 6564 5b30 5d2e 7479 7065  recorded[0].type
+00000d10: 203d 3d20 6576 656e 7431 2e74 7970 655c   == event1.type\
+00000d20: 6e61 7373 6572 7420 7265 636f 7264 6564  nassert recorded
+00000d30: 5b31 5d2e 7479 7065 203d 3d20 6576 656e  [1].type == even
+00000d40: 7432 2e74 7970 655c 6e61 7373 6572 7420  t2.type\nassert 
+00000d50: 7265 636f 7264 6564 5b32 5d2e 7479 7065  recorded[2].type
+00000d60: 203d 3d20 6576 656e 7433 2e74 7970 655c   == event3.type\
+00000d70: 6e5c 6e5c 6e23 2049 6e20 616e 2065 7665  n\n\n# In an eve
+00000d80: 6e74 2d70 726f 6365 7373 696e 6720 636f  nt-processing co
+00000d90: 6d70 6f6e 656e 742c 2075 7365 2061 2022  mponent, use a "
+00000da0: 6361 7463 682d 7570 2220 7375 6273 6372  catch-up" subscr
+00000db0: 6970 7469 6f6e 5c6e 2320 746f 2072 6563  iption\n# to rec
+00000dc0: 6569 7665 2061 6c6c 2065 7665 6e74 7320  eive all events 
+00000dd0: 6163 726f 7373 2061 6c6c 2073 7472 6561  across all strea
+00000de0: 6d73 2c20 696e 636c 7564 696e 6720 6576  ms, including ev
+00000df0: 656e 7473 2074 6861 745c 6e23 2068 6176  ents that\n# hav
+00000e00: 6520 6e6f 7420 7965 7420 6265 656e 2072  e not yet been r
+00000e10: 6563 6f72 6465 642c 2073 7461 7274 696e  ecorded, startin
+00000e20: 6720 6672 6f6d 2074 6865 2063 6f6d 706f  g from the compo
+00000e30: 6e65 6e74 5c27 7320 6c61 7374 5c6e 2320  nent\'s last\n# 
+00000e40: 7361 7665 6420 2263 6f6d 6d69 7420 706f  saved "commit po
+00000e50: 7369 7469 6f6e 222e 5c6e 5c6e 6c61 7374  sition".\n\nlast
+00000e60: 5f73 6176 6564 5f63 6f6d 6d69 745f 706f  _saved_commit_po
+00000e70: 7369 7469 6f6e 203d 2030 5c6e 5c6e 7375  sition = 0\n\nsu
+00000e80: 6273 6372 6970 7469 6f6e 203d 2063 6c69  bscription = cli
+00000e90: 656e 742e 7375 6273 6372 6962 655f 616c  ent.subscribe_al
+00000ea0: 6c5f 6576 656e 7473 285c 6e20 2020 2063  l_events(\n    c
+00000eb0: 6f6d 6d69 745f 706f 7369 7469 6f6e 3d6c  ommit_position=l
+00000ec0: 6173 745f 7361 7665 645f 636f 6d6d 6974  ast_saved_commit
+00000ed0: 5f70 6f73 6974 696f 6e5c 6e29 5c6e 5c6e  _position\n)\n\n
+00000ee0: 2320 546f 2069 6d70 6c65 6d65 6e74 2022  # To implement "
+00000ef0: 6578 6163 746c 792d 6f6e 6365 2220 7365  exactly-once" se
+00000f00: 6d61 6e74 6963 732c 2069 7465 7261 7465  mantics, iterate
+00000f10: 206f 7665 7220 7468 655c 6e23 2022 6361   over the\n# "ca
+00000f20: 7463 682d 7570 2220 7375 6273 6372 6970  tch-up" subscrip
+00000f30: 7469 6f6e 2e20 5072 6f63 6573 7320 6561  tion. Process ea
+00000f40: 6368 2072 6563 6569 7665 6420 6576 656e  ch received even
+00000f50: 742c 5c6e 2320 696e 2074 7572 6e2c 2074  t,\n# in turn, t
+00000f60: 6872 6f75 6768 2061 6e20 6576 656e 742d  hrough an event-
+00000f70: 7072 6f63 6573 7369 6e67 2070 6f6c 6963  processing polic
+00000f80: 792e 2053 6176 6520 7468 655c 6e23 2076  y. Save the\n# v
+00000f90: 616c 7565 206f 6620 7468 6520 636f 6d6d  alue of the comm
+00000fa0: 6974 5f70 6f73 6974 696f 6e20 6174 7472  it_position attr
+00000fb0: 6962 7574 6520 6f66 2074 6865 2070 726f  ibute of the pro
+00000fc0: 6365 7373 6564 5c6e 2320 6576 656e 7420  cessed\n# event 
+00000fd0: 7769 7468 206e 6577 2073 7461 7465 2067  with new state g
+00000fe0: 656e 6572 6174 6564 2062 7920 7468 6520  enerated by the 
+00000ff0: 706f 6c69 6379 2069 6e20 7468 6520 7361  policy in the sa
+00001000: 6d65 5c6e 2320 6174 6f6d 6963 2074 7261  me\n# atomic tra
+00001010: 6e73 6163 7469 6f6e 2e20 5573 6520 7468  nsaction. Use th
+00001020: 6520 6c61 7374 2073 6176 6564 2022 636f  e last saved "co
+00001030: 6d6d 6974 2070 6f73 6974 696f 6e22 5c6e  mmit position"\n
+00001040: 2320 7768 656e 2072 6573 7461 7274 696e  # when restartin
+00001050: 6720 7468 6520 2263 6174 6368 2d75 7022  g the "catch-up"
+00001060: 2073 7562 7363 7269 7074 696f 6e2e 5c6e   subscription.\n
+00001070: 5c6e 7265 6365 6976 6564 203d 205b 5d5c  \nreceived = []\
+00001080: 6e66 6f72 2065 7665 6e74 2069 6e20 7375  nfor event in su
+00001090: 6273 6372 6970 7469 6f6e 3a5c 6e20 2020  bscription:\n   
+000010a0: 2072 6563 6569 7665 642e 6170 7065 6e64   received.append
+000010b0: 2865 7665 6e74 295c 6e20 2020 2069 6620  (event)\n    if 
+000010c0: 6576 656e 742e 6964 203d 3d20 6576 656e  event.id == even
+000010d0: 7433 2e69 643a 5c6e 2020 2020 2020 2020  t3.id:\n        
+000010e0: 6272 6561 6b5c 6e5c 6e61 7373 6572 7420  break\n\nassert 
+000010f0: 7265 6365 6976 6564 5b2d 335d 2e64 6174  received[-3].dat
+00001100: 6120 3d3d 2065 7665 6e74 312e 6461 7461  a == event1.data
+00001110: 5c6e 6173 7365 7274 2072 6563 6569 7665  \nassert receive
+00001120: 645b 2d32 5d2e 6461 7461 203d 3d20 6576  d[-2].data == ev
+00001130: 656e 7432 2e64 6174 615c 6e61 7373 6572  ent2.data\nasser
+00001140: 7420 7265 6365 6976 6564 5b2d 315d 2e64  t received[-1].d
+00001150: 6174 6120 3d3d 2065 7665 6e74 332e 6461  ata == event3.da
+00001160: 7461 5c6e 6173 7365 7274 2072 6563 6569  ta\nassert recei
+00001170: 7665 645b 2d33 5d2e 7479 7065 203d 3d20  ved[-3].type == 
+00001180: 6576 656e 7431 2e74 7970 655c 6e61 7373  event1.type\nass
+00001190: 6572 7420 7265 6365 6976 6564 5b2d 325d  ert received[-2]
+000011a0: 2e74 7970 6520 3d3d 2065 7665 6e74 322e  .type == event2.
+000011b0: 7479 7065 5c6e 6173 7365 7274 2072 6563  type\nassert rec
+000011c0: 6569 7665 645b 2d31 5d2e 7479 7065 203d  eived[-1].type =
+000011d0: 3d20 6576 656e 7433 2e74 7970 655c 6e5c  = event3.type\n\
+000011e0: 6e61 7373 6572 7420 7265 6365 6976 6564  nassert received
+000011f0: 5b2d 335d 2e63 6f6d 6d69 745f 706f 7369  [-3].commit_posi
+00001200: 7469 6f6e 203e 2030 5c6e 6173 7365 7274  tion > 0\nassert
+00001210: 2072 6563 6569 7665 645b 2d32 5d2e 636f   received[-2].co
+00001220: 6d6d 6974 5f70 6f73 6974 696f 6e20 3e20  mmit_position > 
+00001230: 7265 6365 6976 6564 5b2d 335d 2e63 6f6d  received[-3].com
+00001240: 6d69 745f 706f 7369 7469 6f6e 5c6e 6173  mit_position\nas
+00001250: 7365 7274 2072 6563 6569 7665 645b 2d31  sert received[-1
+00001260: 5d2e 636f 6d6d 6974 5f70 6f73 6974 696f  ].commit_positio
+00001270: 6e20 3e20 7265 6365 6976 6564 5b2d 325d  n > received[-2]
+00001280: 2e63 6f6d 6d69 745f 706f 7369 7469 6f6e  .commit_position
+00001290: 5c6e 5c6e 5c6e 2320 436c 6f73 6520 7468  \n\n\n# Close th
+000012a0: 6520 636c 6965 6e74 2061 6674 6572 2075  e client after u
+000012b0: 7365 2e5c 6e5c 6e63 6c69 656e 742e 636c  se.\n\nclient.cl
+000012c0: 6f73 6528 295c 6e60 6060 5c6e 5c6e 5365  ose()\n```\n\nSe
+000012d0: 6520 6265 6c6f 7720 666f 7220 6d6f 7265  e below for more
+000012e0: 2064 6574 6169 6c73 2e5c 6e5c 6e46 6f72   details.\n\nFor
+000012f0: 2061 6e20 6578 616d 706c 6520 6f66 2075   an example of u
+00001300: 7361 6765 2c20 7365 6520 7468 6520 5b65  sage, see the [e
+00001310: 7665 6e74 736f 7572 6369 6e67 2d65 7665  ventsourcing-eve
+00001320: 6e74 7374 6f72 6564 625d 285c 6e68 7474  ntstoredb](\nhtt
+00001330: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
+00001340: 7079 6576 656e 7473 6f75 7263 696e 672f  pyeventsourcing/
+00001350: 6576 656e 7473 6f75 7263 696e 672d 6576  eventsourcing-ev
+00001360: 656e 7473 746f 7265 6462 2920 7061 636b  entstoredb) pack
+00001370: 6167 652e 5c6e 5c6e 2323 2054 6162 6c65  age.\n\n## Table
+00001380: 206f 6620 636f 6e74 656e 7473 5c6e 5c6e   of contents\n\n
+00001390: 3c21 2d2d 2054 4f43 202d 2d3e 5c6e 2a20  <!-- TOC -->\n* 
+000013a0: 5b49 6e73 7461 6c6c 2070 6163 6b61 6765  [Install package
+000013b0: 5d28 2369 6e73 7461 6c6c 2d70 6163 6b61  ](#install-packa
+000013c0: 6765 295c 6e20 202a 205b 4672 6f6d 2050  ge)\n  * [From P
+000013d0: 7950 495d 2823 6672 6f6d 2d70 7970 6929  yPI](#from-pypi)
+000013e0: 5c6e 2020 2a20 5b57 6974 6820 506f 6574  \n  * [With Poet
+000013f0: 7279 5d28 2377 6974 682d 706f 6574 7279  ry](#with-poetry
+00001400: 295c 6e2a 205b 4576 656e 7453 746f 7265  )\n* [EventStore
+00001410: 4442 2073 6572 7665 725d 2823 6576 656e  DB server](#even
+00001420: 7473 746f 7265 6462 2d73 6572 7665 7229  tstoredb-server)
+00001430: 5c6e 2020 2a20 5b52 756e 2063 6f6e 7461  \n  * [Run conta
+00001440: 696e 6572 5d28 2372 756e 2d63 6f6e 7461  iner](#run-conta
+00001450: 696e 6572 295c 6e20 202a 205b 5374 6f70  iner)\n  * [Stop
+00001460: 2063 6f6e 7461 696e 6572 5d28 2373 746f   container](#sto
+00001470: 702d 636f 6e74 6169 6e65 7229 5c6e 2a20  p-container)\n* 
+00001480: 5b45 7665 6e74 5374 6f72 6544 4220 636c  [EventStoreDB cl
+00001490: 6965 6e74 5d28 2365 7665 6e74 7374 6f72  ient](#eventstor
+000014a0: 6564 622d 636c 6965 6e74 295c 6e20 202a  edb-client)\n  *
+000014b0: 205b 496d 706f 7274 2063 6c61 7373 5d28   [Import class](
+000014c0: 2369 6d70 6f72 742d 636c 6173 7329 5c6e  #import-class)\n
+000014d0: 2020 2a20 5b43 6f6e 7374 7275 6374 2063    * [Construct c
+000014e0: 6c69 656e 745d 2823 636f 6e73 7472 7563  lient](#construc
+000014f0: 742d 636c 6965 6e74 295c 6e2a 205b 5374  t-client)\n* [St
+00001500: 7265 616d 735d 2823 7374 7265 616d 7329  reams](#streams)
+00001510: 5c6e 2020 2a20 5b41 7070 656e 6420 6576  \n  * [Append ev
+00001520: 656e 7473 5d28 2361 7070 656e 642d 6576  ents](#append-ev
+00001530: 656e 7473 295c 6e20 202a 205b 4170 7065  ents)\n  * [Appe
+00001540: 6e64 2065 7665 6e74 5d28 2361 7070 656e  nd event](#appen
+00001550: 642d 6576 656e 7429 5c6e 2020 2a20 5b49  d-event)\n  * [I
+00001560: 6465 6d70 6f74 656e 7420 6170 7065 6e64  dempotent append
+00001570: 206f 7065 7261 7469 6f6e 735d 2823 6964   operations](#id
+00001580: 656d 706f 7465 6e74 2d61 7070 656e 642d  empotent-append-
+00001590: 6f70 6572 6174 696f 6e73 295c 6e20 202a  operations)\n  *
+000015a0: 205b 5265 6164 2073 7472 6561 6d20 6576   [Read stream ev
+000015b0: 656e 7473 5d28 2372 6561 642d 7374 7265  ents](#read-stre
+000015c0: 616d 2d65 7665 6e74 7329 5c6e 2020 2a20  am-events)\n  * 
+000015d0: 5b52 6561 6420 616c 6c20 6576 656e 7473  [Read all events
+000015e0: 5d28 2372 6561 642d 616c 6c2d 6576 656e  ](#read-all-even
+000015f0: 7473 295c 6e20 202a 205b 4765 7420 6375  ts)\n  * [Get cu
+00001600: 7272 656e 7420 7374 7265 616d 2070 6f73  rrent stream pos
+00001610: 6974 696f 6e5d 2823 6765 742d 6375 7272  ition](#get-curr
+00001620: 656e 742d 7374 7265 616d 2d70 6f73 6974  ent-stream-posit
+00001630: 696f 6e29 5c6e 2020 2a20 5b47 6574 2063  ion)\n  * [Get c
+00001640: 7572 7265 6e74 2063 6f6d 6d69 7420 706f  urrent commit po
+00001650: 7369 7469 6f6e 5d28 2367 6574 2d63 7572  sition](#get-cur
+00001660: 7265 6e74 2d63 6f6d 6d69 742d 706f 7369  rent-commit-posi
+00001670: 7469 6f6e 295c 6e20 202a 205b 4765 7420  tion)\n  * [Get 
+00001680: 7374 7265 616d 206d 6574 6164 6174 615d  stream metadata]
+00001690: 2823 6765 742d 7374 7265 616d 2d6d 6574  (#get-stream-met
+000016a0: 6164 6174 6129 5c6e 2020 2a20 5b53 6574  adata)\n  * [Set
+000016b0: 2073 7472 6561 6d20 6d65 7461 6461 7461   stream metadata
+000016c0: 5d28 2373 6574 2d73 7472 6561 6d2d 6d65  ](#set-stream-me
+000016d0: 7461 6461 7461 295c 6e20 202a 205b 4465  tadata)\n  * [De
+000016e0: 6c65 7465 2073 7472 6561 6d5d 2823 6465  lete stream](#de
+000016f0: 6c65 7465 2d73 7472 6561 6d29 5c6e 2020  lete-stream)\n  
+00001700: 2a20 5b54 6f6d 6273 746f 6e65 2073 7472  * [Tombstone str
+00001710: 6561 6d5d 2823 746f 6d62 7374 6f6e 652d  eam](#tombstone-
+00001720: 7374 7265 616d 295c 6e2a 205b 4361 7463  stream)\n* [Catc
+00001730: 682d 7570 2073 7562 7363 7269 7074 696f  h-up subscriptio
+00001740: 6e73 5d28 2363 6174 6368 2d75 702d 7375  ns](#catch-up-su
+00001750: 6273 6372 6970 7469 6f6e 7329 5c6e 2020  bscriptions)\n  
+00001760: 2a20 5b48 6f77 2074 6f20 696d 706c 656d  * [How to implem
+00001770: 656e 7420 6578 6163 746c 792d 6f6e 6365  ent exactly-once
+00001780: 2065 7665 6e74 2070 726f 6365 7373 696e   event processin
+00001790: 675d 2823 686f 772d 746f 2d69 6d70 6c65  g](#how-to-imple
+000017a0: 6d65 6e74 2d65 7861 6374 6c79 2d6f 6e63  ment-exactly-onc
+000017b0: 652d 6576 656e 742d 7072 6f63 6573 7369  e-event-processi
+000017c0: 6e67 295c 6e20 202a 205b 5375 6273 6372  ng)\n  * [Subscr
+000017d0: 6962 6520 616c 6c20 6576 656e 7473 5d28  ibe all events](
+000017e0: 2373 7562 7363 7269 6265 2d61 6c6c 2d65  #subscribe-all-e
+000017f0: 7665 6e74 7329 5c6e 2020 2a20 5b53 7562  vents)\n  * [Sub
+00001800: 7363 7269 6265 2073 7472 6561 6d20 6576  scribe stream ev
+00001810: 656e 7473 5d28 2373 7562 7363 7269 6265  ents](#subscribe
+00001820: 2d73 7472 6561 6d2d 6576 656e 7473 295c  -stream-events)\
+00001830: 6e2a 205b 5065 7273 6973 7465 6e74 2073  n* [Persistent s
+00001840: 7562 7363 7269 7074 696f 6e73 5d28 2370  ubscriptions](#p
+00001850: 6572 7369 7374 656e 742d 7375 6273 6372  ersistent-subscr
+00001860: 6970 7469 6f6e 7329 5c6e 2020 2a20 5b43  iptions)\n  * [C
+00001870: 7265 6174 6520 7375 6273 6372 6970 7469  reate subscripti
+00001880: 6f6e 5d28 2363 7265 6174 652d 7375 6273  on](#create-subs
+00001890: 6372 6970 7469 6f6e 295c 6e20 202a 205b  cription)\n  * [
+000018a0: 5265 6164 2073 7562 7363 7269 7074 696f  Read subscriptio
+000018b0: 6e5d 2823 7265 6164 2d73 7562 7363 7269  n](#read-subscri
+000018c0: 7074 696f 6e29 5c6e 2020 2a20 5b47 6574  ption)\n  * [Get
+000018d0: 2073 7562 7363 7269 7074 696f 6e20 696e   subscription in
+000018e0: 666f 5d28 2367 6574 2d73 7562 7363 7269  fo](#get-subscri
+000018f0: 7074 696f 6e2d 696e 666f 295c 6e20 202a  ption-info)\n  *
+00001900: 205b 4c69 7374 2073 7562 7363 7269 7074   [List subscript
+00001910: 696f 6e73 5d28 236c 6973 742d 7375 6273  ions](#list-subs
+00001920: 6372 6970 7469 6f6e 7329 5c6e 2020 2a20  criptions)\n  * 
+00001930: 5b44 656c 6574 6520 7375 6273 6372 6970  [Delete subscrip
+00001940: 7469 6f6e 5d28 2364 656c 6574 652d 7375  tion](#delete-su
+00001950: 6273 6372 6970 7469 6f6e 295c 6e20 202a  bscription)\n  *
+00001960: 205b 4372 6561 7465 2073 7472 6561 6d20   [Create stream 
+00001970: 7375 6273 6372 6970 7469 6f6e 5d28 2363  subscription](#c
+00001980: 7265 6174 652d 7374 7265 616d 2d73 7562  reate-stream-sub
+00001990: 7363 7269 7074 696f 6e29 5c6e 2020 2a20  scription)\n  * 
+000019a0: 5b52 6561 6420 7374 7265 616d 2073 7562  [Read stream sub
+000019b0: 7363 7269 7074 696f 6e5d 2823 7265 6164  scription](#read
+000019c0: 2d73 7472 6561 6d2d 7375 6273 6372 6970  -stream-subscrip
+000019d0: 7469 6f6e 295c 6e20 202a 205b 4765 7420  tion)\n  * [Get 
+000019e0: 7374 7265 616d 2073 7562 7363 7269 7074  stream subscript
+000019f0: 696f 6e20 696e 666f 5d28 2367 6574 2d73  ion info](#get-s
+00001a00: 7472 6561 6d2d 7375 6273 6372 6970 7469  tream-subscripti
+00001a10: 6f6e 2d69 6e66 6f29 5c6e 2020 2a20 5b4c  on-info)\n  * [L
+00001a20: 6973 7420 7374 7265 616d 2073 7562 7363  ist stream subsc
+00001a30: 7269 7074 696f 6e73 5d28 236c 6973 742d  riptions](#list-
+00001a40: 7374 7265 616d 2d73 7562 7363 7269 7074  stream-subscript
+00001a50: 696f 6e73 295c 6e20 202a 205b 4465 6c65  ions)\n  * [Dele
+00001a60: 7465 2073 7472 6561 6d20 7375 6273 6372  te stream subscr
+00001a70: 6970 7469 6f6e 5d28 2364 656c 6574 652d  iption](#delete-
+00001a80: 7374 7265 616d 2d73 7562 7363 7269 7074  stream-subscript
+00001a90: 696f 6e29 5c6e 2a20 5b43 6f6e 6e65 6374  ion)\n* [Connect
+00001aa0: 696f 6e5d 2823 636f 6e6e 6563 7469 6f6e  ion](#connection
+00001ab0: 295c 6e20 202a 205b 5265 636f 6e6e 6563  )\n  * [Reconnec
+00001ac0: 745d 2823 7265 636f 6e6e 6563 7429 5c6e  t](#reconnect)\n
+00001ad0: 2020 2a20 5b43 6c6f 7365 5d28 2363 6c6f    * [Close](#clo
+00001ae0: 7365 295c 6e2a 205b 4e6f 7465 735d 2823  se)\n* [Notes](#
+00001af0: 6e6f 7465 7329 5c6e 2020 2a20 5b43 6f6e  notes)\n  * [Con
+00001b00: 6e65 6374 696f 6e20 7374 7269 6e67 735d  nection strings]
+00001b10: 2823 636f 6e6e 6563 7469 6f6e 2d73 7472  (#connection-str
+00001b20: 696e 6773 295c 6e20 202a 205b 5265 6775  ings)\n  * [Regu
+00001b30: 6c61 7220 6578 7072 6573 7369 6f6e 2066  lar expression f
+00001b40: 696c 7465 7273 5d28 2372 6567 756c 6172  ilters](#regular
+00001b50: 2d65 7870 7265 7373 696f 6e2d 6669 6c74  -expression-filt
+00001b60: 6572 7329 5c6e 2020 2a20 5b4e 6577 2065  ers)\n  * [New e
+00001b70: 7665 6e74 206f 626a 6563 7473 5d28 236e  vent objects](#n
+00001b80: 6577 2d65 7665 6e74 2d6f 626a 6563 7473  ew-event-objects
+00001b90: 295c 6e20 202a 205b 5265 636f 7264 6564  )\n  * [Recorded
+00001ba0: 2065 7665 6e74 206f 626a 6563 7473 5d28   event objects](
+00001bb0: 2372 6563 6f72 6465 642d 6576 656e 742d  #recorded-event-
+00001bc0: 6f62 6a65 6374 7329 5c6e 2020 2a20 5b41  objects)\n  * [A
+00001bd0: 7379 6e63 696f 2063 6c69 656e 745d 2823  syncio client](#
+00001be0: 6173 796e 6369 6f2d 636c 6965 6e74 295c  asyncio-client)\
+00001bf0: 6e2a 205b 436f 6e74 7269 6275 746f 7273  n* [Contributors
+00001c00: 5d28 2363 6f6e 7472 6962 7574 6f72 7329  ](#contributors)
+00001c10: 5c6e 2020 2a20 5b49 6e73 7461 6c6c 2050  \n  * [Install P
+00001c20: 6f65 7472 795d 2823 696e 7374 616c 6c2d  oetry](#install-
+00001c30: 706f 6574 7279 295c 6e20 202a 205b 5365  poetry)\n  * [Se
+00001c40: 7475 7020 666f 7220 5079 4368 6172 6d20  tup for PyCharm 
+00001c50: 7573 6572 735d 2823 7365 7475 702d 666f  users](#setup-fo
+00001c60: 722d 7079 6368 6172 6d2d 7573 6572 7329  r-pycharm-users)
+00001c70: 5c6e 2020 2a20 5b53 6574 7570 2066 726f  \n  * [Setup fro
+00001c80: 6d20 636f 6d6d 616e 6420 6c69 6e65 5d28  m command line](
+00001c90: 2373 6574 7570 2d66 726f 6d2d 636f 6d6d  #setup-from-comm
+00001ca0: 616e 642d 6c69 6e65 295c 6e20 202a 205b  and-line)\n  * [
+00001cb0: 5072 6f6a 6563 7420 4d61 6b65 6669 6c65  Project Makefile
+00001cc0: 2063 6f6d 6d61 6e64 735d 2823 7072 6f6a   commands](#proj
+00001cd0: 6563 742d 6d61 6b65 6669 6c65 2d63 6f6d  ect-makefile-com
+00001ce0: 6d61 6e64 7329 5c6e 3c21 2d2d 2054 4f43  mands)\n<!-- TOC
+00001cf0: 202d 2d3e 5c6e 5c6e 2323 2049 6e73 7461   -->\n\n## Insta
+00001d00: 6c6c 2070 6163 6b61 6765 5c6e 5c6e 4974  ll package\n\nIt
+00001d10: 2069 7320 7265 636f 6d6d 656e 6465 6420   is recommended 
+00001d20: 746f 2069 6e73 7461 6c6c 2050 7974 686f  to install Pytho
+00001d30: 6e20 7061 636b 6167 6573 2069 6e74 6f20  n packages into 
+00001d40: 6120 5079 7468 6f6e 2076 6972 7475 616c  a Python virtual
+00001d50: 2065 6e76 6972 6f6e 6d65 6e74 2e5c 6e5c   environment.\n\
+00001d60: 6e23 2323 2046 726f 6d20 5079 5049 5c6e  n### From PyPI\n
+00001d70: 5c6e 596f 7520 6361 6e20 7573 6520 7069  \nYou can use pi
+00001d80: 7020 746f 2069 6e73 7461 6c6c 2074 6869  p to install thi
+00001d90: 7320 7061 636b 6167 6520 6469 7265 6374  s package direct
+00001da0: 6c79 2066 726f 6d5c 6e5b 7468 6520 5079  ly from\n[the Py
+00001db0: 7468 6f6e 2050 6163 6b61 6765 2049 6e64  thon Package Ind
+00001dc0: 6578 5d28 6874 7470 733a 2f2f 7079 7069  ex](https://pypi
+00001dd0: 2e6f 7267 2f70 726f 6a65 6374 2f65 7364  .org/project/esd
+00001de0: 6263 6c69 656e 742f 292e 5c6e 5c6e 2020  bclient/).\n\n  
+00001df0: 2020 2420 7069 7020 696e 7374 616c 6c20    $ pip install 
+00001e00: 6573 6462 636c 6965 6e74 5c6e 5c6e 2323  esdbclient\n\n##
+00001e10: 2320 5769 7468 2050 6f65 7472 795c 6e5c  # With Poetry\n\
+00001e20: 6e59 6f75 2063 616e 2075 7365 2050 6f65  nYou can use Poe
+00001e30: 7472 7920 746f 2061 6464 2074 6869 7320  try to add this 
+00001e40: 7061 636b 6167 6520 746f 2079 6f75 7220  package to your 
+00001e50: 7079 7072 6f6a 6563 742e 746f 6d6c 2061  pyproject.toml a
+00001e60: 6e64 2069 6e73 7461 6c6c 2069 742e 5c6e  nd install it.\n
+00001e70: 5c6e 2020 2020 2420 706f 6574 7279 2061  \n    $ poetry a
+00001e80: 6464 2065 7364 6263 6c69 656e 745c 6e5c  dd esdbclient\n\
+00001e90: 6e23 2320 4576 656e 7453 746f 7265 4442  n## EventStoreDB
+00001ea0: 2073 6572 7665 725c 6e5c 6e54 6865 2045   server\n\nThe E
+00001eb0: 7665 6e74 5374 6f72 6544 4220 7365 7276  ventStoreDB serv
+00001ec0: 6572 2063 616e 2062 6520 7275 6e20 6c6f  er can be run lo
+00001ed0: 6361 6c6c 7920 7573 696e 6720 7468 6520  cally using the 
+00001ee0: 6f66 6669 6369 616c 2044 6f63 6b65 7220  official Docker 
+00001ef0: 636f 6e74 6169 6e65 7220 696d 6167 652e  container image.
+00001f00: 5c6e 5c6e 2323 2320 5275 6e20 636f 6e74  \n\n### Run cont
+00001f10: 6169 6e65 725c 6e5c 6e46 6f72 2064 6576  ainer\n\nFor dev
+00001f20: 656c 6f70 6d65 6e74 2c20 796f 7520 6361  elopment, you ca
+00001f30: 6e20 7275 6e20 6120 2273 6563 7572 6522  n run a "secure"
+00001f40: 2045 7665 6e74 5374 6f72 6544 4220 7365   EventStoreDB se
+00001f50: 7276 6572 2075 7369 6e67 2074 6865 2066  rver using the f
+00001f60: 6f6c 6c6f 7769 6e67 2063 6f6d 6d61 6e64  ollowing command
+00001f70: 2e5c 6e5c 6e20 2020 2024 2064 6f63 6b65  .\n\n    $ docke
+00001f80: 7220 7275 6e20 2d64 202d 2d6e 616d 6520  r run -d --name 
+00001f90: 6576 656e 7473 746f 7265 6462 2d73 6563  eventstoredb-sec
+00001fa0: 7572 6520 2d69 7420 2d70 2032 3131 333a  ure -it -p 2113:
+00001fb0: 3231 3133 202d 2d65 6e76 2022 484f 4d45  2113 --env "HOME
+00001fc0: 3d2f 746d 7022 2065 7665 6e74 7374 6f72  =/tmp" eventstor
+00001fd0: 652f 6576 656e 7473 746f 7265 3a32 312e  e/eventstore:21.
+00001fe0: 3130 2e39 2d62 7573 7465 722d 736c 696d  10.9-buster-slim
+00001ff0: 202d 2d64 6576 5c6e 5c6e 4173 2077 6520   --dev\n\nAs we 
+00002000: 7769 6c6c 2073 6565 2c20 7468 6520 636c  will see, the cl
+00002010: 6965 6e74 206e 6565 6473 2061 6e20 4576  ient needs an Ev
+00002020: 656e 7453 746f 7265 4442 2063 6f6e 6e65  entStoreDB conne
+00002030: 6374 696f 6e20 7374 7269 6e67 2055 5249  ction string URI
+00002040: 2061 7320 7468 6520 7661 6c75 6520 6f66   as the value of
+00002050: 5c6e 6974 7320 6075 7269 6020 636f 6e73  \nits `uri` cons
+00002060: 7472 7563 746f 7220 6172 6775 6d65 6e74  tructor argument
+00002070: 2e20 5365 6520 7468 6520 4e6f 7465 7320  . See the Notes 
+00002080: 7365 6374 696f 6e20 6265 6c6f 7720 666f  section below fo
+00002090: 7220 6465 7461 696c 6564 2069 6e66 6f72  r detailed infor
+000020a0: 6d61 7469 6f6e 5c6e 6162 6f75 7420 4576  mation\nabout Ev
+000020b0: 656e 7453 746f 7265 4442 2063 6f6e 6e65  entStoreDB conne
+000020c0: 6374 696f 6e20 7374 7269 6e67 2055 5249  ction string URI
+000020d0: 732e 5c6e 5c6e 5468 6520 636f 6e6e 6563  s.\n\nThe connec
+000020e0: 7469 6f6e 2073 7472 696e 6720 666f 7220  tion string for 
+000020f0: 7468 6973 2022 7365 6375 7265 2220 4576  this "secure" Ev
+00002100: 656e 7453 746f 7265 4442 2073 6572 7665  entStoreDB serve
+00002110: 7220 776f 756c 6420 6265 3a5c 6e5c 6e20  r would be:\n\n 
+00002120: 2020 2065 7364 623a 2f2f 6164 6d69 6e3a     esdb://admin:
+00002130: 6368 616e 6765 6974 406c 6f63 616c 686f  changeit@localho
+00002140: 7374 3a32 3131 335c 6e5c 6e54 6f20 636f  st:2113\n\nTo co
+00002150: 6e6e 6563 7420 746f 2061 2022 7365 6375  nnect to a "secu
+00002160: 7265 2220 7365 7276 6572 2c20 796f 7520  re" server, you 
+00002170: 7769 6c6c 2075 7375 616c 6c79 206e 6565  will usually nee
+00002180: 6420 746f 2069 6e63 6c75 6465 2061 2022  d to include a "
+00002190: 7573 6572 6e61 6d65 225c 6e61 6e64 2061  username"\nand a
+000021a0: 2022 7061 7373 776f 7264 2220 696e 2074   "password" in t
+000021b0: 6865 2063 6f6e 6e65 6374 696f 6e20 7374  he connection st
+000021c0: 7269 6e67 2c20 736f 2074 6861 7420 7468  ring, so that th
+000021d0: 6520 7365 7276 6572 2063 616e 2061 7574  e server can aut
+000021e0: 6865 6e74 6963 6174 6520 7468 655c 6e63  henticate the\nc
+000021f0: 6c69 656e 742e 2054 6865 2064 6566 6175  lient. The defau
+00002200: 6c74 2075 7365 726e 616d 6520 6973 2022  lt username is "
+00002210: 6164 6d69 6e22 2061 6e64 2074 6865 2064  admin" and the d
+00002220: 6566 6175 6c74 2070 6173 7377 6f72 6420  efault password 
+00002230: 6973 2022 6368 616e 6765 6974 222e 5c6e  is "changeit".\n
+00002240: 5c6e 5768 656e 2063 6f6e 6e65 6374 696e  \nWhen connectin
+00002250: 6720 746f 2061 2022 7365 6375 7265 2220  g to a "secure" 
+00002260: 7365 7276 6572 2c20 7468 6520 636c 6965  server, the clie
+00002270: 6e74 2061 6c73 6f20 6e65 6564 7320 616e  nt also needs an
+00002280: 2053 534c 2f54 4c53 5c6e 6365 7274 6966   SSL/TLS\ncertif
+00002290: 6963 6174 6520 6173 2074 6865 2076 616c  icate as the val
+000022a0: 7565 206f 6620 6974 7320 6072 6f6f 745f  ue of its `root_
+000022b0: 6365 7274 6966 6963 6174 6573 6020 636f  certificates` co
+000022c0: 6e73 7472 7563 746f 7220 6172 6775 6d65  nstructor argume
+000022d0: 6e74 2e20 546f 2063 6f6e 6e65 6374 5c6e  nt. To connect\n
+000022e0: 746f 2061 2022 7365 6375 7265 2220 7365  to a "secure" se
+000022f0: 7276 6572 2079 6f75 2077 696c 6c20 6e65  rver you will ne
+00002300: 6564 2061 6e20 5353 4c2f 544c 5320 6365  ed an SSL/TLS ce
+00002310: 7274 6966 6963 6174 6520 736f 2074 6861  rtificate so tha
+00002320: 7420 7468 6520 636c 6965 6e74 2063 616e  t the client can
+00002330: 5c6e 6175 7468 656e 7469 6361 7465 2074  \nauthenticate t
+00002340: 6865 2073 6572 7665 722e 2046 6f72 2064  he server. For d
+00002350: 6576 656c 6f70 6d65 6e74 2c20 796f 7520  evelopment, you 
+00002360: 6361 6e20 6569 7468 6572 2075 7365 2074  can either use t
+00002370: 6865 2053 534c 2f54 4c53 2063 6572 7469  he SSL/TLS certi
+00002380: 6669 6361 7465 5c6e 6f66 2074 6865 2063  ficate\nof the c
+00002390: 6572 7469 6669 6361 7465 2061 7574 686f  ertificate autho
+000023a0: 7269 7479 2075 7365 6420 746f 2063 7265  rity used to cre
+000023b0: 6174 6520 7468 6520 7365 7276 6572 5c27  ate the server\'
+000023c0: 7320 6365 7274 6966 6963 6174 652c 206f  s certificate, o
+000023d0: 7220 7768 656e 2075 7369 6e67 2061 5c6e  r when using a\n
+000023e0: 7369 6e67 6c65 2d6e 6f64 6520 636c 7573  single-node clus
+000023f0: 7465 722c 2079 6f75 2063 616e 2075 7365  ter, you can use
+00002400: 2074 6865 2073 6572 7665 7220 6365 7274   the server cert
+00002410: 6966 6963 6174 6520 6974 7365 6c66 2e20  ificate itself. 
+00002420: 596f 7520 6361 6e20 6765 7420 7468 655c  You can get the\
+00002430: 6e73 6572 7665 7220 6365 7274 6966 6963  nserver certific
+00002440: 6174 6520 7769 7468 2074 6865 2066 6f6c  ate with the fol
+00002450: 6c6f 7769 6e67 2050 7974 686f 6e20 636f  lowing Python co
+00002460: 6465 2e5c 6e5c 6e5c 6e60 6060 7079 7468  de.\n\n\n```pyth
+00002470: 6f6e 5c6e 696d 706f 7274 2073 736c 5c6e  on\nimport ssl\n
+00002480: 5c6e 7365 7276 6572 5f63 6572 7469 6669  \nserver_certifi
+00002490: 6361 7465 203d 2073 736c 2e67 6574 5f73  cate = ssl.get_s
+000024a0: 6572 7665 725f 6365 7274 6966 6963 6174  erver_certificat
+000024b0: 6528 6164 6472 3d28 5c27 6c6f 6361 6c68  e(addr=(\'localh
+000024c0: 6f73 745c 272c 2032 3131 3329 295c 6e60  ost\', 2113))\n`
+000024d0: 6060 5c6e 5c6e 596f 7520 6361 6e20 616c  ``\n\nYou can al
+000024e0: 736f 2073 7461 7274 2061 6e20 2269 6e73  so start an "ins
+000024f0: 6563 7572 6522 2073 6572 7665 7220 7573  ecure" server us
+00002500: 696e 6720 7468 6520 666f 6c6c 6f77 696e  ing the followin
+00002510: 6720 636f 6d6d 616e 642e 5c6e 5c6e 2020  g command.\n\n  
+00002520: 2020 2420 646f 636b 6572 2072 756e 202d    $ docker run -
+00002530: 6420 2d2d 6e61 6d65 2065 7665 6e74 7374  d --name eventst
+00002540: 6f72 6564 622d 696e 7365 6375 7265 202d  oredb-insecure -
+00002550: 6974 202d 7020 3231 3134 3a32 3131 3320  it -p 2114:2113 
+00002560: 6576 656e 7473 746f 7265 2f65 7665 6e74  eventstore/event
+00002570: 7374 6f72 653a 3231 2e31 302e 392d 6275  store:21.10.9-bu
+00002580: 7374 6572 2d73 6c69 6d20 2d2d 696e 7365  ster-slim --inse
+00002590: 6375 7265 5c6e 5c6e 5468 6520 636f 6e6e  cure\n\nThe conn
+000025a0: 6563 7469 6f6e 2073 7472 696e 6720 5552  ection string UR
+000025b0: 4920 666f 7220 7468 6973 2022 696e 7365  I for this "inse
+000025c0: 6375 7265 2220 7365 7276 6572 2077 6f75  cure" server wou
+000025d0: 6c64 2062 653a 5c6e 5c6e 2020 2020 6573  ld be:\n\n    es
+000025e0: 6462 3a2f 2f6c 6f63 616c 686f 7374 3a32  db://localhost:2
+000025f0: 3131 343f 546c 733d 6661 6c73 655c 6e5c  114?Tls=false\n\
+00002600: 6e41 7320 7765 2077 696c 6c20 7365 652c  nAs we will see,
+00002610: 2077 6865 6e20 636f 6e6e 6563 7469 6e67   when connecting
+00002620: 2074 6f20 616e 2022 696e 7365 6375 7265   to an "insecure
+00002630: 2220 7365 7276 6572 2c20 7468 6572 6520  " server, there 
+00002640: 6973 206e 6f20 6e65 6564 2074 6f20 696e  is no need to in
+00002650: 636c 7564 655c 6e61 2022 7573 6572 6e61  clude\na "userna
+00002660: 6d65 2220 616e 6420 6120 2270 6173 7377  me" and a "passw
+00002670: 6f72 6422 2069 6e20 7468 6520 636f 6e6e  ord" in the conn
+00002680: 6563 7469 6f6e 2073 7472 696e 672e 2049  ection string. I
+00002690: 6620 796f 7520 646f 2c20 7468 6573 6520  f you do, these 
+000026a0: 7661 6c75 6573 2077 696c 6c5c 6e62 6520  values will\nbe 
+000026b0: 6967 6e6f 7265 6420 6279 2074 6865 2063  ignored by the c
+000026c0: 6c69 656e 742c 2073 6f20 7468 6174 2074  lient, so that t
+000026d0: 6865 7920 7769 6c6c 206e 6f74 2062 6520  hey will not be 
+000026e0: 7365 6e74 2074 6f20 7468 6520 7365 7276  sent to the serv
+000026f0: 6572 206f 7665 7220 616e 5c6e 696e 7365  er over an\ninse
+00002700: 6375 7265 2063 6861 6e6e 656c 2e5c 6e5c  cure channel.\n\
+00002710: 6e50 6c65 6173 6520 6e6f 7465 2c20 7468  nPlease note, th
+00002720: 6520 2269 6e73 6563 7572 6522 2063 6f6e  e "insecure" con
+00002730: 6e65 6374 696f 6e20 7374 7269 6e67 2075  nection string u
+00002740: 7365 7320 6120 7175 6572 7920 7374 7269  ses a query stri
+00002750: 6e67 2077 6974 6820 7468 6520 6669 656c  ng with the fiel
+00002760: 642d 7661 6c75 655c 6e60 546c 733d 6661  d-value\n`Tls=fa
+00002770: 6c73 6560 2e20 5468 6520 7661 6c75 6520  lse`. The value 
+00002780: 6f66 2074 6869 7320 6669 656c 6420 6973  of this field is
+00002790: 2062 7920 6465 6661 756c 7420 6074 7275   by default `tru
+000027a0: 6560 2e20 5365 6520 7468 6520 4e6f 7465  e`. See the Note
+000027b0: 7320 7365 6374 696f 6e20 6265 6c6f 775c  s section below\
+000027c0: 6e66 6f72 206d 6f72 6520 696e 666f 726d  nfor more inform
+000027d0: 6174 696f 6e20 6162 6f75 7420 4576 656e  ation about Even
+000027e0: 7453 746f 7265 4442 2063 6f6e 6e65 6374  tStoreDB connect
+000027f0: 696f 6e20 7374 7269 6e67 7320 616e 6420  ion strings and 
+00002800: 7468 6520 6669 656c 6473 2074 6861 7420  the fields that 
+00002810: 6361 6e20 6265 5c6e 7573 6564 2069 6e20  can be\nused in 
+00002820: 7468 6520 7175 6572 7920 7374 7269 6e67  the query string
+00002830: 2074 6f20 7370 6563 6966 7920 636f 6e6e   to specify conn
+00002840: 6563 7469 6f6e 206f 7074 696f 6e73 2e5c  ection options.\
+00002850: 6e5c 6e23 2323 2053 746f 7020 636f 6e74  n\n### Stop cont
+00002860: 6169 6e65 725c 6e5c 6e54 6f20 7374 6f70  ainer\n\nTo stop
+00002870: 2061 6e64 2072 656d 6f76 6520 7468 6520   and remove the 
+00002880: 2273 6563 7572 6522 2063 6f6e 7461 696e  "secure" contain
+00002890: 6572 2c20 7573 6520 7468 6520 666f 6c6c  er, use the foll
+000028a0: 6f77 696e 6720 446f 636b 6572 2063 6f6d  owing Docker com
+000028b0: 6d61 6e64 732e 5c6e 5c6e 2020 2020 2420  mands.\n\n    $ 
+000028c0: 646f 636b 6572 2073 746f 7020 6576 656e  docker stop even
+000028d0: 7473 746f 7265 6462 2d73 6563 7572 655c  tstoredb-secure\
+000028e0: 6e5c 7424 2064 6f63 6b65 7220 726d 2065  n\t$ docker rm e
+000028f0: 7665 6e74 7374 6f72 6564 622d 7365 6375  ventstoredb-secu
+00002900: 7265 5c6e 5c6e 546f 2073 746f 7020 616e  re\n\nTo stop an
+00002910: 6420 7265 6d6f 7665 2074 6865 2022 696e  d remove the "in
+00002920: 7365 6375 7265 2220 636f 6e74 6169 6e65  secure" containe
+00002930: 722c 2075 7365 2074 6865 2066 6f6c 6c6f  r, use the follo
+00002940: 7769 6e67 2044 6f63 6b65 7220 636f 6d6d  wing Docker comm
+00002950: 616e 6473 2e5c 6e5c 6e20 2020 2024 2064  ands.\n\n    $ d
+00002960: 6f63 6b65 7220 7374 6f70 2065 7665 6e74  ocker stop event
+00002970: 7374 6f72 6564 622d 696e 7365 6375 7265  storedb-insecure
+00002980: 5c6e 5c74 2420 646f 636b 6572 2072 6d20  \n\t$ docker rm 
+00002990: 6576 656e 7473 746f 7265 6462 2d69 6e73  eventstoredb-ins
+000029a0: 6563 7572 655c 6e5c 6e5c 6e23 2320 4576  ecure\n\n\n## Ev
+000029b0: 656e 7453 746f 7265 4442 2063 6c69 656e  entStoreDB clien
+000029c0: 745c 6e5c 6e54 6869 7320 4576 656e 7453  t\n\nThis EventS
+000029d0: 746f 7265 4442 2063 6c69 656e 7420 6973  toreDB client is
+000029e0: 2069 6d70 6c65 6d65 6e74 6564 2069 6e20   implemented in 
+000029f0: 7468 6520 6065 7364 6263 6c69 656e 7460  the `esdbclient`
+00002a00: 2070 6163 6b61 6765 2077 6974 685c 6e74   package with\nt
+00002a10: 6865 2060 4553 4442 436c 6965 6e74 6020  he `ESDBClient` 
+00002a20: 636c 6173 732e 5c6e 5c6e 2323 2320 496d  class.\n\n### Im
+00002a30: 706f 7274 2063 6c61 7373 5c6e 5c6e 5468  port class\n\nTh
+00002a40: 6520 6045 5344 4243 6c69 656e 7460 2063  e `ESDBClient` c
+00002a50: 6c61 7373 2063 616e 2062 6520 696d 706f  lass can be impo
+00002a60: 7274 6564 2066 726f 6d20 7468 6520 6065  rted from the `e
+00002a70: 7364 6263 6c69 656e 7460 2070 6163 6b61  sdbclient` packa
+00002a80: 6765 2e5c 6e5c 6e60 6060 7079 7468 6f6e  ge.\n\n```python
+00002a90: 5c6e 6672 6f6d 2065 7364 6263 6c69 656e  \nfrom esdbclien
+00002aa0: 7420 696d 706f 7274 2045 5344 4243 6c69  t import ESDBCli
+00002ab0: 656e 745c 6e60 6060 5c6e 5c6e 2323 2320  ent\n```\n\n### 
+00002ac0: 436f 6e73 7472 7563 7420 636c 6965 6e74  Construct client
+00002ad0: 5c6e 5c6e 5468 6520 6045 5344 4243 6c69  \n\nThe `ESDBCli
+00002ae0: 656e 7460 2063 6c61 7373 2063 616e 2062  ent` class can b
+00002af0: 6520 636f 6e73 7472 7563 7465 6420 7769  e constructed wi
+00002b00: 7468 2061 2060 7572 6960 2061 7267 756d  th a `uri` argum
+00002b10: 656e 742c 2077 6869 6368 2069 7320 7265  ent, which is re
+00002b20: 7175 6972 6564 2e5c 6e41 6e64 2c20 746f  quired.\nAnd, to
+00002b30: 2063 6f6e 6e65 6374 2074 6f20 6120 2273   connect to a "s
+00002b40: 6563 7572 6522 2045 7665 6e74 5374 6f72  ecure" EventStor
+00002b50: 6544 4220 7365 7276 6572 2c20 7468 6520  eDB server, the 
+00002b60: 6f70 7469 6f6e 616c 2060 726f 6f74 5f63  optional `root_c
+00002b70: 6572 7469 6669 6361 7465 7360 5c6e 6172  ertificates`\nar
+00002b80: 6775 6d65 6e74 2069 7320 616c 736f 2072  gument is also r
+00002b90: 6571 7569 7265 642e 5c6e 5c6e 5468 6520  equired.\n\nThe 
+00002ba0: 6075 7269 6020 6172 6775 6d65 6e74 2069  `uri` argument i
+00002bb0: 7320 6578 7065 6374 6564 2074 6f20 6265  s expected to be
+00002bc0: 2061 6e20 4576 656e 7453 746f 7265 4442   an EventStoreDB
+00002bd0: 2063 6f6e 6e65 6374 696f 6e20 7374 7269   connection stri
+00002be0: 6e67 2055 5249 2074 6861 745c 6e63 6f6e  ng URI that\ncon
+00002bf0: 666f 726d 7320 7769 7468 2074 6865 2073  forms with the s
+00002c00: 7461 6e64 6172 6420 4576 656e 7453 746f  tandard EventSto
+00002c10: 7265 4442 2022 6573 6462 2220 6f72 2022  reDB "esdb" or "
+00002c20: 6573 6462 2b64 6973 636f 7665 7222 2055  esdb+discover" U
+00002c30: 5249 2073 6368 656d 6573 2e20 5468 655c  RI schemes. The\
+00002c40: 6e73 796e 7461 7820 616e 6420 7365 6d61  nsyntax and sema
+00002c50: 6e74 6963 7320 6f66 2045 7665 6e74 5374  ntics of EventSt
+00002c60: 6f72 6544 4220 636f 6e6e 6563 7469 6f6e  oreDB connection
+00002c70: 2073 7472 696e 6773 2061 7265 2065 7870   strings are exp
+00002c80: 6c61 696e 6564 2069 6e20 7468 6520 4e6f  lained in the No
+00002c90: 7465 735c 6e73 6563 7469 6f6e 2062 656c  tes\nsection bel
+00002ca0: 6f77 2e5c 6e5c 6e46 6f72 2065 7861 6d70  ow.\n\nFor examp
+00002cb0: 6c65 2c20 7468 6520 666f 6c6c 6f77 696e  le, the followin
+00002cc0: 6720 636f 6e6e 6563 7469 6f6e 2073 7472  g connection str
+00002cd0: 696e 6720 7370 6563 6966 6965 7320 7468  ing specifies th
+00002ce0: 6174 2074 6865 2063 6c69 656e 7420 7368  at the client sh
+00002cf0: 6f75 6c64 5c6e 6174 7465 6d70 7420 746f  ould\nattempt to
+00002d00: 2063 7265 6174 6520 6120 2273 6563 7572   create a "secur
+00002d10: 6522 2063 6f6e 6e65 6374 696f 6e20 746f  e" connection to
+00002d20: 2070 6f72 7420 3231 3133 206f 6e20 226c   port 2113 on "l
+00002d30: 6f63 616c 686f 7374 222c 2061 6e64 2075  ocalhost", and u
+00002d40: 7365 2074 6865 5c6e 636c 6965 6e74 2063  se the\nclient c
+00002d50: 7265 6465 6e74 6961 6c73 2022 7573 6572  redentials "user
+00002d60: 6e61 6d65 2220 616e 6420 2270 6173 7377  name" and "passw
+00002d70: 6f72 6422 2077 6865 6e20 6d61 6b69 6e67  ord" when making
+00002d80: 2063 616c 6c73 2074 6f20 7468 6520 7365   calls to the se
+00002d90: 7276 6572 2e5c 6e5c 6e20 2020 2065 7364  rver.\n\n    esd
+00002da0: 623a 2f2f 7573 6572 6e61 6d65 3a70 6173  b://username:pas
+00002db0: 7377 6f72 6440 6c6f 6361 6c68 6f73 743a  sword@localhost:
+00002dc0: 3231 3133 3f54 6c73 3d74 7275 655c 6e5c  2113?Tls=true\n\
+00002dd0: 6e54 6865 2063 6c69 656e 7420 6d75 7374  nThe client must
+00002de0: 2062 6520 636f 6e66 6967 7572 6564 2074   be configured t
+00002df0: 6f20 6372 6561 7465 2061 2022 7365 6375  o create a "secu
+00002e00: 7265 2220 636f 6e6e 6563 7469 6f6e 2074  re" connection t
+00002e10: 6f20 6120 2273 6563 7572 6522 2073 6572  o a "secure" ser
+00002e20: 7665 722c 5c6e 6f72 2061 6c74 6572 6e61  ver,\nor alterna
+00002e30: 7469 7665 6c79 2061 6e20 2269 6e73 6563  tively an "insec
+00002e40: 7572 6522 2063 6f6e 6e65 6374 696f 6e20  ure" connection 
+00002e50: 746f 2061 6e20 2269 6e73 6563 7572 6522  to an "insecure"
+00002e60: 2073 6572 7665 722e 2042 7920 6465 6661   server. By defa
+00002e70: 756c 742c 2074 6865 5c6e 636c 6965 6e74  ult, the\nclient
+00002e80: 2077 696c 6c20 6174 7465 6d70 7420 746f   will attempt to
+00002e90: 2063 7265 6174 6520 6120 2273 6563 7572   create a "secur
+00002ea0: 6522 2063 6f6e 6e65 6374 696f 6e2e 2041  e" connection. A
+00002eb0: 6e64 2073 6f2c 2077 6865 6e20 636f 6e6e  nd so, when conn
+00002ec0: 6563 7469 6e67 2074 6f20 616e 5c6e 2269  ecting to an\n"i
+00002ed0: 6e73 6563 7572 6522 2073 6572 7665 722c  nsecure" server,
+00002ee0: 2074 6865 2063 6f6e 6e65 6374 696f 6e20   the connection 
+00002ef0: 7374 7269 6e67 206d 7573 7420 7370 6563  string must spec
+00002f00: 6966 7920 7468 6174 2074 6865 2063 6c69  ify that the cli
+00002f10: 656e 7420 7368 6f75 6c64 2061 7474 656d  ent should attem
+00002f20: 7074 5c6e 746f 206d 616b 6520 616e 2022  pt\nto make an "
+00002f30: 696e 7365 6375 7265 2220 636f 6e6e 6563  insecure" connec
+00002f40: 7469 6f6e 2e5c 6e5c 6e54 6865 2066 6f6c  tion.\n\nThe fol
+00002f50: 6c6f 7769 6e67 2063 6f6e 6e65 6374 696f  lowing connectio
+00002f60: 6e20 7374 7269 6e67 2073 7065 6369 6669  n string specifi
+00002f70: 6573 2074 6861 7420 7468 6520 636c 6965  es that the clie
+00002f80: 6e74 2073 686f 756c 645c 6e61 7474 656d  nt should\nattem
+00002f90: 7074 2074 6f20 6372 6561 7465 2061 6e20  pt to create an 
+00002fa0: 2269 6e73 6563 7572 6522 2063 6f6e 6e65  "insecure" conne
+00002fb0: 6374 696f 6e20 746f 2070 6f72 7420 3231  ction to port 21
+00002fc0: 3134 206f 6e20 226c 6f63 616c 686f 7374  14 on "localhost
+00002fd0: 222e 5c6e 5768 656e 2063 6f6e 6e65 6374  ".\nWhen connect
+00002fe0: 696e 6720 746f 2061 6e20 2269 6e73 6563  ing to an "insec
+00002ff0: 7572 6522 2073 6572 7665 722c 2074 6865  ure" server, the
+00003000: 2063 6c69 656e 7420 7769 6c6c 2069 676e   client will ign
+00003010: 6f72 6520 616e 795c 6e75 7365 726e 616d  ore any\nusernam
+00003020: 6520 616e 6420 7061 7373 776f 7264 2069  e and password i
+00003030: 6e66 6f72 6d61 7469 6f6e 2069 6e63 6c75  nformation inclu
+00003040: 6465 6420 696e 2074 6865 2063 6f6e 6e65  ded in the conne
+00003050: 6374 696f 6e20 7374 7269 6e67 2c5c 6e73  ction string,\ns
+00003060: 6f20 7468 6174 2075 7365 726e 616d 6573  o that usernames
+00003070: 2061 6e64 2070 6173 7377 6f72 6473 2061   and passwords a
+00003080: 7265 206e 6f74 2073 656e 7420 6f76 6572  re not sent over
+00003090: 2061 6e20 2269 6e73 6563 7572 6522 2063   an "insecure" c
+000030a0: 6f6e 6e65 6374 696f 6e2e 5c6e 5c6e 2020  onnection.\n\n  
+000030b0: 2020 6573 6462 3a2f 2f6c 6f63 616c 686f    esdb://localho
+000030c0: 7374 3a32 3131 343f 546c 733d 6661 6c73  st:2114?Tls=fals
+000030d0: 655c 6e5c 6e50 6c65 6173 6520 6e6f 7465  e\n\nPlease note
+000030e0: 2c20 7468 6520 2269 6e73 6563 7572 6522  , the "insecure"
+000030f0: 2063 6f6e 6e65 6374 696f 6e20 7374 7269   connection stri
+00003100: 6e67 2075 7365 7320 6120 7175 6572 7920  ng uses a query 
+00003110: 7374 7269 6e67 2077 6974 6820 7468 6520  string with the 
+00003120: 6669 656c 642d 7661 6c75 655c 6e60 546c  field-value\n`Tl
+00003130: 733d 6661 6c73 6560 2e20 5468 6520 7661  s=false`. The va
+00003140: 6c75 6520 6f66 2074 6869 7320 6669 656c  lue of this fiel
+00003150: 6420 6973 2062 7920 6465 6661 756c 7420  d is by default 
+00003160: 6074 7275 6560 2e20 556e 6c65 7373 2074  `true`. Unless t
+00003170: 6865 2063 6f6e 6e65 6374 696f 6e20 7374  he connection st
+00003180: 7269 6e67 5c6e 5552 4920 696e 636c 7564  ring\nURI includ
+00003190: 6573 2074 6865 2066 6965 6c64 2d76 616c  es the field-val
+000031a0: 7565 2060 546c 733d 6661 6c73 6560 2069  ue `Tls=false` i
+000031b0: 6e20 7468 6520 7175 6572 7920 7374 7269  n the query stri
+000031c0: 6e67 2c20 7468 6520 6072 6f6f 745f 6365  ng, the `root_ce
+000031d0: 7274 6966 6963 6174 6573 605c 6e63 6f6e  rtificates`\ncon
+000031e0: 7374 7275 6374 6f72 2061 7267 756d 656e  structor argumen
+000031f0: 7420 6973 2061 6c73 6f20 7265 7175 6972  t is also requir
+00003200: 6564 2e5c 6e5c 6e57 6865 6e20 636f 6e6e  ed.\n\nWhen conn
+00003210: 6563 7469 6e67 2074 6f20 6120 2273 6563  ecting to a "sec
+00003220: 7572 6522 2073 6572 7665 722c 2074 6865  ure" server, the
+00003230: 2060 726f 6f74 5f63 6572 7469 6669 6361   `root_certifica
+00003240: 7465 7360 2061 7267 756d 656e 7420 6973  tes` argument is
+00003250: 2065 7870 6563 7465 6420 746f 5c6e 6265   expected to\nbe
+00003260: 2061 2050 7974 686f 6e20 6073 7472 6020   a Python `str` 
+00003270: 636f 6e74 6169 6e69 6e67 2050 454d 2065  containing PEM e
+00003280: 6e63 6f64 6564 2053 534c 2f54 4c53 2072  ncoded SSL/TLS r
+00003290: 6f6f 7420 6365 7274 6966 6963 6174 6573  oot certificates
+000032a0: 2e20 5468 6973 2076 616c 7565 2069 735c  . This value is\
+000032b0: 6e70 6173 7365 6420 6469 7265 6374 6c79  npassed directly
+000032c0: 2074 6f20 6067 7270 632e 7373 6c5f 6368   to `grpc.ssl_ch
+000032d0: 616e 6e65 6c5f 6372 6564 656e 7469 616c  annel_credential
+000032e0: 7328 2960 2e20 4974 2069 7320 7573 6564  s()`. It is used
+000032f0: 2066 6f72 2061 7574 6865 6e74 6963 6174   for authenticat
+00003300: 696e 6720 7468 655c 6e73 6572 7665 7220  ing the\nserver 
+00003310: 746f 2074 6865 2063 6c69 656e 742e 2049  to the client. I
+00003320: 7420 6973 2063 6f6d 6d6f 6e6c 7920 7468  t is commonly th
+00003330: 6520 6365 7274 6966 6963 6174 6520 6f66  e certificate of
+00003340: 2074 6865 2063 6572 7469 6669 6361 7465   the certificate
+00003350: 2061 7574 686f 7269 7479 2074 6861 745c   authority that\
+00003360: 6e77 6173 2072 6573 706f 6e73 6962 6c65  nwas responsible
+00003370: 2066 6f72 2067 656e 6572 6174 696e 6720   for generating 
+00003380: 7468 6520 5353 4c2f 544c 5320 6365 7274  the SSL/TLS cert
+00003390: 6966 6963 6174 6520 7573 6564 2062 7920  ificate used by 
+000033a0: 7468 6520 4576 656e 7453 746f 7265 4442  the EventStoreDB
+000033b0: 2073 6572 7665 722e 5c6e 4275 742c 2061   server.\nBut, a
+000033c0: 6c74 6572 6e61 7469 7665 6c79 2066 6f72  lternatively for
+000033d0: 2064 6576 656c 6f70 6d65 6e74 2c20 796f   development, yo
+000033e0: 7520 6361 6e20 7573 6520 7468 6520 7365  u can use the se
+000033f0: 7276 6572 5c27 7320 6365 7274 6966 6963  rver\'s certific
+00003400: 6174 6520 6974 7365 6c66 2e5c 6e5c 6e49  ate itself.\n\nI
+00003410: 6e20 7468 6520 6578 616d 706c 6520 6265  n the example be
+00003420: 6c6f 772c 2074 6865 2063 6f6e 7374 7275  low, the constru
+00003430: 6374 6f72 2061 7267 756d 656e 7420 7661  ctor argument va
+00003440: 6c75 6573 2061 7265 2074 616b 656e 2066  lues are taken f
+00003450: 726f 6d20 7468 6520 6f70 6572 6174 696e  rom the operatin
+00003460: 675c 6e73 7973 7465 6d20 656e 7669 726f  g\nsystem enviro
+00003470: 6e6d 656e 742e 2054 6869 7320 6973 2061  nment. This is a
+00003480: 2074 7970 6963 616c 2061 7272 616e 6765   typical arrange
+00003490: 6d65 6e74 2069 6e20 6120 7072 6f64 7563  ment in a produc
+000034a0: 7469 6f6e 2065 6e76 6972 6f6e 6d65 6e74  tion environment
+000034b0: 2e20 4974 2069 735c 6e64 6f6e 6520 7468  . It is\ndone th
+000034c0: 6973 2077 6179 2068 6572 6520 736f 2074  is way here so t
+000034d0: 6861 7420 7468 6520 636f 6465 2069 6e20  hat the code in 
+000034e0: 7468 6973 2064 6f63 756d 656e 7461 7469  this documentati
+000034f0: 6f6e 2063 616e 2062 6520 7465 7374 6564  on can be tested
+00003500: 2077 6974 6820 626f 7468 5c6e 6120 2273   with both\na "s
+00003510: 6563 7572 6522 2061 6e64 2061 6e20 2269  ecure" and an "i
+00003520: 6e73 6563 7572 6522 2073 6572 7665 722e  nsecure" server.
+00003530: 5c6e 5c6e 6060 6070 7974 686f 6e5c 6e69  \n\n```python\ni
+00003540: 6d70 6f72 7420 6f73 5c6e 5c6e 636c 6965  mport os\n\nclie
+00003550: 6e74 203d 2045 5344 4243 6c69 656e 7428  nt = ESDBClient(
+00003560: 5c6e 2020 2020 7572 693d 6f73 2e67 6574  \n    uri=os.get
+00003570: 656e 7628 2245 5344 425f 5552 4922 292c  env("ESDB_URI"),
+00003580: 5c6e 2020 2020 726f 6f74 5f63 6572 7469  \n    root_certi
+00003590: 6669 6361 7465 733d 6f73 2e67 6574 656e  ficates=os.geten
+000035a0: 7628 2245 5344 425f 524f 4f54 5f43 4552  v("ESDB_ROOT_CER
+000035b0: 5449 4649 4341 5445 5322 292c 5c6e 295c  TIFICATES"),\n)\
+000035c0: 6e60 6060 5c6e 5c6e 5365 6520 7468 6520  n```\n\nSee the 
+000035d0: 4e6f 7465 7320 7365 6374 696f 6e20 6265  Notes section be
+000035e0: 6c6f 7720 666f 7220 6465 7461 696c 6564  low for detailed
+000035f0: 2069 6e66 6f72 6d61 7469 6f6e 2061 626f   information abo
+00003600: 7574 2045 7665 6e74 5374 6f72 6544 4220  ut EventStoreDB 
+00003610: 636f 6e6e 6563 7469 6f6e 5c6e 7374 7269  connection\nstri
+00003620: 6e67 7320 616e 6420 7468 6520 6669 656c  ngs and the fiel
+00003630: 6473 2074 6861 7420 6361 6e20 6265 2075  ds that can be u
+00003640: 7365 6420 696e 2074 6865 2071 7565 7279  sed in the query
+00003650: 2073 7472 696e 6720 746f 2073 7065 6369   string to speci
+00003660: 6679 2063 6f6e 6e65 6374 696f 6e5c 6e6f  fy connection\no
+00003670: 7074 696f 6e73 2e5c 6e5c 6e23 2320 5374  ptions.\n\n## St
+00003680: 7265 616d 735c 6e5c 6e49 6e20 4576 656e  reams\n\nIn Even
+00003690: 7453 746f 7265 4442 2c20 6120 2273 7472  tStoreDB, a "str
+000036a0: 6561 6d22 2069 7320 6120 7365 7175 656e  eam" is a sequen
+000036b0: 6365 206f 6620 7265 636f 7264 6564 2065  ce of recorded e
+000036c0: 7665 6e74 7320 7468 6174 2061 6c6c 2068  vents that all h
+000036d0: 6176 655c 6e74 6865 2073 616d 6520 2273  ave\nthe same "s
+000036e0: 7472 6561 6d20 6e61 6d65 222e 2054 6865  tream name". The
+000036f0: 7265 2077 696c 6c20 6e6f 726d 616c 6c79  re will normally
+00003700: 2062 6520 6d61 6e79 2073 7472 6561 6d73   be many streams
+00003710: 2069 6e20 6120 6461 7461 6261 7365 2e5c   in a database.\
+00003720: 6e45 6163 6820 7265 636f 7264 6564 2065  nEach recorded e
+00003730: 7665 6e74 2068 6173 2061 2022 7374 7265  vent has a "stre
+00003740: 616d 2070 6f73 6974 696f 6e22 2069 6e20  am position" in 
+00003750: 6974 7320 7374 7265 616d 2c20 616e 6420  its stream, and 
+00003760: 6120 2263 6f6d 6d69 7420 706f 7369 7469  a "commit positi
+00003770: 6f6e 225c 6e69 6e20 7468 6520 6461 7461  on"\nin the data
+00003780: 6261 7365 2e20 5468 6520 7374 7265 616d  base. The stream
+00003790: 2070 6f73 6974 696f 6e73 206f 6620 7468   positions of th
+000037a0: 6520 7265 636f 7264 6564 2065 7665 6e74  e recorded event
+000037b0: 7320 696e 2061 2073 7472 6561 6d20 6973  s in a stream is
+000037c0: 2061 2067 6170 6c65 7373 5c6e 7365 7175   a gapless\nsequ
+000037d0: 656e 6365 2073 7461 7274 696e 6720 6672  ence starting fr
+000037e0: 6f6d 207a 6572 6f2e 2054 6865 2063 6f6d  om zero. The com
+000037f0: 6d69 7420 706f 7369 7469 6f6e 7320 6f66  mit positions of
+00003800: 2074 6865 2072 6563 6f72 6465 6420 6576   the recorded ev
+00003810: 656e 7473 2069 6e20 7468 6520 6461 7461  ents in the data
+00003820: 6261 7365 5c6e 666f 726d 2061 2073 6571  base\nform a seq
+00003830: 7565 6e63 6520 7468 6174 2069 7320 6e6f  uence that is no
+00003840: 7420 6761 706c 6573 732e 5c6e 5c6e 5468  t gapless.\n\nTh
+00003850: 6520 6d65 7468 6f64 7320 6061 7070 656e  e methods `appen
+00003860: 645f 6576 656e 7473 2829 602c 2060 7265  d_events()`, `re
+00003870: 6164 5f73 7472 6561 6d5f 6576 656e 7473  ad_stream_events
+00003880: 2829 6020 616e 6420 6072 6561 645f 616c  ()` and `read_al
+00003890: 6c5f 6576 656e 7473 2829 6020 6361 6e5c  l_events()` can\
+000038a0: 6e62 6520 7573 6564 2074 6f20 7265 636f  nbe used to reco
+000038b0: 7264 2061 6e64 2072 6561 6420 6576 656e  rd and read even
+000038c0: 7473 2069 6e20 7468 6520 6461 7461 6261  ts in the databa
+000038d0: 7365 2e5c 6e5c 6e23 2323 2041 7070 656e  se.\n\n### Appen
+000038e0: 6420 6576 656e 7473 5c6e 5c6e 2a72 6571  d events\n\n*req
+000038f0: 7569 7265 7320 6c65 6164 6572 2a5c 6e5c  uires leader*\n\
+00003900: 6e54 6865 2060 6170 7065 6e64 5f65 7665  nThe `append_eve
+00003910: 6e74 7328 2960 206d 6574 686f 6420 6361  nts()` method ca
+00003920: 6e20 6265 2075 7365 6420 746f 2077 7269  n be used to wri
+00003930: 7465 2061 2073 6571 7565 6e63 6520 6f66  te a sequence of
+00003940: 206e 6577 2065 7665 6e74 7320 6174 6f6d   new events atom
+00003950: 6963 616c 6c79 5c6e 746f 2061 2022 7374  ically\nto a "st
+00003960: 7265 616d 222e 2057 7269 7469 6e67 206e  ream". Writing n
+00003970: 6577 2065 7665 6e74 7320 6569 7468 6572  ew events either
+00003980: 2063 7265 6174 6573 2061 2073 7472 6561   creates a strea
+00003990: 6d2c 206f 7220 6170 7065 6e64 7320 6576  m, or appends ev
+000039a0: 656e 7473 2074 6f20 7468 6520 656e 645c  ents to the end\
+000039b0: 6e6f 6620 6120 7374 7265 616d 2e20 5468  nof a stream. Th
+000039c0: 6973 206d 6574 686f 6420 6973 2069 6465  is method is ide
+000039d0: 6d70 6f74 656e 7420 2873 6565 2062 656c  mpotent (see bel
+000039e0: 6f77 292e 5c6e 5c6e 5468 6973 206d 6574  ow).\n\nThis met
+000039f0: 686f 6420 6361 6e20 6265 2075 7365 6420  hod can be used 
+00003a00: 746f 2072 6563 6f72 6420 6174 6f6d 6963  to record atomic
+00003a10: 616c 6c79 2061 6c6c 2074 6865 206e 6577  ally all the new
+00003a20: 5c6e 6576 656e 7473 2074 6861 7420 6172  \nevents that ar
+00003a30: 6520 6765 6e65 7261 7465 6420 7768 656e  e generated when
+00003a40: 2065 7865 6375 7469 6e67 2061 2063 6f6d   executing a com
+00003a50: 6d61 6e64 2069 6e20 616e 2061 7070 6c69  mand in an appli
+00003a60: 6361 7469 6f6e 2e5c 6e5c 6e54 6872 6565  cation.\n\nThree
+00003a70: 2061 7267 756d 656e 7473 2061 7265 2072   arguments are r
+00003a80: 6571 7569 7265 642c 2060 7374 7265 616d  equired, `stream
+00003a90: 5f6e 616d 6560 2c20 6065 7870 6563 7465  _name`, `expecte
+00003aa0: 645f 706f 7369 7469 6f6e 605c 6e61 6e64  d_position`\nand
+00003ab0: 2060 6576 656e 7473 602e 5c6e 5c6e 5468   `events`.\n\nTh
+00003ac0: 6520 6073 7472 6561 6d5f 6e61 6d65 6020  e `stream_name` 
+00003ad0: 6172 6775 6d65 6e74 2069 7320 7265 7175  argument is requ
+00003ae0: 6972 6564 2c20 616e 6420 6973 2065 7870  ired, and is exp
+00003af0: 6563 7465 6420 746f 2062 6520 6120 5079  ected to be a Py
+00003b00: 7468 6f6e 5c6e 6073 7472 6020 7468 6174  thon\n`str` that
+00003b10: 2075 6e69 7175 656c 7920 6964 656e 7469   uniquely identi
+00003b20: 6669 6573 2074 6865 2073 7472 6561 6d20  fies the stream 
+00003b30: 696e 2074 6865 2064 6174 6162 6173 652e  in the database.
+00003b40: 5c6e 5c6e 5468 6520 6065 7870 6563 7465  \n\nThe `expecte
+00003b50: 645f 706f 7369 7469 6f6e 6020 6172 6775  d_position` argu
+00003b60: 6d65 6e74 2069 7320 7265 7175 6972 6564  ment is required
+00003b70: 2c20 6973 2065 7870 6563 7465 6420 746f  , is expected to
+00003b80: 2062 653a 2060 4e6f 6e65 605c 6e69 6620   be: `None`\nif 
+00003b90: 6576 656e 7473 2061 7265 2062 6569 6e67  events are being
+00003ba0: 2077 7269 7474 656e 2074 6f20 6120 6e65   written to a ne
+00003bb0: 7720 7374 7265 616d 2c20 616e 6420 6f74  w stream, and ot
+00003bc0: 6865 7277 6973 6520 616e 2050 7974 686f  herwise an Pytho
+00003bd0: 6e20 6069 6e74 605c 6e65 7175 616c 2074  n `int`\nequal t
+00003be0: 6f20 7468 6520 706f 7369 7469 6f6e 2069  o the position i
+00003bf0: 6e20 7468 6520 7374 7265 616d 206f 6620  n the stream of 
+00003c00: 7468 6520 6c61 7374 2072 6563 6f72 6465  the last recorde
+00003c10: 6420 6576 656e 7420 696e 2074 6865 2073  d event in the s
+00003c20: 7472 6561 6d2e 5c6e 5c6e 5468 6520 6065  tream.\n\nThe `e
+00003c30: 7665 6e74 7360 2061 7267 756d 656e 7420  vents` argument 
+00003c40: 6973 2072 6571 7569 7265 642c 2061 6e64  is required, and
+00003c50: 2069 7320 6578 7065 6374 6564 2074 6f20   is expected to 
+00003c60: 6265 2061 2073 6571 7565 6e63 6520 6f66  be a sequence of
+00003c70: 206e 6577 5c6e 6576 656e 7420 6f62 6a65   new\nevent obje
+00003c80: 6374 7320 746f 2062 6520 6170 7065 6e64  cts to be append
+00003c90: 6564 2074 6f20 7468 6520 6e61 6d65 6420  ed to the named 
+00003ca0: 7374 7265 616d 2e20 5468 6520 604e 6577  stream. The `New
+00003cb0: 4576 656e 7460 2063 6c61 7373 2073 686f  Event` class sho
+00003cc0: 756c 645c 6e62 6520 7573 6564 2074 6f20  uld\nbe used to 
+00003cd0: 636f 6e73 7472 7563 7420 6e65 7720 6576  construct new ev
+00003ce0: 656e 7420 6f62 6a65 6374 7320 2873 6565  ent objects (see
+00003cf0: 2062 656c 6f77 292e 5c6e 5c6e 5468 6973   below).\n\nThis
+00003d00: 206d 6574 686f 6420 7461 6b65 7320 616e   method takes an
+00003d10: 206f 7074 696f 6e61 6c20 6074 696d 656f   optional `timeo
+00003d20: 7574 6020 6172 6775 6d65 6e74 2c20 7768  ut` argument, wh
+00003d30: 6963 6820 6973 2061 2050 7974 686f 6e20  ich is a Python 
+00003d40: 6066 6c6f 6174 6020 7468 6174 2073 6574  `float` that set
+00003d50: 735c 6e61 2064 6561 646c 696e 6520 666f  s\na deadline fo
+00003d60: 7220 7468 6520 636f 6d70 6c65 7469 6f6e  r the completion
+00003d70: 206f 6620 7468 6520 6752 5043 206f 7065   of the gRPC ope
+00003d80: 7261 7469 6f6e 2e5c 6e5c 6e53 7472 6561  ration.\n\nStrea
+00003d90: 6d73 2061 7265 2063 7265 6174 6564 2062  ms are created b
+00003da0: 7920 7772 6974 696e 6720 6576 656e 7473  y writing events
+00003db0: 2e20 5468 6520 636f 7272 6563 7420 7661  . The correct va
+00003dc0: 6c75 6520 6f66 2074 6865 2060 6578 7065  lue of the `expe
+00003dd0: 6374 6564 5f70 6f73 6974 696f 6e60 5c6e  cted_position`\n
+00003de0: 6172 6775 6d65 6e74 2077 6865 6e20 7772  argument when wr
+00003df0: 6974 696e 6720 7468 6520 6669 7273 7420  iting the first 
+00003e00: 6576 656e 7420 6f66 2061 206e 6577 2073  event of a new s
+00003e10: 7472 6561 6d20 6973 2060 4e6f 6e65 602e  tream is `None`.
+00003e20: 2050 6c65 6173 6520 6e6f 7465 2c20 6974   Please note, it
+00003e30: 2069 735c 6e6e 6f74 2070 6f73 7369 626c   is\nnot possibl
+00003e40: 6520 746f 2073 6f6d 6568 6f77 2063 7265  e to somehow cre
+00003e50: 6174 6520 616e 2022 656d 7074 7922 2073  ate an "empty" s
+00003e60: 7472 6561 6d20 696e 2045 7665 6e74 5374  tream in EventSt
+00003e70: 6f72 6544 422e 5c6e 5c6e 5468 6520 7374  oreDB.\n\nThe st
+00003e80: 7265 616d 2070 6f73 6974 696f 6e73 206f  ream positions o
+00003e90: 6620 7265 636f 7264 6564 2065 7665 6e74  f recorded event
+00003ea0: 7320 696e 2061 2073 7472 6561 6d20 7374  s in a stream st
+00003eb0: 6172 7420 6672 6f6d 207a 6572 6f2c 2061  art from zero, a
+00003ec0: 6e64 2066 6f72 6d20 6120 6761 706c 6573  nd form a gaples
+00003ed0: 735c 6e73 6571 7565 6e63 6520 6f66 2069  s\nsequence of i
+00003ee0: 6e74 6567 6572 732e 2054 6865 2073 7472  ntegers. The str
+00003ef0: 6561 6d20 706f 7369 7469 6f6e 206f 6620  eam position of 
+00003f00: 7468 6520 6669 7273 7420 7265 636f 7264  the first record
+00003f10: 6564 2065 7665 6e74 2069 6e20 6120 7374  ed event in a st
+00003f20: 7265 616d 2069 735c 6e60 3060 2e20 416e  ream is\n`0`. An
+00003f30: 6420 736f 2077 6865 6e20 6170 7065 6e64  d so when append
+00003f40: 696e 6720 7468 6520 7365 636f 6e64 206e  ing the second n
+00003f50: 6577 2065 7665 6e74 2074 6f20 6120 7374  ew event to a st
+00003f60: 7265 616d 2074 6861 7420 6861 7320 6f6e  ream that has on
+00003f70: 6520 7265 636f 7264 6564 2065 7665 6e74  e recorded event
+00003f80: 2c5c 6e74 6865 2063 6f72 7265 6374 2076  ,\nthe correct v
+00003f90: 616c 7565 206f 6620 7468 6520 6065 7870  alue of the `exp
+00003fa0: 6563 7465 645f 706f 7369 7469 6f6e 6020  ected_position` 
+00003fb0: 6172 6775 6d65 6e74 2069 7320 6030 602e  argument is `0`.
+00003fc0: 2053 696d 696c 6172 6c79 2c20 7468 6520   Similarly, the 
+00003fd0: 7374 7265 616d 5c6e 706f 7369 7469 6f6e  stream\nposition
+00003fe0: 206f 6620 7468 6520 7365 636f 6e64 2072   of the second r
+00003ff0: 6563 6f72 6465 6420 6576 656e 7420 696e  ecorded event in
+00004000: 2061 2073 7472 6561 6d20 6973 2060 3160   a stream is `1`
+00004010: 2c20 616e 6420 736f 2077 6865 6e20 6170  , and so when ap
+00004020: 7065 6e64 696e 6720 7468 655c 6e74 6869  pending the\nthi
+00004030: 7264 206e 6577 2065 7665 6e74 2074 6f20  rd new event to 
+00004040: 6120 7374 7265 616d 2074 6861 7420 6861  a stream that ha
+00004050: 7320 7477 6f20 7265 636f 7264 6564 2065  s two recorded e
+00004060: 7665 6e74 732c 2074 6865 2063 6f72 7265  vents, the corre
+00004070: 6374 2076 616c 7565 206f 6620 7468 655c  ct value of the\
+00004080: 6e60 6578 7065 6374 6564 5f70 6f73 6974  n`expected_posit
+00004090: 696f 6e60 2061 7267 756d 656e 7420 6973  ion` argument is
+000040a0: 2060 3160 2e20 416e 6420 736f 206f 6e2e   `1`. And so on.
+000040b0: 2e2e 2028 5468 6572 6520 6973 2061 2074  .. (There is a t
+000040c0: 6865 6f72 6574 6963 616c 206d 6178 696d  heoretical maxim
+000040d0: 756d 5c6e 6e75 6d62 6572 206f 6620 7265  um\nnumber of re
+000040e0: 636f 7264 6564 2065 7665 6e74 7320 7468  corded events th
+000040f0: 6174 2061 6e79 2073 7472 6561 6d20 6361  at any stream ca
+00004100: 6e20 6861 7665 2c20 6275 7420 495c 276d  n have, but I\'m
+00004110: 206e 6f74 2073 7572 6520 7768 6174 2069   not sure what i
+00004120: 7420 6973 3b5c 6e6d 6179 6265 2039 2c32  t is;\nmaybe 9,2
+00004130: 3233 2c33 3732 2c30 3336 2c38 3534 2c37  23,372,036,854,7
+00004140: 3735 2c38 3037 2062 6563 6175 7365 2069  75,807 because i
+00004150: 7420 6973 2069 6d70 6c65 6d65 6e74 6564  t is implemented
+00004160: 2061 7320 6120 606c 6f6e 6760 2069 6e20   as a `long` in 
+00004170: 4323 3f29 5c6e 5c6e 4966 2074 6865 7265  C#?)\n\nIf there
+00004180: 2069 7320 6120 6d69 736d 6174 6368 2062   is a mismatch b
+00004190: 6574 7765 656e 2074 6865 2067 6976 656e  etween the given
+000041a0: 2076 616c 7565 206f 6620 7468 6520 6065   value of the `e
+000041b0: 7870 6563 7465 645f 706f 7369 7469 6f6e  xpected_position
+000041c0: 6020 6172 6775 6d65 6e74 5c6e 616e 6420  ` argument\nand 
+000041d0: 7468 6520 706f 7369 7469 6f6e 206f 6620  the position of 
+000041e0: 7468 6520 6c61 7374 2072 6563 6f72 6465  the last recorde
+000041f0: 6420 6576 656e 7420 696e 2061 2073 7472  d event in a str
+00004200: 6561 6d2c 2074 6865 6e20 616e 2060 4578  eam, then an `Ex
+00004210: 7065 6374 6564 506f 7369 7469 6f6e 4572  pectedPositionEr
+00004220: 726f 7260 5c6e 6578 6365 7074 696f 6e20  ror`\nexception 
+00004230: 7769 6c6c 2062 6520 7261 6973 6564 2e20  will be raised. 
+00004240: 5468 6973 2065 6666 6563 7469 7665 6c79  This effectively
+00004250: 2061 6363 6f6d 706c 6973 6865 7320 6f70   accomplishes op
+00004260: 7469 6d69 7374 6963 2063 6f6e 6375 7272  timistic concurr
+00004270: 656e 6379 2063 6f6e 7472 6f6c 2e5c 6e5c  ency control.\n\
+00004280: 6e49 6620 796f 7520 7769 7368 2074 6f20  nIf you wish to 
+00004290: 6469 7361 626c 6520 6f70 7469 6d69 7374  disable optimist
+000042a0: 6963 2063 6f6e 6375 7272 656e 6379 2063  ic concurrency c
+000042b0: 6f6e 7472 6f6c 2077 6865 6e20 6170 7065  ontrol when appe
+000042c0: 6e64 696e 6720 6e65 7720 6576 656e 7473  nding new events
+000042d0: 2c20 796f 755c 6e63 616e 2073 6574 2074  , you\ncan set t
+000042e0: 6865 2060 6578 7065 6374 6564 5f70 6f73  he `expected_pos
+000042f0: 6974 696f 6e60 2074 6f20 6120 6e65 6761  ition` to a nega
+00004300: 7469 7665 2069 6e74 6567 6572 2e5c 6e5c  tive integer.\n\
+00004310: 6e49 6620 796f 7520 6e65 6564 2074 6f20  nIf you need to 
+00004320: 6469 7363 6f76 6572 2074 6865 2063 7572  discover the cur
+00004330: 7265 6e74 2070 6f73 6974 696f 6e20 6f66  rent position of
+00004340: 2074 6865 206c 6173 7420 7265 636f 7264   the last record
+00004350: 6564 2065 7665 6e74 2069 6e20 6120 7374  ed event in a st
+00004360: 7265 616d 2c5c 6e79 6f75 2063 616e 2075  ream,\nyou can u
+00004370: 7365 2074 6865 2060 6765 745f 7374 7265  se the `get_stre
+00004380: 616d 5f70 6f73 6974 696f 6e28 2960 206d  am_position()` m
+00004390: 6574 686f 6420 2873 6565 2062 656c 6f77  ethod (see below
+000043a0: 292e 5c6e 5c6e 506c 6561 7365 206e 6f74  ).\n\nPlease not
+000043b0: 652c 2074 6865 2061 7070 656e 6420 6576  e, the append ev
+000043c0: 656e 7473 206f 7065 7261 7469 6f6e 2069  ents operation i
+000043d0: 7320 6174 6f6d 6963 2c20 736f 2074 6861  s atomic, so tha
+000043e0: 7420 6569 7468 6572 2061 6c6c 5c6e 6f72  t either all\nor
+000043f0: 206e 6f6e 6520 6f66 2074 6865 2067 6976   none of the giv
+00004400: 656e 206e 6577 2065 7665 6e74 7320 7769  en new events wi
+00004410: 6c6c 2062 6520 7265 636f 7264 6564 2e20  ll be recorded. 
+00004420: 4279 2064 6573 6967 6e2c 2069 7420 6973  By design, it is
+00004430: 206f 6e6c 795c 6e70 6f73 7369 626c 6520   only\npossible 
+00004440: 7769 7468 2045 7665 6e74 5374 6f72 6544  with EventStoreD
+00004450: 4220 746f 2061 746f 6d69 6361 6c6c 7920  B to atomically 
+00004460: 7265 636f 7264 206e 6577 2065 7665 6e74  record new event
+00004470: 7320 696e 206f 6e65 2073 7472 6561 6d2e  s in one stream.
+00004480: 5c6e 5c6e 496e 2074 6865 2065 7861 6d70  \n\nIn the examp
+00004490: 6c65 2062 656c 6f77 2c20 6120 6e65 7720  le below, a new 
+000044a0: 6576 656e 7420 6973 2061 7070 656e 6465  event is appende
+000044b0: 6420 746f 2061 206e 6577 2073 7472 6561  d to a new strea
+000044c0: 6d2e 5c6e 5c6e 6060 6070 7974 686f 6e5c  m.\n\n```python\
+000044d0: 6e66 726f 6d20 7575 6964 2069 6d70 6f72  nfrom uuid impor
+000044e0: 7420 7575 6964 345c 6e5c 6e66 726f 6d20  t uuid4\n\nfrom 
+000044f0: 6573 6462 636c 6965 6e74 2069 6d70 6f72  esdbclient impor
+00004500: 7420 4e65 7745 7665 6e74 5c6e 5c6e 2320  t NewEvent\n\n# 
+00004510: 436f 6e73 7472 7563 7420 6e65 7720 6576  Construct new ev
+00004520: 656e 7420 6f62 6a65 6374 2e5c 6e65 7665  ent object.\neve
+00004530: 6e74 3120 3d20 4e65 7745 7665 6e74 2874  nt1 = NewEvent(t
+00004540: 7970 653d 5c27 4f72 6465 7243 7265 6174  ype=\'OrderCreat
+00004550: 6564 5c27 2c20 6461 7461 3d62 5c27 6461  ed\', data=b\'da
+00004560: 7461 315c 2729 5c6e 5c6e 2320 4465 6669  ta1\')\n\n# Defi
+00004570: 6e65 2073 7472 6561 6d20 6e61 6d65 2e5c  ne stream name.\
+00004580: 6e73 7472 6561 6d5f 6e61 6d65 3120 3d20  nstream_name1 = 
+00004590: 7374 7228 7575 6964 3428 2929 5c6e 5c6e  str(uuid4())\n\n
+000045a0: 2320 4170 7065 6e64 206c 6973 7420 6f66  # Append list of
+000045b0: 2065 7665 6e74 7320 746f 206e 6577 2073   events to new s
+000045c0: 7472 6561 6d2e 5c6e 636f 6d6d 6974 5f70  tream.\ncommit_p
+000045d0: 6f73 6974 696f 6e31 203d 2063 6c69 656e  osition1 = clien
+000045e0: 742e 6170 7065 6e64 5f65 7665 6e74 7328  t.append_events(
+000045f0: 5c6e 2020 2020 7374 7265 616d 5f6e 616d  \n    stream_nam
+00004600: 653d 7374 7265 616d 5f6e 616d 6531 2c5c  e=stream_name1,\
+00004610: 6e20 2020 2065 7870 6563 7465 645f 706f  n    expected_po
+00004620: 7369 7469 6f6e 3d4e 6f6e 652c 5c6e 2020  sition=None,\n  
+00004630: 2020 6576 656e 7473 3d5b 6576 656e 7431    events=[event1
+00004640: 5d2c 5c6e 295c 6e60 6060 5c6e 5c6e 496e  ],\n)\n```\n\nIn
+00004650: 2074 6865 2065 7861 6d70 6c65 2062 656c   the example bel
+00004660: 6f77 2c20 7477 6f20 7375 6273 6571 7565  ow, two subseque
+00004670: 6e74 2065 7665 6e74 7320 6172 6520 6170  nt events are ap
+00004680: 7065 6e64 6564 2074 6f20 616e 2065 7869  pended to an exi
+00004690: 7374 696e 675c 6e73 7472 6561 6d2e 5c6e  sting\nstream.\n
+000046a0: 5c6e 6060 6070 7974 686f 6e5c 6e65 7665  \n```python\neve
+000046b0: 6e74 3220 3d20 4e65 7745 7665 6e74 2874  nt2 = NewEvent(t
+000046c0: 7970 653d 5c27 4f72 6465 7255 7064 6174  ype=\'OrderUpdat
+000046d0: 6564 5c27 2c20 6461 7461 3d62 5c27 6461  ed\', data=b\'da
+000046e0: 7461 325c 2729 5c6e 6576 656e 7433 203d  ta2\')\nevent3 =
+000046f0: 204e 6577 4576 656e 7428 7479 7065 3d5c   NewEvent(type=\
+00004700: 274f 7264 6572 4465 6c65 7465 645c 272c  'OrderDeleted\',
+00004710: 2064 6174 613d 625c 2764 6174 6133 5c27   data=b\'data3\'
+00004720: 295c 6e5c 6e63 6f6d 6d69 745f 706f 7369  )\n\ncommit_posi
+00004730: 7469 6f6e 3220 3d20 636c 6965 6e74 2e61  tion2 = client.a
+00004740: 7070 656e 645f 6576 656e 7473 285c 6e20  ppend_events(\n 
+00004750: 2020 2073 7472 6561 6d5f 6e61 6d65 3d73     stream_name=s
+00004760: 7472 6561 6d5f 6e61 6d65 312c 5c6e 2020  tream_name1,\n  
+00004770: 2020 6578 7065 6374 6564 5f70 6f73 6974    expected_posit
+00004780: 696f 6e3d 302c 5c6e 2020 2020 6576 656e  ion=0,\n    even
+00004790: 7473 3d5b 6576 656e 7432 2c20 6576 656e  ts=[event2, even
+000047a0: 7433 5d2c 5c6e 295c 6e60 6060 5c6e 5c6e  t3],\n)\n```\n\n
+000047b0: 4966 2074 6865 206f 7065 7261 7469 6f6e  If the operation
+000047c0: 2069 7320 7375 6363 6573 7366 756c 2c20   is successful, 
+000047d0: 7468 6973 206d 6574 686f 6420 7265 7475  this method retu
+000047e0: 726e 7320 616e 2069 6e74 6567 6572 5c6e  rns an integer\n
+000047f0: 7265 7072 6573 656e 7469 6e67 2074 6865  representing the
+00004800: 206f 7665 7261 6c6c 2022 636f 6d6d 6974   overall "commit
+00004810: 2070 6f73 6974 696f 6e22 2061 7320 6974   position" as it
+00004820: 2077 6173 2077 6865 6e20 7468 6520 6f70   was when the op
+00004830: 6572 6174 696f 6e5c 6e77 6173 2063 6f6d  eration\nwas com
+00004840: 706c 6574 6564 2e20 4f74 6865 7277 6973  pleted. Otherwis
+00004850: 652c 2061 6e20 6578 6365 7074 696f 6e20  e, an exception 
+00004860: 7769 6c6c 2062 6520 7261 6973 6564 2e5c  will be raised.\
+00004870: 6e5c 6e41 2022 636f 6d6d 6974 2070 6f73  n\nA "commit pos
+00004880: 6974 696f 6e22 2069 7320 6120 6d6f 6e6f  ition" is a mono
+00004890: 746f 6e69 6361 6c6c 7920 696e 6372 6561  tonically increa
+000048a0: 7369 6e67 2069 6e74 6567 6572 2072 6570  sing integer rep
+000048b0: 7265 7365 6e74 696e 675c 6e74 6865 2070  resenting\nthe p
+000048c0: 6f73 6974 696f 6e20 6f66 2074 6865 2072  osition of the r
+000048d0: 6563 6f72 6465 6420 6576 656e 7420 696e  ecorded event in
+000048e0: 2061 2022 746f 7461 6c20 6f72 6465 7222   a "total order"
+000048f0: 206f 6620 616c 6c20 7265 636f 7264 6564   of all recorded
+00004900: 5c6e 6576 656e 7473 2069 6e20 7468 6520  \nevents in the 
+00004910: 6461 7461 6261 7365 2061 6372 6f73 7320  database across 
+00004920: 616c 6c20 7374 7265 616d 732e 2049 7420  all streams. It 
+00004930: 6973 2074 6865 2061 6374 7561 6c20 706f  is the actual po
+00004940: 7369 7469 6f6e 5c6e 6f66 2074 6865 2065  sition\nof the e
+00004950: 7665 6e74 2072 6563 6f72 6420 6f6e 2064  vent record on d
+00004960: 6973 6b2c 2061 6e64 2074 6865 7265 2061  isk, and there a
+00004970: 7265 2075 7375 616c 6c79 206c 6172 6765  re usually large
+00004980: 2064 6966 6665 7265 6e63 6573 5c6e 6265   differences\nbe
+00004990: 7477 6565 6e20 7375 6363 6573 7369 7665  tween successive
+000049a0: 2063 6f6d 6d69 7473 2e20 496e 2063 6f6e   commits. In con
+000049b0: 7365 7175 656e 6365 2c20 7468 6520 7365  sequence, the se
+000049c0: 7175 656e 6365 206f 6620 636f 6d6d 6974  quence of commit
+000049d0: 5c6e 706f 7369 7469 6f6e 7320 6973 206e  \npositions is n
+000049e0: 6f74 2067 6170 6c65 7373 2e20 496e 6465  ot gapless. Inde
+000049f0: 6564 2c20 7468 6572 6520 6172 6520 7573  ed, there are us
+00004a00: 7561 6c6c 7920 6c61 7267 6520 6469 6666  ually large diff
+00004a10: 6572 656e 6365 735c 6e62 6574 7765 656e  erences\nbetween
+00004a20: 2074 6865 2063 6f6d 6d69 7420 706f 7369   the commit posi
+00004a30: 7469 6f6e 7320 6f66 2073 7563 6365 7373  tions of success
+00004a40: 6976 6520 7265 636f 7264 6564 2065 7665  ive recorded eve
+00004a50: 6e74 732e 5c6e 5c6e 5468 6520 2263 6f6d  nts.\n\nThe "com
+00004a60: 6d69 7420 706f 7369 7469 6f6e 2220 7265  mit position" re
+00004a70: 7475 726e 6564 2062 7920 6061 7070 656e  turned by `appen
+00004a80: 645f 6576 656e 7473 2829 6020 6973 2074  d_events()` is t
+00004a90: 6861 7420 6f66 2074 6865 206c 6173 745c  hat of the last\
+00004aa0: 6e72 6563 6f72 6465 6420 6576 656e 7420  nrecorded event 
+00004ab0: 696e 2074 6865 2067 6976 656e 2062 6174  in the given bat
+00004ac0: 6368 206f 6620 6e65 7720 6576 656e 7473  ch of new events
+00004ad0: 2e5c 6e5c 6e54 6865 2022 636f 6d6d 6974  .\n\nThe "commit
+00004ae0: 2070 6f73 6974 696f 6e22 2072 6574 7572   position" retur
+00004af0: 6e65 6420 696e 2074 6869 7320 7761 7920  ned in this way 
+00004b00: 6361 6e20 7468 6572 6566 6f72 6520 6265  can therefore be
+00004b10: 2075 7365 6420 746f 2077 6169 745c 6e66   used to wait\nf
+00004b20: 6f72 2061 2064 6f77 6e73 7472 6561 6d20  or a downstream 
+00004b30: 636f 6d70 6f6e 656e 7420 746f 2068 6176  component to hav
+00004b40: 6520 7072 6f63 6573 7365 6420 616c 6c20  e processed all 
+00004b50: 7468 6520 6576 656e 7473 2074 6861 7420  the events that 
+00004b60: 7765 7265 2072 6563 6f72 6465 642e 5c6e  were recorded.\n
+00004b70: 5c6e 466f 7220 6578 616d 706c 652c 2063  \nFor example, c
+00004b80: 6f6e 7369 6465 7220 6120 7573 6572 2069  onsider a user i
+00004b90: 6e74 6572 6661 6365 2063 6f6d 6d61 6e64  nterface command
+00004ba0: 2074 6861 7420 7265 7375 6c74 7320 696e   that results in
+00004bb0: 2074 6865 2072 6563 6f72 6469 6e67 5c6e   the recording\n
+00004bc0: 6f66 206e 6577 2065 7665 6e74 732c 2061  of new events, a
+00004bd0: 6e64 2061 2071 7565 7279 2069 6e74 6f20  nd a query into 
+00004be0: 616e 2065 7665 6e74 7561 6c6c 7920 636f  an eventually co
+00004bf0: 6e73 6973 7465 6e74 206d 6174 6572 6961  nsistent materia
+00004c00: 6c69 7a65 645c 6e76 6965 7720 696e 2061  lized\nview in a
+00004c10: 2064 6f77 6e73 7472 6561 6d20 636f 6d70   downstream comp
+00004c20: 6f6e 656e 7420 7468 6174 2069 7320 7570  onent that is up
+00004c30: 6461 7465 6420 6672 6f6d 2074 6865 7365  dated from these
+00004c40: 2065 7665 6e74 732e 2049 6620 7468 6520   events. If the 
+00004c50: 6e65 775c 6e65 7665 6e74 7320 6861 7665  new\nevents have
+00004c60: 206e 6f74 2079 6574 2062 6565 6e20 7072   not yet been pr
+00004c70: 6f63 6573 7365 642c 2074 6865 2076 6965  ocessed, the vie
+00004c80: 7720 776f 756c 6420 6265 2073 7461 6c65  w would be stale
+00004c90: 2e20 5468 6520 2263 6f6d 6d69 7420 706f  . The "commit po
+00004ca0: 7369 7469 6f6e 225c 6e63 616e 2062 6520  sition"\ncan be 
+00004cb0: 7573 6564 2062 7920 7468 6520 7573 6572  used by the user
+00004cc0: 2069 6e74 6572 6661 6365 2074 6f20 706f   interface to po
+00004cd0: 6c6c 2074 6865 2064 6f77 6e73 7472 6561  ll the downstrea
+00004ce0: 6d20 636f 6d70 6f6e 656e 7420 756e 7469  m component unti
+00004cf0: 6c20 6974 2068 6173 5c6e 7072 6f63 6573  l it has\nproces
+00004d00: 7365 6420 7468 6f73 6520 6e65 7720 6576  sed those new ev
+00004d10: 656e 7473 2c20 6166 7465 7220 7768 6963  ents, after whic
+00004d20: 6820 7469 6d65 2074 6865 2076 6965 7720  h time the view 
+00004d30: 7769 6c6c 206e 6f74 2062 6520 7374 616c  will not be stal
+00004d40: 652e 5c6e 5c6e 5c6e 2323 2320 4170 7065  e.\n\n\n### Appe
+00004d50: 6e64 2065 7665 6e74 5c6e 5c6e 2a72 6571  nd event\n\n*req
+00004d60: 7569 7265 7320 6c65 6164 6572 2a5c 6e5c  uires leader*\n\
+00004d70: 6e54 6865 2060 6170 7065 6e64 5f65 7665  nThe `append_eve
+00004d80: 6e74 2829 6020 6d65 7468 6f64 2063 616e  nt()` method can
+00004d90: 2062 6520 7573 6564 2074 6f20 7772 6974   be used to writ
+00004da0: 6520 6120 7369 6e67 6c65 206e 6577 2065  e a single new e
+00004db0: 7665 6e74 2074 6f20 6120 7374 7265 616d  vent to a stream
+00004dc0: 2e5c 6e5c 6e54 6872 6565 2061 7267 756d  .\n\nThree argum
+00004dd0: 656e 7473 2061 7265 2072 6571 7569 7265  ents are require
+00004de0: 642c 2060 7374 7265 616d 5f6e 616d 6560  d, `stream_name`
+00004df0: 2c20 6065 7870 6563 7465 645f 706f 7369  , `expected_posi
+00004e00: 7469 6f6e 6020 616e 6420 6065 7665 6e74  tion` and `event
+00004e10: 602e 5c6e 5c6e 5468 6973 206d 6574 686f  `.\n\nThis metho
+00004e20: 6420 776f 726b 7320 696e 2074 6865 2073  d works in the s
+00004e30: 616d 6520 7761 7920 6173 2060 6170 7065  ame way as `appe
+00004e40: 6e64 5f65 7665 6e74 7328 2960 2c20 686f  nd_events()`, ho
+00004e50: 7765 7665 7220 6065 7665 6e74 6020 6973  wever `event` is
+00004e60: 2065 7870 6563 7465 645c 6e74 6f20 6265   expected\nto be
+00004e70: 2061 2073 696e 676c 6520 604e 6577 4576   a single `NewEv
+00004e80: 656e 7460 2e5c 6e5c 6e54 6869 7320 6d65  ent`.\n\nThis me
+00004e90: 7468 6f64 2074 616b 6573 2061 6e20 6f70  thod takes an op
+00004ea0: 7469 6f6e 616c 2060 7469 6d65 6f75 7460  tional `timeout`
+00004eb0: 2061 7267 756d 656e 742c 2077 6869 6368   argument, which
+00004ec0: 2069 7320 6120 5079 7468 6f6e 2060 666c   is a Python `fl
+00004ed0: 6f61 7460 2074 6861 7420 7365 7473 5c6e  oat` that sets\n
+00004ee0: 6120 6465 6164 6c69 6e65 2066 6f72 2074  a deadline for t
+00004ef0: 6865 2063 6f6d 706c 6574 696f 6e20 6f66  he completion of
+00004f00: 2074 6865 2067 5250 4320 6f70 6572 6174   the gRPC operat
+00004f10: 696f 6e2e 5c6e 5c6e 5369 6e63 6520 7468  ion.\n\nSince th
+00004f20: 6520 6861 6e64 6c69 6e67 206f 6620 6120  e handling of a 
+00004f30: 636f 6d6d 616e 6420 696e 2079 6f75 7220  command in your 
+00004f40: 6170 706c 6963 6174 696f 6e20 6d61 7920  application may 
+00004f50: 7265 7375 6c74 2069 6e20 6f6e 6520 6f72  result in one or
+00004f60: 206d 616e 795c 6e6e 6577 2065 7665 6e74   many\nnew event
+00004f70: 732c 2061 6e64 2074 6865 2072 6573 756c  s, and the resul
+00004f80: 7473 206f 6620 6861 6e64 6c69 6e67 2061  ts of handling a
+00004f90: 2063 6f6d 6d61 6e64 2073 686f 756c 6420   command should 
+00004fa0: 6265 2072 6563 6f72 6465 6420 6174 6f6d  be recorded atom
+00004fb0: 6963 616c 6c79 2c5c 6e61 6e64 2074 6865  ically,\nand the
+00004fc0: 2077 7269 7469 6e67 206f 6620 6e65 7720   writing of new 
+00004fd0: 6576 656e 7473 2067 656e 6572 6174 6564  events generated
+00004fe0: 2062 7920 6120 636f 6d6d 616e 6420 6861   by a command ha
+00004ff0: 6e64 6c65 7220 6973 2075 7375 616c 6c79  ndler is usually
+00005000: 2061 2063 6f6e 6365 726e 5c6e 7468 6174   a concern\nthat
+00005010: 2069 7320 6661 6374 6f72 6564 206f 7574   is factored out
+00005020: 2061 6e64 2075 7365 6420 6576 6572 7977   and used everyw
+00005030: 6865 7265 2069 6e20 6120 7072 6f6a 6563  here in a projec
+00005040: 742c 2069 7420 6973 2071 7569 7465 2075  t, it is quite u
+00005050: 7375 616c 2069 6e20 6120 7072 6f6a 6563  sual in a projec
+00005060: 745c 6e74 6f20 6f6e 6c79 2075 7365 2060  t\nto only use `
+00005070: 6170 7065 6e64 5f65 7665 6e74 7328 2960  append_events()`
+00005080: 2074 6f20 7265 636f 7264 206e 6577 2065   to record new e
+00005090: 7665 6e74 732e 2046 6f72 2074 6869 7320  vents. For this 
+000050a0: 7265 6173 6f6e 2c20 616e 2065 7861 6d70  reason, an examp
+000050b0: 6c65 2069 735c 6e6e 6f74 2070 726f 7669  le is\nnot provi
+000050c0: 6465 6420 6865 7265 2e5c 6e5c 6e5c 6e23  ded here.\n\n\n#
+000050d0: 2323 2049 6465 6d70 6f74 656e 7420 6170  ## Idempotent ap
+000050e0: 7065 6e64 206f 7065 7261 7469 6f6e 735c  pend operations\
+000050f0: 6e5c 6e53 6f6d 6574 696d 6573 2069 7420  n\nSometimes it 
+00005100: 6d61 7920 6861 7070 656e 2074 6861 7420  may happen that 
+00005110: 6120 6e65 7720 6576 656e 7420 6973 2073  a new event is s
+00005120: 7563 6365 7373 6675 6c6c 7920 7265 636f  uccessfully reco
+00005130: 7264 6564 2061 6e64 2074 6865 6e20 736f  rded and then so
+00005140: 6d65 686f 775c 6e74 6865 2063 6f6e 6e65  mehow\nthe conne
+00005150: 6374 696f 6e20 746f 2074 6865 2064 6174  ction to the dat
+00005160: 6162 6173 6520 6765 7473 2069 6e74 6572  abase gets inter
+00005170: 7275 7074 6564 2062 6566 6f72 6520 7468  rupted before th
+00005180: 6520 7375 6363 6573 7366 756c 2063 616c  e successful cal
+00005190: 6c20 6361 6e20 7265 7475 726e 5c6e 7375  l can return\nsu
+000051a0: 6363 6573 7366 756c 6c79 2074 6f20 7468  ccessfully to th
+000051b0: 6520 636c 6965 6e74 2e20 496e 2063 6173  e client. In cas
+000051c0: 6520 6f66 2061 6e20 6572 726f 7220 7768  e of an error wh
+000051d0: 656e 2061 7070 656e 6469 6e67 2061 6e20  en appending an 
+000051e0: 6576 656e 742c 2069 7420 6d61 7920 6265  event, it may be
+000051f0: 5c6e 6465 7369 7261 626c 6520 746f 2072  \ndesirable to r
+00005200: 6574 7279 2061 7070 656e 6469 6e67 2074  etry appending t
+00005210: 6865 2073 616d 6520 6576 656e 7420 6174  he same event at
+00005220: 2074 6865 2073 616d 6520 706f 7369 7469   the same positi
+00005230: 6f6e 2e20 4966 2074 6865 2065 7665 6e74  on. If the event
+00005240: 2077 6173 5c6e 696e 2066 6163 7420 7375   was\nin fact su
+00005250: 6363 6573 7366 756c 6c79 2072 6563 6f72  ccessfully recor
+00005260: 6465 642c 2069 7420 6973 2063 6f6e 7665  ded, it is conve
+00005270: 6e69 656e 7420 666f 7220 7468 6520 7265  nient for the re
+00005280: 7472 7920 746f 2072 6574 7572 6e20 7375  try to return su
+00005290: 6363 6573 7366 756c 6c79 5c6e 7769 7468  ccessfully\nwith
+000052a0: 6f75 7420 7261 6973 696e 6720 616e 2065  out raising an e
+000052b0: 7272 6f72 2064 7565 2074 6f20 6f70 7469  rror due to opti
+000052c0: 6d69 7374 6963 2063 6f6e 6375 7272 656e  mistic concurren
+000052d0: 6379 2063 6f6e 7472 6f6c 2028 6173 2064  cy control (as d
+000052e0: 6573 6372 6962 6564 2061 626f 7665 292e  escribed above).
+000052f0: 5c6e 5c6e 5468 6520 6578 616d 706c 6520  \n\nThe example 
+00005300: 6265 6c6f 7720 7368 6f77 7320 7468 6520  below shows the 
+00005310: 6061 7070 656e 645f 6576 656e 7473 2829  `append_events()
+00005320: 6020 6d65 7468 6f64 2062 6569 6e67 2063  ` method being c
+00005330: 616c 6c65 6420 6167 6169 6e20 7769 7468  alled again with
+00005340: 5c6e 6065 7665 6e74 3360 2061 6e64 2060  \n`event3` and `
+00005350: 6578 7065 6374 6564 5f70 6f73 6974 696f  expected_positio
+00005360: 6e3d 3260 2e20 5765 2063 616e 2073 6565  n=2`. We can see
+00005370: 2074 6861 7420 7265 7065 6174 696e 6720   that repeating 
+00005380: 7468 6520 6361 6c6c 2074 6f5c 6e60 6170  the call to\n`ap
+00005390: 7065 6e64 5f65 7665 6e74 7328 2960 2072  pend_events()` r
+000053a0: 6574 7572 6e73 2073 7563 6365 7373 6675  eturns successfu
+000053b0: 6c6c 792e 5c6e 5c6e 6060 6070 7974 686f  lly.\n\n```pytho
+000053c0: 6e5c 6e23 2052 6574 7279 2061 7070 656e  n\n# Retry appen
+000053d0: 6469 6e67 2065 7665 6e74 332e 5c6e 636f  ding event3.\nco
+000053e0: 6d6d 6974 5f70 6f73 6974 696f 6e5f 7265  mmit_position_re
+000053f0: 7472 7920 3d20 636c 6965 6e74 2e61 7070  try = client.app
+00005400: 656e 645f 6576 656e 7473 285c 6e20 2020  end_events(\n   
+00005410: 2073 7472 6561 6d5f 6e61 6d65 3d73 7472   stream_name=str
+00005420: 6561 6d5f 6e61 6d65 312c 5c6e 2020 2020  eam_name1,\n    
+00005430: 6578 7065 6374 6564 5f70 6f73 6974 696f  expected_positio
+00005440: 6e3d 302c 5c6e 2020 2020 6576 656e 7473  n=0,\n    events
+00005450: 3d5b 6576 656e 7432 2c20 6576 656e 7433  =[event2, event3
+00005460: 5d2c 5c6e 295c 6e60 6060 5c6e 5c6e 5765  ],\n)\n```\n\nWe
+00005470: 2063 616e 2073 6565 2074 6861 7420 7468   can see that th
+00005480: 6520 7361 6d65 2063 6f6d 6d69 7420 706f  e same commit po
+00005490: 7369 7469 6f6e 2069 7320 7265 7475 726e  sition is return
+000054a0: 6564 2061 7320 6162 6f76 652e 5c6e 5c6e  ed as above.\n\n
+000054b0: 6060 6070 7974 686f 6e5c 6e61 7373 6572  ```python\nasser
+000054c0: 7420 636f 6d6d 6974 5f70 6f73 6974 696f  t commit_positio
+000054d0: 6e5f 7265 7472 7920 3d3d 2063 6f6d 6d69  n_retry == commi
+000054e0: 745f 706f 7369 7469 6f6e 325c 6e60 6060  t_position2\n```
+000054f0: 5c6e 5c6e 5765 2063 616e 2061 6c73 6f20  \n\nWe can also 
+00005500: 7365 6520 7468 6520 7374 7265 616d 2068  see the stream h
+00005510: 6173 2062 6565 6e20 756e 6368 616e 6765  as been unchange
+00005520: 6420 6465 7370 6974 6520 6361 6c6c 696e  d despite callin
+00005530: 6720 7468 6520 6170 7065 6e64 5f65 7665  g the append_eve
+00005540: 6e74 7328 295c 6e74 7769 6365 2077 6974  nts()\ntwice wit
+00005550: 6820 7468 6520 7361 6d65 2061 7267 756d  h the same argum
+00005560: 656e 7473 2c20 6279 2063 616c 6c69 6e67  ents, by calling
+00005570: 2060 7265 6164 5f73 7472 6561 6d5f 6576   `read_stream_ev
+00005580: 656e 7473 2829 602e 2054 6861 7420 6973  ents()`. That is
+00005590: 2c20 7468 6572 655c 6e61 7265 2073 7469  , there\nare sti
+000055a0: 6c6c 206f 6e6c 7920 7468 7265 6520 6576  ll only three ev
+000055b0: 656e 7473 2069 6e20 7468 6520 7374 7265  ents in the stre
+000055c0: 616d 2e5c 6e5c 6e60 6060 7079 7468 6f6e  am.\n\n```python
+000055d0: 5c6e 6576 656e 7473 203d 2063 6c69 656e  \nevents = clien
+000055e0: 742e 7265 6164 5f73 7472 6561 6d5f 6576  t.read_stream_ev
+000055f0: 656e 7473 285c 6e20 2020 2073 7472 6561  ents(\n    strea
+00005600: 6d5f 6e61 6d65 3d73 7472 6561 6d5f 6e61  m_name=stream_na
+00005610: 6d65 315c 6e29 5c6e 5c6e 6173 7365 7274  me1\n)\n\nassert
+00005620: 206c 656e 2865 7665 6e74 7329 203d 3d20   len(events) == 
+00005630: 335c 6e60 6060 5c6e 5c6e 5468 6973 2069  3\n```\n\nThis i
+00005640: 6465 6d70 6f74 656e 7420 6265 6861 7669  dempotent behavi
+00005650: 6f75 7220 6973 2061 6374 6976 6174 6564  our is activated
+00005660: 2062 6563 6175 7365 2074 6865 2060 4e65   because the `Ne
+00005670: 7745 7665 6e74 6020 636c 6173 7320 6861  wEvent` class ha
+00005680: 7320 616e 2060 6964 605c 6e61 7474 7269  s an `id`\nattri
+00005690: 6275 7465 2074 6861 742c 2062 7920 6465  bute that, by de
+000056a0: 6661 756c 742c 2069 7320 6173 7369 676e  fault, is assign
+000056b0: 6564 2061 206e 6577 2061 6e64 2075 6e69  ed a new and uni
+000056c0: 7175 6520 7665 7273 696f 6e2d 3420 5555  que version-4 UU
+000056d0: 4944 2077 6865 6e20 616e 5c6e 696e 7374  ID when an\ninst
+000056e0: 616e 6365 206f 6620 604e 6577 4576 656e  ance of `NewEven
+000056f0: 7460 2069 7320 636f 6e73 7472 7563 7465  t` is constructe
+00005700: 642e 2049 6620 6576 656e 7473 2077 6974  d. If events wit
+00005710: 6820 7468 6520 7361 6d65 2060 6964 6020  h the same `id` 
+00005720: 6172 6520 6170 7065 6e64 6564 5c6e 6174  are appended\nat
+00005730: 2074 6865 2073 616d 6520 6065 7870 6563   the same `expec
+00005740: 7465 645f 706f 7369 7469 6f6e 602c 2074  ted_position`, t
+00005750: 6865 2073 7472 6561 6d20 7769 6c6c 2062  he stream will b
+00005760: 6520 756e 6368 616e 6765 642c 2074 6865  e unchanged, the
+00005770: 206f 7065 7261 7469 6f6e 2077 696c 6c5c   operation will\
+00005780: 6e63 6f6d 706c 6574 6520 7375 6363 6573  ncomplete succes
+00005790: 7366 756c 6c79 2c20 616e 6420 7468 6520  sfully, and the 
+000057a0: 7361 6d65 2063 6f6d 6d69 7420 706f 7369  same commit posi
+000057b0: 7469 6f6e 2077 696c 6c20 6265 2072 6574  tion will be ret
+000057c0: 7572 6e65 6420 746f 2074 6865 2063 616c  urned to the cal
+000057d0: 6c65 722e 5c6e 5c6e 6060 6070 7974 686f  ler.\n\n```pytho
+000057e0: 6e5c 6e66 726f 6d20 7575 6964 2069 6d70  n\nfrom uuid imp
+000057f0: 6f72 7420 5555 4944 5c6e 5c6e 5c6e 6173  ort UUID\n\n\nas
+00005800: 7365 7274 2069 7369 6e73 7461 6e63 6528  sert isinstance(
+00005810: 6576 656e 7431 2e69 642c 2055 5549 4429  event1.id, UUID)
+00005820: 5c6e 6173 7365 7274 2069 7369 6e73 7461  \nassert isinsta
+00005830: 6e63 6528 6576 656e 7432 2e69 642c 2055  nce(event2.id, U
+00005840: 5549 4429 5c6e 6173 7365 7274 2069 7369  UID)\nassert isi
+00005850: 6e73 7461 6e63 6528 6576 656e 7433 2e69  nstance(event3.i
+00005860: 642c 2055 5549 4429 5c6e 5c6e 6173 7365  d, UUID)\n\nasse
+00005870: 7274 2065 7665 6e74 312e 6964 2021 3d20  rt event1.id != 
+00005880: 6576 656e 7432 2e69 645c 6e61 7373 6572  event2.id\nasser
+00005890: 7420 6576 656e 7432 2e69 6420 213d 2065  t event2.id != e
+000058a0: 7665 6e74 332e 6964 5c6e 5c6e 6173 7365  vent3.id\n\nasse
+000058b0: 7274 2065 7665 6e74 735b 305d 2e69 6420  rt events[0].id 
+000058c0: 3d3d 2065 7665 6e74 312e 6964 5c6e 6173  == event1.id\nas
+000058d0: 7365 7274 2065 7665 6e74 735b 315d 2e69  sert events[1].i
+000058e0: 6420 3d3d 2065 7665 6e74 322e 6964 5c6e  d == event2.id\n
+000058f0: 6173 7365 7274 2065 7665 6e74 735b 325d  assert events[2]
+00005900: 2e69 6420 3d3d 2065 7665 6e74 332e 6964  .id == event3.id
+00005910: 5c6e 6060 605c 6e5c 6e49 7420 6973 2070  \n```\n\nIt is p
+00005920: 6f73 7369 626c 6520 746f 2073 6574 2074  ossible to set t
+00005930: 6865 2060 6964 6020 636f 6e73 7472 7563  he `id` construc
+00005940: 746f 7220 6172 6775 6d65 6e74 206f 6620  tor argument of 
+00005950: 604e 6577 4576 656e 7460 2077 6865 6e20  `NewEvent` when 
+00005960: 696e 7374 616e 7469 6174 696e 675c 6e74  instantiating\nt
+00005970: 6865 2060 4e65 7745 7665 6e74 6020 636c  he `NewEvent` cl
+00005980: 6173 732c 2062 7574 2069 6e20 7468 6520  ass, but in the 
+00005990: 6578 616d 706c 6573 2061 626f 7665 2077  examples above w
+000059a0: 6520 6861 7665 2062 6565 6e20 7573 696e  e have been usin
+000059b0: 6720 7468 6520 6465 6661 756c 745c 6e62  g the default\nb
+000059c0: 6568 6176 696f 7572 2c20 7768 6963 6820  ehaviour, which 
+000059d0: 6973 2074 6861 7420 7468 6520 6069 6460  is that the `id`
+000059e0: 2076 616c 7565 2069 7320 6765 6e65 7261   value is genera
+000059f0: 7465 6420 7768 656e 2074 6865 2060 4e65  ted when the `Ne
+00005a00: 7745 7665 6e74 6020 636c 6173 7320 6973  wEvent` class is
+00005a10: 5c6e 696e 7374 616e 7469 6174 6564 2e5c  \ninstantiated.\
+00005a20: 6e5c 6e5c 6e23 2323 2052 6561 6420 7374  n\n\n### Read st
+00005a30: 7265 616d 2065 7665 6e74 735c 6e5c 6e54  ream events\n\nT
+00005a40: 6865 2060 7265 6164 5f73 7472 6561 6d5f  he `read_stream_
+00005a50: 6576 656e 7473 2829 6020 6d65 7468 6f64  events()` method
+00005a60: 2063 616e 2062 6520 7573 6564 2074 6f20   can be used to 
+00005a70: 6f62 7461 696e 2074 6865 2072 6563 6f72  obtain the recor
+00005a80: 6465 6420 6576 656e 7473 2069 6e20 615c  ded events in a\
+00005a90: 6e73 7472 6561 6d2e 2049 7420 7265 7475  nstream. It retu
+00005aa0: 726e 7320 6120 7365 7175 656e 6365 206f  rns a sequence o
+00005ab0: 6620 7265 636f 7264 6564 2065 7665 6e74  f recorded event
+00005ac0: 7320 6f62 6a65 6374 732e 2054 6865 2072  s objects. The r
+00005ad0: 6563 6569 7665 6420 7265 636f 7264 6564  eceived recorded
+00005ae0: 2065 7665 6e74 5c6e 6f62 6a65 6374 2061   event\nobject a
+00005af0: 7265 2069 6e73 7461 6e63 6573 206f 6620  re instances of 
+00005b00: 7468 6520 6052 6563 6f72 6465 6445 7665  the `RecordedEve
+00005b10: 6e74 6020 636c 6173 7320 2873 6565 2062  nt` class (see b
+00005b20: 656c 6f77 292e 5c6e 5c6e 5468 6973 206d  elow).\n\nThis m
+00005b30: 6574 686f 6420 6861 7320 6f6e 6520 7265  ethod has one re
+00005b40: 7175 6972 6564 2061 7267 756d 656e 742c  quired argument,
+00005b50: 2060 7374 7265 616d 5f6e 616d 6560 2c20   `stream_name`, 
+00005b60: 7768 6963 6820 6973 2074 6865 206e 616d  which is the nam
+00005b70: 6520 6f66 5c6e 7468 6520 7374 7265 616d  e of\nthe stream
+00005b80: 2066 726f 6d20 7768 6963 6820 746f 2072   from which to r
+00005b90: 6561 6420 6576 656e 7473 2e20 4279 2064  ead events. By d
+00005ba0: 6566 6175 6c74 2c20 7468 6520 7265 636f  efault, the reco
+00005bb0: 7264 6564 2065 7665 6e74 7320 696e 2074  rded events in t
+00005bc0: 6865 5c6e 7374 7265 616d 2061 7265 2072  he\nstream are r
+00005bd0: 6574 7572 6e65 6420 696e 2074 6865 206f  eturned in the o
+00005be0: 7264 6572 2074 6865 7920 7765 7265 2072  rder they were r
+00005bf0: 6563 6f72 6465 642e 5c6e 5c6e 5468 6520  ecorded.\n\nThe 
+00005c00: 6d65 7468 6f64 2060 7265 6164 5f73 7472  method `read_str
+00005c10: 6561 6d5f 6576 656e 7473 2829 6020 616c  eam_events()` al
+00005c20: 736f 2073 7570 706f 7274 7320 666f 7572  so supports four
+00005c30: 206f 7074 696f 6e61 6c20 6172 6775 6d65   optional argume
+00005c40: 6e74 732c 5c6e 6073 7472 6561 6d5f 706f  nts,\n`stream_po
+00005c50: 7369 7469 6f6e 602c 2060 6261 636b 7761  sition`, `backwa
+00005c60: 7264 7360 2c20 606c 696d 6974 602c 2061  rds`, `limit`, a
+00005c70: 6e64 2060 7469 6d65 6f75 7460 2e5c 6e5c  nd `timeout`.\n\
+00005c80: 6e54 6865 206f 7074 696f 6e61 6c20 6073  nThe optional `s
+00005c90: 7472 6561 6d5f 706f 7369 7469 6f6e 6020  tream_position` 
+00005ca0: 6172 6775 6d65 6e74 2069 7320 616e 206f  argument is an o
+00005cb0: 7074 696f 6e61 6c20 696e 7465 6765 7220  ptional integer 
+00005cc0: 7468 6174 2063 616e 2062 6520 7573 6564  that can be used
+00005cd0: 2074 6f5c 6e69 6e64 6963 6174 6520 7468   to\nindicate th
+00005ce0: 6520 706f 7369 7469 6f6e 2069 6e20 7468  e position in th
+00005cf0: 6520 7374 7265 616d 2066 726f 6d20 7768  e stream from wh
+00005d00: 6963 6820 746f 2073 7461 7274 2072 6561  ich to start rea
+00005d10: 6469 6e67 2e20 5468 6973 2061 7267 756d  ding. This argum
+00005d20: 656e 7420 6973 5c6e 604e 6f6e 6560 2062  ent is\n`None` b
+00005d30: 7920 6465 6661 756c 742c 2077 6869 6368  y default, which
+00005d40: 206d 6561 6e73 2074 6865 2073 7472 6561   means the strea
+00005d50: 6d20 7769 6c6c 2062 6520 7265 6164 2065  m will be read e
+00005d60: 6974 6865 7220 6672 6f6d 2074 6865 2073  ither from the s
+00005d70: 7461 7274 206f 6620 7468 655c 6e73 7472  tart of the\nstr
+00005d80: 6561 6d20 2874 6865 2064 6566 6175 6c74  eam (the default
+00005d90: 2062 6568 6176 696f 7572 292c 206f 7220   behaviour), or 
+00005da0: 6672 6f6d 2074 6865 2065 6e64 206f 6620  from the end of 
+00005db0: 7468 6520 7374 7265 616d 2069 6620 6062  the stream if `b
+00005dc0: 6163 6b77 6172 6473 6020 6973 5c6e 6054  ackwards` is\n`T
+00005dd0: 7275 6560 2028 7365 6520 6265 6c6f 7729  rue` (see below)
+00005de0: 2e20 5768 656e 2072 6561 6469 6e67 2061  . When reading a
+00005df0: 2073 7472 6561 6d20 6672 6f6d 2061 2073   stream from a s
+00005e00: 7065 6369 6669 6320 706f 7369 7469 6f6e  pecific position
+00005e10: 2069 6e20 7468 6520 7374 7265 616d 2c20   in the stream, 
+00005e20: 7468 655c 6e72 6563 6f72 6465 6420 6576  the\nrecorded ev
+00005e30: 656e 7420 6174 2074 6861 7420 706f 7369  ent at that posi
+00005e40: 7469 6f6e 2077 696c 6c20 6265 2069 6e63  tion will be inc
+00005e50: 6c75 6465 642c 2062 6f74 6820 7768 656e  luded, both when
+00005e60: 2072 6561 6469 6e67 2066 6f72 7761 7264   reading forward
+00005e70: 735c 6e66 726f 6d20 7468 6174 2070 6f73  s\nfrom that pos
+00005e80: 6974 696f 6e2c 2061 6e64 2077 6865 6e20  ition, and when 
+00005e90: 7265 6164 696e 6720 6261 636b 7761 7264  reading backward
+00005ea0: 7320 6672 6f6d 2074 6861 7420 706f 7369  s from that posi
+00005eb0: 7469 6f6e 2e5c 6e5c 6e54 6865 206f 7074  tion.\n\nThe opt
+00005ec0: 696f 6e61 6c20 6062 6163 6b77 6172 6473  ional `backwards
+00005ed0: 6020 6172 6775 6d65 6e74 2069 7320 6120  ` argument is a 
+00005ee0: 626f 6f6c 6561 6e2c 2062 7920 6465 6661  boolean, by defa
+00005ef0: 756c 7420 6046 616c 7365 602c 2077 6869  ult `False`, whi
+00005f00: 6368 206d 6561 6e73 2074 6865 5c6e 7374  ch means the\nst
+00005f10: 7265 616d 2077 696c 6c20 6265 2072 6561  ream will be rea
+00005f20: 6420 666f 7277 6172 6473 2062 7920 6465  d forwards by de
+00005f30: 6661 756c 742c 2073 6f20 7468 6174 2065  fault, so that e
+00005f40: 7665 6e74 7320 6172 6520 7265 7475 726e  vents are return
+00005f50: 6564 2069 6e20 7468 655c 6e6f 7264 6572  ed in the\norder
+00005f60: 2074 6865 7920 7765 7265 2061 7070 656e   they were appen
+00005f70: 6465 642c 2049 6620 6062 6163 6b77 6172  ded, If `backwar
+00005f80: 6473 6020 6973 2060 5472 7565 602c 2074  ds` is `True`, t
+00005f90: 6865 2073 7472 6561 6d20 7769 6c6c 2062  he stream will b
+00005fa0: 6520 7265 6164 5c6e 6261 636b 7761 7264  e read\nbackward
+00005fb0: 732c 2073 6f20 7468 6174 2065 7665 6e74  s, so that event
+00005fc0: 7320 6172 6520 7265 7475 726e 6564 2069  s are returned i
+00005fd0: 6e20 7265 7665 7273 6520 6f72 6465 722e  n reverse order.
+00005fe0: 5c6e 5c6e 5468 6520 6f70 7469 6f6e 616c  \n\nThe optional
+00005ff0: 2060 6c69 6d69 7460 2061 7267 756d 656e   `limit` argumen
+00006000: 7420 6973 2061 6e20 696e 7465 6765 7220  t is an integer 
+00006010: 7768 6963 6820 6c69 6d69 7473 2074 6865  which limits the
+00006020: 206e 756d 6265 7220 6f66 2065 7665 6e74   number of event
+00006030: 7320 7468 6174 2077 696c 6c5c 6e62 6520  s that will\nbe 
+00006040: 7265 7475 726e 6564 2e20 5468 6520 6465  returned. The de
+00006050: 6661 756c 7420 7661 6c75 6520 6973 2060  fault value is `
+00006060: 7379 732e 6d61 7869 6e74 602e 5c6e 5c6e  sys.maxint`.\n\n
+00006070: 5468 6520 6f70 7469 6f6e 616c 2060 7469  The optional `ti
+00006080: 6d65 6f75 7460 2061 7267 756d 656e 7420  meout` argument 
+00006090: 6973 2061 2050 7974 686f 6e20 6066 6c6f  is a Python `flo
+000060a0: 6174 6020 7768 6963 6820 7365 7473 2061  at` which sets a
+000060b0: 2064 6561 646c 696e 6520 666f 725c 6e74   deadline for\nt
+000060c0: 6865 2063 6f6d 706c 6574 696f 6e20 6f66  he completion of
+000060d0: 2074 6865 2067 5250 4320 6f70 6572 6174   the gRPC operat
+000060e0: 696f 6e2e 5c6e 5c6e 5468 6520 6578 616d  ion.\n\nThe exam
+000060f0: 706c 6520 6265 6c6f 7720 7368 6f77 7320  ple below shows 
+00006100: 686f 7720 746f 2072 6561 6420 7468 6520  how to read the 
+00006110: 7265 636f 7264 6564 2065 7665 6e74 7320  recorded events 
+00006120: 6f66 2061 2073 7472 6561 6d5c 6e66 6f72  of a stream\nfor
+00006130: 7761 7264 7320 6672 6f6d 2074 6865 2073  wards from the s
+00006140: 7461 7274 206f 6620 7468 6520 7374 7265  tart of the stre
+00006150: 616d 2074 6f20 7468 6520 656e 6420 6f66  am to the end of
+00006160: 2074 6865 2073 7472 6561 6d2e 2054 6865   the stream. The
+00006170: 5c6e 6e61 6d65 206f 6620 6120 7374 7265  \nname of a stre
+00006180: 616d 2069 7320 6769 7665 6e20 7768 656e  am is given when
+00006190: 2063 616c 6c69 6e67 2074 6865 206d 6574   calling the met
+000061a0: 686f 642e 5c6e 5c6e 6060 6070 7974 686f  hod.\n\n```pytho
+000061b0: 6e5c 6e65 7665 6e74 7320 3d20 636c 6965  n\nevents = clie
+000061c0: 6e74 2e72 6561 645f 7374 7265 616d 5f65  nt.read_stream_e
+000061d0: 7665 6e74 7328 5c6e 2020 2020 7374 7265  vents(\n    stre
+000061e0: 616d 5f6e 616d 653d 7374 7265 616d 5f6e  am_name=stream_n
+000061f0: 616d 6531 5c6e 295c 6e60 6060 5c6e 5c6e  ame1\n)\n```\n\n
+00006200: 4e6f 7720 7468 6174 2077 6520 6861 7665  Now that we have
+00006210: 2061 2073 6571 7565 6e63 6520 6f66 2065   a sequence of e
+00006220: 7665 6e74 206f 626a 6563 7473 2c20 7765  vent objects, we
+00006230: 2063 616e 2063 6865 636b 2077 6520 676f   can check we go
+00006240: 7420 7468 655c 6e74 6872 6565 2065 7665  t the\nthree eve
+00006250: 6e74 7320 7468 6174 2077 6572 6520 6170  nts that were ap
+00006260: 7065 6e64 6564 2074 6f20 7468 6520 7374  pended to the st
+00006270: 7265 616d 2c20 616e 6420 7468 6174 2074  ream, and that t
+00006280: 6865 7920 6172 655c 6e6f 7264 6572 6564  hey are\nordered
+00006290: 2065 7861 6374 6c79 2061 7320 7468 6579   exactly as they
+000062a0: 2077 6572 6520 6170 7065 6e64 6564 2e5c   were appended.\
+000062b0: 6e5c 6e60 6060 7079 7468 6f6e 5c6e 6173  n\n```python\nas
+000062c0: 7365 7274 206c 656e 2865 7665 6e74 7329  sert len(events)
+000062d0: 203d 3d20 335c 6e5c 6e61 7373 6572 7420   == 3\n\nassert 
+000062e0: 6576 656e 7473 5b30 5d2e 7374 7265 616d  events[0].stream
+000062f0: 5f6e 616d 6520 3d3d 2073 7472 6561 6d5f  _name == stream_
+00006300: 6e61 6d65 315c 6e61 7373 6572 7420 6576  name1\nassert ev
+00006310: 656e 7473 5b30 5d2e 7374 7265 616d 5f70  ents[0].stream_p
+00006320: 6f73 6974 696f 6e20 3d3d 2030 5c6e 6173  osition == 0\nas
+00006330: 7365 7274 2065 7665 6e74 735b 305d 2e74  sert events[0].t
+00006340: 7970 6520 3d3d 2065 7665 6e74 312e 7479  ype == event1.ty
+00006350: 7065 5c6e 6173 7365 7274 2065 7665 6e74  pe\nassert event
+00006360: 735b 305d 2e64 6174 6120 3d3d 2065 7665  s[0].data == eve
+00006370: 6e74 312e 6461 7461 5c6e 5c6e 6173 7365  nt1.data\n\nasse
+00006380: 7274 2065 7665 6e74 735b 315d 2e73 7472  rt events[1].str
+00006390: 6561 6d5f 6e61 6d65 203d 3d20 7374 7265  eam_name == stre
+000063a0: 616d 5f6e 616d 6531 5c6e 6173 7365 7274  am_name1\nassert
+000063b0: 2065 7665 6e74 735b 315d 2e73 7472 6561   events[1].strea
+000063c0: 6d5f 706f 7369 7469 6f6e 203d 3d20 315c  m_position == 1\
+000063d0: 6e61 7373 6572 7420 6576 656e 7473 5b31  nassert events[1
+000063e0: 5d2e 7479 7065 203d 3d20 6576 656e 7432  ].type == event2
+000063f0: 2e74 7970 655c 6e61 7373 6572 7420 6576  .type\nassert ev
+00006400: 656e 7473 5b31 5d2e 6461 7461 203d 3d20  ents[1].data == 
+00006410: 6576 656e 7432 2e64 6174 615c 6e5c 6e61  event2.data\n\na
+00006420: 7373 6572 7420 6576 656e 7473 5b32 5d2e  ssert events[2].
+00006430: 7374 7265 616d 5f6e 616d 6520 3d3d 2073  stream_name == s
+00006440: 7472 6561 6d5f 6e61 6d65 315c 6e61 7373  tream_name1\nass
+00006450: 6572 7420 6576 656e 7473 5b32 5d2e 7374  ert events[2].st
+00006460: 7265 616d 5f70 6f73 6974 696f 6e20 3d3d  ream_position ==
+00006470: 2032 5c6e 6173 7365 7274 2065 7665 6e74   2\nassert event
+00006480: 735b 325d 2e74 7970 6520 3d3d 2065 7665  s[2].type == eve
+00006490: 6e74 332e 7479 7065 5c6e 6173 7365 7274  nt3.type\nassert
+000064a0: 2065 7665 6e74 735b 325d 2e64 6174 6120   events[2].data 
+000064b0: 3d3d 2065 7665 6e74 332e 6461 7461 5c6e  == event3.data\n
+000064c0: 6060 605c 6e5c 6e54 6865 2065 7861 6d70  ```\n\nThe examp
+000064d0: 6c65 2062 656c 6f77 2073 686f 7773 2068  le below shows h
+000064e0: 6f77 2074 6f20 7265 6164 2072 6563 6f72  ow to read recor
+000064f0: 6465 6420 6576 656e 7473 2069 6e20 6120  ded events in a 
+00006500: 7374 7265 616d 2066 6f72 7761 7264 7320  stream forwards 
+00006510: 6672 6f6d 5c6e 6120 7370 6563 6966 6963  from\na specific
+00006520: 2073 7472 6561 6d20 706f 7369 7469 6f6e   stream position
+00006530: 2074 6f20 7468 6520 656e 6420 6f66 2074   to the end of t
+00006540: 6865 2073 7472 6561 6d2e 5c6e 5c6e 6060  he stream.\n\n``
+00006550: 6070 7974 686f 6e5c 6e65 7665 6e74 7320  `python\nevents 
+00006560: 3d20 636c 6965 6e74 2e72 6561 645f 7374  = client.read_st
+00006570: 7265 616d 5f65 7665 6e74 7328 5c6e 2020  ream_events(\n  
+00006580: 2020 7374 7265 616d 5f6e 616d 653d 7374    stream_name=st
+00006590: 7265 616d 5f6e 616d 6531 2c5c 6e20 2020  ream_name1,\n   
+000065a0: 2073 7472 6561 6d5f 706f 7369 7469 6f6e   stream_position
+000065b0: 3d31 2c5c 6e29 5c6e 5c6e 6173 7365 7274  =1,\n)\n\nassert
+000065c0: 206c 656e 2865 7665 6e74 7329 203d 3d20   len(events) == 
+000065d0: 325c 6e5c 6e61 7373 6572 7420 6576 656e  2\n\nassert even
+000065e0: 7473 5b30 5d2e 7374 7265 616d 5f6e 616d  ts[0].stream_nam
+000065f0: 6520 3d3d 2073 7472 6561 6d5f 6e61 6d65  e == stream_name
+00006600: 315c 6e61 7373 6572 7420 6576 656e 7473  1\nassert events
+00006610: 5b30 5d2e 7374 7265 616d 5f70 6f73 6974  [0].stream_posit
+00006620: 696f 6e20 3d3d 2031 5c6e 6173 7365 7274  ion == 1\nassert
+00006630: 2065 7665 6e74 735b 305d 2e74 7970 6520   events[0].type 
+00006640: 3d3d 2065 7665 6e74 322e 7479 7065 5c6e  == event2.type\n
+00006650: 6173 7365 7274 2065 7665 6e74 735b 305d  assert events[0]
+00006660: 2e64 6174 6120 3d3d 2065 7665 6e74 322e  .data == event2.
+00006670: 6461 7461 5c6e 5c6e 6173 7365 7274 2065  data\n\nassert e
+00006680: 7665 6e74 735b 315d 2e73 7472 6561 6d5f  vents[1].stream_
+00006690: 6e61 6d65 203d 3d20 7374 7265 616d 5f6e  name == stream_n
+000066a0: 616d 6531 5c6e 6173 7365 7274 2065 7665  ame1\nassert eve
+000066b0: 6e74 735b 315d 2e73 7472 6561 6d5f 706f  nts[1].stream_po
+000066c0: 7369 7469 6f6e 203d 3d20 325c 6e61 7373  sition == 2\nass
+000066d0: 6572 7420 6576 656e 7473 5b31 5d2e 7479  ert events[1].ty
+000066e0: 7065 203d 3d20 6576 656e 7433 2e74 7970  pe == event3.typ
+000066f0: 655c 6e61 7373 6572 7420 6576 656e 7473  e\nassert events
+00006700: 5b31 5d2e 6461 7461 203d 3d20 6576 656e  [1].data == even
+00006710: 7433 2e64 6174 615c 6e60 6060 5c6e 5c6e  t3.data\n```\n\n
+00006720: 5468 6520 6578 616d 706c 6520 6265 6c6f  The example belo
+00006730: 7720 7368 6f77 7320 686f 7720 746f 2072  w shows how to r
+00006740: 6561 6420 7468 6520 7265 636f 7264 6564  ead the recorded
+00006750: 2065 7665 6e74 7320 696e 2061 2073 7472   events in a str
+00006760: 6561 6d20 6261 636b 7761 7264 7320 6672  eam backwards fr
+00006770: 6f6d 5c6e 7468 6520 656e 6420 6f66 2074  om\nthe end of t
+00006780: 6865 2073 7472 6561 6d20 746f 2074 6865  he stream to the
+00006790: 2073 7461 7274 206f 6620 7468 6520 7374   start of the st
+000067a0: 7265 616d 2e5c 6e5c 6e60 6060 7079 7468  ream.\n\n```pyth
+000067b0: 6f6e 5c6e 6576 656e 7473 203d 2063 6c69  on\nevents = cli
+000067c0: 656e 742e 7265 6164 5f73 7472 6561 6d5f  ent.read_stream_
+000067d0: 6576 656e 7473 285c 6e20 2020 2073 7472  events(\n    str
+000067e0: 6561 6d5f 6e61 6d65 3d73 7472 6561 6d5f  eam_name=stream_
+000067f0: 6e61 6d65 312c 5c6e 2020 2020 6261 636b  name1,\n    back
+00006800: 7761 7264 733d 5472 7565 2c5c 6e29 5c6e  wards=True,\n)\n
+00006810: 5c6e 6173 7365 7274 206c 656e 2865 7665  \nassert len(eve
+00006820: 6e74 7329 203d 3d20 335c 6e5c 6e61 7373  nts) == 3\n\nass
+00006830: 6572 7420 6576 656e 7473 5b30 5d2e 7374  ert events[0].st
+00006840: 7265 616d 5f6e 616d 6520 3d3d 2073 7472  ream_name == str
+00006850: 6561 6d5f 6e61 6d65 315c 6e61 7373 6572  eam_name1\nasser
+00006860: 7420 6576 656e 7473 5b30 5d2e 7374 7265  t events[0].stre
+00006870: 616d 5f70 6f73 6974 696f 6e20 3d3d 2032  am_position == 2
+00006880: 5c6e 6173 7365 7274 2065 7665 6e74 735b  \nassert events[
+00006890: 305d 2e74 7970 6520 3d3d 2065 7665 6e74  0].type == event
+000068a0: 332e 7479 7065 5c6e 6173 7365 7274 2065  3.type\nassert e
+000068b0: 7665 6e74 735b 305d 2e64 6174 6120 3d3d  vents[0].data ==
+000068c0: 2065 7665 6e74 332e 6461 7461 5c6e 5c6e   event3.data\n\n
+000068d0: 6173 7365 7274 2065 7665 6e74 735b 315d  assert events[1]
+000068e0: 2e73 7472 6561 6d5f 6e61 6d65 203d 3d20  .stream_name == 
+000068f0: 7374 7265 616d 5f6e 616d 6531 5c6e 6173  stream_name1\nas
+00006900: 7365 7274 2065 7665 6e74 735b 315d 2e73  sert events[1].s
+00006910: 7472 6561 6d5f 706f 7369 7469 6f6e 203d  tream_position =
+00006920: 3d20 315c 6e61 7373 6572 7420 6576 656e  = 1\nassert even
+00006930: 7473 5b31 5d2e 7479 7065 203d 3d20 6576  ts[1].type == ev
+00006940: 656e 7432 2e74 7970 655c 6e61 7373 6572  ent2.type\nasser
+00006950: 7420 6576 656e 7473 5b31 5d2e 6461 7461  t events[1].data
+00006960: 203d 3d20 6576 656e 7432 2e64 6174 615c   == event2.data\
+00006970: 6e60 6060 5c6e 5c6e 5468 6520 6578 616d  n```\n\nThe exam
+00006980: 706c 6520 6265 6c6f 7720 7368 6f77 7320  ple below shows 
+00006990: 686f 7720 746f 2072 6561 6420 6120 6c69  how to read a li
+000069a0: 6d69 7465 6420 6e75 6d62 6572 2028 7477  mited number (tw
+000069b0: 6f29 206f 6620 7468 6520 7265 636f 7264  o) of the record
+000069c0: 6564 2065 7665 6e74 735c 6e69 6e20 6120  ed events\nin a 
+000069d0: 7374 7265 616d 2066 6f72 7761 7264 7320  stream forwards 
+000069e0: 6672 6f6d 2074 6865 2073 7461 7274 206f  from the start o
+000069f0: 6620 7468 6520 7374 7265 616d 2e5c 6e5c  f the stream.\n\
+00006a00: 6e60 6060 7079 7468 6f6e 5c6e 6576 656e  n```python\neven
+00006a10: 7473 203d 2063 6c69 656e 742e 7265 6164  ts = client.read
+00006a20: 5f73 7472 6561 6d5f 6576 656e 7473 285c  _stream_events(\
+00006a30: 6e20 2020 2073 7472 6561 6d5f 6e61 6d65  n    stream_name
+00006a40: 3d73 7472 6561 6d5f 6e61 6d65 312c 5c6e  =stream_name1,\n
+00006a50: 2020 2020 6c69 6d69 743d 322c 5c6e 295c      limit=2,\n)\
+00006a60: 6e5c 6e61 7373 6572 7420 6c65 6e28 6576  n\nassert len(ev
+00006a70: 656e 7473 2920 3d3d 2032 5c6e 5c6e 6173  ents) == 2\n\nas
+00006a80: 7365 7274 2065 7665 6e74 735b 305d 2e73  sert events[0].s
+00006a90: 7472 6561 6d5f 6e61 6d65 203d 3d20 7374  tream_name == st
+00006aa0: 7265 616d 5f6e 616d 6531 5c6e 6173 7365  ream_name1\nasse
+00006ab0: 7274 2065 7665 6e74 735b 305d 2e73 7472  rt events[0].str
+00006ac0: 6561 6d5f 706f 7369 7469 6f6e 203d 3d20  eam_position == 
+00006ad0: 305c 6e61 7373 6572 7420 6576 656e 7473  0\nassert events
+00006ae0: 5b30 5d2e 7479 7065 203d 3d20 6576 656e  [0].type == even
+00006af0: 7431 2e74 7970 655c 6e61 7373 6572 7420  t1.type\nassert 
+00006b00: 6576 656e 7473 5b30 5d2e 6461 7461 203d  events[0].data =
+00006b10: 3d20 6576 656e 7431 2e64 6174 615c 6e5c  = event1.data\n\
+00006b20: 6e61 7373 6572 7420 6576 656e 7473 5b31  nassert events[1
+00006b30: 5d2e 7374 7265 616d 5f6e 616d 6520 3d3d  ].stream_name ==
+00006b40: 2073 7472 6561 6d5f 6e61 6d65 315c 6e61   stream_name1\na
+00006b50: 7373 6572 7420 6576 656e 7473 5b31 5d2e  ssert events[1].
+00006b60: 7374 7265 616d 5f70 6f73 6974 696f 6e20  stream_position 
+00006b70: 3d3d 2031 5c6e 6173 7365 7274 2065 7665  == 1\nassert eve
+00006b80: 6e74 735b 315d 2e74 7970 6520 3d3d 2065  nts[1].type == e
+00006b90: 7665 6e74 322e 7479 7065 5c6e 6173 7365  vent2.type\nasse
+00006ba0: 7274 2065 7665 6e74 735b 315d 2e64 6174  rt events[1].dat
+00006bb0: 6120 3d3d 2065 7665 6e74 322e 6461 7461  a == event2.data
+00006bc0: 5c6e 6060 605c 6e5c 6e54 6865 2065 7861  \n```\n\nThe exa
+00006bd0: 6d70 6c65 2062 656c 6f77 2073 686f 7773  mple below shows
+00006be0: 2068 6f77 2074 6f20 7265 6164 2061 206c   how to read a l
+00006bf0: 696d 6974 6564 206e 756d 6265 7220 286f  imited number (o
+00006c00: 6e65 2920 6f66 2074 6865 2072 6563 6f72  ne) of the recor
+00006c10: 6465 645c 6e65 7665 6e74 7320 696e 2061  ded\nevents in a
+00006c20: 2073 7472 6561 6d20 6261 636b 7761 7264   stream backward
+00006c30: 7320 6672 6f6d 2061 2067 6976 656e 2073  s from a given s
+00006c40: 7472 6561 6d20 706f 7369 7469 6f6e 2e5c  tream position.\
+00006c50: 6e5c 6e60 6060 7079 7468 6f6e 5c6e 6576  n\n```python\nev
+00006c60: 656e 7473 203d 2063 6c69 656e 742e 7265  ents = client.re
+00006c70: 6164 5f73 7472 6561 6d5f 6576 656e 7473  ad_stream_events
+00006c80: 285c 6e20 2020 2073 7472 6561 6d5f 6e61  (\n    stream_na
+00006c90: 6d65 3d73 7472 6561 6d5f 6e61 6d65 312c  me=stream_name1,
+00006ca0: 5c6e 2020 2020 7374 7265 616d 5f70 6f73  \n    stream_pos
+00006cb0: 6974 696f 6e3d 322c 5c6e 2020 2020 6261  ition=2,\n    ba
+00006cc0: 636b 7761 7264 733d 5472 7565 2c5c 6e20  ckwards=True,\n 
+00006cd0: 2020 206c 696d 6974 3d31 2c5c 6e29 5c6e     limit=1,\n)\n
+00006ce0: 5c6e 6173 7365 7274 206c 656e 2865 7665  \nassert len(eve
+00006cf0: 6e74 7329 203d 3d20 315c 6e5c 6e61 7373  nts) == 1\n\nass
+00006d00: 6572 7420 6576 656e 7473 5b30 5d2e 7374  ert events[0].st
+00006d10: 7265 616d 5f6e 616d 6520 3d3d 2073 7472  ream_name == str
+00006d20: 6561 6d5f 6e61 6d65 315c 6e61 7373 6572  eam_name1\nasser
+00006d30: 7420 6576 656e 7473 5b30 5d2e 7374 7265  t events[0].stre
+00006d40: 616d 5f70 6f73 6974 696f 6e20 3d3d 2032  am_position == 2
+00006d50: 5c6e 6173 7365 7274 2065 7665 6e74 735b  \nassert events[
+00006d60: 305d 2e74 7970 6520 3d3d 2065 7665 6e74  0].type == event
+00006d70: 332e 7479 7065 5c6e 6173 7365 7274 2065  3.type\nassert e
+00006d80: 7665 6e74 735b 305d 2e64 6174 6120 3d3d  vents[0].data ==
+00006d90: 2065 7665 6e74 332e 6461 7461 5c6e 6060   event3.data\n``
+00006da0: 605c 6e5c 6e23 2323 2052 6561 6420 616c  `\n\n### Read al
+00006db0: 6c20 6576 656e 7473 5c6e 5c6e 5468 6520  l events\n\nThe 
+00006dc0: 6d65 7468 6f64 2060 7265 6164 5f61 6c6c  method `read_all
+00006dd0: 5f65 7665 6e74 7328 2960 2063 616e 2062  _events()` can b
+00006de0: 6520 7573 6564 2074 6f20 7265 6164 2061  e used to read a
+00006df0: 6c6c 2072 6563 6f72 6465 6420 6576 656e  ll recorded even
+00006e00: 7473 5c6e 696e 2074 6865 2064 6174 6162  ts\nin the datab
+00006e10: 6173 6520 696e 2074 6865 206f 7264 6572  ase in the order
+00006e20: 2074 6865 7920 7765 7265 2072 6563 6f72   they were recor
+00006e30: 6465 642e 2049 7420 7265 7475 726e 7320  ded. It returns 
+00006e40: 616e 2069 7465 7261 626c 6520 6f66 5c6e  an iterable of\n
+00006e50: 6576 656e 7473 2074 6861 7420 6861 7665  events that have
+00006e60: 2062 6565 6e20 7265 636f 7264 6564 2069   been recorded i
+00006e70: 6e20 7468 6520 6461 7461 6261 7365 2e20  n the database. 
+00006e80: 4974 6572 6174 696e 6720 6f76 6572 2074  Iterating over t
+00006e90: 6869 7320 6974 6572 6162 6c65 5c6e 6f62  his iterable\nob
+00006ea0: 6a65 6374 2077 696c 6c20 7374 6f70 2077  ject will stop w
+00006eb0: 6865 6e20 6974 2068 6173 2079 6965 6c64  hen it has yield
+00006ec0: 6564 2074 6865 206c 6173 7420 7265 636f  ed the last reco
+00006ed0: 7264 6564 2065 7665 6e74 2e20 5468 6520  rded event. The 
+00006ee0: 7265 6365 6976 6564 5c6e 7265 636f 7264  received\nrecord
+00006ef0: 6564 2065 7665 6e74 206f 626a 6563 7420  ed event object 
+00006f00: 6172 6520 696e 7374 616e 6365 7320 6f66  are instances of
+00006f10: 2074 6865 2060 5265 636f 7264 6564 4576   the `RecordedEv
+00006f20: 656e 7460 2063 6c61 7373 2028 7365 6520  ent` class (see 
+00006f30: 6265 6c6f 7729 2e5c 6e5c 6e54 6869 7320  below).\n\nThis 
+00006f40: 6d65 7468 6f64 2073 7570 706f 7274 7320  method supports 
+00006f50: 7365 7665 6e20 6f70 7469 6f6e 616c 2061  seven optional a
+00006f60: 7267 756d 656e 7473 2c20 6063 6f6d 6d69  rguments, `commi
+00006f70: 745f 706f 7369 7469 6f6e 602c 2060 6261  t_position`, `ba
+00006f80: 636b 7761 7264 7360 2c5c 6e60 6669 6c74  ckwards`,\n`filt
+00006f90: 6572 5f65 7863 6c75 6465 602c 2060 6669  er_exclude`, `fi
+00006fa0: 6c74 6572 5f69 6e63 6c75 6465 602c 2060  lter_include`, `
+00006fb0: 6669 6c74 6572 5f62 795f 7374 7265 616d  filter_by_stream
+00006fc0: 5f6e 616d 6560 2c20 606c 696d 6974 602c  _name`, `limit`,
+00006fd0: 2061 6e64 2060 7469 6d65 6f75 7460 2e5c   and `timeout`.\
+00006fe0: 6e5c 6e54 6865 206f 7074 696f 6e61 6c20  n\nThe optional 
+00006ff0: 6063 6f6d 6d69 745f 706f 7369 7469 6f6e  `commit_position
+00007000: 6020 6172 6775 6d65 6e74 2069 7320 616e  ` argument is an
+00007010: 206f 7074 696f 6e61 6c20 696e 7465 6765   optional intege
+00007020: 7220 7468 6174 2063 616e 2062 6520 7573  r that can be us
+00007030: 6564 2074 6f5c 6e73 7065 6369 6679 2074  ed to\nspecify t
+00007040: 6865 2063 6f6d 6d69 7420 706f 7369 7469  he commit positi
+00007050: 6f6e 2066 726f 6d20 7768 6963 6820 746f  on from which to
+00007060: 2073 7461 7274 2072 6561 6469 6e67 2e20   start reading. 
+00007070: 5468 6973 2061 7267 756d 656e 7420 6973  This argument is
+00007080: 2060 4e6f 6e65 6020 6279 5c6e 6465 6661   `None` by\ndefa
+00007090: 756c 742c 206d 6561 6e69 6e67 2074 6861  ult, meaning tha
+000070a0: 7420 616c 6c20 7468 6520 6576 656e 7473  t all the events
+000070b0: 2077 696c 6c20 6265 2072 6561 6420 6569   will be read ei
+000070c0: 7468 6572 2066 726f 6d20 7468 6520 7374  ther from the st
+000070d0: 6172 742c 206f 725c 6e66 726f 6d20 7468  art, or\nfrom th
+000070e0: 6520 656e 6420 6966 2060 6261 636b 7761  e end if `backwa
+000070f0: 7264 7360 2069 7320 6054 7275 6560 2028  rds` is `True` (
+00007100: 7365 6520 6265 6c6f 7729 2e20 506c 6561  see below). Plea
+00007110: 7365 206e 6f74 652c 2069 6620 7370 6563  se note, if spec
+00007120: 6966 6965 642c 5c6e 7468 6520 7370 6563  ified,\nthe spec
+00007130: 6966 6965 6420 706f 7369 7469 6f6e 206d  ified position m
+00007140: 7573 7420 6265 2061 6e20 6163 7475 616c  ust be an actual
+00007150: 6c79 2065 7869 7374 696e 6720 636f 6d6d  ly existing comm
+00007160: 6974 2070 6f73 6974 696f 6e2c 2062 6563  it position, bec
+00007170: 6175 7365 5c6e 616e 7920 6f74 6865 7220  ause\nany other 
+00007180: 6e75 6d62 6572 2077 696c 6c20 7265 7375  number will resu
+00007190: 6c74 2069 6e20 6120 7365 7276 6572 2065  lt in a server e
+000071a0: 7272 6f72 2028 6174 206c 6561 7374 2069  rror (at least i
+000071b0: 6e20 4576 656e 7453 746f 7265 4442 2076  n EventStoreDB v
+000071c0: 3231 2e31 3029 2e5c 6e5c 6e54 6865 206f  21.10).\n\nThe o
+000071d0: 7074 696f 6e61 6c20 6062 6163 6b77 6172  ptional `backwar
+000071e0: 6473 6020 6172 6775 6d65 6e74 2069 7320  ds` argument is 
+000071f0: 6120 626f 6f6c 6561 6e20 7768 6963 6820  a boolean which 
+00007200: 6973 2062 7920 6465 6661 756c 7420 6046  is by default `F
+00007210: 616c 7365 6020 6d65 616e 696e 6720 7468  alse` meaning th
+00007220: 655c 6e65 7665 6e74 7320 7769 6c6c 2062  e\nevents will b
+00007230: 6520 7265 6164 2066 6f72 7761 7264 7320  e read forwards 
+00007240: 6279 2064 6566 6175 6c74 2c20 736f 2074  by default, so t
+00007250: 6861 7420 6576 656e 7473 2061 7265 2072  hat events are r
+00007260: 6574 7572 6e65 6420 696e 2074 6865 5c6e  eturned in the\n
+00007270: 6f72 6465 7220 7468 6579 2077 6572 6520  order they were 
+00007280: 636f 6d6d 6974 7465 642c 2049 6620 6062  committed, If `b
+00007290: 6163 6b77 6172 6473 6020 6973 2060 5472  ackwards` is `Tr
+000072a0: 7565 602c 2074 6865 2065 7665 6e74 7320  ue`, the events 
+000072b0: 7769 6c6c 2062 6520 7265 6164 5c6e 6261  will be read\nba
+000072c0: 636b 7761 7264 732c 2073 6f20 7468 6174  ckwards, so that
+000072d0: 2065 7665 6e74 7320 6172 6520 7265 7475   events are retu
+000072e0: 726e 6564 2069 6e20 7265 7665 7273 6520  rned in reverse 
+000072f0: 6f72 6465 722e 5c6e 5c6e 5468 6520 6f70  order.\n\nThe op
+00007300: 7469 6f6e 616c 2060 6669 6c74 6572 5f65  tional `filter_e
+00007310: 7863 6c75 6465 6020 6172 6775 6d65 6e74  xclude` argument
+00007320: 2069 7320 6120 7365 7175 656e 6365 206f   is a sequence o
+00007330: 6620 7265 6775 6c61 7220 6578 7072 6573  f regular expres
+00007340: 7369 6f6e 7320 7468 6174 5c6e 6d61 7463  sions that\nmatc
+00007350: 6820 7265 636f 7264 6564 2065 7665 6e74  h recorded event
+00007360: 7320 7468 6174 2073 686f 756c 6420 6e6f  s that should no
+00007370: 7420 6265 2069 6e63 6c75 6465 642e 2054  t be included. T
+00007380: 6869 7320 6172 6775 6d65 6e74 2069 7320  his argument is 
+00007390: 6967 6e6f 7265 645c 6e69 6620 6066 696c  ignored\nif `fil
+000073a0: 7465 725f 696e 636c 7564 6560 2069 7320  ter_include` is 
+000073b0: 7365 7420 746f 2061 206e 6f6e 2d65 6d70  set to a non-emp
+000073c0: 7479 2073 6571 7565 6e63 652e 2042 7920  ty sequence. By 
+000073d0: 6465 6661 756c 742c 2074 6869 7320 6172  default, this ar
+000073e0: 6775 6d65 6e74 2069 7320 7365 745c 6e74  gument is set\nt
+000073f0: 6f20 6d61 7463 6820 7468 6520 6576 656e  o match the even
+00007400: 7420 7479 7065 7320 6f66 2022 7379 7374  t types of "syst
+00007410: 656d 2065 7665 6e74 7322 2c20 736f 2074  em events", so t
+00007420: 6861 7420 4576 656e 7453 746f 7265 4442  hat EventStoreDB
+00007430: 2073 7973 7465 6d20 6576 656e 7473 5c6e   system events\n
+00007440: 7769 6c6c 206e 6f74 206e 6f72 6d61 6c6c  will not normall
+00007450: 7920 6265 2069 6e63 6c75 6465 642e 2053  y be included. S
+00007460: 6565 2074 6865 204e 6f74 6573 2073 6563  ee the Notes sec
+00007470: 7469 6f6e 2062 656c 6f77 2066 6f72 206d  tion below for m
+00007480: 6f72 6520 696e 666f 726d 6174 696f 6e5c  ore information\
+00007490: 6e61 626f 7574 2066 696c 7465 7220 6578  nabout filter ex
+000074a0: 7072 6573 7369 6f6e 732e 5c6e 5c6e 5468  pressions.\n\nTh
+000074b0: 6520 6172 6775 6d65 6e74 2060 6669 6c74  e argument `filt
+000074c0: 6572 5f69 6e63 6c75 6465 6020 6f70 7469  er_include` opti
+000074d0: 6f6e 616c 2069 7320 6120 7365 7175 656e  onal is a sequen
+000074e0: 6365 206f 6620 7265 6775 6c61 7220 6578  ce of regular ex
+000074f0: 7072 6573 7369 6f6e 735c 6e74 6861 7420  pressions\nthat 
+00007500: 6d61 7463 6820 7265 636f 7264 6564 2065  match recorded e
+00007510: 7665 6e74 7320 7468 6174 2073 686f 756c  vents that shoul
+00007520: 6420 6265 2069 6e63 6c75 6465 642e 2042  d be included. B
+00007530: 7920 6465 6661 756c 742c 2074 6869 7320  y default, this 
+00007540: 6172 6775 6d65 6e74 5c6e 6973 2061 6e20  argument\nis an 
+00007550: 656d 7074 7920 7475 706c 652e 2049 6620  empty tuple. If 
+00007560: 7468 6973 2061 7267 756d 656e 7420 6973  this argument is
+00007570: 2073 6574 2074 6f20 6120 6e6f 6e2d 656d   set to a non-em
+00007580: 7074 7920 7365 7175 656e 6365 2c20 7468  pty sequence, th
+00007590: 655c 6e60 6669 6c74 6572 5f65 7863 6c75  e\n`filter_exclu
+000075a0: 6465 6020 6172 6775 6d65 6e74 2069 7320  de` argument is 
+000075b0: 6967 6e6f 7265 642e 5c6e 5c6e 5468 6520  ignored.\n\nThe 
+000075c0: 6172 6775 6d65 6e74 2060 6669 6c74 6572  argument `filter
+000075d0: 5f62 795f 7374 7265 616d 5f6e 616d 6560  _by_stream_name`
+000075e0: 206f 7074 696f 6e61 6c20 6973 2061 2062   optional is a b
+000075f0: 6f6f 6c65 616e 2076 616c 7565 2074 6861  oolean value tha
+00007600: 7420 696e 6469 6361 7465 7320 7768 6574  t indicates whet
+00007610: 6865 725c 6e74 6865 2066 696c 7465 7220  her\nthe filter 
+00007620: 7769 6c6c 2061 7070 6c79 2074 6f20 6576  will apply to ev
+00007630: 656e 7420 7479 7065 7320 6f72 2073 7472  ent types or str
+00007640: 6561 6d20 6e61 6d65 732e 2042 7920 6465  eam names. By de
+00007650: 6661 756c 742c 2074 6869 7320 7661 6c75  fault, this valu
+00007660: 6520 6973 2060 4661 6c73 6560 5c6e 616e  e is `False`\nan
+00007670: 6420 736f 2074 6865 2066 696c 7465 7269  d so the filteri
+00007680: 6e67 2077 696c 6c20 6170 706c 7920 746f  ng will apply to
+00007690: 2074 6865 2065 7665 6e74 2074 7970 6520   the event type 
+000076a0: 7374 7269 6e67 7320 6f66 2072 6563 6f72  strings of recor
+000076b0: 6465 6420 6576 656e 7473 2e5c 6e5c 6e54  ded events.\n\nT
+000076c0: 6865 2061 7267 756d 656e 7420 606c 696d  he argument `lim
+000076d0: 6974 6020 6f70 7469 6f6e 616c 2069 7320  it` optional is 
+000076e0: 616e 2069 6e74 6567 6572 2077 6869 6368  an integer which
+000076f0: 206c 696d 6974 7320 7468 6520 6e75 6d62   limits the numb
+00007700: 6572 206f 6620 6576 656e 7473 2074 6861  er of events tha
+00007710: 7420 7769 6c6c 5c6e 6265 2072 6574 7572  t will\nbe retur
+00007720: 6e65 642e 2054 6865 2064 6566 6175 6c74  ned. The default
+00007730: 2076 616c 7565 2069 7320 6073 7973 2e6d   value is `sys.m
+00007740: 6178 696e 7460 2e5c 6e5c 6e54 6865 206f  axint`.\n\nThe o
+00007750: 7074 696f 6e61 6c20 6074 696d 656f 7574  ptional `timeout
+00007760: 6020 6172 6775 6d65 6e74 2069 7320 6120  ` argument is a 
+00007770: 5079 7468 6f6e 2060 666c 6f61 7460 2077  Python `float` w
+00007780: 6869 6368 2073 6574 7320 615c 6e64 6561  hich sets a\ndea
+00007790: 646c 696e 6520 666f 7220 7468 6520 636f  dline for the co
+000077a0: 6d70 6c65 7469 6f6e 206f 6620 7468 6520  mpletion of the 
+000077b0: 6752 5043 206f 7065 7261 7469 6f6e 2e5c  gRPC operation.\
+000077c0: 6e5c 6e54 6865 2066 696c 7465 7269 6e67  n\nThe filtering
+000077d0: 206f 6620 6576 656e 7473 2069 7320 646f   of events is do
+000077e0: 6e65 206f 6e20 7468 6520 4576 656e 7453  ne on the EventS
+000077f0: 746f 7265 4442 2073 6572 7665 722e 2054  toreDB server. T
+00007800: 6865 5c6e 606c 696d 6974 6020 6172 6775  he\n`limit` argu
+00007810: 6d65 6e74 2069 7320 6170 706c 6965 6420  ment is applied 
+00007820: 6f6e 2074 6865 2073 6572 7665 7220 6166  on the server af
+00007830: 7465 7220 6669 6c74 6572 696e 672e 2053  ter filtering. S
+00007840: 6565 2062 656c 6f77 2066 6f72 5c6e 6d6f  ee below for\nmo
+00007850: 7265 2069 6e66 6f72 6d61 7469 6f6e 2061  re information a
+00007860: 626f 7574 2066 696c 7465 7220 7265 6775  bout filter regu
+00007870: 6c61 7220 6578 7072 6573 7369 6f6e 732e  lar expressions.
+00007880: 5c6e 5c6e 5768 656e 2072 6561 6469 6e67  \n\nWhen reading
+00007890: 2066 6f72 7761 7264 7320 6672 6f6d 2061   forwards from a
+000078a0: 2073 7065 6369 6669 6320 636f 6d6d 6974   specific commit
+000078b0: 2070 6f73 6974 696f 6e2c 2074 6865 2065   position, the e
+000078c0: 7665 6e74 2061 7420 7468 6520 7370 6563  vent at the spec
+000078d0: 6966 6965 645c 6e70 6f73 6974 696f 6e20  ified\nposition 
+000078e0: 5749 4c4c 2062 6520 696e 636c 7564 6564  WILL be included
+000078f0: 2e20 486f 7765 7665 722c 2077 6865 6e20  . However, when 
+00007900: 7265 6164 696e 6720 6261 636b 7761 7264  reading backward
+00007910: 732c 2074 6865 2065 7665 6e74 2061 7420  s, the event at 
+00007920: 7468 655c 6e73 7065 6369 6669 6564 2070  the\nspecified p
+00007930: 6f73 6974 696f 6e20 7769 6c6c 204e 4f54  osition will NOT
+00007940: 2062 6520 696e 636c 7564 6564 2e20 2854   be included. (T
+00007950: 6869 7320 6e6f 6e2d 696e 636c 7573 6976  his non-inclusiv
+00007960: 6520 6265 6861 7669 6f75 722c 206f 6620  e behaviour, of 
+00007970: 6578 636c 7564 696e 675c 6e74 6865 2073  excluding\nthe s
+00007980: 7065 6369 6669 6564 2063 6f6d 6d69 7420  pecified commit 
+00007990: 706f 7369 7469 6f6e 2077 6865 6e20 7265  position when re
+000079a0: 6164 696e 6720 616c 6c20 7374 7265 616d  ading all stream
+000079b0: 7320 6261 636b 7761 7264 732c 2064 6966  s backwards, dif
+000079c0: 6665 7273 2066 726f 6d20 7468 655c 6e62  fers from the\nb
+000079d0: 6568 6176 696f 7572 2077 6865 6e20 7265  ehaviour when re
+000079e0: 6164 696e 6720 6120 7374 7265 616d 2062  ading a stream b
+000079f0: 6163 6b77 6172 6473 2066 726f 6d20 6120  ackwards from a 
+00007a00: 7370 6563 6966 6963 2073 7472 6561 6d20  specific stream 
+00007a10: 706f 7369 7469 6f6e 2e29 5c6e 5c6e 5468  position.)\n\nTh
+00007a20: 6520 6578 616d 706c 6520 6265 6c6f 7720  e example below 
+00007a30: 7368 6f77 7320 686f 7720 746f 2072 6561  shows how to rea
+00007a40: 6420 616c 6c20 6576 656e 7473 2069 6e20  d all events in 
+00007a50: 7468 6520 6461 7461 6261 7365 2069 6e20  the database in 
+00007a60: 7468 655c 6e6f 7264 6572 2074 6865 7920  the\norder they 
+00007a70: 7765 7265 2072 6563 6f72 6465 642e 5c6e  were recorded.\n
+00007a80: 5c6e 6060 6070 7974 686f 6e5c 6e65 7665  \n```python\neve
+00007a90: 6e74 7320 3d20 6c69 7374 2863 6c69 656e  nts = list(clien
+00007aa0: 742e 7265 6164 5f61 6c6c 5f65 7665 6e74  t.read_all_event
+00007ab0: 7328 2929 5c6e 5c6e 6173 7365 7274 206c  s())\n\nassert l
+00007ac0: 656e 2865 7665 6e74 7329 203e 3d20 335c  en(events) >= 3\
+00007ad0: 6e60 6060 5c6e 5c6e 5468 6520 6578 616d  n```\n\nThe exam
+00007ae0: 706c 6520 6265 6c6f 7720 7368 6f77 7320  ple below shows 
+00007af0: 686f 7720 746f 2072 6561 6420 616c 6c20  how to read all 
+00007b00: 7265 636f 7264 6564 2065 7665 6e74 7320  recorded events 
+00007b10: 6672 6f6d 2061 2073 7065 6369 6669 6320  from a specific 
+00007b20: 636f 6d6d 6974 2070 6f73 6974 696f 6e2e  commit position.
+00007b30: 5c6e 5c6e 6060 6070 7974 686f 6e5c 6e65  \n\n```python\ne
+00007b40: 7665 6e74 7320 3d20 6c69 7374 285c 6e20  vents = list(\n 
+00007b50: 2020 2063 6c69 656e 742e 7265 6164 5f61     client.read_a
+00007b60: 6c6c 5f65 7665 6e74 7328 5c6e 2020 2020  ll_events(\n    
+00007b70: 2020 2020 636f 6d6d 6974 5f70 6f73 6974      commit_posit
+00007b80: 696f 6e3d 636f 6d6d 6974 5f70 6f73 6974  ion=commit_posit
+00007b90: 696f 6e31 5c6e 2020 2020 295c 6e29 5c6e  ion1\n    )\n)\n
+00007ba0: 5c6e 6173 7365 7274 206c 656e 2865 7665  \nassert len(eve
+00007bb0: 6e74 7329 203d 3d20 335c 6e5c 6e61 7373  nts) == 3\n\nass
+00007bc0: 6572 7420 6576 656e 7473 5b30 5d2e 7374  ert events[0].st
+00007bd0: 7265 616d 5f6e 616d 6520 3d3d 2073 7472  ream_name == str
+00007be0: 6561 6d5f 6e61 6d65 315c 6e61 7373 6572  eam_name1\nasser
+00007bf0: 7420 6576 656e 7473 5b30 5d2e 7374 7265  t events[0].stre
+00007c00: 616d 5f70 6f73 6974 696f 6e20 3d3d 2030  am_position == 0
+00007c10: 5c6e 6173 7365 7274 2065 7665 6e74 735b  \nassert events[
+00007c20: 305d 2e74 7970 6520 3d3d 2065 7665 6e74  0].type == event
+00007c30: 312e 7479 7065 5c6e 6173 7365 7274 2065  1.type\nassert e
+00007c40: 7665 6e74 735b 305d 2e64 6174 6120 3d3d  vents[0].data ==
+00007c50: 2065 7665 6e74 312e 6461 7461 5c6e 5c6e   event1.data\n\n
+00007c60: 6173 7365 7274 2065 7665 6e74 735b 315d  assert events[1]
+00007c70: 2e73 7472 6561 6d5f 6e61 6d65 203d 3d20  .stream_name == 
+00007c80: 7374 7265 616d 5f6e 616d 6531 5c6e 6173  stream_name1\nas
+00007c90: 7365 7274 2065 7665 6e74 735b 315d 2e73  sert events[1].s
+00007ca0: 7472 6561 6d5f 706f 7369 7469 6f6e 203d  tream_position =
+00007cb0: 3d20 315c 6e61 7373 6572 7420 6576 656e  = 1\nassert even
+00007cc0: 7473 5b31 5d2e 7479 7065 203d 3d20 6576  ts[1].type == ev
+00007cd0: 656e 7432 2e74 7970 655c 6e61 7373 6572  ent2.type\nasser
+00007ce0: 7420 6576 656e 7473 5b31 5d2e 6461 7461  t events[1].data
+00007cf0: 203d 3d20 6576 656e 7432 2e64 6174 615c   == event2.data\
+00007d00: 6e5c 6e61 7373 6572 7420 6576 656e 7473  n\nassert events
+00007d10: 5b32 5d2e 7374 7265 616d 5f6e 616d 6520  [2].stream_name 
+00007d20: 3d3d 2073 7472 6561 6d5f 6e61 6d65 315c  == stream_name1\
+00007d30: 6e61 7373 6572 7420 6576 656e 7473 5b32  nassert events[2
+00007d40: 5d2e 7374 7265 616d 5f70 6f73 6974 696f  ].stream_positio
+00007d50: 6e20 3d3d 2032 5c6e 6173 7365 7274 2065  n == 2\nassert e
+00007d60: 7665 6e74 735b 325d 2e74 7970 6520 3d3d  vents[2].type ==
+00007d70: 2065 7665 6e74 332e 7479 7065 5c6e 6173   event3.type\nas
+00007d80: 7365 7274 2065 7665 6e74 735b 325d 2e64  sert events[2].d
+00007d90: 6174 6120 3d3d 2065 7665 6e74 332e 6461  ata == event3.da
+00007da0: 7461 5c6e 6060 605c 6e5c 6e54 6865 2065  ta\n```\n\nThe e
+00007db0: 7861 6d70 6c65 2062 656c 6f77 2073 686f  xample below sho
+00007dc0: 7773 2068 6f77 2074 6f20 7265 6164 2061  ws how to read a
+00007dd0: 6c6c 2072 6563 6f72 6465 6420 6576 656e  ll recorded even
+00007de0: 7473 2069 6e20 7265 7665 7273 6520 6f72  ts in reverse or
+00007df0: 6465 722e 5c6e 5c6e 6060 6070 7974 686f  der.\n\n```pytho
+00007e00: 6e5c 6e65 7665 6e74 7320 3d20 6c69 7374  n\nevents = list
+00007e10: 285c 6e20 2020 2063 6c69 656e 742e 7265  (\n    client.re
+00007e20: 6164 5f61 6c6c 5f65 7665 6e74 7328 5c6e  ad_all_events(\n
+00007e30: 2020 2020 2020 2020 6261 636b 7761 7264          backward
+00007e40: 733d 5472 7565 5c6e 2020 2020 295c 6e29  s=True\n    )\n)
+00007e50: 5c6e 5c6e 6173 7365 7274 206c 656e 2865  \n\nassert len(e
+00007e60: 7665 6e74 7329 203e 3d20 335c 6e5c 6e61  vents) >= 3\n\na
+00007e70: 7373 6572 7420 6576 656e 7473 5b30 5d2e  ssert events[0].
+00007e80: 7374 7265 616d 5f6e 616d 6520 3d3d 2073  stream_name == s
+00007e90: 7472 6561 6d5f 6e61 6d65 315c 6e61 7373  tream_name1\nass
+00007ea0: 6572 7420 6576 656e 7473 5b30 5d2e 7374  ert events[0].st
+00007eb0: 7265 616d 5f70 6f73 6974 696f 6e20 3d3d  ream_position ==
+00007ec0: 2032 5c6e 6173 7365 7274 2065 7665 6e74   2\nassert event
+00007ed0: 735b 305d 2e74 7970 6520 3d3d 2065 7665  s[0].type == eve
+00007ee0: 6e74 332e 7479 7065 5c6e 6173 7365 7274  nt3.type\nassert
+00007ef0: 2065 7665 6e74 735b 305d 2e64 6174 6120   events[0].data 
+00007f00: 3d3d 2065 7665 6e74 332e 6461 7461 5c6e  == event3.data\n
+00007f10: 5c6e 6173 7365 7274 2065 7665 6e74 735b  \nassert events[
+00007f20: 315d 2e73 7472 6561 6d5f 6e61 6d65 203d  1].stream_name =
+00007f30: 3d20 7374 7265 616d 5f6e 616d 6531 5c6e  = stream_name1\n
+00007f40: 6173 7365 7274 2065 7665 6e74 735b 315d  assert events[1]
+00007f50: 2e73 7472 6561 6d5f 706f 7369 7469 6f6e  .stream_position
+00007f60: 203d 3d20 315c 6e61 7373 6572 7420 6576   == 1\nassert ev
+00007f70: 656e 7473 5b31 5d2e 7479 7065 203d 3d20  ents[1].type == 
+00007f80: 6576 656e 7432 2e74 7970 655c 6e61 7373  event2.type\nass
+00007f90: 6572 7420 6576 656e 7473 5b31 5d2e 6461  ert events[1].da
+00007fa0: 7461 203d 3d20 6576 656e 7432 2e64 6174  ta == event2.dat
+00007fb0: 615c 6e5c 6e61 7373 6572 7420 6576 656e  a\n\nassert even
+00007fc0: 7473 5b32 5d2e 7374 7265 616d 5f6e 616d  ts[2].stream_nam
+00007fd0: 6520 3d3d 2073 7472 6561 6d5f 6e61 6d65  e == stream_name
+00007fe0: 315c 6e61 7373 6572 7420 6576 656e 7473  1\nassert events
+00007ff0: 5b32 5d2e 7374 7265 616d 5f70 6f73 6974  [2].stream_posit
+00008000: 696f 6e20 3d3d 2030 5c6e 6173 7365 7274  ion == 0\nassert
+00008010: 2065 7665 6e74 735b 325d 2e74 7970 6520   events[2].type 
+00008020: 3d3d 2065 7665 6e74 312e 7479 7065 5c6e  == event1.type\n
+00008030: 6173 7365 7274 2065 7665 6e74 735b 325d  assert events[2]
+00008040: 2e64 6174 6120 3d3d 2065 7665 6e74 312e  .data == event1.
+00008050: 6461 7461 5c6e 6060 605c 6e5c 6e54 6865  data\n```\n\nThe
+00008060: 2065 7861 6d70 6c65 2062 656c 6f77 2073   example below s
+00008070: 686f 7773 2068 6f77 2074 6f20 7265 6164  hows how to read
+00008080: 2061 206c 696d 6974 6564 206e 756d 6265   a limited numbe
+00008090: 7220 286f 6e65 2920 6f66 2074 6865 2072  r (one) of the r
+000080a0: 6563 6f72 6465 6420 6576 656e 7473 5c6e  ecorded events\n
+000080b0: 696e 2074 6865 2064 6174 6162 6173 6520  in the database 
+000080c0: 666f 7277 6172 6473 2066 726f 6d20 6120  forwards from a 
+000080d0: 7370 6563 6966 6963 2063 6f6d 6d69 7420  specific commit 
+000080e0: 706f 7369 7469 6f6e 2e20 506c 6561 7365  position. Please
+000080f0: 206e 6f74 652c 2077 6865 6e20 7265 6164   note, when read
+00008100: 696e 675c 6e61 6c6c 2065 7665 6e74 7320  ing\nall events 
+00008110: 666f 7277 6172 6473 2066 726f 6d20 6120  forwards from a 
+00008120: 7370 6563 6966 6963 2063 6f6d 6d69 7420  specific commit 
+00008130: 706f 7369 7469 6f6e 2c20 7468 6520 6576  position, the ev
+00008140: 656e 7420 6174 2074 6865 2073 7065 6369  ent at the speci
+00008150: 6669 6564 5c6e 706f 7369 7469 6f6e 2057  fied\nposition W
+00008160: 494c 4c20 6265 2069 6e63 6c75 6465 642e  ILL be included.
+00008170: 5c6e 5c6e 5c6e 6060 6070 7974 686f 6e5c  \n\n\n```python\
+00008180: 6e65 7665 6e74 7320 3d20 6c69 7374 285c  nevents = list(\
+00008190: 6e20 2020 2063 6c69 656e 742e 7265 6164  n    client.read
+000081a0: 5f61 6c6c 5f65 7665 6e74 7328 5c6e 2020  _all_events(\n  
+000081b0: 2020 2020 2020 636f 6d6d 6974 5f70 6f73        commit_pos
+000081c0: 6974 696f 6e3d 636f 6d6d 6974 5f70 6f73  ition=commit_pos
+000081d0: 6974 696f 6e31 2c5c 6e20 2020 2020 2020  ition1,\n       
+000081e0: 206c 696d 6974 3d31 2c5c 6e20 2020 2029   limit=1,\n    )
+000081f0: 5c6e 295c 6e5c 6e61 7373 6572 7420 6c65  \n)\n\nassert le
+00008200: 6e28 6576 656e 7473 2920 3d3d 2031 5c6e  n(events) == 1\n
+00008210: 5c6e 6173 7365 7274 2065 7665 6e74 735b  \nassert events[
+00008220: 305d 2e73 7472 6561 6d5f 6e61 6d65 203d  0].stream_name =
+00008230: 3d20 7374 7265 616d 5f6e 616d 6531 5c6e  = stream_name1\n
+00008240: 6173 7365 7274 2065 7665 6e74 735b 305d  assert events[0]
+00008250: 2e73 7472 6561 6d5f 706f 7369 7469 6f6e  .stream_position
+00008260: 203d 3d20 305c 6e61 7373 6572 7420 6576   == 0\nassert ev
+00008270: 656e 7473 5b30 5d2e 7479 7065 203d 3d20  ents[0].type == 
+00008280: 6576 656e 7431 2e74 7970 655c 6e61 7373  event1.type\nass
+00008290: 6572 7420 6576 656e 7473 5b30 5d2e 6461  ert events[0].da
+000082a0: 7461 203d 3d20 6576 656e 7431 2e64 6174  ta == event1.dat
+000082b0: 615c 6e5c 6e61 7373 6572 7420 6576 656e  a\n\nassert even
+000082c0: 7473 5b30 5d2e 636f 6d6d 6974 5f70 6f73  ts[0].commit_pos
+000082d0: 6974 696f 6e20 3d3d 2063 6f6d 6d69 745f  ition == commit_
+000082e0: 706f 7369 7469 6f6e 315c 6e60 6060 5c6e  position1\n```\n
+000082f0: 5c6e 5468 6520 6578 616d 706c 6520 6265  \nThe example be
+00008300: 6c6f 7720 7368 6f77 7320 686f 7720 746f  low shows how to
+00008310: 2072 6561 6420 6120 6c69 6d69 7465 6420   read a limited 
+00008320: 6e75 6d62 6572 2028 6f6e 6529 206f 6620  number (one) of 
+00008330: 7468 6520 7265 636f 7264 6564 2065 7665  the recorded eve
+00008340: 6e74 735c 6e69 6e20 7468 6520 6461 7461  nts\nin the data
+00008350: 6261 7365 2062 6163 6b77 6172 6473 2066  base backwards f
+00008360: 726f 6d20 7468 6520 656e 642e 2054 6869  rom the end. Thi
+00008370: 7320 6769 7665 7320 7468 6520 6c61 7374  s gives the last
+00008380: 2072 6563 6f72 6465 6420 6576 656e 742e   recorded event.
+00008390: 5c6e 5c6e 6060 6070 7974 686f 6e5c 6e65  \n\n```python\ne
+000083a0: 7665 6e74 7320 3d20 6c69 7374 285c 6e20  vents = list(\n 
+000083b0: 2020 2063 6c69 656e 742e 7265 6164 5f61     client.read_a
+000083c0: 6c6c 5f65 7665 6e74 7328 5c6e 2020 2020  ll_events(\n    
+000083d0: 2020 2020 6261 636b 7761 7264 733d 5472      backwards=Tr
+000083e0: 7565 2c5c 6e20 2020 2020 2020 206c 696d  ue,\n        lim
+000083f0: 6974 3d31 2c5c 6e20 2020 2029 5c6e 295c  it=1,\n    )\n)\
+00008400: 6e5c 6e61 7373 6572 7420 6c65 6e28 6576  n\nassert len(ev
+00008410: 656e 7473 2920 3d3d 2031 5c6e 5c6e 6173  ents) == 1\n\nas
+00008420: 7365 7274 2065 7665 6e74 735b 305d 2e73  sert events[0].s
+00008430: 7472 6561 6d5f 6e61 6d65 203d 3d20 7374  tream_name == st
+00008440: 7265 616d 5f6e 616d 6531 5c6e 6173 7365  ream_name1\nasse
+00008450: 7274 2065 7665 6e74 735b 305d 2e73 7472  rt events[0].str
+00008460: 6561 6d5f 706f 7369 7469 6f6e 203d 3d20  eam_position == 
+00008470: 325c 6e61 7373 6572 7420 6576 656e 7473  2\nassert events
+00008480: 5b30 5d2e 7479 7065 203d 3d20 6576 656e  [0].type == even
+00008490: 7433 2e74 7970 655c 6e61 7373 6572 7420  t3.type\nassert 
+000084a0: 6576 656e 7473 5b30 5d2e 6461 7461 203d  events[0].data =
+000084b0: 3d20 6576 656e 7433 2e64 6174 615c 6e60  = event3.data\n`
+000084c0: 6060 5c6e 5c6e 5468 6520 6578 616d 706c  ``\n\nThe exampl
+000084d0: 6520 6265 6c6f 7720 7368 6f77 7320 686f  e below shows ho
+000084e0: 7720 746f 2072 6561 6420 6120 6c69 6d69  w to read a limi
+000084f0: 7465 6420 6e75 6d62 6572 2028 6f6e 6529  ted number (one)
+00008500: 206f 6620 7468 6520 7265 636f 7264 6564   of the recorded
+00008510: 2065 7665 6e74 735c 6e69 6e20 7468 6520   events\nin the 
+00008520: 6461 7461 6261 7365 2062 6163 6b77 6172  database backwar
+00008530: 6473 2066 726f 6d20 6120 7370 6563 6966  ds from a specif
+00008540: 6963 2063 6f6d 6d69 7420 706f 7369 7469  ic commit positi
+00008550: 6f6e 2e20 506c 6561 7365 206e 6f74 652c  on. Please note,
+00008560: 2077 6865 6e20 7265 6164 696e 675c 6e61   when reading\na
+00008570: 6c6c 2065 7665 6e74 7320 6261 636b 7761  ll events backwa
+00008580: 7264 7320 6672 6f6d 2061 2073 7065 6369  rds from a speci
+00008590: 6669 6320 636f 6d6d 6974 2070 6f73 6974  fic commit posit
+000085a0: 696f 6e2c 2074 6865 2065 7665 6e74 2061  ion, the event a
+000085b0: 7420 7468 6520 7370 6563 6966 6965 645c  t the specified\
+000085c0: 6e70 6f73 6974 696f 6e20 5749 4c4c 204e  nposition WILL N
+000085d0: 4f54 2062 6520 696e 636c 7564 6564 2e5c  OT be included.\
+000085e0: 6e5c 6e60 6060 7079 7468 6f6e 5c6e 6576  n\n```python\nev
+000085f0: 656e 7473 203d 206c 6973 7428 5c6e 2020  ents = list(\n  
+00008600: 2020 636c 6965 6e74 2e72 6561 645f 616c    client.read_al
+00008610: 6c5f 6576 656e 7473 285c 6e20 2020 2020  l_events(\n     
+00008620: 2020 2063 6f6d 6d69 745f 706f 7369 7469     commit_positi
+00008630: 6f6e 3d63 6f6d 6d69 745f 706f 7369 7469  on=commit_positi
+00008640: 6f6e 322c 5c6e 2020 2020 2020 2020 6261  on2,\n        ba
+00008650: 636b 7761 7264 733d 5472 7565 2c5c 6e20  ckwards=True,\n 
+00008660: 2020 2020 2020 206c 696d 6974 3d31 2c5c         limit=1,\
+00008670: 6e20 2020 2029 5c6e 295c 6e5c 6e61 7373  n    )\n)\n\nass
+00008680: 6572 7420 6c65 6e28 6576 656e 7473 2920  ert len(events) 
+00008690: 3d3d 2031 5c6e 5c6e 6173 7365 7274 2065  == 1\n\nassert e
+000086a0: 7665 6e74 735b 305d 2e63 6f6d 6d69 745f  vents[0].commit_
+000086b0: 706f 7369 7469 6f6e 203c 2063 6f6d 6d69  position < commi
+000086c0: 745f 706f 7369 7469 6f6e 325c 6e60 6060  t_position2\n```
+000086d0: 5c6e 5c6e 5c6e 2323 2320 4765 7420 6375  \n\n\n### Get cu
+000086e0: 7272 656e 7420 7374 7265 616d 2070 6f73  rrent stream pos
+000086f0: 6974 696f 6e5c 6e5c 6e54 6865 2060 6765  ition\n\nThe `ge
+00008700: 745f 7374 7265 616d 5f70 6f73 6974 696f  t_stream_positio
+00008710: 6e28 2960 206d 6574 686f 6420 6361 6e20  n()` method can 
+00008720: 6265 2075 7365 6420 746f 5c6e 6765 7420  be used to\nget 
+00008730: 7468 6520 2273 7472 6561 6d20 706f 7369  the "stream posi
+00008740: 7469 6f6e 2220 6f66 2074 6865 206c 6173  tion" of the las
+00008750: 7420 7265 636f 7264 6564 2065 7665 6e74  t recorded event
+00008760: 2069 6e20 6120 7374 7265 616d 2e5c 6e5c   in a stream.\n\
+00008770: 6e54 6869 7320 6d65 7468 6f64 2068 6173  nThis method has
+00008780: 2061 2060 7374 7265 616d 5f6e 616d 6560   a `stream_name`
+00008790: 2061 7267 756d 656e 742c 2077 6869 6368   argument, which
+000087a0: 2069 7320 7265 7175 6972 6564 2e5c 6e5c   is required.\n\
+000087b0: 6e54 6869 7320 6d65 7468 6f64 2061 6c73  nThis method als
+000087c0: 6f20 7461 6b65 7320 616e 206f 7074 696f  o takes an optio
+000087d0: 6e61 6c20 6074 696d 656f 7574 6020 6172  nal `timeout` ar
+000087e0: 6775 6d65 6e74 2c20 7468 6174 5c6e 6973  gument, that\nis
+000087f0: 2065 7870 6563 7465 6420 746f 2062 6520   expected to be 
+00008800: 6120 5079 7468 6f6e 2060 666c 6f61 7460  a Python `float`
+00008810: 2c20 7768 6963 6820 7365 7473 2061 2064  , which sets a d
+00008820: 6561 646c 696e 655c 6e66 6f72 2074 6865  eadline\nfor the
+00008830: 2063 6f6d 706c 6574 696f 6e20 6f66 2074   completion of t
+00008840: 6865 2067 5250 4320 6f70 6572 6174 696f  he gRPC operatio
+00008850: 6e2e 5c6e 5c6e 5468 6520 7365 7175 656e  n.\n\nThe sequen
+00008860: 6365 206f 6620 706f 7369 7469 6f6e 7320  ce of positions 
+00008870: 696e 2061 2073 7472 6561 6d20 6973 2067  in a stream is g
+00008880: 6170 6c65 7373 2e20 4974 2069 7320 7a65  apless. It is ze
+00008890: 726f 2d62 6173 6564 2c5c 6e73 6f20 7468  ro-based,\nso th
+000088a0: 6174 2061 2073 7472 6561 6d20 7769 7468  at a stream with
+000088b0: 206f 6e65 2072 6563 6f72 6465 6420 6576   one recorded ev
+000088c0: 656e 7420 6861 7320 6120 6375 7272 656e  ent has a curren
+000088d0: 7420 7374 7265 616d 5c6e 706f 7369 7469  t stream\npositi
+000088e0: 6f6e 206f 6620 6030 602e 2054 6865 2063  on of `0`. The c
+000088f0: 7572 7265 6e74 2073 7472 6561 6d20 706f  urrent stream po
+00008900: 7369 7469 6f6e 2069 7320 6031 6020 7768  sition is `1` wh
+00008910: 656e 2061 2073 7472 6561 6d20 6861 735c  en a stream has\
+00008920: 6e74 776f 2065 7665 6e74 732c 2061 6e64  ntwo events, and
+00008930: 2069 7420 6973 2060 3260 2077 6865 6e20   it is `2` when 
+00008940: 7468 6572 6520 6172 6520 6576 656e 7473  there are events
+00008950: 2c20 616e 6420 736f 206f 6e2e 5c6e 5c6e  , and so on.\n\n
+00008960: 496e 2074 6865 2065 7861 6d70 6c65 2062  In the example b
+00008970: 656c 6f77 2c20 7468 6520 6375 7272 656e  elow, the curren
+00008980: 7420 7374 7265 616d 2070 6f73 6974 696f  t stream positio
+00008990: 6e20 6973 206f 6274 6169 6e65 6420 6f66  n is obtained of
+000089a0: 2074 6865 5c6e 7374 7265 616d 2074 6f20   the\nstream to 
+000089b0: 7768 6963 6820 6576 656e 7473 2077 6572  which events wer
+000089c0: 6520 6170 7065 6e64 6564 2069 6e20 7468  e appended in th
+000089d0: 6520 6578 616d 706c 6573 2061 626f 7665  e examples above
+000089e0: 2e5c 6e42 6563 6175 7365 2074 6865 2073  .\nBecause the s
+000089f0: 6571 7565 6e63 6520 6f66 2073 7472 6561  equence of strea
+00008a00: 6d20 706f 7369 7469 6f6e 7320 6973 207a  m positions is z
+00008a10: 6572 6f2d 6261 7365 642c 2061 6e64 2062  ero-based, and b
+00008a20: 6563 6175 7365 5c6e 7468 7265 6520 6576  ecause\nthree ev
+00008a30: 656e 7473 2077 6572 6520 6170 7065 6e64  ents were append
+00008a40: 6564 2c20 736f 2074 6865 2063 7572 7265  ed, so the curre
+00008a50: 6e74 2073 7472 6561 6d20 706f 7369 7469  nt stream positi
+00008a60: 6f6e 2069 7320 6032 602e 5c6e 5c6e 6060  on is `2`.\n\n``
+00008a70: 6070 7974 686f 6e5c 6e73 7472 6561 6d5f  `python\nstream_
+00008a80: 706f 7369 7469 6f6e 203d 2063 6c69 656e  position = clien
+00008a90: 742e 6765 745f 7374 7265 616d 5f70 6f73  t.get_stream_pos
+00008aa0: 6974 696f 6e28 5c6e 2020 2020 7374 7265  ition(\n    stre
+00008ab0: 616d 5f6e 616d 653d 7374 7265 616d 5f6e  am_name=stream_n
+00008ac0: 616d 6531 5c6e 295c 6e5c 6e61 7373 6572  ame1\n)\n\nasser
+00008ad0: 7420 7374 7265 616d 5f70 6f73 6974 696f  t stream_positio
+00008ae0: 6e20 3d3d 2032 5c6e 6060 605c 6e5c 6e49  n == 2\n```\n\nI
+00008af0: 6620 6120 7374 7265 616d 2064 6f65 7320  f a stream does 
+00008b00: 6e6f 7420 6578 6973 742c 2074 6865 2072  not exist, the r
+00008b10: 6574 7572 6e65 6420 7374 7265 616d 2070  eturned stream p
+00008b20: 6f73 6974 696f 6e20 7661 6c75 6520 6973  osition value is
+00008b30: 2060 4e6f 6e65 602c 5c6e 7768 6963 6820   `None`,\nwhich 
+00008b40: 6d61 7463 6865 7320 7468 6520 7265 7175  matches the requ
+00008b50: 6972 6564 2065 7870 6563 7465 6420 706f  ired expected po
+00008b60: 7369 7469 6f6e 2077 6865 6e20 6170 7065  sition when appe
+00008b70: 6e64 696e 6720 7468 6520 6669 7273 7420  nding the first 
+00008b80: 6576 656e 745c 6e6f 6620 6120 6e65 7720  event\nof a new 
+00008b90: 7374 7265 616d 2028 7365 6520 6162 6f76  stream (see abov
+00008ba0: 6529 2e5c 6e5c 6e60 6060 7079 7468 6f6e  e).\n\n```python
+00008bb0: 5c6e 7374 7265 616d 5f70 6f73 6974 696f  \nstream_positio
+00008bc0: 6e20 3d20 636c 6965 6e74 2e67 6574 5f73  n = client.get_s
+00008bd0: 7472 6561 6d5f 706f 7369 7469 6f6e 285c  tream_position(\
+00008be0: 6e20 2020 2073 7472 6561 6d5f 6e61 6d65  n    stream_name
+00008bf0: 3d73 7472 2875 7569 6434 2829 295c 6e29  =str(uuid4())\n)
+00008c00: 5c6e 5c6e 6173 7365 7274 2073 7472 6561  \n\nassert strea
+00008c10: 6d5f 706f 7369 7469 6f6e 203d 3d20 4e6f  m_position == No
+00008c20: 6e65 5c6e 6060 605c 6e5c 6e54 6869 7320  ne\n```\n\nThis 
+00008c30: 6d65 7468 6f64 2074 616b 6573 2061 6e20  method takes an 
+00008c40: 6f70 7469 6f6e 616c 2061 7267 756d 656e  optional argumen
+00008c50: 7420 6074 696d 656f 7574 6020 7768 6963  t `timeout` whic
+00008c60: 6820 6973 2061 2050 7974 686f 6e20 6066  h is a Python `f
+00008c70: 6c6f 6174 6020 7468 6174 2073 6574 735c  loat` that sets\
+00008c80: 6e61 2064 6561 646c 696e 6520 666f 7220  na deadline for 
+00008c90: 7468 6520 636f 6d70 6c65 7469 6f6e 206f  the completion o
+00008ca0: 6620 7468 6520 6752 5043 206f 7065 7261  f the gRPC opera
+00008cb0: 7469 6f6e 2e5c 6e5c 6e5c 6e23 2323 2047  tion.\n\n\n### G
+00008cc0: 6574 2063 7572 7265 6e74 2063 6f6d 6d69  et current commi
+00008cd0: 7420 706f 7369 7469 6f6e 5c6e 5c6e 5468  t position\n\nTh
+00008ce0: 6520 6d65 7468 6f64 2060 6765 745f 636f  e method `get_co
+00008cf0: 6d6d 6974 5f70 6f73 6974 696f 6e28 2960  mmit_position()`
+00008d00: 2063 616e 2062 6520 7573 6564 2074 6f20   can be used to 
+00008d10: 6765 7420 7468 6520 6375 7272 656e 745c  get the current\
+00008d20: 6e63 6f6d 6d69 7420 706f 7369 7469 6f6e  ncommit position
+00008d30: 206f 6620 7468 6520 6461 7461 6261 7365   of the database
+00008d40: 2e5c 6e5c 6e60 6060 7079 7468 6f6e 5c6e  .\n\n```python\n
+00008d50: 636f 6d6d 6974 5f70 6f73 6974 696f 6e20  commit_position 
+00008d60: 3d20 636c 6965 6e74 2e67 6574 5f63 6f6d  = client.get_com
+00008d70: 6d69 745f 706f 7369 7469 6f6e 2829 5c6e  mit_position()\n
+00008d80: 6060 605c 6e5c 6e54 6869 7320 6d65 7468  ```\n\nThis meth
+00008d90: 6f64 2074 616b 6573 2061 6e20 6f70 7469  od takes an opti
+00008da0: 6f6e 616c 2061 7267 756d 656e 7420 6074  onal argument `t
+00008db0: 696d 656f 7574 6020 7768 6963 6820 6973  imeout` which is
+00008dc0: 2061 2050 7974 686f 6e20 6066 6c6f 6174   a Python `float
+00008dd0: 6020 7468 6174 2073 6574 735c 6e61 2064  ` that sets\na d
+00008de0: 6561 646c 696e 6520 666f 7220 7468 6520  eadline for the 
+00008df0: 636f 6d70 6c65 7469 6f6e 206f 6620 7468  completion of th
+00008e00: 6520 6752 5043 206f 7065 7261 7469 6f6e  e gRPC operation
+00008e10: 2e5c 6e5c 6e54 6869 7320 6d65 7468 6f64  .\n\nThis method
+00008e20: 2063 616e 2062 6520 7573 6566 756c 2074   can be useful t
+00008e30: 6f20 6d65 6173 7572 6520 7072 6f67 7265  o measure progre
+00008e40: 7373 206f 6620 6120 646f 776e 7374 7265  ss of a downstre
+00008e50: 616d 2063 6f6d 706f 6e65 6e74 5c6e 7468  am component\nth
+00008e60: 6174 2069 7320 7072 6f63 6573 7369 6e67  at is processing
+00008e70: 2061 6c6c 2072 6563 6f72 6465 6420 6576   all recorded ev
+00008e80: 656e 7473 2c20 6279 2063 6f6d 7061 7269  ents, by compari
+00008e90: 6e67 2074 6865 2063 7572 7265 6e74 2063  ng the current c
+00008ea0: 6f6d 6d69 745c 6e70 6f73 6974 696f 6e20  ommit\nposition 
+00008eb0: 7769 7468 2074 6865 2072 6563 6f72 6465  with the recorde
+00008ec0: 6420 636f 6d6d 6974 2070 6f73 6974 696f  d commit positio
+00008ed0: 6e20 6f66 2074 6865 206c 6173 7420 7375  n of the last su
+00008ee0: 6363 6573 7366 756c 6c79 2070 726f 6365  ccessfully proce
+00008ef0: 7373 6564 5c6e 6576 656e 7420 696e 2061  ssed\nevent in a
+00008f00: 2064 6f77 6e73 7472 6561 6d20 636f 6d70   downstream comp
+00008f10: 6f6e 656e 742e 5c6e 5c6e 5468 6520 7661  onent.\n\nThe va
+00008f20: 6c75 6520 6f66 2074 6865 2060 636f 6d6d  lue of the `comm
+00008f30: 6974 5f70 6f73 6974 696f 6e60 2061 7267  it_position` arg
+00008f40: 756d 656e 7420 7768 656e 2072 6561 6469  ument when readi
+00008f50: 6e67 2065 7665 6e74 7320 6569 7468 6572  ng events either
+00008f60: 2062 7920 7573 696e 675c 6e74 6865 2060   by using\nthe `
+00008f70: 7265 6164 5f61 6c6c 5f65 7665 6e74 7328  read_all_events(
+00008f80: 2960 206d 6574 686f 6420 6f72 2062 7920  )` method or by 
+00008f90: 7573 696e 6720 6120 6361 7463 682d 7570  using a catch-up
+00008fa0: 2073 7562 7363 7269 7074 696f 6e20 776f   subscription wo
+00008fb0: 756c 6420 7573 7561 6c6c 795c 6e62 6520  uld usually\nbe 
+00008fc0: 6465 7465 726d 696e 6564 2062 7920 7468  determined by th
+00008fd0: 6520 7265 636f 7264 6564 2063 6f6d 6d69  e recorded commi
+00008fe0: 7420 706f 7369 7469 6f6e 206f 6620 7468  t position of th
+00008ff0: 6520 6c61 7374 2073 7563 6365 7373 6675  e last successfu
+00009000: 6c6c 7920 7072 6f63 6573 7365 645c 6e65  lly processed\ne
+00009010: 7665 6e74 2069 6e20 6120 646f 776e 7374  vent in a downst
+00009020: 7265 616d 2063 6f6d 706f 6e65 6e74 2e5c  ream component.\
+00009030: 6e5c 6e5c 6e23 2323 2047 6574 2073 7472  n\n\n### Get str
+00009040: 6561 6d20 6d65 7461 6461 7461 5c6e 5c6e  eam metadata\n\n
+00009050: 5468 6520 6d65 7468 6f64 2060 6765 745f  The method `get_
+00009060: 7374 7265 616d 5f6d 6574 6164 6174 6128  stream_metadata(
+00009070: 2960 2067 6574 7320 7468 6520 6d65 7461  )` gets the meta
+00009080: 6461 7461 2066 6f72 2061 2073 7472 6561  data for a strea
+00009090: 6d2c 2061 6c6f 6e67 5c6e 7769 7468 2074  m, along\nwith t
+000090a0: 6865 2076 6572 7369 6f6e 206f 6620 7468  he version of th
+000090b0: 6520 7374 7265 616d 206d 6574 6164 6174  e stream metadat
+000090c0: 612e 5c6e 5c6e 6060 6070 7974 686f 6e5c  a.\n\n```python\
+000090d0: 6e6d 6574 6164 6174 612c 206d 6574 6164  nmetadata, metad
+000090e0: 6174 615f 7665 7273 696f 6e20 3d20 636c  ata_version = cl
+000090f0: 6965 6e74 2e67 6574 5f73 7472 6561 6d5f  ient.get_stream_
+00009100: 6d65 7461 6461 7461 2873 7472 6561 6d5f  metadata(stream_
+00009110: 6e61 6d65 3d73 7472 6561 6d5f 6e61 6d65  name=stream_name
+00009120: 3129 5c6e 6060 605c 6e5c 6e54 6865 2072  1)\n```\n\nThe r
+00009130: 6574 7572 6e65 6420 606d 6574 6164 6174  eturned `metadat
+00009140: 6160 2076 616c 7565 2069 7320 6120 5079  a` value is a Py
+00009150: 7468 6f6e 2060 6469 6374 602e 2054 6865  thon `dict`. The
+00009160: 2072 6574 7572 6e65 6420 606d 6574 6164   returned `metad
+00009170: 6174 615f 7665 7273 696f 6e60 5c6e 7661  ata_version`\nva
+00009180: 6c75 6520 6973 2065 6974 6865 7220 616e  lue is either an
+00009190: 2060 696e 7460 2c20 6f72 2060 4e6f 6e65   `int`, or `None
+000091a0: 6020 6966 2074 6865 2073 7472 6561 6d20  ` if the stream 
+000091b0: 646f 6573 206e 6f74 2065 7869 7374 2e20  does not exist. 
+000091c0: 5468 6573 6520 7661 6c75 6573 2063 616e  These values can
+000091d0: 5c6e 6265 2070 6173 7365 6420 696e 746f  \nbe passed into
+000091e0: 2060 7365 745f 7374 7265 616d 5f6d 6574   `set_stream_met
+000091f0: 6164 6174 6128 2960 2e5c 6e5c 6e5c 6e23  adata()`.\n\n\n#
+00009200: 2323 2053 6574 2073 7472 6561 6d20 6d65  ## Set stream me
+00009210: 7461 6461 7461 5c6e 5c6e 2a72 6571 7569  tadata\n\n*requi
+00009220: 7265 7320 6c65 6164 6572 2a5c 6e5c 6e54  res leader*\n\nT
+00009230: 6865 206d 6574 686f 6420 6073 6574 5f73  he method `set_s
+00009240: 7472 6561 6d5f 6d65 7461 6461 7461 2829  tream_metadata()
+00009250: 6020 7365 7473 2074 6865 206d 6574 6164  ` sets the metad
+00009260: 6174 6120 666f 7220 6120 7374 7265 616d  ata for a stream
+00009270: 2c20 616c 6f6e 675c 6e77 6974 6820 7468  , along\nwith th
+00009280: 6520 7665 7273 696f 6e20 6f66 2074 6865  e version of the
+00009290: 2073 7472 6561 6d20 6d65 7461 6461 7461   stream metadata
+000092a0: 2e5c 6e5c 6e60 6060 7079 7468 6f6e 5c6e  .\n\n```python\n
+000092b0: 6d65 7461 6461 7461 5b22 666f 6f22 5d20  metadata["foo"] 
+000092c0: 3d20 2262 6172 225c 6e5c 6e63 6c69 656e  = "bar"\n\nclien
+000092d0: 742e 7365 745f 7374 7265 616d 5f6d 6574  t.set_stream_met
+000092e0: 6164 6174 6128 5c6e 2020 2020 7374 7265  adata(\n    stre
+000092f0: 616d 5f6e 616d 653d 7374 7265 616d 5f6e  am_name=stream_n
+00009300: 616d 6531 2c5c 6e20 2020 206d 6574 6164  ame1,\n    metad
+00009310: 6174 613d 6d65 7461 6461 7461 2c5c 6e20  ata=metadata,\n 
+00009320: 2020 2065 7870 6563 7465 645f 706f 7369     expected_posi
+00009330: 7469 6f6e 3d6d 6574 6164 6174 615f 7665  tion=metadata_ve
+00009340: 7273 696f 6e2c 5c6e 295c 6e60 6060 5c6e  rsion,\n)\n```\n
+00009350: 5c6e 5468 6520 6065 7870 6563 7465 645f  \nThe `expected_
+00009360: 706f 7369 7469 6f6e 6020 6172 6775 6d65  position` argume
+00009370: 6e74 2073 686f 756c 6420 6265 2074 6865  nt should be the
+00009380: 2063 7572 7265 6e74 2076 6572 7369 6f6e   current version
+00009390: 206f 6620 7468 6520 7374 7265 616d 206d   of the stream m
+000093a0: 6574 6164 6174 612e 5c6e 5c6e 506c 6561  etadata.\n\nPlea
+000093b0: 7365 2072 6566 6572 2074 6f20 7468 6520  se refer to the 
+000093c0: 4576 656e 7453 746f 7265 4442 2064 6f63  EventStoreDB doc
+000093d0: 756d 656e 7461 7469 6f6e 2066 6f72 206d  umentation for m
+000093e0: 6f72 6520 696e 666f 726d 6174 696f 6e20  ore information 
+000093f0: 6162 6f75 7420 7374 7265 616d 5c6e 6d65  about stream\nme
+00009400: 7461 6461 7461 2e5c 6e5c 6e23 2323 2044  tadata.\n\n### D
+00009410: 656c 6574 6520 7374 7265 616d 5c6e 5c6e  elete stream\n\n
+00009420: 2a72 6571 7569 7265 7320 6c65 6164 6572  *requires leader
+00009430: 2a5c 6e5c 6e54 6865 206d 6574 686f 6420  *\n\nThe method 
+00009440: 6064 656c 6574 655f 7374 7265 616d 2829  `delete_stream()
+00009450: 6020 6361 6e20 6265 2075 7365 6420 746f  ` can be used to
+00009460: 2022 6465 6c65 7465 2220 6120 7374 7265   "delete" a stre
+00009470: 616d 2e5c 6e5c 6e60 6060 7079 7468 6f6e  am.\n\n```python
+00009480: 5c6e 636f 6d6d 6974 5f70 6f73 6974 696f  \ncommit_positio
+00009490: 6e20 3d20 636c 6965 6e74 2e64 656c 6574  n = client.delet
+000094a0: 655f 7374 7265 616d 2873 7472 6561 6d5f  e_stream(stream_
+000094b0: 6e61 6d65 3d73 7472 6561 6d5f 6e61 6d65  name=stream_name
+000094c0: 312c 2065 7870 6563 7465 645f 706f 7369  1, expected_posi
+000094d0: 7469 6f6e 3d32 295c 6e60 6060 5c6e 5c6e  tion=2)\n```\n\n
+000094e0: 4166 7465 7220 6465 6c65 7469 6e67 2061  After deleting a
+000094f0: 2073 7472 6561 6d2c 2069 745c 2773 2073   stream, it\'s s
+00009500: 7469 6c6c 2070 6f73 7369 626c 6520 746f  till possible to
+00009510: 2061 7070 656e 6420 6e65 7720 6576 656e   append new even
+00009520: 7473 2e20 5265 6164 696e 6720 6672 6f6d  ts. Reading from
+00009530: 2061 5c6e 6465 6c65 7465 6420 7374 7265   a\ndeleted stre
+00009540: 616d 2077 696c 6c20 7265 7475 726e 206f  am will return o
+00009550: 6e6c 7920 6576 656e 7473 2074 6861 7420  nly events that 
+00009560: 6861 7665 2062 6565 6e20 6170 7065 6e64  have been append
+00009570: 6564 2061 6674 6572 2069 7420 7761 735c  ed after it was\
+00009580: 6e64 656c 6574 6564 2e5c 6e5c 6e23 2323  ndeleted.\n\n###
+00009590: 2054 6f6d 6273 746f 6e65 2073 7472 6561   Tombstone strea
+000095a0: 6d5c 6e5c 6e2a 7265 7175 6972 6573 206c  m\n\n*requires l
+000095b0: 6561 6465 722a 5c6e 5c6e 5468 6520 6d65  eader*\n\nThe me
+000095c0: 7468 6f64 2060 746f 6d62 7374 6f6e 655f  thod `tombstone_
+000095d0: 7374 7265 616d 2829 6020 6361 6e20 6265  stream()` can be
+000095e0: 2075 7365 6420 746f 2022 746f 6d62 7374   used to "tombst
+000095f0: 6f6e 6522 2061 2073 7472 6561 6d2e 5c6e  one" a stream.\n
+00009600: 5c6e 6060 6070 7974 686f 6e5c 6e63 6f6d  \n```python\ncom
+00009610: 6d69 745f 706f 7369 7469 6f6e 203d 2063  mit_position = c
+00009620: 6c69 656e 742e 746f 6d62 7374 6f6e 655f  lient.tombstone_
+00009630: 7374 7265 616d 2873 7472 6561 6d5f 6e61  stream(stream_na
+00009640: 6d65 3d73 7472 6561 6d5f 6e61 6d65 312c  me=stream_name1,
+00009650: 2065 7870 6563 7465 645f 706f 7369 7469   expected_positi
+00009660: 6f6e 3d32 295c 6e60 6060 5c6e 5c6e 4166  on=2)\n```\n\nAf
+00009670: 7465 7220 746f 6d62 7374 6f6e 696e 6720  ter tombstoning 
+00009680: 6120 7374 7265 616d 2c20 6974 5c27 7320  a stream, it\'s 
+00009690: 6e6f 7420 706f 7373 6962 6c65 2074 6f20  not possible to 
+000096a0: 6170 7065 6e64 206e 6577 2065 7665 6e74  append new event
+000096b0: 732e 5c6e 5c6e 5c6e 2323 2043 6174 6368  s.\n\n\n## Catch
+000096c0: 2d75 7020 7375 6273 6372 6970 7469 6f6e  -up subscription
+000096d0: 735c 6e5c 6e22 4361 7463 682d 7570 2220  s\n\n"Catch-up" 
+000096e0: 7375 6273 6372 6970 7469 6f6e 7320 6361  subscriptions ca
+000096f0: 6e20 6265 2075 7365 6420 746f 2072 6563  n be used to rec
+00009700: 6569 7665 2065 7665 6e74 7320 7468 6174  eive events that
+00009710: 2068 6176 6520 6265 656e 2072 6563 6f72   have been recor
+00009720: 6465 645c 6e69 6e20 7468 6520 6461 7461  ded\nin the data
+00009730: 6261 7365 2c20 616e 6420 616c 736f 2065  base, and also e
+00009740: 7665 6e74 7320 7468 6174 2061 7265 2072  vents that are r
+00009750: 6563 6f72 6465 6420 6166 7465 7220 6120  ecorded after a 
+00009760: 7375 6273 6372 6970 7469 6f6e 2077 6173  subscription was
+00009770: 2073 7461 7274 6564 2e5c 6e5c 6e54 6865   started.\n\nThe
+00009780: 206d 6574 686f 6420 6073 7562 7363 7269   method `subscri
+00009790: 6265 5f61 6c6c 5f65 7665 6e74 7328 2960  be_all_events()`
+000097a0: 2073 7461 7274 7320 6120 6361 7463 682d   starts a catch-
+000097b0: 7570 2073 7562 7363 7269 7074 696f 6e20  up subscription 
+000097c0: 746f 2072 6563 6569 7665 2061 6c6c 5c6e  to receive all\n
+000097d0: 6576 656e 7473 2074 6861 7420 6861 7665  events that have
+000097e0: 2062 6565 6e20 616e 6420 7769 6c6c 2062   been and will b
+000097f0: 6520 7265 636f 7264 6564 2069 6e20 7468  e recorded in th
+00009800: 6520 6461 7461 6261 7365 2e20 5468 6520  e database. The 
+00009810: 6d65 7468 6f64 5c6e 6073 7562 7363 7269  method\n`subscri
+00009820: 6265 5f73 7472 6561 6d5f 6576 656e 7473  be_stream_events
+00009830: 2829 6020 7374 6172 7473 2061 2063 6174  ()` starts a cat
+00009840: 6368 2d75 7020 7375 6273 6372 6970 7469  ch-up subscripti
+00009850: 6f6e 2074 6f20 7265 6365 6976 6520 6576  on to receive ev
+00009860: 656e 7473 2066 726f 6d5c 6e61 2073 7065  ents from\na spe
+00009870: 6369 6669 6320 7374 7265 616d 2e5c 6e5c  cific stream.\n\
+00009880: 6e43 6174 6368 2d75 7020 7375 6273 6372  nCatch-up subscr
+00009890: 6970 7469 6f6e 7320 656e 6361 7073 756c  iptions encapsul
+000098a0: 6174 6520 6120 7374 7265 616d 696e 6720  ate a streaming 
+000098b0: 6752 5043 2063 616c 6c20 7768 6963 6820  gRPC call which 
+000098c0: 6973 5c6e 6b65 7074 206f 7065 6e20 6279  is\nkept open by
+000098d0: 2074 6865 2073 6572 7665 722c 2077 6974   the server, wit
+000098e0: 6820 6e65 776c 7920 7265 636f 7264 6564  h newly recorded
+000098f0: 2065 7665 6e74 7320 7365 6e74 2074 6f20   events sent to 
+00009900: 7468 6520 636c 6965 6e74 5c6e 6173 2074  the client\nas t
+00009910: 6865 2063 6c69 656e 7420 6974 6572 6174  he client iterat
+00009920: 6573 206f 7665 7220 7468 6520 7375 6273  es over the subs
+00009930: 6372 6970 7469 6f6e 2072 6573 706f 6e73  cription respons
+00009940: 652e 5c6e 5c6e 4d61 6e79 2063 6174 6368  e.\n\nMany catch
+00009950: 2d75 7020 7375 6273 6372 6970 7469 6f6e  -up subscription
+00009960: 7320 6361 6e20 6265 2063 7265 6174 6564  s can be created
+00009970: 2c20 636f 6e63 7572 7265 6e74 6c79 206f  , concurrently o
+00009980: 7220 7375 6363 6573 7369 7665 6c79 2c20  r successively, 
+00009990: 616e 6420 616c 6c5c 6e77 696c 6c20 7265  and all\nwill re
+000099a0: 6365 6976 6520 616c 6c20 7468 6520 7265  ceive all the re
+000099b0: 636f 7264 6564 2065 7665 6e74 7320 7468  corded events th
+000099c0: 6579 2068 6176 6520 6265 656e 2072 6571  ey have been req
+000099d0: 7565 7374 6564 2074 6f20 7265 6365 6976  uested to receiv
+000099e0: 652e 5c6e 5c6e 5468 6520 7265 6365 6976  e.\n\nThe receiv
+000099f0: 6564 2072 6563 6f72 6465 6420 6576 656e  ed recorded even
+00009a00: 7420 6f62 6a65 6374 2061 7265 2069 6e73  t object are ins
+00009a10: 7461 6e63 6573 206f 6620 7468 6520 6052  tances of the `R
+00009a20: 6563 6f72 6465 6445 7665 6e74 6020 636c  ecordedEvent` cl
+00009a30: 6173 735c 6e28 7365 6520 6265 6c6f 7729  ass\n(see below)
+00009a40: 2e5c 6e5c 6e23 2323 2048 6f77 2074 6f20  .\n\n### How to 
+00009a50: 696d 706c 656d 656e 7420 6578 6163 746c  implement exactl
+00009a60: 792d 6f6e 6365 2065 7665 6e74 2070 726f  y-once event pro
+00009a70: 6365 7373 696e 675c 6e5c 6e54 6865 2063  cessing\n\nThe c
+00009a80: 6f6d 6d69 7420 706f 7369 7469 6f6e 7320  ommit positions 
+00009a90: 6f66 2072 6563 6f72 6465 6420 6576 656e  of recorded even
+00009aa0: 7473 2074 6861 7420 6172 6520 7265 6365  ts that are rece
+00009ab0: 6976 6564 2061 6e64 2070 726f 6365 7373  ived and process
+00009ac0: 6564 2062 7920 615c 6e64 6f77 6e73 7472  ed by a\ndownstr
+00009ad0: 6561 6d20 636f 6d70 6f6e 656e 7420 6172  eam component ar
+00009ae0: 6520 7573 6566 756c 6c79 2072 6563 6f72  e usefully recor
+00009af0: 6465 6420 6279 2074 6865 2064 6f77 6e73  ded by the downs
+00009b00: 7472 6561 6d20 636f 6d70 6f6e 656e 7420  tream component 
+00009b10: 736f 2074 6861 745c 6e74 6865 2063 6f6d  so that\nthe com
+00009b20: 6d69 7420 706f 7369 7469 6f6e 206f 6620  mit position of 
+00009b30: 6c61 7374 2070 726f 6365 7373 6564 2065  last processed e
+00009b40: 7665 6e74 2063 616e 2062 6520 6465 7465  vent can be dete
+00009b50: 726d 696e 6564 2e5c 6e5c 6e54 6865 206c  rmined.\n\nThe l
+00009b60: 6173 7420 7265 636f 7264 6564 2063 6f6d  ast recorded com
+00009b70: 6d69 7420 706f 7369 7469 6f6e 2063 616e  mit position can
+00009b80: 2062 6520 7573 6564 2074 6f20 7370 6563   be used to spec
+00009b90: 6966 7920 7468 6520 636f 6d6d 6974 2070  ify the commit p
+00009ba0: 6f73 6974 696f 6e20 6672 6f6d 2077 6869  osition from whi
+00009bb0: 6368 5c6e 746f 2073 7562 7363 7269 6265  ch\nto subscribe
+00009bc0: 2077 6865 6e20 7072 6f63 6573 7369 6e67   when processing
+00009bd0: 2069 7320 7265 7375 6d65 642e 2053 696e   is resumed. Sin
+00009be0: 6365 2074 6869 7320 636f 6d6d 6974 2070  ce this commit p
+00009bf0: 6f73 6974 696f 6e20 7769 6c6c 2072 6570  osition will rep
+00009c00: 7265 7365 6e74 2074 6865 5c6e 706f 7369  resent the\nposi
+00009c10: 7469 6f6e 206f 6620 7468 6520 6c61 7374  tion of the last
+00009c20: 2073 7563 6365 7373 6675 6c6c 7920 7072   successfully pr
+00009c30: 6f63 6573 7365 6420 6576 656e 7420 696e  ocessed event in
+00009c40: 2061 2064 6f77 6e73 7472 6561 6d20 636f   a downstream co
+00009c50: 6d70 6f6e 656e 742c 2073 6f20 6974 5c6e  mponent, so it\n
+00009c60: 7769 6c6c 2062 6520 7573 7561 6c20 746f  will be usual to
+00009c70: 2077 616e 7420 7468 6520 6e65 7874 2065   want the next e
+00009c80: 7665 6e74 2061 6674 6572 2074 6869 7320  vent after this 
+00009c90: 706f 7369 7469 6f6e 2c20 6265 6361 7573  position, becaus
+00009ca0: 6520 7468 6174 2069 7320 7468 6520 6e65  e that is the ne
+00009cb0: 7874 5c6e 6576 656e 7420 7468 6174 2068  xt\nevent that h
+00009cc0: 6173 206e 6f74 2079 6574 2062 6565 6e20  as not yet been 
+00009cd0: 7072 6f63 6573 7365 642e 2046 6f72 2074  processed. For t
+00009ce0: 6869 7320 7265 6173 6f6e 2c20 7768 656e  his reason, when
+00009cf0: 2073 7562 7363 7269 6269 6e67 2066 6f72   subscribing for
+00009d00: 2065 7665 6e74 735c 6e66 726f 6d20 6120   events\nfrom a 
+00009d10: 7370 6563 6966 6963 2063 6f6d 6d69 7420  specific commit 
+00009d20: 706f 7369 7469 6f6e 2075 7369 6e67 2061  position using a
+00009d30: 2063 6174 6368 2d75 7020 7375 6273 6372   catch-up subscr
+00009d40: 6970 7469 6f6e 2069 6e20 4576 656e 7453  iption in EventS
+00009d50: 746f 7265 4442 2c20 7468 655c 6e72 6563  toreDB, the\nrec
+00009d60: 6f72 6465 6420 6576 656e 7420 6174 2074  orded event at t
+00009d70: 6865 2073 7065 6369 6669 6564 2063 6f6d  he specified com
+00009d80: 6d69 7420 706f 7369 7469 6f6e 2077 696c  mit position wil
+00009d90: 6c20 4e4f 5420 6265 2069 6e63 6c75 6465  l NOT be include
+00009da0: 6420 696e 2074 6865 2073 6571 7565 6e63  d in the sequenc
+00009db0: 655c 6e6f 6620 7265 636f 7264 6564 2065  e\nof recorded e
+00009dc0: 7665 6e74 7320 7468 6174 2061 7265 2072  vents that are r
+00009dd0: 6563 6569 7665 642e 5c6e 5c6e 546f 2061  eceived.\n\nTo a
+00009de0: 6363 6f6d 706c 6973 6820 2265 7861 6374  ccomplish "exact
+00009df0: 6c79 2d6f 6e63 6522 2070 726f 6365 7373  ly-once" process
+00009e00: 696e 6720 6f66 2072 6563 6f72 6465 6420  ing of recorded 
+00009e10: 6576 656e 7473 2069 6e20 6120 646f 776e  events in a down
+00009e20: 7374 7265 616d 5c6e 636f 6d70 6f6e 656e  stream\ncomponen
+00009e30: 7420 7768 656e 2075 7369 6e67 2061 2063  t when using a c
+00009e40: 6174 6368 2d75 7020 7375 6273 6372 6970  atch-up subscrip
+00009e50: 7469 6f6e 2c20 7468 6520 636f 6d6d 6974  tion, the commit
+00009e60: 2070 6f73 6974 696f 6e20 6f66 2061 2072   position of a r
+00009e70: 6563 6f72 6465 645c 6e65 7665 6e74 2073  ecorded\nevent s
+00009e80: 686f 756c 6420 6265 2072 6563 6f72 6465  hould be recorde
+00009e90: 6420 6174 6f6d 6963 616c 6c79 2061 6e64  d atomically and
+00009ea0: 2075 6e69 7175 656c 7920 616c 6f6e 6720   uniquely along 
+00009eb0: 7769 7468 2074 6865 2072 6573 756c 7420  with the result 
+00009ec0: 6f66 2070 726f 6365 7373 696e 675c 6e72  of processing\nr
+00009ed0: 6563 6f72 6465 6420 6576 656e 7473 2c20  ecorded events, 
+00009ee0: 666f 7220 6578 616d 706c 6520 696e 2074  for example in t
+00009ef0: 6865 2073 616d 6520 6461 7461 6261 7365  he same database
+00009f00: 2061 7320 6d61 7465 7269 616c 6973 6564   as materialised
+00009f10: 2076 6965 7773 2077 6865 6e5c 6e69 6d70   views when\nimp
+00009f20: 6c65 6d65 6e74 696e 6720 6576 656e 7475  lementing eventu
+00009f30: 616c 6c79 2d63 6f6e 7369 7374 656e 7420  ally-consistent 
+00009f40: 4351 5253 2c20 6f72 2069 6e20 7468 6520  CQRS, or in the 
+00009f50: 7361 6d65 2064 6174 6162 6173 6520 6173  same database as
+00009f60: 2061 2064 6f77 6e73 7472 6561 6d5c 6e61   a downstream\na
+00009f70: 6e61 6c79 7469 6373 206f 7220 7265 706f  nalytics or repo
+00009f80: 7274 696e 6720 6f72 2061 7263 6869 7669  rting or archivi
+00009f90: 6e67 2061 7070 6c69 6361 7469 6f6e 2e20  ng application. 
+00009fa0: 4279 2072 6563 6f72 6469 6e67 2074 6865  By recording the
+00009fb0: 2063 6f6d 6d69 7420 706f 7369 7469 6f6e   commit position
+00009fc0: 5c6e 6f66 2072 6563 6f72 6465 6420 6576  \nof recorded ev
+00009fd0: 656e 7473 2061 746f 6d69 6361 6c6c 7920  ents atomically 
+00009fe0: 7769 7468 2074 6865 206e 6577 2073 7461  with the new sta
+00009ff0: 7465 2074 6861 7420 7265 7375 6c74 7320  te that results 
+0000a000: 6672 6f6d 2070 726f 6365 7373 696e 675c  from processing\
+0000a010: 6e72 6563 6f72 6465 6420 6576 656e 7473  nrecorded events
+0000a020: 2c20 2264 7561 6c20 7772 6974 696e 6722  , "dual writing"
+0000a030: 2069 6e20 7468 6520 636f 6e73 756d 7074   in the consumpt
+0000a040: 696f 6e20 6f66 2072 6563 6f72 6465 6420  ion of recorded 
+0000a050: 6576 656e 7473 2063 616e 2062 655c 6e61  events can be\na
+0000a060: 766f 6964 6564 2e20 4279 2061 6c73 6f20  voided. By also 
+0000a070: 7265 636f 7264 696e 6720 7468 6520 636f  recording the co
+0000a080: 6d6d 6974 2070 6f73 6974 696f 6e20 756e  mmit position un
+0000a090: 6971 7565 6c79 2c20 7468 6520 6e65 7720  iquely, the new 
+0000a0a0: 7374 6174 6520 6361 6e6e 6f74 2062 655c  state cannot be\
+0000a0b0: 6e72 6563 6f72 6465 6420 7477 6963 652c  nrecorded twice,
+0000a0c0: 2061 6e64 2068 656e 6365 2074 6865 2072   and hence the r
+0000a0d0: 6563 6f72 6465 6420 7374 6174 6520 6f66  ecorded state of
+0000a0e0: 2074 6865 2064 6f77 6e73 7472 6561 6d20   the downstream 
+0000a0f0: 636f 6d70 6f6e 656e 7420 7769 6c6c 2062  component will b
+0000a100: 655c 6e75 7064 6174 6564 206f 6e6c 7920  e\nupdated only 
+0000a110: 6f6e 6365 2066 6f72 2061 6e79 2072 6563  once for any rec
+0000a120: 6f72 6465 6420 6576 656e 742e 2042 7920  orded event. By 
+0000a130: 7573 696e 6720 7468 6520 6772 6561 7465  using the greate
+0000a140: 7374 2072 6563 6f72 6465 6420 636f 6d6d  st recorded comm
+0000a150: 6974 5c6e 706f 7369 7469 6f6e 2074 6f20  it\nposition to 
+0000a160: 7265 7375 6d65 2061 2063 6174 6368 2d75  resume a catch-u
+0000a170: 7020 7375 6273 6372 6970 7469 6f6e 2c20  p subscription, 
+0000a180: 616c 6c20 7265 636f 7264 6564 2065 7665  all recorded eve
+0000a190: 6e74 7320 7769 6c6c 2065 7665 6e74 7561  nts will eventua
+0000a1a0: 6c6c 795c 6e62 6520 7072 6f63 6573 7365  lly\nbe processe
+0000a1b0: 642e 2054 6865 2063 6f6d 6269 6e61 7469  d. The combinati
+0000a1c0: 6f6e 206f 6620 7468 6520 2261 742d 6d6f  on of the "at-mo
+0000a1d0: 7374 2d6f 6e63 6522 2063 6f6e 6469 7469  st-once" conditi
+0000a1e0: 6f6e 2061 6e64 2074 6865 2022 6174 2d6c  on and the "at-l
+0000a1f0: 6561 7374 2d6f 6e63 6522 5c6e 636f 6e64  east-once"\ncond
+0000a200: 6974 696f 6e20 6769 7665 7320 7468 6520  ition gives the 
+0000a210: 2265 7861 6374 6c79 2d6f 6e63 6522 2063  "exactly-once" c
+0000a220: 6f6e 6469 7469 6f6e 2e5c 6e5c 6e54 6865  ondition.\n\nThe
+0000a230: 2064 616e 6765 7220 7769 7468 2022 6475   danger with "du
+0000a240: 616c 2077 7269 7469 6e67 2220 696e 2074  al writing" in t
+0000a250: 6865 2063 6f6e 7375 6d70 7469 6f6e 206f  he consumption o
+0000a260: 6620 7265 636f 7264 6564 2065 7665 6e74  f recorded event
+0000a270: 7320 6973 2074 6861 7420 6966 2061 5c6e  s is that if a\n
+0000a280: 7265 636f 7264 6564 2065 7665 6e74 2069  recorded event i
+0000a290: 7320 7375 6363 6573 7366 756c 6c79 2070  s successfully p
+0000a2a0: 726f 6365 7373 6564 2061 6e64 206e 6577  rocessed and new
+0000a2b0: 2073 7461 7465 2072 6563 6f72 6465 6420   state recorded 
+0000a2c0: 6174 6f6d 6963 616c 6c79 2069 6e20 6f6e  atomically in on
+0000a2d0: 655c 6e74 7261 6e73 6163 7469 6f6e 2077  e\ntransaction w
+0000a2e0: 6974 6820 7468 6520 636f 6d6d 6974 2070  ith the commit p
+0000a2f0: 6f73 6974 696f 6e20 7265 636f 7264 6564  osition recorded
+0000a300: 2069 6e20 6120 7365 7061 7261 7465 2074   in a separate t
+0000a310: 7261 6e73 6163 7469 6f6e 2c20 6f6e 6520  ransaction, one 
+0000a320: 6d61 795c 6e68 6170 7065 6e20 616e 6420  may\nhappen and 
+0000a330: 6e6f 7420 7468 6520 6f74 6865 722e 2049  not the other. I
+0000a340: 6620 7468 6520 6e65 7720 7374 6174 6520  f the new state 
+0000a350: 6973 2072 6563 6f72 6465 6420 6275 7420  is recorded but 
+0000a360: 7468 6520 706f 7369 7469 6f6e 2069 7320  the position is 
+0000a370: 6c6f 7374 2c5c 6e61 6e64 2074 6865 6e20  lost,\nand then 
+0000a380: 7468 6520 7072 6f63 6573 7369 6e67 2069  the processing i
+0000a390: 7320 7374 6f70 7065 6420 616e 6420 7265  s stopped and re
+0000a3a0: 7375 6d65 642c 2074 6865 2072 6563 6f72  sumed, the recor
+0000a3b0: 6465 6420 6576 656e 7420 6d61 7920 6265  ded event may be
+0000a3c0: 2070 726f 6365 7373 6564 5c6e 7477 6963   processed\ntwic
+0000a3d0: 652e 204f 6e20 7468 6520 6f74 6865 7220  e. On the other 
+0000a3e0: 6861 6e64 2c20 6966 2074 6865 2063 6f6d  hand, if the com
+0000a3f0: 6d69 7420 706f 7369 7469 6f6e 2069 7320  mit position is 
+0000a400: 7265 636f 7264 6564 2062 7574 2074 6865  recorded but the
+0000a410: 206e 6577 2073 7461 7465 2069 735c 6e6c   new state is\nl
+0000a420: 6f73 742c 2074 6865 2072 6563 6f72 6465  ost, the recorde
+0000a430: 6420 6576 656e 7420 6d61 7920 6566 6665  d event may effe
+0000a440: 6374 6976 656c 7920 6e6f 7420 6265 2070  ctively not be p
+0000a450: 726f 6365 7373 6564 2061 7420 616c 6c2e  rocessed at all.
+0000a460: 2042 7920 6569 7468 6572 5c6e 7072 6f63   By either\nproc
+0000a470: 6573 7369 6e67 2061 6e20 6576 656e 7420  essing an event 
+0000a480: 6d6f 7265 2074 6861 6e20 6f6e 6365 2c20  more than once, 
+0000a490: 6f72 2062 7920 6661 696c 696e 6720 746f  or by failing to
+0000a4a0: 2070 726f 6365 7373 2061 6e20 6576 656e   process an even
+0000a4b0: 742c 2074 6865 2072 6563 6f72 6465 645c  t, the recorded\
+0000a4c0: 6e73 7461 7465 206f 6620 7468 6520 646f  nstate of the do
+0000a4d0: 776e 7374 7265 616d 2063 6f6d 706f 6e65  wnstream compone
+0000a4e0: 6e74 206d 6967 6874 2062 6520 696e 6163  nt might be inac
+0000a4f0: 6375 7261 7465 2c20 6f72 2070 6f73 7369  curate, or possi
+0000a500: 626c 7920 696e 636f 6e73 6973 7465 6e74  bly inconsistent
+0000a510: 2c20 616e 645c 6e70 6572 6861 7073 2063  , and\nperhaps c
+0000a520: 6174 6173 7472 6f70 6869 6361 6c6c 7920  atastrophically 
+0000a530: 736f 2e20 5375 6368 2063 6f6e 7365 7175  so. Such consequ
+0000a540: 656e 6365 7320 6d61 7920 6f72 206d 6179  ences may or may
+0000a550: 206e 6f74 206d 6174 7465 7220 696e 2079   not matter in y
+0000a560: 6f75 7220 7369 7475 6174 696f 6e2e 5c6e  our situation.\n
+0000a570: 4275 7420 736f 6d65 7469 6d65 7320 696e  But sometimes in
+0000a580: 636f 6e73 6973 7465 6e63 6965 7320 6d61  consistencies ma
+0000a590: 7920 6861 6c74 2070 726f 6365 7373 696e  y halt processin
+0000a5a0: 6720 756e 7469 6c20 7468 6520 6973 7375  g until the issu
+0000a5b0: 6520 6973 2072 6573 6f6c 7665 642e 2059  e is resolved. Y
+0000a5c0: 6f75 2063 616e 5c6e 6176 6f69 6420 2264  ou can\navoid "d
+0000a5d0: 7561 6c20 7772 6974 696e 6722 2069 6e20  ual writing" in 
+0000a5e0: 7468 6520 636f 6e73 756d 7074 696f 6e20  the consumption 
+0000a5f0: 6f66 2065 7665 6e74 7320 6279 2061 746f  of events by ato
+0000a600: 6d69 6361 6c6c 7920 7265 636f 7264 696e  mically recordin
+0000a610: 6720 7468 6520 636f 6d6d 6974 5c6e 706f  g the commit\npo
+0000a620: 7369 7469 6f6e 206f 6620 6120 7265 636f  sition of a reco
+0000a630: 7264 6564 2065 7665 6e74 2061 6c6f 6e67  rded event along
+0000a640: 2077 6974 6820 7468 6520 6e65 7720 7374   with the new st
+0000a650: 6174 6520 7468 6174 2072 6573 756c 7473  ate that results
+0000a660: 2066 726f 6d20 7072 6f63 6573 7369 6e67   from processing
+0000a670: 2074 6861 745c 6e65 7665 6e74 2069 6e20   that\nevent in 
+0000a680: 7468 6520 7361 6d65 2061 746f 6d69 6320  the same atomic 
+0000a690: 7472 616e 7361 6374 696f 6e2e 2042 7920  transaction. By 
+0000a6a0: 6d61 6b69 6e67 2074 6865 2072 6563 6f72  making the recor
+0000a6b0: 6469 6e67 206f 6620 7468 6520 636f 6d6d  ding of the comm
+0000a6c0: 6974 2070 6f73 6974 696f 6e73 5c6e 756e  it positions\nun
+0000a6d0: 6971 7565 2c20 736f 2074 6861 7420 7472  ique, so that tr
+0000a6e0: 616e 7361 6374 696f 6e73 2077 696c 6c20  ansactions will 
+0000a6f0: 6265 2072 6f6c 6c65 6420 6261 636b 2077  be rolled back w
+0000a700: 6865 6e20 7468 6572 6520 6973 2061 2063  hen there is a c
+0000a710: 6f6e 666c 6963 742c 2079 6f75 2077 696c  onflict, you wil
+0000a720: 6c5c 6e70 7265 7665 6e74 2074 6865 2072  l\nprevent the r
+0000a730: 6573 756c 7473 206f 6620 616e 7920 6475  esults of any du
+0000a740: 706c 6963 6174 6520 7072 6f63 6573 7369  plicate processi
+0000a750: 6e67 206f 6620 6120 7265 636f 7264 6564  ng of a recorded
+0000a760: 2065 7665 6e74 2062 6569 6e67 2063 6f6d   event being com
+0000a770: 6d69 7474 6564 2e5c 6e5c 6e52 6563 6f72  mitted.\n\nRecor
+0000a780: 6465 6420 6576 656e 7473 2072 6563 6569  ded events recei
+0000a790: 7665 6420 6672 6f6d 2061 2063 6174 6368  ved from a catch
+0000a7a0: 2d75 7020 7375 6273 6372 6970 7469 6f6e  -up subscription
+0000a7b0: 2063 616e 6e6f 7420 6265 2061 636b 6e6f   cannot be ackno
+0000a7c0: 776c 6564 6765 6420 6261 636b 5c6e 746f  wledged back\nto
+0000a7d0: 2074 6865 2045 7665 6e74 5374 6f72 6544   the EventStoreD
+0000a7e0: 4220 7365 7276 6572 2e20 4163 6b6e 6f77  B server. Acknow
+0000a7f0: 6c65 6467 696e 6720 6576 656e 7473 2c20  ledging events, 
+0000a800: 686f 7765 7665 722c 2069 7320 616e 2061  however, is an a
+0000a810: 7370 6563 7420 6f66 2022 7065 7273 6973  spect of "persis
+0000a820: 7465 6e74 5c6e 7375 6273 6372 6970 7469  tent\nsubscripti
+0000a830: 6f6e 7322 2028 7365 6520 6265 6c6f 7729  ons" (see below)
+0000a840: 2e20 486f 7069 6e67 2074 6f20 7265 6c79  . Hoping to rely
+0000a850: 206f 6e20 6163 6b6e 6f77 6c65 6467 696e   on acknowledgin
+0000a860: 6720 6576 656e 7473 2074 6f20 616e 2075  g events to an u
+0000a870: 7073 7472 6561 6d5c 6e63 6f6d 706f 6e65  pstream\ncompone
+0000a880: 6e74 2069 7320 616e 2065 7861 6d70 6c65  nt is an example
+0000a890: 206f 6620 6475 616c 2077 7269 7469 6e67   of dual writing
+0000a8a0: 2e5c 6e5c 6e23 2323 2053 7562 7363 7269  .\n\n### Subscri
+0000a8b0: 6265 2061 6c6c 2065 7665 6e74 735c 6e5c  be all events\n\
+0000a8c0: 6e54 6865 6073 7562 7363 7269 6265 5f61  nThe`subscribe_a
+0000a8d0: 6c6c 5f65 7665 6e74 7328 2960 206d 6574  ll_events()` met
+0000a8e0: 686f 6420 6361 6e20 6265 2075 7365 6420  hod can be used 
+0000a8f0: 746f 2073 7461 7274 2061 2022 6361 7463  to start a "catc
+0000a900: 682d 7570 2220 7375 6273 6372 6970 7469  h-up" subscripti
+0000a910: 6f6e 5c6e 7468 6174 2063 616e 2072 6574  on\nthat can ret
+0000a920: 7572 6e20 6576 656e 7473 2066 726f 6d20  urn events from 
+0000a930: 616c 6c20 7374 7265 616d 7320 696e 2074  all streams in t
+0000a940: 6865 2064 6174 6162 6173 652e 5c6e 5c6e  he database.\n\n
+0000a950: 5468 6973 206d 6574 686f 6420 6361 6e20  This method can 
+0000a960: 6265 2075 7365 6420 6279 2061 2064 6f77  be used by a dow
+0000a970: 6e73 7472 6561 6d20 636f 6d70 6f6e 656e  nstream componen
+0000a980: 745c 6e74 6f20 7072 6f63 6573 7320 7265  t\nto process re
+0000a990: 636f 7264 6564 2065 7665 6e74 7320 7769  corded events wi
+0000a9a0: 7468 2065 7861 6374 6c79 2d6f 6e63 6520  th exactly-once 
+0000a9b0: 7365 6d61 6e74 6963 732e 5c6e 5c6e 5468  semantics.\n\nTh
+0000a9c0: 6973 206d 6574 686f 6420 7461 6b65 7320  is method takes 
+0000a9d0: 616e 206f 7074 696f 6e61 6c20 6063 6f6d  an optional `com
+0000a9e0: 6d69 745f 706f 7369 7469 6f6e 6020 6172  mit_position` ar
+0000a9f0: 6775 6d65 6e74 2c20 7768 6963 6820 6361  gument, which ca
+0000aa00: 6e20 6265 5c6e 7573 6564 2074 6f20 7370  n be\nused to sp
+0000aa10: 6563 6966 7920 6120 636f 6d6d 6974 2070  ecify a commit p
+0000aa20: 6f73 6974 696f 6e20 6672 6f6d 2077 6869  osition from whi
+0000aa30: 6368 2074 6f20 7375 6273 6372 6962 652e  ch to subscribe.
+0000aa40: 2054 6865 2064 6566 6175 6c74 5c6e 7661   The default\nva
+0000aa50: 6c75 6520 6973 2060 4e6f 6e65 602c 2077  lue is `None`, w
+0000aa60: 6869 6368 206d 6561 6e73 2074 6865 2073  hich means the s
+0000aa70: 7562 7363 7269 7074 696f 6e20 7769 6c6c  ubscription will
+0000aa80: 206f 7065 7261 7465 2066 726f 6d20 7468   operate from th
+0000aa90: 6520 6669 7273 745c 6e72 6563 6f72 6465  e first\nrecorde
+0000aaa0: 6420 6576 656e 7420 696e 2074 6865 2064  d event in the d
+0000aab0: 6174 6162 6173 652e 2049 6620 6120 636f  atabase. If a co
+0000aac0: 6d6d 6974 2070 6f73 6974 696f 6e20 6973  mmit position is
+0000aad0: 2067 6976 656e 2c20 6974 206d 7573 7420   given, it must 
+0000aae0: 6d61 7463 685c 6e61 6e20 6163 7475 616c  match\nan actual
+0000aaf0: 6c79 2065 7869 7374 696e 6720 636f 6d6d  ly existing comm
+0000ab00: 6974 2070 6f73 6974 696f 6e20 696e 2074  it position in t
+0000ab10: 6865 2064 6174 6162 6173 652e 2054 6865  he database. The
+0000ab20: 2072 6563 6f64 6564 2065 7665 6e74 7320   recoded events 
+0000ab30: 7468 6174 5c6e 6172 6520 6f62 7461 696e  that\nare obtain
+0000ab40: 6564 2077 696c 6c20 6e6f 7420 696e 636c  ed will not incl
+0000ab50: 7564 6520 7468 6520 6576 656e 7420 7265  ude the event re
+0000ab60: 636f 7264 6564 2061 7420 7468 6174 2063  corded at that c
+0000ab70: 6f6d 6d69 7420 706f 7369 7469 6f6e 2e5c  ommit position.\
+0000ab80: 6e5c 6e54 6869 7320 6d65 7468 6f64 2061  n\nThis method a
+0000ab90: 6c73 6f20 7461 6b65 7320 666f 7572 206f  lso takes four o
+0000aba0: 7468 6572 206f 7074 696f 6e61 6c20 6172  ther optional ar
+0000abb0: 6775 6d65 6e74 732c 2060 6669 6c74 6572  guments, `filter
+0000abc0: 5f65 7863 6c75 6465 602c 5c6e 6066 696c  _exclude`,\n`fil
+0000abd0: 7465 725f 696e 636c 7564 6560 2c20 6066  ter_include`, `f
+0000abe0: 696c 7465 725f 6279 5f73 7472 6561 6d5f  ilter_by_stream_
+0000abf0: 6e61 6d65 602c 2061 6e64 2060 7469 6d65  name`, and `time
+0000ac00: 6f75 7460 2e5c 6e5c 6e54 6865 206f 7074  out`.\n\nThe opt
+0000ac10: 696f 6e61 6c20 6172 6775 6d65 6e74 2060  ional argument `
+0000ac20: 6669 6c74 6572 5f65 7863 6c75 6465 6020  filter_exclude` 
+0000ac30: 6973 2061 2073 6571 7565 6e63 6520 6f66  is a sequence of
+0000ac40: 2072 6567 756c 6172 2065 7870 7265 7373   regular express
+0000ac50: 696f 6e73 2074 6861 745c 6e6d 6174 6368  ions that\nmatch
+0000ac60: 2072 6563 6f72 6465 6420 6576 656e 7473   recorded events
+0000ac70: 2074 6861 7420 7368 6f75 6c64 206e 6f74   that should not
+0000ac80: 2062 6520 696e 636c 7564 6564 2e20 5468   be included. Th
+0000ac90: 6973 2061 7267 756d 656e 7420 6973 2069  is argument is i
+0000aca0: 676e 6f72 6564 5c6e 6966 2060 6669 6c74  gnored\nif `filt
+0000acb0: 6572 5f69 6e63 6c75 6465 6020 6973 2073  er_include` is s
+0000acc0: 6574 2074 6f20 6120 6e6f 6e2d 656d 7074  et to a non-empt
+0000acd0: 7920 7365 7175 656e 6365 2e20 4279 2064  y sequence. By d
+0000ace0: 6566 6175 6c74 2c20 7468 6973 2061 7267  efault, this arg
+0000acf0: 756d 656e 7420 6973 2073 6574 5c6e 746f  ument is set\nto
+0000ad00: 206d 6174 6368 2074 6865 2065 7665 6e74   match the event
+0000ad10: 2074 7970 6573 206f 6620 2273 7973 7465   types of "syste
+0000ad20: 6d20 6576 656e 7473 222c 2073 6f20 7468  m events", so th
+0000ad30: 6174 2045 7665 6e74 5374 6f72 6544 4220  at EventStoreDB 
+0000ad40: 7379 7374 656d 2065 7665 6e74 735c 6e77  system events\nw
+0000ad50: 696c 6c20 6e6f 7420 6e6f 726d 616c 6c79  ill not normally
+0000ad60: 2062 6520 696e 636c 7564 6564 2e20 5365   be included. Se
+0000ad70: 6520 7468 6520 4e6f 7465 7320 7365 6374  e the Notes sect
+0000ad80: 696f 6e20 6265 6c6f 7720 666f 7220 6d6f  ion below for mo
+0000ad90: 7265 2069 6e66 6f72 6d61 7469 6f6e 5c6e  re information\n
+0000ada0: 6162 6f75 7420 6669 6c74 6572 2065 7870  about filter exp
+0000adb0: 7265 7373 696f 6e73 2e5c 6e5c 6e54 6865  ressions.\n\nThe
+0000adc0: 206f 7074 696f 6e61 6c20 6172 6775 6d65   optional argume
+0000add0: 6e74 2060 6669 6c74 6572 5f69 6e63 6c75  nt `filter_inclu
+0000ade0: 6465 6020 6973 2061 2073 6571 7565 6e63  de` is a sequenc
+0000adf0: 6520 6f66 2072 6567 756c 6172 2065 7870  e of regular exp
+0000ae00: 7265 7373 696f 6e73 5c6e 7468 6174 206d  ressions\nthat m
+0000ae10: 6174 6368 2072 6563 6f72 6465 6420 6576  atch recorded ev
+0000ae20: 656e 7473 2074 6861 7420 7368 6f75 6c64  ents that should
+0000ae30: 2062 6520 696e 636c 7564 6564 2e20 4279   be included. By
+0000ae40: 2064 6566 6175 6c74 2c20 7468 6973 2061   default, this a
+0000ae50: 7267 756d 656e 745c 6e69 7320 616e 2065  rgument\nis an e
+0000ae60: 6d70 7479 2074 7570 6c65 2e20 4966 2074  mpty tuple. If t
+0000ae70: 6869 7320 6172 6775 6d65 6e74 2069 7320  his argument is 
+0000ae80: 7365 7420 746f 2061 206e 6f6e 2d65 6d70  set to a non-emp
+0000ae90: 7479 2073 6571 7565 6e63 652c 2074 6865  ty sequence, the
+0000aea0: 5c6e 6066 696c 7465 725f 6578 636c 7564  \n`filter_exclud
+0000aeb0: 6560 2061 7267 756d 656e 7420 6973 2069  e` argument is i
+0000aec0: 676e 6f72 6564 2e5c 6e5c 6e54 6865 206f  gnored.\n\nThe o
+0000aed0: 7074 696f 6e61 6c20 6172 6775 6d65 6e74  ptional argument
+0000aee0: 2060 6669 6c74 6572 5f62 795f 7374 7265   `filter_by_stre
+0000aef0: 616d 5f6e 616d 6560 2069 7320 6120 626f  am_name` is a bo
+0000af00: 6f6c 6561 6e20 7661 6c75 6520 7468 6174  olean value that
+0000af10: 2069 6e64 6963 6174 6573 2077 6865 7468   indicates wheth
+0000af20: 6572 5c6e 7468 6520 6669 6c74 6572 2077  er\nthe filter w
+0000af30: 696c 6c20 6170 706c 7920 746f 2065 7665  ill apply to eve
+0000af40: 6e74 2074 7970 6573 206f 7220 7374 7265  nt types or stre
+0000af50: 616d 206e 616d 6573 2e20 4279 2064 6566  am names. By def
+0000af60: 6175 6c74 2c20 7468 6973 2076 616c 7565  ault, this value
+0000af70: 2069 7320 6046 616c 7365 605c 6e61 6e64   is `False`\nand
+0000af80: 2073 6f20 7468 6520 6669 6c74 6572 696e   so the filterin
+0000af90: 6720 7769 6c6c 2061 7070 6c79 2074 6f20  g will apply to 
+0000afa0: 7468 6520 6576 656e 7420 7479 7065 2073  the event type s
+0000afb0: 7472 696e 6773 206f 6620 7265 636f 7264  trings of record
+0000afc0: 6564 2065 7665 6e74 732e 5c6e 5c6e 506c  ed events.\n\nPl
+0000afd0: 6561 7365 206e 6f74 652c 2074 6865 2066  ease note, the f
+0000afe0: 696c 7465 7269 6e67 2068 6170 7065 6e73  iltering happens
+0000aff0: 206f 6e20 7468 6520 4576 656e 7453 746f   on the EventSto
+0000b000: 7265 4442 2073 6572 7665 722c 2061 6e64  reDB server, and
+0000b010: 2074 6865 5c6e 606c 696d 6974 6020 6172   the\n`limit` ar
+0000b020: 6775 6d65 6e74 2069 7320 6170 706c 6965  gument is applie
+0000b030: 6420 6f6e 2074 6865 2073 6572 7665 7220  d on the server 
+0000b040: 6166 7465 7220 6669 6c74 6572 696e 672e  after filtering.
+0000b050: 2053 6565 2062 656c 6f77 2066 6f72 5c6e   See below for\n
+0000b060: 6d6f 7265 2069 6e66 6f72 6d61 7469 6f6e  more information
+0000b070: 2061 626f 7574 2066 696c 7465 7220 7265   about filter re
+0000b080: 6775 6c61 7220 6578 7072 6573 7369 6f6e  gular expression
+0000b090: 732e 5c6e 5c6e 5468 6520 6f70 7469 6f6e  s.\n\nThe option
+0000b0a0: 616c 2060 7469 6d65 6f75 7460 2061 7267  al `timeout` arg
+0000b0b0: 756d 656e 7420 6973 2061 2050 7974 686f  ument is a Pytho
+0000b0c0: 6e20 6066 6c6f 6174 6020 7768 6963 6820  n `float` which 
+0000b0d0: 7365 7473 2061 5c6e 6465 6164 6c69 6e65  sets a\ndeadline
+0000b0e0: 2066 6f72 2074 6865 2063 6f6d 706c 6574   for the complet
+0000b0f0: 696f 6e20 6f66 2074 6865 2067 5250 4320  ion of the gRPC 
+0000b100: 6f70 6572 6174 696f 6e2e 5c6e 5c6e 5468  operation.\n\nTh
+0000b110: 6973 206d 6574 686f 6420 7265 7475 726e  is method return
+0000b120: 7320 6120 5079 7468 6f6e 2069 7465 7261  s a Python itera
+0000b130: 746f 7220 7468 6174 2079 6965 6c64 7320  tor that yields 
+0000b140: 7265 636f 7264 6564 2065 7665 6e74 732c  recorded events,
+0000b150: 2069 6e63 6c75 6469 6e67 2065 7665 6e74   including event
+0000b160: 735c 6e74 6861 7420 6172 6520 7265 636f  s\nthat are reco
+0000b170: 7264 6564 2061 6674 6572 2074 6865 2073  rded after the s
+0000b180: 7562 7363 7269 7074 696f 6e20 7761 7320  ubscription was 
+0000b190: 6372 6561 7465 642e 2049 7465 7261 7469  created. Iterati
+0000b1a0: 6e67 206f 7665 7220 7468 6973 206f 626a  ng over this obj
+0000b1b0: 6563 7420 7769 6c6c 5c6e 7468 6572 6566  ect will\ntheref
+0000b1c0: 6f72 6520 6e6f 7420 7374 6f70 2c20 756e  ore not stop, un
+0000b1d0: 6c65 7373 2074 6865 2063 6f6e 6e65 6374  less the connect
+0000b1e0: 696f 6e20 746f 2074 6865 2064 6174 6162  ion to the datab
+0000b1f0: 6173 6520 6973 206c 6f73 742e 2054 6865  ase is lost. The
+0000b200: 2063 616c 6c20 7769 6c6c 5c6e 6265 2065   call will\nbe e
+0000b210: 6e64 6564 2077 6865 6e20 7468 6520 6974  nded when the it
+0000b220: 6572 6174 6f72 206f 626a 6563 7420 6973  erator object is
+0000b230: 2064 656c 6574 6564 2066 726f 6d20 6d65   deleted from me
+0000b240: 6d6f 7279 2c20 7768 6963 6820 7769 6c6c  mory, which will
+0000b250: 2068 6170 7065 6e20 7768 656e 2074 6865   happen when the
+0000b260: 5c6e 6974 6572 6174 6f72 206f 626a 6563  \niterator objec
+0000b270: 7420 676f 6573 206f 7574 206f 6620 7363  t goes out of sc
+0000b280: 6f70 6520 6f72 2069 7320 6578 706c 6963  ope or is explic
+0000b290: 6974 6c79 2064 656c 6574 6564 2028 7365  itly deleted (se
+0000b2a0: 6520 6265 6c6f 7729 2e20 5468 6520 6361  e below). The ca
+0000b2b0: 6c6c 5c6e 6d61 7920 616c 736f 2062 6520  ll\nmay also be 
+0000b2c0: 636c 6f73 6564 2062 7920 7468 6520 7365  closed by the se
+0000b2d0: 7276 6572 2e5c 6e5c 6e54 6865 2073 7562  rver.\n\nThe sub
+0000b2e0: 7363 7269 7074 696f 6e20 6f62 6a65 6374  scription object
+0000b2f0: 2063 616e 2062 6520 7573 6564 2064 6972   can be used dir
+0000b300: 6563 746c 792c 2062 7574 2069 7420 6d69  ectly, but it mi
+0000b310: 6768 7420 6265 2075 7365 6420 7769 7468  ght be used with
+0000b320: 696e 2061 2074 6872 6561 6465 645c 6e6c  in a threaded\nl
+0000b330: 6f6f 7020 6465 6469 6361 7465 6420 746f  oop dedicated to
+0000b340: 2072 6563 6569 7669 6e67 2065 7665 6e74   receiving event
+0000b350: 7320 7468 6174 2063 616e 2062 6520 7374  s that can be st
+0000b360: 6f70 7065 6420 696e 2061 2063 6f6e 7472  opped in a contr
+0000b370: 6f6c 6c65 6420 7761 792c 2077 6974 685c  olled way, with\
+0000b380: 6e72 6563 6f72 6465 6420 6576 656e 7473  nrecorded events
+0000b390: 2070 7574 206f 6e20 6120 7175 6575 6520   put on a queue 
+0000b3a0: 666f 7220 7072 6f63 6573 7369 6e67 2069  for processing i
+0000b3b0: 6e20 6120 6469 6666 6572 656e 7420 7468  n a different th
+0000b3c0: 7265 6164 2e20 5468 6973 2070 6163 6b61  read. This packa
+0000b3d0: 6765 5c6e 646f 6573 6e5c 2774 2070 726f  ge\ndoesn\'t pro
+0000b3e0: 7669 6465 2073 7563 6820 6120 7468 7265  vide such a thre
+0000b3f0: 6164 6564 206f 7220 7175 6575 696e 6720  aded or queuing 
+0000b400: 6f62 6a65 6374 2063 6c61 7373 2e20 4a75  object class. Ju
+0000b410: 7374 206d 616b 6520 7375 7265 2074 6f20  st make sure to 
+0000b420: 7265 636f 6e73 7472 7563 745c 6e74 6865  reconstruct\nthe
+0000b430: 2073 7562 7363 7269 7074 696f 6e20 2861   subscription (a
+0000b440: 6e64 2074 6865 2071 7565 7565 2920 7573  nd the queue) us
+0000b450: 696e 6720 7468 6520 6c61 7374 2072 6563  ing the last rec
+0000b460: 6f72 6465 6420 636f 6d6d 6974 2070 6f73  orded commit pos
+0000b470: 6974 696f 6e20 7768 656e 2072 6573 756d  ition when resum
+0000b480: 696e 675c 6e74 6865 2073 7562 7363 7269  ing\nthe subscri
+0000b490: 7074 696f 6e20 6166 7465 7220 616e 2065  ption after an e
+0000b4a0: 7272 6f72 2c20 746f 2062 6520 7375 7265  rror, to be sure
+0000b4b0: 2061 6c6c 2065 7665 6e74 7320 6172 6520   all events are 
+0000b4c0: 7072 6f63 6573 7365 6420 6f6e 6365 2e5c  processed once.\
+0000b4d0: 6e5c 6e54 6865 2065 7861 6d70 6c65 2062  n\nThe example b
+0000b4e0: 656c 6f77 2073 686f 7773 2068 6f77 2074  elow shows how t
+0000b4f0: 6f20 7375 6273 6372 6962 6520 746f 2072  o subscribe to r
+0000b500: 6563 6569 7665 2061 6c6c 2072 6563 6f72  eceive all recor
+0000b510: 6465 645c 6e65 7665 6e74 7320 6672 6f6d  ded\nevents from
+0000b520: 2074 6865 2073 7461 7274 2c20 616e 6420   the start, and 
+0000b530: 7468 656e 2072 6573 756d 696e 6720 6672  then resuming fr
+0000b540: 6f6d 2061 2073 7065 6369 6669 6320 636f  om a specific co
+0000b550: 6d6d 6974 2070 6f73 6974 696f 6e2e 5c6e  mmit position.\n
+0000b560: 5468 7265 6520 616c 7265 6164 792d 7265  Three already-re
+0000b570: 636f 7264 6564 2065 7665 6e74 7320 6172  corded events ar
+0000b580: 6520 7265 6365 6976 6564 2c20 616e 6420  e received, and 
+0000b590: 7468 656e 2074 6872 6565 206e 6577 2065  then three new e
+0000b5a0: 7665 6e74 7320 6172 655c 6e72 6563 6f72  vents are\nrecor
+0000b5b0: 6465 642c 2077 6869 6368 2061 7265 2074  ded, which are t
+0000b5c0: 6865 6e20 7265 6365 6976 6564 2076 6961  hen received via
+0000b5d0: 2074 6865 2073 7562 7363 7269 7074 696f   the subscriptio
+0000b5e0: 6e2e 5c6e 5c6e 6060 6070 7974 686f 6e5c  n.\n\n```python\
+0000b5f0: 6e5c 6e23 2041 7070 656e 6420 616e 2065  n\n# Append an e
+0000b600: 7665 6e74 2074 6f20 6120 6e65 7720 7374  vent to a new st
+0000b610: 7265 616d 2e5c 6e73 7472 6561 6d5f 6e61  ream.\nstream_na
+0000b620: 6d65 3220 3d20 7374 7228 7575 6964 3428  me2 = str(uuid4(
+0000b630: 2929 5c6e 6576 656e 7434 203d 204e 6577  ))\nevent4 = New
+0000b640: 4576 656e 7428 7479 7065 3d5c 274f 7264  Event(type=\'Ord
+0000b650: 6572 4372 6561 7465 645c 272c 2064 6174  erCreated\', dat
+0000b660: 613d 625c 2764 6174 6134 5c27 295c 6e63  a=b\'data4\')\nc
+0000b670: 6c69 656e 742e 6170 7065 6e64 5f65 7665  lient.append_eve
+0000b680: 6e74 7328 5c6e 2020 2020 7374 7265 616d  nts(\n    stream
+0000b690: 5f6e 616d 653d 7374 7265 616d 5f6e 616d  _name=stream_nam
+0000b6a0: 6532 2c5c 6e20 2020 2065 7870 6563 7465  e2,\n    expecte
+0000b6b0: 645f 706f 7369 7469 6f6e 3d4e 6f6e 652c  d_position=None,
+0000b6c0: 5c6e 2020 2020 6576 656e 7473 3d5b 6576  \n    events=[ev
+0000b6d0: 656e 7434 5d2c 5c6e 295c 6e5c 6e23 2053  ent4],\n)\n\n# S
+0000b6e0: 7562 7363 7269 6265 2066 726f 6d20 7468  ubscribe from th
+0000b6f0: 6520 6669 7273 7420 7265 636f 7264 6564  e first recorded
+0000b700: 2065 7665 6e74 2069 6e20 7468 6520 6461   event in the da
+0000b710: 7461 6261 7365 2e5c 6e73 7562 7363 7269  tabase.\nsubscri
+0000b720: 7074 696f 6e20 3d20 636c 6965 6e74 2e73  ption = client.s
+0000b730: 7562 7363 7269 6265 5f61 6c6c 5f65 7665  ubscribe_all_eve
+0000b740: 6e74 7328 295c 6e72 6563 6569 7665 645f  nts()\nreceived_
+0000b750: 6576 656e 7473 203d 205b 5d5c 6e5c 6e23  events = []\n\n#
+0000b760: 2050 726f 6365 7373 2065 7665 6e74 7320   Process events 
+0000b770: 7265 6365 6976 6564 2066 726f 6d20 7468  received from th
+0000b780: 6520 6361 7463 682d 7570 2073 7562 7363  e catch-up subsc
+0000b790: 7269 7074 696f 6e2e 5c6e 666f 7220 6576  ription.\nfor ev
+0000b7a0: 656e 7420 696e 2073 7562 7363 7269 7074  ent in subscript
+0000b7b0: 696f 6e3a 5c6e 2020 2020 6c61 7374 5f63  ion:\n    last_c
+0000b7c0: 6f6d 6d69 745f 706f 7369 7469 6f6e 203d  ommit_position =
+0000b7d0: 2065 7665 6e74 2e63 6f6d 6d69 745f 706f   event.commit_po
+0000b7e0: 7369 7469 6f6e 5c6e 2020 2020 7265 6365  sition\n    rece
+0000b7f0: 6976 6564 5f65 7665 6e74 732e 6170 7065  ived_events.appe
+0000b800: 6e64 2865 7665 6e74 295c 6e20 2020 2069  nd(event)\n    i
+0000b810: 6620 6576 656e 742e 6964 203d 3d20 6576  f event.id == ev
+0000b820: 656e 7434 2e69 643a 5c6e 2020 2020 2020  ent4.id:\n      
+0000b830: 2020 6272 6561 6b5c 6e5c 6e61 7373 6572    break\n\nasser
+0000b840: 7420 7265 6365 6976 6564 5f65 7665 6e74  t received_event
+0000b850: 735b 2d34 5d2e 6964 203d 3d20 6576 656e  s[-4].id == even
+0000b860: 7431 2e69 645c 6e61 7373 6572 7420 7265  t1.id\nassert re
+0000b870: 6365 6976 6564 5f65 7665 6e74 735b 2d33  ceived_events[-3
+0000b880: 5d2e 6964 203d 3d20 6576 656e 7432 2e69  ].id == event2.i
+0000b890: 645c 6e61 7373 6572 7420 7265 6365 6976  d\nassert receiv
+0000b8a0: 6564 5f65 7665 6e74 735b 2d32 5d2e 6964  ed_events[-2].id
+0000b8b0: 203d 3d20 6576 656e 7433 2e69 645c 6e61   == event3.id\na
+0000b8c0: 7373 6572 7420 7265 6365 6976 6564 5f65  ssert received_e
+0000b8d0: 7665 6e74 735b 2d31 5d2e 6964 203d 3d20  vents[-1].id == 
+0000b8e0: 6576 656e 7434 2e69 645c 6e5c 6e23 2041  event4.id\n\n# A
+0000b8f0: 7070 656e 6420 7375 6273 6571 7565 6e74  ppend subsequent
+0000b900: 2065 7665 6e74 7320 746f 2074 6865 2073   events to the s
+0000b910: 7472 6561 6d2e 5c6e 6576 656e 7435 203d  tream.\nevent5 =
+0000b920: 204e 6577 4576 656e 7428 7479 7065 3d5c   NewEvent(type=\
+0000b930: 274f 7264 6572 5570 6461 7465 645c 272c  'OrderUpdated\',
+0000b940: 2064 6174 613d 625c 2764 6174 6135 5c27   data=b\'data5\'
+0000b950: 295c 6e63 6c69 656e 742e 6170 7065 6e64  )\nclient.append
+0000b960: 5f65 7665 6e74 7328 5c6e 2020 2020 7374  _events(\n    st
+0000b970: 7265 616d 5f6e 616d 653d 7374 7265 616d  ream_name=stream
+0000b980: 5f6e 616d 6532 2c5c 6e20 2020 2065 7870  _name2,\n    exp
+0000b990: 6563 7465 645f 706f 7369 7469 6f6e 3d30  ected_position=0
+0000b9a0: 2c5c 6e20 2020 2065 7665 6e74 733d 5b65  ,\n    events=[e
+0000b9b0: 7665 6e74 355d 2c5c 6e29 5c6e 5c6e 2320  vent5],\n)\n\n# 
+0000b9c0: 5265 6365 6976 6520 7375 6273 6571 7565  Receive subseque
+0000b9d0: 6e74 2065 7665 6e74 7320 6672 6f6d 2074  nt events from t
+0000b9e0: 6865 2073 7562 7363 7269 7074 696f 6e2e  he subscription.
+0000b9f0: 5c6e 666f 7220 6576 656e 7420 696e 2073  \nfor event in s
+0000ba00: 7562 7363 7269 7074 696f 6e3a 5c6e 2020  ubscription:\n  
+0000ba10: 2020 6c61 7374 5f63 6f6d 6d69 745f 706f    last_commit_po
+0000ba20: 7369 7469 6f6e 203d 2065 7665 6e74 2e63  sition = event.c
+0000ba30: 6f6d 6d69 745f 706f 7369 7469 6f6e 5c6e  ommit_position\n
+0000ba40: 2020 2020 7265 6365 6976 6564 5f65 7665      received_eve
+0000ba50: 6e74 732e 6170 7065 6e64 2865 7665 6e74  nts.append(event
+0000ba60: 295c 6e20 2020 2069 6620 6576 656e 742e  )\n    if event.
+0000ba70: 6964 203d 3d20 6576 656e 7435 2e69 643a  id == event5.id:
+0000ba80: 5c6e 2020 2020 2020 2020 6272 6561 6b5c  \n        break\
+0000ba90: 6e5c 6e5c 6e61 7373 6572 7420 7265 6365  n\n\nassert rece
+0000baa0: 6976 6564 5f65 7665 6e74 735b 2d35 5d2e  ived_events[-5].
+0000bab0: 6964 203d 3d20 6576 656e 7431 2e69 645c  id == event1.id\
+0000bac0: 6e61 7373 6572 7420 7265 6365 6976 6564  nassert received
+0000bad0: 5f65 7665 6e74 735b 2d34 5d2e 6964 203d  _events[-4].id =
+0000bae0: 3d20 6576 656e 7432 2e69 645c 6e61 7373  = event2.id\nass
+0000baf0: 6572 7420 7265 6365 6976 6564 5f65 7665  ert received_eve
+0000bb00: 6e74 735b 2d33 5d2e 6964 203d 3d20 6576  nts[-3].id == ev
+0000bb10: 656e 7433 2e69 645c 6e61 7373 6572 7420  ent3.id\nassert 
+0000bb20: 7265 6365 6976 6564 5f65 7665 6e74 735b  received_events[
+0000bb30: 2d32 5d2e 6964 203d 3d20 6576 656e 7434  -2].id == event4
+0000bb40: 2e69 645c 6e61 7373 6572 7420 7265 6365  .id\nassert rece
+0000bb50: 6976 6564 5f65 7665 6e74 735b 2d31 5d2e  ived_events[-1].
+0000bb60: 6964 203d 3d20 6576 656e 7435 2e69 645c  id == event5.id\
+0000bb70: 6e5c 6e5c 6e23 2041 7070 656e 6420 6d6f  n\n\n# Append mo
+0000bb80: 7265 2065 7665 6e74 7320 746f 2074 6865  re events to the
+0000bb90: 2073 7472 6561 6d2e 5c6e 6576 656e 7436   stream.\nevent6
+0000bba0: 203d 204e 6577 4576 656e 7428 7479 7065   = NewEvent(type
+0000bbb0: 3d5c 274f 7264 6572 4465 6c65 7465 645c  =\'OrderDeleted\
+0000bbc0: 272c 2064 6174 613d 625c 2764 6174 6136  ', data=b\'data6
+0000bbd0: 5c27 295c 6e63 6c69 656e 742e 6170 7065  \')\nclient.appe
+0000bbe0: 6e64 5f65 7665 6e74 7328 5c6e 2020 2020  nd_events(\n    
+0000bbf0: 7374 7265 616d 5f6e 616d 653d 7374 7265  stream_name=stre
+0000bc00: 616d 5f6e 616d 6532 2c5c 6e20 2020 2065  am_name2,\n    e
+0000bc10: 7870 6563 7465 645f 706f 7369 7469 6f6e  xpected_position
+0000bc20: 3d31 2c5c 6e20 2020 2065 7665 6e74 733d  =1,\n    events=
+0000bc30: 5b65 7665 6e74 365d 2c5c 6e29 5c6e 5c6e  [event6],\n)\n\n
+0000bc40: 5c6e 2320 5265 7375 6d65 2073 7562 7363  \n# Resume subsc
+0000bc50: 7269 6269 6e67 2066 726f 6d20 7468 6520  ribing from the 
+0000bc60: 6c61 7374 2063 6f6d 6d69 7420 706f 7369  last commit posi
+0000bc70: 7469 6f6e 2e5c 6e73 7562 7363 7269 7074  tion.\nsubscript
+0000bc80: 696f 6e20 3d20 636c 6965 6e74 2e73 7562  ion = client.sub
+0000bc90: 7363 7269 6265 5f61 6c6c 5f65 7665 6e74  scribe_all_event
+0000bca0: 7328 5c6e 2020 2020 636f 6d6d 6974 5f70  s(\n    commit_p
+0000bcb0: 6f73 6974 696f 6e3d 6c61 7374 5f63 6f6d  osition=last_com
+0000bcc0: 6d69 745f 706f 7369 7469 6f6e 5c6e 295c  mit_position\n)\
+0000bcd0: 6e5c 6e5c 6e23 2043 6174 6368 2075 7020  n\n\n# Catch up 
+0000bce0: 6279 2072 6563 6569 7669 6e67 2074 6865  by receiving the
+0000bcf0: 206e 6577 2065 7665 6e74 2066 726f 6d20   new event from 
+0000bd00: 7468 6520 7375 6273 6372 6970 7469 6f6e  the subscription
+0000bd10: 2e5c 6e66 6f72 2065 7665 6e74 2069 6e20  .\nfor event in 
+0000bd20: 7375 6273 6372 6970 7469 6f6e 3a5c 6e20  subscription:\n 
+0000bd30: 2020 2072 6563 6569 7665 645f 6576 656e     received_even
+0000bd40: 7473 2e61 7070 656e 6428 6576 656e 7429  ts.append(event)
+0000bd50: 5c6e 2020 2020 6966 2065 7665 6e74 2e69  \n    if event.i
+0000bd60: 6420 3d3d 2065 7665 6e74 362e 6964 3a5c  d == event6.id:\
+0000bd70: 6e20 2020 2020 2020 2062 7265 616b 5c6e  n        break\n
+0000bd80: 5c6e 6173 7365 7274 2072 6563 6569 7665  \nassert receive
+0000bd90: 645f 6576 656e 7473 5b2d 365d 2e69 6420  d_events[-6].id 
+0000bda0: 3d3d 2065 7665 6e74 312e 6964 5c6e 6173  == event1.id\nas
+0000bdb0: 7365 7274 2072 6563 6569 7665 645f 6576  sert received_ev
+0000bdc0: 656e 7473 5b2d 355d 2e69 6420 3d3d 2065  ents[-5].id == e
+0000bdd0: 7665 6e74 322e 6964 5c6e 6173 7365 7274  vent2.id\nassert
+0000bde0: 2072 6563 6569 7665 645f 6576 656e 7473   received_events
+0000bdf0: 5b2d 345d 2e69 6420 3d3d 2065 7665 6e74  [-4].id == event
+0000be00: 332e 6964 5c6e 6173 7365 7274 2072 6563  3.id\nassert rec
+0000be10: 6569 7665 645f 6576 656e 7473 5b2d 335d  eived_events[-3]
+0000be20: 2e69 6420 3d3d 2065 7665 6e74 342e 6964  .id == event4.id
+0000be30: 5c6e 6173 7365 7274 2072 6563 6569 7665  \nassert receive
+0000be40: 645f 6576 656e 7473 5b2d 325d 2e69 6420  d_events[-2].id 
+0000be50: 3d3d 2065 7665 6e74 352e 6964 5c6e 6173  == event5.id\nas
+0000be60: 7365 7274 2072 6563 6569 7665 645f 6576  sert received_ev
+0000be70: 656e 7473 5b2d 315d 2e69 6420 3d3d 2065  ents[-1].id == e
+0000be80: 7665 6e74 362e 6964 5c6e 5c6e 5c6e 2320  vent6.id\n\n\n# 
+0000be90: 4170 7065 6e64 2074 6872 6565 206d 6f72  Append three mor
+0000bea0: 6520 6576 656e 7473 2074 6f20 6120 6e65  e events to a ne
+0000beb0: 7720 7374 7265 616d 2e5c 6e73 7472 6561  w stream.\nstrea
+0000bec0: 6d5f 6e61 6d65 3320 3d20 7374 7228 7575  m_name3 = str(uu
+0000bed0: 6964 3428 2929 5c6e 6576 656e 7437 203d  id4())\nevent7 =
+0000bee0: 204e 6577 4576 656e 7428 7479 7065 3d5c   NewEvent(type=\
+0000bef0: 274f 7264 6572 4372 6561 7465 645c 272c  'OrderCreated\',
+0000bf00: 2064 6174 613d 625c 2764 6174 6137 5c27   data=b\'data7\'
+0000bf10: 295c 6e65 7665 6e74 3820 3d20 4e65 7745  )\nevent8 = NewE
+0000bf20: 7665 6e74 2874 7970 653d 5c27 4f72 6465  vent(type=\'Orde
+0000bf30: 7255 7064 6174 6564 5c27 2c20 6461 7461  rUpdated\', data
+0000bf40: 3d62 5c27 6461 7461 385c 2729 5c6e 6576  =b\'data8\')\nev
+0000bf50: 656e 7439 203d 204e 6577 4576 656e 7428  ent9 = NewEvent(
+0000bf60: 7479 7065 3d5c 274f 7264 6572 4465 6c65  type=\'OrderDele
+0000bf70: 7465 645c 272c 2064 6174 613d 625c 2764  ted\', data=b\'d
+0000bf80: 6174 6139 5c27 295c 6e5c 6e63 6c69 656e  ata9\')\n\nclien
+0000bf90: 742e 6170 7065 6e64 5f65 7665 6e74 7328  t.append_events(
+0000bfa0: 5c6e 2020 2020 7374 7265 616d 5f6e 616d  \n    stream_nam
+0000bfb0: 653d 7374 7265 616d 5f6e 616d 6533 2c5c  e=stream_name3,\
+0000bfc0: 6e20 2020 2065 7870 6563 7465 645f 706f  n    expected_po
+0000bfd0: 7369 7469 6f6e 3d4e 6f6e 652c 5c6e 2020  sition=None,\n  
+0000bfe0: 2020 6576 656e 7473 3d5b 6576 656e 7437    events=[event7
+0000bff0: 2c20 6576 656e 7438 2c20 6576 656e 7439  , event8, event9
+0000c000: 5d2c 5c6e 295c 6e5c 6e23 2052 6563 6569  ],\n)\n\n# Recei
+0000c010: 7665 2074 6865 2074 6872 6565 206e 6577  ve the three new
+0000c020: 2065 7665 6e74 7320 6672 6f6d 2074 6865   events from the
+0000c030: 2072 6573 756d 6564 2073 7562 7363 7269   resumed subscri
+0000c040: 7074 696f 6e2e 5c6e 666f 7220 6576 656e  ption.\nfor even
+0000c050: 7420 696e 2073 7562 7363 7269 7074 696f  t in subscriptio
+0000c060: 6e3a 5c6e 2020 2020 7265 6365 6976 6564  n:\n    received
+0000c070: 5f65 7665 6e74 732e 6170 7065 6e64 2865  _events.append(e
+0000c080: 7665 6e74 295c 6e20 2020 2069 6620 6576  vent)\n    if ev
+0000c090: 656e 742e 6964 203d 3d20 6576 656e 7439  ent.id == event9
+0000c0a0: 2e69 643a 5c6e 2020 2020 2020 2020 6272  .id:\n        br
+0000c0b0: 6561 6b5c 6e5c 6e61 7373 6572 7420 7265  eak\n\nassert re
+0000c0c0: 6365 6976 6564 5f65 7665 6e74 735b 2d39  ceived_events[-9
+0000c0d0: 5d2e 6964 203d 3d20 6576 656e 7431 2e69  ].id == event1.i
+0000c0e0: 645c 6e61 7373 6572 7420 7265 6365 6976  d\nassert receiv
+0000c0f0: 6564 5f65 7665 6e74 735b 2d38 5d2e 6964  ed_events[-8].id
+0000c100: 203d 3d20 6576 656e 7432 2e69 645c 6e61   == event2.id\na
+0000c110: 7373 6572 7420 7265 6365 6976 6564 5f65  ssert received_e
+0000c120: 7665 6e74 735b 2d37 5d2e 6964 203d 3d20  vents[-7].id == 
+0000c130: 6576 656e 7433 2e69 645c 6e61 7373 6572  event3.id\nasser
+0000c140: 7420 7265 6365 6976 6564 5f65 7665 6e74  t received_event
+0000c150: 735b 2d36 5d2e 6964 203d 3d20 6576 656e  s[-6].id == even
+0000c160: 7434 2e69 645c 6e61 7373 6572 7420 7265  t4.id\nassert re
+0000c170: 6365 6976 6564 5f65 7665 6e74 735b 2d35  ceived_events[-5
+0000c180: 5d2e 6964 203d 3d20 6576 656e 7435 2e69  ].id == event5.i
+0000c190: 645c 6e61 7373 6572 7420 7265 6365 6976  d\nassert receiv
+0000c1a0: 6564 5f65 7665 6e74 735b 2d34 5d2e 6964  ed_events[-4].id
+0000c1b0: 203d 3d20 6576 656e 7436 2e69 645c 6e61   == event6.id\na
+0000c1c0: 7373 6572 7420 7265 6365 6976 6564 5f65  ssert received_e
+0000c1d0: 7665 6e74 735b 2d33 5d2e 6964 203d 3d20  vents[-3].id == 
+0000c1e0: 6576 656e 7437 2e69 645c 6e61 7373 6572  event7.id\nasser
+0000c1f0: 7420 7265 6365 6976 6564 5f65 7665 6e74  t received_event
+0000c200: 735b 2d32 5d2e 6964 203d 3d20 6576 656e  s[-2].id == even
+0000c210: 7438 2e69 645c 6e61 7373 6572 7420 7265  t8.id\nassert re
+0000c220: 6365 6976 6564 5f65 7665 6e74 735b 2d31  ceived_events[-1
+0000c230: 5d2e 6964 203d 3d20 6576 656e 7439 2e69  ].id == event9.i
+0000c240: 645c 6e60 6060 5c6e 5c6e 5468 6520 6361  d\n```\n\nThe ca
+0000c250: 7463 682d 7570 2073 7562 7363 7269 7074  tch-up subscript
+0000c260: 696f 6e20 6361 6c6c 2069 7320 656e 6465  ion call is ende
+0000c270: 6420 6173 2073 6f6f 6e20 6173 2074 6865  d as soon as the
+0000c280: 2073 7562 7363 7269 7074 696f 6e20 6f62   subscription ob
+0000c290: 6a65 6374 5c6e 676f 6573 206f 7574 206f  ject\ngoes out o
+0000c2a0: 6620 7363 6f70 6520 6f72 2069 7320 6578  f scope or is ex
+0000c2b0: 706c 6963 6974 6c79 2064 656c 6574 6564  plicitly deleted
+0000c2c0: 2066 726f 6d20 6d65 6d6f 7279 2e5c 6e5c   from memory.\n\
+0000c2d0: 6e60 6060 7079 7468 6f6e 5c6e 2320 456e  n```python\n# En
+0000c2e0: 6420 7468 6520 7375 6273 6372 6970 7469  d the subscripti
+0000c2f0: 6f6e 2e5c 6e64 656c 2073 7562 7363 7269  on.\ndel subscri
+0000c300: 7074 696f 6e5c 6e60 6060 5c6e 5c6e 2323  ption\n```\n\n##
+0000c310: 2320 5375 6273 6372 6962 6520 7374 7265  # Subscribe stre
+0000c320: 616d 2065 7665 6e74 735c 6e5c 6e54 6865  am events\n\nThe
+0000c330: 6073 7562 7363 7269 6265 5f73 7472 6561  `subscribe_strea
+0000c340: 6d5f 6576 656e 7473 2829 6020 6d65 7468  m_events()` meth
+0000c350: 6f64 2063 616e 2062 6520 7573 6564 2074  od can be used t
+0000c360: 6f20 7374 6172 7420 6120 2263 6174 6368  o start a "catch
+0000c370: 2d75 7022 2073 7562 7363 7269 7074 696f  -up" subscriptio
+0000c380: 6e5c 6e74 6861 7420 6361 6e20 7265 7475  n\nthat can retu
+0000c390: 726e 2065 7665 6e74 7320 7468 6174 2061  rn events that a
+0000c3a0: 7265 2072 6563 6f72 6465 6420 696e 2061  re recorded in a
+0000c3b0: 2073 696e 676c 6520 7374 7265 616d 2e5c   single stream.\
+0000c3c0: 6e5c 6e54 6869 7320 6d65 7468 6f64 2074  n\nThis method t
+0000c3d0: 616b 6573 2061 2072 6571 7569 7265 6420  akes a required 
+0000c3e0: 6073 7472 6561 6d5f 6e61 6d65 6020 6172  `stream_name` ar
+0000c3f0: 6775 6d65 6e74 2c20 7768 6963 6820 7370  gument, which sp
+0000c400: 6563 6966 6965 7320 7468 6520 6e61 6d65  ecifies the name
+0000c410: 206f 6620 7468 6520 7374 7265 616d 5c6e   of the stream\n
+0000c420: 6672 6f6d 2077 6869 6368 2072 6563 6f72  from which recor
+0000c430: 6465 6420 6576 656e 7473 2077 696c 6c20  ded events will 
+0000c440: 6265 2072 6563 6569 7665 642e 5c6e 5c6e  be received.\n\n
+0000c450: 5468 6973 206d 6574 686f 6420 616c 736f  This method also
+0000c460: 2074 616b 6573 2074 776f 206f 7074 696f   takes two optio
+0000c470: 6e61 6c20 6172 6775 6d65 6e74 732c 2060  nal arguments, `
+0000c480: 7374 7265 616d 5f70 6f73 6974 696f 6e60  stream_position`
+0000c490: 2c20 616e 6420 6074 696d 656f 7574 602e  , and `timeout`.
+0000c4a0: 5c6e 5c6e 5468 6520 6f70 7469 6f6e 616c  \n\nThe optional
+0000c4b0: 2060 7374 7265 616d 5f70 6f73 6974 696f   `stream_positio
+0000c4c0: 6e60 2061 7267 756d 656e 7420 7370 6563  n` argument spec
+0000c4d0: 6966 6965 7320 6120 706f 7369 7469 6f6e  ifies a position
+0000c4e0: 2069 6e20 7468 6520 7374 7265 616d 2066   in the stream f
+0000c4f0: 726f 6d20 7768 6963 685c 6e72 6563 6f72  rom which\nrecor
+0000c500: 6465 6420 6576 656e 7473 2077 696c 6c20  ded events will 
+0000c510: 6265 2072 6563 6569 7665 642e 2054 6865  be received. The
+0000c520: 2065 7665 6e74 2061 7420 7468 6520 7370   event at the sp
+0000c530: 6563 6966 6965 6420 7374 7265 616d 2070  ecified stream p
+0000c540: 6f73 6974 696f 6e20 7769 6c6c 206e 6f74  osition will not
+0000c550: 5c6e 6265 2069 6e63 6c75 6465 642e 5c6e  \nbe included.\n
+0000c560: 5c6e 5468 6520 6f70 7469 6f6e 616c 2060  \nThe optional `
+0000c570: 7469 6d65 6f75 7460 2061 7267 756d 656e  timeout` argumen
+0000c580: 7420 6973 2061 2050 7974 686f 6e20 6066  t is a Python `f
+0000c590: 6c6f 6174 6020 7468 6174 2073 6574 735c  loat` that sets\
+0000c5a0: 6e61 2064 6561 646c 696e 6520 666f 7220  na deadline for 
+0000c5b0: 7468 6520 636f 6d70 6c65 7469 6f6e 206f  the completion o
+0000c5c0: 6620 7468 6520 6752 5043 206f 7065 7261  f the gRPC opera
+0000c5d0: 7469 6f6e 2e5c 6e5c 6e54 6865 2065 7861  tion.\n\nThe exa
+0000c5e0: 6d70 6c65 2062 656c 6f77 2073 686f 7773  mple below shows
+0000c5f0: 2068 6f77 2074 6f20 7374 6172 7420 6120   how to start a 
+0000c600: 6361 7463 682d 7570 2073 7562 7363 7269  catch-up subscri
+0000c610: 7074 696f 6e20 746f 2061 2073 7472 6561  ption to a strea
+0000c620: 6d2e 5c6e 5c6e 6060 6070 7974 686f 6e5c  m.\n\n```python\
+0000c630: 6e5c 6e23 2053 7562 7363 7269 6265 2074  n\n# Subscribe t
+0000c640: 6f20 6576 656e 7473 2066 726f 6d20 7374  o events from st
+0000c650: 7265 616d 322c 2066 726f 6d20 7468 6520  ream2, from the 
+0000c660: 7374 6172 742e 5c6e 7375 6273 6372 6970  start.\nsubscrip
+0000c670: 7469 6f6e 203d 2063 6c69 656e 742e 7375  tion = client.su
+0000c680: 6273 6372 6962 655f 7374 7265 616d 5f65  bscribe_stream_e
+0000c690: 7665 6e74 7328 7374 7265 616d 5f6e 616d  vents(stream_nam
+0000c6a0: 653d 7374 7265 616d 5f6e 616d 6532 295c  e=stream_name2)\
+0000c6b0: 6e5c 6e23 2052 6561 6420 6672 6f6d 2074  n\n# Read from t
+0000c6c0: 6865 2073 7562 7363 7269 7074 696f 6e2e  he subscription.
+0000c6d0: 5c6e 6576 656e 7473 203d 205b 5d5c 6e66  \nevents = []\nf
+0000c6e0: 6f72 2065 7665 6e74 2069 6e20 7375 6273  or event in subs
+0000c6f0: 6372 6970 7469 6f6e 3a5c 6e20 2020 2065  cription:\n    e
+0000c700: 7665 6e74 732e 6170 7065 6e64 2865 7665  vents.append(eve
+0000c710: 6e74 295c 6e20 2020 2069 6620 6576 656e  nt)\n    if even
+0000c720: 742e 6964 203d 3d20 6576 656e 7436 2e69  t.id == event6.i
+0000c730: 643a 5c6e 2020 2020 2020 2020 6272 6561  d:\n        brea
+0000c740: 6b5c 6e5c 6e23 2043 6865 636b 2077 6520  k\n\n# Check we 
+0000c750: 676f 7420 6576 656e 7473 206f 6e6c 7920  got events only 
+0000c760: 6672 6f6d 2073 7472 6561 6d32 2e5c 6e61  from stream2.\na
+0000c770: 7373 6572 7420 6c65 6e28 6576 656e 7473  ssert len(events
+0000c780: 2920 3d3d 2033 5c6e 6576 656e 7473 5b30  ) == 3\nevents[0
+0000c790: 5d2e 7374 7265 616d 5f6e 616d 6520 3d3d  ].stream_name ==
+0000c7a0: 2073 7472 6561 6d5f 6e61 6d65 325c 6e65   stream_name2\ne
+0000c7b0: 7665 6e74 735b 315d 2e73 7472 6561 6d5f  vents[1].stream_
+0000c7c0: 6e61 6d65 203d 3d20 7374 7265 616d 5f6e  name == stream_n
+0000c7d0: 616d 6532 5c6e 6576 656e 7473 5b32 5d2e  ame2\nevents[2].
+0000c7e0: 7374 7265 616d 5f6e 616d 6520 3d3d 2073  stream_name == s
+0000c7f0: 7472 6561 6d5f 6e61 6d65 325c 6e5c 6e23  tream_name2\n\n#
+0000c800: 2041 7070 656e 6420 616e 6f74 6865 7220   Append another 
+0000c810: 6576 656e 7420 746f 2073 7472 6561 6d33  event to stream3
+0000c820: 2e5c 6e65 7665 6e74 3130 203d 204e 6577  .\nevent10 = New
+0000c830: 4576 656e 7428 7479 7065 3d22 4f72 6465  Event(type="Orde
+0000c840: 7255 6e64 656c 6574 6564 222c 2064 6174  rUndeleted", dat
+0000c850: 613d 625c 2764 6174 6131 305c 2729 5c6e  a=b\'data10\')\n
+0000c860: 636c 6965 6e74 2e61 7070 656e 645f 6576  client.append_ev
+0000c870: 656e 7473 285c 6e20 2020 2073 7472 6561  ents(\n    strea
+0000c880: 6d5f 6e61 6d65 3d73 7472 6561 6d5f 6e61  m_name=stream_na
+0000c890: 6d65 332c 5c6e 2020 2020 6578 7065 6374  me3,\n    expect
+0000c8a0: 6564 5f70 6f73 6974 696f 6e3d 322c 5c6e  ed_position=2,\n
+0000c8b0: 2020 2020 6576 656e 7473 3d5b 6576 656e      events=[even
+0000c8c0: 7431 305d 2c5c 6e29 5c6e 5c6e 2320 4170  t10],\n)\n\n# Ap
+0000c8d0: 7065 6e64 2061 6e6f 7468 6572 2065 7665  pend another eve
+0000c8e0: 6e74 2074 6f20 7374 7265 616d 322e 5c6e  nt to stream2.\n
+0000c8f0: 6576 656e 7431 3120 3d20 4e65 7745 7665  event11 = NewEve
+0000c900: 6e74 2874 7970 653d 224f 7264 6572 556e  nt(type="OrderUn
+0000c910: 6465 6c65 7465 6422 2c20 6461 7461 3d62  deleted", data=b
+0000c920: 5c27 6461 7461 3131 5c27 295c 6e63 6c69  \'data11\')\ncli
+0000c930: 656e 742e 6170 7065 6e64 5f65 7665 6e74  ent.append_event
+0000c940: 7328 5c6e 2020 2020 7374 7265 616d 5f6e  s(\n    stream_n
+0000c950: 616d 653d 7374 7265 616d 5f6e 616d 6532  ame=stream_name2
+0000c960: 2c5c 6e20 2020 2065 7870 6563 7465 645f  ,\n    expected_
+0000c970: 706f 7369 7469 6f6e 3d32 2c5c 6e20 2020  position=2,\n   
+0000c980: 2065 7665 6e74 733d 5b65 7665 6e74 3131   events=[event11
+0000c990: 5d5c 6e29 5c6e 5c6e 2320 436f 6e74 696e  ]\n)\n\n# Contin
+0000c9a0: 7565 2072 6561 6469 6e67 2066 726f 6d20  ue reading from 
+0000c9b0: 7468 6520 7375 6273 6372 6970 7469 6f6e  the subscription
+0000c9c0: 2e5c 6e66 6f72 2065 7665 6e74 2069 6e20  .\nfor event in 
+0000c9d0: 7375 6273 6372 6970 7469 6f6e 3a5c 6e20  subscription:\n 
+0000c9e0: 2020 2065 7665 6e74 732e 6170 7065 6e64     events.append
+0000c9f0: 2865 7665 6e74 295c 6e20 2020 2069 6620  (event)\n    if 
+0000ca00: 6576 656e 742e 6964 203d 3d20 6576 656e  event.id == even
+0000ca10: 7431 312e 6964 3a5c 6e20 2020 2020 2020  t11.id:\n       
+0000ca20: 2062 7265 616b 5c6e 5c6e 2320 4368 6563   break\n\n# Chec
+0000ca30: 6b20 7765 2067 6f74 2065 7665 6e74 7320  k we got events 
+0000ca40: 6f6e 6c79 2066 726f 6d20 7374 7265 616d  only from stream
+0000ca50: 322e 5c6e 6173 7365 7274 206c 656e 2865  2.\nassert len(e
+0000ca60: 7665 6e74 7329 203d 3d20 345c 6e65 7665  vents) == 4\neve
+0000ca70: 6e74 735b 305d 2e73 7472 6561 6d5f 6e61  nts[0].stream_na
+0000ca80: 6d65 203d 3d20 7374 7265 616d 5f6e 616d  me == stream_nam
+0000ca90: 6532 5c6e 6576 656e 7473 5b31 5d2e 7374  e2\nevents[1].st
+0000caa0: 7265 616d 5f6e 616d 6520 3d3d 2073 7472  ream_name == str
+0000cab0: 6561 6d5f 6e61 6d65 325c 6e65 7665 6e74  eam_name2\nevent
+0000cac0: 735b 325d 2e73 7472 6561 6d5f 6e61 6d65  s[2].stream_name
+0000cad0: 203d 3d20 7374 7265 616d 5f6e 616d 6532   == stream_name2
+0000cae0: 5c6e 6576 656e 7473 5b33 5d2e 7374 7265  \nevents[3].stre
+0000caf0: 616d 5f6e 616d 6520 3d3d 2073 7472 6561  am_name == strea
+0000cb00: 6d5f 6e61 6d65 325c 6e60 6060 5c6e 5c6e  m_name2\n```\n\n
+0000cb10: 5468 6520 6578 616d 706c 6520 6265 6c6f  The example belo
+0000cb20: 7720 7368 6f77 7320 686f 7720 746f 2073  w shows how to s
+0000cb30: 7461 7274 2061 2063 6174 6368 2d75 7020  tart a catch-up 
+0000cb40: 7375 6273 6372 6970 7469 6f6e 2074 6f20  subscription to 
+0000cb50: 6120 7374 7265 616d 2066 726f 6d20 615c  a stream from a\
+0000cb60: 6e73 7065 6369 6669 6320 7374 7265 616d  nspecific stream
+0000cb70: 2070 6f73 6974 696f 6e2e 5c6e 5c6e 6060   position.\n\n``
+0000cb80: 6070 7974 686f 6e5c 6e5c 6e23 2053 7562  `python\n\n# Sub
+0000cb90: 7363 7269 6265 2074 6f20 6576 656e 7473  scribe to events
+0000cba0: 2066 726f 6d20 7374 7265 616d 322c 2066   from stream2, f
+0000cbb0: 726f 6d20 7468 6520 7374 6172 742e 5c6e  rom the start.\n
+0000cbc0: 7375 6273 6372 6970 7469 6f6e 203d 2063  subscription = c
+0000cbd0: 6c69 656e 742e 7375 6273 6372 6962 655f  lient.subscribe_
+0000cbe0: 7374 7265 616d 5f65 7665 6e74 7328 5c6e  stream_events(\n
+0000cbf0: 2020 2020 7374 7265 616d 5f6e 616d 653d      stream_name=
+0000cc00: 7374 7265 616d 5f6e 616d 6532 2c5c 6e20  stream_name2,\n 
+0000cc10: 2020 2073 7472 6561 6d5f 706f 7369 7469     stream_positi
+0000cc20: 6f6e 3d31 2c5c 6e29 5c6e 5c6e 2320 5265  on=1,\n)\n\n# Re
+0000cc30: 6164 2065 7665 6e74 2066 726f 6d20 7468  ad event from th
+0000cc40: 6520 7375 6273 6372 6970 7469 6f6e 2e5c  e subscription.\
+0000cc50: 6e65 7665 6e74 7320 3d20 5b5d 5c6e 666f  nevents = []\nfo
+0000cc60: 7220 6576 656e 7420 696e 2073 7562 7363  r event in subsc
+0000cc70: 7269 7074 696f 6e3a 5c6e 2020 2020 6576  ription:\n    ev
+0000cc80: 656e 7473 2e61 7070 656e 6428 6576 656e  ents.append(even
+0000cc90: 7429 5c6e 2020 2020 6966 2065 7665 6e74  t)\n    if event
+0000cca0: 2e69 6420 3d3d 2065 7665 6e74 3131 2e69  .id == event11.i
+0000ccb0: 643a 5c6e 2020 2020 2020 2020 6272 6561  d:\n        brea
+0000ccc0: 6b5c 6e5c 6e23 2043 6865 636b 2077 6520  k\n\n# Check we 
+0000ccd0: 676f 7420 6576 656e 7473 206f 6e6c 7920  got events only 
+0000cce0: 6166 7465 7220 706f 7369 7469 6f6e 2031  after position 1
+0000ccf0: 2e5c 6e61 7373 6572 7420 6c65 6e28 6576  .\nassert len(ev
+0000cd00: 656e 7473 2920 3d3d 2032 5c6e 6576 656e  ents) == 2\neven
+0000cd10: 7473 5b30 5d2e 6964 203d 3d20 6576 656e  ts[0].id == even
+0000cd20: 7436 2e69 645c 6e65 7665 6e74 735b 305d  t6.id\nevents[0]
+0000cd30: 2e73 7472 6561 6d5f 706f 7369 7469 6f6e  .stream_position
+0000cd40: 203d 3d20 325c 6e65 7665 6e74 735b 305d   == 2\nevents[0]
+0000cd50: 2e73 7472 6561 6d5f 6e61 6d65 203d 3d20  .stream_name == 
+0000cd60: 7374 7265 616d 5f6e 616d 6532 5c6e 6576  stream_name2\nev
+0000cd70: 656e 7473 5b31 5d2e 6964 203d 3d20 6576  ents[1].id == ev
+0000cd80: 656e 7431 312e 6964 5c6e 6576 656e 7473  ent11.id\nevents
+0000cd90: 5b31 5d2e 7374 7265 616d 5f70 6f73 6974  [1].stream_posit
+0000cda0: 696f 6e20 3d3d 2033 5c6e 6576 656e 7473  ion == 3\nevents
+0000cdb0: 5b31 5d2e 7374 7265 616d 5f6e 616d 6520  [1].stream_name 
+0000cdc0: 3d3d 2073 7472 6561 6d5f 6e61 6d65 325c  == stream_name2\
+0000cdd0: 6e60 6060 5c6e 5c6e 2323 2050 6572 7369  n```\n\n## Persi
+0000cde0: 7374 656e 7420 7375 6273 6372 6970 7469  stent subscripti
+0000cdf0: 6f6e 735c 6e5c 6e23 2323 2043 7265 6174  ons\n\n### Creat
+0000ce00: 6520 7375 6273 6372 6970 7469 6f6e 5c6e  e subscription\n
+0000ce10: 5c6e 2a72 6571 7569 7265 7320 6c65 6164  \n*requires lead
+0000ce20: 6572 2a5c 6e5c 6e54 6865 206d 6574 686f  er*\n\nThe metho
+0000ce30: 6420 6063 7265 6174 655f 7375 6273 6372  d `create_subscr
+0000ce40: 6970 7469 6f6e 2829 6020 6361 6e20 6265  iption()` can be
+0000ce50: 2075 7365 6420 746f 2063 7265 6174 6520   used to create 
+0000ce60: 615c 6e22 7065 7273 6973 7465 6e74 2073  a\n"persistent s
+0000ce70: 7562 7363 7269 7074 696f 6e22 2074 6f20  ubscription" to 
+0000ce80: 4576 656e 7453 746f 7265 4442 2e5c 6e5c  EventStoreDB.\n\
+0000ce90: 6e54 6869 7320 6d65 7468 6f64 2074 616b  nThis method tak
+0000cea0: 6573 2061 2072 6571 7569 7265 6420 6067  es a required `g
+0000ceb0: 726f 7570 5f6e 616d 6560 2061 7267 756d  roup_name` argum
+0000cec0: 656e 742c 2077 6869 6368 2069 7320 7468  ent, which is th
+0000ced0: 655c 6e6e 616d 6520 6f66 2061 2022 6772  e\nname of a "gr
+0000cee0: 6f75 7022 206f 6620 636f 6e73 756d 6572  oup" of consumer
+0000cef0: 7320 6f66 2074 6865 2073 7562 7363 7269  s of the subscri
+0000cf00: 7074 696f 6e2e 5c6e 5c6e 5468 6973 206d  ption.\n\nThis m
+0000cf10: 6574 686f 6420 616c 736f 2074 616b 6573  ethod also takes
+0000cf20: 2073 6576 656e 206f 7074 696f 6e61 6c20   seven optional 
+0000cf30: 6172 6775 6d65 6e74 732c 2060 6672 6f6d  arguments, `from
+0000cf40: 5f65 6e64 602c 2060 636f 6d6d 6974 5f70  _end`, `commit_p
+0000cf50: 6f73 6974 696f 6e60 2c5c 6e60 6669 6c74  osition`,\n`filt
+0000cf60: 6572 5f65 7863 6c75 6465 602c 2060 6669  er_exclude`, `fi
+0000cf70: 6c74 6572 5f69 6e63 6c75 6465 602c 2060  lter_include`, `
+0000cf80: 6669 6c74 6572 5f62 795f 7374 7265 616d  filter_by_stream
+0000cf90: 5f6e 616d 6560 2c20 6063 6f6e 7375 6d65  _name`, `consume
+0000cfa0: 725f 7374 7261 7465 6779 602c 5c6e 616e  r_strategy`,\nan
+0000cfb0: 6420 6074 696d 656f 7574 602e 5c6e 5c6e  d `timeout`.\n\n
+0000cfc0: 5468 6520 6f70 7469 6f6e 616c 2060 6672  The optional `fr
+0000cfd0: 6f6d 5f65 6e64 6020 6172 6775 6d65 6e74  om_end` argument
+0000cfe0: 2063 616e 2062 6520 7573 6564 2074 6f20   can be used to 
+0000cff0: 7370 6563 6966 7920 7468 6174 2074 6865  specify that the
+0000d000: 2067 726f 7570 206f 6620 636f 6e73 756d   group of consum
+0000d010: 6572 735c 6e6f 6620 7468 6520 7375 6273  ers\nof the subs
+0000d020: 6372 6970 7469 6f6e 2073 686f 756c 6420  cription should 
+0000d030: 6f6e 6c79 2072 6563 6569 7665 2065 7665  only receive eve
+0000d040: 6e74 7320 7468 6174 2077 6572 6520 7265  nts that were re
+0000d050: 636f 7264 6564 2061 6674 6572 2074 6865  corded after the
+0000d060: 2073 7562 7363 7269 7074 696f 6e5c 6e77   subscription\nw
+0000d070: 6173 2063 7265 6174 6564 2e5c 6e5c 6e41  as created.\n\nA
+0000d080: 6c74 6572 6e61 7469 7665 6c79 2c20 7468  lternatively, th
+0000d090: 6520 6f70 7469 6f6e 616c 2060 636f 6d6d  e optional `comm
+0000d0a0: 6974 5f70 6f73 6974 696f 6e60 2061 7267  it_position` arg
+0000d0b0: 756d 656e 7420 6361 6e20 6265 2075 7365  ument can be use
+0000d0c0: 6420 746f 2073 7065 6369 6679 2061 2063  d to specify a c
+0000d0d0: 6f6d 6d69 745c 6e70 6f73 6974 696f 6e20  ommit\nposition 
+0000d0e0: 6672 6f6d 2077 6869 6368 2063 6f6d 6d69  from which commi
+0000d0f0: 7420 706f 7369 7469 6f6e 2074 6865 2067  t position the g
+0000d100: 726f 7570 206f 6620 636f 6e73 756d 6572  roup of consumer
+0000d110: 7320 6f66 2074 6865 2073 7562 7363 7269  s of the subscri
+0000d120: 7074 696f 6e20 7368 6f75 6c64 5c6e 7265  ption should\nre
+0000d130: 6365 6976 6520 6576 656e 7473 2e20 506c  ceive events. Pl
+0000d140: 6561 7365 206e 6f74 652c 2074 6865 2072  ease note, the r
+0000d150: 6563 6f72 6465 6420 6576 656e 7420 6174  ecorded event at
+0000d160: 2074 6865 2073 7065 6369 6669 6564 2063   the specified c
+0000d170: 6f6d 6d69 7420 706f 7369 7469 6f6e 206d  ommit position m
+0000d180: 6967 6874 5c6e 6265 2069 6e63 6c75 6465  ight\nbe include
+0000d190: 6420 696e 2074 6865 2072 6563 6f72 6465  d in the recorde
+0000d1a0: 6420 6576 656e 7473 2072 6563 6569 7665  d events receive
+0000d1b0: 6420 6279 2074 6865 2067 726f 7570 206f  d by the group o
+0000d1c0: 6620 636f 6e73 756d 6572 732e 5c6e 5c6e  f consumers.\n\n
+0000d1d0: 4966 206e 6569 7468 6572 2060 6672 6f6d  If neither `from
+0000d1e0: 5f65 6e64 6020 6f72 2060 636f 6d6d 6974  _end` or `commit
+0000d1f0: 5f70 6f73 6974 696f 6e60 2061 7265 2073  _position` are s
+0000d200: 7065 6369 6669 6564 2c20 7468 6520 6772  pecified, the gr
+0000d210: 6f75 7020 6f66 2063 6f6e 7375 6d65 7273  oup of consumers
+0000d220: 5c6e 6f66 2074 6865 2073 7562 7363 7269  \nof the subscri
+0000d230: 7074 696f 6e20 7769 6c6c 2070 6f74 656e  ption will poten
+0000d240: 7469 616c 6c79 2072 6563 6569 7665 2061  tially receive a
+0000d250: 6c6c 2072 6563 6f72 6465 6420 6576 656e  ll recorded even
+0000d260: 7473 2069 6e20 7468 6520 6461 7461 6261  ts in the databa
+0000d270: 7365 2e5c 6e5c 6e54 6865 206f 7074 696f  se.\n\nThe optio
+0000d280: 6e61 6c20 6066 696c 7465 725f 6578 636c  nal `filter_excl
+0000d290: 7564 6560 2061 7267 756d 656e 7420 6973  ude` argument is
+0000d2a0: 2061 2073 6571 7565 6e63 6520 6f66 2072   a sequence of r
+0000d2b0: 6567 756c 6172 2065 7870 7265 7373 696f  egular expressio
+0000d2c0: 6e73 2074 6861 745c 6e6d 6174 6368 2072  ns that\nmatch r
+0000d2d0: 6563 6f72 6465 6420 6576 656e 7473 2074  ecorded events t
+0000d2e0: 6861 7420 7368 6f75 6c64 206e 6f74 2062  hat should not b
+0000d2f0: 6520 696e 636c 7564 6564 2e20 5468 6973  e included. This
+0000d300: 2061 7267 756d 656e 7420 6973 2069 676e   argument is ign
+0000d310: 6f72 6564 5c6e 6966 2060 6669 6c74 6572  ored\nif `filter
+0000d320: 5f69 6e63 6c75 6465 6020 6973 2073 6574  _include` is set
+0000d330: 2074 6f20 6120 6e6f 6e2d 656d 7074 7920   to a non-empty 
+0000d340: 7365 7175 656e 6365 2e20 4279 2064 6566  sequence. By def
+0000d350: 6175 6c74 2c20 7468 6973 2061 7267 756d  ault, this argum
+0000d360: 656e 7420 6973 2073 6574 5c6e 746f 206d  ent is set\nto m
+0000d370: 6174 6368 2074 6865 2065 7665 6e74 2074  atch the event t
+0000d380: 7970 6573 206f 6620 2273 7973 7465 6d20  ypes of "system 
+0000d390: 6576 656e 7473 222c 2073 6f20 7468 6174  events", so that
+0000d3a0: 2045 7665 6e74 5374 6f72 6544 4220 7379   EventStoreDB sy
+0000d3b0: 7374 656d 2065 7665 6e74 735c 6e77 696c  stem events\nwil
+0000d3c0: 6c20 6e6f 7420 6e6f 726d 616c 6c79 2062  l not normally b
+0000d3d0: 6520 7265 6365 6976 6564 2e20 5365 6520  e received. See 
+0000d3e0: 7468 6520 4e6f 7465 7320 7365 6374 696f  the Notes sectio
+0000d3f0: 6e20 6265 6c6f 7720 666f 7220 6d6f 7265  n below for more
+0000d400: 2069 6e66 6f72 6d61 7469 6f6e 5c6e 6162   information\nab
+0000d410: 6f75 7420 6669 6c74 6572 2065 7870 7265  out filter expre
+0000d420: 7373 696f 6e73 2e5c 6e5c 6e54 6865 206f  ssions.\n\nThe o
+0000d430: 7074 696f 6e61 6c20 6066 696c 7465 725f  ptional `filter_
+0000d440: 696e 636c 7564 6560 2061 7267 756d 656e  include` argumen
+0000d450: 7420 6973 2061 2073 6571 7565 6e63 6520  t is a sequence 
+0000d460: 6f66 2072 6567 756c 6172 2065 7870 7265  of regular expre
+0000d470: 7373 696f 6e73 5c6e 7468 6174 206d 6174  ssions\nthat mat
+0000d480: 6368 2072 6563 6f72 6465 6420 6576 656e  ch recorded even
+0000d490: 7473 2074 6861 7420 7368 6f75 6c64 2062  ts that should b
+0000d4a0: 6520 7265 6365 6976 6564 2e20 4279 2064  e received. By d
+0000d4b0: 6566 6175 6c74 2c20 7468 6973 2061 7267  efault, this arg
+0000d4c0: 756d 656e 745c 6e69 7320 616e 2065 6d70  ument\nis an emp
+0000d4d0: 7479 2074 7570 6c65 2e20 4966 2074 6869  ty tuple. If thi
+0000d4e0: 7320 6172 6775 6d65 6e74 2069 7320 7365  s argument is se
+0000d4f0: 7420 746f 2061 206e 6f6e 2d65 6d70 7479  t to a non-empty
+0000d500: 2073 6571 7565 6e63 652c 2074 6865 5c6e   sequence, the\n
+0000d510: 6066 696c 7465 725f 6578 636c 7564 6560  `filter_exclude`
+0000d520: 2061 7267 756d 656e 7420 6973 2069 676e   argument is ign
+0000d530: 6f72 6564 2e5c 6e5c 6e54 6865 206f 7074  ored.\n\nThe opt
+0000d540: 696f 6e61 6c20 6066 696c 7465 725f 6279  ional `filter_by
+0000d550: 5f73 7472 6561 6d5f 6e61 6d65 6020 6172  _stream_name` ar
+0000d560: 6775 6d65 6e74 2069 7320 6120 626f 6f6c  gument is a bool
+0000d570: 6561 6e20 7661 6c75 6520 7468 6174 2069  ean value that i
+0000d580: 6e64 6963 6174 6573 2077 6865 7468 6572  ndicates whether
+0000d590: 5c6e 7468 6520 6669 6c74 6572 2077 696c  \nthe filter wil
+0000d5a0: 6c20 6170 706c 7920 746f 2065 7665 6e74  l apply to event
+0000d5b0: 2074 7970 6573 206f 7220 7374 7265 616d   types or stream
+0000d5c0: 206e 616d 6573 2e20 4279 2064 6566 6175   names. By defau
+0000d5d0: 6c74 2c20 7468 6973 2076 616c 7565 2069  lt, this value i
+0000d5e0: 7320 6046 616c 7365 605c 6e61 6e64 2073  s `False`\nand s
+0000d5f0: 6f20 7468 6520 6669 6c74 6572 696e 6720  o the filtering 
+0000d600: 7769 6c6c 2061 7070 6c79 2074 6f20 7468  will apply to th
+0000d610: 6520 6576 656e 7420 7479 7065 2073 7472  e event type str
+0000d620: 696e 6773 206f 6620 7265 636f 7264 6564  ings of recorded
+0000d630: 2065 7665 6e74 732e 5c6e 5c6e 5468 6520   events.\n\nThe 
+0000d640: 6f70 7469 6f6e 616c 2060 636f 6e73 756d  optional `consum
+0000d650: 6572 5f73 7472 6174 6567 7960 2061 7267  er_strategy` arg
+0000d660: 756d 656e 7420 6973 2061 2050 7974 686f  ument is a Pytho
+0000d670: 6e20 6073 7472 6020 7468 6174 2064 6566  n `str` that def
+0000d680: 696e 6573 5c6e 7468 6520 636f 6e73 756d  ines\nthe consum
+0000d690: 6572 2073 7472 6174 6567 7920 666f 7220  er strategy for 
+0000d6a0: 7468 6973 2070 6572 7369 7374 656e 7420  this persistent 
+0000d6b0: 7375 6273 6372 6970 7469 6f6e 2e20 5468  subscription. Th
+0000d6c0: 6520 7661 6c75 6520 6f66 2074 6869 7320  e value of this 
+0000d6d0: 6172 6775 6d65 6e74 5c6e 6361 6e20 6265  argument\ncan be
+0000d6e0: 2060 5c27 4469 7370 6174 6368 546f 5369   `\'DispatchToSi
+0000d6f0: 6e67 6c65 5c27 602c 2060 5c27 526f 756e  ngle\'`, `\'Roun
+0000d700: 6452 6f62 696e 5c27 602c 2060 5c27 5069  dRobin\'`, `\'Pi
+0000d710: 6e6e 6564 5c27 602c 206f 7220 605c 2750  nned\'`, or `\'P
+0000d720: 696e 6e65 6442 7943 6f72 7265 6c61 7469  innedByCorrelati
+0000d730: 6f6e 5c27 602e 2054 6865 5c6e 6465 6661  on\'`. The\ndefa
+0000d740: 756c 7420 7661 6c75 6520 6973 2060 5c27  ult value is `\'
+0000d750: 4469 7370 6174 6368 546f 5369 6e67 6c65  DispatchToSingle
+0000d760: 5c27 602e 5c6e 5c6e 5468 6520 6f70 7469  \'`.\n\nThe opti
+0000d770: 6f6e 616c 2060 7469 6d65 6f75 7460 2061  onal `timeout` a
+0000d780: 7267 756d 656e 7420 6973 2061 2050 7974  rgument is a Pyt
+0000d790: 686f 6e20 6066 6c6f 6174 6020 7768 6963  hon `float` whic
+0000d7a0: 6820 7365 7473 2061 5c6e 6465 6164 6c69  h sets a\ndeadli
+0000d7b0: 6e65 2066 6f72 2074 6865 2063 6f6d 706c  ne for the compl
+0000d7c0: 6574 696f 6e20 6f66 2074 6865 2067 5250  etion of the gRP
+0000d7d0: 4320 6f70 6572 6174 696f 6e2e 5c6e 5c6e  C operation.\n\n
+0000d7e0: 5468 6520 6d65 7468 6f64 2060 6372 6561  The method `crea
+0000d7f0: 7465 5f73 7562 7363 7269 7074 696f 6e28  te_subscription(
+0000d800: 2960 2064 6f65 7320 6e6f 7420 7265 7475  )` does not retu
+0000d810: 726e 2061 2076 616c 7565 2c20 6265 6361  rn a value, beca
+0000d820: 7573 655c 6e72 6563 6f72 6465 6420 6576  use\nrecorded ev
+0000d830: 656e 7473 2061 7265 206f 6274 6169 6e65  ents are obtaine
+0000d840: 6420 6279 2074 6865 2067 726f 7570 206f  d by the group o
+0000d850: 6620 636f 6e73 756d 6572 7320 6f66 2074  f consumers of t
+0000d860: 6865 2073 7562 7363 7269 7074 696f 6e5c  he subscription\
+0000d870: 6e75 7369 6e67 2074 6865 2060 7265 6164  nusing the `read
+0000d880: 5f73 7562 7363 7269 7074 696f 6e28 2960  _subscription()`
+0000d890: 206d 6574 686f 642e 5c6e 5c6e 496e 2074   method.\n\nIn t
+0000d8a0: 6865 2065 7861 6d70 6c65 2062 656c 6f77  he example below
+0000d8b0: 2c20 6120 7065 7273 6973 7465 6e74 2073  , a persistent s
+0000d8c0: 7562 7363 7269 7074 696f 6e20 6973 2063  ubscription is c
+0000d8d0: 7265 6174 6564 2e5c 6e5c 6e60 6060 7079  reated.\n\n```py
+0000d8e0: 7468 6f6e 5c6e 2320 4372 6561 7465 2061  thon\n# Create a
+0000d8f0: 2070 6572 7369 7374 656e 7420 7375 6273   persistent subs
+0000d900: 6372 6970 7469 6f6e 2e5c 6e67 726f 7570  cription.\ngroup
+0000d910: 5f6e 616d 6520 3d20 6622 6772 6f75 702d  _name = f"group-
+0000d920: 7b75 7569 6434 2829 7d22 5c6e 636c 6965  {uuid4()}"\nclie
+0000d930: 6e74 2e63 7265 6174 655f 7375 6273 6372  nt.create_subscr
+0000d940: 6970 7469 6f6e 2867 726f 7570 5f6e 616d  iption(group_nam
+0000d950: 653d 6772 6f75 705f 6e61 6d65 295c 6e60  e=group_name)\n`
+0000d960: 6060 5c6e 5c6e 2323 2320 5265 6164 2073  ``\n\n### Read s
+0000d970: 7562 7363 7269 7074 696f 6e5c 6e5c 6e2a  ubscription\n\n*
+0000d980: 7265 7175 6972 6573 206c 6561 6465 722a  requires leader*
+0000d990: 5c6e 5c6e 5468 6520 6d65 7468 6f64 2060  \n\nThe method `
+0000d9a0: 7265 6164 5f73 7562 7363 7269 7074 696f  read_subscriptio
+0000d9b0: 6e28 2960 2063 616e 2062 6520 7573 6564  n()` can be used
+0000d9c0: 2062 7920 6120 6772 6f75 7020 6f66 2063   by a group of c
+0000d9d0: 6f6e 7375 6d65 7273 2074 6f20 7265 6365  onsumers to rece
+0000d9e0: 6976 655c 6e72 6563 6f72 6465 6420 6576  ive\nrecorded ev
+0000d9f0: 656e 7473 2066 726f 6d20 6120 7065 7273  ents from a pers
+0000da00: 6973 7465 6e74 2073 7562 7363 7269 7074  istent subscript
+0000da10: 696f 6e20 6372 6561 7465 6420 7573 696e  ion created usin
+0000da20: 6720 6063 7265 6174 655f 7375 6273 6372  g `create_subscr
+0000da30: 6970 7469 6f6e 602e 5c6e 5c6e 5468 6973  iption`.\n\nThis
+0000da40: 206d 6574 686f 6420 7461 6b65 7320 6120   method takes a 
+0000da50: 7265 7175 6972 6564 2060 6772 6f75 705f  required `group_
+0000da60: 6e61 6d65 6020 6172 6775 6d65 6e74 2c20  name` argument, 
+0000da70: 7768 6963 6820 6973 5c6e 7468 6520 6e61  which is\nthe na
+0000da80: 6d65 206f 6620 6120 2267 726f 7570 2220  me of a "group" 
+0000da90: 6f66 2063 6f6e 7375 6d65 7273 206f 6620  of consumers of 
+0000daa0: 7468 6520 7375 6273 6372 6970 7469 6f6e  the subscription
+0000dab0: 2073 7065 6369 6669 6564 5c6e 7768 656e   specified\nwhen
+0000dac0: 2060 6372 6561 7465 5f73 7562 7363 7269   `create_subscri
+0000dad0: 7074 696f 6e28 2960 2077 6173 2063 616c  ption()` was cal
+0000dae0: 6c65 642e 5c6e 5c6e 5468 6973 206d 6574  led.\n\nThis met
+0000daf0: 686f 6420 616c 736f 2074 616b 6573 2061  hod also takes a
+0000db00: 6e20 6f70 7469 6f6e 616c 2060 7469 6d65  n optional `time
+0000db10: 6f75 7460 2061 7267 756d 656e 742c 2074  out` argument, t
+0000db20: 6861 745c 6e69 7320 6578 7065 6374 6564  hat\nis expected
+0000db30: 2074 6f20 6265 2061 2050 7974 686f 6e20   to be a Python 
+0000db40: 6066 6c6f 6174 602c 2077 6869 6368 2073  `float`, which s
+0000db50: 6574 7320 6120 6465 6164 6c69 6e65 5c6e  ets a deadline\n
+0000db60: 666f 7220 7468 6520 636f 6d70 6c65 7469  for the completi
+0000db70: 6f6e 206f 6620 7468 6520 6752 5043 206f  on of the gRPC o
+0000db80: 7065 7261 7469 6f6e 2e5c 6e5c 6e54 6869  peration.\n\nThi
+0000db90: 7320 6d65 7468 6f64 2072 6574 7572 6e73  s method returns
+0000dba0: 2061 2032 2d74 7570 6c65 3a20 6120 2272   a 2-tuple: a "r
+0000dbb0: 6561 6420 7265 7175 6573 7422 206f 626a  ead request" obj
+0000dbc0: 6563 7420 616e 6420 6120 2272 6561 6420  ect and a "read 
+0000dbd0: 7265 7370 6f6e 7365 2220 6f62 6a65 6374  response" object
+0000dbe0: 2e5c 6e5c 6e60 6060 7079 7468 6f6e 5c6e  .\n\n```python\n
+0000dbf0: 7265 6164 5f72 6571 2c20 7265 6164 5f72  read_req, read_r
+0000dc00: 6573 7020 3d20 636c 6965 6e74 2e72 6561  esp = client.rea
+0000dc10: 645f 7375 6273 6372 6970 7469 6f6e 2867  d_subscription(g
+0000dc20: 726f 7570 5f6e 616d 653d 6772 6f75 705f  roup_name=group_
+0000dc30: 6e61 6d65 295c 6e60 6060 5c6e 5c6e 5468  name)\n```\n\nTh
+0000dc40: 6520 2272 6561 6420 7265 7370 6f6e 7365  e "read response
+0000dc50: 2220 6f62 6a65 6374 2069 7320 616e 2069  " object is an i
+0000dc60: 7465 7261 746f 7220 7468 6174 2079 6965  terator that yie
+0000dc70: 6c64 7320 7265 636f 7264 6564 2065 7665  lds recorded eve
+0000dc80: 6e74 7320 6672 6f6d 5c6e 7468 6520 7370  nts from\nthe sp
+0000dc90: 6563 6966 6965 6420 636f 6d6d 6974 2070  ecified commit p
+0000dca0: 6f73 6974 696f 6e2e 5c6e 5c6e 5468 6520  osition.\n\nThe 
+0000dcb0: 2272 6561 6420 7265 7175 6573 7422 206f  "read request" o
+0000dcc0: 626a 6563 7420 6861 7320 616e 2060 6163  bject has an `ac
+0000dcd0: 6b28 2960 206d 6574 686f 6420 7468 6174  k()` method that
+0000dce0: 2073 686f 756c 6420 6265 2075 7365 6420   should be used 
+0000dcf0: 6279 2061 2063 6f6e 7375 6d65 725c 6e69  by a consumer\ni
+0000dd00: 6e20 6120 6772 6f75 7020 746f 2061 636b  n a group to ack
+0000dd10: 6e6f 776c 6564 6765 2074 6f20 7468 6520  nowledge to the 
+0000dd20: 7365 7276 6572 2074 6861 7420 6974 2068  server that it h
+0000dd30: 6173 2072 6563 6569 7665 6420 616e 6420  as received and 
+0000dd40: 7375 6363 6573 7366 756c 6c79 5c6e 7072  successfully\npr
+0000dd50: 6f63 6573 7365 6420 6120 7265 636f 7264  ocessed a record
+0000dd60: 6564 2065 7665 6e74 2e20 5468 6973 2077  ed event. This w
+0000dd70: 696c 6c20 7072 6576 656e 7420 7468 6174  ill prevent that
+0000dd80: 2072 6563 6f72 6465 6420 6576 656e 7420   recorded event 
+0000dd90: 6265 696e 6720 7265 6365 6976 6564 5c6e  being received\n
+0000dda0: 6279 2061 6e6f 7468 6572 2063 6f6e 7375  by another consu
+0000ddb0: 6d65 7220 696e 2074 6865 2073 616d 6520  mer in the same 
+0000ddc0: 6772 6f75 702e 2054 6865 2060 6163 6b28  group. The `ack(
+0000ddd0: 2960 206d 6574 686f 6420 7461 6b65 7320  )` method takes 
+0000dde0: 616e 2060 6576 656e 745f 6964 605c 6e61  an `event_id`\na
+0000ddf0: 7267 756d 656e 742c 2077 6869 6368 2069  rgument, which i
+0000de00: 7320 7468 6520 4944 206f 6620 7468 6520  s the ID of the 
+0000de10: 7265 636f 7264 6564 2065 7665 6e74 2074  recorded event t
+0000de20: 6861 7420 6861 7320 6265 656e 2072 6563  hat has been rec
+0000de30: 6569 7665 642e 5c6e 5c6e 5468 6520 2272  eived.\n\nThe "r
+0000de40: 6561 6420 7265 7175 6573 7422 206f 626a  ead request" obj
+0000de50: 6563 7420 616c 736f 2068 6173 2061 6e20  ect also has an 
+0000de60: 606e 6163 6b28 2960 206d 6574 686f 6420  `nack()` method 
+0000de70: 7468 6174 2073 686f 756c 6420 6265 2075  that should be u
+0000de80: 7365 6420 6279 2061 2063 6f6e 7375 6d65  sed by a consume
+0000de90: 725c 6e69 6e20 6120 6772 6f75 7020 746f  r\nin a group to
+0000dea0: 206e 6567 6174 6976 656c 7920 6163 6b6e   negatively ackn
+0000deb0: 6f77 6c65 6467 6520 746f 2074 6865 2073  owledge to the s
+0000dec0: 6572 7665 7220 7468 6174 2069 7420 6861  erver that it ha
+0000ded0: 7320 7265 6365 6976 6564 2062 7574 206e  s received but n
+0000dee0: 6f74 5c6e 7375 6363 6573 7366 756c 6c79  ot\nsuccessfully
+0000def0: 2070 726f 6365 7373 6564 2061 2072 6563   processed a rec
+0000df00: 6f72 6465 6420 6576 656e 742e 2054 6865  orded event. The
+0000df10: 2060 6e61 636b 2829 6020 6d65 7468 6f64   `nack()` method
+0000df20: 2074 616b 6573 2061 6e20 6065 7665 6e74   takes an `event
+0000df30: 5f69 6460 5c6e 6172 6775 6d65 6e74 2c20  _id`\nargument, 
+0000df40: 7768 6963 6820 6973 2074 6865 2049 4420  which is the ID 
+0000df50: 6f66 2074 6865 2072 6563 6f72 6465 6420  of the recorded 
+0000df60: 6576 656e 7420 7468 6174 2068 6173 2062  event that has b
+0000df70: 6565 6e20 7265 6365 6976 6564 2c20 616e  een received, an
+0000df80: 6420 616e 5c6e 6061 6374 696f 6e60 2061  d an\n`action` a
+0000df90: 7267 756d 656e 742c 2077 6869 6368 2073  rgument, which s
+0000dfa0: 686f 756c 6420 6265 2061 2050 7974 686f  hould be a Pytho
+0000dfb0: 6e20 6073 7472 602c 2065 6974 6865 7220  n `str`, either 
+0000dfc0: 605c 2775 6e6b 6e6f 776e 5c27 602c 2060  `\'unknown\'`, `
+0000dfd0: 5c27 7061 726b 5c27 602c 5c6e 605c 2772  \'park\'`,\n`\'r
+0000dfe0: 6574 7279 5c27 602c 2060 5c27 736b 6970  etry\'`, `\'skip
+0000dff0: 5c27 602c 206f 7220 605c 2773 746f 705c  \'`, or `\'stop\
+0000e000: 2760 2e5c 6e5c 6e54 6865 2065 7861 6d70  '`.\n\nThe examp
+0000e010: 6c65 2062 656c 6f77 2069 7465 7261 7465  le below iterate
+0000e020: 7320 6f76 6572 2074 6865 2022 7265 6164  s over the "read
+0000e030: 2072 6573 706f 6e73 6522 206f 626a 6563   response" objec
+0000e040: 742c 2061 6e64 2063 616c 6c73 2060 6163  t, and calls `ac
+0000e050: 6b28 2960 5c6e 6f6e 2074 6865 2022 7265  k()`\non the "re
+0000e060: 6164 2072 6573 706f 6e73 6522 206f 626a  ad response" obj
+0000e070: 6563 742e 2054 6865 2066 6f72 206c 6f6f  ect. The for loo
+0000e080: 7020 6272 6561 6b73 2077 6865 6e20 7765  p breaks when we
+0000e090: 2068 6176 6520 7265 6365 6976 6564 5c6e   have received\n
+0000e0a0: 7468 6520 6c61 7374 2065 7665 6e74 2c20  the last event, 
+0000e0b0: 736f 2074 6861 7420 7765 2063 616e 2063  so that we can c
+0000e0c0: 6f6e 7469 6e75 6520 7769 7468 2074 6865  ontinue with the
+0000e0d0: 2065 7861 6d70 6c65 7320 6265 6c6f 772e   examples below.
+0000e0e0: 5c6e 5c6e 6060 6070 7974 686f 6e5c 6e65  \n\n```python\ne
+0000e0f0: 7665 6e74 7320 3d20 5b5d 5c6e 666f 7220  vents = []\nfor 
+0000e100: 6576 656e 7420 696e 2072 6561 645f 7265  event in read_re
+0000e110: 7370 3a5c 6e20 2020 2065 7665 6e74 732e  sp:\n    events.
+0000e120: 6170 7065 6e64 2865 7665 6e74 295c 6e5c  append(event)\n\
+0000e130: 6e20 2020 2023 2041 636b 6e6f 776c 6564  n    # Acknowled
+0000e140: 6765 2074 6865 2072 6563 6569 7665 6420  ge the received 
+0000e150: 6576 656e 742e 5c6e 2020 2020 7265 6164  event.\n    read
+0000e160: 5f72 6571 2e61 636b 2865 7665 6e74 5f69  _req.ack(event_i
+0000e170: 643d 6576 656e 742e 6964 295c 6e5c 6e20  d=event.id)\n\n 
+0000e180: 2020 2023 2042 7265 616b 2077 6865 6e20     # Break when 
+0000e190: 7468 6520 6c61 7374 2065 7665 6e74 2068  the last event h
+0000e1a0: 6173 2062 6565 6e20 7265 6365 6976 6564  as been received
+0000e1b0: 2e5c 6e20 2020 2069 6620 6576 656e 742e  .\n    if event.
+0000e1c0: 6964 203d 3d20 6576 656e 7431 312e 6964  id == event11.id
+0000e1d0: 3a5c 6e20 2020 2020 2020 2062 7265 616b  :\n        break
+0000e1e0: 5c6e 6060 605c 6e5c 6e54 6865 2072 6563  \n```\n\nThe rec
+0000e1f0: 6569 7665 6420 6576 656e 7473 2061 7265  eived events are
+0000e200: 2074 6865 2065 7665 6e74 7320 7765 2061   the events we a
+0000e210: 7070 656e 6465 6420 6162 6f76 652e 5c6e  ppended above.\n
+0000e220: 5c6e 6060 6070 7974 686f 6e5c 6e61 7373  \n```python\nass
+0000e230: 6572 7420 6576 656e 7473 5b2d 3131 5d2e  ert events[-11].
+0000e240: 6964 203d 3d20 6576 656e 7431 2e69 645c  id == event1.id\
+0000e250: 6e61 7373 6572 7420 6576 656e 7473 5b2d  nassert events[-
+0000e260: 3130 5d2e 6964 203d 3d20 6576 656e 7432  10].id == event2
+0000e270: 2e69 645c 6e61 7373 6572 7420 6576 656e  .id\nassert even
+0000e280: 7473 5b2d 395d 2e69 6420 3d3d 2065 7665  ts[-9].id == eve
+0000e290: 6e74 332e 6964 5c6e 6173 7365 7274 2065  nt3.id\nassert e
+0000e2a0: 7665 6e74 735b 2d38 5d2e 6964 203d 3d20  vents[-8].id == 
+0000e2b0: 6576 656e 7434 2e69 645c 6e61 7373 6572  event4.id\nasser
+0000e2c0: 7420 6576 656e 7473 5b2d 375d 2e69 6420  t events[-7].id 
+0000e2d0: 3d3d 2065 7665 6e74 352e 6964 5c6e 6173  == event5.id\nas
+0000e2e0: 7365 7274 2065 7665 6e74 735b 2d36 5d2e  sert events[-6].
+0000e2f0: 6964 203d 3d20 6576 656e 7436 2e69 645c  id == event6.id\
+0000e300: 6e61 7373 6572 7420 6576 656e 7473 5b2d  nassert events[-
+0000e310: 355d 2e69 6420 3d3d 2065 7665 6e74 372e  5].id == event7.
+0000e320: 6964 5c6e 6173 7365 7274 2065 7665 6e74  id\nassert event
+0000e330: 735b 2d34 5d2e 6964 203d 3d20 6576 656e  s[-4].id == even
+0000e340: 7438 2e69 645c 6e61 7373 6572 7420 6576  t8.id\nassert ev
+0000e350: 656e 7473 5b2d 335d 2e69 6420 3d3d 2065  ents[-3].id == e
+0000e360: 7665 6e74 392e 6964 5c6e 6173 7365 7274  vent9.id\nassert
+0000e370: 2065 7665 6e74 735b 2d32 5d2e 6964 203d   events[-2].id =
+0000e380: 3d20 6576 656e 7431 302e 6964 5c6e 6173  = event10.id\nas
+0000e390: 7365 7274 2065 7665 6e74 735b 2d31 5d2e  sert events[-1].
+0000e3a0: 6964 203d 3d20 6576 656e 7431 312e 6964  id == event11.id
+0000e3b0: 5c6e 6060 605c 6e5c 6e54 6865 2022 7265  \n```\n\nThe "re
+0000e3c0: 6164 2072 6571 7565 7374 2220 6f62 6a65  ad request" obje
+0000e3d0: 6374 2061 6c73 6f20 6861 7320 616e 2060  ct also has an `
+0000e3e0: 6e61 636b 2829 6020 6d65 7468 6f64 2074  nack()` method t
+0000e3f0: 6861 7420 6361 6e20 6265 2075 7365 6420  hat can be used 
+0000e400: 6279 2061 2063 6f6e 7375 6d65 725c 6e69  by a consumer\ni
+0000e410: 6e20 6120 6772 6f75 7020 746f 2061 636b  n a group to ack
+0000e420: 6e6f 776c 6564 6765 2074 6f20 7468 6520  nowledge to the 
+0000e430: 7365 7276 6572 2074 6861 7420 6974 2068  server that it h
+0000e440: 6173 2066 6169 6c65 6420 7375 6363 6573  as failed succes
+0000e450: 7366 756c 6c79 2074 6f5c 6e70 726f 6365  sfully to\nproce
+0000e460: 7373 2061 2072 6563 6f72 6465 6420 6576  ss a recorded ev
+0000e470: 656e 742e 2054 6869 7320 7769 6c6c 2061  ent. This will a
+0000e480: 6c6c 6f77 2074 6861 7420 7265 636f 7264  llow that record
+0000e490: 6564 2065 7665 6e74 2074 6f20 6265 2072  ed event to be r
+0000e4a0: 6563 6569 7665 645c 6e62 7920 7468 6973  eceived\nby this
+0000e4b0: 206f 7220 616e 6f74 6865 7220 636f 6e73   or another cons
+0000e4c0: 756d 6572 2069 6e20 7468 6520 7361 6d65  umer in the same
+0000e4d0: 2067 726f 7570 2e5c 6e5c 6e49 7420 6d69   group.\n\nIt mi
+0000e4e0: 6768 7420 6265 206d 6f72 6520 7573 6566  ght be more usef
+0000e4f0: 756c 2074 6f20 656e 6361 7073 756c 6174  ul to encapsulat
+0000e500: 6520 7468 6520 7265 7175 6573 7420 616e  e the request an
+0000e510: 6420 7265 7370 6f6e 7365 206f 626a 6563  d response objec
+0000e520: 7473 2061 6e64 2074 6f20 6974 6572 6174  ts and to iterat
+0000e530: 655c 6e6f 7665 7220 7468 6520 2272 6561  e\nover the "rea
+0000e540: 6420 7265 7370 6f6e 7365 2220 696e 2061  d response" in a
+0000e550: 2073 6570 6172 6174 6520 7468 7265 6164   separate thread
+0000e560: 2c20 746f 2063 616c 6c20 6261 636b 2074  , to call back t
+0000e570: 6f20 6120 6861 6e64 6c65 7220 6675 6e63  o a handler func
+0000e580: 7469 6f6e 2077 6865 6e5c 6e61 2072 6563  tion when\na rec
+0000e590: 6f72 6465 6420 6576 656e 7420 6973 2072  orded event is r
+0000e5a0: 6563 6569 7665 642c 2061 6e64 2063 616c  eceived, and cal
+0000e5b0: 6c20 6061 636b 2829 6020 6966 2074 6865  l `ack()` if the
+0000e5c0: 2068 616e 646c 6572 2064 6f65 7320 6e6f   handler does no
+0000e5d0: 7420 7261 6973 6520 616e 5c6e 6578 6365  t raise an\nexce
+0000e5e0: 7074 696f 6e2c 2061 6e64 2074 6f20 6361  ption, and to ca
+0000e5f0: 6c6c 2060 6e61 636b 2829 6020 6966 2061  ll `nack()` if a
+0000e600: 6e20 6578 6365 7074 696f 6e20 6973 2072  n exception is r
+0000e610: 6169 7365 642e 2054 6865 2065 7861 6d70  aised. The examp
+0000e620: 6c65 2062 656c 6f77 2073 686f 7773 2068  le below shows h
+0000e630: 6f77 5c6e 7468 6973 206d 6967 6874 2062  ow\nthis might b
+0000e640: 6520 646f 6e65 2e5c 6e5c 6e60 6060 7079  e done.\n\n```py
+0000e650: 7468 6f6e 5c6e 6672 6f6d 2074 6872 6561  thon\nfrom threa
+0000e660: 6469 6e67 2069 6d70 6f72 7420 5468 7265  ding import Thre
+0000e670: 6164 5c6e 5c6e 5c6e 636c 6173 7320 5375  ad\n\n\nclass Su
+0000e680: 6273 6372 6970 7469 6f6e 5265 6164 6572  bscriptionReader
+0000e690: 3a5c 6e20 2020 2064 6566 205f 5f69 6e69  :\n    def __ini
+0000e6a0: 745f 5f28 7365 6c66 2c20 636c 6965 6e74  t__(self, client
+0000e6b0: 2c20 6772 6f75 705f 6e61 6d65 2c20 6361  , group_name, ca
+0000e6c0: 6c6c 6261 636b 293a 5c6e 2020 2020 2020  llback):\n      
+0000e6d0: 2020 7365 6c66 2e63 6c69 656e 7420 3d20    self.client = 
+0000e6e0: 636c 6965 6e74 5c6e 2020 2020 2020 2020  client\n        
+0000e6f0: 7365 6c66 2e67 726f 7570 5f6e 616d 6520  self.group_name 
+0000e700: 3d20 6772 6f75 705f 6e61 6d65 5c6e 2020  = group_name\n  
+0000e710: 2020 2020 2020 7365 6c66 2e63 616c 6c62        self.callb
+0000e720: 6163 6b20 3d20 6361 6c6c 6261 636b 5c6e  ack = callback\n
+0000e730: 2020 2020 2020 2020 7365 6c66 2e74 6872          self.thr
+0000e740: 6561 6420 3d20 5468 7265 6164 2874 6172  ead = Thread(tar
+0000e750: 6765 743d 7365 6c66 2e72 6561 645f 7375  get=self.read_su
+0000e760: 6273 6372 6970 7469 6f6e 2c20 6461 656d  bscription, daem
+0000e770: 6f6e 3d54 7275 6529 5c6e 2020 2020 2020  on=True)\n      
+0000e780: 2020 7365 6c66 2e65 7272 6f72 203d 204e    self.error = N
+0000e790: 6f6e 655c 6e5c 6e20 2020 2064 6566 2073  one\n\n    def s
+0000e7a0: 7461 7274 2873 656c 6629 3a5c 6e20 2020  tart(self):\n   
+0000e7b0: 2020 2020 2073 656c 662e 7468 7265 6164       self.thread
+0000e7c0: 2e73 7461 7274 2829 5c6e 5c6e 2020 2020  .start()\n\n    
+0000e7d0: 6465 6620 6a6f 696e 2873 656c 6629 3a5c  def join(self):\
+0000e7e0: 6e20 2020 2020 2020 2073 656c 662e 7468  n        self.th
+0000e7f0: 7265 6164 2e6a 6f69 6e28 295c 6e5c 6e20  read.join()\n\n 
+0000e800: 2020 2064 6566 2072 6561 645f 7375 6273     def read_subs
+0000e810: 6372 6970 7469 6f6e 2873 656c 6629 3a5c  cription(self):\
+0000e820: 6e20 2020 2020 2020 2072 6571 2c20 7265  n        req, re
+0000e830: 7370 203d 2073 656c 662e 636c 6965 6e74  sp = self.client
+0000e840: 2e72 6561 645f 7375 6273 6372 6970 7469  .read_subscripti
+0000e850: 6f6e 2867 726f 7570 5f6e 616d 653d 7365  on(group_name=se
+0000e860: 6c66 2e67 726f 7570 5f6e 616d 6529 5c6e  lf.group_name)\n
+0000e870: 2020 2020 2020 2020 666f 7220 6576 656e          for even
+0000e880: 7420 696e 2072 6573 703a 5c6e 2020 2020  t in resp:\n    
+0000e890: 2020 2020 2020 2020 7472 793a 5c6e 2020          try:\n  
+0000e8a0: 2020 2020 2020 2020 2020 2020 2020 7365                se
+0000e8b0: 6c66 2e63 616c 6c62 6163 6b28 6576 656e  lf.callback(even
+0000e8c0: 7429 5c6e 2020 2020 2020 2020 2020 2020  t)\n            
+0000e8d0: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
+0000e8e0: 2061 7320 653a 5c6e 2020 2020 2020 2020   as e:\n        
+0000e8f0: 2020 2020 2020 2020 2320 7265 712e 6e61          # req.na
+0000e900: 636b 2865 7665 6e74 2e69 6429 2020 2320  ck(event.id)  # 
+0000e910: 6e6f 7420 7965 7420 696d 706c 656d 656e  not yet implemen
+0000e920: 7465 642e 2e2e 2e5c 6e20 2020 2020 2020  ted....\n       
+0000e930: 2020 2020 2020 2020 2073 656c 662e 6572           self.er
+0000e940: 726f 7220 3d20 655c 6e20 2020 2020 2020  ror = e\n       
+0000e950: 2020 2020 2020 2020 2062 7265 616b 5c6e           break\n
+0000e960: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0000e970: 3a5c 6e20 2020 2020 2020 2020 2020 2020  :\n             
+0000e980: 2020 2072 6571 2e61 636b 2865 7665 6e74     req.ack(event
+0000e990: 2e69 6429 5c6e 5c6e 5c6e 2320 4372 6561  .id)\n\n\n# Crea
+0000e9a0: 7465 2061 6e6f 7468 6572 2070 6572 7369  te another persi
+0000e9b0: 7374 656e 7420 7375 6273 6372 6970 7469  stent subscripti
+0000e9c0: 6f6e 2e5c 6e67 726f 7570 5f6e 616d 6520  on.\ngroup_name 
+0000e9d0: 3d20 6622 6772 6f75 702d 7b75 7569 6434  = f"group-{uuid4
+0000e9e0: 2829 7d22 5c6e 636c 6965 6e74 2e63 7265  ()}"\nclient.cre
+0000e9f0: 6174 655f 7375 6273 6372 6970 7469 6f6e  ate_subscription
+0000ea00: 2867 726f 7570 5f6e 616d 653d 6772 6f75  (group_name=grou
+0000ea10: 705f 6e61 6d65 295c 6e5c 6e65 7665 6e74  p_name)\n\nevent
+0000ea20: 7320 3d20 5b5d 5c6e 5c6e 6465 6620 6861  s = []\n\ndef ha
+0000ea30: 6e64 6c65 5f65 7665 6e74 2865 7665 6e74  ndle_event(event
+0000ea40: 293a 5c6e 2020 2020 6576 656e 7473 2e61  ):\n    events.a
+0000ea50: 7070 656e 6428 6576 656e 7429 5c6e 2020  ppend(event)\n  
+0000ea60: 2020 6966 2065 7665 6e74 2e69 6420 3d3d    if event.id ==
+0000ea70: 2065 7665 6e74 3131 2e69 643a 5c6e 2020   event11.id:\n  
+0000ea80: 2020 2020 2020 7261 6973 6520 4578 6365        raise Exce
+0000ea90: 7074 696f 6e28 295c 6e5c 6e5c 6e72 6561  ption()\n\n\nrea
+0000eaa0: 6465 7220 3d20 5375 6273 6372 6970 7469  der = Subscripti
+0000eab0: 6f6e 5265 6164 6572 285c 6e20 2020 2063  onReader(\n    c
+0000eac0: 6c69 656e 743d 636c 6965 6e74 2c5c 6e20  lient=client,\n 
+0000ead0: 2020 2067 726f 7570 5f6e 616d 653d 6772     group_name=gr
+0000eae0: 6f75 705f 6e61 6d65 2c5c 6e20 2020 2063  oup_name,\n    c
+0000eaf0: 616c 6c62 6163 6b3d 6861 6e64 6c65 5f65  allback=handle_e
+0000eb00: 7665 6e74 5c6e 295c 6e5c 6e72 6561 6465  vent\n)\n\nreade
+0000eb10: 722e 7374 6172 7428 295c 6e72 6561 6465  r.start()\nreade
+0000eb20: 722e 6a6f 696e 2829 5c6e 5c6e 6173 7365  r.join()\n\nasse
+0000eb30: 7274 2065 7665 6e74 735b 2d31 5d2e 6964  rt events[-1].id
+0000eb40: 203d 3d20 6576 656e 7431 312e 6964 5c6e   == event11.id\n
+0000eb50: 6060 605c 6e5c 6e50 6c65 6173 6520 6e6f  ```\n\nPlease no
+0000eb60: 7465 2c20 7768 656e 2070 726f 6365 7373  te, when process
+0000eb70: 696e 6720 6576 656e 7473 2069 6e20 6120  ing events in a 
+0000eb80: 646f 776e 7374 7265 616d 2063 6f6d 706f  downstream compo
+0000eb90: 6e65 6e74 2c20 7468 6520 636f 6d6d 6974  nent, the commit
+0000eba0: 2070 6f73 6974 696f 6e20 6f66 5c6e 7468   position of\nth
+0000ebb0: 6520 6c61 7374 2073 7563 6365 7373 6675  e last successfu
+0000ebc0: 6c6c 7920 7072 6f63 6573 7365 6420 6576  lly processed ev
+0000ebd0: 656e 7420 6973 2075 7365 6675 6c6c 7920  ent is usefully 
+0000ebe0: 7265 636f 7264 6564 2062 7920 7468 6520  recorded by the 
+0000ebf0: 646f 776e 7374 7265 616d 2063 6f6d 706f  downstream compo
+0000ec00: 6e65 6e74 5c6e 736f 2074 6861 7420 7468  nent\nso that th
+0000ec10: 6520 636f 6d6d 6974 2070 6f73 6974 696f  e commit positio
+0000ec20: 6e20 6361 6e20 6265 2064 6574 6572 6d69  n can be determi
+0000ec30: 6e65 6420 6279 2074 6865 2064 6f77 6e73  ned by the downs
+0000ec40: 7472 6561 6d20 636f 6d70 6f6e 656e 7420  tream component 
+0000ec50: 6672 6f6d 2069 7473 206f 776e 5c6e 7265  from its own\nre
+0000ec60: 636f 7264 6564 2077 6865 6e20 6974 2069  corded when it i
+0000ec70: 7320 7265 7374 6172 7465 642e 2054 6869  s restarted. Thi
+0000ec80: 7320 636f 6d6d 6974 2070 6f73 6974 696f  s commit positio
+0000ec90: 6e20 6361 6e20 6265 2075 7365 6420 746f  n can be used to
+0000eca0: 2073 7065 6369 6679 2074 6865 2063 6f6d   specify the com
+0000ecb0: 6d69 745c 6e70 6f73 6974 696f 6e20 6672  mit\nposition fr
+0000ecc0: 6f6d 2077 6869 6368 2074 6f20 7375 6273  om which to subs
+0000ecd0: 6372 6962 652e 2053 696e 6365 2074 6869  cribe. Since thi
+0000ece0: 7320 636f 6d6d 6974 2070 6f73 6974 696f  s commit positio
+0000ecf0: 6e20 7265 7072 6573 656e 7473 2074 6865  n represents the
+0000ed00: 2070 6f73 6974 696f 6e20 6f66 5c6e 7468   position of\nth
+0000ed10: 6520 6c61 7374 2073 7563 6365 7373 6675  e last successfu
+0000ed20: 6c6c 7920 7072 6f63 6573 7365 6420 6576  lly processed ev
+0000ed30: 656e 7420 696e 2061 2064 6f77 6e73 7472  ent in a downstr
+0000ed40: 6561 6d20 636f 6d70 6f6e 656e 742c 2073  eam component, s
+0000ed50: 6f20 6974 2077 696c 6c20 6265 2075 7375  o it will be usu
+0000ed60: 616c 2074 6f5c 6e77 616e 7420 746f 2072  al to\nwant to r
+0000ed70: 6561 6420 6672 6f6d 2074 6865 206e 6578  ead from the nex
+0000ed80: 7420 6576 656e 7420 6166 7465 7220 7468  t event after th
+0000ed90: 6973 2070 6f73 6974 696f 6e2c 2062 6563  is position, bec
+0000eda0: 6175 7365 2074 6861 7420 6973 2074 6865  ause that is the
+0000edb0: 206e 6578 7420 6576 656e 745c 6e74 6861   next event\ntha
+0000edc0: 7420 6e65 6564 7320 746f 2062 6520 7072  t needs to be pr
+0000edd0: 6f63 6573 7365 642e 2048 6f77 6576 6572  ocessed. However
+0000ede0: 2c20 7768 656e 2073 7562 7363 7269 6269  , when subscribi
+0000edf0: 6e67 2066 6f72 2065 7665 6e74 7320 7573  ng for events us
+0000ee00: 696e 6720 6120 7065 7273 6973 7465 6e74  ing a persistent
+0000ee10: 5c6e 7375 6273 6372 6970 7469 6f6e 2069  \nsubscription i
+0000ee20: 6e20 4576 656e 7453 746f 7265 4442 2c20  n EventStoreDB, 
+0000ee30: 7468 6520 6576 656e 7420 6174 2074 6865  the event at the
+0000ee40: 2073 7065 6369 6669 6564 2063 6f6d 6d69   specified commi
+0000ee50: 7420 706f 7369 7469 6f6e 204d 4159 2062  t position MAY b
+0000ee60: 6520 7265 7475 726e 6564 5c6e 6173 2074  e returned\nas t
+0000ee70: 6865 2066 6972 7374 2065 7665 6e74 2069  he first event i
+0000ee80: 6e20 7468 6520 7265 6365 6976 6564 2073  n the received s
+0000ee90: 6571 7565 6e63 6520 6f66 2072 6563 6f72  equence of recor
+0000eea0: 6465 6420 6576 656e 7473 2c20 616e 6420  ded events, and 
+0000eeb0: 736f 2069 7420 6d61 795c 6e62 6520 6e65  so it may\nbe ne
+0000eec0: 6365 7373 6172 7920 746f 2063 6865 636b  cessary to check
+0000eed0: 2074 6865 2063 6f6d 6d69 7420 706f 7369   the commit posi
+0000eee0: 7469 6f6e 206f 6620 7468 6520 7265 6365  tion of the rece
+0000eef0: 6976 6564 2065 7665 6e74 7320 616e 6420  ived events and 
+0000ef00: 746f 2064 6973 6361 7264 5c6e 616e 7920  to discard\nany 
+0000ef10: 2072 6563 6f72 6465 6420 6576 656e 7420   recorded event 
+0000ef20: 6f62 6a65 6374 2074 6861 7420 6861 7320  object that has 
+0000ef30: 6120 636f 6d6d 6974 2070 6f73 6974 696f  a commit positio
+0000ef40: 6e20 6571 7561 6c20 746f 2074 6865 2063  n equal to the c
+0000ef50: 6f6d 6d69 7420 706f 7369 7469 6f6e 5c6e  ommit position\n
+0000ef60: 7370 6563 6966 6965 6420 696e 2074 6865  specified in the
+0000ef70: 2072 6571 7565 7374 2e5c 6e5c 6e57 6869   request.\n\nWhi
+0000ef80: 6c73 7420 7468 6572 6520 6172 6520 736f  lst there are so
+0000ef90: 6d65 2061 6476 616e 7461 6765 7320 6f66  me advantages of
+0000efa0: 2070 6572 7369 7374 656e 7420 7375 6273   persistent subs
+0000efb0: 6372 6970 7469 6f6e 732c 2069 6e20 7061  criptions, in pa
+0000efc0: 7274 6963 756c 6172 2074 6865 5c6e 7072  rticular the\npr
+0000efd0: 6f63 6573 7369 6e67 206f 6620 7265 636f  ocessing of reco
+0000efe0: 7264 6564 2065 7665 6e74 7320 6279 2061  rded events by a
+0000eff0: 2067 726f 7570 206f 6620 636f 6e73 756d   group of consum
+0000f000: 6572 732c 2062 7920 7472 6163 6b69 6e67  ers, by tracking
+0000f010: 2069 6e20 7468 655c 6e75 7073 7472 6561   in the\nupstrea
+0000f020: 6d20 7365 7276 6572 2074 6865 2070 6f73  m server the pos
+0000f030: 6974 696f 6e20 696e 2074 6865 2063 6f6d  ition in the com
+0000f040: 6d69 7420 7365 7175 656e 6365 206f 6620  mit sequence of 
+0000f050: 6576 656e 7473 2074 6861 7420 6861 7665  events that have
+0000f060: 2062 6565 6e20 7072 6f63 6573 7365 642c   been processed,
+0000f070: 5c6e 7468 6572 6520 6973 2061 2064 616e  \nthere is a dan
+0000f080: 6765 7220 6f66 2022 6475 616c 2077 7269  ger of "dual wri
+0000f090: 7469 6e67 2220 696e 2074 6865 2063 6f6e  ting" in the con
+0000f0a0: 7375 6d70 7469 6f6e 206f 6620 6576 656e  sumption of even
+0000f0b0: 7473 2e20 5265 6c69 6162 696c 6974 795c  ts. Reliability\
+0000f0c0: 6e69 6e20 7072 6f63 6573 7369 6e67 206f  nin processing o
+0000f0d0: 6620 7265 636f 7264 6564 2065 7665 6e74  f recorded event
+0000f0e0: 7320 6279 2061 2067 726f 7570 206f 6620  s by a group of 
+0000f0f0: 636f 6e73 756d 6572 7320 7769 6c6c 2072  consumers will r
+0000f100: 656c 7920 696e 7374 6561 6420 6f6e 5c6e  ely instead on\n
+0000f110: 6964 656d 706f 7465 6e74 2068 616e 646c  idempotent handl
+0000f120: 696e 6720 6f66 2064 7570 6c69 6361 7465  ing of duplicate
+0000f130: 206d 6573 7361 6765 732c 2061 6e64 2072   messages, and r
+0000f140: 6573 696c 6965 6e63 6520 746f 206f 7574  esilience to out
+0000f150: 2d6f 662d 6f72 6465 7220 6465 6c69 7665  -of-order delive
+0000f160: 7279 2e5c 6e5c 6e23 2323 2047 6574 2073  ry.\n\n### Get s
+0000f170: 7562 7363 7269 7074 696f 6e20 696e 666f  ubscription info
+0000f180: 5c6e 5c6e 2a72 6571 7569 7265 7320 6c65  \n\n*requires le
+0000f190: 6164 6572 2a5c 6e5c 6e54 6865 2060 6765  ader*\n\nThe `ge
+0000f1a0: 745f 7375 6273 6372 6970 7469 6f6e 5f69  t_subscription_i
+0000f1b0: 6e66 6f28 2960 206d 6574 686f 6420 6361  nfo()` method ca
+0000f1c0: 6e20 6265 2075 7365 6420 746f 2067 6574  n be used to get
+0000f1d0: 2069 6e66 6f72 6d61 7469 6f6e 2066 6f72   information for
+0000f1e0: 2061 5c6e 7065 7273 6973 7465 6e74 2073   a\npersistent s
+0000f1f0: 7562 7363 7269 7074 696f 6e2e 5c6e 5c6e  ubscription.\n\n
+0000f200: 5468 6973 206d 6574 686f 6420 6861 7320  This method has 
+0000f210: 6f6e 6520 7265 7175 6972 6564 2061 7267  one required arg
+0000f220: 756d 656e 742c 2060 6772 6f75 705f 6e61  ument, `group_na
+0000f230: 6d65 602c 2077 6869 6368 5c6e 7368 6f75  me`, which\nshou
+0000f240: 6c64 206d 6174 6368 2074 6865 2076 616c  ld match the val
+0000f250: 7565 206f 6620 7468 6520 6172 6775 6d65  ue of the argume
+0000f260: 6e74 2075 7365 6420 7768 656e 2063 616c  nt used when cal
+0000f270: 6c69 6e67 2060 6372 6561 7465 5f73 7562  ling `create_sub
+0000f280: 7363 7269 7074 696f 6e28 2960 2e5c 6e5c  scription()`.\n\
+0000f290: 6e54 6869 7320 6d65 7468 6f64 2061 6c73  nThis method als
+0000f2a0: 6f20 7461 6b65 7320 616e 206f 7074 696f  o takes an optio
+0000f2b0: 6e61 6c20 6074 696d 656f 7574 6020 6172  nal `timeout` ar
+0000f2c0: 6775 6d65 6e74 2c20 7468 6174 5c6e 6973  gument, that\nis
+0000f2d0: 2065 7870 6563 7465 6420 746f 2062 6520   expected to be 
+0000f2e0: 6120 5079 7468 6f6e 2060 666c 6f61 7460  a Python `float`
+0000f2f0: 2c20 7768 6963 6820 7365 7473 2061 2064  , which sets a d
+0000f300: 6561 646c 696e 655c 6e66 6f72 2074 6865  eadline\nfor the
+0000f310: 2063 6f6d 706c 6574 696f 6e20 6f66 2074   completion of t
+0000f320: 6865 2067 5250 4320 6f70 6572 6174 696f  he gRPC operatio
+0000f330: 6e2e 5c6e 5c6e 6060 6070 7974 686f 6e5c  n.\n\n```python\
+0000f340: 6e73 7562 7363 7269 7074 696f 6e5f 696e  nsubscription_in
+0000f350: 666f 203d 2063 6c69 656e 742e 6765 745f  fo = client.get_
+0000f360: 7375 6273 6372 6970 7469 6f6e 5f69 6e66  subscription_inf
+0000f370: 6f28 5c6e 2020 2020 6772 6f75 705f 6e61  o(\n    group_na
+0000f380: 6d65 3d67 726f 7570 5f6e 616d 652c 5c6e  me=group_name,\n
+0000f390: 295c 6e60 6060 5c6e 5c6e 5468 6520 7265  )\n```\n\nThe re
+0000f3a0: 7475 726e 6564 2076 616c 7565 2069 7320  turned value is 
+0000f3b0: 6120 6053 7562 7363 7269 7074 696f 6e49  a `SubscriptionI
+0000f3c0: 6e66 6f60 206f 626a 6563 742e 5c6e 5c6e  nfo` object.\n\n
+0000f3d0: 2323 2320 4c69 7374 2073 7562 7363 7269  ### List subscri
+0000f3e0: 7074 696f 6e73 5c6e 5c6e 2a72 6571 7569  ptions\n\n*requi
+0000f3f0: 7265 7320 6c65 6164 6572 2a5c 6e5c 6e54  res leader*\n\nT
+0000f400: 6865 2060 6c69 7374 5f73 7562 7363 7269  he `list_subscri
+0000f410: 7074 696f 6e73 2829 6020 6d65 7468 6f64  ptions()` method
+0000f420: 2063 616e 2062 6520 7573 6564 2074 6f20   can be used to 
+0000f430: 6765 7420 696e 666f 726d 6174 696f 6e20  get information 
+0000f440: 666f 7220 616c 6c5c 6e65 7869 7374 696e  for all\nexistin
+0000f450: 6720 7065 7273 6973 7465 6e74 2073 7562  g persistent sub
+0000f460: 7363 7269 7074 696f 6e73 2e5c 6e5c 6e54  scriptions.\n\nT
+0000f470: 6869 7320 6d65 7468 6f64 2074 616b 6573  his method takes
+0000f480: 2061 6e20 6f70 7469 6f6e 616c 2060 7469   an optional `ti
+0000f490: 6d65 6f75 7460 2061 7267 756d 656e 742c  meout` argument,
+0000f4a0: 2074 6861 745c 6e69 7320 6578 7065 6374   that\nis expect
+0000f4b0: 6564 2074 6f20 6265 2061 2050 7974 686f  ed to be a Pytho
+0000f4c0: 6e20 6066 6c6f 6174 602c 2077 6869 6368  n `float`, which
+0000f4d0: 2073 6574 7320 6120 6465 6164 6c69 6e65   sets a deadline
+0000f4e0: 5c6e 666f 7220 7468 6520 636f 6d70 6c65  \nfor the comple
+0000f4f0: 7469 6f6e 206f 6620 7468 6520 6752 5043  tion of the gRPC
+0000f500: 206f 7065 7261 7469 6f6e 2e5c 6e5c 6e60   operation.\n\n`
+0000f510: 6060 7079 7468 6f6e 5c6e 7375 6273 6372  ``python\nsubscr
+0000f520: 6970 7469 6f6e 7320 3d20 636c 6965 6e74  iptions = client
+0000f530: 2e6c 6973 745f 7375 6273 6372 6970 7469  .list_subscripti
+0000f540: 6f6e 7328 295c 6e60 6060 5c6e 5c6e 5468  ons()\n```\n\nTh
+0000f550: 6520 7265 7475 726e 6564 2076 616c 7565  e returned value
+0000f560: 2069 7320 6120 6c69 7374 206f 6620 6053   is a list of `S
+0000f570: 7562 7363 7269 7074 696f 6e49 6e66 6f60  ubscriptionInfo`
+0000f580: 206f 626a 6563 7473 2e5c 6e5c 6e23 2323   objects.\n\n###
+0000f590: 2044 656c 6574 6520 7375 6273 6372 6970   Delete subscrip
+0000f5a0: 7469 6f6e 5c6e 5c6e 2a72 6571 7569 7265  tion\n\n*require
+0000f5b0: 7320 6c65 6164 6572 2a5c 6e5c 6e54 6865  s leader*\n\nThe
+0000f5c0: 2060 6465 6c65 7465 5f73 7562 7363 7269   `delete_subscri
+0000f5d0: 7074 696f 6e28 2960 206d 6574 686f 6420  ption()` method 
+0000f5e0: 6361 6e20 6265 2075 7365 6420 746f 2064  can be used to d
+0000f5f0: 656c 6574 6520 6120 7065 7273 6973 7465  elete a persiste
+0000f600: 6e74 5c6e 7375 6273 6372 6970 7469 6f6e  nt\nsubscription
+0000f610: 2e5c 6e5c 6e54 6869 7320 6d65 7468 6f64  .\n\nThis method
+0000f620: 2068 6173 206f 6e65 2072 6571 7569 7265   has one require
+0000f630: 6420 6172 6775 6d65 6e74 2c20 6067 726f  d argument, `gro
+0000f640: 7570 5f6e 616d 6560 2c20 7768 6963 685c  up_name`, which\
+0000f650: 6e73 686f 756c 6420 6d61 7463 6820 7468  nshould match th
+0000f660: 6520 7661 6c75 6520 6f66 2061 7267 756d  e value of argum
+0000f670: 656e 7420 7573 6564 2077 6865 6e20 6361  ent used when ca
+0000f680: 6c6c 696e 6720 6063 7265 6174 655f 7375  lling `create_su
+0000f690: 6273 6372 6970 7469 6f6e 2829 602e 5c6e  bscription()`.\n
+0000f6a0: 5c6e 5468 6973 206d 6574 686f 6420 616c  \nThis method al
+0000f6b0: 736f 2074 616b 6573 2061 6e20 6f70 7469  so takes an opti
+0000f6c0: 6f6e 616c 2060 7469 6d65 6f75 7460 2061  onal `timeout` a
+0000f6d0: 7267 756d 656e 742c 2074 6861 745c 6e69  rgument, that\ni
+0000f6e0: 7320 6578 7065 6374 6564 2074 6f20 6265  s expected to be
+0000f6f0: 2061 2050 7974 686f 6e20 6066 6c6f 6174   a Python `float
+0000f700: 602c 2077 6869 6368 2073 6574 7320 6120  `, which sets a 
+0000f710: 6465 6164 6c69 6e65 5c6e 666f 7220 7468  deadline\nfor th
+0000f720: 6520 636f 6d70 6c65 7469 6f6e 206f 6620  e completion of 
+0000f730: 7468 6520 6752 5043 206f 7065 7261 7469  the gRPC operati
+0000f740: 6f6e 2e5c 6e5c 6e60 6060 7079 7468 6f6e  on.\n\n```python
+0000f750: 5c6e 636c 6965 6e74 2e64 656c 6574 655f  \nclient.delete_
+0000f760: 7375 6273 6372 6970 7469 6f6e 285c 6e20  subscription(\n 
+0000f770: 2020 2067 726f 7570 5f6e 616d 653d 6772     group_name=gr
+0000f780: 6f75 705f 6e61 6d65 2c5c 6e29 5c6e 6060  oup_name,\n)\n``
+0000f790: 605c 6e5c 6e23 2323 2043 7265 6174 6520  `\n\n### Create 
+0000f7a0: 7374 7265 616d 2073 7562 7363 7269 7074  stream subscript
+0000f7b0: 696f 6e5c 6e5c 6e2a 7265 7175 6972 6573  ion\n\n*requires
+0000f7c0: 206c 6561 6465 722a 5c6e 5c6e 5468 6520   leader*\n\nThe 
+0000f7d0: 6063 7265 6174 655f 7374 7265 616d 5f73  `create_stream_s
+0000f7e0: 7562 7363 7269 7074 696f 6e28 2960 206d  ubscription()` m
+0000f7f0: 6574 686f 6420 6361 6e20 6265 2075 7365  ethod can be use
+0000f800: 6420 746f 2063 7265 6174 6520 6120 7065  d to create a pe
+0000f810: 7273 6973 7465 6e74 5c6e 7375 6273 6372  rsistent\nsubscr
+0000f820: 6970 7469 6f6e 2066 6f72 2061 2073 7472  iption for a str
+0000f830: 6561 6d2e 5c6e 5c6e 5468 6973 206d 6574  eam.\n\nThis met
+0000f840: 686f 6420 6861 7320 7477 6f20 7265 7175  hod has two requ
+0000f850: 6972 6564 2061 7267 756d 656e 7473 2c20  ired arguments, 
+0000f860: 6067 726f 7570 5f6e 616d 6560 2061 6e64  `group_name` and
+0000f870: 2060 7374 7265 616d 5f6e 616d 6560 2e20   `stream_name`. 
+0000f880: 5468 655c 6e60 6772 6f75 705f 6e61 6d65  The\n`group_name
+0000f890: 6020 6172 6775 6d65 6e74 206e 616d 6573  ` argument names
+0000f8a0: 2074 6865 2067 726f 7570 206f 6620 636f   the group of co
+0000f8b0: 6e73 756d 6572 7320 7468 6174 2077 696c  nsumers that wil
+0000f8c0: 6c20 7265 6365 6976 6520 6576 656e 7473  l receive events
+0000f8d0: 5c6e 6672 6f6d 2074 6869 7320 7375 6273  \nfrom this subs
+0000f8e0: 6372 6970 7469 6f6e 2e20 5468 6520 6073  cription. The `s
+0000f8f0: 7472 6561 6d5f 6e61 6d65 6020 6172 6775  tream_name` argu
+0000f900: 6d65 6e74 2073 7065 6369 6669 6573 2077  ment specifies w
+0000f910: 6869 6368 2073 7472 6561 6d5c 6e74 6865  hich stream\nthe
+0000f920: 2073 7562 7363 7269 7074 696f 6e20 7769   subscription wi
+0000f930: 6c6c 2066 6f6c 6c6f 772e 2054 6865 2076  ll follow. The v
+0000f940: 616c 7565 7320 6f66 2062 6f74 6820 7468  alues of both th
+0000f950: 6573 6520 6172 6775 6d65 6e74 7320 6172  ese arguments ar
+0000f960: 6520 6578 7065 6374 6564 5c6e 746f 2062  e expected\nto b
+0000f970: 6520 5079 7468 6f6e 2060 7374 7260 206f  e Python `str` o
+0000f980: 626a 6563 7473 2e5c 6e5c 6e54 6865 206d  bjects.\n\nThe m
+0000f990: 6574 686f 6420 616c 736f 2074 616b 6573  ethod also takes
+0000f9a0: 2066 6f75 7220 6f70 7469 6f6e 616c 2061   four optional a
+0000f9b0: 7267 756d 656e 7473 2c20 6073 7472 6561  rguments, `strea
+0000f9c0: 6d5f 706f 7369 7469 6f6e 602c 2060 6672  m_position`, `fr
+0000f9d0: 6f6d 5f65 6e64 602c 5c6e 6063 6f6e 7375  om_end`,\n`consu
+0000f9e0: 6d65 725f 7374 7261 7465 6779 602c 2061  mer_strategy`, a
+0000f9f0: 6e64 2060 7469 6d65 6f75 7460 2e5c 6e5c  nd `timeout`.\n\
+0000fa00: 6e54 6869 7320 6f70 7469 6f6e 616c 2060  nThis optional `
+0000fa10: 7374 7265 616d 5f70 6f73 6974 696f 6e60  stream_position`
+0000fa20: 2061 7267 756d 656e 7420 7370 6563 6966   argument specif
+0000fa30: 6965 7320 6120 7374 7265 616d 2070 6f73  ies a stream pos
+0000fa40: 6974 696f 6e20 6672 6f6d 5c6e 7768 6963  ition from\nwhic
+0000fa50: 6820 746f 2073 7562 7363 7269 6265 2e20  h to subscribe. 
+0000fa60: 5468 6520 7265 636f 7264 6564 2065 7665  The recorded eve
+0000fa70: 6e74 2061 7420 7468 6973 2073 7472 6561  nt at this strea
+0000fa80: 6d5c 6e70 6f73 6974 696f 6e20 7769 6c6c  m\nposition will
+0000fa90: 2062 6520 7265 6365 6976 6564 2077 6865   be received whe
+0000faa0: 6e20 7265 6164 696e 6720 7468 6520 7375  n reading the su
+0000fab0: 6273 6372 6970 7469 6f6e 2e5c 6e5c 6e54  bscription.\n\nT
+0000fac0: 6869 7320 6f70 7469 6f6e 616c 2060 6672  his optional `fr
+0000fad0: 6f6d 5f65 6e64 6020 6172 6775 6d65 6e74  om_end` argument
+0000fae0: 2069 7320 6120 5079 7468 6f6e 2060 626f   is a Python `bo
+0000faf0: 6f6c 602e 5c6e 4279 2064 6566 6175 6c74  ol`.\nBy default
+0000fb00: 2c20 7468 6520 7661 6c75 6520 6f66 2074  , the value of t
+0000fb10: 6869 7320 6172 6775 6d65 6e74 2069 7320  his argument is 
+0000fb20: 4661 6c73 652e 2049 6620 7468 6973 2061  False. If this a
+0000fb30: 7267 756d 656e 7420 6973 2073 6574 5c6e  rgument is set\n
+0000fb40: 746f 2061 2054 7275 6520 7661 6c75 652c  to a True value,
+0000fb50: 2072 6561 6469 6e67 2066 726f 6d20 7468   reading from th
+0000fb60: 6520 7375 6273 6372 6970 7469 6f6e 2077  e subscription w
+0000fb70: 696c 6c20 7265 6365 6976 6520 6f6e 6c79  ill receive only
+0000fb80: 2065 7665 6e74 735c 6e72 6563 6f72 6465   events\nrecorde
+0000fb90: 6420 6166 7465 7220 7468 6520 7375 6273  d after the subs
+0000fba0: 6372 6970 7469 6f6e 2077 6173 2063 7265  cription was cre
+0000fbb0: 6174 6564 2e20 5468 6174 2069 732c 2069  ated. That is, i
+0000fbc0: 7420 6973 206e 6f74 2069 6e63 6c75 7369  t is not inclusi
+0000fbd0: 7665 5c6e 6f66 2074 6865 2063 7572 7265  ve\nof the curre
+0000fbe0: 6e74 2073 7472 6561 6d20 706f 7369 7469  nt stream positi
+0000fbf0: 6f6e 2e5c 6e5c 6e54 6865 206f 7074 696f  on.\n\nThe optio
+0000fc00: 6e61 6c20 6063 6f6e 7375 6d65 725f 7374  nal `consumer_st
+0000fc10: 7261 7465 6779 6020 6172 6775 6d65 6e74  rategy` argument
+0000fc20: 2069 7320 6120 5079 7468 6f6e 2060 7374   is a Python `st
+0000fc30: 7260 2074 6861 7420 6465 6669 6e65 735c  r` that defines\
+0000fc40: 6e74 6865 2063 6f6e 7375 6d65 7220 7374  nthe consumer st
+0000fc50: 7261 7465 6779 2066 6f72 2074 6869 7320  rategy for this 
+0000fc60: 7065 7273 6973 7465 6e74 2073 7562 7363  persistent subsc
+0000fc70: 7269 7074 696f 6e2e 2054 6865 2076 616c  ription. The val
+0000fc80: 7565 206f 6620 7468 6973 2061 7267 756d  ue of this argum
+0000fc90: 656e 745c 6e63 616e 2062 6520 605c 2744  ent\ncan be `\'D
+0000fca0: 6973 7061 7463 6854 6f53 696e 676c 655c  ispatchToSingle\
+0000fcb0: 2760 2c20 605c 2752 6f75 6e64 526f 6269  '`, `\'RoundRobi
+0000fcc0: 6e5c 2760 2c20 605c 2750 696e 6e65 645c  n\'`, `\'Pinned\
+0000fcd0: 2760 2c20 6f72 2060 5c27 5069 6e6e 6564  '`, or `\'Pinned
+0000fce0: 4279 436f 7272 656c 6174 696f 6e5c 2760  ByCorrelation\'`
+0000fcf0: 2e20 5468 655c 6e64 6566 6175 6c74 2076  . The\ndefault v
+0000fd00: 616c 7565 2069 7320 605c 2744 6973 7061  alue is `\'Dispa
+0000fd10: 7463 6854 6f53 696e 676c 655c 2760 2e5c  tchToSingle\'`.\
+0000fd20: 6e5c 6e54 6869 7320 6d65 7468 6f64 2061  n\nThis method a
+0000fd30: 6c73 6f20 7461 6b65 7320 616e 206f 7074  lso takes an opt
+0000fd40: 696f 6e61 6c20 6074 696d 656f 7574 6020  ional `timeout` 
+0000fd50: 6172 6775 6d65 6e74 2c20 7468 6174 5c6e  argument, that\n
+0000fd60: 6973 2065 7870 6563 7465 6420 746f 2062  is expected to b
+0000fd70: 6520 6120 5079 7468 6f6e 2060 666c 6f61  e a Python `floa
+0000fd80: 7460 2c20 7768 6963 6820 7365 7473 2061  t`, which sets a
+0000fd90: 2064 6561 646c 696e 655c 6e66 6f72 2074   deadline\nfor t
+0000fda0: 6865 2063 6f6d 706c 6574 696f 6e20 6f66  he completion of
+0000fdb0: 2074 6865 2067 5250 4320 6f70 6572 6174   the gRPC operat
+0000fdc0: 696f 6e2e 5c6e 5c6e 5468 6973 206d 6574  ion.\n\nThis met
+0000fdd0: 686f 6420 646f 6573 206e 6f74 2072 6574  hod does not ret
+0000fde0: 7572 6e20 6120 7661 6c75 652e 2045 7665  urn a value. Eve
+0000fdf0: 6e74 7320 6361 6e20 6265 2072 6563 6569  nts can be recei
+0000fe00: 7665 6420 6279 2069 7465 7261 7469 6e67  ved by iterating
+0000fe10: 5c6e 6f76 6572 2074 6865 2076 616c 7565  \nover the value
+0000fe20: 2072 6574 7572 6e65 6420 6279 2063 616c   returned by cal
+0000fe30: 6c69 6e67 2060 7265 6164 5f73 7472 6561  ling `read_strea
+0000fe40: 6d5f 7375 6273 6372 6970 7469 6f6e 2829  m_subscription()
+0000fe50: 6020 2873 6565 2062 656c 6f77 292e 5c6e  ` (see below).\n
+0000fe60: 5c6e 5468 6520 6578 616d 706c 6520 6265  \nThe example be
+0000fe70: 6c6f 7720 6372 6561 7465 7320 6120 7065  low creates a pe
+0000fe80: 7273 6973 7465 6e74 2073 7472 6561 6d20  rsistent stream 
+0000fe90: 7375 6273 6372 6970 7469 6f6e 2066 726f  subscription fro
+0000fea0: 6d20 7468 6520 7374 6172 7420 6f66 2074  m the start of t
+0000feb0: 6865 2073 7472 6561 6d2e 5c6e 5c6e 6060  he stream.\n\n``
+0000fec0: 6070 7974 686f 6e5c 6e23 2043 7265 6174  `python\n# Creat
+0000fed0: 6520 6120 7065 7273 6973 7465 6e74 2073  e a persistent s
+0000fee0: 7472 6561 6d20 7375 6273 6372 6970 7469  tream subscripti
+0000fef0: 6f6e 2066 726f 6d20 7374 6172 7420 6f66  on from start of
+0000ff00: 2074 6865 2073 7472 6561 6d2e 5c6e 6772   the stream.\ngr
+0000ff10: 6f75 705f 6e61 6d65 3120 3d20 6622 6772  oup_name1 = f"gr
+0000ff20: 6f75 702d 7b75 7569 6434 2829 7d22 5c6e  oup-{uuid4()}"\n
+0000ff30: 636c 6965 6e74 2e63 7265 6174 655f 7374  client.create_st
+0000ff40: 7265 616d 5f73 7562 7363 7269 7074 696f  ream_subscriptio
+0000ff50: 6e28 5c6e 2020 2020 6772 6f75 705f 6e61  n(\n    group_na
+0000ff60: 6d65 3d67 726f 7570 5f6e 616d 6531 2c5c  me=group_name1,\
+0000ff70: 6e20 2020 2073 7472 6561 6d5f 6e61 6d65  n    stream_name
+0000ff80: 3d73 7472 6561 6d5f 6e61 6d65 322c 5c6e  =stream_name2,\n
+0000ff90: 295c 6e60 6060 5c6e 5c6e 5468 6520 6578  )\n```\n\nThe ex
+0000ffa0: 616d 706c 6520 6265 6c6f 7720 6372 6561  ample below crea
+0000ffb0: 7465 7320 6120 7065 7273 6973 7465 6e74  tes a persistent
+0000ffc0: 2073 7472 6561 6d20 7375 6273 6372 6970   stream subscrip
+0000ffd0: 7469 6f6e 2066 726f 6d20 6120 7374 7265  tion from a stre
+0000ffe0: 616d 2070 6f73 6974 696f 6e2e 5c6e 5c6e  am position.\n\n
+0000fff0: 6060 6070 7974 686f 6e5c 6e23 2043 7265  ```python\n# Cre
+00010000: 6174 6520 6120 7065 7273 6973 7465 6e74  ate a persistent
+00010010: 2073 7472 6561 6d20 7375 6273 6372 6970   stream subscrip
+00010020: 7469 6f6e 2066 726f 6d20 6120 7374 7265  tion from a stre
+00010030: 616d 2070 6f73 6974 696f 6e2e 5c6e 6772  am position.\ngr
+00010040: 6f75 705f 6e61 6d65 3220 3d20 6622 6772  oup_name2 = f"gr
+00010050: 6f75 702d 7b75 7569 6434 2829 7d22 5c6e  oup-{uuid4()}"\n
+00010060: 636c 6965 6e74 2e63 7265 6174 655f 7374  client.create_st
+00010070: 7265 616d 5f73 7562 7363 7269 7074 696f  ream_subscriptio
+00010080: 6e28 5c6e 2020 2020 6772 6f75 705f 6e61  n(\n    group_na
+00010090: 6d65 3d67 726f 7570 5f6e 616d 6532 2c5c  me=group_name2,\
+000100a0: 6e20 2020 2073 7472 6561 6d5f 6e61 6d65  n    stream_name
+000100b0: 3d73 7472 6561 6d5f 6e61 6d65 322c 5c6e  =stream_name2,\n
+000100c0: 2020 2020 7374 7265 616d 5f70 6f73 6974      stream_posit
+000100d0: 696f 6e3d 325c 6e29 5c6e 6060 605c 6e5c  ion=2\n)\n```\n\
+000100e0: 6e54 6865 2065 7861 6d70 6c65 2062 656c  nThe example bel
+000100f0: 6f77 2063 7265 6174 6573 2061 2070 6572  ow creates a per
+00010100: 7369 7374 656e 7420 7374 7265 616d 2073  sistent stream s
+00010110: 7562 7363 7269 7074 696f 6e20 6672 6f6d  ubscription from
+00010120: 2074 6865 2065 6e64 206f 6620 7468 6520   the end of the 
+00010130: 7374 7265 616d 2e5c 6e5c 6e60 6060 7079  stream.\n\n```py
+00010140: 7468 6f6e 5c6e 2320 4372 6561 7465 2061  thon\n# Create a
+00010150: 2070 6572 7369 7374 656e 7420 7374 7265   persistent stre
+00010160: 616d 2073 7562 7363 7269 7074 696f 6e20  am subscription 
+00010170: 6672 6f6d 2065 6e64 206f 6620 7468 6520  from end of the 
+00010180: 7374 7265 616d 2e5c 6e67 726f 7570 5f6e  stream.\ngroup_n
+00010190: 616d 6533 203d 2066 2267 726f 7570 2d7b  ame3 = f"group-{
+000101a0: 7575 6964 3428 297d 225c 6e63 6c69 656e  uuid4()}"\nclien
+000101b0: 742e 6372 6561 7465 5f73 7472 6561 6d5f  t.create_stream_
+000101c0: 7375 6273 6372 6970 7469 6f6e 285c 6e20  subscription(\n 
+000101d0: 2020 2067 726f 7570 5f6e 616d 653d 6772     group_name=gr
+000101e0: 6f75 705f 6e61 6d65 332c 5c6e 2020 2020  oup_name3,\n    
+000101f0: 7374 7265 616d 5f6e 616d 653d 7374 7265  stream_name=stre
+00010200: 616d 5f6e 616d 6532 2c5c 6e20 2020 2066  am_name2,\n    f
+00010210: 726f 6d5f 656e 643d 5472 7565 5c6e 295c  rom_end=True\n)\
+00010220: 6e60 6060 5c6e 5c6e 2323 2320 5265 6164  n```\n\n### Read
+00010230: 2073 7472 6561 6d20 7375 6273 6372 6970   stream subscrip
+00010240: 7469 6f6e 5c6e 5c6e 2a72 6571 7569 7265  tion\n\n*require
+00010250: 7320 6c65 6164 6572 2a5c 6e5c 6e54 6865  s leader*\n\nThe
+00010260: 2060 7265 6164 5f73 7472 6561 6d5f 7375   `read_stream_su
+00010270: 6273 6372 6970 7469 6f6e 2829 6020 6d65  bscription()` me
+00010280: 7468 6f64 2063 616e 2062 6520 7573 6564  thod can be used
+00010290: 2074 6f20 6372 6561 7465 2061 2070 6572   to create a per
+000102a0: 7369 7374 656e 745c 6e73 7562 7363 7269  sistent\nsubscri
+000102b0: 7074 696f 6e20 666f 7220 6120 7374 7265  ption for a stre
+000102c0: 616d 2e5c 6e5c 6e54 6869 7320 6d65 7468  am.\n\nThis meth
+000102d0: 6f64 2068 6173 2074 776f 2072 6571 7569  od has two requi
+000102e0: 7265 6420 6172 6775 6d65 6e74 732c 2060  red arguments, `
+000102f0: 6772 6f75 705f 6e61 6d65 6020 616e 6420  group_name` and 
+00010300: 6073 7472 6561 6d5f 6e61 6d65 602c 2077  `stream_name`, w
+00010310: 6869 6368 5c6e 7368 6f75 6c64 206d 6174  hich\nshould mat
+00010320: 6368 2074 6865 2076 616c 7565 7320 6f66  ch the values of
+00010330: 2061 7267 756d 656e 7473 2075 7365 6420   arguments used 
+00010340: 7768 656e 2063 616c 6c69 6e67 2060 6372  when calling `cr
+00010350: 6561 7465 5f73 7472 6561 6d5f 7375 6273  eate_stream_subs
+00010360: 6372 6970 7469 6f6e 2829 602e 5c6e 5c6e  cription()`.\n\n
+00010370: 5468 6973 206d 6574 686f 6420 616c 736f  This method also
+00010380: 2074 616b 6573 2061 6e20 6f70 7469 6f6e   takes an option
+00010390: 616c 2060 7469 6d65 6f75 7460 2061 7267  al `timeout` arg
+000103a0: 756d 656e 742c 2074 6861 745c 6e69 7320  ument, that\nis 
+000103b0: 6578 7065 6374 6564 2074 6f20 6265 2061  expected to be a
+000103c0: 2050 7974 686f 6e20 6066 6c6f 6174 602c   Python `float`,
+000103d0: 2077 6869 6368 2073 6574 7320 6120 6465   which sets a de
+000103e0: 6164 6c69 6e65 5c6e 666f 7220 7468 6520  adline\nfor the 
+000103f0: 636f 6d70 6c65 7469 6f6e 206f 6620 7468  completion of th
+00010400: 6520 6752 5043 206f 7065 7261 7469 6f6e  e gRPC operation
+00010410: 2e5c 6e5c 6e4a 7573 7420 6c69 6b65 2060  .\n\nJust like `
+00010420: 7265 6164 5f73 7562 7363 7269 7074 696f  read_subscriptio
+00010430: 6e60 2c20 7468 6973 206d 6574 686f 6420  n`, this method 
+00010440: 7265 7475 726e 7320 6120 322d 7475 706c  returns a 2-tupl
+00010450: 653a 2061 2022 7265 6164 2072 6571 7565  e: a "read reque
+00010460: 7374 2220 6f62 6a65 6374 5c6e 616e 6420  st" object\nand 
+00010470: 6120 2272 6561 6420 7265 7370 6f6e 7365  a "read response
+00010480: 2220 6f62 6a65 6374 2e5c 6e5c 6e60 6060  " object.\n\n```
+00010490: 7079 7468 6f6e 5c6e 7265 6164 5f72 6571  python\nread_req
+000104a0: 2c20 7265 6164 5f72 6573 7020 3d20 636c  , read_resp = cl
+000104b0: 6965 6e74 2e72 6561 645f 7374 7265 616d  ient.read_stream
+000104c0: 5f73 7562 7363 7269 7074 696f 6e28 5c6e  _subscription(\n
+000104d0: 2020 2020 6772 6f75 705f 6e61 6d65 3d67      group_name=g
+000104e0: 726f 7570 5f6e 616d 6531 2c5c 6e20 2020  roup_name1,\n   
+000104f0: 2073 7472 6561 6d5f 6e61 6d65 3d73 7472   stream_name=str
+00010500: 6561 6d5f 6e61 6d65 322c 5c6e 295c 6e60  eam_name2,\n)\n`
+00010510: 6060 5c6e 5c6e 5468 6520 6578 616d 706c  ``\n\nThe exampl
+00010520: 6520 6265 6c6f 7720 6974 6572 6174 6573  e below iterates
+00010530: 206f 7665 7220 7468 6520 2272 6561 6420   over the "read 
+00010540: 7265 7370 6f6e 7365 2220 6f62 6a65 6374  response" object
+00010550: 2c20 616e 6420 6361 6c6c 7320 6061 636b  , and calls `ack
+00010560: 2829 605c 6e6f 6e20 7468 6520 2272 6561  ()`\non the "rea
+00010570: 6420 7265 7370 6f6e 7365 2220 6f62 6a65  d response" obje
+00010580: 6374 2e20 5468 6520 666f 7220 6c6f 6f70  ct. The for loop
+00010590: 2062 7265 616b 7320 7768 656e 2077 6520   breaks when we 
+000105a0: 6861 7665 2072 6563 6569 7665 645c 6e74  have received\nt
+000105b0: 6865 206c 6173 7420 6576 656e 7420 696e  he last event in
+000105c0: 2074 6865 2073 7472 6561 6d2c 2073 6f20   the stream, so 
+000105d0: 7468 6174 2077 6520 6361 6e20 6669 6e69  that we can fini
+000105e0: 7368 2074 6865 2065 7861 6d70 6c65 7320  sh the examples 
+000105f0: 696e 2074 6869 735c 6e64 6f63 756d 656e  in this\ndocumen
+00010600: 7461 7469 6f6e 2e5c 6e5c 6e60 6060 7079  tation.\n\n```py
+00010610: 7468 6f6e 5c6e 6576 656e 7473 203d 205b  thon\nevents = [
+00010620: 5d5c 6e66 6f72 2065 7665 6e74 2069 6e20  ]\nfor event in 
+00010630: 7265 6164 5f72 6573 703a 5c6e 2020 2020  read_resp:\n    
+00010640: 6576 656e 7473 2e61 7070 656e 6428 6576  events.append(ev
+00010650: 656e 7429 5c6e 5c6e 2020 2020 2320 4163  ent)\n\n    # Ac
+00010660: 6b6e 6f77 6c65 6467 6520 7468 6520 7265  knowledge the re
+00010670: 6365 6976 6564 2065 7665 6e74 2e5c 6e20  ceived event.\n 
+00010680: 2020 2072 6561 645f 7265 712e 6163 6b28     read_req.ack(
+00010690: 6576 656e 745f 6964 3d65 7665 6e74 2e69  event_id=event.i
+000106a0: 6429 5c6e 5c6e 2020 2020 2320 4272 6561  d)\n\n    # Brea
+000106b0: 6b20 7768 656e 2074 6865 206c 6173 7420  k when the last 
+000106c0: 6576 656e 7420 6861 7320 6265 656e 2072  event has been r
+000106d0: 6563 6569 7665 642e 5c6e 2020 2020 6966  eceived.\n    if
+000106e0: 2065 7665 6e74 2e69 6420 3d3d 2065 7665   event.id == eve
+000106f0: 6e74 3131 2e69 643a 5c6e 2020 2020 2020  nt11.id:\n      
+00010700: 2020 6272 6561 6b5c 6e60 6060 5c6e 5c6e    break\n```\n\n
+00010710: 5765 2063 616e 2063 6865 636b 2077 6520  We can check we 
+00010720: 7265 6365 6976 6564 2061 6c6c 2074 6865  received all the
+00010730: 2065 7665 6e74 7320 7468 6174 2077 6572   events that wer
+00010740: 6520 6170 7065 6e64 6564 2074 6f20 6073  e appended to `s
+00010750: 7472 6561 6d5f 6e61 6d65 3260 5c6e 696e  tream_name2`\nin
+00010760: 2074 6865 2065 7861 6d70 6c65 7320 6162   the examples ab
+00010770: 6f76 652e 5c6e 5c6e 6060 6070 7974 686f  ove.\n\n```pytho
+00010780: 6e5c 6e61 7373 6572 7420 6c65 6e28 6576  n\nassert len(ev
+00010790: 656e 7473 2920 3d3d 2034 5c6e 6173 7365  ents) == 4\nasse
+000107a0: 7274 2065 7665 6e74 735b 305d 2e73 7472  rt events[0].str
+000107b0: 6561 6d5f 6e61 6d65 203d 3d20 7374 7265  eam_name == stre
+000107c0: 616d 5f6e 616d 6532 5c6e 6173 7365 7274  am_name2\nassert
+000107d0: 2065 7665 6e74 735b 305d 2e69 6420 3d3d   events[0].id ==
+000107e0: 2065 7665 6e74 342e 6964 5c6e 6173 7365   event4.id\nasse
+000107f0: 7274 2065 7665 6e74 735b 315d 2e73 7472  rt events[1].str
+00010800: 6561 6d5f 6e61 6d65 203d 3d20 7374 7265  eam_name == stre
+00010810: 616d 5f6e 616d 6532 5c6e 6173 7365 7274  am_name2\nassert
+00010820: 2065 7665 6e74 735b 315d 2e69 6420 3d3d   events[1].id ==
+00010830: 2065 7665 6e74 352e 6964 5c6e 6173 7365   event5.id\nasse
+00010840: 7274 2065 7665 6e74 735b 325d 2e73 7472  rt events[2].str
+00010850: 6561 6d5f 6e61 6d65 203d 3d20 7374 7265  eam_name == stre
+00010860: 616d 5f6e 616d 6532 5c6e 6173 7365 7274  am_name2\nassert
+00010870: 2065 7665 6e74 735b 325d 2e69 6420 3d3d   events[2].id ==
+00010880: 2065 7665 6e74 362e 6964 5c6e 6173 7365   event6.id\nasse
+00010890: 7274 2065 7665 6e74 735b 335d 2e73 7472  rt events[3].str
+000108a0: 6561 6d5f 6e61 6d65 203d 3d20 7374 7265  eam_name == stre
+000108b0: 616d 5f6e 616d 6532 5c6e 6173 7365 7274  am_name2\nassert
+000108c0: 2065 7665 6e74 735b 335d 2e69 6420 3d3d   events[3].id ==
+000108d0: 2065 7665 6e74 3131 2e69 645c 6e60 6060   event11.id\n```
+000108e0: 5c6e 5c6e 2323 2320 4765 7420 7374 7265  \n\n### Get stre
+000108f0: 616d 2073 7562 7363 7269 7074 696f 6e20  am subscription 
+00010900: 696e 666f 5c6e 5c6e 2a72 6571 7569 7265  info\n\n*require
+00010910: 7320 6c65 6164 6572 2a5c 6e5c 6e54 6865  s leader*\n\nThe
+00010920: 2060 6765 745f 7374 7265 616d 5f73 7562   `get_stream_sub
+00010930: 7363 7269 7074 696f 6e5f 696e 666f 2829  scription_info()
+00010940: 6020 6d65 7468 6f64 2063 616e 2062 6520  ` method can be 
+00010950: 7573 6564 2074 6f20 6765 7420 696e 666f  used to get info
+00010960: 726d 6174 696f 6e20 666f 7220 615c 6e70  rmation for a\np
+00010970: 6572 7369 7374 656e 7420 7375 6273 6372  ersistent subscr
+00010980: 6970 7469 6f6e 2066 6f72 2061 2073 7472  iption for a str
+00010990: 6561 6d2e 5c6e 5c6e 5468 6973 206d 6574  eam.\n\nThis met
+000109a0: 686f 6420 6861 7320 7477 6f20 7265 7175  hod has two requ
+000109b0: 6972 6564 2061 7267 756d 656e 7473 2c20  ired arguments, 
+000109c0: 6067 726f 7570 5f6e 616d 6560 2061 6e64  `group_name` and
+000109d0: 2060 7374 7265 616d 5f6e 616d 6560 2c20   `stream_name`, 
+000109e0: 7768 6963 685c 6e73 686f 756c 6420 6d61  which\nshould ma
+000109f0: 7463 6820 7468 6520 7661 6c75 6573 206f  tch the values o
+00010a00: 6620 6172 6775 6d65 6e74 7320 7573 6564  f arguments used
+00010a10: 2077 6865 6e20 6361 6c6c 696e 6720 6063   when calling `c
+00010a20: 7265 6174 655f 7374 7265 616d 5f73 7562  reate_stream_sub
+00010a30: 7363 7269 7074 696f 6e28 2960 2e5c 6e5c  scription()`.\n\
+00010a40: 6e54 6869 7320 6d65 7468 6f64 2061 6c73  nThis method als
+00010a50: 6f20 7461 6b65 7320 616e 206f 7074 696f  o takes an optio
+00010a60: 6e61 6c20 6074 696d 656f 7574 6020 6172  nal `timeout` ar
+00010a70: 6775 6d65 6e74 2c20 7468 6174 5c6e 6973  gument, that\nis
+00010a80: 2065 7870 6563 7465 6420 746f 2062 6520   expected to be 
+00010a90: 6120 5079 7468 6f6e 2060 666c 6f61 7460  a Python `float`
+00010aa0: 2c20 7768 6963 6820 7365 7473 2061 2064  , which sets a d
+00010ab0: 6561 646c 696e 655c 6e66 6f72 2074 6865  eadline\nfor the
+00010ac0: 2063 6f6d 706c 6574 696f 6e20 6f66 2074   completion of t
+00010ad0: 6865 2067 5250 4320 6f70 6572 6174 696f  he gRPC operatio
+00010ae0: 6e2e 5c6e 5c6e 6060 6070 7974 686f 6e5c  n.\n\n```python\
+00010af0: 6e73 7562 7363 7269 7074 696f 6e5f 696e  nsubscription_in
+00010b00: 666f 203d 2063 6c69 656e 742e 6765 745f  fo = client.get_
+00010b10: 7374 7265 616d 5f73 7562 7363 7269 7074  stream_subscript
+00010b20: 696f 6e5f 696e 666f 285c 6e20 2020 2067  ion_info(\n    g
+00010b30: 726f 7570 5f6e 616d 653d 6772 6f75 705f  roup_name=group_
+00010b40: 6e61 6d65 312c 5c6e 2020 2020 7374 7265  name1,\n    stre
+00010b50: 616d 5f6e 616d 653d 7374 7265 616d 5f6e  am_name=stream_n
+00010b60: 616d 6532 2c5c 6e29 5c6e 6060 605c 6e5c  ame2,\n)\n```\n\
+00010b70: 6e54 6865 2072 6574 7572 6e65 6420 7661  nThe returned va
+00010b80: 6c75 6520 6973 2061 2060 5375 6273 6372  lue is a `Subscr
+00010b90: 6970 7469 6f6e 496e 666f 6020 6f62 6a65  iptionInfo` obje
+00010ba0: 6374 2e5c 6e5c 6e23 2323 204c 6973 7420  ct.\n\n### List 
+00010bb0: 7374 7265 616d 2073 7562 7363 7269 7074  stream subscript
+00010bc0: 696f 6e73 5c6e 5c6e 2a72 6571 7569 7265  ions\n\n*require
+00010bd0: 7320 6c65 6164 6572 2a5c 6e5c 6e54 6865  s leader*\n\nThe
+00010be0: 2060 6c69 7374 5f73 7472 6561 6d5f 7375   `list_stream_su
+00010bf0: 6273 6372 6970 7469 6f6e 7328 2960 206d  bscriptions()` m
+00010c00: 6574 686f 6420 6361 6e20 6265 2075 7365  ethod can be use
+00010c10: 6420 746f 2067 6574 2069 6e66 6f72 6d61  d to get informa
+00010c20: 7469 6f6e 2066 6f72 2061 6c6c 5c6e 7468  tion for all\nth
+00010c30: 6520 7065 7273 6973 7465 6e74 2073 7562  e persistent sub
+00010c40: 7363 7269 7074 696f 6e73 2066 6f72 2061  scriptions for a
+00010c50: 2073 7472 6561 6d2e 5c6e 5c6e 5468 6973   stream.\n\nThis
+00010c60: 206d 6574 686f 6420 6861 7320 6f6e 6520   method has one 
+00010c70: 7265 7175 6972 6564 2061 7267 756d 656e  required argumen
+00010c80: 742c 2060 7374 7265 616d 5f6e 616d 6560  t, `stream_name`
+00010c90: 2e5c 6e5c 6e54 6869 7320 6d65 7468 6f64  .\n\nThis method
+00010ca0: 2061 6c73 6f20 7461 6b65 7320 616e 206f   also takes an o
+00010cb0: 7074 696f 6e61 6c20 6074 696d 656f 7574  ptional `timeout
+00010cc0: 6020 6172 6775 6d65 6e74 2c20 7468 6174  ` argument, that
+00010cd0: 5c6e 6973 2065 7870 6563 7465 6420 746f  \nis expected to
+00010ce0: 2062 6520 6120 5079 7468 6f6e 2060 666c   be a Python `fl
+00010cf0: 6f61 7460 2c20 7768 6963 6820 7365 7473  oat`, which sets
+00010d00: 2061 2064 6561 646c 696e 655c 6e66 6f72   a deadline\nfor
+00010d10: 2074 6865 2063 6f6d 706c 6574 696f 6e20   the completion 
+00010d20: 6f66 2074 6865 2067 5250 4320 6f70 6572  of the gRPC oper
+00010d30: 6174 696f 6e2e 5c6e 5c6e 6060 6070 7974  ation.\n\n```pyt
+00010d40: 686f 6e5c 6e73 7562 7363 7269 7074 696f  hon\nsubscriptio
+00010d50: 6e73 203d 2063 6c69 656e 742e 6c69 7374  ns = client.list
+00010d60: 5f73 7472 6561 6d5f 7375 6273 6372 6970  _stream_subscrip
+00010d70: 7469 6f6e 7328 5c6e 2020 2020 7374 7265  tions(\n    stre
+00010d80: 616d 5f6e 616d 653d 7374 7265 616d 5f6e  am_name=stream_n
+00010d90: 616d 6532 2c5c 6e29 5c6e 6060 605c 6e5c  ame2,\n)\n```\n\
+00010da0: 6e54 6865 2072 6574 7572 6e65 6420 7661  nThe returned va
+00010db0: 6c75 6520 6973 2061 206c 6973 7420 6f66  lue is a list of
+00010dc0: 2060 5375 6273 6372 6970 7469 6f6e 496e   `SubscriptionIn
+00010dd0: 666f 6020 6f62 6a65 6374 732e 5c6e 5c6e  fo` objects.\n\n
+00010de0: 2323 2320 4465 6c65 7465 2073 7472 6561  ### Delete strea
+00010df0: 6d20 7375 6273 6372 6970 7469 6f6e 5c6e  m subscription\n
+00010e00: 5c6e 2a72 6571 7569 7265 7320 6c65 6164  \n*requires lead
+00010e10: 6572 2a5c 6e5c 6e54 6865 2060 6465 6c65  er*\n\nThe `dele
+00010e20: 7465 5f73 7472 6561 6d5f 7375 6273 6372  te_stream_subscr
+00010e30: 6970 7469 6f6e 2829 6020 6d65 7468 6f64  iption()` method
+00010e40: 2063 616e 2062 6520 7573 6564 2074 6f20   can be used to 
+00010e50: 6465 6c65 7465 2061 2070 6572 7369 7374  delete a persist
+00010e60: 656e 745c 6e73 7562 7363 7269 7074 696f  ent\nsubscriptio
+00010e70: 6e20 666f 7220 6120 7374 7265 616d 2e5c  n for a stream.\
+00010e80: 6e5c 6e54 6869 7320 6d65 7468 6f64 2068  n\nThis method h
+00010e90: 6173 2074 776f 2072 6571 7569 7265 6420  as two required 
+00010ea0: 6172 6775 6d65 6e74 732c 2060 6772 6f75  arguments, `grou
+00010eb0: 705f 6e61 6d65 6020 616e 6420 6073 7472  p_name` and `str
+00010ec0: 6561 6d5f 6e61 6d65 602c 2077 6869 6368  eam_name`, which
+00010ed0: 5c6e 7368 6f75 6c64 206d 6174 6368 2074  \nshould match t
+00010ee0: 6865 2076 616c 7565 7320 6f66 2061 7267  he values of arg
+00010ef0: 756d 656e 7473 2075 7365 6420 7768 656e  uments used when
+00010f00: 2063 616c 6c69 6e67 2060 6372 6561 7465   calling `create
+00010f10: 5f73 7472 6561 6d5f 7375 6273 6372 6970  _stream_subscrip
+00010f20: 7469 6f6e 2829 602e 5c6e 5c6e 5468 6973  tion()`.\n\nThis
+00010f30: 206d 6574 686f 6420 616c 736f 2074 616b   method also tak
+00010f40: 6573 2061 6e20 6f70 7469 6f6e 616c 2060  es an optional `
+00010f50: 7469 6d65 6f75 7460 2061 7267 756d 656e  timeout` argumen
+00010f60: 742c 2074 6861 745c 6e69 7320 6578 7065  t, that\nis expe
+00010f70: 6374 6564 2074 6f20 6265 2061 2050 7974  cted to be a Pyt
+00010f80: 686f 6e20 6066 6c6f 6174 602c 2077 6869  hon `float`, whi
+00010f90: 6368 2073 6574 7320 6120 6465 6164 6c69  ch sets a deadli
+00010fa0: 6e65 5c6e 666f 7220 7468 6520 636f 6d70  ne\nfor the comp
+00010fb0: 6c65 7469 6f6e 206f 6620 7468 6520 6752  letion of the gR
+00010fc0: 5043 206f 7065 7261 7469 6f6e 2e5c 6e5c  PC operation.\n\
+00010fd0: 6e60 6060 7079 7468 6f6e 5c6e 636c 6965  n```python\nclie
+00010fe0: 6e74 2e64 656c 6574 655f 7374 7265 616d  nt.delete_stream
+00010ff0: 5f73 7562 7363 7269 7074 696f 6e28 5c6e  _subscription(\n
+00011000: 2020 2020 6772 6f75 705f 6e61 6d65 3d67      group_name=g
+00011010: 726f 7570 5f6e 616d 6531 2c5c 6e20 2020  roup_name1,\n   
+00011020: 2073 7472 6561 6d5f 6e61 6d65 3d73 7472   stream_name=str
+00011030: 6561 6d5f 6e61 6d65 322c 5c6e 295c 6e60  eam_name2,\n)\n`
+00011040: 6060 5c6e 5c6e 2323 2043 6f6e 6e65 6374  ``\n\n## Connect
+00011050: 696f 6e5c 6e5c 6e23 2323 2052 6563 6f6e  ion\n\n### Recon
+00011060: 6e65 6374 5c6e 5c6e 5468 6520 6072 6563  nect\n\nThe `rec
+00011070: 6f6e 6e65 6374 2829 6020 6d65 7468 6f64  onnect()` method
+00011080: 2063 616e 2062 6520 7573 6564 2074 6f20   can be used to 
+00011090: 6d61 6e75 616c 6c79 2072 6563 6f6e 6e65  manually reconne
+000110a0: 6374 2074 6865 2063 6c69 656e 7420 746f  ct the client to
+000110b0: 2061 5c6e 7375 6974 6162 6c65 2045 7665   a\nsuitable Eve
+000110c0: 6e74 5374 6f72 6544 4220 6e6f 6465 2e20  ntStoreDB node. 
+000110d0: 5468 6973 206d 6574 686f 6420 7573 6573  This method uses
+000110e0: 2074 6865 2073 616d 6520 726f 7574 696e   the same routin
+000110f0: 6520 666f 7220 7265 6164 696e 6720 7468  e for reading th
+00011100: 655c 6e63 6c75 7374 6572 206e 6f64 6520  e\ncluster node 
+00011110: 7374 6174 6573 2061 6e64 2074 6865 6e20  states and then 
+00011120: 636f 6e6e 6563 7469 6e67 2074 6f20 6120  connecting to a 
+00011130: 7375 6974 6162 6c65 206e 6f64 6520 6163  suitable node ac
+00011140: 636f 7264 696e 6720 746f 2074 6865 5c6e  cording to the\n
+00011150: 636c 6965 6e74 5c27 7320 6e6f 6465 2070  client\'s node p
+00011160: 7265 6665 7265 6e63 6520 7468 6174 2069  reference that i
+00011170: 7320 7573 6564 2077 6865 6e20 7468 6520  s used when the 
+00011180: 636c 6965 6e74 2069 7320 636f 6e73 7472  client is constr
+00011190: 7563 7465 642e 2054 6869 735c 6e6d 6574  ucted. This\nmet
+000111a0: 686f 6420 6973 2074 6872 6561 642d 7361  hod is thread-sa
+000111b0: 6665 2c20 616e 6420 6974 2069 7320 2263  fe, and it is "c
+000111c0: 6f6e 7365 7276 6174 6976 6522 2069 6e20  onservative" in 
+000111d0: 7468 6174 2c20 7768 656e 2069 7420 6973  that, when it is
+000111e0: 2063 616c 6c65 645c 6e62 7920 7365 7665   called\nby seve
+000111f0: 7261 6c20 7468 7265 6164 7320 6174 2074  ral threads at t
+00011200: 6865 2073 616d 6520 7469 6d65 2c20 6f6e  he same time, on
+00011210: 6c79 206f 6e65 2072 6563 6f6e 6e65 6374  ly one reconnect
+00011220: 696f 6e20 7769 6c6c 206f 6363 7572 2e5c  ion will occur.\
+00011230: 6e43 6f6e 6375 7272 656e 7420 6174 7465  nConcurrent atte
+00011240: 6d70 7473 2074 6f20 7265 636f 6e6e 6563  mpts to reconnec
+00011250: 7420 7769 6c6c 2062 6c6f 636b 2075 6e74  t will block unt
+00011260: 696c 2074 6865 2063 6c69 656e 7420 6861  il the client ha
+00011270: 7320 7265 636f 6e6e 6563 7465 645c 6e73  s reconnected\ns
+00011280: 7563 6365 7373 6675 6c6c 792c 2061 6e64  uccessfully, and
+00011290: 2074 6865 6e20 7468 6579 2077 696c 6c20   then they will 
+000112a0: 616c 6c20 7265 7475 726e 206e 6f72 6d61  all return norma
+000112b0: 6c6c 792e 5c6e 5c6e 6060 6070 7974 686f  lly.\n\n```pytho
+000112c0: 6e5c 6e63 6c69 656e 742e 7265 636f 6e6e  n\nclient.reconn
+000112d0: 6563 7428 295c 6e60 6060 5c6e 5c6e 416e  ect()\n```\n\nAn
+000112e0: 2065 7861 6d70 6c65 206f 6620 7768 656e   example of when
+000112f0: 2069 7420 6d69 6768 7420 6265 2064 6573   it might be des
+00011300: 6972 6162 6c65 2074 6f20 7265 636f 6e6e  irable to reconn
+00011310: 6563 7420 6d61 6e75 616c 6c79 2069 7320  ect manually is 
+00011320: 7768 656e 2028 666f 7220 7065 7266 6f72  when (for perfor
+00011330: 6d61 6e63 655c 6e72 6561 736f 6e73 2920  mance\nreasons) 
+00011340: 7468 6520 6e6f 6465 2070 7265 6665 7265  the node prefere
+00011350: 6e63 6520 6973 2066 6f72 2074 6865 2063  nce is for the c
+00011360: 6c69 656e 7420 746f 2062 6520 636f 6e6e  lient to be conn
+00011370: 6563 7465 6420 746f 2061 2066 6f6c 6c6f  ected to a follo
+00011380: 7765 7220 6e6f 6465 2069 6e20 7468 655c  wer node in the\
+00011390: 6e63 6c75 7374 6572 2c20 616e 642c 2061  ncluster, and, a
+000113a0: 6674 6572 2061 2063 6c75 7374 6572 206c  fter a cluster l
+000113b0: 6561 6465 7220 656c 6563 7469 6f6e 2c20  eader election, 
+000113c0: 7468 6520 666f 6c6c 6f77 6572 206e 6f64  the follower nod
+000113d0: 6520 6265 636f 6d65 7320 6120 6c65 6164  e becomes a lead
+000113e0: 6572 206e 6f64 652e 5c6e 5265 636f 6e6e  er node.\nReconn
+000113f0: 6563 7469 6e67 2074 6f20 6120 666f 6c6c  ecting to a foll
+00011400: 6f77 6572 206e 6f64 6520 696e 2074 6869  ower node in thi
+00011410: 7320 6361 7365 2069 7320 6375 7272 656e  s case is curren
+00011420: 746c 7920 6265 796f 6e64 2074 6865 2063  tly beyond the c
+00011430: 6170 6162 696c 6974 6965 7320 6f66 5c6e  apabilities of\n
+00011440: 7468 6973 2063 6c69 656e 742c 2062 7574  this client, but
+00011450: 2074 6869 7320 6265 6861 7669 6f72 206d   this behavior m
+00011460: 6967 6874 2062 6520 696d 706c 656d 656e  ight be implemen
+00011470: 7465 6420 696e 2061 2066 7574 7572 6520  ted in a future 
+00011480: 7265 6c65 6173 652e 5c6e 5c6e 506c 6561  release.\n\nPlea
+00011490: 7365 206e 6f74 652c 2061 6c6c 2074 6865  se note, all the
+000114a0: 2063 6c69 656e 7420 6d65 7468 6f64 7320   client methods 
+000114b0: 6172 6520 6465 636f 7261 7465 6420 7769  are decorated wi
+000114c0: 7468 2060 4061 7574 6f72 6563 6f6e 6e65  th `@autoreconne
+000114d0: 6374 6020 2877 6869 6368 2063 616c 6c73  ct` (which calls
+000114e0: 2074 6865 5c6e 6072 6563 6f6e 6e65 6374   the\n`reconnect
+000114f0: 2829 6020 6d65 7468 6f64 2920 616e 6420  ()` method) and 
+00011500: 6120 6040 7265 7472 7960 2064 6563 6f72  a `@retry` decor
+00011510: 6174 6f72 2074 6861 7420 7769 6c6c 2072  ator that will r
+00011520: 6574 7279 206f 7065 7261 7469 6f6e 7320  etry operations 
+00011530: 7468 6174 2066 6169 6c5c 6e64 7565 2074  that fail\ndue t
+00011540: 6f20 636f 6e6e 6563 7469 6f6e 2069 7373  o connection iss
+00011550: 7565 732e 2054 6865 2060 4061 7574 6f72  ues. The `@autor
+00011560: 6563 6f6e 6e65 6374 6020 6465 636f 7261  econnect` decora
+00011570: 746f 7220 7769 6c6c 2072 6563 6f6e 6e65  tor will reconne
+00011580: 6374 2074 6f20 616e 2061 7661 696c 6162  ct to an availab
+00011590: 6c65 5c6e 6e6f 6465 2069 6e20 7468 6520  le\nnode in the 
+000115a0: 636c 7573 7465 7220 7768 656e 2074 6865  cluster when the
+000115b0: 2073 6572 7665 7220 7468 6174 2074 6865   server that the
+000115c0: 2063 6c69 656e 7420 6861 7320 6265 656e   client has been
+000115d0: 2063 6f6e 6e65 6374 6564 2074 6f20 6861   connected to ha
+000115e0: 7320 6265 636f 6d65 5c6e 756e 6176 6169  s become\nunavai
+000115f0: 6c61 626c 652c 206f 7220 6966 2074 6865  lable, or if the
+00011600: 2063 6c69 656e 745c 2773 2067 5250 4320   client\'s gRPC 
+00011610: 6368 616e 6e65 6c20 6861 7070 656e 7320  channel happens 
+00011620: 746f 2068 6176 6520 6265 656e 2063 6c6f  to have been clo
+00011630: 7365 642c 2061 6e64 2061 6c73 6f20 7768  sed, and also wh
+00011640: 656e 5c6e 6120 6d65 7468 6f64 2069 7320  en\na method is 
+00011650: 6361 6c6c 6564 2074 6861 7420 7265 7175  called that requ
+00011660: 6972 6573 2061 206c 6561 6465 7220 6275  ires a leader bu
+00011670: 7420 7468 6520 6e6f 6465 2074 6861 7420  t the node that 
+00011680: 7468 6520 636c 6965 6e74 2068 6173 2062  the client has b
+00011690: 6565 6e5c 6e63 6f6e 6e65 6374 6564 2074  een\nconnected t
+000116a0: 6f20 7374 6f70 7320 6265 696e 6720 7468  o stops being th
+000116b0: 6520 6c65 6164 6572 2074 6865 6e20 7468  e leader then th
+000116c0: 6520 636c 6965 6e74 2077 696c 6c20 7265  e client will re
+000116d0: 636f 6e6e 6563 7420 746f 2074 6865 2063  connect to the c
+000116e0: 7572 7265 6e74 5c6e 6c65 6164 6572 2e20  urrent\nleader. 
+000116f0: 5468 6520 6040 7265 7472 7960 2064 6563  The `@retry` dec
+00011700: 6f72 6174 6f72 2077 696c 6c20 7468 656e  orator will then
+00011710: 2072 6574 7279 206f 7065 7261 7469 6f6e   retry operation
+00011720: 7320 7468 6174 2068 6176 6520 6661 696c  s that have fail
+00011730: 6564 2064 7565 2074 6f5c 6e74 6865 7365  ed due to\nthese
+00011740: 2063 6f6e 6e65 6374 696f 6e20 6973 7375   connection issu
+00011750: 6573 2e20 5468 6973 206d 6561 6e73 2074  es. This means t
+00011760: 6861 7420 6120 6d65 7468 6f64 2074 6861  hat a method tha
+00011770: 7420 6861 7320 6661 696c 6564 2064 7565  t has failed due
+00011780: 2074 6f20 636f 6e6e 6563 7469 6f6e 5c6e   to connection\n
+00011790: 6973 7375 6573 2077 696c 6c20 6265 2072  issues will be r
+000117a0: 6574 7269 6564 2061 6674 6572 2074 6865  etried after the
+000117b0: 2063 6c69 656e 7420 6861 7320 7265 636f   client has reco
+000117c0: 6e6e 6563 7465 642e 5c6e 5c6e 506c 6561  nnected.\n\nPlea
+000117d0: 7365 2061 6c73 6f20 6e6f 7465 2c20 7468  se also note, th
+000117e0: 6520 6578 6365 7074 696f 6e73 2074 6f20  e exceptions to 
+000117f0: 7468 6973 2062 6568 6176 696f 7572 2068  this behaviour h
+00011800: 6176 6520 746f 2064 6f20 7769 7468 2074  ave to do with t
+00011810: 6865 206d 6574 686f 6473 2074 6861 745c  he methods that\
+00011820: 6e72 6574 7572 6e20 6974 6572 6174 6f72  nreturn iterator
+00011830: 732e 2046 6f72 2065 7861 6d70 6c65 2c20  s. For example, 
+00011840: 616e 2065 7665 6e74 2d70 726f 6365 7373  an event-process
+00011850: 696e 6720 636f 6d70 6f6e 656e 7420 7468  ing component th
+00011860: 6174 2069 7465 7261 7465 7320 6f76 6572  at iterates over
+00011870: 2074 6865 5c6e 7265 7370 6f6e 7365 2074   the\nresponse t
+00011880: 6f20 6120 6361 7463 682d 7570 2073 7562  o a catch-up sub
+00011890: 7363 7269 7074 696f 6e20 6d65 7468 6f64  scription method
+000118a0: 2063 616c 6c20 7769 6c6c 2061 6c77 6179   call will alway
+000118b0: 7320 6e65 6564 2074 6f20 6265 206d 6f6e  s need to be mon
+000118c0: 6974 6f72 6564 2066 6f72 5c6e 6572 726f  itored for\nerro
+000118d0: 7273 2c20 616e 642c 2069 6620 6974 2066  rs, and, if it f
+000118e0: 6169 6c73 2061 6674 6572 2069 7420 6861  ails after it ha
+000118f0: 7320 7374 6172 7465 6420 6974 6572 6174  s started iterat
+00011900: 696e 6720 6f76 6572 2074 6865 2072 6573  ing over the res
+00011910: 706f 6e73 652c 2074 6865 2063 6174 6368  ponse, the catch
+00011920: 2d75 705c 6e73 7562 7363 7269 7074 696f  -up\nsubscriptio
+00011930: 6e20 7769 6c6c 206e 6565 6420 746f 2062  n will need to b
+00011940: 6520 7265 7374 6172 7465 6420 6672 6f6d  e restarted from
+00011950: 2074 6865 2065 7665 6e74 2d70 726f 6365   the event-proce
+00011960: 7373 696e 6720 636f 6d70 6f6e 656e 745c  ssing component\
+00011970: 2773 206c 6173 7420 7361 7665 645c 6e63  's last saved\nc
+00011980: 6f6d 6d69 7420 706f 7369 7469 6f6e 2e20  ommit position. 
+00011990: 496e 2074 6869 7320 6361 7365 2c20 7468  In this case, th
+000119a0: 6520 636c 6965 6e74 2077 696c 6c20 6175  e client will au
+000119b0: 746f 6d61 7469 6361 6c6c 7920 7265 636f  tomatically reco
+000119c0: 6e6e 6563 7420 746f 2061 206e 6f64 6520  nnect to a node 
+000119d0: 696e 2074 6865 5c6e 636c 7573 7465 7220  in the\ncluster 
+000119e0: 7768 656e 2074 6865 2073 7562 7365 7175  when the subsequ
+000119f0: 656e 7420 6361 6c6c 2074 6f20 6120 6361  ent call to a ca
+00011a00: 7463 682d 7570 2073 7562 7363 7269 7074  tch-up subscript
+00011a10: 696f 6e20 6d65 7468 6f64 2069 7320 6d61  ion method is ma
+00011a20: 6465 2e20 596f 7520 6a75 7374 5c6e 6e65  de. You just\nne
+00011a30: 6564 2074 6f20 6861 6e64 6c65 2074 6865  ed to handle the
+00011a40: 2065 7863 6570 7469 6f6e 2074 6861 7420   exception that 
+00011a50: 6f63 6375 7273 2066 726f 6d20 7468 6520  occurs from the 
+00011a60: 6974 6572 6174 6f72 2c20 7468 656e 2072  iterator, then r
+00011a70: 6561 6420 796f 7572 206c 6173 7420 7361  ead your last sa
+00011a80: 7665 645c 6e63 6f6d 6d69 7420 706f 7369  ved\ncommit posi
+00011a90: 7469 6f6e 2c20 616e 6420 7468 656e 2072  tion, and then r
+00011aa0: 6573 7461 7274 2079 6f75 7220 6576 656e  estart your even
+00011ab0: 742d 7072 6f63 6573 7369 6e67 2063 6f6d  t-processing com
+00011ac0: 706f 6e65 6e74 2c20 7573 696e 6720 7468  ponent, using th
+00011ad0: 6520 7361 6d65 5c6e 6045 5344 4243 6c69  e same\n`ESDBCli
+00011ae0: 656e 7460 2069 6e73 7461 6e63 652c 2062  ent` instance, b
+00011af0: 7574 2077 6974 6820 6120 6e65 7720 6361  ut with a new ca
+00011b00: 7463 682d 7570 2073 7562 7363 7269 7074  tch-up subscript
+00011b10: 696f 6e20 6974 6572 6174 6f72 2e20 5369  ion iterator. Si
+00011b20: 6d69 6c61 726c 792c 2077 6865 6e5c 6e72  milarly, when\nr
+00011b30: 6561 6469 6e67 2070 6572 7369 7374 656e  eading persisten
+00011b40: 7420 7375 6273 6372 6970 7469 6f6e 733a  t subscriptions:
+00011b50: 2069 6620 7468 6572 6520 6172 6520 636f   if there are co
+00011b60: 6e6e 6563 7469 7669 7479 2069 7373 7565  nnectivity issue
+00011b70: 7320 6166 7465 7220 796f 7520 6861 7665  s after you have
+00011b80: 5c6e 7374 6172 7465 6420 6974 6572 6174  \nstarted iterat
+00011b90: 696e 6720 6f76 6572 2074 6865 2072 6573  ing over the res
+00011ba0: 706f 6e73 652c 2074 6865 6e20 7468 6520  ponse, then the 
+00011bb0: 7365 7276 6572 2063 616c 6c20 7769 6c6c  server call will
+00011bc0: 206e 6565 6420 746f 2062 6520 7265 7374   need to be rest
+00011bd0: 6172 7465 642e 5c6e 466f 7220 7468 6520  arted.\nFor the 
+00011be0: 6f70 6572 6174 696f 6e73 2072 6574 7572  operations retur
+00011bf0: 6e20 616e 2069 7465 7261 746f 722c 2074  n an iterator, t
+00011c00: 6865 2064 6563 6f72 6174 6f72 7320 6d65  he decorators me
+00011c10: 6e74 696f 6e65 6420 6162 6f76 6520 7769  ntioned above wi
+00011c20: 6c6c 2068 6176 6520 6578 6974 6564 5c6e  ll have exited\n
+00011c30: 6265 666f 7265 2061 6e79 2073 7562 7365  before any subse
+00011c40: 7175 656e 7420 6752 5043 2073 7472 6561  quent gRPC strea
+00011c50: 6d69 6e67 2065 7272 6f72 206f 6363 7572  ming error occur
+00011c60: 732e 5c6e 5c6e 5c6e 2323 2320 436c 6f73  s.\n\n\n### Clos
+00011c70: 655c 6e5c 6e54 6865 2060 636c 6f73 6528  e\n\nThe `close(
+00011c80: 2960 206d 6574 686f 6420 6361 6e20 6265  )` method can be
+00011c90: 2075 7365 6420 746f 2063 6c65 616e 6c79   used to cleanly
+00011ca0: 2063 6c6f 7365 2074 6865 2067 5250 4320   close the gRPC 
+00011cb0: 636f 6e6e 6563 7469 6f6e 2e5c 6e5c 6e60  connection.\n\n`
+00011cc0: 6060 7079 7468 6f6e 5c6e 636c 6965 6e74  ``python\nclient
+00011cd0: 2e63 6c6f 7365 2829 5c6e 6060 605c 6e5c  .close()\n```\n\
+00011ce0: 6e23 2320 4e6f 7465 735c 6e5c 6e23 2323  n## Notes\n\n###
+00011cf0: 2043 6f6e 6e65 6374 696f 6e20 7374 7269   Connection stri
+00011d00: 6e67 735c 6e5c 6e54 6865 2045 7665 6e74  ngs\n\nThe Event
+00011d10: 5374 6f72 6544 4220 636f 6e6e 6563 7469  StoreDB connecti
+00011d20: 6f6e 2073 7472 696e 6720 6973 2061 2055  on string is a U
+00011d30: 5249 2074 6861 7420 636f 6e66 6f72 6d73  RI that conforms
+00011d40: 2077 6974 6820 6f6e 6520 6f66 2074 776f   with one of two
+00011d50: 2070 6f73 7369 626c 655c 6e73 6368 656d   possible\nschem
+00011d60: 6573 2c20 6569 7468 6572 2074 6865 2022  es, either the "
+00011d70: 6573 6462 2220 7363 6865 6d65 206f 7220  esdb" scheme or 
+00011d80: 7468 6520 2265 7364 622b 6469 7363 6f76  the "esdb+discov
+00011d90: 6572 2220 7363 6865 6d65 2e20 5468 6520  er" scheme. The 
+00011da0: 7379 6e74 6178 2061 6e64 5c6e 7365 6d61  syntax and\nsema
+00011db0: 6e74 6963 7320 6f66 2074 6865 2045 7665  ntics of the Eve
+00011dc0: 6e74 5374 6f72 6544 4220 5552 4920 7363  ntStoreDB URI sc
+00011dd0: 6865 6d65 7320 6172 6520 6578 706c 6169  hemes are explai
+00011de0: 6e65 6420 6265 6c6f 772e 2054 6865 2073  ned below. The s
+00011df0: 796e 7461 7820 6973 5c6e 6465 6669 6e65  yntax is\ndefine
+00011e00: 6420 7573 696e 6720 5b45 424e 465d 2868  d using [EBNF](h
+00011e10: 7474 7073 3a2f 2f65 6e2e 7769 6b69 7065  ttps://en.wikipe
+00011e20: 6469 612e 6f72 672f 7769 6b69 2f45 7874  dia.org/wiki/Ext
+00011e30: 656e 6465 645f 4261 636b 7573 e280 934e  ended_Backus...N
+00011e40: 6175 725f 666f 726d 292e 5c6e 5c6e 5468  aur_form).\n\nTh
+00011e50: 6520 2265 7364 6222 2055 5249 2073 6368  e "esdb" URI sch
+00011e60: 656d 6520 6361 6e20 6265 2064 6566 696e  eme can be defin
+00011e70: 6564 2069 6e20 7468 6520 666f 6c6c 6f77  ed in the follow
+00011e80: 696e 6720 7761 792e 5c6e 5c6e 2020 2020  ing way.\n\n    
+00011e90: 6573 6462 2d75 7269 203d 2022 6573 6462  esdb-uri = "esdb
+00011ea0: 3a2f 2f22 202c 205b 2075 7365 722d 696e  ://" , [ user-in
+00011eb0: 666f 202c 2022 4022 205d 202c 2067 7270  fo , "@" ] , grp
+00011ec0: 632d 7461 7267 6574 2c20 7b20 222c 2220  c-target, { "," 
+00011ed0: 2c20 6772 7063 2d74 6172 6765 7420 7d20  , grpc-target } 
+00011ee0: 2c20 5b20 223f 2220 2c20 7175 6572 792d  , [ "?" , query-
+00011ef0: 7374 7269 6e67 205d 203b 5c6e 5c6e 496e  string ] ;\n\nIn
+00011f00: 2074 6865 2022 6573 6462 2220 5552 4920   the "esdb" URI 
+00011f10: 7363 6865 6d65 2c20 6166 7465 7220 7468  scheme, after th
+00011f20: 6520 6f70 7469 6f6e 616c 2075 7365 7220  e optional user 
+00011f30: 696e 666f 2073 7472 696e 672c 2074 6865  info string, the
+00011f40: 7265 206d 7573 7420 6265 2061 7420 6c65  re must be at le
+00011f50: 6173 745c 6e6f 6e65 2067 5250 4320 7461  ast\none gRPC ta
+00011f60: 7267 6574 2e20 4966 2074 6865 7265 2061  rget. If there a
+00011f70: 7265 2073 6576 6572 616c 2067 5250 4320  re several gRPC 
+00011f80: 7461 7267 6574 732c 2074 6865 7920 6d75  targets, they mu
+00011f90: 7374 2062 6520 7365 7061 7261 7465 6420  st be separated 
+00011fa0: 6672 6f6d 2065 6163 685c 6e6f 7468 6572  from each\nother
+00011fb0: 2077 6974 6820 7468 6520 222c 2220 6368   with the "," ch
+00011fc0: 6172 6163 7465 722e 2045 6163 6820 6752  aracter. Each gR
+00011fd0: 5043 2074 6172 6765 7420 7368 6f75 6c64  PC target should
+00011fe0: 2069 6e64 6963 6174 6520 616e 2045 7665   indicate an Eve
+00011ff0: 6e74 5374 6f72 6544 4220 6752 5043 5c6e  ntStoreDB gRPC\n
+00012000: 7365 7276 6572 2073 6f63 6b65 742c 2062  server socket, b
+00012010: 7920 7370 6563 6966 7969 6e67 2061 2068  y specifying a h
+00012020: 6f73 7420 616e 6420 6120 706f 7274 206e  ost and a port n
+00012030: 756d 6265 7220 7365 7061 7261 7465 6420  umber separated 
+00012040: 7769 7468 2074 6865 2022 3a22 2063 6861  with the ":" cha
+00012050: 7261 6374 6572 2e5c 6e54 6865 2068 6f73  racter.\nThe hos
+00012060: 7420 6d61 7920 6265 2061 2068 6f73 746e  t may be a hostn
+00012070: 616d 6520 7468 6174 2063 616e 2062 6520  ame that can be 
+00012080: 7265 736f 6c76 6564 2074 6f20 616e 2049  resolved to an I
+00012090: 5020 6164 6472 6573 732c 206f 7220 616e  P address, or an
+000120a0: 2049 5020 6164 6472 6573 732e 5c6e 5c6e   IP address.\n\n
+000120b0: 2020 2020 6772 7063 2d74 6172 6765 7420      grpc-target 
+000120c0: 3d20 2820 686f 7374 6e61 6d65 207c 2069  = ( hostname | i
+000120d0: 702d 6164 6472 6573 7320 2920 2c20 223a  p-address ) , ":
+000120e0: 2220 2c20 706f 7274 2d6e 756d 6265 7220  " , port-number 
+000120f0: 3b5c 6e5c 6e5c 6e54 6865 2022 6573 6462  ;\n\n\nThe "esdb
+00012100: 2b64 6973 636f 7665 7222 2055 5249 2073  +discover" URI s
+00012110: 6368 656d 6520 6361 6e20 6265 2064 6566  cheme can be def
+00012120: 696e 6564 2069 6e20 7468 6520 666f 6c6c  ined in the foll
+00012130: 6f77 696e 6720 7761 792e 5c6e 5c6e 2020  owing way.\n\n  
+00012140: 2020 6573 6462 2d64 6973 636f 7665 722d    esdb-discover-
+00012150: 7572 6920 3d20 2265 7364 622b 6469 7363  uri = "esdb+disc
+00012160: 6f76 6572 3a2f 2f22 202c 205b 2075 7365  over://" , [ use
+00012170: 722d 696e 666f 2c20 2240 2220 5d20 2c20  r-info, "@" ] , 
+00012180: 636c 7573 7465 722d 646f 6d61 696e 6e61  cluster-domainna
+00012190: 6d65 202c 205b 2022 3f22 202c 2071 7565  me , [ "?" , que
+000121a0: 7279 2d73 7472 696e 6720 5d20 3b5c 6e5c  ry-string ] ;\n\
+000121b0: 6e49 6e20 7468 6520 2265 7364 622b 6469  nIn the "esdb+di
+000121c0: 7363 6f76 6572 2220 5552 4920 7363 6865  scover" URI sche
+000121d0: 6d65 2c20 6166 7465 7220 7468 6520 7573  me, after the us
+000121e0: 6572 2069 6e66 6f20 7374 7269 6e67 2c20  er info string, 
+000121f0: 7468 6572 6520 6d75 7374 2062 6520 6120  there must be a 
+00012200: 646f 6d61 696e 5c6e 6e61 6d65 2077 6869  domain\nname whi
+00012210: 6368 2073 686f 756c 6420 6964 656e 7469  ch should identi
+00012220: 6679 2061 2063 6c75 7374 6572 206f 6620  fy a cluster of 
+00012230: 4576 656e 7453 746f 7265 4442 2073 6572  EventStoreDB ser
+00012240: 7665 7273 2e20 5468 6520 636c 6965 6e74  vers. The client
+00012250: 2077 696c 6c20 7573 6520 6120 444e 535c   will use a DNS\
+00012260: 6e73 6572 7665 7220 746f 2072 6573 6f6c  nserver to resol
+00012270: 7665 2074 6865 2064 6f6d 6169 6e20 6e61  ve the domain na
+00012280: 6d65 2074 6f20 6120 6c69 7374 206f 6620  me to a list of 
+00012290: 6164 6472 6573 7365 7320 6f66 2045 7665  addresses of Eve
+000122a0: 6e74 5374 6f72 6544 4220 7365 7276 6572  ntStoreDB server
+000122b0: 732c 5c6e 6279 2071 7565 7279 696e 6720  s,\nby querying 
+000122c0: 666f 7220 5c27 415c 2720 7265 636f 7264  for \'A\' record
+000122d0: 732e 2049 6e20 7468 6973 2063 6173 652c  s. In this case,
+000122e0: 2074 6865 2070 6f72 7420 6e75 6d62 6572   the port number
+000122f0: 2022 3231 3133 2220 7769 6c6c 2062 6520   "2113" will be 
+00012300: 7573 6564 2074 6f5c 6e63 6f6e 7374 7275  used to\nconstru
+00012310: 6374 2067 5250 4320 7461 7267 6574 7320  ct gRPC targets 
+00012320: 6672 6f6d 2074 6865 2061 6464 7265 7373  from the address
+00012330: 6573 206f 6274 6169 6e65 6420 6672 6f6d  es obtained from
+00012340: 205c 2741 5c27 2072 6563 6f72 6473 2070   \'A\' records p
+00012350: 726f 7669 6465 6420 6279 2074 6865 5c6e  rovided by the\n
+00012360: 444e 5320 7365 7276 6572 2e20 5468 6572  DNS server. Ther
+00012370: 6566 6f72 652c 2069 6620 796f 7520 7761  efore, if you wa
+00012380: 6e74 2074 6f20 7573 6520 7468 6520 2265  nt to use the "e
+00012390: 7364 622b 6469 7363 6f76 6572 2220 5552  sdb+discover" UR
+000123a0: 4920 7363 6865 6d65 2c20 796f 7520 7769  I scheme, you wi
+000123b0: 6c6c 5c6e 6e65 6564 2074 6f20 636f 6e66  ll\nneed to conf
+000123c0: 6967 7572 6520 444e 5320 7768 656e 2073  igure DNS when s
+000123d0: 6574 7469 6e67 2075 7020 796f 7572 2045  etting up your E
+000123e0: 7665 6e74 5374 6f72 6544 4220 636c 7573  ventStoreDB clus
+000123f0: 7465 722e 5c6e 5c6e 5769 7468 2062 6f74  ter.\n\nWith bot
+00012400: 6820 7468 6520 2265 7364 6222 2061 6e64  h the "esdb" and
+00012410: 2022 6573 6462 2b64 6973 6f63 7665 7222   "esdb+disocver"
+00012420: 2055 5249 2073 6368 656d 6573 2c20 7468   URI schemes, th
+00012430: 6520 636c 6965 6e74 2066 6972 7374 6c79  e client firstly
+00012440: 206f 6274 6169 6e73 5c6e 6120 6c69 7374   obtains\na list
+00012450: 206f 6620 6752 5043 2074 6172 6765 7473   of gRPC targets
+00012460: 3a20 6569 7468 6572 2064 6972 6563 746c  : either directl
+00012470: 7920 6672 6f6d 2022 6573 6462 2220 636f  y from "esdb" co
+00012480: 6e6e 6563 7469 6f6e 2073 7472 696e 6773  nnection strings
+00012490: 3b20 6f72 2069 6e64 6972 6563 746c 795c  ; or indirectly\
+000124a0: 6e66 726f 6d20 2265 7364 622b 6469 7363  nfrom "esdb+disc
+000124b0: 6f76 6572 2220 636f 6e6e 6563 7469 6f6e  over" connection
+000124c0: 2073 7472 696e 6773 2076 6961 2044 4e53   strings via DNS
+000124d0: 2e20 5468 6973 206c 6973 7420 6f66 2074  . This list of t
+000124e0: 6172 6765 7473 2069 7320 6b6e 6f77 6e20  argets is known 
+000124f0: 6173 2074 6865 5c6e 2267 6f73 7369 7020  as the\n"gossip 
+00012500: 7365 6564 222e 2054 6865 2063 6c69 656e  seed". The clien
+00012510: 7420 7769 6c6c 2074 6865 6e20 6174 7465  t will then atte
+00012520: 6d70 7420 746f 2063 6f6e 6e65 6374 2074  mpt to connect t
+00012530: 6f20 6561 6368 2067 5250 4320 7461 7267  o each gRPC targ
+00012540: 6574 2069 6e20 7475 726e 2c5c 6e61 7474  et in turn,\natt
+00012550: 656d 7074 696e 6720 746f 2063 616c 6c20  empting to call 
+00012560: 7468 6520 4576 656e 7453 746f 7265 4442  the EventStoreDB
+00012570: 2047 6f73 7369 7020 4150 4920 746f 206f   Gossip API to o
+00012580: 6274 6169 6e20 696e 666f 726d 6174 696f  btain informatio
+00012590: 6e20 6162 6f75 7420 7468 655c 6e45 7665  n about the\nEve
+000125a0: 6e74 5374 6f72 6544 4220 636c 7573 7465  ntStoreDB cluste
+000125b0: 722e 2041 206d 656d 6265 7220 6f66 2074  r. A member of t
+000125c0: 6865 2063 6c75 7374 6572 2069 7320 7365  he cluster is se
+000125d0: 6c65 6374 6564 2062 7920 7468 6520 636c  lected by the cl
+000125e0: 6965 6e74 2c20 6163 636f 7264 696e 675c  ient, according\
+000125f0: 6e74 6f20 7468 6520 226e 6f64 6520 7072  nto the "node pr
+00012600: 6566 6572 656e 6365 2220 6f70 7469 6f6e  eference" option
+00012610: 2028 7365 6520 6265 6c6f 7729 2e20 5468   (see below). Th
+00012620: 6520 636c 6965 6e74 206d 6179 2074 6865  e client may the
+00012630: 6e20 6e65 6564 2074 6f20 636c 6f73 6520  n need to close 
+00012640: 6974 735c 6e63 6f6e 6e65 6374 696f 6e20  its\nconnection 
+00012650: 616e 6420 7265 636f 6e6e 6563 7420 746f  and reconnect to
+00012660: 2074 6865 2073 656c 6563 7465 6420 7365   the selected se
+00012670: 7276 6572 2e5c 6e5c 6e49 6e20 626f 7468  rver.\n\nIn both
+00012680: 2074 6865 2022 6573 6462 2220 616e 6420   the "esdb" and 
+00012690: 2265 7364 622b 6469 7363 6f76 6572 2220  "esdb+discover" 
+000126a0: 7363 6865 6d65 732c 2074 6865 2055 5249  schemes, the URI
+000126b0: 206d 6179 2069 6e63 6c75 6465 2061 2075   may include a u
+000126c0: 7365 7220 696e 666f 2073 7472 696e 672e  ser info string.
+000126d0: 5c6e 4966 2069 7420 6578 6973 7473 2069  \nIf it exists i
+000126e0: 6e20 7468 6520 5552 492c 2074 6865 2075  n the URI, the u
+000126f0: 7365 7220 696e 666f 2073 7472 696e 6720  ser info string 
+00012700: 6d75 7374 2062 6520 7365 7061 7261 7465  must be separate
+00012710: 6420 6672 6f6d 2074 6865 2072 6573 7420  d from the rest 
+00012720: 6f66 2074 6865 2055 5249 5c6e 7769 7468  of the URI\nwith
+00012730: 2074 6865 2022 4022 2063 6861 7261 6374   the "@" charact
+00012740: 6572 2e20 5468 6520 7573 6572 2069 6e66  er. The user inf
+00012750: 6f20 7374 7269 6e67 206d 7573 7420 696e  o string must in
+00012760: 636c 7564 6520 6120 7573 6572 6e61 6d65  clude a username
+00012770: 2061 6e64 2061 2070 6173 7377 6f72 642c   and a password,
+00012780: 5c6e 7365 7061 7261 7465 6420 7769 7468  \nseparated with
+00012790: 2074 6865 2022 3a22 2063 6861 7261 6374   the ":" charact
+000127a0: 6572 2e5c 6e5c 6e20 2020 2075 7365 722d  er.\n\n    user-
+000127b0: 696e 666f 203d 2075 7365 726e 616d 6520  info = username 
+000127c0: 2c20 223a 2220 2c20 7061 7373 776f 7264  , ":" , password
+000127d0: 203b 5c6e 5c6e 5468 6520 7573 6572 2069   ;\n\nThe user i
+000127e0: 6e66 6f20 6973 2073 656e 7420 6279 2074  nfo is sent by t
+000127f0: 6865 2063 6c69 656e 7420 6173 2022 6361  he client as "ca
+00012800: 6c6c 2063 7265 6465 6e74 6961 6c73 2220  ll credentials" 
+00012810: 696e 2065 6163 6820 6361 6c6c 2074 6f20  in each call to 
+00012820: 6120 2273 6563 7572 6522 5c6e 7365 7276  a "secure"\nserv
+00012830: 6572 2c20 696e 2061 2022 6261 7369 6320  er, in a "basic 
+00012840: 6175 7468 2220 6175 7468 6f72 697a 6174  auth" authorizat
+00012850: 696f 6e20 6865 6164 6572 2e20 5468 6973  ion header. This
+00012860: 2061 7574 686f 7269 7a61 7469 6f6e 2068   authorization h
+00012870: 6561 6465 7220 6973 2075 7365 6420 6279  eader is used by
+00012880: 5c6e 7468 6520 7365 7276 6572 2074 6f20  \nthe server to 
+00012890: 6175 7468 656e 7469 6361 7465 2074 6865  authenticate the
+000128a0: 2063 6c69 656e 742e 2054 6865 2061 7574   client. The aut
+000128b0: 686f 7269 7a61 7469 6f6e 2068 6561 6465  horization heade
+000128c0: 7220 6973 206e 6f74 2073 656e 7420 746f  r is not sent to
+000128d0: 5c6e 2269 6e73 6563 7572 6522 2073 6572  \n"insecure" ser
+000128e0: 7665 7273 2e5c 6e5c 6e49 6e20 626f 7468  vers.\n\nIn both
+000128f0: 2074 6865 2022 6573 6462 2220 616e 6420   the "esdb" and 
+00012900: 2265 7364 622b 6469 7363 6f76 6572 2220  "esdb+discover" 
+00012910: 7363 6865 6d65 732c 2074 6865 206f 7074  schemes, the opt
+00012920: 696f 6e61 6c20 7175 6572 7920 7374 7269  ional query stri
+00012930: 6e67 206d 7573 7420 6265 206f 6e65 5c6e  ng must be one\n
+00012940: 6f72 206d 616e 7920 6669 656c 642d 7661  or many field-va
+00012950: 6c75 6520 6172 6775 6d65 6e74 732c 2073  lue arguments, s
+00012960: 6570 6172 6174 6564 2066 726f 6d20 6561  eparated from ea
+00012970: 6368 206f 7468 6572 2077 6974 6820 7468  ch other with th
+00012980: 6520 2226 2220 6368 6172 6163 7465 722e  e "&" character.
+00012990: 5c6e 5c6e 2020 2020 7175 6572 792d 7374  \n\n    query-st
+000129a0: 7269 6e67 203d 2066 6965 6c64 2d76 616c  ring = field-val
+000129b0: 7565 2c20 7b20 2226 222c 2066 6965 6c64  ue, { "&", field
+000129c0: 2d76 616c 7565 207d 203b 5c6e 5c6e 4561  -value } ;\n\nEa
+000129d0: 6368 2066 6965 6c64 2d76 616c 7565 2061  ch field-value a
+000129e0: 7267 756d 656e 7420 6d75 7374 2062 6520  rgument must be 
+000129f0: 6f6e 6520 6f66 2074 6865 2073 7570 706f  one of the suppo
+00012a00: 7274 6564 2066 6965 6c64 732c 2061 6e64  rted fields, and
+00012a10: 2061 6e5c 6e61 7070 726f 7072 6961 7465   an\nappropriate
+00012a20: 2076 616c 7565 2c20 7365 7061 7261 7465   value, separate
+00012a30: 6420 7769 7468 2074 6865 2022 3d22 2063  d with the "=" c
+00012a40: 6861 7261 6374 6572 2e5c 6e5c 6e20 2020  haracter.\n\n   
+00012a50: 2066 6965 6c64 2d76 616c 7565 203d 2028   field-value = (
+00012a60: 2022 546c 7322 2c20 223d 2220 2c20 2274   "Tls", "=" , "t
+00012a70: 7275 6522 207c 2022 6661 6c73 6522 2029  rue" | "false" )
+00012a80: 5c6e 2020 2020 2020 2020 2020 2020 2020  \n              
+00012a90: 2020 7c20 2820 2254 6c73 5665 7269 6679    | ( "TlsVerify
+00012aa0: 4365 7274 222c 2022 3d22 202c 2022 7472  Cert", "=" , "tr
+00012ab0: 7565 2220 7c20 2266 616c 7365 2220 295c  ue" | "false" )\
+00012ac0: 6e20 2020 2020 2020 2020 2020 2020 2020  n               
+00012ad0: 207c 2028 2022 436f 6e6e 6563 7469 6f6e   | ( "Connection
+00012ae0: 4e61 6d65 222c 2022 3d22 202c 2073 7472  Name", "=" , str
+00012af0: 696e 6720 295c 6e20 2020 2020 2020 2020  ing )\n         
+00012b00: 2020 2020 2020 207c 2028 2022 4e6f 6465         | ( "Node
+00012b10: 5072 6566 6572 656e 6365 222c 2022 3d22  Preference", "="
+00012b20: 202c 2022 6c65 6164 6572 2220 7c20 2266   , "leader" | "f
+00012b30: 6f6c 6c6f 7765 7222 207c 2022 7265 6164  ollower" | "read
+00012b40: 6f6e 6c79 7265 706c 6963 6122 207c 2022  onlyreplica" | "
+00012b50: 7261 6e64 6f6d 2220 295c 6e20 2020 2020  random" )\n     
+00012b60: 2020 2020 2020 2020 2020 207c 2028 2022             | ( "
+00012b70: 4465 6661 756c 7444 6561 646c 696e 6522  DefaultDeadline"
+00012b80: 2c20 223d 2220 2c20 696e 7465 6765 7220  , "=" , integer 
+00012b90: 295c 6e20 2020 2020 2020 2020 2020 2020  )\n             
+00012ba0: 2020 207c 2028 2022 476f 7373 6970 5469     | ( "GossipTi
+00012bb0: 6d65 6f75 7422 2c20 223d 2220 2c20 696e  meout", "=" , in
+00012bc0: 7465 6765 7220 295c 6e20 2020 2020 2020  teger )\n       
+00012bd0: 2020 2020 2020 2020 207c 2028 2022 4d61           | ( "Ma
+00012be0: 7844 6973 636f 7665 7241 7474 656d 7074  xDiscoverAttempt
+00012bf0: 7322 2c20 223d 2220 2c20 696e 7465 6765  s", "=" , intege
+00012c00: 7220 295c 6e20 2020 2020 2020 2020 2020  r )\n           
+00012c10: 2020 2020 207c 2028 2022 4469 7363 6f76       | ( "Discov
+00012c20: 6572 7949 6e74 6572 7661 6c22 2c20 223d  eryInterval", "=
+00012c30: 2220 2c20 696e 7465 6765 7220 295c 6e20  " , integer )\n 
+00012c40: 2020 2020 2020 2020 2020 2020 2020 207c                 |
+00012c50: 2028 2022 4d61 7844 6973 636f 7665 7241   ( "MaxDiscoverA
+00012c60: 7474 656d 7074 7322 2c20 223d 2220 2c20  ttempts", "=" , 
+00012c70: 696e 7465 6765 7220 295c 6e20 2020 2020  integer )\n     
+00012c80: 2020 2020 2020 2020 2020 207c 2028 2022             | ( "
+00012c90: 4b65 6570 416c 6976 6549 6e74 6572 7661  KeepAliveInterva
+00012ca0: 6c22 2c20 223d 2220 2c20 696e 7465 6765  l", "=" , intege
+00012cb0: 7220 295c 6e20 2020 2020 2020 2020 2020  r )\n           
+00012cc0: 2020 2020 207c 2028 2022 4b65 6570 416c       | ( "KeepAl
+00012cd0: 6976 6549 6e74 6572 7661 6c22 2c20 223d  iveInterval", "=
+00012ce0: 2220 2c20 696e 7465 6765 7220 2920 3b5c  " , integer ) ;\
+00012cf0: 6e5c 6e54 6865 2074 6162 6c65 2062 656c  n\nThe table bel
+00012d00: 6f77 2064 6573 6372 6962 6573 2074 6865  ow describes the
+00012d10: 2071 7565 7279 2066 6965 6c64 2d76 616c   query field-val
+00012d20: 7565 7320 7375 7070 6f72 7465 6420 6279  ues supported by
+00012d30: 2074 6869 7320 636c 6965 6e74 2e5c 6e5c   this client.\n\
+00012d40: 6e7c 2046 6965 6c64 2020 2020 2020 2020  n| Field        
+00012d50: 2020 2020 2020 207c 2056 616c 7565 2020         | Value  
+00012d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012d90: 2020 2020 2020 2020 2020 2020 2020 207c                 |
+00012da0: 2044 6573 6372 6970 7469 6f6e 2020 2020   Description    
+00012db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012e40: 2020 207c 5c6e 7c2d 2d2d 2d2d 2d2d 2d2d     |\n|---------
+00012e50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 7c2d 2d2d  ------------|---
+00012e60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012e70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012e80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012e90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012ea0: 2d2d 2d2d 7c2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----|-----------
+00012eb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012ec0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012ed0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012ee0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012ef0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012f00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012f10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012f20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012f30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012f40: 2d2d 2d2d 2d2d 2d2d 7c5c 6e7c 2054 6c73  --------|\n| Tls
+00012f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012f60: 207c 2022 7472 7565 222c 2022 6661 6c73   | "true", "fals
+00012f70: 6522 2028 6465 6661 756c 743a 2022 7472  e" (default: "tr
+00012f80: 7565 2229 2020 2020 2020 2020 2020 2020  ue")            
+00012f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012fa0: 2020 2020 2020 2020 207c 2049 6620 2274           | If "t
+00012fb0: 7275 6522 2074 6865 2063 6c69 656e 7420  rue" the client 
+00012fc0: 7769 6c6c 2063 7265 6174 6520 6120 2273  will create a "s
+00012fd0: 6563 7572 6522 2067 5250 4320 6368 616e  ecure" gRPC chan
+00012fe0: 6e65 6c2e 2049 6620 2266 616c 7365 2220  nel. If "false" 
+00012ff0: 7468 6520 636c 6965 6e74 2077 696c 6c20  the client will 
+00013000: 6372 6561 7465 2061 6e20 2269 6e73 6563  create an "insec
+00013010: 7572 6522 2067 5250 4320 6368 616e 6e65  ure" gRPC channe
+00013020: 6c2e 2054 6869 7320 6d75 7374 206d 6174  l. This must mat
+00013030: 6368 2074 6865 2073 6572 7665 7220 636f  ch the server co
+00013040: 6e66 6967 7572 6174 696f 6e2e 207c 5c6e  nfiguration. |\n
+00013050: 7c20 546c 7356 6572 6966 7943 6572 7420  | TlsVerifyCert 
+00013060: 2020 2020 2020 7c20 2274 7275 6522 2c20        | "true", 
+00013070: 2266 616c 7365 2220 2864 6566 6175 6c74  "false" (default
+00013080: 3a20 2274 7275 6522 2920 2020 2020 2020  : "true")       
+00013090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000130a0: 2020 2020 2020 2020 2020 2020 2020 7c20                | 
+000130b0: 5468 6973 2076 616c 7565 2069 7320 6375  This value is cu
+000130c0: 7272 656e 746c 7920 6967 6e6f 7265 642e  rrently ignored.
+000130d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000130e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000130f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013130: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013150: 2020 7c5c 6e7c 2043 6f6e 6e65 6374 696f    |\n| Connectio
+00013160: 6e4e 616d 6520 2020 2020 207c 2073 7472  nName      | str
+00013170: 696e 6720 2864 6566 6175 6c74 3a20 6175  ing (default: au
+00013180: 746f 2d67 656e 6572 6174 6564 2076 6572  to-generated ver
+00013190: 7369 6f6e 2d34 2055 5549 4429 2020 2020  sion-4 UUID)    
+000131a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000131b0: 2020 207c 2053 656e 7420 696e 2063 616c     | Sent in cal
+000131c0: 6c20 6d65 7461 6461 7461 2066 6f72 2065  l metadata for e
+000131d0: 7665 7279 2063 616c 6c2c 2074 6f20 6964  very call, to id
+000131e0: 656e 7469 6679 2074 6865 2063 6c69 656e  entify the clien
+000131f0: 7420 746f 2074 6865 2063 6c75 7374 6572  t to the cluster
+00013200: 2e20 2020 2020 2020 2020 2020 2020 2020  .               
+00013210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013250: 2020 2020 2020 207c 5c6e 7c20 4e6f 6465         |\n| Node
+00013260: 5072 6566 6572 656e 6365 2020 2020 2020  Preference      
+00013270: 7c20 226c 6561 6465 7222 2c20 2266 6f6c  | "leader", "fol
+00013280: 6c6f 7765 7222 2c20 2272 6561 646f 6e6c  lower", "readonl
+00013290: 7972 6570 6c69 6361 222c 2022 7261 6e64  yreplica", "rand
+000132a0: 6f6d 2220 2864 6566 6175 6c74 3a20 226c  om" (default: "l
+000132b0: 6561 6465 7222 2920 7c20 5468 6520 6e6f  eader") | The no
+000132c0: 6465 2073 7461 7465 2070 7265 6665 7272  de state preferr
+000132d0: 6564 2062 7920 7468 6520 636c 6965 6e74  ed by the client
+000132e0: 2e20 5468 6520 636c 6965 6e74 2077 696c  . The client wil
+000132f0: 6c20 7365 6c65 6374 2061 206e 6f64 6520  l select a node 
+00013300: 6672 6f6d 2074 6865 2063 6c75 7374 6572  from the cluster
+00013310: 2069 6e66 6f20 7265 6365 6976 6564 2066   info received f
+00013320: 726f 6d20 7468 6520 476f 7373 6970 2041  rom the Gossip A
+00013330: 5049 2061 6363 6f72 6469 6e67 2074 6f20  PI according to 
+00013340: 7468 6973 2070 7265 6665 7265 6e63 652e  this preference.
+00013350: 2020 2020 2020 2020 2020 2020 7c5c 6e7c              |\n|
+00013360: 2044 6566 6175 6c74 4465 6164 6c69 6e65   DefaultDeadline
+00013370: 2020 2020 207c 2069 6e74 6567 6572 2028       | integer (
+00013380: 6465 6661 756c 743a 2060 4e6f 6e65 6029  default: `None`)
+00013390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000133a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000133b0: 2020 2020 2020 2020 2020 2020 207c 2054               | T
+000133c0: 6865 2064 6566 6175 6c74 2076 616c 7565  he default value
+000133d0: 2028 696e 2073 6563 6f6e 6473 2920 6f66   (in seconds) of
+000133e0: 2074 6865 2060 7469 6d65 6f75 7460 2061   the `timeout` a
+000133f0: 7267 756d 656e 7420 6f66 2063 6c69 656e  rgument of clien
+00013400: 7420 2277 7269 7465 2220 6d65 7468 6f64  t "write" method
+00013410: 7320 7375 6368 2061 7320 6061 7070 656e  s such as `appen
+00013420: 645f 6576 656e 7473 2829 602e 2020 2020  d_events()`.    
+00013430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013460: 207c 5c6e 7c20 476f 7373 6970 5469 6d65   |\n| GossipTime
+00013470: 6f75 7420 2020 2020 2020 7c20 696e 7465  out       | inte
+00013480: 6765 7220 2864 6566 6175 6c74 3a20 3529  ger (default: 5)
+00013490: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000134a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000134b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000134c0: 2020 7c20 5468 6520 6465 6661 756c 7420    | The default 
+000134d0: 7661 6c75 6520 2869 6e20 7365 636f 6e64  value (in second
+000134e0: 7329 206f 6620 7468 6520 6074 696d 656f  s) of the `timeo
+000134f0: 7574 6020 6172 6775 6d65 6e74 206f 6620  ut` argument of 
+00013500: 676f 7373 6970 2072 6561 6420 6d65 7468  gossip read meth
+00013510: 6f64 732c 2073 7563 6820 6173 2060 7265  ods, such as `re
+00013520: 6164 5f67 6f73 7369 7028 2960 2e20 2020  ad_gossip()`.   
+00013530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013560: 2020 2020 2020 7c5c 6e7c 204d 6178 4469        |\n| MaxDi
+00013570: 7363 6f76 6572 4174 7465 6d70 7473 207c  scoverAttempts |
+00013580: 2069 6e74 6567 6572 2028 6465 6661 756c   integer (defaul
+00013590: 743a 2031 3029 2020 2020 2020 2020 2020  t: 10)          
+000135a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000135b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000135c0: 2020 2020 2020 207c 2054 6865 206e 756d         | The num
+000135d0: 6265 7220 6f66 2061 7474 656d 7074 7320  ber of attempts 
+000135e0: 746f 2072 6561 6420 676f 7373 6970 2077  to read gossip w
+000135f0: 6865 6e20 636f 6e6e 6563 7469 6e67 206f  hen connecting o
+00013600: 7220 7265 636f 6e6e 6563 7469 6e67 2074  r reconnecting t
+00013610: 6f20 6120 636c 7573 7465 7220 6d65 6d62  o a cluster memb
+00013620: 6572 2e20 2020 2020 2020 2020 2020 2020  er.             
+00013630: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013660: 2020 2020 2020 2020 2020 207c 5c6e 7c20             |\n| 
+00013670: 4469 7363 6f76 6572 7949 6e74 6572 7661  DiscoveryInterva
+00013680: 6c20 2020 7c20 696e 7465 6765 7220 2864  l   | integer (d
+00013690: 6566 6175 6c74 3a20 3130 3029 2020 2020  efault: 100)    
+000136a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000136b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000136c0: 2020 2020 2020 2020 2020 2020 7c20 486f              | Ho
+000136d0: 7720 6c6f 6e67 2074 6f20 7761 6974 2028  w long to wait (
+000136e0: 696e 206d 696c 6c69 7365 636f 6e64 7329  in milliseconds)
+000136f0: 2062 6574 7765 656e 2067 6f73 7369 7020   between gossip 
+00013700: 7265 7472 6965 732e 2020 2020 2020 2020  retries.        
+00013710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013770: 7c5c 6e7c 204b 6565 7041 6c69 7665 496e  |\n| KeepAliveIn
+00013780: 7465 7276 616c 2020 207c 2069 6e74 6567  terval   | integ
+00013790: 6572 2028 6465 6661 756c 743a 2060 4e6f  er (default: `No
+000137a0: 6e65 6029 2020 2020 2020 2020 2020 2020  ne`)            
+000137b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000137c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000137d0: 207c 2054 6865 2076 616c 7565 206f 6620   | The value of 
+000137e0: 7468 6520 2267 7270 632e 6b65 6570 616c  the "grpc.keepal
+000137f0: 6976 655f 6d73 2220 6752 5043 2063 6861  ive_ms" gRPC cha
+00013800: 6e6e 656c 206f 7074 696f 6e2e 2020 2020  nnel option.    
+00013810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013870: 2020 2020 207c 5c6e 7c20 4b65 6570 416c       |\n| KeepAl
+00013880: 6976 6554 696d 656f 7574 2020 2020 7c20  iveTimeout    | 
+00013890: 696e 7465 6765 7220 2864 6566 6175 6c74  integer (default
+000138a0: 3a20 604e 6f6e 6560 2920 2020 2020 2020  : `None`)       
+000138b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000138c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000138d0: 2020 2020 2020 7c20 5468 6520 7661 6c75        | The valu
+000138e0: 6520 6f66 2074 6865 2022 6772 7063 2e6b  e of the "grpc.k
+000138f0: 6565 7061 6c69 7665 5f74 696d 656f 7574  eepalive_timeout
+00013900: 5f6d 7322 2067 5250 4320 6368 616e 6e65  _ms" gRPC channe
+00013910: 6c20 6f70 7469 6f6e 2e20 2020 2020 2020  l option.       
+00013920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013970: 2020 2020 2020 2020 2020 7c5c 6e5c 6e5c            |\n\n\
+00013980: 6e48 6572 6520 6172 6520 736f 6d65 2065  nHere are some e
+00013990: 7861 6d70 6c65 7320 6f66 2045 7665 6e74  xamples of Event
+000139a0: 5374 6f72 6544 4220 636f 6e6e 6563 7469  StoreDB connecti
+000139b0: 6f6e 2073 7472 696e 6720 5552 4973 2e5c  on string URIs.\
+000139c0: 6e5c 6e20 2020 2023 2047 6574 2063 6c75  n\n    # Get clu
+000139d0: 7374 6572 2069 6e66 6f20 6672 6f6d 2073  ster info from s
+000139e0: 6563 7572 6520 7365 7276 6572 2073 6f63  ecure server soc
+000139f0: 6b65 7420 6c6f 6361 6c68 6f73 743a 3231  ket localhost:21
+00013a00: 3133 2c5c 6e20 2020 2023 2061 6e64 2075  13,\n    # and u
+00013a10: 7365 2022 6164 6d69 6e22 2061 6e64 2022  se "admin" and "
+00013a20: 6368 616e 6765 6974 2220 6173 2075 7365  changeit" as use
+00013a30: 726e 616d 6520 616e 6420 7061 7373 776f  rname and passwo
+00013a40: 7264 5c6e 2020 2020 2320 7768 656e 206d  rd\n    # when m
+00013a50: 616b 696e 6720 6361 6c6c 7320 746f 2045  aking calls to E
+00013a60: 7665 6e74 5374 6f72 6544 4220 4150 4920  ventStoreDB API 
+00013a70: 6d65 7468 6f64 732e 5c6e 5c6e 2020 2020  methods.\n\n    
+00013a80: 6573 6462 3a2f 2f61 646d 696e 3a63 6861  esdb://admin:cha
+00013a90: 6e67 6569 7440 6c6f 6361 6c68 6f73 743a  ngeit@localhost:
+00013aa0: 3231 3133 5c6e 5c6e 5c6e 2020 2020 2320  2113\n\n\n    # 
+00013ab0: 4765 7420 636c 7573 7465 7220 696e 666f  Get cluster info
+00013ac0: 2066 726f 6d20 696e 7365 6375 7265 2073   from insecure s
+00013ad0: 6572 7665 7220 736f 636b 6574 2031 3237  erver socket 127
+00013ae0: 2e30 2e30 2e31 3a32 3131 345c 6e5c 6e20  .0.0.1:2114\n\n 
+00013af0: 2020 2065 7364 623a 2f2f 3132 372e 302e     esdb://127.0.
+00013b00: 302e 313a 3231 3134 3f54 6c73 3d66 616c  0.1:2114?Tls=fal
+00013b10: 7365 5c6e 5c6e 5c6e 2020 2020 2320 4765  se\n\n\n    # Ge
+00013b20: 7420 636c 7573 7465 7220 696e 666f 2066  t cluster info f
+00013b30: 726f 6d20 6164 6472 6573 7365 7320 696e  rom addresses in
+00013b40: 205c 2741 5c27 2072 6563 6f72 6473 2066   \'A\' records f
+00013b50: 6f72 2063 6c75 7374 6572 312e 6578 616d  or cluster1.exam
+00013b60: 706c 652e 636f 6d2c 5c6e 2020 2020 2320  ple.com,\n    # 
+00013b70: 616e 6420 7573 6520 6120 6465 6661 756c  and use a defaul
+00013b80: 7420 6465 6164 6c69 6e65 2066 6f72 206d  t deadline for m
+00013b90: 616b 696e 6720 6361 6c6c 7320 746f 2045  aking calls to E
+00013ba0: 7665 6e74 5374 6f72 6520 4150 4920 6d65  ventStore API me
+00013bb0: 7468 6f64 2e5c 6e5c 6e20 2020 2065 7364  thod.\n\n    esd
+00013bc0: 622b 6469 7363 6f76 6572 3a2f 2f61 646d  b+discover://adm
+00013bd0: 696e 3a63 6861 6e67 6569 7440 636c 7573  in:changeit@clus
+00013be0: 7465 7231 2e65 7861 6d70 6c65 2e63 6f6d  ter1.example.com
+00013bf0: 3f44 6566 6175 6c74 4465 6164 6c69 6e65  ?DefaultDeadline
+00013c00: 3d35 5c6e 5c6e 5c6e 2020 2020 2320 4765  =5\n\n\n    # Ge
+00013c10: 7420 636c 7573 7465 7220 696e 666f 2066  t cluster info f
+00013c20: 726f 6d20 6569 7468 6572 206c 6f63 616c  rom either local
+00013c30: 686f 7374 3a32 3131 3120 6f72 206c 6f63  host:2111 or loc
+00013c40: 616c 686f 7374 3a32 3131 3220 6f72 5c6e  alhost:2112 or\n
+00013c50: 2020 2020 2320 6c6f 6361 6c68 6f73 743a      # localhost:
+00013c60: 3231 3133 2c20 616e 6420 7468 656e 2063  2113, and then c
+00013c70: 6f6e 6e65 6374 2074 6f20 6120 666f 6c6c  onnect to a foll
+00013c80: 6f77 6572 206e 6f64 6520 696e 2074 6865  ower node in the
+00013c90: 2063 6c75 7374 6572 2e5c 6e5c 6e20 2020   cluster.\n\n   
+00013ca0: 2065 7364 623a 2f2f 6164 6d69 6e3a 6368   esdb://admin:ch
+00013cb0: 616e 6765 6974 406c 6f63 616c 686f 7374  angeit@localhost
+00013cc0: 3a32 3131 312c 6c6f 6361 6c68 6f73 743a  :2111,localhost:
+00013cd0: 3231 3132 2c6c 6f63 616c 686f 7374 3a32  2112,localhost:2
+00013ce0: 3131 333f 4e6f 6465 5072 6566 6572 656e  113?NodePreferen
+00013cf0: 6365 3d66 6f6c 6c6f 7765 725c 6e5c 6e5c  ce=follower\n\n\
+00013d00: 6e20 2020 2023 2047 6574 2063 6c75 7374  n    # Get clust
+00013d10: 6572 2069 6e66 6f20 6672 6f6d 2061 6464  er info from add
+00013d20: 7265 7373 6573 2069 6e20 5c27 415c 2720  resses in \'A\' 
+00013d30: 7265 636f 7264 7320 666f 7220 636c 7573  records for clus
+00013d40: 7465 7231 2e65 7861 6d70 6c65 2e63 6f6d  ter1.example.com
+00013d50: 2c5c 6e20 2020 2023 2061 6e64 2063 6f6e  ,\n    # and con
+00013d60: 6669 6775 7265 2022 6b65 6570 2061 6c69  figure "keep ali
+00013d70: 7665 2220 7469 6d65 6f75 7420 616e 6420  ve" timeout and 
+00013d80: 696e 7465 7276 616c 2069 6e20 7468 6520  interval in the 
+00013d90: 6752 5043 2063 6861 6e6e 656c 2e5c 6e5c  gRPC channel.\n\
+00013da0: 6e20 2020 2065 7364 622b 6469 7363 6f76  n    esdb+discov
+00013db0: 6572 3a2f 2f61 646d 696e 3a63 6861 6e67  er://admin:chang
+00013dc0: 6569 7440 636c 7573 7465 7231 2e65 7861  eit@cluster1.exa
+00013dd0: 6d70 6c65 2e63 6f6d 3f4b 6565 7041 6c69  mple.com?KeepAli
+00013de0: 7665 496e 7465 7276 616c 3d31 3030 3030  veInterval=10000
+00013df0: 264b 6565 7041 6c69 7665 5469 6d65 6f75  &KeepAliveTimeou
+00013e00: 743d 3130 3030 305c 6e5c 6e5c 6e50 6c65  t=10000\n\n\nPle
+00013e10: 6173 6520 6e6f 7465 2c20 7468 6520 636c  ase note, the cl
+00013e20: 6965 6e74 2069 7320 696e 7365 6e73 6974  ient is insensit
+00013e30: 6976 6520 746f 2074 6865 2063 6173 6520  ive to the case 
+00013e40: 6f66 2066 6965 6c64 7320 616e 6420 7661  of fields and va
+00013e50: 6c75 6573 2e20 4966 2066 6965 6c64 7320  lues. If fields 
+00013e60: 6172 655c 6e72 6570 6561 7465 6420 696e  are\nrepeated in
+00013e70: 2074 6865 2071 7565 7279 2073 7472 696e   the query strin
+00013e80: 672c 2074 6865 2071 7565 7279 2073 7472  g, the query str
+00013e90: 696e 6720 7769 6c6c 2062 6520 7061 7273  ing will be pars
+00013ea0: 6564 2077 6974 686f 7574 2065 7272 6f72  ed without error
+00013eb0: 2e20 486f 7765 7665 722c 5c6e 7468 6520  . However,\nthe 
+00013ec0: 636f 6e6e 6563 7469 6f6e 206f 7074 696f  connection optio
+00013ed0: 6e73 2075 7365 6420 6279 2074 6865 2063  ns used by the c
+00013ee0: 6c69 656e 7420 7769 6c6c 2075 7365 2074  lient will use t
+00013ef0: 6865 2076 616c 7565 206f 6620 7468 6520  he value of the 
+00013f00: 6669 7273 7420 6669 656c 642e 2041 6c6c  first field. All
+00013f10: 5c6e 7468 6520 6f74 6865 7220 6669 656c  \nthe other fiel
+00013f20: 642d 7661 6c75 6573 2069 6e20 7468 6520  d-values in the 
+00013f30: 7175 6572 7920 7374 7269 6e67 2077 6974  query string wit
+00013f40: 6820 7468 6520 7361 6d65 2066 6965 6c64  h the same field
+00013f50: 206e 616d 6520 7769 6c6c 2062 6520 6967   name will be ig
+00013f60: 6e6f 7265 642e 5c6e 4669 656c 6473 2077  nored.\nFields w
+00013f70: 6974 686f 7574 2076 616c 7565 7320 7769  ithout values wi
+00013f80: 6c6c 2061 6c73 6f20 6265 2069 676e 6f72  ll also be ignor
+00013f90: 6564 2e5c 6e5c 6e49 6620 7468 6520 636c  ed.\n\nIf the cl
+00013fa0: 6965 6e74 5c27 7320 6e6f 6465 2070 7265  ient\'s node pre
+00013fb0: 6665 7265 6e63 6520 6973 2022 6c65 6164  ference is "lead
+00013fc0: 6572 2220 616e 6420 7468 6520 6e6f 6465  er" and the node
+00013fd0: 2062 6563 6f6d 6573 2061 5c6e 2266 6f6c   becomes a\n"fol
+00013fe0: 6c6f 7765 7222 2c20 7468 6520 636c 6965  lower", the clie
+00013ff0: 6e74 2077 696c 6c20 6174 7465 6d70 7420  nt will attempt 
+00014000: 746f 2072 6563 6f6e 6e65 6374 2074 6f20  to reconnect to 
+00014010: 7468 6520 6375 7272 656e 7420 6c65 6164  the current lead
+00014020: 6572 2077 6865 6e20 6120 6d65 7468 6f64  er when a method
+00014030: 5c6e 6973 2063 616c 6c65 6420 7468 6174  \nis called that
+00014040: 2065 7870 6563 7473 2074 6f20 6361 6c6c   expects to call
+00014050: 2061 206c 6561 6465 722e 204d 6574 686f   a leader. Metho
+00014060: 6473 2077 6869 6368 206d 7574 6174 6520  ds which mutate 
+00014070: 7468 6520 7374 6174 6520 6f66 2074 6865  the state of the
+00014080: 2064 6174 6162 6173 655c 6e65 7870 6563   database\nexpec
+00014090: 7420 746f 2063 616c 6c20 6120 6c65 6164  t to call a lead
+000140a0: 6572 2e20 466f 7220 7375 6368 206d 6574  er. For such met
+000140b0: 686f 6473 2c20 7468 6520 4854 5450 2068  hods, the HTTP h
+000140c0: 6561 6465 7222 7265 7175 6972 6573 2d6c  eader"requires-l
+000140d0: 6561 6465 7222 2069 7320 7365 7420 746f  eader" is set to
+000140e0: 5c6e 2274 7275 6522 2c20 616e 6420 7468  \n"true", and th
+000140f0: 6973 2068 6561 6465 7220 6973 206f 6273  is header is obs
+00014100: 6572 7665 6420 6279 2074 6865 2073 6572  erved by the ser
+00014110: 7665 722c 2061 6e64 2073 6f20 6120 6e6f  ver, and so a no
+00014120: 6465 2077 6869 6368 2069 7320 6e6f 7420  de which is not 
+00014130: 6120 6c65 6164 6572 5c6e 7468 6174 2072  a leader\nthat r
+00014140: 6563 6569 7665 7320 7375 6368 2061 2072  eceives such a r
+00014150: 6571 7565 7374 2077 696c 6c20 7265 7475  equest will retu
+00014160: 726e 2061 6e20 6572 726f 722e 2054 6869  rn an error. Thi
+00014170: 7320 6572 726f 7220 6973 2064 6574 6563  s error is detec
+00014180: 7465 6420 6279 2074 6865 2063 6c69 656e  ted by the clien
+00014190: 742c 5c6e 7768 6963 6820 7769 6c6c 2074  t,\nwhich will t
+000141a0: 6865 6e20 636c 6f73 6520 7468 6520 6375  hen close the cu
+000141b0: 7272 656e 7420 6752 5043 2063 6f6e 6e65  rrent gRPC conne
+000141c0: 6374 696f 6e20 616e 6420 6372 6561 7465  ction and create
+000141d0: 2061 206e 6577 2063 6f6e 6e65 6374 696f   a new connectio
+000141e0: 6e20 746f 2074 6865 5c6e 6c65 6164 6572  n to the\nleader
+000141f0: 2e20 5468 6520 7265 7175 6573 7420 7769  . The request wi
+00014200: 6c6c 2074 6865 6e20 6265 2072 6574 7269  ll then be retri
+00014210: 6564 2077 6974 6820 7468 6520 6c65 6164  ed with the lead
+00014220: 6572 2e5c 6e5c 6e49 6620 7468 6520 636c  er.\n\nIf the cl
+00014230: 6965 6e74 5c27 7320 6e6f 6465 2070 7265  ient\'s node pre
+00014240: 6665 7265 6e63 6520 6973 2022 666f 6c6c  ference is "foll
+00014250: 6f77 6572 2220 616e 6420 7468 6572 6520  ower" and there 
+00014260: 6172 6520 6e6f 2066 6f6c 6c6f 7765 725c  are no follower\
+00014270: 6e6e 6f64 6573 2069 6e20 7468 6520 636c  nnodes in the cl
+00014280: 7573 7465 722c 2074 6865 6e20 7468 6520  uster, then the 
+00014290: 636c 6965 6e74 2077 696c 6c20 7261 6973  client will rais
+000142a0: 6520 616e 2065 7863 6570 7469 6f6e 2e20  e an exception. 
+000142b0: 5369 6d69 6c61 726c 792c 2069 6620 7468  Similarly, if th
+000142c0: 655c 6e63 6c69 656e 745c 2773 206e 6f64  e\nclient\'s nod
+000142d0: 6520 7072 6566 6572 656e 6365 2069 7320  e preference is 
+000142e0: 2272 6561 646f 6e6c 7972 6570 6c69 6361  "readonlyreplica
+000142f0: 2220 616e 6420 7468 6572 6520 6172 6520  " and there are 
+00014300: 6e6f 2072 6561 642d 6f6e 6c79 2072 6570  no read-only rep
+00014310: 6c69 6361 5c6e 6e6f 6465 7320 696e 2074  lica\nnodes in t
+00014320: 6865 2063 6c75 7374 6572 2c20 7468 656e  he cluster, then
+00014330: 2074 6865 2063 6c69 656e 7420 7769 6c6c   the client will
+00014340: 2061 6c73 6f20 7261 6973 6520 616e 2065   also raise an e
+00014350: 7863 6570 7469 6f6e 2e5c 6e5c 6e54 6865  xception.\n\nThe
+00014360: 2067 5250 4320 6368 616e 6e65 6c20 6f70   gRPC channel op
+00014370: 7469 6f6e 2022 6772 7063 2e6d 6178 5f72  tion "grpc.max_r
+00014380: 6563 6569 7665 5f6d 6573 7361 6765 5f6c  eceive_message_l
+00014390: 656e 6774 6822 2069 7320 6175 746f 6d61  ength" is automa
+000143a0: 7469 6361 6c6c 795c 6e63 6f6e 6669 6775  tically\nconfigu
+000143b0: 7265 6420 746f 2074 6865 2076 616c 7565  red to the value
+000143c0: 2060 3137 202a 2031 3032 3420 2a20 3130   `17 * 1024 * 10
+000143d0: 3234 602e 2054 6869 7320 7661 6c75 6520  24`. This value 
+000143e0: 6361 6e6e 6f74 2062 6520 6368 616e 6765  cannot be change
+000143f0: 642e 5c6e 5c6e 5c6e 2323 2320 5265 6775  d.\n\n\n### Regu
+00014400: 6c61 7220 6578 7072 6573 7369 6f6e 2066  lar expression f
+00014410: 696c 7465 7273 5c6e 5c6e 5468 6520 6669  ilters\n\nThe fi
+00014420: 6c74 6572 2061 7267 756d 656e 7473 2069  lter arguments i
+00014430: 6e20 6072 6561 645f 616c 6c5f 6576 656e  n `read_all_even
+00014440: 7473 2829 602c 2060 7375 6273 6372 6962  ts()`, `subscrib
+00014450: 655f 616c 6c5f 6576 656e 7473 2829 602c  e_all_events()`,
+00014460: 5c6e 6063 7265 6174 655f 7375 6273 6372  \n`create_subscr
+00014470: 6970 7469 6f6e 2829 6020 616e 6420 6067  iption()` and `g
+00014480: 6574 5f63 6f6d 6d69 745f 706f 7369 7469  et_commit_positi
+00014490: 6f6e 2829 6020 6172 6520 6170 706c 6965  on()` are applie
+000144a0: 6420 746f 2074 6865 2060 7479 7065 605c  d to the `type`\
+000144b0: 6e61 7474 7269 6275 7465 206f 6620 7265  nattribute of re
+000144c0: 636f 7264 6564 2065 7665 6e74 732e 5c6e  corded events.\n
+000144d0: 5c6e 5468 6520 6465 6661 756c 7420 7661  \nThe default va
+000144e0: 6c75 6520 6f66 2074 6865 2060 6669 6c74  lue of the `filt
+000144f0: 6572 5f65 7863 6c75 6465 6020 6172 6775  er_exclude` argu
+00014500: 6d65 6e74 7320 6973 2064 6573 6967 6e65  ments is designe
+00014510: 6420 746f 2065 7863 6c75 6465 5c6e 4576  d to exclude\nEv
+00014520: 656e 7453 746f 7265 4442 2022 7379 7374  entStoreDB "syst
+00014530: 656d 2220 616e 6420 2270 6572 7369 7374  em" and "persist
+00014540: 656e 6365 2073 7562 7363 7269 7074 696f  ence subscriptio
+00014550: 6e20 636f 6e66 6967 2220 6576 656e 7473  n config" events
+00014560: 2c20 7768 6963 685c 6e6f 7468 6572 7769  , which\notherwi
+00014570: 7365 2077 6f75 6c64 2062 6520 696e 636c  se would be incl
+00014580: 7564 6564 2e20 5379 7374 656d 2065 7665  uded. System eve
+00014590: 6e74 7320 6765 6e65 7261 7465 6420 6279  nts generated by
+000145a0: 2045 7665 6e74 5374 6f72 6544 4220 616c   EventStoreDB al
+000145b0: 6c5c 6e68 6176 6520 6074 7970 6560 2073  l\nhave `type` s
+000145c0: 7472 696e 6773 2074 6861 7420 7374 6172  trings that star
+000145d0: 7420 7769 7468 2074 6865 2060 2460 2073  t with the `$` s
+000145e0: 6967 6e2e 2050 6572 7369 7374 656e 6365  ign. Persistence
+000145f0: 2073 7562 7363 7269 7074 696f 6e5c 6e65   subscription\ne
+00014600: 7665 6e74 7320 6765 6e65 7261 7465 6420  vents generated 
+00014610: 7768 656e 206d 616e 6970 756c 6174 696e  when manipulatin
+00014620: 6720 7065 7273 6973 7465 6e63 6520 7375  g persistence su
+00014630: 6273 6372 6970 7469 6f6e 7320 616c 6c20  bscriptions all 
+00014640: 6861 7665 2060 7479 7065 605c 6e73 7472  have `type`\nstr
+00014650: 696e 6773 2074 6861 7420 7374 6172 7420  ings that start 
+00014660: 7769 7468 2060 5065 7273 6973 7465 6e74  with `Persistent
+00014670: 436f 6e66 6967 602e 5c6e 5c6e 466f 7220  Config`.\n\nFor 
+00014680: 6578 616d 706c 652c 2074 6f20 6d61 7463  example, to matc
+00014690: 6820 7468 6520 7479 7065 206f 6620 4576  h the type of Ev
+000146a0: 656e 7453 746f 7265 4442 2073 7973 7465  entStoreDB syste
+000146b0: 6d20 6576 656e 7473 2c20 7573 6520 7468  m events, use th
+000146c0: 6520 7265 6775 6c61 725c 6e65 7870 7265  e regular\nexpre
+000146d0: 7373 696f 6e20 6072 5c27 5c5c 242e 2b5c  ssion `r\'\\$.+\
+000146e0: 2760 2e20 506c 6561 7365 206e 6f74 652c  '`. Please note,
+000146f0: 2074 6865 2063 6f6e 7374 616e 7420 6045   the constant `E
+00014700: 5344 425f 5359 5354 454d 5f45 5645 4e54  SDB_SYSTEM_EVENT
+00014710: 535f 5245 4745 5860 2069 735c 6e73 6574  S_REGEX` is\nset
+00014720: 2074 6f20 6072 5c27 5c5c 242e 2b5c 2760   to `r\'\\$.+\'`
+00014730: 2e20 596f 7520 6361 6e20 696d 706f 7274  . You can import
+00014740: 2074 6869 7320 7661 6c75 655c 6e28 6066   this value\n(`f
+00014750: 726f 6d20 6573 6462 636c 6965 6e74 2069  rom esdbclient i
+00014760: 6d70 6f72 7420 4553 4442 5f53 5953 5445  mport ESDB_SYSTE
+00014770: 4d5f 4556 454e 5453 5f52 4547 4558 6029  M_EVENTS_REGEX`)
+00014780: 2061 6e64 2075 7365 5c6e 6974 2077 6865   and use\nit whe
+00014790: 6e20 6275 696c 6469 6e67 206c 6f6e 6765  n building longe
+000147a0: 7220 7365 7175 656e 6365 7320 6f66 2072  r sequences of r
+000147b0: 6567 756c 6172 2065 7870 7265 7373 696f  egular expressio
+000147c0: 6e73 2e5c 6e5c 6e53 696d 696c 6172 6c79  ns.\n\nSimilarly
+000147d0: 2c20 746f 206d 6174 6368 2074 6865 2074  , to match the t
+000147e0: 7970 6520 6f66 2045 7665 6e74 5374 6f72  ype of EventStor
+000147f0: 6544 4220 7065 7273 6973 7465 6e63 6520  eDB persistence 
+00014800: 7375 6273 6372 6970 7469 6f6e 2065 7665  subscription eve
+00014810: 6e74 732c 2075 7365 2074 6865 5c6e 7265  nts, use the\nre
+00014820: 6775 6c61 7220 6578 7072 6573 7369 6f6e  gular expression
+00014830: 2060 725c 2750 6572 7369 7374 656e 7443   `r\'PersistentC
+00014840: 6f6e 6669 675c 5c64 2b5c 2760 2e20 5468  onfig\\d+\'`. Th
+00014850: 6520 636f 6e73 7461 6e74 2060 4553 4442  e constant `ESDB
+00014860: 5f50 4552 5349 5354 454e 545f 434f 4e46  _PERSISTENT_CONF
+00014870: 4947 5f45 5645 4e54 535f 5245 4745 5860  IG_EVENTS_REGEX`
+00014880: 5c6e 6973 2073 6574 2074 6f20 6072 5c27  \nis set to `r\'
+00014890: 5065 7273 6973 7465 6e74 436f 6e66 6967  PersistentConfig
+000148a0: 5c5c 642b 5c27 602e 2059 6f75 2063 616e  \\d+\'`. You can
+000148b0: 2061 6c73 6f20 696d 706f 7274 2074 6869   also import thi
+000148c0: 7320 7661 6c75 655c 6e28 6066 726f 6d20  s value\n(`from 
+000148d0: 6573 6462 636c 6965 6e74 2069 6d70 6f72  esdbclient impor
+000148e0: 7420 4553 4442 5f50 4552 5349 5354 454e  t ESDB_PERSISTEN
+000148f0: 545f 434f 4e46 4947 5f45 5645 4e54 535f  T_CONFIG_EVENTS_
+00014900: 5245 4745 5860 2920 616e 6420 7573 6520  REGEX`) and use 
+00014910: 6974 2077 6865 6e20 6275 696c 6469 6e67  it when building
+00014920: 5c6e 6c6f 6e67 6572 2073 6571 7565 6e63  \nlonger sequenc
+00014930: 6573 206f 6620 7265 6775 6c61 7220 6578  es of regular ex
+00014940: 7072 6573 7369 6f6e 732e 5c6e 5c6e 5468  pressions.\n\nTh
+00014950: 6520 636f 6e73 7461 6e74 2060 4445 4641  e constant `DEFA
+00014960: 554c 545f 4558 434c 5544 455f 4649 4c54  ULT_EXCLUDE_FILT
+00014970: 4552 6020 6973 2061 2073 6571 7565 6e63  ER` is a sequenc
+00014980: 6520 6f66 2072 6567 756c 6172 2065 7870  e of regular exp
+00014990: 7265 7373 696f 6e73 2074 6861 7420 6d61  ressions that ma
+000149a0: 7463 685c 6e74 6865 2065 7665 6e74 7320  tch\nthe events 
+000149b0: 7468 6174 2045 7665 6e74 5374 6f72 6544  that EventStoreD
+000149c0: 4220 6765 6e65 7261 7465 7320 696e 7465  B generates inte
+000149d0: 726e 616c 6c79 2c20 6576 656e 7473 2074  rnally, events t
+000149e0: 6861 7420 6172 6520 6578 7472 616e 656f  hat are extraneo
+000149f0: 7573 2074 6f20 7468 6f73 655c 6e77 6869  us to those\nwhi
+00014a00: 6368 2079 6f75 2061 7070 656e 6420 7573  ch you append us
+00014a10: 696e 6720 7468 6520 6061 7070 656e 645f  ing the `append_
+00014a20: 6576 656e 7473 2829 6020 6d65 7468 6f64  events()` method
+00014a30: 2e5c 6e5c 6e46 6f72 2065 7861 6d70 6c65  .\n\nFor example
+00014a40: 2c20 746f 2065 7863 6c75 6465 2073 7973  , to exclude sys
+00014a50: 7465 6d20 6576 656e 7473 2061 6e64 2070  tem events and p
+00014a60: 6572 7369 7374 656e 6365 2073 7562 7363  ersistence subsc
+00014a70: 7269 7074 696f 6e20 636f 6e66 6967 7572  ription configur
+00014a80: 6174 696f 6e20 6576 656e 7473 2c5c 6e61  ation events,\na
+00014a90: 6e64 2073 6e61 7073 686f 7473 2c20 796f  nd snapshots, yo
+00014aa0: 7520 6d69 6768 7420 7573 6520 7468 6520  u might use the 
+00014ab0: 7365 7175 656e 6365 2060 4445 4641 554c  sequence `DEFAUL
+00014ac0: 545f 4558 434c 5544 455f 4649 4c54 4552  T_EXCLUDE_FILTER
+00014ad0: 202b 205b 5c27 2e2a 536e 6170 7368 6f74   + [\'.*Snapshot
+00014ae0: 5c27 5d60 2061 735c 6e74 6865 2076 616c  \']` as\nthe val
+00014af0: 7565 206f 6620 7468 6520 6066 696c 7465  ue of the `filte
+00014b00: 725f 6578 636c 7564 6560 2061 7267 756d  r_exclude` argum
+00014b10: 656e 7420 7768 656e 2063 616c 6c69 6e67  ent when calling
+00014b20: 2060 7265 6164 5f61 6c6c 5f65 7665 6e74   `read_all_event
+00014b30: 7328 2960 2c5c 6e60 7375 6273 6372 6962  s()`,\n`subscrib
+00014b40: 655f 616c 6c5f 6576 656e 7473 2829 602c  e_all_events()`,
+00014b50: 2060 6372 6561 7465 5f73 7562 7363 7269   `create_subscri
+00014b60: 7074 696f 6e28 2960 206f 7220 6067 6574  ption()` or `get
+00014b70: 5f63 6f6d 6d69 745f 706f 7369 7469 6f6e  _commit_position
+00014b80: 2829 602e 5c6e 5c6e 2323 2320 4e65 7720  ()`.\n\n### New 
+00014b90: 6576 656e 7420 6f62 6a65 6374 735c 6e5c  event objects\n\
+00014ba0: 6e54 6865 2060 4e65 7745 7665 6e74 6020  nThe `NewEvent` 
+00014bb0: 636c 6173 7320 6973 2075 7365 6420 7768  class is used wh
+00014bc0: 656e 2061 7070 656e 6469 6e67 2065 7665  en appending eve
+00014bd0: 6e74 732e 5c6e 5c6e 5468 6520 7265 7175  nts.\n\nThe requ
+00014be0: 6972 6564 2061 7267 756d 656e 7420 6074  ired argument `t
+00014bf0: 7970 6560 2069 7320 6120 5079 7468 6f6e  ype` is a Python
+00014c00: 2060 7374 7260 2c20 7573 6564 2074 6f20   `str`, used to 
+00014c10: 696e 6469 6361 7465 2074 6865 2074 7970  indicate the typ
+00014c20: 6520 6f66 5c6e 7468 6520 6576 656e 7420  e of\nthe event 
+00014c30: 7468 6174 2077 696c 6c20 6265 2072 6563  that will be rec
+00014c40: 6f72 6465 642e 5c6e 5c6e 5468 6520 7265  orded.\n\nThe re
+00014c50: 7175 6972 6564 2061 7267 756d 656e 7420  quired argument 
+00014c60: 6064 6174 6160 2069 7320 6120 5079 7468  `data` is a Pyth
+00014c70: 6f6e 2060 6279 7465 7360 206f 626a 6563  on `bytes` objec
+00014c80: 742c 2075 7365 6420 746f 2069 6e64 6963  t, used to indic
+00014c90: 6174 6520 7468 6520 6461 7461 206f 665c  ate the data of\
+00014ca0: 6e74 6865 2065 7665 6e74 2074 6861 7420  nthe event that 
+00014cb0: 7769 6c6c 2062 6520 7265 636f 7264 6564  will be recorded
+00014cc0: 2e5c 6e5c 6e54 6865 206f 7074 696f 6e61  .\n\nThe optiona
+00014cd0: 6c20 6172 6775 6d65 6e74 2060 6d65 7461  l argument `meta
+00014ce0: 6461 7461 6020 6973 2061 2050 7974 686f  data` is a Pytho
+00014cf0: 6e20 6062 7974 6573 6020 6f62 6a65 6374  n `bytes` object
+00014d00: 2c20 7573 6564 2074 6f20 696e 6469 6361  , used to indica
+00014d10: 7465 2061 6e79 5c6e 6d65 7461 6461 7461  te any\nmetadata
+00014d20: 206f 6620 7468 6520 6576 656e 7420 7468   of the event th
+00014d30: 6174 2077 696c 6c20 6265 2072 6563 6f72  at will be recor
+00014d40: 6465 642e 2054 6865 2064 6566 6175 6c74  ded. The default
+00014d50: 2076 616c 7565 2069 7320 616e 2065 6d70   value is an emp
+00014d60: 7479 2060 6279 7465 7360 5c6e 6f62 6a65  ty `bytes`\nobje
+00014d70: 6374 2e5c 6e5c 6e54 6865 206f 7074 696f  ct.\n\nThe optio
+00014d80: 6e61 6c20 6172 6775 6d65 6e74 2060 636f  nal argument `co
+00014d90: 6e74 656e 745f 7479 7065 6020 6973 2061  ntent_type` is a
+00014da0: 2050 7974 686f 6e20 6073 7472 602c 2075   Python `str`, u
+00014db0: 7365 6420 746f 2069 6e64 6963 6174 6520  sed to indicate 
+00014dc0: 7468 655c 6e74 7970 6520 6f66 2074 6865  the\ntype of the
+00014dd0: 2064 6174 6120 7468 6174 2077 696c 6c20   data that will 
+00014de0: 6265 2072 6563 6f72 6465 6420 666f 7220  be recorded for 
+00014df0: 7468 6973 2065 7665 6e74 2e20 5468 6520  this event. The 
+00014e00: 6465 6661 756c 7420 7661 6c75 6520 6973  default value is
+00014e10: 5c6e 6061 7070 6c69 6361 7469 6f6e 2f6a  \n`application/j
+00014e20: 736f 6e60 2c20 7768 6963 6820 696e 6469  son`, which indi
+00014e30: 6361 7465 7320 7468 6174 2074 6865 2060  cates that the `
+00014e40: 6461 7461 6020 7761 7320 7365 7269 616c  data` was serial
+00014e50: 6973 6564 2075 7369 6e67 204a 534f 4e2e  ised using JSON.
+00014e60: 5c6e 416e 2061 6c74 6572 6e61 7469 7665  \nAn alternative
+00014e70: 2076 616c 7565 2066 6f72 2074 6869 7320   value for this 
+00014e80: 6172 6775 6d65 6e74 2069 7320 6061 7070  argument is `app
+00014e90: 6c69 6361 7469 6f6e 2f6f 6374 6574 2d73  lication/octet-s
+00014ea0: 7472 6561 6d60 2e5c 6e5c 6e54 6865 206f  tream`.\n\nThe o
+00014eb0: 7074 696f 6e61 6c20 6172 6775 6d65 6e74  ptional argument
+00014ec0: 2060 6964 6020 6973 2061 2050 7974 686f   `id` is a Pytho
+00014ed0: 6e20 6055 5549 4460 206f 626a 6563 742c  n `UUID` object,
+00014ee0: 2075 7365 6420 746f 2073 7065 6369 6679   used to specify
+00014ef0: 2074 6865 2075 6e69 7175 6520 4944 5c6e   the unique ID\n
+00014f00: 6f66 2074 6865 2065 7665 6e74 2074 6861  of the event tha
+00014f10: 7420 7769 6c6c 2062 6520 7265 636f 7264  t will be record
+00014f20: 6564 2e20 5468 6973 2076 616c 7565 2077  ed. This value w
+00014f30: 696c 6c20 6465 6661 756c 7420 746f 2061  ill default to a
+00014f40: 206e 6577 2076 6572 7369 6f6e 2d34 2055   new version-4 U
+00014f50: 5549 442e 5c6e 5c6e 6060 6070 7974 686f  UID.\n\n```pytho
+00014f60: 6e5c 6e6e 6577 5f65 7665 6e74 3120 3d20  n\nnew_event1 = 
+00014f70: 4e65 7745 7665 6e74 285c 6e20 2020 2074  NewEvent(\n    t
+00014f80: 7970 653d 5c27 4f72 6465 7243 7265 6174  ype=\'OrderCreat
+00014f90: 6564 5c27 2c5c 6e20 2020 2064 6174 613d  ed\',\n    data=
+00014fa0: 625c 277b 226e 616d 6522 3a20 2247 7265  b\'{"name": "Gre
+00014fb0: 6722 7d5c 272c 5c6e 295c 6e61 7373 6572  g"}\',\n)\nasser
+00014fc0: 7420 6e65 775f 6576 656e 7431 2e74 7970  t new_event1.typ
+00014fd0: 6520 3d3d 205c 274f 7264 6572 4372 6561  e == \'OrderCrea
+00014fe0: 7465 645c 275c 6e61 7373 6572 7420 6e65  ted\'\nassert ne
+00014ff0: 775f 6576 656e 7431 2e64 6174 6120 3d3d  w_event1.data ==
+00015000: 2062 5c27 7b22 6e61 6d65 223a 2022 4772   b\'{"name": "Gr
+00015010: 6567 227d 5c27 5c6e 6173 7365 7274 206e  eg"}\'\nassert n
+00015020: 6577 5f65 7665 6e74 312e 6d65 7461 6461  ew_event1.metada
+00015030: 7461 203d 3d20 625c 275c 275c 6e61 7373  ta == b\'\'\nass
+00015040: 6572 7420 6e65 775f 6576 656e 7431 2e63  ert new_event1.c
+00015050: 6f6e 7465 6e74 5f74 7970 6520 3d3d 205c  ontent_type == \
+00015060: 2761 7070 6c69 6361 7469 6f6e 2f6a 736f  'application/jso
+00015070: 6e5c 275c 6e61 7373 6572 7420 6973 696e  n\'\nassert isin
+00015080: 7374 616e 6365 286e 6577 5f65 7665 6e74  stance(new_event
+00015090: 312e 6964 2c20 5555 4944 295c 6e5c 6e65  1.id, UUID)\n\ne
+000150a0: 7665 6e74 5f69 6420 3d20 7575 6964 3428  vent_id = uuid4(
+000150b0: 295c 6e6e 6577 5f65 7665 6e74 3220 3d20  )\nnew_event2 = 
+000150c0: 4e65 7745 7665 6e74 285c 6e20 2020 2074  NewEvent(\n    t
+000150d0: 7970 653d 5c27 496d 6167 6543 7265 6174  ype=\'ImageCreat
+000150e0: 6564 5c27 2c5c 6e20 2020 2064 6174 613d  ed\',\n    data=
+000150f0: 625c 2730 3130 3130 3130 3130 3130 3130  b\'0101010101010
+00015100: 315c 272c 5c6e 2020 2020 6d65 7461 6461  1\',\n    metada
+00015110: 7461 3d62 5c27 7b22 6122 3a20 317d 5c27  ta=b\'{"a": 1}\'
+00015120: 2c5c 6e20 2020 2063 6f6e 7465 6e74 5f74  ,\n    content_t
+00015130: 7970 653d 5c27 6170 706c 6963 6174 696f  ype=\'applicatio
+00015140: 6e2f 6f63 7465 742d 7374 7265 616d 5c27  n/octet-stream\'
+00015150: 2c5c 6e20 2020 2069 643d 6576 656e 745f  ,\n    id=event_
+00015160: 6964 2c5c 6e29 5c6e 6173 7365 7274 206e  id,\n)\nassert n
+00015170: 6577 5f65 7665 6e74 322e 7479 7065 203d  ew_event2.type =
+00015180: 3d20 5c27 496d 6167 6543 7265 6174 6564  = \'ImageCreated
+00015190: 5c27 5c6e 6173 7365 7274 206e 6577 5f65  \'\nassert new_e
+000151a0: 7665 6e74 322e 6461 7461 203d 3d20 625c  vent2.data == b\
+000151b0: 2730 3130 3130 3130 3130 3130 3130 315c  '01010101010101\
+000151c0: 275c 6e61 7373 6572 7420 6e65 775f 6576  '\nassert new_ev
+000151d0: 656e 7432 2e6d 6574 6164 6174 6120 3d3d  ent2.metadata ==
+000151e0: 2062 5c27 7b22 6122 3a20 317d 5c27 5c6e   b\'{"a": 1}\'\n
+000151f0: 6173 7365 7274 206e 6577 5f65 7665 6e74  assert new_event
+00015200: 322e 636f 6e74 656e 745f 7479 7065 203d  2.content_type =
+00015210: 3d20 5c27 6170 706c 6963 6174 696f 6e2f  = \'application/
+00015220: 6f63 7465 742d 7374 7265 616d 5c27 5c6e  octet-stream\'\n
+00015230: 6173 7365 7274 206e 6577 5f65 7665 6e74  assert new_event
+00015240: 322e 6964 203d 3d20 6576 656e 745f 6964  2.id == event_id
+00015250: 5c6e 6060 605c 6e5c 6e23 2323 2052 6563  \n```\n\n### Rec
+00015260: 6f72 6465 6420 6576 656e 7420 6f62 6a65  orded event obje
+00015270: 6374 735c 6e5c 6e54 6865 2060 5265 636f  cts\n\nThe `Reco
+00015280: 7264 6564 4576 656e 7460 2063 6c61 7373  rdedEvent` class
+00015290: 2069 7320 7573 6564 2077 6865 6e20 7265   is used when re
+000152a0: 6164 696e 6720 6576 656e 7473 2e5c 6e5c  ading events.\n\
+000152b0: 6e54 6865 2061 7474 7269 6275 7465 2060  nThe attribute `
+000152c0: 7479 7065 6020 6973 2061 2050 7974 686f  type` is a Pytho
+000152d0: 6e20 6073 7472 602c 2075 7365 6420 746f  n `str`, used to
+000152e0: 2069 6e64 6963 6174 6520 7468 6520 7479   indicate the ty
+000152f0: 7065 206f 6620 6576 656e 745c 6e74 6861  pe of event\ntha
+00015300: 7420 7761 7320 7265 636f 7264 6564 2e5c  t was recorded.\
+00015310: 6e5c 6e54 6865 2061 7474 7269 6275 7465  n\nThe attribute
+00015320: 2060 6461 7461 6020 6973 2061 2050 7974   `data` is a Pyt
+00015330: 686f 6e20 6062 7974 6573 6020 6f62 6a65  hon `bytes` obje
+00015340: 6374 2c20 7573 6564 2074 6f20 696e 6469  ct, used to indi
+00015350: 6361 7465 2074 6865 2064 6174 6120 6f66  cate the data of
+00015360: 2074 6865 5c6e 6576 656e 7420 7468 6174   the\nevent that
+00015370: 2077 6173 2072 6563 6f72 6465 642e 5c6e   was recorded.\n
+00015380: 5c6e 5468 6520 6174 7472 6962 7574 6520  \nThe attribute 
+00015390: 606d 6574 6164 6174 6160 2069 7320 6120  `metadata` is a 
+000153a0: 5079 7468 6f6e 2060 6279 7465 7360 206f  Python `bytes` o
+000153b0: 626a 6563 742c 2075 7365 6420 746f 2069  bject, used to i
+000153c0: 6e64 6963 6174 6520 7468 6520 6d65 7461  ndicate the meta
+000153d0: 6461 7461 206f 665c 6e74 6865 2065 7665  data of\nthe eve
+000153e0: 6e74 2074 6861 7420 7761 7320 7265 636f  nt that was reco
+000153f0: 7264 6564 2e5c 6e5c 6e54 6865 2061 7474  rded.\n\nThe att
+00015400: 7269 6275 7465 2060 636f 6e74 656e 745f  ribute `content_
+00015410: 7479 7065 6020 6973 2061 2050 7974 686f  type` is a Pytho
+00015420: 6e20 6073 7472 602c 2075 7365 6420 746f  n `str`, used to
+00015430: 2069 6e64 6963 6174 6520 7468 6520 7479   indicate the ty
+00015440: 7065 206f 665c 6e64 6174 6120 7468 6174  pe of\ndata that
+00015450: 2077 6173 2072 6563 6f72 6465 6420 666f   was recorded fo
+00015460: 7220 7468 6973 2065 7665 6e74 2028 7573  r this event (us
+00015470: 7561 6c6c 7920 6061 7070 6c69 6361 7469  ually `applicati
+00015480: 6f6e 2f6a 736f 6e60 2074 6f20 696e 6469  on/json` to indi
+00015490: 6361 7465 2074 6861 745c 6e74 6869 7320  cate that\nthis 
+000154a0: 6461 7461 2063 616e 2062 6520 7061 7273  data can be pars
+000154b0: 6564 2061 7320 4a53 4f4e 2c20 6275 7420  ed as JSON, but 
+000154c0: 616c 7465 726e 6174 6976 656c 7920 6061  alternatively `a
+000154d0: 7070 6c69 6361 7469 6f6e 2f6f 6374 6574  pplication/octet
+000154e0: 2d73 7472 6561 6d60 2074 6f5c 6e69 6e64  -stream` to\nind
+000154f0: 6963 6174 6520 7468 6174 2069 7420 6973  icate that it is
+00015500: 2073 6f6d 6574 6869 6e67 2065 6c73 6529   something else)
+00015510: 2e5c 6e5c 6e54 6865 2061 7474 7269 6275  .\n\nThe attribu
+00015520: 7465 2060 6964 6020 6973 2061 2050 7974  te `id` is a Pyt
+00015530: 686f 6e20 6055 5549 4460 206f 626a 6563  hon `UUID` objec
+00015540: 742c 2075 7365 6420 746f 2069 6e64 6963  t, used to indic
+00015550: 6174 6520 7468 6520 756e 6971 7565 2049  ate the unique I
+00015560: 4420 6f66 2074 6865 5c6e 6576 656e 7420  D of the\nevent 
+00015570: 7468 6174 2077 6173 2072 6563 6f72 6465  that was recorde
+00015580: 642e 2050 6c65 6173 6520 6e6f 7465 2c20  d. Please note, 
+00015590: 7768 656e 2072 6563 6f72 6465 6420 6576  when recorded ev
+000155a0: 656e 7473 2061 7265 2072 6574 7572 6e65  ents are returne
+000155b0: 6420 6672 6f6d 2061 2063 616c 6c5c 6e74  d from a call\nt
+000155c0: 6f20 6072 6561 645f 7374 7265 616d 5f65  o `read_stream_e
+000155d0: 7665 6e74 7328 2960 2069 6e20 4576 656e  vents()` in Even
+000155e0: 7453 746f 7265 4442 2076 3231 2e31 302c  tStoreDB v21.10,
+000155f0: 2074 6865 2063 6f6d 6d69 7420 706f 7369   the commit posi
+00015600: 7469 6f6e 2069 7320 6e6f 7420 6163 7475  tion is not actu
+00015610: 616c 6c79 5c6e 7365 7420 696e 2074 6865  ally\nset in the
+00015620: 2072 6573 706f 6e73 652e 2054 6869 7320   response. This 
+00015630: 6174 7472 6962 7574 6520 6973 2074 7970  attribute is typ
+00015640: 6564 2061 7320 616e 206f 7074 696f 6e61  ed as an optiona
+00015650: 6c20 7661 6c75 6520 2860 4f70 7469 6f6e  l value (`Option
+00015660: 616c 5b55 5549 445d 6029 2c5c 6e61 6e64  al[UUID]`),\nand
+00015670: 2069 6e20 7468 6520 6361 7365 206f 6620   in the case of 
+00015680: 7573 696e 6720 4576 656e 7453 746f 7265  using EventStore
+00015690: 4442 2076 3231 2e31 3020 7468 6520 7661  DB v21.10 the va
+000156a0: 6c75 6520 6f66 2074 6869 7320 6174 7472  lue of this attr
+000156b0: 6962 7574 6520 7769 6c6c 2062 6520 604e  ibute will be `N
+000156c0: 6f6e 6560 5c6e 7768 656e 2072 6561 6469  one`\nwhen readi
+000156d0: 6e67 2072 6563 6f72 6465 6420 6576 656e  ng recorded even
+000156e0: 7473 2066 726f 6d20 6120 7374 7265 616d  ts from a stream
+000156f0: 2e20 5265 636f 7264 6564 2065 7665 6e74  . Recorded event
+00015700: 7320 7769 6c6c 2068 6f77 6576 6572 2068  s will however h
+00015710: 6176 6520 7468 6973 5c6e 7661 6c75 6573  ave this\nvalues
+00015720: 2073 6574 2077 6865 6e20 7265 6164 696e   set when readin
+00015730: 6720 7265 636f 7264 6564 2065 7665 6e74  g recorded event
+00015740: 7320 6672 6f6d 2060 7265 6164 5f61 6c6c  s from `read_all
+00015750: 5f65 7665 6e74 7328 2960 2061 6e64 2066  _events()` and f
+00015760: 726f 6d20 626f 7468 5c6e 6361 7463 682d  rom both\ncatch-
+00015770: 7570 2061 6e64 2070 6572 7369 7374 656e  up and persisten
+00015780: 7420 7375 6273 6372 6970 7469 6f6e 732e  t subscriptions.
+00015790: 5c6e 5c6e 5468 6520 6174 7472 6962 7574  \n\nThe attribut
+000157a0: 6520 6073 7472 6561 6d5f 6e61 6d65 6020  e `stream_name` 
+000157b0: 6973 2061 2050 7974 686f 6e20 6073 7472  is a Python `str
+000157c0: 602c 2075 7365 6420 746f 2069 6e64 6963  `, used to indic
+000157d0: 6174 6520 7468 6520 6e61 6d65 206f 6620  ate the name of 
+000157e0: 7468 655c 6e73 7472 6561 6d20 696e 2077  the\nstream in w
+000157f0: 6869 6368 2074 6865 2065 7665 6e74 2077  hich the event w
+00015800: 6173 2072 6563 6f72 6465 642e 5c6e 5c6e  as recorded.\n\n
+00015810: 5468 6520 6174 7472 6962 7574 6520 6073  The attribute `s
+00015820: 7472 6561 6d5f 706f 7369 7469 6f6e 6020  tream_position` 
+00015830: 6973 2061 2050 7974 686f 6e20 6069 6e74  is a Python `int
+00015840: 602c 2075 7365 6420 746f 2069 6e64 6963  `, used to indic
+00015850: 6174 6520 7468 6520 706f 7369 7469 6f6e  ate the position
+00015860: 2069 6e20 7468 655c 6e73 7472 6561 6d20   in the\nstream 
+00015870: 6174 2077 6869 6368 2074 6865 2065 7665  at which the eve
+00015880: 6e74 2077 6173 2072 6563 6f72 6465 642e  nt was recorded.
+00015890: 5c6e 5c6e 5468 6520 6174 7472 6962 7574  \n\nThe attribut
+000158a0: 6520 6063 6f6d 6d69 745f 706f 7369 7469  e `commit_positi
+000158b0: 6f6e 6020 6973 2061 2050 7974 686f 6e20  on` is a Python 
+000158c0: 6069 6e74 602c 2075 7365 6420 746f 2069  `int`, used to i
+000158d0: 6e64 6963 6174 6520 7468 6520 636f 6d6d  ndicate the comm
+000158e0: 6974 2070 6f73 6974 696f 6e5c 6e61 7420  it position\nat 
+000158f0: 7768 6963 6820 7468 6520 6576 656e 7420  which the event 
+00015900: 7761 7320 7265 636f 7264 6564 2e5c 6e5c  was recorded.\n\
+00015910: 6e60 6060 7079 7468 6f6e 5c6e 6672 6f6d  n```python\nfrom
+00015920: 2065 7364 6263 6c69 656e 742e 6576 656e   esdbclient.even
+00015930: 7473 2069 6d70 6f72 7420 5265 636f 7264  ts import Record
+00015940: 6564 4576 656e 745c 6e5c 6e72 6563 6f72  edEvent\n\nrecor
+00015950: 6465 645f 6576 656e 7420 3d20 5265 636f  ded_event = Reco
+00015960: 7264 6564 4576 656e 7428 5c6e 2020 2020  rdedEvent(\n    
+00015970: 7479 7065 3d5c 274f 7264 6572 4372 6561  type=\'OrderCrea
+00015980: 7465 645c 272c 5c6e 2020 2020 6461 7461  ted\',\n    data
+00015990: 3d62 5c27 7b7d 5c27 2c5c 6e20 2020 206d  =b\'{}\',\n    m
+000159a0: 6574 6164 6174 613d 625c 275c 272c 5c6e  etadata=b\'\',\n
+000159b0: 2020 2020 636f 6e74 656e 745f 7479 7065      content_type
+000159c0: 3d5c 2761 7070 6c69 6361 7469 6f6e 2f6a  =\'application/j
+000159d0: 736f 6e5c 272c 5c6e 2020 2020 6964 3d75  son\',\n    id=u
+000159e0: 7569 6434 2829 2c5c 6e20 2020 2073 7472  uid4(),\n    str
+000159f0: 6561 6d5f 6e61 6d65 3d5c 2773 7472 6561  eam_name=\'strea
+00015a00: 6d31 5c27 2c5c 6e20 2020 2073 7472 6561  m1\',\n    strea
+00015a10: 6d5f 706f 7369 7469 6f6e 3d30 2c5c 6e20  m_position=0,\n 
+00015a20: 2020 2063 6f6d 6d69 745f 706f 7369 7469     commit_positi
+00015a30: 6f6e 3d35 3132 2c5c 6e29 5c6e 6060 605c  on=512,\n)\n```\
+00015a40: 6e5c 6e23 2323 2041 7379 6e63 696f 2063  n\n### Asyncio c
+00015a50: 6c69 656e 745c 6e5c 6e54 6865 2060 6573  lient\n\nThe `es
+00015a60: 6462 636c 6965 6e74 6020 7061 636b 6167  dbclient` packag
+00015a70: 6520 616c 736f 2069 6e63 6c75 6465 7320  e also includes 
+00015a80: 616e 2065 6172 6c79 2076 6572 7369 6f6e  an early version
+00015a90: 206f 6620 616e 2061 7379 6e63 6872 6f6e   of an asynchron
+00015aa0: 6f75 7320 492f 4f5c 6e67 5250 4320 5079  ous I/O\ngRPC Py
+00015ab0: 7468 6f6e 2063 6c69 656e 742e 2049 7420  thon client. It 
+00015ac0: 666f 6c6c 6f77 7320 6578 6163 746c 7920  follows exactly 
+00015ad0: 7468 6520 7361 6d65 2062 6568 6176 696f  the same behavio
+00015ae0: 7273 2061 7320 7468 6520 6d75 6c74 6974  rs as the multit
+00015af0: 6872 6561 6465 645c 6e60 4553 4442 436c  hreaded\n`ESDBCl
+00015b00: 6965 6e74 602c 2062 7574 2075 7365 7320  ient`, but uses 
+00015b10: 6067 7270 632e 6169 6f60 2070 6163 6b61  `grpc.aio` packa
+00015b20: 6765 2061 6e64 2074 6865 2060 6173 796e  ge and the `asyn
+00015b30: 6369 6f60 206d 6f64 756c 652c 2069 6e73  cio` module, ins
+00015b40: 7465 6164 206f 665c 6e60 6772 7063 6020  tead of\n`grpc` 
+00015b50: 616e 6420 6074 6872 6561 6469 6e67 602e  and `threading`.
+00015b60: 5c6e 5c6e 5468 6520 6061 7379 6e63 6020  \n\nThe `async` 
+00015b70: 6675 6e63 7469 6f6e 2060 4173 796e 6369  function `Asynci
+00015b80: 6f45 5344 4243 6c69 656e 7460 2063 6f6e  oESDBClient` con
+00015b90: 7374 7275 6374 7320 7468 6520 636c 6965  structs the clie
+00015ba0: 6e74 2c20 616e 6420 636f 6e6e 6563 7473  nt, and connects
+00015bb0: 2074 6f5c 6e61 2073 6572 7665 722e 2049   to\na server. I
+00015bc0: 7420 6361 6e20 6265 2069 6d70 6f72 7465  t can be importe
+00015bd0: 6420 6672 6f6d 2060 6573 6462 636c 6965  d from `esdbclie
+00015be0: 6e74 602c 2061 6e64 2063 616e 2062 6520  nt`, and can be 
+00015bf0: 6361 6c6c 6564 2077 6974 6820 7468 6520  called with the 
+00015c00: 7361 6d65 5c6e 6172 6775 6d65 6e74 7320  same\narguments 
+00015c10: 6173 2060 4553 4442 436c 6965 6e74 602e  as `ESDBClient`.
+00015c20: 5c6e 5c6e 6060 6070 7974 686f 6e5c 6e66  \n\n```python\nf
+00015c30: 726f 6d20 6573 6462 636c 6965 6e74 2069  rom esdbclient i
+00015c40: 6d70 6f72 7420 4173 796e 6369 6f45 5344  mport AsyncioESD
+00015c50: 4243 6c69 656e 745c 6e60 6060 5c6e 5c6e  BClient\n```\n\n
+00015c60: 5468 6520 6173 796e 6368 726f 6e6f 7573  The asynchronous
+00015c70: 2049 2f4f 2063 6c69 656e 7420 6861 7320   I/O client has 
+00015c80: 6061 7379 6e63 6020 6d65 7468 6f64 7320  `async` methods 
+00015c90: 6061 7070 656e 645f 6576 656e 7473 2829  `append_events()
+00015ca0: 602c 5c6e 6072 6561 645f 7374 7265 616d  `,\n`read_stream
+00015cb0: 5f65 7665 6e74 7328 2960 2c20 6072 6561  _events()`, `rea
+00015cc0: 645f 616c 6c5f 6576 656e 7473 2829 602c  d_all_events()`,
+00015cd0: 2060 7375 6273 6372 6962 655f 616c 6c5f   `subscribe_all_
+00015ce0: 6576 656e 7473 2829 602c 5c6e 6064 656c  events()`,\n`del
+00015cf0: 6574 655f 7374 7265 616d 2829 602c 2060  ete_stream()`, `
+00015d00: 746f 6d62 7374 6f6e 655f 7374 7265 616d  tombstone_stream
+00015d10: 2829 602c 2061 6e64 2060 7265 636f 6e6e  ()`, and `reconn
+00015d20: 6563 7428 2960 2e5c 6e5c 6e54 6865 7365  ect()`.\n\nThese
+00015d30: 206d 6574 686f 6473 2061 7265 2065 7175   methods are equ
+00015d40: 6976 616c 656e 7420 746f 2074 6865 206d  ivalent to the m
+00015d50: 6574 686f 6473 206f 6e20 6045 5344 4243  ethods on `ESDBC
+00015d60: 6c69 656e 7460 2e20 5468 6579 2068 6176  lient`. They hav
+00015d70: 6520 7468 6520 7361 6d65 5c6e 6d65 7468  e the same\nmeth
+00015d80: 6f64 2073 6967 6e61 7475 7265 732c 2061  od signatures, a
+00015d90: 6e64 2063 616e 2062 6520 6361 6c6c 6564  nd can be called
+00015da0: 2077 6974 6820 7468 6520 7361 6d65 2061   with the same a
+00015db0: 7267 756d 656e 7473 2c20 746f 2074 6865  rguments, to the
+00015dc0: 2073 616d 6520 6566 6665 6374 2e5c 6e54   same effect.\nT
+00015dd0: 6865 206d 6574 686f 6473 2077 6869 6368  he methods which
+00015de0: 2061 7070 6561 7220 6f6e 2060 4553 4442   appear on `ESDB
+00015df0: 436c 6965 6e74 6020 6275 7420 6e6f 7420  Client` but not 
+00015e00: 6f6e 2060 4173 796e 6369 6f45 5344 4243  on `AsyncioESDBC
+00015e10: 6c69 656e 7460 2077 696c 6c20 6265 5c6e  lient` will be\n
+00015e20: 6164 6465 6420 736f 6f6e 2e5c 6e5c 6e54  added soon.\n\nT
+00015e30: 6865 2065 7861 6d70 6c65 2062 656c 6f77  he example below
+00015e40: 2064 656d 6f6e 7374 7261 7465 7320 6061   demonstrates `a
+00015e50: 7070 656e 645f 6576 656e 7473 2829 602c  ppend_events()`,
+00015e60: 2060 7265 6164 5f73 7472 6561 6d5f 6576   `read_stream_ev
+00015e70: 656e 7473 2829 6020 616e 645c 6e60 7375  ents()` and\n`su
+00015e80: 6273 6372 6962 655f 616c 6c5f 6576 656e  bscribe_all_even
+00015e90: 7473 2829 6020 6d65 7468 6f64 732e 2054  ts()` methods. T
+00015ea0: 6865 7365 2061 7265 2074 6865 206d 6f73  hese are the mos
+00015eb0: 7420 7573 6566 756c 206d 6574 686f 6473  t useful methods
+00015ec0: 2066 6f72 2077 7269 7469 6e67 5c6e 616e   for writing\nan
+00015ed0: 2065 7665 6e74 2d73 6f75 7263 6564 2061   event-sourced a
+00015ee0: 7070 6c69 6361 7469 6f6e 2c20 616c 6c6f  pplication, allo
+00015ef0: 7769 6e67 206e 6577 2061 6767 7265 6761  wing new aggrega
+00015f00: 7465 2065 7665 6e74 7320 746f 2062 6520  te events to be 
+00015f10: 7265 636f 7264 6564 2c20 7468 655c 6e72  recorded, the\nr
+00015f20: 6563 6f72 6465 6420 6576 656e 7473 206f  ecorded events o
+00015f30: 6620 616e 2061 6767 7265 6761 7465 2074  f an aggregate t
+00015f40: 6f20 6265 206f 6274 6169 6e65 6420 736f  o be obtained so
+00015f50: 2061 6767 7265 6761 7465 7320 6361 6e20   aggregates can 
+00015f60: 6265 2072 6563 6f6e 7374 7275 6374 6564  be reconstructed
+00015f70: 2c5c 6e61 6e64 2074 6865 2073 7461 7465  ,\nand the state
+00015f80: 206f 6620 616e 2061 7070 6c69 6361 7469   of an applicati
+00015f90: 6f6e 2074 6f20 7072 6f70 6167 6174 6564  on to propagated
+00015fa0: 2061 6e64 2070 726f 6365 7373 6564 2077   and processed w
+00015fb0: 6974 6820 2265 7861 6374 6c79 2d6f 6e63  ith "exactly-onc
+00015fc0: 6522 5c6e 7365 6d61 6e74 6963 732e 5c6e  e"\nsemantics.\n
+00015fd0: 5c6e 6060 6070 7974 686f 6e5c 6e69 6d70  \n```python\nimp
+00015fe0: 6f72 7420 6173 796e 6369 6f5c 6e5c 6e61  ort asyncio\n\na
+00015ff0: 7379 6e63 2064 6566 2064 656d 6f6e 7374  sync def demonst
+00016000: 7261 7465 5f61 7379 6e63 696f 5f63 6c69  rate_asyncio_cli
+00016010: 656e 7428 293a 5c6e 5c6e 2020 2020 2320  ent():\n\n    # 
+00016020: 436f 6e73 7472 7563 7420 636c 6965 6e74  Construct client
+00016030: 2e5c 6e20 2020 2063 6c69 656e 7420 3d20  .\n    client = 
+00016040: 6177 6169 7420 4173 796e 6369 6f45 5344  await AsyncioESD
+00016050: 4243 6c69 656e 7428 5c6e 2020 2020 2020  BClient(\n      
+00016060: 2020 7572 693d 6f73 2e67 6574 656e 7628    uri=os.getenv(
+00016070: 2245 5344 425f 5552 4922 292c 5c6e 2020  "ESDB_URI"),\n  
+00016080: 2020 2020 2020 726f 6f74 5f63 6572 7469        root_certi
+00016090: 6669 6361 7465 733d 6f73 2e67 6574 656e  ficates=os.geten
+000160a0: 7628 2245 5344 425f 524f 4f54 5f43 4552  v("ESDB_ROOT_CER
+000160b0: 5449 4649 4341 5445 5322 292c 5c6e 2020  TIFICATES"),\n  
+000160c0: 2020 295c 6e5c 6e20 2020 2023 2041 7070    )\n\n    # App
+000160d0: 656e 6420 6576 656e 7473 2e5c 6e20 2020  end events.\n   
+000160e0: 2073 7472 6561 6d5f 6e61 6d65 203d 2073   stream_name = s
+000160f0: 7472 2875 7569 6434 2829 295c 6e20 2020  tr(uuid4())\n   
+00016100: 2065 7665 6e74 3120 3d20 4e65 7745 7665   event1 = NewEve
+00016110: 6e74 2822 4f72 6465 7243 7265 6174 6564  nt("OrderCreated
+00016120: 222c 2064 6174 613d 625c 277b 7d5c 2729  ", data=b\'{}\')
+00016130: 5c6e 2020 2020 6576 656e 7432 203d 204e  \n    event2 = N
+00016140: 6577 4576 656e 7428 224f 7264 6572 5570  ewEvent("OrderUp
+00016150: 6461 7465 6422 2c20 6461 7461 3d62 5c27  dated", data=b\'
+00016160: 7b7d 5c27 295c 6e20 2020 2065 7665 6e74  {}\')\n    event
+00016170: 3320 3d20 4e65 7745 7665 6e74 2822 4f72  3 = NewEvent("Or
+00016180: 6465 7244 656c 6574 6564 222c 2064 6174  derDeleted", dat
+00016190: 613d 625c 277b 7d5c 2729 5c6e 5c6e 2020  a=b\'{}\')\n\n  
+000161a0: 2020 6177 6169 7420 636c 6965 6e74 2e61    await client.a
+000161b0: 7070 656e 645f 6576 656e 7473 285c 6e20  ppend_events(\n 
+000161c0: 2020 2020 2020 2073 7472 6561 6d5f 6e61         stream_na
+000161d0: 6d65 3d73 7472 6561 6d5f 6e61 6d65 2c5c  me=stream_name,\
+000161e0: 6e20 2020 2020 2020 2065 7870 6563 7465  n        expecte
+000161f0: 645f 706f 7369 7469 6f6e 3d4e 6f6e 652c  d_position=None,
+00016200: 5c6e 2020 2020 2020 2020 6576 656e 7473  \n        events
+00016210: 3d5b 6576 656e 7431 2c20 6576 656e 7432  =[event1, event2
+00016220: 2c20 6576 656e 7433 5d5c 6e20 2020 2029  , event3]\n    )
+00016230: 5c6e 5c6e 2020 2020 2320 5265 6164 2073  \n\n    # Read s
+00016240: 7472 6561 6d20 6576 656e 7473 2e5c 6e20  tream events.\n 
+00016250: 2020 2072 6563 6f72 6465 6420 3d20 6177     recorded = aw
+00016260: 6169 7420 636c 6965 6e74 2e72 6561 645f  ait client.read_
+00016270: 7374 7265 616d 5f65 7665 6e74 7328 7374  stream_events(st
+00016280: 7265 616d 5f6e 616d 6529 5c6e 2020 2020  ream_name)\n    
+00016290: 6173 7365 7274 206c 656e 2872 6563 6f72  assert len(recor
+000162a0: 6465 6429 203d 3d20 335c 6e20 2020 2061  ded) == 3\n    a
+000162b0: 7373 6572 7420 7265 636f 7264 6564 5b30  ssert recorded[0
+000162c0: 5d2e 6964 203d 3d20 6576 656e 7431 2e69  ].id == event1.i
+000162d0: 645c 6e20 2020 2061 7373 6572 7420 7265  d\n    assert re
+000162e0: 636f 7264 6564 5b31 5d2e 6964 203d 3d20  corded[1].id == 
+000162f0: 6576 656e 7432 2e69 645c 6e20 2020 2061  event2.id\n    a
+00016300: 7373 6572 7420 7265 636f 7264 6564 5b32  ssert recorded[2
+00016310: 5d2e 6964 203d 3d20 6576 656e 7433 2e69  ].id == event3.i
+00016320: 645c 6e5c 6e5c 6e20 2020 2023 2053 7562  d\n\n\n    # Sub
+00016330: 7363 7269 6265 2061 6c6c 2065 7665 6e74  scribe all event
+00016340: 732e 5c6e 2020 2020 7265 6365 6976 6564  s.\n    received
+00016350: 203d 205b 5d5c 6e20 2020 2061 7379 6e63   = []\n    async
+00016360: 2066 6f72 2065 7665 6e74 2069 6e20 6177   for event in aw
+00016370: 6169 7420 636c 6965 6e74 2e73 7562 7363  ait client.subsc
+00016380: 7269 6265 5f61 6c6c 5f65 7665 6e74 7328  ribe_all_events(
+00016390: 293a 5c6e 2020 2020 2020 2020 7265 6365  ):\n        rece
+000163a0: 6976 6564 2e61 7070 656e 6428 6576 656e  ived.append(even
+000163b0: 7429 5c6e 2020 2020 2020 2020 6966 2065  t)\n        if e
+000163c0: 7665 6e74 2e69 6420 3d3d 2065 7665 6e74  vent.id == event
+000163d0: 332e 6964 3a5c 6e20 2020 2020 2020 2020  3.id:\n         
+000163e0: 2020 2062 7265 616b 5c6e 2020 2020 6173     break\n    as
+000163f0: 7365 7274 2072 6563 6f72 6465 645b 2d33  sert recorded[-3
+00016400: 5d2e 6964 203d 3d20 6576 656e 7431 2e69  ].id == event1.i
+00016410: 645c 6e20 2020 2061 7373 6572 7420 7265  d\n    assert re
+00016420: 636f 7264 6564 5b2d 325d 2e69 6420 3d3d  corded[-2].id ==
+00016430: 2065 7665 6e74 322e 6964 5c6e 2020 2020   event2.id\n    
+00016440: 6173 7365 7274 2072 6563 6f72 6465 645b  assert recorded[
+00016450: 2d31 5d2e 6964 203d 3d20 6576 656e 7433  -1].id == event3
+00016460: 2e69 645c 6e5c 6e5c 6e20 2020 2023 2043  .id\n\n\n    # C
+00016470: 6c6f 7365 2074 6865 2063 6c69 656e 742e  lose the client.
+00016480: 5c6e 2020 2020 6177 6169 7420 636c 6965  \n    await clie
+00016490: 6e74 2e63 6c6f 7365 2829 5c6e 5c6e 5c6e  nt.close()\n\n\n
+000164a0: 2320 5275 6e20 7468 6520 6465 6d6f 2e5c  # Run the demo.\
+000164b0: 6e61 7379 6e63 696f 2e67 6574 5f65 7665  nasyncio.get_eve
+000164c0: 6e74 5f6c 6f6f 7028 292e 7275 6e5f 756e  nt_loop().run_un
+000164d0: 7469 6c5f 636f 6d70 6c65 7465 285c 6e20  til_complete(\n 
+000164e0: 2020 2064 656d 6f6e 7374 7261 7465 5f61     demonstrate_a
+000164f0: 7379 6e63 696f 5f63 6c69 656e 7428 295c  syncio_client()\
+00016500: 6e29 5c6e 6060 605c 6e5c 6e23 2320 436f  n)\n```\n\n## Co
+00016510: 6e74 7269 6275 746f 7273 5c6e 5c6e 2323  ntributors\n\n##
+00016520: 2320 496e 7374 616c 6c20 506f 6574 7279  # Install Poetry
+00016530: 5c6e 5c6e 5468 6520 6669 7273 7420 7468  \n\nThe first th
+00016540: 696e 6720 6973 2074 6f20 6368 6563 6b20  ing is to check 
+00016550: 796f 7520 6861 7665 2050 6f65 7472 7920  you have Poetry 
+00016560: 696e 7374 616c 6c65 642e 5c6e 5c6e 2020  installed.\n\n  
+00016570: 2020 2420 706f 6574 7279 202d 2d76 6572    $ poetry --ver
+00016580: 7369 6f6e 5c6e 5c6e 4966 2079 6f75 2064  sion\n\nIf you d
+00016590: 6f6e 5c27 742c 2074 6865 6e20 706c 6561  on\'t, then plea
+000165a0: 7365 205b 696e 7374 616c 6c20 506f 6574  se [install Poet
+000165b0: 7279 5d28 6874 7470 733a 2f2f 7079 7468  ry](https://pyth
+000165c0: 6f6e 2d70 6f65 7472 792e 6f72 672f 646f  on-poetry.org/do
+000165d0: 6373 2f23 696e 7374 616c 6c69 6e67 2d77  cs/#installing-w
+000165e0: 6974 682d 7468 652d 6f66 6669 6369 616c  ith-the-official
+000165f0: 2d69 6e73 7461 6c6c 6572 292e 5c6e 5c6e  -installer).\n\n
+00016600: 2020 2020 2420 6375 726c 202d 7353 4c20      $ curl -sSL 
+00016610: 6874 7470 733a 2f2f 696e 7374 616c 6c2e  https://install.
+00016620: 7079 7468 6f6e 2d70 6f65 7472 792e 6f72  python-poetry.or
+00016630: 6720 7c20 7079 7468 6f6e 3320 2d5c 6e5c  g | python3 -\n\
+00016640: 6e49 7420 7769 6c6c 2068 656c 7020 746f  nIt will help to
+00016650: 206d 616b 6520 7375 7265 2050 6f65 7472   make sure Poetr
+00016660: 795c 2773 2062 696e 2064 6972 6563 746f  y\'s bin directo
+00016670: 7279 2069 7320 696e 2079 6f75 7220 6050  ry is in your `P
+00016680: 4154 4860 2065 6e76 6972 6f6e 6d65 6e74  ATH` environment
+00016690: 2076 6172 6961 626c 652e 5c6e 5c6e 4275   variable.\n\nBu
+000166a0: 7420 696e 2061 6e79 2063 6173 652c 206d  t in any case, m
+000166b0: 616b 6520 7375 7265 2079 6f75 206b 6e6f  ake sure you kno
+000166c0: 7720 7468 6520 7061 7468 2074 6f20 7468  w the path to th
+000166d0: 6520 6070 6f65 7472 7960 2065 7865 6375  e `poetry` execu
+000166e0: 7461 626c 652e 2054 6865 2050 6f65 7472  table. The Poetr
+000166f0: 795c 6e69 6e73 7461 6c6c 6572 2074 656c  y\ninstaller tel
+00016700: 6c73 2079 6f75 2077 6865 7265 2069 7420  ls you where it 
+00016710: 6861 7320 6265 656e 2069 6e73 7461 6c6c  has been install
+00016720: 6564 2c20 616e 6420 686f 7720 746f 2063  ed, and how to c
+00016730: 6f6e 6669 6775 7265 2079 6f75 7220 7368  onfigure your sh
+00016740: 656c 6c2e 5c6e 5c6e 506c 6561 7365 2072  ell.\n\nPlease r
+00016750: 6566 6572 2074 6f20 7468 6520 5b50 6f65  efer to the [Poe
+00016760: 7472 7920 646f 6373 5d28 6874 7470 733a  try docs](https:
+00016770: 2f2f 7079 7468 6f6e 2d70 6f65 7472 792e  //python-poetry.
+00016780: 6f72 672f 646f 6373 2f29 2066 6f72 2067  org/docs/) for g
+00016790: 7569 6461 6e63 6520 6f6e 5c6e 7573 696e  uidance on\nusin
+000167a0: 6720 506f 6574 7279 2e5c 6e5c 6e23 2323  g Poetry.\n\n###
+000167b0: 2053 6574 7570 2066 6f72 2050 7943 6861   Setup for PyCha
+000167c0: 726d 2075 7365 7273 5c6e 5c6e 596f 7520  rm users\n\nYou 
+000167d0: 6361 6e20 6561 7369 6c79 206f 6274 6169  can easily obtai
+000167e0: 6e20 7468 6520 7072 6f6a 6563 7420 6669  n the project fi
+000167f0: 6c65 7320 7573 696e 6720 5079 4368 6172  les using PyChar
+00016800: 6d20 286d 656e 7520 2247 6974 203e 2043  m (menu "Git > C
+00016810: 6c6f 6e65 2e2e 2e22 292e 5c6e 5079 4368  lone...").\nPyCh
+00016820: 6172 6d20 7769 6c6c 2074 6865 6e20 7573  arm will then us
+00016830: 7561 6c6c 7920 7072 6f6d 7074 2079 6f75  ually prompt you
+00016840: 2074 6f20 6f70 656e 2074 6865 2070 726f   to open the pro
+00016850: 6a65 6374 2e5c 6e5c 6e4f 7065 6e20 7468  ject.\n\nOpen th
+00016860: 6520 7072 6f6a 6563 7420 696e 2061 206e  e project in a n
+00016870: 6577 2077 696e 646f 772e 2050 7943 6861  ew window. PyCha
+00016880: 726d 2077 696c 6c20 7468 656e 2075 7375  rm will then usu
+00016890: 616c 6c79 2070 726f 6d70 7420 796f 7520  ally prompt you 
+000168a0: 746f 2063 7265 6174 655c 6e61 206e 6577  to create\na new
+000168b0: 2076 6972 7475 616c 2065 6e76 6972 6f6e   virtual environ
+000168c0: 6d65 6e74 2e5c 6e5c 6e43 7265 6174 6520  ment.\n\nCreate 
+000168d0: 6120 6e65 7720 506f 6574 7279 2076 6972  a new Poetry vir
+000168e0: 7475 616c 2065 6e76 6972 6f6e 6d65 6e74  tual environment
+000168f0: 2066 6f72 2074 6865 2070 726f 6a65 6374   for the project
+00016900: 2e20 4966 2050 7943 6861 726d 2064 6f65  . If PyCharm doe
+00016910: 736e 5c27 7420 616c 7265 6164 795c 6e6b  sn\'t already\nk
+00016920: 6e6f 7720 7768 6572 6520 796f 7572 2060  now where your `
+00016930: 706f 6574 7279 6020 6578 6563 7574 6162  poetry` executab
+00016940: 6c65 2069 732c 2074 6865 6e20 7365 7420  le is, then set 
+00016950: 7468 6520 7061 7468 2074 6f20 796f 7572  the path to your
+00016960: 2060 706f 6574 7279 6020 6578 6563 7574   `poetry` execut
+00016970: 6162 6c65 5c6e 696e 2074 6865 2022 4e65  able\nin the "Ne
+00016980: 7720 506f 6574 7279 2045 6e76 6972 6f6e  w Poetry Environ
+00016990: 6d65 6e74 2220 666f 726d 2069 6e70 7574  ment" form input
+000169a0: 2066 6965 6c64 206c 6162 656c 6c65 6420   field labelled 
+000169b0: 2250 6f65 7472 7920 6578 6563 7574 6162  "Poetry executab
+000169c0: 6c65 222e 2049 6e20 7468 655c 6e22 4e65  le". In the\n"Ne
+000169d0: 7720 506f 6574 7279 2045 6e76 6972 6f6e  w Poetry Environ
+000169e0: 6d65 6e74 2220 666f 726d 2c20 796f 7520  ment" form, you 
+000169f0: 7769 6c6c 2061 6c73 6f20 6861 7665 2074  will also have t
+00016a00: 6865 206f 7070 6f72 7475 6e69 7479 2074  he opportunity t
+00016a10: 6f20 7365 6c65 6374 2077 6869 6368 5c6e  o select which\n
+00016a20: 5079 7468 6f6e 2065 7865 6375 7461 626c  Python executabl
+00016a30: 6520 7769 6c6c 2062 6520 7573 6564 2062  e will be used b
+00016a40: 7920 7468 6520 7669 7274 7561 6c20 656e  y the virtual en
+00016a50: 7669 726f 6e6d 656e 742e 5c6e 5c6e 5079  vironment.\n\nPy
+00016a60: 4368 6172 6d20 7769 6c6c 2074 6865 6e20  Charm will then 
+00016a70: 6372 6561 7465 2061 206e 6577 2050 6f65  create a new Poe
+00016a80: 7472 7920 7669 7274 7561 6c20 656e 7669  try virtual envi
+00016a90: 726f 6e6d 656e 7420 666f 7220 796f 7572  ronment for your
+00016aa0: 2070 726f 6a65 6374 2c20 7573 696e 675c   project, using\
+00016ab0: 6e61 2070 6172 7469 6375 6c61 7220 7665  na particular ve
+00016ac0: 7273 696f 6e20 6f66 2050 7974 686f 6e2c  rsion of Python,
+00016ad0: 2061 6e64 2061 6c73 6f20 696e 7374 616c   and also instal
+00016ae0: 6c20 696e 746f 2074 6869 7320 7669 7274  l into this virt
+00016af0: 7561 6c20 656e 7669 726f 6e6d 656e 7420  ual environment 
+00016b00: 7468 655c 6e70 726f 6a65 6374 5c27 7320  the\nproject\'s 
+00016b10: 7061 636b 6167 6520 6465 7065 6e64 656e  package dependen
+00016b20: 6369 6573 2061 6363 6f72 6469 6e67 2074  cies according t
+00016b30: 6f20 7468 6520 7072 6f6a 6563 745c 2773  o the project\'s
+00016b40: 2060 706f 6574 7279 2e6c 6f63 6b60 2066   `poetry.lock` f
+00016b50: 696c 652e 5c6e 5c6e 596f 7520 6361 6e20  ile.\n\nYou can 
+00016b60: 6164 6420 6469 6666 6572 656e 7420 506f  add different Po
+00016b70: 6574 7279 2065 6e76 6972 6f6e 6d65 6e74  etry environment
+00016b80: 7320 666f 7220 6469 6666 6572 656e 7420  s for different 
+00016b90: 5079 7468 6f6e 2076 6572 7369 6f6e 732c  Python versions,
+00016ba0: 2061 6e64 2073 7769 7463 685c 6e62 6574   and switch\nbet
+00016bb0: 7765 656e 2074 6865 6d20 7573 696e 6720  ween them using 
+00016bc0: 7468 6520 2250 7974 686f 6e20 496e 7465  the "Python Inte
+00016bd0: 7270 7265 7465 7222 2073 6574 7469 6e67  rpreter" setting
+00016be0: 7320 6f66 2050 7943 6861 726d 2e20 4966  s of PyCharm. If
+00016bf0: 2079 6f75 2077 616e 7420 746f 2075 7365   you want to use
+00016c00: 5c6e 6120 7665 7273 696f 6e20 6f66 2050  \na version of P
+00016c10: 7974 686f 6e20 7468 6174 2069 736e 5c27  ython that isn\'
+00016c20: 7420 696e 7374 616c 6c65 642c 2065 6974  t installed, eit
+00016c30: 6865 7220 7573 6520 796f 7572 2066 6176  her use your fav
+00016c40: 6f75 7269 7465 2070 6163 6b61 6765 206d  ourite package m
+00016c50: 616e 6167 6572 2c5c 6e6f 7220 696e 7374  anager,\nor inst
+00016c60: 616c 6c20 5079 7468 6f6e 2062 7920 646f  all Python by do
+00016c70: 776e 6c6f 6164 696e 6720 616e 2069 6e73  wnloading an ins
+00016c80: 7461 6c6c 6572 2066 6f72 2072 6563 656e  taller for recen
+00016c90: 7420 7665 7273 696f 6e73 206f 6620 5079  t versions of Py
+00016ca0: 7468 6f6e 2064 6972 6563 746c 795c 6e66  thon directly\nf
+00016cb0: 726f 6d20 7468 6520 5b50 7974 686f 6e20  rom the [Python 
+00016cc0: 7765 6273 6974 655d 2868 7474 7073 3a2f  website](https:/
+00016cd0: 2f77 7777 2e70 7974 686f 6e2e 6f72 672f  /www.python.org/
+00016ce0: 646f 776e 6c6f 6164 732f 292e 5c6e 5c6e  downloads/).\n\n
+00016cf0: 4f6e 6365 2070 726f 6a65 6374 2064 6570  Once project dep
+00016d00: 656e 6465 6e63 6965 7320 6861 7665 2062  endencies have b
+00016d10: 6565 6e20 696e 7374 616c 6c65 642c 2079  een installed, y
+00016d20: 6f75 2073 686f 756c 6420 6265 2061 626c  ou should be abl
+00016d30: 6520 746f 2072 756e 2074 6573 7473 5c6e  e to run tests\n
+00016d40: 6672 6f6d 2077 6974 6869 6e20 5079 4368  from within PyCh
+00016d50: 6172 6d20 2872 6967 6874 2d63 6c69 636b  arm (right-click
+00016d60: 206f 6e20 7468 6520 6074 6573 7473 6020   on the `tests` 
+00016d70: 666f 6c64 6572 2061 6e64 2073 656c 6563  folder and selec
+00016d80: 7420 7468 6520 5c27 5275 6e5c 2720 6f70  t the \'Run\' op
+00016d90: 7469 6f6e 292e 5c6e 5c6e 4265 6361 7573  tion).\n\nBecaus
+00016da0: 6520 6f66 2061 2063 6f6e 666c 6963 7420  e of a conflict 
+00016db0: 6265 7477 6565 6e20 7079 7465 7374 2061  between pytest a
+00016dc0: 6e64 2050 7943 6861 726d 5c27 7320 6465  nd PyCharm\'s de
+00016dd0: 6275 6767 6572 2061 6e64 2074 6865 2063  bugger and the c
+00016de0: 6f76 6572 6167 6520 746f 6f6c 2c5c 6e79  overage tool,\ny
+00016df0: 6f75 206d 6179 206e 6565 6420 746f 2061  ou may need to a
+00016e00: 6464 2060 602d 2d6e 6f2d 636f 7660 6020  dd ``--no-cov`` 
+00016e10: 6173 2061 6e20 6f70 7469 6f6e 2074 6f20  as an option to 
+00016e20: 7468 6520 7465 7374 2072 756e 6e65 7220  the test runner 
+00016e30: 7465 6d70 6c61 7465 2e20 416c 7465 726e  template. Altern
+00016e40: 6174 6976 656c 792c 5c6e 6a75 7374 2075  atively,\njust u
+00016e50: 7365 2074 6865 2050 7974 686f 6e20 5374  se the Python St
+00016e60: 616e 6461 7264 204c 6962 7261 7279 5c27  andard Library\'
+00016e70: 7320 6060 756e 6974 7465 7374 6060 206d  s ``unittest`` m
+00016e80: 6f64 756c 652e 5c6e 5c6e 596f 7520 7368  odule.\n\nYou sh
+00016e90: 6f75 6c64 2061 6c73 6f20 6265 2061 626c  ould also be abl
+00016ea0: 6520 746f 206f 7065 6e20 6120 7465 726d  e to open a term
+00016eb0: 696e 616c 2077 696e 646f 7720 696e 2050  inal window in P
+00016ec0: 7943 6861 726d 2c20 616e 6420 7275 6e20  yCharm, and run 
+00016ed0: 7468 6520 7072 6f6a 6563 745c 2773 5c6e  the project\'s\n
+00016ee0: 4d61 6b65 6669 6c65 2063 6f6d 6d61 6e64  Makefile command
+00016ef0: 7320 6672 6f6d 2074 6865 2063 6f6d 6d61  s from the comma
+00016f00: 6e64 206c 696e 6520 2873 6565 2062 656c  nd line (see bel
+00016f10: 6f77 292e 5c6e 5c6e 2323 2320 5365 7475  ow).\n\n### Setu
+00016f20: 7020 6672 6f6d 2063 6f6d 6d61 6e64 206c  p from command l
+00016f30: 696e 655c 6e5c 6e4f 6274 6169 6e20 7468  ine\n\nObtain th
+00016f40: 6520 7072 6f6a 6563 7420 6669 6c65 732c  e project files,
+00016f50: 2075 7369 6e67 2047 6974 206f 7220 7375   using Git or su
+00016f60: 6974 6162 6c65 2061 6c74 6572 6e61 7469  itable alternati
+00016f70: 7665 2e5c 6e5c 6e49 6e20 6120 7465 726d  ve.\n\nIn a term
+00016f80: 696e 616c 2061 7070 6c69 6361 7469 6f6e  inal application
+00016f90: 2c20 6368 616e 6765 2079 6f75 7220 6375  , change your cu
+00016fa0: 7272 656e 7420 776f 726b 696e 6720 6469  rrent working di
+00016fb0: 7265 6374 6f72 795c 6e74 6f20 7468 6520  rectory\nto the 
+00016fc0: 726f 6f74 2066 6f6c 6465 7220 6f66 2074  root folder of t
+00016fd0: 6865 2070 726f 6a65 6374 2066 696c 6573  he project files
+00016fe0: 2e20 5468 6572 6520 7368 6f75 6c64 2062  . There should b
+00016ff0: 6520 6120 4d61 6b65 6669 6c65 5c6e 696e  e a Makefile\nin
+00017000: 2074 6869 7320 666f 6c64 6572 2e5c 6e5c   this folder.\n\
+00017010: 6e55 7365 2074 6865 204d 616b 6566 696c  nUse the Makefil
+00017020: 6520 746f 2063 7265 6174 6520 6120 6e65  e to create a ne
+00017030: 7720 506f 6574 7279 2076 6972 7475 616c  w Poetry virtual
+00017040: 2065 6e76 6972 6f6e 6d65 6e74 2066 6f72   environment for
+00017050: 2074 6865 5c6e 7072 6f6a 6563 7420 616e   the\nproject an
+00017060: 6420 696e 7374 616c 6c20 7468 6520 7072  d install the pr
+00017070: 6f6a 6563 745c 2773 2070 6163 6b61 6765  oject\'s package
+00017080: 2064 6570 656e 6465 6e63 6965 7320 696e   dependencies in
+00017090: 746f 2069 742c 5c6e 7573 696e 6720 7468  to it,\nusing th
+000170a0: 6520 666f 6c6c 6f77 696e 6720 636f 6d6d  e following comm
+000170b0: 616e 642e 5c6e 5c6e 2020 2020 2420 6d61  and.\n\n    $ ma
+000170c0: 6b65 2069 6e73 7461 6c6c 2d70 6163 6b61  ke install-packa
+000170d0: 6765 735c 6e5c 6e49 745c 2773 2061 6c73  ges\n\nIt\'s als
+000170e0: 6f20 706f 7373 6962 6c65 2074 6f20 616c  o possible to al
+000170f0: 736f 2069 6e73 7461 6c6c 2074 6865 2070  so install the p
+00017100: 726f 6a65 6374 2069 6e20 5c27 6564 6974  roject in \'edit
+00017110: 6162 6c65 206d 6f64 655c 272e 5c6e 5c6e  able mode\'.\n\n
+00017120: 2020 2020 2420 6d61 6b65 2069 6e73 7461      $ make insta
+00017130: 6c6c 5c6e 5c6e 506c 6561 7365 206e 6f74  ll\n\nPlease not
+00017140: 652c 2069 6620 796f 7520 6372 6561 7465  e, if you create
+00017150: 2074 6865 2076 6972 7475 616c 2065 6e76   the virtual env
+00017160: 6972 6f6e 6d65 6e74 2069 6e20 7468 6973  ironment in this
+00017170: 2077 6179 2c20 616e 6420 7468 656e 2074   way, and then t
+00017180: 7279 2074 6f5c 6e6f 7065 6e20 7468 6520  ry to\nopen the 
+00017190: 7072 6f6a 6563 7420 696e 2050 7943 6861  project in PyCha
+000171a0: 726d 2061 6e64 2063 6f6e 6669 6775 7265  rm and configure
+000171b0: 2074 6865 2070 726f 6a65 6374 2074 6f20   the project to 
+000171c0: 7573 6520 7468 6973 2076 6972 7475 616c  use this virtual
+000171d0: 5c6e 656e 7669 726f 6e6d 656e 7420 6173  \nenvironment as
+000171e0: 2061 6e20 2245 7869 7374 696e 6720 506f   an "Existing Po
+000171f0: 6574 7279 2045 6e76 6972 6f6e 6d65 6e74  etry Environment
+00017200: 222c 2050 7943 6861 726d 2073 6f6d 6574  ", PyCharm somet
+00017210: 696d 6573 2068 6173 2073 6f6d 655c 6e69  imes has some\ni
+00017220: 7373 7565 7320 2864 6f6e 5c27 7420 6b6e  ssues (don\'t kn
+00017230: 6f77 2077 6879 2920 7768 6963 6820 6d69  ow why) which mi
+00017240: 6768 7420 6265 2070 726f 626c 656d 6174  ght be problemat
+00017250: 6963 2e20 4966 2079 6f75 2065 6e63 6f75  ic. If you encou
+00017260: 6e74 6572 2073 7563 685c 6e69 7373 7565  nter such\nissue
+00017270: 732c 2079 6f75 2063 616e 2072 6573 6f6c  s, you can resol
+00017280: 7665 2074 6865 7365 2069 7373 7565 7320  ve these issues 
+00017290: 6279 2064 656c 6574 696e 6720 7468 6520  by deleting the 
+000172a0: 7669 7274 7561 6c20 656e 7669 726f 6e6d  virtual environm
+000172b0: 656e 745c 6e61 6e64 2063 7265 6174 696e  ent\nand creatin
+000172c0: 6720 7468 6520 506f 6574 7279 2076 6972  g the Poetry vir
+000172d0: 7475 616c 2065 6e76 6972 6f6e 6d65 6e74  tual environment
+000172e0: 2075 7369 6e67 2050 7943 6861 726d 2028   using PyCharm (
+000172f0: 7365 6520 6162 6f76 6529 2e5c 6e5c 6e23  see above).\n\n#
+00017300: 2323 2050 726f 6a65 6374 204d 616b 6566  ## Project Makef
+00017310: 696c 6520 636f 6d6d 616e 6473 5c6e 5c6e  ile commands\n\n
+00017320: 596f 7520 6361 6e20 7374 6172 7420 4576  You can start Ev
+00017330: 656e 7453 746f 7265 4442 2075 7369 6e67  entStoreDB using
+00017340: 2074 6865 2066 6f6c 6c6f 7769 6e67 2063   the following c
+00017350: 6f6d 6d61 6e64 2e5c 6e5c 6e20 2020 2024  ommand.\n\n    $
+00017360: 206d 616b 6520 7374 6172 742d 6576 656e   make start-even
+00017370: 7473 746f 7265 6462 5c6e 5c6e 596f 7520  tstoredb\n\nYou 
+00017380: 6361 6e20 7275 6e20 7465 7374 7320 7573  can run tests us
+00017390: 696e 6720 7468 6520 666f 6c6c 6f77 696e  ing the followin
+000173a0: 6720 636f 6d6d 616e 6420 286e 6565 6473  g command (needs
+000173b0: 2045 7665 6e74 5374 6f72 6544 4220 746f   EventStoreDB to
+000173c0: 2062 6520 7275 6e6e 696e 6729 2e5c 6e5c   be running).\n\
+000173d0: 6e20 2020 2024 206d 616b 6520 7465 7374  n    $ make test
+000173e0: 5c6e 5c6e 596f 7520 6361 6e20 7374 6f70  \n\nYou can stop
+000173f0: 2045 7665 6e74 5374 6f72 6544 4220 7573   EventStoreDB us
+00017400: 696e 6720 7468 6520 666f 6c6c 6f77 696e  ing the followin
+00017410: 6720 636f 6d6d 616e 642e 5c6e 5c6e 2020  g command.\n\n  
+00017420: 2020 2420 6d61 6b65 2073 746f 702d 6576    $ make stop-ev
+00017430: 656e 7473 746f 7265 6462 5c6e 5c6e 596f  entstoredb\n\nYo
+00017440: 7520 6361 6e20 6368 6563 6b20 7468 6520  u can check the 
+00017450: 666f 726d 6174 7469 6e67 206f 6620 7468  formatting of th
+00017460: 6520 636f 6465 2075 7369 6e67 2074 6865  e code using the
+00017470: 2066 6f6c 6c6f 7769 6e67 2063 6f6d 6d61   following comma
+00017480: 6e64 2e5c 6e5c 6e20 2020 2024 206d 616b  nd.\n\n    $ mak
+00017490: 6520 6c69 6e74 5c6e 5c6e 596f 7520 6361  e lint\n\nYou ca
+000174a0: 6e20 7265 666f 726d 6174 2074 6865 2063  n reformat the c
+000174b0: 6f64 6520 7573 696e 6720 7468 6520 666f  ode using the fo
+000174c0: 6c6c 6f77 696e 6720 636f 6d6d 616e 642e  llowing command.
+000174d0: 5c6e 5c6e 2020 2020 2420 6d61 6b65 2066  \n\n    $ make f
+000174e0: 6d74 5c6e 5c6e 5465 7374 7320 6265 6c6f  mt\n\nTests belo
+000174f0: 6e67 2069 6e20 602e 2f74 6573 7473 602e  ng in `./tests`.
+00017500: 2043 6f64 652d 756e 6465 722d 7465 7374   Code-under-test
+00017510: 2062 656c 6f6e 6773 2069 6e20 602e 2f65   belongs in `./e
+00017520: 7364 6263 6c69 656e 7460 2e5c 6e5c 6e45  sdbclient`.\n\nE
+00017530: 6469 7420 7061 636b 6167 6520 6465 7065  dit package depe
+00017540: 6e64 656e 6369 6573 2069 6e20 6070 7970  ndencies in `pyp
+00017550: 726f 6a65 6374 2e74 6f6d 6c60 2e20 5570  roject.toml`. Up
+00017560: 6461 7465 2069 6e73 7461 6c6c 6564 2070  date installed p
+00017570: 6163 6b61 6765 7320 2861 6e64 2074 6865  ackages (and the
+00017580: 5c6e 6070 6f65 7472 792e 6c6f 636b 6020  \n`poetry.lock` 
+00017590: 6669 6c65 2920 7573 696e 6720 7468 6520  file) using the 
+000175a0: 666f 6c6c 6f77 696e 6720 636f 6d6d 616e  following comman
+000175b0: 642e 5c6e 5c6e 2020 2020 2420 6d61 6b65  d.\n\n    $ make
+000175c0: 2075 7064 6174 652d 7061 636b 6167 6573   update-packages
+000175d0: 5c6e 272c 0a20 2020 2027 6175 7468 6f72  \n',.    'author
+000175e0: 273a 2027 4a6f 686e 2042 7977 6174 6572  ': 'John Bywater
+000175f0: 272c 0a20 2020 2027 6175 7468 6f72 5f65  ',.    'author_e
+00017600: 6d61 696c 273a 2027 6a6f 686e 2e62 7977  mail': 'john.byw
+00017610: 6174 6572 4061 7070 726f 7072 6961 7465  ater@appropriate
+00017620: 736f 6674 7761 7265 2e6e 6574 272c 0a20  software.net',. 
+00017630: 2020 2027 6d61 696e 7461 696e 6572 273a     'maintainer':
+00017640: 2027 4e6f 6e65 272c 0a20 2020 2027 6d61   'None',.    'ma
+00017650: 696e 7461 696e 6572 5f65 6d61 696c 273a  intainer_email':
+00017660: 2027 4e6f 6e65 272c 0a20 2020 2027 7572   'None',.    'ur
+00017670: 6c27 3a20 2768 7474 7073 3a2f 2f67 6974  l': 'https://git
+00017680: 6875 622e 636f 6d2f 7079 6576 656e 7473  hub.com/pyevents
+00017690: 6f75 7263 696e 672f 6573 6462 636c 6965  ourcing/esdbclie
+000176a0: 6e74 272c 0a20 2020 2027 7061 636b 6167  nt',.    'packag
+000176b0: 6573 273a 2070 6163 6b61 6765 732c 0a20  es': packages,. 
+000176c0: 2020 2027 7061 636b 6167 655f 6461 7461     'package_data
+000176d0: 273a 2070 6163 6b61 6765 5f64 6174 612c  ': package_data,
+000176e0: 0a20 2020 2027 696e 7374 616c 6c5f 7265  .    'install_re
+000176f0: 7175 6972 6573 273a 2069 6e73 7461 6c6c  quires': install
+00017700: 5f72 6571 7569 7265 732c 0a20 2020 2027  _requires,.    '
+00017710: 7079 7468 6f6e 5f72 6571 7569 7265 7327  python_requires'
+00017720: 3a20 273e 3d33 2e37 2c3c 342e 3027 2c0a  : '>=3.7,<4.0',.
+00017730: 7d0a 0a0a 7365 7475 7028 2a2a 7365 7475  }...setup(**setu
+00017740: 705f 6b77 6172 6773 290a                 p_kwargs).
```

### Comparing `esdbclient-1.0a1/PKG-INFO` & `esdbclient-1.0a2/PKG-INFO`

 * *Files 2% similar despite different names*

```diff
@@ -1,11 +1,11 @@
 00000000: 4d65 7461 6461 7461 2d56 6572 7369 6f6e  Metadata-Version
 00000010: 3a20 322e 310a 4e61 6d65 3a20 6573 6462  : 2.1.Name: esdb
 00000020: 636c 6965 6e74 0a56 6572 7369 6f6e 3a20  client.Version: 
-00000030: 312e 3061 310a 5375 6d6d 6172 793a 2050  1.0a1.Summary: P
+00000030: 312e 3061 320a 5375 6d6d 6172 793a 2050  1.0a2.Summary: P
 00000040: 7974 686f 6e20 6752 5043 2043 6c69 656e  ython gRPC Clien
 00000050: 7420 666f 7220 4576 656e 7453 746f 7265  t for EventStore
 00000060: 4442 0a48 6f6d 652d 7061 6765 3a20 6874  DB.Home-page: ht
 00000070: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
 00000080: 2f70 7965 7665 6e74 736f 7572 6369 6e67  /pyeventsourcing
 00000090: 2f65 7364 6263 6c69 656e 740a 4c69 6365  /esdbclient.Lice
 000000a0: 6e73 653a 2042 5344 2033 2d43 6c61 7573  nse: BSD 3-Claus
@@ -77,5408 +77,5803 @@
 000004c0: 0a50 726f 6a65 6374 2d55 524c 3a20 5265  .Project-URL: Re
 000004d0: 706f 7369 746f 7279 2c20 6874 7470 733a  pository, https:
 000004e0: 2f2f 6769 7468 7562 2e63 6f6d 2f70 7965  //github.com/pye
 000004f0: 7665 6e74 736f 7572 6369 6e67 2f65 7364  ventsourcing/esd
 00000500: 6263 6c69 656e 740a 4465 7363 7269 7074  bclient.Descript
 00000510: 696f 6e2d 436f 6e74 656e 742d 5479 7065  ion-Content-Type
 00000520: 3a20 7465 7874 2f6d 6172 6b64 6f77 6e0a  : text/markdown.
-00000530: 0a23 2050 7974 686f 6e20 6752 5043 2043  .# Python gRPC C
-00000540: 6c69 656e 7420 666f 7220 4576 656e 7453  lient for EventS
-00000550: 746f 7265 4442 0a0a 5468 6973 205b 5079  toreDB..This [Py
-00000560: 7468 6f6e 2070 6163 6b61 6765 5d28 6874  thon package](ht
-00000570: 7470 733a 2f2f 7079 7069 2e6f 7267 2f70  tps://pypi.org/p
-00000580: 726f 6a65 6374 2f65 7364 6263 6c69 656e  roject/esdbclien
-00000590: 742f 2920 7072 6f76 6964 6573 2061 2050  t/) provides a P
-000005a0: 7974 686f 6e0a 6752 5043 2063 6c69 656e  ython.gRPC clien
-000005b0: 7420 666f 7220 5b45 7665 6e74 5374 6f72  t for [EventStor
-000005c0: 6544 425d 2868 7474 7073 3a2f 2f77 7777  eDB](https://www
-000005d0: 2e65 7665 6e74 7374 6f72 652e 636f 6d2f  .eventstore.com/
-000005e0: 292e 0a0a 5468 6973 2063 6c69 656e 7420  )...This client 
-000005f0: 6861 7320 6265 656e 2064 6576 656c 6f70  has been develop
-00000600: 6564 2069 6e20 636f 6c6c 6162 6f72 6174  ed in collaborat
-00000610: 696f 6e20 7769 7468 2074 6865 2045 7665  ion with the Eve
-00000620: 6e74 5374 6f72 6544 420a 7465 616d 2e20  ntStoreDB.team. 
-00000630: 416c 7468 6f75 6768 206e 6f74 2061 6c6c  Although not all
-00000640: 2074 6865 2066 6561 7475 7265 7320 6f66   the features of
-00000650: 2045 7665 6e74 5374 6f72 6544 4220 6172   EventStoreDB ar
-00000660: 6520 7375 7070 6f72 7465 640a 6279 2074  e supported.by t
-00000670: 6869 7320 636c 6965 6e74 2c20 6d61 6e79  his client, many
-00000680: 206f 6620 7468 6520 6d6f 7374 2075 7365   of the most use
-00000690: 6675 6c20 6f6e 6573 2061 7265 2070 7265  ful ones are pre
-000006a0: 7365 6e74 6564 0a69 6e20 616e 2065 6173  sented.in an eas
-000006b0: 792d 746f 2d75 7365 2069 6e74 6572 6661  y-to-use interfa
-000006c0: 6365 2e0a 0a54 6869 7320 636c 6965 6e74  ce...This client
-000006d0: 2068 6173 2062 6565 6e20 7465 7374 6564   has been tested
-000006e0: 2074 6f20 776f 726b 2077 6974 6820 4576   to work with Ev
-000006f0: 656e 7453 746f 7265 4442 204c 5453 2076  entStoreDB LTS v
-00000700: 6572 7369 6f6e 7320 3231 2e31 302c 0a77  ersions 21.10,.w
-00000710: 6974 686f 7574 2061 6e64 2077 6974 686f  ithout and witho
-00000720: 7574 2053 534c 2f54 4c53 2c20 616e 6420  ut SSL/TLS, and 
-00000730: 7769 7468 2050 7974 686f 6e20 7665 7273  with Python vers
-00000740: 696f 6e73 2033 2e37 2074 6f20 332e 3131  ions 3.7 to 3.11
-00000750: 2e20 5468 6572 650a 6973 2031 3030 2520  . There.is 100% 
-00000760: 7465 7374 2063 6f76 6572 6167 652e 2054  test coverage. T
-00000770: 6865 2063 6f64 6520 6861 7320 7479 7069  he code has typi
-00000780: 6e67 2061 6e6e 6f74 6174 696f 6e73 2c20  ng annotations, 
-00000790: 6368 6563 6b65 6420 7769 7468 206d 7970  checked with myp
-000007a0: 792e 0a54 6865 2063 6f64 6520 6973 2066  y..The code is f
-000007b0: 6f72 6d61 7474 6564 2077 6974 6820 626c  ormatted with bl
-000007c0: 6163 6b20 616e 6420 6973 6f72 742c 2061  ack and isort, a
-000007d0: 6e64 2063 6865 636b 6564 2077 6974 6820  nd checked with 
-000007e0: 666c 616b 6538 2e20 506f 6574 7279 0a69  flake8. Poetry.i
-000007f0: 7320 7573 6564 2066 6f72 2070 6163 6b61  s used for packa
-00000800: 6765 206d 616e 6167 656d 656e 7420 6475  ge management du
-00000810: 7269 6e67 2064 6576 656c 6f70 6d65 6e74  ring development
-00000820: 2c20 616e 6420 666f 7220 6275 696c 6469  , and for buildi
-00000830: 6e67 2061 6e64 0a70 7562 6c69 7368 696e  ng and.publishin
-00000840: 6720 6469 7374 7269 6275 7469 6f6e 7320  g distributions 
-00000850: 746f 205b 5079 5049 5d28 6874 7470 733a  to [PyPI](https:
-00000860: 2f2f 7079 7069 2e6f 7267 2f70 726f 6a65  //pypi.org/proje
-00000870: 6374 2f65 7364 6263 6c69 656e 742f 292e  ct/esdbclient/).
-00000880: 0a0a 2323 2053 796e 6f70 7369 730a 0a54  ..## Synopsis..T
-00000890: 6865 2060 4553 4442 436c 6965 6e74 6020  he `ESDBClient` 
-000008a0: 636c 6173 7320 6361 6e20 6265 2069 6d70  class can be imp
-000008b0: 6f72 7465 6420 6672 6f6d 2074 6865 2060  orted from the `
-000008c0: 6573 6462 636c 6965 6e74 6020 7061 636b  esdbclient` pack
-000008d0: 6167 652e 0a0a 546f 2072 756e 2074 6865  age...To run the
-000008e0: 2063 6c69 656e 742c 2079 6f75 2077 696c   client, you wil
-000008f0: 6c20 6e65 6564 2061 2063 6f6e 6e65 6374  l need a connect
-00000900: 696f 6e20 7374 7269 6e67 2055 5249 2e20  ion string URI. 
-00000910: 416e 642c 2074 6f0a 636f 6e6e 6563 7420  And, to.connect 
-00000920: 746f 2061 2022 7365 6375 7265 2220 4576  to a "secure" Ev
-00000930: 656e 7453 746f 7265 4442 2073 6572 7665  entStoreDB serve
-00000940: 722c 2079 6f75 2077 696c 6c20 616c 736f  r, you will also
-00000950: 206e 6565 6420 616e 0a53 534c 2f54 4c53   need an.SSL/TLS
-00000960: 2063 6572 7469 6669 6361 7465 2e0a 0a50   certificate...P
-00000970: 726f 6261 626c 7920 7468 6520 7468 7265  robably the thre
-00000980: 6520 6d6f 7374 2075 7365 6675 6c20 6d65  e most useful me
-00000990: 7468 6f64 7320 6f66 2060 4553 4442 436c  thods of `ESDBCl
-000009a0: 6965 6e74 6020 6172 653a 0a0a 2a20 6061  ient` are:..* `a
-000009b0: 7070 656e 645f 6576 656e 7473 2829 6020  ppend_events()` 
-000009c0: 5468 6973 206d 6574 686f 6420 6361 6e20  This method can 
-000009d0: 6265 2075 7365 6420 746f 2072 6563 6f72  be used to recor
-000009e0: 640a 6576 656e 7473 2069 6e20 6120 7061  d.events in a pa
-000009f0: 7274 6963 756c 6172 2022 7374 7265 616d  rticular "stream
-00000a00: 222e 2054 6869 7320 6973 2075 7365 6675  ". This is usefu
-00000a10: 6c20 7768 656e 2065 7865 6375 7469 6e67  l when executing
-00000a20: 2061 2063 6f6d 6d61 6e64 0a69 6e20 616e   a command.in an
-00000a30: 2061 7070 6c69 6361 7469 6f6e 2e20 4569   application. Ei
-00000a40: 7468 6572 2061 6c6c 206f 7220 6e6f 6e65  ther all or none
-00000a50: 206f 6620 7468 6520 6576 656e 7473 2077   of the events w
-00000a60: 696c 6c20 6265 2072 6563 6f72 6465 642e  ill be recorded.
-00000a70: 0a0a 2a20 6072 6561 645f 7374 7265 616d  ..* `read_stream
-00000a80: 5f65 7665 6e74 7328 2960 2054 6869 7320  _events()` This 
-00000a90: 6d65 7468 6f64 2063 616e 2062 6520 7573  method can be us
-00000aa0: 6564 2074 6f20 7265 7472 6965 7665 2061  ed to retrieve a
-00000ab0: 6c6c 2074 6865 2072 6563 6f72 6465 640a  ll the recorded.
-00000ac0: 6576 656e 7473 2069 6e20 6120 2273 7472  events in a "str
-00000ad0: 6561 6d22 2e20 5468 6973 2069 7320 7573  eam". This is us
-00000ae0: 6566 756c 2066 6f72 2072 6563 6f6e 7374  eful for reconst
-00000af0: 7275 6374 696e 6720 616e 2061 6767 7265  ructing an aggre
-00000b00: 6761 7465 2062 6566 6f72 650a 6578 6563  gate before.exec
-00000b10: 7574 696e 6720 6120 636f 6d6d 616e 6420  uting a command 
-00000b20: 696e 2061 6e20 6170 706c 6963 6174 696f  in an applicatio
-00000b30: 6e2e 0a0a 2a20 6073 7562 7363 7269 6265  n...* `subscribe
-00000b40: 5f61 6c6c 5f65 7665 6e74 7328 2960 2054  _all_events()` T
-00000b50: 6869 7320 6d65 7468 6f64 2063 616e 2062  his method can b
-00000b60: 6520 7573 6564 2074 6f20 7265 6365 6976  e used to receiv
-00000b70: 6520 616c 6c20 7265 636f 7264 6564 0a65  e all recorded.e
-00000b80: 7665 6e74 7320 6163 726f 7373 2061 6c6c  vents across all
-00000b90: 2022 7374 7265 616d 7322 2e20 5468 6973   "streams". This
-00000ba0: 2069 7320 7573 6566 756c 2069 6e20 6576   is useful in ev
-00000bb0: 656e 742d 7072 6f63 6573 7369 6e67 2063  ent-processing c
-00000bc0: 6f6d 706f 6e65 6e74 732c 0a61 6e64 2073  omponents,.and s
-00000bd0: 7570 706f 7274 7320 7072 6f63 6573 7369  upports processi
-00000be0: 6e67 2065 7665 6e74 7320 7769 7468 2022  ng events with "
-00000bf0: 6578 6163 746c 792d 6f6e 6365 2220 7365  exactly-once" se
-00000c00: 6d61 6e74 6963 732e 0a0a 5468 6520 6578  mantics...The ex
-00000c10: 616d 706c 6520 6265 6c6f 7720 7573 6573  ample below uses
-00000c20: 2061 6e20 2269 6e73 6563 7572 6522 2045   an "insecure" E
-00000c30: 7665 6e74 5374 6f72 6544 4220 7365 7276  ventStoreDB serv
-00000c40: 6572 2072 756e 6e69 6e67 206c 6f63 616c  er running local
-00000c50: 6c79 206f 6e20 706f 7274 2032 3131 342e  ly on port 2114.
-00000c60: 0a0a 6060 6070 7974 686f 6e0a 696d 706f  ..```python.impo
-00000c70: 7274 2065 7364 6263 6c69 656e 742c 2075  rt esdbclient, u
-00000c80: 7569 640a 0a0a 2320 436f 6e73 7472 7563  uid...# Construc
-00000c90: 7420 4553 4442 436c 6965 6e74 2077 6974  t ESDBClient wit
-00000ca0: 6820 616e 2045 7665 6e74 5374 6f72 6544  h an EventStoreD
-00000cb0: 4220 5552 492e 0a0a 636c 6965 6e74 203d  B URI...client =
-00000cc0: 2065 7364 6263 6c69 656e 742e 4553 4442   esdbclient.ESDB
-00000cd0: 436c 6965 6e74 2875 7269 3d22 6573 6462  Client(uri="esdb
-00000ce0: 3a2f 2f6c 6f63 616c 686f 7374 3a32 3131  ://localhost:211
-00000cf0: 343f 546c 733d 6661 6c73 6522 290a 0a0a  4?Tls=false")...
-00000d00: 2320 4170 7065 6e64 2065 7665 6e74 7320  # Append events 
-00000d10: 746f 2061 206e 6577 2073 7472 6561 6d2e  to a new stream.
-00000d20: 0a0a 7374 7265 616d 5f6e 616d 6520 3d20  ..stream_name = 
-00000d30: 7374 7228 7575 6964 2e75 7569 6434 2829  str(uuid.uuid4()
-00000d40: 290a 0a65 7665 6e74 3120 3d20 6573 6462  )..event1 = esdb
-00000d50: 636c 6965 6e74 2e4e 6577 4576 656e 7428  client.NewEvent(
-00000d60: 7479 7065 3d27 4f72 6465 7243 7265 6174  type='OrderCreat
-00000d70: 6564 272c 2064 6174 613d 6227 6461 7461  ed', data=b'data
-00000d80: 3127 290a 0a63 6c69 656e 742e 6170 7065  1')..client.appe
-00000d90: 6e64 5f65 7665 6e74 7328 0a20 2020 2073  nd_events(.    s
-00000da0: 7472 6561 6d5f 6e61 6d65 3d73 7472 6561  tream_name=strea
-00000db0: 6d5f 6e61 6d65 2c0a 2020 2020 6578 7065  m_name,.    expe
-00000dc0: 6374 6564 5f70 6f73 6974 696f 6e3d 4e6f  cted_position=No
-00000dd0: 6e65 2c0a 2020 2020 6576 656e 7473 3d5b  ne,.    events=[
-00000de0: 6576 656e 7431 5d2c 0a29 0a0a 0a23 2041  event1],.)...# A
-00000df0: 7070 656e 6420 6d6f 7265 2065 7665 6e74  ppend more event
-00000e00: 7320 746f 2061 6e20 6578 6973 7469 6e67  s to an existing
-00000e10: 2073 7472 6561 6d2e 0a0a 6576 656e 7432   stream...event2
-00000e20: 203d 2065 7364 6263 6c69 656e 742e 4e65   = esdbclient.Ne
-00000e30: 7745 7665 6e74 2874 7970 653d 274f 7264  wEvent(type='Ord
-00000e40: 6572 5570 6461 7465 6427 2c20 6461 7461  erUpdated', data
-00000e50: 3d62 2764 6174 6132 2729 0a65 7665 6e74  =b'data2').event
-00000e60: 3320 3d20 6573 6462 636c 6965 6e74 2e4e  3 = esdbclient.N
-00000e70: 6577 4576 656e 7428 7479 7065 3d27 4f72  ewEvent(type='Or
-00000e80: 6465 7244 656c 6574 6564 272c 2064 6174  derDeleted', dat
-00000e90: 613d 6227 6461 7461 3327 290a 0a63 6c69  a=b'data3')..cli
-00000ea0: 656e 742e 6170 7065 6e64 5f65 7665 6e74  ent.append_event
-00000eb0: 7328 0a20 2020 2073 7472 6561 6d5f 6e61  s(.    stream_na
-00000ec0: 6d65 3d73 7472 6561 6d5f 6e61 6d65 2c0a  me=stream_name,.
-00000ed0: 2020 2020 6578 7065 6374 6564 5f70 6f73      expected_pos
-00000ee0: 6974 696f 6e3d 302c 0a20 2020 2065 7665  ition=0,.    eve
-00000ef0: 6e74 733d 5b65 7665 6e74 322c 2065 7665  nts=[event2, eve
-00000f00: 6e74 335d 2c0a 290a 0a0a 2320 5265 6164  nt3],.)...# Read
-00000f10: 2061 6c6c 2065 7665 6e74 7320 7265 636f   all events reco
-00000f20: 7264 6564 2069 6e20 6120 7374 7265 616d  rded in a stream
-00000f30: 2e0a 0a72 6563 6f72 6465 6420 3d20 6c69  ...recorded = li
-00000f40: 7374 280a 2020 2020 636c 6965 6e74 2e72  st(.    client.r
-00000f50: 6561 645f 7374 7265 616d 5f65 7665 6e74  ead_stream_event
-00000f60: 7328 0a20 2020 2020 2020 2073 7472 6561  s(.        strea
-00000f70: 6d5f 6e61 6d65 3d73 7472 6561 6d5f 6e61  m_name=stream_na
-00000f80: 6d65 0a20 2020 2029 0a29 0a0a 6173 7365  me.    ).)..asse
-00000f90: 7274 206c 656e 2872 6563 6f72 6465 6429  rt len(recorded)
-00000fa0: 203d 3d20 330a 6173 7365 7274 2072 6563   == 3.assert rec
-00000fb0: 6f72 6465 645b 305d 2e64 6174 6120 3d3d  orded[0].data ==
-00000fc0: 2065 7665 6e74 312e 6461 7461 0a61 7373   event1.data.ass
-00000fd0: 6572 7420 7265 636f 7264 6564 5b31 5d2e  ert recorded[1].
-00000fe0: 6461 7461 203d 3d20 6576 656e 7432 2e64  data == event2.d
-00000ff0: 6174 610a 6173 7365 7274 2072 6563 6f72  ata.assert recor
-00001000: 6465 645b 325d 2e64 6174 6120 3d3d 2065  ded[2].data == e
-00001010: 7665 6e74 332e 6461 7461 0a61 7373 6572  vent3.data.asser
-00001020: 7420 7265 636f 7264 6564 5b30 5d2e 7479  t recorded[0].ty
-00001030: 7065 203d 3d20 6576 656e 7431 2e74 7970  pe == event1.typ
-00001040: 650a 6173 7365 7274 2072 6563 6f72 6465  e.assert recorde
-00001050: 645b 315d 2e74 7970 6520 3d3d 2065 7665  d[1].type == eve
-00001060: 6e74 322e 7479 7065 0a61 7373 6572 7420  nt2.type.assert 
-00001070: 7265 636f 7264 6564 5b32 5d2e 7479 7065  recorded[2].type
-00001080: 203d 3d20 6576 656e 7433 2e74 7970 650a   == event3.type.
-00001090: 0a0a 2320 496e 2061 6e20 6576 656e 742d  ..# In an event-
-000010a0: 7072 6f63 6573 7369 6e67 2063 6f6d 706f  processing compo
-000010b0: 6e65 6e74 2c20 7573 6520 6120 2263 6174  nent, use a "cat
-000010c0: 6368 2d75 7022 2073 7562 7363 7269 7074  ch-up" subscript
-000010d0: 696f 6e0a 2320 746f 2072 6563 6569 7665  ion.# to receive
-000010e0: 2061 6c6c 2065 7665 6e74 7320 6163 726f   all events acro
-000010f0: 7373 2061 6c6c 2073 7472 6561 6d73 2c20  ss all streams, 
-00001100: 696e 636c 7564 696e 6720 6576 656e 7473  including events
-00001110: 2074 6861 740a 2320 6861 7665 206e 6f74   that.# have not
-00001120: 2079 6574 2062 6565 6e20 7265 636f 7264   yet been record
-00001130: 6564 2c20 7374 6172 7469 6e67 2066 726f  ed, starting fro
-00001140: 6d20 7468 6520 636f 6d70 6f6e 656e 7427  m the component'
-00001150: 7320 6c61 7374 0a23 2073 6176 6564 2022  s last.# saved "
-00001160: 636f 6d6d 6974 2070 6f73 6974 696f 6e22  commit position"
-00001170: 2e0a 0a6c 6173 745f 7361 7665 645f 636f  ...last_saved_co
-00001180: 6d6d 6974 5f70 6f73 6974 696f 6e20 3d20  mmit_position = 
-00001190: 300a 0a73 7562 7363 7269 7074 696f 6e20  0..subscription 
-000011a0: 3d20 636c 6965 6e74 2e73 7562 7363 7269  = client.subscri
-000011b0: 6265 5f61 6c6c 5f65 7665 6e74 7328 0a20  be_all_events(. 
-000011c0: 2020 2063 6f6d 6d69 745f 706f 7369 7469     commit_positi
-000011d0: 6f6e 3d6c 6173 745f 7361 7665 645f 636f  on=last_saved_co
-000011e0: 6d6d 6974 5f70 6f73 6974 696f 6e0a 290a  mmit_position.).
-000011f0: 0a23 2054 6f20 696d 706c 656d 656e 7420  .# To implement 
-00001200: 2265 7861 6374 6c79 2d6f 6e63 6522 2073  "exactly-once" s
-00001210: 656d 616e 7469 6373 2c20 6974 6572 6174  emantics, iterat
-00001220: 6520 6f76 6572 2074 6865 0a23 2022 6361  e over the.# "ca
-00001230: 7463 682d 7570 2220 7375 6273 6372 6970  tch-up" subscrip
-00001240: 7469 6f6e 2e20 5072 6f63 6573 7320 6561  tion. Process ea
-00001250: 6368 2072 6563 6569 7665 6420 6576 656e  ch received even
-00001260: 742c 0a23 2069 6e20 7475 726e 2c20 7468  t,.# in turn, th
-00001270: 726f 7567 6820 616e 2065 7665 6e74 2d70  rough an event-p
-00001280: 726f 6365 7373 696e 6720 706f 6c69 6379  rocessing policy
-00001290: 2e20 5361 7665 2074 6865 0a23 2076 616c  . Save the.# val
-000012a0: 7565 206f 6620 7468 6520 636f 6d6d 6974  ue of the commit
-000012b0: 5f70 6f73 6974 696f 6e20 6174 7472 6962  _position attrib
-000012c0: 7574 6520 6f66 2074 6865 2070 726f 6365  ute of the proce
-000012d0: 7373 6564 0a23 2065 7665 6e74 2077 6974  ssed.# event wit
-000012e0: 6820 6e65 7720 7374 6174 6520 6765 6e65  h new state gene
-000012f0: 7261 7465 6420 6279 2074 6865 2070 6f6c  rated by the pol
-00001300: 6963 7920 696e 2074 6865 2073 616d 650a  icy in the same.
-00001310: 2320 6174 6f6d 6963 2074 7261 6e73 6163  # atomic transac
-00001320: 7469 6f6e 2e20 5573 6520 7468 6520 6c61  tion. Use the la
-00001330: 7374 2073 6176 6564 2022 636f 6d6d 6974  st saved "commit
-00001340: 2070 6f73 6974 696f 6e22 0a23 2077 6865   position".# whe
-00001350: 6e20 7265 7374 6172 7469 6e67 2074 6865  n restarting the
-00001360: 2022 6361 7463 682d 7570 2220 7375 6273   "catch-up" subs
-00001370: 6372 6970 7469 6f6e 2e0a 0a72 6563 6569  cription...recei
-00001380: 7665 6420 3d20 5b5d 0a66 6f72 2065 7665  ved = [].for eve
-00001390: 6e74 2069 6e20 7375 6273 6372 6970 7469  nt in subscripti
-000013a0: 6f6e 3a0a 2020 2020 7265 6365 6976 6564  on:.    received
-000013b0: 2e61 7070 656e 6428 6576 656e 7429 0a20  .append(event). 
-000013c0: 2020 2069 6620 6576 656e 742e 6964 203d     if event.id =
-000013d0: 3d20 6576 656e 7433 2e69 643a 0a20 2020  = event3.id:.   
-000013e0: 2020 2020 2062 7265 616b 0a0a 6173 7365       break..asse
-000013f0: 7274 2072 6563 6569 7665 645b 2d33 5d2e  rt received[-3].
-00001400: 6461 7461 203d 3d20 6576 656e 7431 2e64  data == event1.d
-00001410: 6174 610a 6173 7365 7274 2072 6563 6569  ata.assert recei
-00001420: 7665 645b 2d32 5d2e 6461 7461 203d 3d20  ved[-2].data == 
-00001430: 6576 656e 7432 2e64 6174 610a 6173 7365  event2.data.asse
-00001440: 7274 2072 6563 6569 7665 645b 2d31 5d2e  rt received[-1].
-00001450: 6461 7461 203d 3d20 6576 656e 7433 2e64  data == event3.d
-00001460: 6174 610a 6173 7365 7274 2072 6563 6569  ata.assert recei
-00001470: 7665 645b 2d33 5d2e 7479 7065 203d 3d20  ved[-3].type == 
-00001480: 6576 656e 7431 2e74 7970 650a 6173 7365  event1.type.asse
-00001490: 7274 2072 6563 6569 7665 645b 2d32 5d2e  rt received[-2].
-000014a0: 7479 7065 203d 3d20 6576 656e 7432 2e74  type == event2.t
-000014b0: 7970 650a 6173 7365 7274 2072 6563 6569  ype.assert recei
-000014c0: 7665 645b 2d31 5d2e 7479 7065 203d 3d20  ved[-1].type == 
-000014d0: 6576 656e 7433 2e74 7970 650a 0a61 7373  event3.type..ass
-000014e0: 6572 7420 7265 6365 6976 6564 5b2d 335d  ert received[-3]
-000014f0: 2e63 6f6d 6d69 745f 706f 7369 7469 6f6e  .commit_position
-00001500: 203e 2030 0a61 7373 6572 7420 7265 6365   > 0.assert rece
-00001510: 6976 6564 5b2d 325d 2e63 6f6d 6d69 745f  ived[-2].commit_
-00001520: 706f 7369 7469 6f6e 203e 2072 6563 6569  position > recei
-00001530: 7665 645b 2d33 5d2e 636f 6d6d 6974 5f70  ved[-3].commit_p
-00001540: 6f73 6974 696f 6e0a 6173 7365 7274 2072  osition.assert r
-00001550: 6563 6569 7665 645b 2d31 5d2e 636f 6d6d  eceived[-1].comm
-00001560: 6974 5f70 6f73 6974 696f 6e20 3e20 7265  it_position > re
-00001570: 6365 6976 6564 5b2d 325d 2e63 6f6d 6d69  ceived[-2].commi
-00001580: 745f 706f 7369 7469 6f6e 0a0a 0a23 2043  t_position...# C
-00001590: 6c6f 7365 2074 6865 2063 6c69 656e 7420  lose the client 
-000015a0: 6166 7465 7220 7573 652e 0a0a 636c 6965  after use...clie
-000015b0: 6e74 2e63 6c6f 7365 2829 0a60 6060 0a0a  nt.close().```..
-000015c0: 5365 6520 6265 6c6f 7720 666f 7220 6d6f  See below for mo
-000015d0: 7265 2064 6574 6169 6c73 2e0a 0a46 6f72  re details...For
-000015e0: 2061 6e20 6578 616d 706c 6520 6f66 2075   an example of u
-000015f0: 7361 6765 2c20 7365 6520 7468 6520 5b65  sage, see the [e
-00001600: 7665 6e74 736f 7572 6369 6e67 2d65 7665  ventsourcing-eve
-00001610: 6e74 7374 6f72 6564 625d 280a 6874 7470  ntstoredb](.http
-00001620: 733a 2f2f 6769 7468 7562 2e63 6f6d 2f70  s://github.com/p
-00001630: 7965 7665 6e74 736f 7572 6369 6e67 2f65  yeventsourcing/e
-00001640: 7665 6e74 736f 7572 6369 6e67 2d65 7665  ventsourcing-eve
-00001650: 6e74 7374 6f72 6564 6229 2070 6163 6b61  ntstoredb) packa
-00001660: 6765 2e0a 0a23 2320 5461 626c 6520 6f66  ge...## Table of
-00001670: 2063 6f6e 7465 6e74 730a 0a3c 212d 2d20   contents..<!-- 
-00001680: 544f 4320 2d2d 3e0a 2a20 5b49 6e73 7461  TOC -->.* [Insta
-00001690: 6c6c 2070 6163 6b61 6765 5d28 2369 6e73  ll package](#ins
-000016a0: 7461 6c6c 2d70 6163 6b61 6765 290a 2020  tall-package).  
-000016b0: 2a20 5b46 726f 6d20 5079 5049 5d28 2366  * [From PyPI](#f
-000016c0: 726f 6d2d 7079 7069 290a 2020 2a20 5b57  rom-pypi).  * [W
-000016d0: 6974 6820 506f 6574 7279 5d28 2377 6974  ith Poetry](#wit
-000016e0: 682d 706f 6574 7279 290a 2a20 5b45 7665  h-poetry).* [Eve
-000016f0: 6e74 5374 6f72 6544 4220 7365 7276 6572  ntStoreDB server
-00001700: 5d28 2365 7665 6e74 7374 6f72 6564 622d  ](#eventstoredb-
-00001710: 7365 7276 6572 290a 2020 2a20 5b52 756e  server).  * [Run
-00001720: 2063 6f6e 7461 696e 6572 5d28 2372 756e   container](#run
-00001730: 2d63 6f6e 7461 696e 6572 290a 2020 2a20  -container).  * 
-00001740: 5b53 746f 7020 636f 6e74 6169 6e65 725d  [Stop container]
-00001750: 2823 7374 6f70 2d63 6f6e 7461 696e 6572  (#stop-container
-00001760: 290a 2a20 5b45 7665 6e74 5374 6f72 6544  ).* [EventStoreD
-00001770: 4220 636c 6965 6e74 5d28 2365 7665 6e74  B client](#event
-00001780: 7374 6f72 6564 622d 636c 6965 6e74 290a  storedb-client).
-00001790: 2020 2a20 5b49 6d70 6f72 7420 636c 6173    * [Import clas
-000017a0: 735d 2823 696d 706f 7274 2d63 6c61 7373  s](#import-class
-000017b0: 290a 2020 2a20 5b43 6f6e 7374 7275 6374  ).  * [Construct
-000017c0: 2063 6c69 656e 745d 2823 636f 6e73 7472   client](#constr
-000017d0: 7563 742d 636c 6965 6e74 290a 2a20 5b53  uct-client).* [S
-000017e0: 7472 6561 6d73 5d28 2373 7472 6561 6d73  treams](#streams
-000017f0: 290a 2020 2a20 5b41 7070 656e 6420 6576  ).  * [Append ev
-00001800: 656e 7473 5d28 2361 7070 656e 642d 6576  ents](#append-ev
-00001810: 656e 7473 290a 2020 2a20 5b41 7070 656e  ents).  * [Appen
-00001820: 6420 6576 656e 745d 2823 6170 7065 6e64  d event](#append
-00001830: 2d65 7665 6e74 290a 2020 2a20 5b49 6465  -event).  * [Ide
-00001840: 6d70 6f74 656e 7420 6170 7065 6e64 206f  mpotent append o
-00001850: 7065 7261 7469 6f6e 735d 2823 6964 656d  perations](#idem
-00001860: 706f 7465 6e74 2d61 7070 656e 642d 6f70  potent-append-op
-00001870: 6572 6174 696f 6e73 290a 2020 2a20 5b52  erations).  * [R
-00001880: 6561 6420 7374 7265 616d 2065 7665 6e74  ead stream event
-00001890: 735d 2823 7265 6164 2d73 7472 6561 6d2d  s](#read-stream-
-000018a0: 6576 656e 7473 290a 2020 2a20 5b52 6561  events).  * [Rea
-000018b0: 6420 616c 6c20 6576 656e 7473 5d28 2372  d all events](#r
-000018c0: 6561 642d 616c 6c2d 6576 656e 7473 290a  ead-all-events).
-000018d0: 2020 2a20 5b47 6574 2063 7572 7265 6e74    * [Get current
-000018e0: 2073 7472 6561 6d20 706f 7369 7469 6f6e   stream position
-000018f0: 5d28 2367 6574 2d63 7572 7265 6e74 2d73  ](#get-current-s
-00001900: 7472 6561 6d2d 706f 7369 7469 6f6e 290a  tream-position).
-00001910: 2020 2a20 5b47 6574 2063 7572 7265 6e74    * [Get current
-00001920: 2063 6f6d 6d69 7420 706f 7369 7469 6f6e   commit position
-00001930: 5d28 2367 6574 2d63 7572 7265 6e74 2d63  ](#get-current-c
-00001940: 6f6d 6d69 742d 706f 7369 7469 6f6e 290a  ommit-position).
-00001950: 2020 2a20 5b47 6574 2073 7472 6561 6d20    * [Get stream 
-00001960: 6d65 7461 6461 7461 5d28 2367 6574 2d73  metadata](#get-s
-00001970: 7472 6561 6d2d 6d65 7461 6461 7461 290a  tream-metadata).
-00001980: 2020 2a20 5b53 6574 2073 7472 6561 6d20    * [Set stream 
-00001990: 6d65 7461 6461 7461 5d28 2373 6574 2d73  metadata](#set-s
-000019a0: 7472 6561 6d2d 6d65 7461 6461 7461 290a  tream-metadata).
-000019b0: 2020 2a20 5b44 656c 6574 6520 7374 7265    * [Delete stre
-000019c0: 616d 5d28 2364 656c 6574 652d 7374 7265  am](#delete-stre
-000019d0: 616d 290a 2020 2a20 5b54 6f6d 6273 746f  am).  * [Tombsto
-000019e0: 6e65 2073 7472 6561 6d5d 2823 746f 6d62  ne stream](#tomb
-000019f0: 7374 6f6e 652d 7374 7265 616d 290a 2a20  stone-stream).* 
-00001a00: 5b43 6174 6368 2d75 7020 7375 6273 6372  [Catch-up subscr
-00001a10: 6970 7469 6f6e 735d 2823 6361 7463 682d  iptions](#catch-
-00001a20: 7570 2d73 7562 7363 7269 7074 696f 6e73  up-subscriptions
-00001a30: 290a 2020 2a20 5b48 6f77 2074 6f20 696d  ).  * [How to im
-00001a40: 706c 656d 656e 7420 6578 6163 746c 792d  plement exactly-
-00001a50: 6f6e 6365 2065 7665 6e74 2070 726f 6365  once event proce
-00001a60: 7373 696e 675d 2823 686f 772d 746f 2d69  ssing](#how-to-i
-00001a70: 6d70 6c65 6d65 6e74 2d65 7861 6374 6c79  mplement-exactly
-00001a80: 2d6f 6e63 652d 6576 656e 742d 7072 6f63  -once-event-proc
-00001a90: 6573 7369 6e67 290a 2020 2a20 5b53 7562  essing).  * [Sub
-00001aa0: 7363 7269 6265 2061 6c6c 2065 7665 6e74  scribe all event
-00001ab0: 735d 2823 7375 6273 6372 6962 652d 616c  s](#subscribe-al
-00001ac0: 6c2d 6576 656e 7473 290a 2020 2a20 5b53  l-events).  * [S
-00001ad0: 7562 7363 7269 6265 2073 7472 6561 6d20  ubscribe stream 
-00001ae0: 6576 656e 7473 5d28 2373 7562 7363 7269  events](#subscri
-00001af0: 6265 2d73 7472 6561 6d2d 6576 656e 7473  be-stream-events
-00001b00: 290a 2a20 5b50 6572 7369 7374 656e 7420  ).* [Persistent 
-00001b10: 7375 6273 6372 6970 7469 6f6e 735d 2823  subscriptions](#
-00001b20: 7065 7273 6973 7465 6e74 2d73 7562 7363  persistent-subsc
-00001b30: 7269 7074 696f 6e73 290a 2020 2a20 5b43  riptions).  * [C
-00001b40: 7265 6174 6520 7375 6273 6372 6970 7469  reate subscripti
-00001b50: 6f6e 5d28 2363 7265 6174 652d 7375 6273  on](#create-subs
-00001b60: 6372 6970 7469 6f6e 290a 2020 2a20 5b52  cription).  * [R
-00001b70: 6561 6420 7375 6273 6372 6970 7469 6f6e  ead subscription
-00001b80: 5d28 2372 6561 642d 7375 6273 6372 6970  ](#read-subscrip
-00001b90: 7469 6f6e 290a 2020 2a20 5b47 6574 2073  tion).  * [Get s
-00001ba0: 7562 7363 7269 7074 696f 6e20 696e 666f  ubscription info
-00001bb0: 5d28 2367 6574 2d73 7562 7363 7269 7074  ](#get-subscript
-00001bc0: 696f 6e2d 696e 666f 290a 2020 2a20 5b4c  ion-info).  * [L
-00001bd0: 6973 7420 7375 6273 6372 6970 7469 6f6e  ist subscription
-00001be0: 735d 2823 6c69 7374 2d73 7562 7363 7269  s](#list-subscri
-00001bf0: 7074 696f 6e73 290a 2020 2a20 5b44 656c  ptions).  * [Del
-00001c00: 6574 6520 7375 6273 6372 6970 7469 6f6e  ete subscription
-00001c10: 5d28 2364 656c 6574 652d 7375 6273 6372  ](#delete-subscr
-00001c20: 6970 7469 6f6e 290a 2020 2a20 5b43 7265  iption).  * [Cre
-00001c30: 6174 6520 7374 7265 616d 2073 7562 7363  ate stream subsc
-00001c40: 7269 7074 696f 6e5d 2823 6372 6561 7465  ription](#create
-00001c50: 2d73 7472 6561 6d2d 7375 6273 6372 6970  -stream-subscrip
-00001c60: 7469 6f6e 290a 2020 2a20 5b52 6561 6420  tion).  * [Read 
-00001c70: 7374 7265 616d 2073 7562 7363 7269 7074  stream subscript
-00001c80: 696f 6e5d 2823 7265 6164 2d73 7472 6561  ion](#read-strea
-00001c90: 6d2d 7375 6273 6372 6970 7469 6f6e 290a  m-subscription).
-00001ca0: 2020 2a20 5b47 6574 2073 7472 6561 6d20    * [Get stream 
-00001cb0: 7375 6273 6372 6970 7469 6f6e 2069 6e66  subscription inf
-00001cc0: 6f5d 2823 6765 742d 7374 7265 616d 2d73  o](#get-stream-s
-00001cd0: 7562 7363 7269 7074 696f 6e2d 696e 666f  ubscription-info
-00001ce0: 290a 2020 2a20 5b4c 6973 7420 7374 7265  ).  * [List stre
-00001cf0: 616d 2073 7562 7363 7269 7074 696f 6e73  am subscriptions
-00001d00: 5d28 236c 6973 742d 7374 7265 616d 2d73  ](#list-stream-s
-00001d10: 7562 7363 7269 7074 696f 6e73 290a 2020  ubscriptions).  
-00001d20: 2a20 5b44 656c 6574 6520 7374 7265 616d  * [Delete stream
-00001d30: 2073 7562 7363 7269 7074 696f 6e5d 2823   subscription](#
-00001d40: 6465 6c65 7465 2d73 7472 6561 6d2d 7375  delete-stream-su
-00001d50: 6273 6372 6970 7469 6f6e 290a 2a20 5b43  bscription).* [C
-00001d60: 6f6e 6e65 6374 696f 6e5d 2823 636f 6e6e  onnection](#conn
-00001d70: 6563 7469 6f6e 290a 2020 2a20 5b52 6563  ection).  * [Rec
-00001d80: 6f6e 6e65 6374 5d28 2372 6563 6f6e 6e65  onnect](#reconne
-00001d90: 6374 290a 2020 2a20 5b43 6c6f 7365 5d28  ct).  * [Close](
-00001da0: 2363 6c6f 7365 290a 2a20 5b4e 6f74 6573  #close).* [Notes
-00001db0: 5d28 236e 6f74 6573 290a 2020 2a20 5b43  ](#notes).  * [C
-00001dc0: 6f6e 6e65 6374 696f 6e20 7374 7269 6e67  onnection string
-00001dd0: 735d 2823 636f 6e6e 6563 7469 6f6e 2d73  s](#connection-s
-00001de0: 7472 696e 6773 290a 2020 2a20 5b52 6567  trings).  * [Reg
-00001df0: 756c 6172 2065 7870 7265 7373 696f 6e20  ular expression 
-00001e00: 6669 6c74 6572 735d 2823 7265 6775 6c61  filters](#regula
-00001e10: 722d 6578 7072 6573 7369 6f6e 2d66 696c  r-expression-fil
-00001e20: 7465 7273 290a 2020 2a20 5b4e 6577 2065  ters).  * [New e
-00001e30: 7665 6e74 206f 626a 6563 7473 5d28 236e  vent objects](#n
-00001e40: 6577 2d65 7665 6e74 2d6f 626a 6563 7473  ew-event-objects
-00001e50: 290a 2020 2a20 5b52 6563 6f72 6465 6420  ).  * [Recorded 
-00001e60: 6576 656e 7420 6f62 6a65 6374 735d 2823  event objects](#
-00001e70: 7265 636f 7264 6564 2d65 7665 6e74 2d6f  recorded-event-o
-00001e80: 626a 6563 7473 290a 2a20 5b43 6f6e 7472  bjects).* [Contr
-00001e90: 6962 7574 6f72 735d 2823 636f 6e74 7269  ibutors](#contri
-00001ea0: 6275 746f 7273 290a 2020 2a20 5b49 6e73  butors).  * [Ins
-00001eb0: 7461 6c6c 2050 6f65 7472 795d 2823 696e  tall Poetry](#in
-00001ec0: 7374 616c 6c2d 706f 6574 7279 290a 2020  stall-poetry).  
-00001ed0: 2a20 5b53 6574 7570 2066 6f72 2050 7943  * [Setup for PyC
-00001ee0: 6861 726d 2075 7365 7273 5d28 2373 6574  harm users](#set
-00001ef0: 7570 2d66 6f72 2d70 7963 6861 726d 2d75  up-for-pycharm-u
-00001f00: 7365 7273 290a 2020 2a20 5b53 6574 7570  sers).  * [Setup
-00001f10: 2066 726f 6d20 636f 6d6d 616e 6420 6c69   from command li
-00001f20: 6e65 5d28 2373 6574 7570 2d66 726f 6d2d  ne](#setup-from-
-00001f30: 636f 6d6d 616e 642d 6c69 6e65 290a 2020  command-line).  
-00001f40: 2a20 5b50 726f 6a65 6374 204d 616b 6566  * [Project Makef
-00001f50: 696c 6520 636f 6d6d 616e 6473 5d28 2370  ile commands](#p
-00001f60: 726f 6a65 6374 2d6d 616b 6566 696c 652d  roject-makefile-
-00001f70: 636f 6d6d 616e 6473 290a 3c21 2d2d 2054  commands).<!-- T
-00001f80: 4f43 202d 2d3e 0a0a 2323 2049 6e73 7461  OC -->..## Insta
-00001f90: 6c6c 2070 6163 6b61 6765 0a0a 4974 2069  ll package..It i
-00001fa0: 7320 7265 636f 6d6d 656e 6465 6420 746f  s recommended to
-00001fb0: 2069 6e73 7461 6c6c 2050 7974 686f 6e20   install Python 
-00001fc0: 7061 636b 6167 6573 2069 6e74 6f20 6120  packages into a 
-00001fd0: 5079 7468 6f6e 2076 6972 7475 616c 2065  Python virtual e
-00001fe0: 6e76 6972 6f6e 6d65 6e74 2e0a 0a23 2323  nvironment...###
-00001ff0: 2046 726f 6d20 5079 5049 0a0a 596f 7520   From PyPI..You 
-00002000: 6361 6e20 7573 6520 7069 7020 746f 2069  can use pip to i
-00002010: 6e73 7461 6c6c 2074 6869 7320 7061 636b  nstall this pack
-00002020: 6167 6520 6469 7265 6374 6c79 2066 726f  age directly fro
-00002030: 6d0a 5b74 6865 2050 7974 686f 6e20 5061  m.[the Python Pa
-00002040: 636b 6167 6520 496e 6465 785d 2868 7474  ckage Index](htt
-00002050: 7073 3a2f 2f70 7970 692e 6f72 672f 7072  ps://pypi.org/pr
-00002060: 6f6a 6563 742f 6573 6462 636c 6965 6e74  oject/esdbclient
-00002070: 2f29 2e0a 0a20 2020 2024 2070 6970 2069  /)...    $ pip i
-00002080: 6e73 7461 6c6c 2065 7364 6263 6c69 656e  nstall esdbclien
-00002090: 740a 0a23 2323 2057 6974 6820 506f 6574  t..### With Poet
-000020a0: 7279 0a0a 596f 7520 6361 6e20 7573 6520  ry..You can use 
-000020b0: 506f 6574 7279 2074 6f20 6164 6420 7468  Poetry to add th
-000020c0: 6973 2070 6163 6b61 6765 2074 6f20 796f  is package to yo
-000020d0: 7572 2070 7970 726f 6a65 6374 2e74 6f6d  ur pyproject.tom
-000020e0: 6c20 616e 6420 696e 7374 616c 6c20 6974  l and install it
-000020f0: 2e0a 0a20 2020 2024 2070 6f65 7472 7920  ...    $ poetry 
-00002100: 6164 6420 6573 6462 636c 6965 6e74 0a0a  add esdbclient..
-00002110: 2323 2045 7665 6e74 5374 6f72 6544 4220  ## EventStoreDB 
-00002120: 7365 7276 6572 0a0a 5468 6520 4576 656e  server..The Even
-00002130: 7453 746f 7265 4442 2073 6572 7665 7220  tStoreDB server 
-00002140: 6361 6e20 6265 2072 756e 206c 6f63 616c  can be run local
-00002150: 6c79 2075 7369 6e67 2074 6865 206f 6666  ly using the off
-00002160: 6963 6961 6c20 446f 636b 6572 2063 6f6e  icial Docker con
-00002170: 7461 696e 6572 2069 6d61 6765 2e0a 0a23  tainer image...#
-00002180: 2323 2052 756e 2063 6f6e 7461 696e 6572  ## Run container
-00002190: 0a0a 466f 7220 6465 7665 6c6f 706d 656e  ..For developmen
-000021a0: 742c 2079 6f75 2063 616e 2072 756e 2061  t, you can run a
-000021b0: 2022 7365 6375 7265 2220 4576 656e 7453   "secure" EventS
-000021c0: 746f 7265 4442 2073 6572 7665 7220 7573  toreDB server us
-000021d0: 696e 6720 7468 6520 666f 6c6c 6f77 696e  ing the followin
-000021e0: 6720 636f 6d6d 616e 642e 0a0a 2020 2020  g command...    
-000021f0: 2420 646f 636b 6572 2072 756e 202d 6420  $ docker run -d 
-00002200: 2d2d 6e61 6d65 2065 7665 6e74 7374 6f72  --name eventstor
-00002210: 6564 622d 7365 6375 7265 202d 6974 202d  edb-secure -it -
-00002220: 7020 3231 3133 3a32 3131 3320 2d2d 656e  p 2113:2113 --en
-00002230: 7620 2248 4f4d 453d 2f74 6d70 2220 6576  v "HOME=/tmp" ev
-00002240: 656e 7473 746f 7265 2f65 7665 6e74 7374  entstore/eventst
-00002250: 6f72 653a 3231 2e31 302e 392d 6275 7374  ore:21.10.9-bust
-00002260: 6572 2d73 6c69 6d20 2d2d 6465 760a 0a54  er-slim --dev..T
-00002270: 6865 2063 6f6e 6e65 6374 696f 6e20 7374  he connection st
-00002280: 7269 6e67 2066 6f72 2074 6869 7320 2273  ring for this "s
-00002290: 6563 7572 6522 2045 7665 6e74 5374 6f72  ecure" EventStor
-000022a0: 6544 4220 7365 7276 6572 2077 6f75 6c64  eDB server would
-000022b0: 2062 653a 0a0a 2020 2020 6573 6462 3a2f   be:..    esdb:/
-000022c0: 2f61 646d 696e 3a63 6861 6e67 6569 7440  /admin:changeit@
-000022d0: 6c6f 6361 6c68 6f73 743a 3231 3133 0a0a  localhost:2113..
-000022e0: 4173 2077 6520 7769 6c6c 2073 6565 2c20  As we will see, 
-000022f0: 7468 6520 636c 6965 6e74 206e 6565 6473  the client needs
-00002300: 2061 6e20 4576 656e 7453 746f 7265 4442   an EventStoreDB
-00002310: 2063 6f6e 6e65 6374 696f 6e20 7374 7269   connection stri
-00002320: 6e67 2061 7320 7468 6520 7661 6c75 6520  ng as the value 
-00002330: 6f66 0a69 7473 2060 7572 6960 2063 6f6e  of.its `uri` con
-00002340: 7374 7275 6374 6f72 2061 7267 756d 656e  structor argumen
-00002350: 742e 0a0a 546f 2063 6f6e 6e65 6374 2074  t...To connect t
-00002360: 6f20 6120 2273 6563 7572 6522 2073 6572  o a "secure" ser
-00002370: 7665 722c 2079 6f75 2077 696c 6c20 7573  ver, you will us
-00002380: 7573 616c 6c79 206e 6565 6420 746f 2069  usally need to i
-00002390: 6e63 6c75 6465 2061 2022 7573 6572 6e61  nclude a "userna
-000023a0: 6d65 220a 616e 6420 6120 2270 6173 7377  me".and a "passw
-000023b0: 6f72 6422 2069 6e20 7468 6520 636f 6e6e  ord" in the conn
-000023c0: 6563 7469 6f6e 2073 7472 696e 672c 2073  ection string, s
-000023d0: 6f20 7468 6174 2074 6865 2073 6572 7665  o that the serve
-000023e0: 7220 6361 6e20 6175 7468 656e 7469 6361  r can authentica
-000023f0: 7465 2074 6865 0a63 6c69 656e 742e 2054  te the.client. T
-00002400: 6865 2064 6566 6175 6c74 2075 7365 726e  he default usern
-00002410: 616d 6520 6973 2022 6164 6d69 6e22 2061  ame is "admin" a
-00002420: 6e64 2074 6865 2064 6566 6175 6c74 2070  nd the default p
-00002430: 6173 7377 6f72 6420 6973 2022 6368 616e  assword is "chan
-00002440: 6765 6974 222e 0a0a 5365 6520 7468 6520  geit"...See the 
-00002450: 4e6f 7465 7320 7365 6374 696f 6e20 6265  Notes section be
-00002460: 6c6f 7720 666f 7220 6d6f 7265 2069 6e66  low for more inf
-00002470: 6f72 6d61 7469 6f6e 2061 626f 7574 2045  ormation about E
-00002480: 7665 6e74 5374 6f72 6544 4220 636f 6e6e  ventStoreDB conn
-00002490: 6563 7469 6f6e 2073 7472 696e 6773 2e0a  ection strings..
-000024a0: 0a54 6f20 636f 6e6e 6563 7420 746f 2061  .To connect to a
-000024b0: 2022 7365 6375 7265 2220 7365 7276 6572   "secure" server
-000024c0: 2c20 796f 7520 7769 6c6c 2061 6c73 6f20  , you will also 
-000024d0: 6e65 6564 2061 6e20 5353 4c2f 544c 5320  need an SSL/TLS 
-000024e0: 6365 7274 6966 6963 6174 652c 2073 6f20  certificate, so 
-000024f0: 7468 6174 2074 6865 0a63 6c69 656e 7420  that the.client 
-00002500: 6361 6e20 6175 7468 656e 7469 6361 7465  can authenticate
-00002510: 2074 6865 2073 6572 7665 722e 2046 6f72   the server. For
-00002520: 2064 6576 656c 6f70 6d65 6e74 2c20 796f   development, yo
-00002530: 7520 6361 6e20 6569 7468 6572 2075 7365  u can either use
-00002540: 2074 6865 2053 534c 2f54 4c53 0a63 6572   the SSL/TLS.cer
-00002550: 7469 6669 6361 7465 206f 6620 7468 6520  tificate of the 
-00002560: 6365 7274 6966 6963 6174 6520 6175 7468  certificate auth
-00002570: 6f72 6974 7920 7573 6564 2074 6f20 6372  ority used to cr
-00002580: 6561 7465 2074 6865 2073 6572 7665 7227  eate the server'
-00002590: 7320 6365 7274 6966 6963 6174 652c 206f  s certificate, o
-000025a0: 720a 7768 656e 2075 7369 6e67 2061 2073  r.when using a s
-000025b0: 696e 676c 652d 6e6f 6465 2063 6c75 7374  ingle-node clust
-000025c0: 6572 2c20 796f 7520 6361 6e20 6765 7420  er, you can get 
-000025d0: 7468 6520 6365 7274 6966 6963 6174 6520  the certificate 
-000025e0: 6672 6f6d 2074 6865 2073 6572 7665 722e  from the server.
-000025f0: 2059 6f75 2063 616e 0a67 6574 2074 6865   You can.get the
-00002600: 2073 6572 7665 7220 6365 7274 6966 6963   server certific
-00002610: 6174 6520 7769 7468 2074 6865 2066 6f6c  ate with the fol
-00002620: 6c6f 7769 6e67 2050 7974 686f 6e20 636f  lowing Python co
-00002630: 6465 2e0a 0a41 7320 7765 2077 696c 6c20  de...As we will 
-00002640: 7365 652c 2077 6865 6e20 636f 6e6e 6563  see, when connec
-00002650: 7469 6e67 2074 6f20 6120 2273 6563 7572  ting to a "secur
-00002660: 6522 2073 6572 7665 722c 2074 6865 2063  e" server, the c
-00002670: 6c69 656e 7420 6e65 6564 7320 616e 2053  lient needs an S
-00002680: 534c 2f54 4c53 0a63 6572 7469 6669 6361  SL/TLS.certifica
-00002690: 7465 2061 7320 7468 6520 7661 6c75 6520  te as the value 
-000026a0: 6f66 2069 7473 2060 726f 6f74 5f63 6572  of its `root_cer
-000026b0: 7469 6669 6361 7465 7360 2063 6f6e 7374  tificates` const
-000026c0: 7275 6374 6f72 2061 7267 756d 656e 742e  ructor argument.
-000026d0: 0a0a 0a60 6060 7079 7468 6f6e 0a69 6d70  ...```python.imp
-000026e0: 6f72 7420 7373 6c0a 0a0a 7365 7276 6572  ort ssl...server
-000026f0: 5f63 6572 7469 6669 6361 7465 203d 2073  _certificate = s
-00002700: 736c 2e67 6574 5f73 6572 7665 725f 6365  sl.get_server_ce
-00002710: 7274 6966 6963 6174 6528 6164 6472 3d28  rtificate(addr=(
-00002720: 276c 6f63 616c 686f 7374 272c 2032 3131  'localhost', 211
-00002730: 3329 290a 6060 600a 0a59 6f75 2063 616e  3)).```..You can
-00002740: 2061 6c73 6f20 7374 6172 7420 616e 2022   also start an "
-00002750: 696e 7365 6375 7265 2220 7365 7276 6572  insecure" server
-00002760: 2075 7369 6e67 2074 6865 2066 6f6c 6c6f   using the follo
-00002770: 7769 6e67 2063 6f6d 6d61 6e64 2e0a 0a20  wing command... 
-00002780: 2020 2024 2064 6f63 6b65 7220 7275 6e20     $ docker run 
-00002790: 2d64 202d 2d6e 616d 6520 6576 656e 7473  -d --name events
-000027a0: 746f 7265 6462 2d69 6e73 6563 7572 6520  toredb-insecure 
-000027b0: 2d69 7420 2d70 2032 3131 343a 3231 3133  -it -p 2114:2113
-000027c0: 2065 7665 6e74 7374 6f72 652f 6576 656e   eventstore/even
-000027d0: 7473 746f 7265 3a32 312e 3130 2e39 2d62  tstore:21.10.9-b
-000027e0: 7573 7465 722d 736c 696d 202d 2d69 6e73  uster-slim --ins
-000027f0: 6563 7572 650a 0a54 6865 2063 6f6e 6e65  ecure..The conne
-00002800: 6374 696f 6e20 7374 7269 6e67 2055 5249  ction string URI
-00002810: 2066 6f72 2074 6869 7320 2269 6e73 6563   for this "insec
-00002820: 7572 6522 2073 6572 7665 7220 776f 756c  ure" server woul
-00002830: 6420 6265 3a0a 0a20 2020 2065 7364 623a  d be:..    esdb:
-00002840: 2f2f 6c6f 6361 6c68 6f73 743a 3231 3134  //localhost:2114
-00002850: 3f54 6c73 3d66 616c 7365 0a0a 4173 2077  ?Tls=false..As w
-00002860: 6520 7769 6c6c 2073 6565 2c20 7768 656e  e will see, when
-00002870: 2063 6f6e 6e65 6374 696e 6720 746f 2061   connecting to a
-00002880: 6e20 2269 6e73 6563 7572 6522 2073 6572  n "insecure" ser
-00002890: 7665 722c 2074 6865 7265 2069 7320 6e6f  ver, there is no
-000028a0: 206e 6565 6420 746f 2069 6e63 6c75 6465   need to include
-000028b0: 0a61 2022 7573 6572 6e61 6d65 2220 616e  .a "username" an
-000028c0: 6420 6120 2270 6173 7377 6f72 6422 2069  d a "password" i
-000028d0: 6e20 7468 6520 636f 6e6e 6563 7469 6f6e  n the connection
-000028e0: 2073 7472 696e 672e 2049 6620 796f 7520   string. If you 
-000028f0: 646f 2c20 7468 6573 6520 7661 6c75 6573  do, these values
-00002900: 2077 696c 6c0a 6265 2069 676e 6f72 6564   will.be ignored
-00002910: 2062 7920 7468 6520 636c 6965 6e74 2c20   by the client, 
-00002920: 736f 2074 6861 7420 7468 6579 2077 696c  so that they wil
-00002930: 6c20 6e6f 7420 6265 2073 656e 7420 746f  l not be sent to
-00002940: 2074 6865 2073 6572 7665 7220 6f76 6572   the server over
-00002950: 2061 6e0a 696e 7365 6375 7265 2063 6861   an.insecure cha
-00002960: 6e6e 656c 2e0a 0a50 6c65 6173 6520 6e6f  nnel...Please no
-00002970: 7465 2c20 7468 6520 2269 6e73 6563 7572  te, the "insecur
-00002980: 6522 2063 6f6e 6e65 6374 696f 6e20 7374  e" connection st
-00002990: 7269 6e67 2075 7365 7320 7468 6520 7175  ring uses the qu
-000029a0: 6572 7920 7374 7269 6e67 2060 3f54 6c73  ery string `?Tls
-000029b0: 3d66 616c 7365 602e 2054 6865 0a76 616c  =false`. The.val
-000029c0: 7565 206f 6620 7468 6973 2066 6965 6c64  ue of this field
-000029d0: 2069 7320 6279 2064 6566 6175 6c74 2060   is by default `
-000029e0: 7472 7565 602e 2053 6565 2074 6865 204e  true`. See the N
-000029f0: 6f74 6573 2073 6563 7469 6f6e 2062 656c  otes section bel
-00002a00: 6f77 2066 6f72 206d 6f72 650a 696e 666f  ow for more.info
-00002a10: 726d 6174 696f 6e20 6162 6f75 7420 4576  rmation about Ev
-00002a20: 656e 7453 746f 7265 4442 2063 6f6e 6e65  entStoreDB conne
-00002a30: 6374 696f 6e20 7374 7269 6e67 7320 616e  ction strings an
-00002a40: 6420 7468 6520 6669 656c 6473 2074 6861  d the fields tha
-00002a50: 7420 6361 6e20 6265 2075 7365 640a 696e  t can be used.in
-00002a60: 2074 6865 2071 7565 7279 2073 7472 696e   the query strin
-00002a70: 6720 746f 2073 7065 6369 6679 2063 6f6e  g to specify con
-00002a80: 6e65 6374 696f 6e20 6f70 7469 6f6e 732e  nection options.
-00002a90: 0a0a 2323 2320 5374 6f70 2063 6f6e 7461  ..### Stop conta
-00002aa0: 696e 6572 0a0a 546f 2073 746f 7020 616e  iner..To stop an
-00002ab0: 6420 7265 6d6f 7665 2074 6865 2022 7365  d remove the "se
-00002ac0: 6375 7265 2220 636f 6e74 6169 6e65 722c  cure" container,
-00002ad0: 2075 7365 2074 6865 2066 6f6c 6c6f 7769   use the followi
-00002ae0: 6e67 2044 6f63 6b65 7220 636f 6d6d 616e  ng Docker comman
-00002af0: 6473 2e0a 0a20 2020 2024 2064 6f63 6b65  ds...    $ docke
-00002b00: 7220 7374 6f70 2065 7665 6e74 7374 6f72  r stop eventstor
-00002b10: 6564 622d 7365 6375 7265 0a09 2420 646f  edb-secure..$ do
-00002b20: 636b 6572 2072 6d20 6576 656e 7473 746f  cker rm eventsto
-00002b30: 7265 6462 2d73 6563 7572 650a 0a54 6f20  redb-secure..To 
-00002b40: 7374 6f70 2061 6e64 2072 656d 6f76 6520  stop and remove 
-00002b50: 7468 6520 2269 6e73 6563 7572 6522 2063  the "insecure" c
-00002b60: 6f6e 7461 696e 6572 2c20 7573 6520 7468  ontainer, use th
-00002b70: 6520 666f 6c6c 6f77 696e 6720 446f 636b  e following Dock
-00002b80: 6572 2063 6f6d 6d61 6e64 732e 0a0a 2020  er commands...  
-00002b90: 2020 2420 646f 636b 6572 2073 746f 7020    $ docker stop 
-00002ba0: 6576 656e 7473 746f 7265 6462 2d69 6e73  eventstoredb-ins
-00002bb0: 6563 7572 650a 0924 2064 6f63 6b65 7220  ecure..$ docker 
-00002bc0: 726d 2065 7665 6e74 7374 6f72 6564 622d  rm eventstoredb-
-00002bd0: 696e 7365 6375 7265 0a0a 0a23 2320 4576  insecure...## Ev
-00002be0: 656e 7453 746f 7265 4442 2063 6c69 656e  entStoreDB clien
-00002bf0: 740a 0a54 6869 7320 4576 656e 7453 746f  t..This EventSto
-00002c00: 7265 4442 2063 6c69 656e 7420 6973 2069  reDB client is i
-00002c10: 6d70 6c65 6d65 6e74 6564 2069 6e20 7468  mplemented in th
-00002c20: 6520 6065 7364 6263 6c69 656e 7460 2070  e `esdbclient` p
-00002c30: 6163 6b61 6765 2077 6974 680a 7468 6520  ackage with.the 
-00002c40: 6045 5344 4243 6c69 656e 7460 2063 6c61  `ESDBClient` cla
-00002c50: 7373 2e0a 0a23 2323 2049 6d70 6f72 7420  ss...### Import 
-00002c60: 636c 6173 730a 0a54 6865 2060 4553 4442  class..The `ESDB
-00002c70: 436c 6965 6e74 6020 636c 6173 7320 6361  Client` class ca
-00002c80: 6e20 6265 2069 6d70 6f72 7465 6420 6672  n be imported fr
-00002c90: 6f6d 2074 6865 2060 6573 6462 636c 6965  om the `esdbclie
-00002ca0: 6e74 6020 7061 636b 6167 652e 0a0a 6060  nt` package...``
-00002cb0: 6070 7974 686f 6e0a 6672 6f6d 2065 7364  `python.from esd
-00002cc0: 6263 6c69 656e 7420 696d 706f 7274 2045  bclient import E
-00002cd0: 5344 4243 6c69 656e 740a 6060 600a 0a23  SDBClient.```..#
-00002ce0: 2323 2043 6f6e 7374 7275 6374 2063 6c69  ## Construct cli
-00002cf0: 656e 740a 0a54 6865 2060 4553 4442 436c  ent..The `ESDBCl
-00002d00: 6965 6e74 6020 636c 6173 7320 6361 6e20  ient` class can 
-00002d10: 6265 2063 6f6e 7374 7275 6374 6564 2077  be constructed w
-00002d20: 6974 6820 6120 6075 7269 6020 6172 6775  ith a `uri` argu
-00002d30: 6d65 6e74 2c20 7768 6963 6820 6973 2072  ment, which is r
-00002d40: 6571 7569 7265 642e 0a41 6e64 2c20 746f  equired..And, to
-00002d50: 2063 6f6e 6e65 6374 2074 6f20 6120 2273   connect to a "s
-00002d60: 6563 7572 6522 2045 7665 6e74 5374 6f72  ecure" EventStor
-00002d70: 6544 4220 7365 7276 6572 2c20 7468 6520  eDB server, the 
-00002d80: 6f70 7469 6f6e 616c 2060 726f 6f74 5f63  optional `root_c
-00002d90: 6572 7469 6669 6361 7465 7360 0a61 7267  ertificates`.arg
-00002da0: 756d 656e 7420 6973 2061 6c73 6f20 7265  ument is also re
-00002db0: 7175 6972 6564 2e0a 0a54 6865 2060 7572  quired...The `ur
-00002dc0: 6960 2061 7267 756d 656e 7420 6973 2065  i` argument is e
-00002dd0: 7870 6563 7465 6420 746f 2062 6520 616e  xpected to be an
-00002de0: 2045 7665 6e74 5374 6f72 6544 4220 636f   EventStoreDB co
-00002df0: 6e6e 6563 7469 6f6e 2073 7472 696e 6720  nnection string 
-00002e00: 5552 4920 7468 6174 0a63 6f6e 666f 726d  URI that.conform
-00002e10: 7320 7769 7468 2074 6865 2073 7461 6e64  s with the stand
-00002e20: 6172 6420 4576 656e 7453 746f 7265 4442  ard EventStoreDB
-00002e30: 2022 6573 6462 2220 6f72 2022 6573 6462   "esdb" or "esdb
-00002e40: 2b64 6973 636f 7665 7222 2055 5249 2073  +discover" URI s
-00002e50: 6368 656d 6573 2e20 5468 650a 7379 6e74  chemes. The.synt
-00002e60: 6178 2061 6e64 2073 656d 616e 7469 6373  ax and semantics
-00002e70: 206f 6620 4576 656e 7453 746f 7265 4442   of EventStoreDB
-00002e80: 2063 6f6e 6e65 6374 696f 6e20 7374 7269   connection stri
-00002e90: 6e67 7320 6172 6520 6578 706c 6169 6e65  ngs are explaine
-00002ea0: 6420 696e 2074 6865 204e 6f74 6573 0a73  d in the Notes.s
-00002eb0: 6563 7469 6f6e 2062 656c 6f77 2e0a 0a46  ection below...F
-00002ec0: 6f72 2065 7861 6d70 6c65 2c20 7468 6520  or example, the 
-00002ed0: 666f 6c6c 6f77 696e 6720 636f 6e6e 6563  following connec
-00002ee0: 7469 6f6e 2073 7472 696e 6720 7370 6563  tion string spec
-00002ef0: 6966 6965 7320 7468 6174 2074 6865 2063  ifies that the c
-00002f00: 6c69 656e 7420 7368 6f75 6c64 0a61 7474  lient should.att
-00002f10: 656d 7074 2074 6f20 6372 6561 6520 6120  empt to creae a 
-00002f20: 2273 6563 7572 6522 2063 6f6e 6e65 6374  "secure" connect
-00002f30: 696f 6e20 746f 2070 6f72 7420 3231 3133  ion to port 2113
-00002f40: 206f 6e20 226c 6f63 616c 686f 7374 222c   on "localhost",
-00002f50: 2061 6e64 2075 7365 2074 6865 0a63 7265   and use the.cre
-00002f60: 6465 6e74 6961 6c73 2022 7573 6572 6e61  dentials "userna
-00002f70: 6d65 2220 616e 6420 2270 6173 7377 6f72  me" and "passwor
-00002f80: 6422 2077 6865 6e20 6d61 6b69 6e67 2063  d" when making c
-00002f90: 616c 6c73 2074 6f20 7468 6520 7365 7276  alls to the serv
-00002fa0: 6572 2e0a 0a20 2020 2065 7364 623a 2f2f  er...    esdb://
-00002fb0: 7573 6572 6e61 6d65 3a70 6173 7377 6f72  username:passwor
-00002fc0: 6440 6c6f 6361 6c68 6f73 743a 3231 3133  d@localhost:2113
-00002fd0: 0a0a 5468 6520 636c 6965 6e74 206d 7573  ..The client mus
-00002fe0: 7420 6265 2063 6f6e 6669 6775 7265 6420  t be configured 
-00002ff0: 746f 2063 7265 6174 6520 6120 2273 6563  to create a "sec
-00003000: 7572 6522 2063 6f6e 6e65 6374 696f 6e20  ure" connection 
-00003010: 746f 2061 2022 7365 6375 7265 2220 7365  to a "secure" se
-00003020: 7276 6572 2c0a 616e 6420 616e 2022 696e  rver,.and an "in
-00003030: 7365 6375 7265 2220 636f 6e6e 6563 7469  secure" connecti
-00003040: 6f6e 2074 6f20 616e 2022 696e 7365 6375  on to an "insecu
-00003050: 7265 2220 7365 7276 6572 2e20 4279 2064  re" server. By d
-00003060: 6566 6175 6c74 2c20 7468 6520 636c 6965  efault, the clie
-00003070: 6e74 2077 696c 6c0a 6174 7465 6d70 7420  nt will.attempt 
-00003080: 746f 2063 7265 6174 6520 6120 2273 6563  to create a "sec
-00003090: 7572 6522 2063 6f6e 6e65 6374 696f 6e2e  ure" connection.
-000030a0: 2041 6e64 2073 6f2c 2077 6865 6e20 7573   And so, when us
-000030b0: 696e 6720 616e 2022 696e 7365 6375 7265  ing an "insecure
-000030c0: 2220 7365 7276 6572 2c0a 7468 6520 636f  " server,.the co
-000030d0: 6e6e 6563 7469 6f6e 2073 7472 696e 6720  nnection string 
-000030e0: 6d75 7374 2073 7065 6369 6679 2074 6861  must specify tha
-000030f0: 7420 7468 6520 636c 6965 6e74 2073 686f  t the client sho
-00003100: 756c 6420 6174 7465 6d70 7420 746f 206d  uld attempt to m
-00003110: 616b 6520 616e 2022 696e 7365 6375 7265  ake an "insecure
-00003120: 220a 636f 6e6e 6563 7469 6f6e 2e0a 0a54  ".connection...T
-00003130: 6865 2066 6f6c 6c6f 7769 6e67 2063 6f6e  he following con
-00003140: 6e65 6374 696f 6e20 7374 7269 6e67 2073  nection string s
-00003150: 7065 6369 6669 6573 2074 6861 7420 7468  pecifies that th
-00003160: 6520 636c 6965 6e74 2073 686f 756c 640a  e client should.
-00003170: 6174 7465 6d70 7420 746f 2063 7265 6165  attempt to creae
-00003180: 2061 6e20 2269 6e73 6563 7572 6522 2063   an "insecure" c
-00003190: 6f6e 6e65 6374 696f 6e20 746f 2070 6f72  onnection to por
-000031a0: 7420 3231 3134 206f 6e20 226c 6f63 616c  t 2114 on "local
-000031b0: 686f 7374 222e 0a57 6865 6e20 636f 6e6e  host"..When conn
-000031c0: 6563 7469 6e67 2074 6f20 616e 2022 696e  ecting to an "in
-000031d0: 7365 6375 7265 2220 7365 7276 6572 2c20  secure" server, 
-000031e0: 7468 6520 636c 6965 6e74 2077 696c 6c20  the client will 
-000031f0: 6967 6e6f 7265 2061 6e79 0a75 7365 726e  ignore any.usern
-00003200: 616d 6520 616e 6420 7061 7373 776f 7264  ame and password
-00003210: 2069 6e66 6f72 6d61 7469 6f6e 2069 6e63   information inc
-00003220: 6c75 6465 6420 696e 2074 6865 2063 6f6e  luded in the con
-00003230: 6e65 6374 696f 6e20 7374 7269 6e67 2e0a  nection string..
-00003240: 0a20 2020 2065 7364 623a 2f2f 6c6f 6361  .    esdb://loca
-00003250: 6c68 6f73 743a 3231 3134 3f54 6c73 3d66  lhost:2114?Tls=f
-00003260: 616c 7365 0a0a 556e 6c65 7373 2074 6865  alse..Unless the
-00003270: 2063 6f6e 6e65 6374 696f 6e20 7374 7269   connection stri
-00003280: 6e67 2055 5249 2069 6e63 6c75 6465 7320  ng URI includes 
-00003290: 7468 6520 6669 656c 642d 7661 6c75 6520  the field-value 
-000032a0: 6054 6c73 3d66 616c 7365 6020 696e 0a74  `Tls=false` in.t
-000032b0: 6865 2071 7565 7279 2073 7472 696e 672c  he query string,
-000032c0: 2074 6865 2060 726f 6f74 5f63 6572 7469   the `root_certi
-000032d0: 6669 6361 7465 7360 2063 6f6e 7374 7275  ficates` constru
-000032e0: 6374 6f72 2061 7267 756d 656e 7420 6973  ctor argument is
-000032f0: 2061 6c73 6f20 7265 7175 6972 6564 2e0a   also required..
-00003300: 0a57 6865 6e20 636f 6e6e 6563 7469 6e67  .When connecting
-00003310: 2074 6f20 6120 2273 6563 7572 6522 2073   to a "secure" s
-00003320: 6572 7665 722c 2074 6865 2060 726f 6f74  erver, the `root
-00003330: 5f63 6572 7469 6669 6361 7465 7360 2061  _certificates` a
-00003340: 7267 756d 656e 7420 6973 2065 7870 6563  rgument is expec
-00003350: 7465 6420 746f 0a62 6520 6120 5079 7468  ted to.be a Pyth
-00003360: 6f6e 2060 7374 7260 2063 6f6e 7461 696e  on `str` contain
-00003370: 696e 6720 5045 4d20 656e 636f 6465 6420  ing PEM encoded 
-00003380: 5353 4c2f 544c 5320 726f 6f74 2063 6572  SSL/TLS root cer
-00003390: 7469 6669 6361 7465 732c 2061 6e64 2069  tificates, and i
-000033a0: 7420 6973 2075 7365 6420 666f 720a 6175  t is used for.au
-000033b0: 7468 656e 7469 6361 7469 6e67 2074 6865  thenticating the
-000033c0: 2073 6572 7665 7220 746f 2074 6865 2063   server to the c
-000033d0: 6c69 656e 742e 2054 6869 7320 7661 6c75  lient. This valu
-000033e0: 6520 6973 2070 6173 7365 6420 6469 7265  e is passed dire
-000033f0: 6374 6c79 2074 6f0a 6067 7270 632e 7373  ctly to.`grpc.ss
-00003400: 6c5f 6368 616e 6e65 6c5f 6372 6564 656e  l_channel_creden
-00003410: 7469 616c 7328 2960 2e20 4974 2069 7320  tials()`. It is 
-00003420: 636f 6d6d 6f6e 6c79 2074 6865 2063 6572  commonly the cer
-00003430: 7469 6669 6361 7465 206f 6620 7468 6520  tificate of the 
-00003440: 6365 7274 6966 6963 6174 650a 6175 7468  certificate.auth
-00003450: 6f72 6974 7920 7468 6174 2077 6173 2072  ority that was r
-00003460: 6573 706f 6e73 6962 6c65 2066 6f72 2067  esponsible for g
-00003470: 656e 6572 6174 696e 6720 7468 6520 5353  enerating the SS
-00003480: 4c2f 544c 5320 6365 7274 6966 6963 6174  L/TLS certificat
-00003490: 6520 7573 6564 2062 7920 7468 650a 4576  e used by the.Ev
-000034a0: 656e 7453 746f 7265 4442 2073 6572 7665  entStoreDB serve
-000034b0: 722e 2042 7574 2c20 616c 7465 726e 6174  r. But, alternat
-000034c0: 6976 656c 7920 666f 7220 6465 7665 6c6f  ively for develo
-000034d0: 706d 656e 742c 2079 6f75 2063 616e 2075  pment, you can u
-000034e0: 7365 2074 6865 2073 6572 7665 7227 730a  se the server's.
-000034f0: 6365 7274 6966 6963 6174 6520 6974 7365  certificate itse
-00003500: 6c66 2e0a 0a49 6e20 7468 6520 6578 616d  lf...In the exam
-00003510: 706c 6520 6265 6c6f 772c 2074 6865 2063  ple below, the c
-00003520: 6f6e 7374 7275 6374 6f72 2061 7267 756d  onstructor argum
-00003530: 656e 7420 7661 6c75 6573 2061 7265 2074  ent values are t
-00003540: 616b 656e 2066 726f 6d20 7468 6520 6f70  aken from the op
-00003550: 6572 6174 696e 670a 7379 7374 656d 2065  erating.system e
-00003560: 6e76 6972 6f6e 6d65 6e74 2e20 5468 6973  nvironment. This
-00003570: 2069 7320 6120 7479 7069 6361 6c20 6172   is a typical ar
-00003580: 7261 6e67 656d 656e 7420 696e 2061 2070  rangement in a p
-00003590: 726f 6475 6374 696f 6e20 656e 7669 726f  roduction enviro
-000035a0: 6e6d 656e 742e 0a0a 6060 6070 7974 686f  nment...```pytho
-000035b0: 6e0a 696d 706f 7274 206f 730a 0a63 6c69  n.import os..cli
-000035c0: 656e 7420 3d20 4553 4442 436c 6965 6e74  ent = ESDBClient
-000035d0: 280a 2020 2020 7572 693d 6f73 2e67 6574  (.    uri=os.get
-000035e0: 656e 7628 2245 5344 425f 5552 4922 292c  env("ESDB_URI"),
-000035f0: 0a20 2020 2072 6f6f 745f 6365 7274 6966  .    root_certif
-00003600: 6963 6174 6573 3d6f 732e 6765 7465 6e76  icates=os.getenv
-00003610: 2822 4553 4442 5f52 4f4f 545f 4345 5254  ("ESDB_ROOT_CERT
-00003620: 4946 4943 4154 4553 2229 2c0a 290a 6060  IFICATES"),.).``
-00003630: 600a 0a0a 2323 2053 7472 6561 6d73 0a0a  `...## Streams..
-00003640: 496e 2045 7665 6e74 5374 6f72 6544 422c  In EventStoreDB,
-00003650: 2061 2022 7374 7265 616d 2220 6973 2061   a "stream" is a
-00003660: 2073 6571 7565 6e63 6520 6f66 2072 6563   sequence of rec
-00003670: 6f72 6465 6420 6576 656e 7473 2074 6861  orded events tha
-00003680: 7420 616c 6c20 6861 7665 0a74 6865 2073  t all have.the s
-00003690: 616d 6520 2273 7472 6561 6d20 6e61 6d65  ame "stream name
-000036a0: 222e 2054 6865 7265 2077 696c 6c20 6e6f  ". There will no
-000036b0: 726d 616c 6c79 2062 6520 6d61 6e79 2073  rmally be many s
-000036c0: 7472 6561 6d73 2069 6e20 6120 6461 7461  treams in a data
-000036d0: 6261 7365 2e0a 4561 6368 2072 6563 6f72  base..Each recor
-000036e0: 6465 6420 6576 656e 7420 6861 7320 6120  ded event has a 
-000036f0: 2273 7472 6561 6d20 706f 7369 7469 6f6e  "stream position
-00003700: 2220 696e 2069 7473 2073 7472 6561 6d2c  " in its stream,
-00003710: 2061 6e64 2061 2022 636f 6d6d 6974 2070   and a "commit p
-00003720: 6f73 6974 696f 6e22 0a69 6e20 7468 6520  osition".in the 
-00003730: 6461 7461 6261 7365 2e20 5468 6520 7374  database. The st
-00003740: 7265 616d 2070 6f73 6974 696f 6e73 206f  ream positions o
-00003750: 6620 7468 6520 7265 636f 7264 6564 2065  f the recorded e
-00003760: 7665 6e74 7320 696e 2061 2073 7472 6561  vents in a strea
-00003770: 6d20 6973 2061 2067 6170 6c65 7373 0a73  m is a gapless.s
-00003780: 6571 7565 6e63 6520 7374 6172 7469 6e67  equence starting
-00003790: 2066 726f 6d20 7a65 726f 2e20 5468 6520   from zero. The 
-000037a0: 636f 6d6d 6974 2070 6f73 6974 696f 6e73  commit positions
-000037b0: 206f 6620 7468 6520 7265 636f 7264 6564   of the recorded
-000037c0: 2065 7665 6e74 7320 696e 2074 6865 2064   events in the d
-000037d0: 6174 6162 6173 650a 666f 726d 2061 2073  atabase.form a s
-000037e0: 6571 7565 6e63 6520 7468 6174 2069 7320  equence that is 
-000037f0: 6e6f 7420 6761 706c 6573 732e 0a0a 5468  not gapless...Th
-00003800: 6520 6d65 7468 6f64 7320 6061 7070 656e  e methods `appen
-00003810: 645f 6576 656e 7473 2829 602c 2060 7265  d_events()`, `re
-00003820: 6164 5f73 7472 6561 6d5f 6576 656e 7473  ad_stream_events
-00003830: 2829 6020 616e 6420 6072 6561 645f 616c  ()` and `read_al
-00003840: 6c5f 6576 656e 7473 2829 6020 6361 6e0a  l_events()` can.
-00003850: 6265 2075 7365 6420 746f 2072 6563 6f72  be used to recor
-00003860: 6420 616e 6420 7265 6164 2065 7665 6e74  d and read event
-00003870: 7320 696e 2074 6865 2064 6174 6162 6173  s in the databas
-00003880: 652e 0a0a 2323 2320 4170 7065 6e64 2065  e...### Append e
-00003890: 7665 6e74 730a 0a54 6865 2060 6170 7065  vents..The `appe
-000038a0: 6e64 5f65 7665 6e74 7328 2960 206d 6574  nd_events()` met
-000038b0: 686f 6420 6361 6e20 6265 2075 7365 6420  hod can be used 
-000038c0: 746f 2077 7269 7465 2061 2073 6571 7565  to write a seque
-000038d0: 6e63 6520 6f66 206e 6577 2065 7665 6e74  nce of new event
-000038e0: 7320 6174 6f6d 6963 616c 6c79 0a74 6f20  s atomically.to 
-000038f0: 6120 2273 7472 6561 6d22 2e20 5772 6974  a "stream". Writ
-00003900: 696e 6720 6e65 7720 6576 656e 7473 2065  ing new events e
-00003910: 6974 6865 7220 6372 6561 7465 7320 6120  ither creates a 
-00003920: 7374 7265 616d 2c20 6f72 2061 7070 656e  stream, or appen
-00003930: 6473 2065 7665 6e74 7320 746f 2074 6865  ds events to the
-00003940: 2065 6e64 0a6f 6620 6120 7374 7265 616d   end.of a stream
-00003950: 2e20 5468 6973 206d 6574 686f 6420 6973  . This method is
-00003960: 2069 6465 6d70 6f74 656e 7420 2873 6565   idempotent (see
-00003970: 2062 656c 6f77 292e 0a0a 5468 6973 206d   below)...This m
-00003980: 6574 686f 6420 6361 6e20 6265 2075 7365  ethod can be use
-00003990: 6420 746f 2072 6563 6f72 6420 6174 6f6d  d to record atom
-000039a0: 6963 616c 6c79 2061 6c6c 2074 6865 206e  ically all the n
-000039b0: 6577 0a65 7665 6e74 7320 7468 6174 2061  ew.events that a
-000039c0: 7265 2067 656e 6572 6174 6564 2077 6865  re generated whe
-000039d0: 6e20 6578 6563 7574 696e 6720 6120 636f  n executing a co
-000039e0: 6d6d 616e 6420 696e 2061 6e20 6170 706c  mmand in an appl
-000039f0: 6963 6174 696f 6e2e 0a0a 5468 7265 6520  ication...Three 
-00003a00: 6172 6775 6d65 6e74 7320 6172 6520 7265  arguments are re
-00003a10: 7175 6972 6564 2c20 6073 7472 6561 6d5f  quired, `stream_
-00003a20: 6e61 6d65 602c 2060 6578 7065 6374 6564  name`, `expected
-00003a30: 5f70 6f73 6974 696f 6e60 0a61 6e64 2060  _position`.and `
-00003a40: 6576 656e 7473 602e 0a0a 5468 6520 6073  events`...The `s
-00003a50: 7472 6561 6d5f 6e61 6d65 6020 6172 6775  tream_name` argu
-00003a60: 6d65 6e74 2069 7320 7265 7175 6972 6564  ment is required
-00003a70: 2c20 616e 6420 6973 2065 7870 6563 7465  , and is expecte
-00003a80: 6420 746f 2062 6520 6120 5079 7468 6f6e  d to be a Python
-00003a90: 0a60 7374 7260 206f 626a 6563 7420 7468  .`str` object th
-00003aa0: 6174 2075 6e69 7175 656c 7920 6964 656e  at uniquely iden
-00003ab0: 7469 6669 6573 2074 6865 2073 7472 6561  tifies the strea
-00003ac0: 6d20 696e 2074 6865 2064 6174 6162 6173  m in the databas
-00003ad0: 652e 0a0a 5468 6520 6065 7870 6563 7465  e...The `expecte
-00003ae0: 645f 706f 7369 7469 6f6e 6020 6172 6775  d_position` argu
-00003af0: 6d65 6e74 2069 7320 7265 7175 6972 6564  ment is required
-00003b00: 2c20 6973 2065 7870 6563 7465 6420 746f  , is expected to
-00003b10: 2062 653a 2060 4e6f 6e65 600a 6966 2065   be: `None`.if e
-00003b20: 7665 6e74 7320 6172 6520 6265 696e 6720  vents are being 
-00003b30: 7772 6974 7465 6e20 746f 2061 206e 6577  written to a new
-00003b40: 2073 7472 6561 6d2c 2061 6e64 206f 7468   stream, and oth
-00003b50: 6572 7769 7365 2061 6e20 5079 7468 6f6e  erwise an Python
-00003b60: 2060 696e 7460 0a65 7175 616c 2074 6f20   `int`.equal to 
-00003b70: 7468 6520 706f 7369 7469 6f6e 2069 6e20  the position in 
-00003b80: 7468 6520 7374 7265 616d 206f 6620 7468  the stream of th
-00003b90: 6520 6c61 7374 2072 6563 6f72 6465 6420  e last recorded 
-00003ba0: 6576 656e 7420 696e 2074 6865 2073 7472  event in the str
-00003bb0: 6561 6d2e 0a0a 5468 6520 6065 7665 6e74  eam...The `event
-00003bc0: 7360 2061 7267 756d 656e 7420 6973 2072  s` argument is r
-00003bd0: 6571 7569 7265 642c 2061 6e64 2069 7320  equired, and is 
-00003be0: 6578 7065 6374 6564 2074 6f20 6265 2061  expected to be a
-00003bf0: 2073 6571 7565 6e63 6520 6f66 206e 6577   sequence of new
-00003c00: 0a65 7665 6e74 206f 626a 6563 7473 2074  .event objects t
-00003c10: 6f20 6265 2061 7070 656e 6465 6420 746f  o be appended to
-00003c20: 2074 6865 206e 616d 6564 2073 7472 6561   the named strea
-00003c30: 6d2e 2054 6865 2060 4e65 7745 7665 6e74  m. The `NewEvent
-00003c40: 6020 636c 6173 7320 7368 6f75 6c64 0a62  ` class should.b
-00003c50: 6520 7573 6564 2074 6f20 636f 6e73 7472  e used to constr
-00003c60: 7563 7420 6e65 7720 6576 656e 7420 6f62  uct new event ob
-00003c70: 6a65 6374 7320 2873 6565 2062 656c 6f77  jects (see below
-00003c80: 292e 0a0a 5468 6973 206d 6574 686f 6420  )...This method 
-00003c90: 7461 6b65 7320 616e 206f 7074 696f 6e61  takes an optiona
-00003ca0: 6c20 6074 696d 656f 7574 6020 6172 6775  l `timeout` argu
-00003cb0: 6d65 6e74 2c20 7768 6963 6820 6973 2061  ment, which is a
-00003cc0: 2050 7974 686f 6e20 6066 6c6f 6174 6020   Python `float` 
-00003cd0: 7468 6174 2073 6574 730a 6120 6465 6164  that sets.a dead
-00003ce0: 6c69 6e65 2066 6f72 2074 6865 2063 6f6d  line for the com
-00003cf0: 706c 6574 696f 6e20 6f66 2074 6865 2067  pletion of the g
-00003d00: 5250 4320 6f70 6572 6174 696f 6e2e 0a0a  RPC operation...
-00003d10: 5374 7265 616d 7320 6172 6520 6372 6561  Streams are crea
-00003d20: 7465 6420 6279 2077 7269 7469 6e67 2065  ted by writing e
-00003d30: 7665 6e74 732e 2054 6865 2063 6f72 7265  vents. The corre
-00003d40: 6374 2076 616c 7565 206f 6620 7468 6520  ct value of the 
+00000530: 0a66 726f 6d20 6573 6462 636c 6965 6e74  .from esdbclient
+00000540: 2069 6d70 6f72 7420 4173 796e 6369 6f45   import AsyncioE
+00000550: 5344 4243 6c69 656e 7423 2050 7974 686f  SDBClient# Pytho
+00000560: 6e20 6752 5043 2043 6c69 656e 7420 666f  n gRPC Client fo
+00000570: 7220 4576 656e 7453 746f 7265 4442 0a0a  r EventStoreDB..
+00000580: 5468 6973 205b 5079 7468 6f6e 2070 6163  This [Python pac
+00000590: 6b61 6765 5d28 6874 7470 733a 2f2f 7079  kage](https://py
+000005a0: 7069 2e6f 7267 2f70 726f 6a65 6374 2f65  pi.org/project/e
+000005b0: 7364 6263 6c69 656e 742f 2920 7072 6f76  sdbclient/) prov
+000005c0: 6964 6573 2061 2050 7974 686f 6e0a 6752  ides a Python.gR
+000005d0: 5043 2063 6c69 656e 7420 666f 7220 5b45  PC client for [E
+000005e0: 7665 6e74 5374 6f72 6544 425d 2868 7474  ventStoreDB](htt
+000005f0: 7073 3a2f 2f77 7777 2e65 7665 6e74 7374  ps://www.eventst
+00000600: 6f72 652e 636f 6d2f 292e 0a0a 5468 6973  ore.com/)...This
+00000610: 2063 6c69 656e 7420 6861 7320 6265 656e   client has been
+00000620: 2064 6576 656c 6f70 6564 2069 6e20 636f   developed in co
+00000630: 6c6c 6162 6f72 6174 696f 6e20 7769 7468  llaboration with
+00000640: 2074 6865 2045 7665 6e74 5374 6f72 6544   the EventStoreD
+00000650: 420a 7465 616d 2e20 416c 7468 6f75 6768  B.team. Although
+00000660: 206e 6f74 2061 6c6c 2074 6865 2066 6561   not all the fea
+00000670: 7475 7265 7320 6f66 2045 7665 6e74 5374  tures of EventSt
+00000680: 6f72 6544 4220 6172 6520 7375 7070 6f72  oreDB are suppor
+00000690: 7465 640a 6279 2074 6869 7320 636c 6965  ted.by this clie
+000006a0: 6e74 2c20 6d61 6e79 206f 6620 7468 6520  nt, many of the 
+000006b0: 6d6f 7374 2075 7365 6675 6c20 6f6e 6573  most useful ones
+000006c0: 2061 7265 2070 7265 7365 6e74 6564 0a69   are presented.i
+000006d0: 6e20 616e 2065 6173 792d 746f 2d75 7365  n an easy-to-use
+000006e0: 2069 6e74 6572 6661 6365 2e0a 0a54 6869   interface...Thi
+000006f0: 7320 636c 6965 6e74 2068 6173 2062 6565  s client has bee
+00000700: 6e20 7465 7374 6564 2074 6f20 776f 726b  n tested to work
+00000710: 2077 6974 6820 4576 656e 7453 746f 7265   with EventStore
+00000720: 4442 204c 5453 2076 6572 7369 6f6e 7320  DB LTS versions 
+00000730: 3231 2e31 302c 0a77 6974 686f 7574 2061  21.10,.without a
+00000740: 6e64 2077 6974 686f 7574 2053 534c 2f54  nd without SSL/T
+00000750: 4c53 2c20 616e 6420 7769 7468 2050 7974  LS, and with Pyt
+00000760: 686f 6e20 7665 7273 696f 6e73 2033 2e37  hon versions 3.7
+00000770: 2074 6f20 332e 3131 2e20 5468 6572 650a   to 3.11. There.
+00000780: 6973 2031 3030 2520 7465 7374 2063 6f76  is 100% test cov
+00000790: 6572 6167 652e 2054 6865 2063 6f64 6520  erage. The code 
+000007a0: 6861 7320 7479 7069 6e67 2061 6e6e 6f74  has typing annot
+000007b0: 6174 696f 6e73 2c20 6368 6563 6b65 6420  ations, checked 
+000007c0: 7769 7468 206d 7970 792e 0a54 6865 2063  with mypy..The c
+000007d0: 6f64 6520 6973 2066 6f72 6d61 7474 6564  ode is formatted
+000007e0: 2077 6974 6820 626c 6163 6b20 616e 6420   with black and 
+000007f0: 6973 6f72 742c 2061 6e64 2063 6865 636b  isort, and check
+00000800: 6564 2077 6974 6820 666c 616b 6538 2e20  ed with flake8. 
+00000810: 506f 6574 7279 0a69 7320 7573 6564 2066  Poetry.is used f
+00000820: 6f72 2070 6163 6b61 6765 206d 616e 6167  or package manag
+00000830: 656d 656e 7420 6475 7269 6e67 2064 6576  ement during dev
+00000840: 656c 6f70 6d65 6e74 2c20 616e 6420 666f  elopment, and fo
+00000850: 7220 6275 696c 6469 6e67 2061 6e64 0a70  r building and.p
+00000860: 7562 6c69 7368 696e 6720 6469 7374 7269  ublishing distri
+00000870: 6275 7469 6f6e 7320 746f 205b 5079 5049  butions to [PyPI
+00000880: 5d28 6874 7470 733a 2f2f 7079 7069 2e6f  ](https://pypi.o
+00000890: 7267 2f70 726f 6a65 6374 2f65 7364 6263  rg/project/esdbc
+000008a0: 6c69 656e 742f 292e 0a0a 2323 2053 796e  lient/)...## Syn
+000008b0: 6f70 7369 730a 0a54 6865 2060 4553 4442  opsis..The `ESDB
+000008c0: 436c 6965 6e74 6020 636c 6173 7320 6361  Client` class ca
+000008d0: 6e20 6265 2069 6d70 6f72 7465 6420 6672  n be imported fr
+000008e0: 6f6d 2074 6865 2060 6573 6462 636c 6965  om the `esdbclie
+000008f0: 6e74 6020 7061 636b 6167 652e 0a0a 546f  nt` package...To
+00000900: 2072 756e 2074 6865 2063 6c69 656e 742c   run the client,
+00000910: 2079 6f75 2077 696c 6c20 6e65 6564 2061   you will need a
+00000920: 2063 6f6e 6e65 6374 696f 6e20 7374 7269   connection stri
+00000930: 6e67 2055 5249 2e20 416e 642c 2074 6f0a  ng URI. And, to.
+00000940: 636f 6e6e 6563 7420 746f 2061 2022 7365  connect to a "se
+00000950: 6375 7265 2220 4576 656e 7453 746f 7265  cure" EventStore
+00000960: 4442 2073 6572 7665 722c 2079 6f75 2077  DB server, you w
+00000970: 696c 6c20 616c 736f 206e 6565 6420 616e  ill also need an
+00000980: 0a53 534c 2f54 4c53 2063 6572 7469 6669  .SSL/TLS certifi
+00000990: 6361 7465 2e0a 0a50 726f 6261 626c 7920  cate...Probably 
+000009a0: 7468 6520 7468 7265 6520 6d6f 7374 2075  the three most u
+000009b0: 7365 6675 6c20 6d65 7468 6f64 7320 6f66  seful methods of
+000009c0: 2060 4553 4442 436c 6965 6e74 6020 6172   `ESDBClient` ar
+000009d0: 653a 0a0a 2a20 6061 7070 656e 645f 6576  e:..* `append_ev
+000009e0: 656e 7473 2829 6020 5468 6973 206d 6574  ents()` This met
+000009f0: 686f 6420 6361 6e20 6265 2075 7365 6420  hod can be used 
+00000a00: 746f 2072 6563 6f72 640a 6576 656e 7473  to record.events
+00000a10: 2069 6e20 6120 7061 7274 6963 756c 6172   in a particular
+00000a20: 2022 7374 7265 616d 222e 2054 6869 7320   "stream". This 
+00000a30: 6973 2075 7365 6675 6c20 7768 656e 2065  is useful when e
+00000a40: 7865 6375 7469 6e67 2061 2063 6f6d 6d61  xecuting a comma
+00000a50: 6e64 0a69 6e20 616e 2061 7070 6c69 6361  nd.in an applica
+00000a60: 7469 6f6e 2e20 4569 7468 6572 2061 6c6c  tion. Either all
+00000a70: 206f 7220 6e6f 6e65 206f 6620 7468 6520   or none of the 
+00000a80: 6576 656e 7473 2077 696c 6c20 6265 2072  events will be r
+00000a90: 6563 6f72 6465 642e 0a0a 2a20 6072 6561  ecorded...* `rea
+00000aa0: 645f 7374 7265 616d 5f65 7665 6e74 7328  d_stream_events(
+00000ab0: 2960 2054 6869 7320 6d65 7468 6f64 2063  )` This method c
+00000ac0: 616e 2062 6520 7573 6564 2074 6f20 7265  an be used to re
+00000ad0: 7472 6965 7665 2061 6c6c 2074 6865 2072  trieve all the r
+00000ae0: 6563 6f72 6465 640a 6576 656e 7473 2069  ecorded.events i
+00000af0: 6e20 6120 2273 7472 6561 6d22 2e20 5468  n a "stream". Th
+00000b00: 6973 2069 7320 7573 6566 756c 2066 6f72  is is useful for
+00000b10: 2072 6563 6f6e 7374 7275 6374 696e 6720   reconstructing 
+00000b20: 616e 2061 6767 7265 6761 7465 2062 6566  an aggregate bef
+00000b30: 6f72 650a 6578 6563 7574 696e 6720 6120  ore.executing a 
+00000b40: 636f 6d6d 616e 6420 696e 2061 6e20 6170  command in an ap
+00000b50: 706c 6963 6174 696f 6e2e 0a0a 2a20 6073  plication...* `s
+00000b60: 7562 7363 7269 6265 5f61 6c6c 5f65 7665  ubscribe_all_eve
+00000b70: 6e74 7328 2960 2054 6869 7320 6d65 7468  nts()` This meth
+00000b80: 6f64 2063 616e 2062 6520 7573 6564 2074  od can be used t
+00000b90: 6f20 7265 6365 6976 6520 616c 6c20 7265  o receive all re
+00000ba0: 636f 7264 6564 0a65 7665 6e74 7320 6163  corded.events ac
+00000bb0: 726f 7373 2061 6c6c 2022 7374 7265 616d  ross all "stream
+00000bc0: 7322 2e20 5468 6973 2069 7320 7573 6566  s". This is usef
+00000bd0: 756c 2069 6e20 6576 656e 742d 7072 6f63  ul in event-proc
+00000be0: 6573 7369 6e67 2063 6f6d 706f 6e65 6e74  essing component
+00000bf0: 732c 0a61 6e64 2073 7570 706f 7274 7320  s,.and supports 
+00000c00: 7072 6f63 6573 7369 6e67 2065 7665 6e74  processing event
+00000c10: 7320 7769 7468 2022 6578 6163 746c 792d  s with "exactly-
+00000c20: 6f6e 6365 2220 7365 6d61 6e74 6963 732e  once" semantics.
+00000c30: 0a0a 5468 6520 6578 616d 706c 6520 6265  ..The example be
+00000c40: 6c6f 7720 7573 6573 2061 6e20 2269 6e73  low uses an "ins
+00000c50: 6563 7572 6522 2045 7665 6e74 5374 6f72  ecure" EventStor
+00000c60: 6544 4220 7365 7276 6572 2072 756e 6e69  eDB server runni
+00000c70: 6e67 206c 6f63 616c 6c79 206f 6e20 706f  ng locally on po
+00000c80: 7274 2032 3131 342e 0a0a 6060 6070 7974  rt 2114...```pyt
+00000c90: 686f 6e0a 696d 706f 7274 2065 7364 6263  hon.import esdbc
+00000ca0: 6c69 656e 742c 2075 7569 640a 0a0a 2320  lient, uuid...# 
+00000cb0: 436f 6e73 7472 7563 7420 4553 4442 436c  Construct ESDBCl
+00000cc0: 6965 6e74 2077 6974 6820 616e 2045 7665  ient with an Eve
+00000cd0: 6e74 5374 6f72 6544 4220 5552 492e 0a0a  ntStoreDB URI...
+00000ce0: 636c 6965 6e74 203d 2065 7364 6263 6c69  client = esdbcli
+00000cf0: 656e 742e 4553 4442 436c 6965 6e74 2875  ent.ESDBClient(u
+00000d00: 7269 3d22 6573 6462 3a2f 2f6c 6f63 616c  ri="esdb://local
+00000d10: 686f 7374 3a32 3131 343f 546c 733d 6661  host:2114?Tls=fa
+00000d20: 6c73 6522 290a 0a0a 2320 4170 7065 6e64  lse")...# Append
+00000d30: 2065 7665 6e74 7320 746f 2061 206e 6577   events to a new
+00000d40: 2073 7472 6561 6d2e 0a0a 7374 7265 616d   stream...stream
+00000d50: 5f6e 616d 6520 3d20 7374 7228 7575 6964  _name = str(uuid
+00000d60: 2e75 7569 6434 2829 290a 0a65 7665 6e74  .uuid4())..event
+00000d70: 3120 3d20 6573 6462 636c 6965 6e74 2e4e  1 = esdbclient.N
+00000d80: 6577 4576 656e 7428 7479 7065 3d27 4f72  ewEvent(type='Or
+00000d90: 6465 7243 7265 6174 6564 272c 2064 6174  derCreated', dat
+00000da0: 613d 6227 6461 7461 3127 290a 0a63 6c69  a=b'data1')..cli
+00000db0: 656e 742e 6170 7065 6e64 5f65 7665 6e74  ent.append_event
+00000dc0: 7328 0a20 2020 2073 7472 6561 6d5f 6e61  s(.    stream_na
+00000dd0: 6d65 3d73 7472 6561 6d5f 6e61 6d65 2c0a  me=stream_name,.
+00000de0: 2020 2020 6578 7065 6374 6564 5f70 6f73      expected_pos
+00000df0: 6974 696f 6e3d 4e6f 6e65 2c0a 2020 2020  ition=None,.    
+00000e00: 6576 656e 7473 3d5b 6576 656e 7431 5d2c  events=[event1],
+00000e10: 0a29 0a0a 0a23 2041 7070 656e 6420 6d6f  .)...# Append mo
+00000e20: 7265 2065 7665 6e74 7320 746f 2061 6e20  re events to an 
+00000e30: 6578 6973 7469 6e67 2073 7472 6561 6d2e  existing stream.
+00000e40: 0a0a 6576 656e 7432 203d 2065 7364 6263  ..event2 = esdbc
+00000e50: 6c69 656e 742e 4e65 7745 7665 6e74 2874  lient.NewEvent(t
+00000e60: 7970 653d 274f 7264 6572 5570 6461 7465  ype='OrderUpdate
+00000e70: 6427 2c20 6461 7461 3d62 2764 6174 6132  d', data=b'data2
+00000e80: 2729 0a65 7665 6e74 3320 3d20 6573 6462  ').event3 = esdb
+00000e90: 636c 6965 6e74 2e4e 6577 4576 656e 7428  client.NewEvent(
+00000ea0: 7479 7065 3d27 4f72 6465 7244 656c 6574  type='OrderDelet
+00000eb0: 6564 272c 2064 6174 613d 6227 6461 7461  ed', data=b'data
+00000ec0: 3327 290a 0a63 6c69 656e 742e 6170 7065  3')..client.appe
+00000ed0: 6e64 5f65 7665 6e74 7328 0a20 2020 2073  nd_events(.    s
+00000ee0: 7472 6561 6d5f 6e61 6d65 3d73 7472 6561  tream_name=strea
+00000ef0: 6d5f 6e61 6d65 2c0a 2020 2020 6578 7065  m_name,.    expe
+00000f00: 6374 6564 5f70 6f73 6974 696f 6e3d 302c  cted_position=0,
+00000f10: 0a20 2020 2065 7665 6e74 733d 5b65 7665  .    events=[eve
+00000f20: 6e74 322c 2065 7665 6e74 335d 2c0a 290a  nt2, event3],.).
+00000f30: 0a0a 2320 5265 6164 2061 6c6c 2065 7665  ..# Read all eve
+00000f40: 6e74 7320 7265 636f 7264 6564 2069 6e20  nts recorded in 
+00000f50: 6120 7374 7265 616d 2e0a 0a72 6563 6f72  a stream...recor
+00000f60: 6465 6420 3d20 636c 6965 6e74 2e72 6561  ded = client.rea
+00000f70: 645f 7374 7265 616d 5f65 7665 6e74 7328  d_stream_events(
+00000f80: 0a20 2020 2073 7472 6561 6d5f 6e61 6d65  .    stream_name
+00000f90: 3d73 7472 6561 6d5f 6e61 6d65 0a29 0a0a  =stream_name.)..
+00000fa0: 6173 7365 7274 206c 656e 2872 6563 6f72  assert len(recor
+00000fb0: 6465 6429 203d 3d20 330a 6173 7365 7274  ded) == 3.assert
+00000fc0: 2072 6563 6f72 6465 645b 305d 2e64 6174   recorded[0].dat
+00000fd0: 6120 3d3d 2065 7665 6e74 312e 6461 7461  a == event1.data
+00000fe0: 0a61 7373 6572 7420 7265 636f 7264 6564  .assert recorded
+00000ff0: 5b31 5d2e 6461 7461 203d 3d20 6576 656e  [1].data == even
+00001000: 7432 2e64 6174 610a 6173 7365 7274 2072  t2.data.assert r
+00001010: 6563 6f72 6465 645b 325d 2e64 6174 6120  ecorded[2].data 
+00001020: 3d3d 2065 7665 6e74 332e 6461 7461 0a61  == event3.data.a
+00001030: 7373 6572 7420 7265 636f 7264 6564 5b30  ssert recorded[0
+00001040: 5d2e 7479 7065 203d 3d20 6576 656e 7431  ].type == event1
+00001050: 2e74 7970 650a 6173 7365 7274 2072 6563  .type.assert rec
+00001060: 6f72 6465 645b 315d 2e74 7970 6520 3d3d  orded[1].type ==
+00001070: 2065 7665 6e74 322e 7479 7065 0a61 7373   event2.type.ass
+00001080: 6572 7420 7265 636f 7264 6564 5b32 5d2e  ert recorded[2].
+00001090: 7479 7065 203d 3d20 6576 656e 7433 2e74  type == event3.t
+000010a0: 7970 650a 0a0a 2320 496e 2061 6e20 6576  ype...# In an ev
+000010b0: 656e 742d 7072 6f63 6573 7369 6e67 2063  ent-processing c
+000010c0: 6f6d 706f 6e65 6e74 2c20 7573 6520 6120  omponent, use a 
+000010d0: 2263 6174 6368 2d75 7022 2073 7562 7363  "catch-up" subsc
+000010e0: 7269 7074 696f 6e0a 2320 746f 2072 6563  ription.# to rec
+000010f0: 6569 7665 2061 6c6c 2065 7665 6e74 7320  eive all events 
+00001100: 6163 726f 7373 2061 6c6c 2073 7472 6561  across all strea
+00001110: 6d73 2c20 696e 636c 7564 696e 6720 6576  ms, including ev
+00001120: 656e 7473 2074 6861 740a 2320 6861 7665  ents that.# have
+00001130: 206e 6f74 2079 6574 2062 6565 6e20 7265   not yet been re
+00001140: 636f 7264 6564 2c20 7374 6172 7469 6e67  corded, starting
+00001150: 2066 726f 6d20 7468 6520 636f 6d70 6f6e   from the compon
+00001160: 656e 7427 7320 6c61 7374 0a23 2073 6176  ent's last.# sav
+00001170: 6564 2022 636f 6d6d 6974 2070 6f73 6974  ed "commit posit
+00001180: 696f 6e22 2e0a 0a6c 6173 745f 7361 7665  ion"...last_save
+00001190: 645f 636f 6d6d 6974 5f70 6f73 6974 696f  d_commit_positio
+000011a0: 6e20 3d20 300a 0a73 7562 7363 7269 7074  n = 0..subscript
+000011b0: 696f 6e20 3d20 636c 6965 6e74 2e73 7562  ion = client.sub
+000011c0: 7363 7269 6265 5f61 6c6c 5f65 7665 6e74  scribe_all_event
+000011d0: 7328 0a20 2020 2063 6f6d 6d69 745f 706f  s(.    commit_po
+000011e0: 7369 7469 6f6e 3d6c 6173 745f 7361 7665  sition=last_save
+000011f0: 645f 636f 6d6d 6974 5f70 6f73 6974 696f  d_commit_positio
+00001200: 6e0a 290a 0a23 2054 6f20 696d 706c 656d  n.)..# To implem
+00001210: 656e 7420 2265 7861 6374 6c79 2d6f 6e63  ent "exactly-onc
+00001220: 6522 2073 656d 616e 7469 6373 2c20 6974  e" semantics, it
+00001230: 6572 6174 6520 6f76 6572 2074 6865 0a23  erate over the.#
+00001240: 2022 6361 7463 682d 7570 2220 7375 6273   "catch-up" subs
+00001250: 6372 6970 7469 6f6e 2e20 5072 6f63 6573  cription. Proces
+00001260: 7320 6561 6368 2072 6563 6569 7665 6420  s each received 
+00001270: 6576 656e 742c 0a23 2069 6e20 7475 726e  event,.# in turn
+00001280: 2c20 7468 726f 7567 6820 616e 2065 7665  , through an eve
+00001290: 6e74 2d70 726f 6365 7373 696e 6720 706f  nt-processing po
+000012a0: 6c69 6379 2e20 5361 7665 2074 6865 0a23  licy. Save the.#
+000012b0: 2076 616c 7565 206f 6620 7468 6520 636f   value of the co
+000012c0: 6d6d 6974 5f70 6f73 6974 696f 6e20 6174  mmit_position at
+000012d0: 7472 6962 7574 6520 6f66 2074 6865 2070  tribute of the p
+000012e0: 726f 6365 7373 6564 0a23 2065 7665 6e74  rocessed.# event
+000012f0: 2077 6974 6820 6e65 7720 7374 6174 6520   with new state 
+00001300: 6765 6e65 7261 7465 6420 6279 2074 6865  generated by the
+00001310: 2070 6f6c 6963 7920 696e 2074 6865 2073   policy in the s
+00001320: 616d 650a 2320 6174 6f6d 6963 2074 7261  ame.# atomic tra
+00001330: 6e73 6163 7469 6f6e 2e20 5573 6520 7468  nsaction. Use th
+00001340: 6520 6c61 7374 2073 6176 6564 2022 636f  e last saved "co
+00001350: 6d6d 6974 2070 6f73 6974 696f 6e22 0a23  mmit position".#
+00001360: 2077 6865 6e20 7265 7374 6172 7469 6e67   when restarting
+00001370: 2074 6865 2022 6361 7463 682d 7570 2220   the "catch-up" 
+00001380: 7375 6273 6372 6970 7469 6f6e 2e0a 0a72  subscription...r
+00001390: 6563 6569 7665 6420 3d20 5b5d 0a66 6f72  eceived = [].for
+000013a0: 2065 7665 6e74 2069 6e20 7375 6273 6372   event in subscr
+000013b0: 6970 7469 6f6e 3a0a 2020 2020 7265 6365  iption:.    rece
+000013c0: 6976 6564 2e61 7070 656e 6428 6576 656e  ived.append(even
+000013d0: 7429 0a20 2020 2069 6620 6576 656e 742e  t).    if event.
+000013e0: 6964 203d 3d20 6576 656e 7433 2e69 643a  id == event3.id:
+000013f0: 0a20 2020 2020 2020 2062 7265 616b 0a0a  .        break..
+00001400: 6173 7365 7274 2072 6563 6569 7665 645b  assert received[
+00001410: 2d33 5d2e 6461 7461 203d 3d20 6576 656e  -3].data == even
+00001420: 7431 2e64 6174 610a 6173 7365 7274 2072  t1.data.assert r
+00001430: 6563 6569 7665 645b 2d32 5d2e 6461 7461  eceived[-2].data
+00001440: 203d 3d20 6576 656e 7432 2e64 6174 610a   == event2.data.
+00001450: 6173 7365 7274 2072 6563 6569 7665 645b  assert received[
+00001460: 2d31 5d2e 6461 7461 203d 3d20 6576 656e  -1].data == even
+00001470: 7433 2e64 6174 610a 6173 7365 7274 2072  t3.data.assert r
+00001480: 6563 6569 7665 645b 2d33 5d2e 7479 7065  eceived[-3].type
+00001490: 203d 3d20 6576 656e 7431 2e74 7970 650a   == event1.type.
+000014a0: 6173 7365 7274 2072 6563 6569 7665 645b  assert received[
+000014b0: 2d32 5d2e 7479 7065 203d 3d20 6576 656e  -2].type == even
+000014c0: 7432 2e74 7970 650a 6173 7365 7274 2072  t2.type.assert r
+000014d0: 6563 6569 7665 645b 2d31 5d2e 7479 7065  eceived[-1].type
+000014e0: 203d 3d20 6576 656e 7433 2e74 7970 650a   == event3.type.
+000014f0: 0a61 7373 6572 7420 7265 6365 6976 6564  .assert received
+00001500: 5b2d 335d 2e63 6f6d 6d69 745f 706f 7369  [-3].commit_posi
+00001510: 7469 6f6e 203e 2030 0a61 7373 6572 7420  tion > 0.assert 
+00001520: 7265 6365 6976 6564 5b2d 325d 2e63 6f6d  received[-2].com
+00001530: 6d69 745f 706f 7369 7469 6f6e 203e 2072  mit_position > r
+00001540: 6563 6569 7665 645b 2d33 5d2e 636f 6d6d  eceived[-3].comm
+00001550: 6974 5f70 6f73 6974 696f 6e0a 6173 7365  it_position.asse
+00001560: 7274 2072 6563 6569 7665 645b 2d31 5d2e  rt received[-1].
+00001570: 636f 6d6d 6974 5f70 6f73 6974 696f 6e20  commit_position 
+00001580: 3e20 7265 6365 6976 6564 5b2d 325d 2e63  > received[-2].c
+00001590: 6f6d 6d69 745f 706f 7369 7469 6f6e 0a0a  ommit_position..
+000015a0: 0a23 2043 6c6f 7365 2074 6865 2063 6c69  .# Close the cli
+000015b0: 656e 7420 6166 7465 7220 7573 652e 0a0a  ent after use...
+000015c0: 636c 6965 6e74 2e63 6c6f 7365 2829 0a60  client.close().`
+000015d0: 6060 0a0a 5365 6520 6265 6c6f 7720 666f  ``..See below fo
+000015e0: 7220 6d6f 7265 2064 6574 6169 6c73 2e0a  r more details..
+000015f0: 0a46 6f72 2061 6e20 6578 616d 706c 6520  .For an example 
+00001600: 6f66 2075 7361 6765 2c20 7365 6520 7468  of usage, see th
+00001610: 6520 5b65 7665 6e74 736f 7572 6369 6e67  e [eventsourcing
+00001620: 2d65 7665 6e74 7374 6f72 6564 625d 280a  -eventstoredb](.
+00001630: 6874 7470 733a 2f2f 6769 7468 7562 2e63  https://github.c
+00001640: 6f6d 2f70 7965 7665 6e74 736f 7572 6369  om/pyeventsourci
+00001650: 6e67 2f65 7665 6e74 736f 7572 6369 6e67  ng/eventsourcing
+00001660: 2d65 7665 6e74 7374 6f72 6564 6229 2070  -eventstoredb) p
+00001670: 6163 6b61 6765 2e0a 0a23 2320 5461 626c  ackage...## Tabl
+00001680: 6520 6f66 2063 6f6e 7465 6e74 730a 0a3c  e of contents..<
+00001690: 212d 2d20 544f 4320 2d2d 3e0a 2a20 5b49  !-- TOC -->.* [I
+000016a0: 6e73 7461 6c6c 2070 6163 6b61 6765 5d28  nstall package](
+000016b0: 2369 6e73 7461 6c6c 2d70 6163 6b61 6765  #install-package
+000016c0: 290a 2020 2a20 5b46 726f 6d20 5079 5049  ).  * [From PyPI
+000016d0: 5d28 2366 726f 6d2d 7079 7069 290a 2020  ](#from-pypi).  
+000016e0: 2a20 5b57 6974 6820 506f 6574 7279 5d28  * [With Poetry](
+000016f0: 2377 6974 682d 706f 6574 7279 290a 2a20  #with-poetry).* 
+00001700: 5b45 7665 6e74 5374 6f72 6544 4220 7365  [EventStoreDB se
+00001710: 7276 6572 5d28 2365 7665 6e74 7374 6f72  rver](#eventstor
+00001720: 6564 622d 7365 7276 6572 290a 2020 2a20  edb-server).  * 
+00001730: 5b52 756e 2063 6f6e 7461 696e 6572 5d28  [Run container](
+00001740: 2372 756e 2d63 6f6e 7461 696e 6572 290a  #run-container).
+00001750: 2020 2a20 5b53 746f 7020 636f 6e74 6169    * [Stop contai
+00001760: 6e65 725d 2823 7374 6f70 2d63 6f6e 7461  ner](#stop-conta
+00001770: 696e 6572 290a 2a20 5b45 7665 6e74 5374  iner).* [EventSt
+00001780: 6f72 6544 4220 636c 6965 6e74 5d28 2365  oreDB client](#e
+00001790: 7665 6e74 7374 6f72 6564 622d 636c 6965  ventstoredb-clie
+000017a0: 6e74 290a 2020 2a20 5b49 6d70 6f72 7420  nt).  * [Import 
+000017b0: 636c 6173 735d 2823 696d 706f 7274 2d63  class](#import-c
+000017c0: 6c61 7373 290a 2020 2a20 5b43 6f6e 7374  lass).  * [Const
+000017d0: 7275 6374 2063 6c69 656e 745d 2823 636f  ruct client](#co
+000017e0: 6e73 7472 7563 742d 636c 6965 6e74 290a  nstruct-client).
+000017f0: 2a20 5b53 7472 6561 6d73 5d28 2373 7472  * [Streams](#str
+00001800: 6561 6d73 290a 2020 2a20 5b41 7070 656e  eams).  * [Appen
+00001810: 6420 6576 656e 7473 5d28 2361 7070 656e  d events](#appen
+00001820: 642d 6576 656e 7473 290a 2020 2a20 5b41  d-events).  * [A
+00001830: 7070 656e 6420 6576 656e 745d 2823 6170  ppend event](#ap
+00001840: 7065 6e64 2d65 7665 6e74 290a 2020 2a20  pend-event).  * 
+00001850: 5b49 6465 6d70 6f74 656e 7420 6170 7065  [Idempotent appe
+00001860: 6e64 206f 7065 7261 7469 6f6e 735d 2823  nd operations](#
+00001870: 6964 656d 706f 7465 6e74 2d61 7070 656e  idempotent-appen
+00001880: 642d 6f70 6572 6174 696f 6e73 290a 2020  d-operations).  
+00001890: 2a20 5b52 6561 6420 7374 7265 616d 2065  * [Read stream e
+000018a0: 7665 6e74 735d 2823 7265 6164 2d73 7472  vents](#read-str
+000018b0: 6561 6d2d 6576 656e 7473 290a 2020 2a20  eam-events).  * 
+000018c0: 5b52 6561 6420 616c 6c20 6576 656e 7473  [Read all events
+000018d0: 5d28 2372 6561 642d 616c 6c2d 6576 656e  ](#read-all-even
+000018e0: 7473 290a 2020 2a20 5b47 6574 2063 7572  ts).  * [Get cur
+000018f0: 7265 6e74 2073 7472 6561 6d20 706f 7369  rent stream posi
+00001900: 7469 6f6e 5d28 2367 6574 2d63 7572 7265  tion](#get-curre
+00001910: 6e74 2d73 7472 6561 6d2d 706f 7369 7469  nt-stream-positi
+00001920: 6f6e 290a 2020 2a20 5b47 6574 2063 7572  on).  * [Get cur
+00001930: 7265 6e74 2063 6f6d 6d69 7420 706f 7369  rent commit posi
+00001940: 7469 6f6e 5d28 2367 6574 2d63 7572 7265  tion](#get-curre
+00001950: 6e74 2d63 6f6d 6d69 742d 706f 7369 7469  nt-commit-positi
+00001960: 6f6e 290a 2020 2a20 5b47 6574 2073 7472  on).  * [Get str
+00001970: 6561 6d20 6d65 7461 6461 7461 5d28 2367  eam metadata](#g
+00001980: 6574 2d73 7472 6561 6d2d 6d65 7461 6461  et-stream-metada
+00001990: 7461 290a 2020 2a20 5b53 6574 2073 7472  ta).  * [Set str
+000019a0: 6561 6d20 6d65 7461 6461 7461 5d28 2373  eam metadata](#s
+000019b0: 6574 2d73 7472 6561 6d2d 6d65 7461 6461  et-stream-metada
+000019c0: 7461 290a 2020 2a20 5b44 656c 6574 6520  ta).  * [Delete 
+000019d0: 7374 7265 616d 5d28 2364 656c 6574 652d  stream](#delete-
+000019e0: 7374 7265 616d 290a 2020 2a20 5b54 6f6d  stream).  * [Tom
+000019f0: 6273 746f 6e65 2073 7472 6561 6d5d 2823  bstone stream](#
+00001a00: 746f 6d62 7374 6f6e 652d 7374 7265 616d  tombstone-stream
+00001a10: 290a 2a20 5b43 6174 6368 2d75 7020 7375  ).* [Catch-up su
+00001a20: 6273 6372 6970 7469 6f6e 735d 2823 6361  bscriptions](#ca
+00001a30: 7463 682d 7570 2d73 7562 7363 7269 7074  tch-up-subscript
+00001a40: 696f 6e73 290a 2020 2a20 5b48 6f77 2074  ions).  * [How t
+00001a50: 6f20 696d 706c 656d 656e 7420 6578 6163  o implement exac
+00001a60: 746c 792d 6f6e 6365 2065 7665 6e74 2070  tly-once event p
+00001a70: 726f 6365 7373 696e 675d 2823 686f 772d  rocessing](#how-
+00001a80: 746f 2d69 6d70 6c65 6d65 6e74 2d65 7861  to-implement-exa
+00001a90: 6374 6c79 2d6f 6e63 652d 6576 656e 742d  ctly-once-event-
+00001aa0: 7072 6f63 6573 7369 6e67 290a 2020 2a20  processing).  * 
+00001ab0: 5b53 7562 7363 7269 6265 2061 6c6c 2065  [Subscribe all e
+00001ac0: 7665 6e74 735d 2823 7375 6273 6372 6962  vents](#subscrib
+00001ad0: 652d 616c 6c2d 6576 656e 7473 290a 2020  e-all-events).  
+00001ae0: 2a20 5b53 7562 7363 7269 6265 2073 7472  * [Subscribe str
+00001af0: 6561 6d20 6576 656e 7473 5d28 2373 7562  eam events](#sub
+00001b00: 7363 7269 6265 2d73 7472 6561 6d2d 6576  scribe-stream-ev
+00001b10: 656e 7473 290a 2a20 5b50 6572 7369 7374  ents).* [Persist
+00001b20: 656e 7420 7375 6273 6372 6970 7469 6f6e  ent subscription
+00001b30: 735d 2823 7065 7273 6973 7465 6e74 2d73  s](#persistent-s
+00001b40: 7562 7363 7269 7074 696f 6e73 290a 2020  ubscriptions).  
+00001b50: 2a20 5b43 7265 6174 6520 7375 6273 6372  * [Create subscr
+00001b60: 6970 7469 6f6e 5d28 2363 7265 6174 652d  iption](#create-
+00001b70: 7375 6273 6372 6970 7469 6f6e 290a 2020  subscription).  
+00001b80: 2a20 5b52 6561 6420 7375 6273 6372 6970  * [Read subscrip
+00001b90: 7469 6f6e 5d28 2372 6561 642d 7375 6273  tion](#read-subs
+00001ba0: 6372 6970 7469 6f6e 290a 2020 2a20 5b47  cription).  * [G
+00001bb0: 6574 2073 7562 7363 7269 7074 696f 6e20  et subscription 
+00001bc0: 696e 666f 5d28 2367 6574 2d73 7562 7363  info](#get-subsc
+00001bd0: 7269 7074 696f 6e2d 696e 666f 290a 2020  ription-info).  
+00001be0: 2a20 5b4c 6973 7420 7375 6273 6372 6970  * [List subscrip
+00001bf0: 7469 6f6e 735d 2823 6c69 7374 2d73 7562  tions](#list-sub
+00001c00: 7363 7269 7074 696f 6e73 290a 2020 2a20  scriptions).  * 
+00001c10: 5b44 656c 6574 6520 7375 6273 6372 6970  [Delete subscrip
+00001c20: 7469 6f6e 5d28 2364 656c 6574 652d 7375  tion](#delete-su
+00001c30: 6273 6372 6970 7469 6f6e 290a 2020 2a20  bscription).  * 
+00001c40: 5b43 7265 6174 6520 7374 7265 616d 2073  [Create stream s
+00001c50: 7562 7363 7269 7074 696f 6e5d 2823 6372  ubscription](#cr
+00001c60: 6561 7465 2d73 7472 6561 6d2d 7375 6273  eate-stream-subs
+00001c70: 6372 6970 7469 6f6e 290a 2020 2a20 5b52  cription).  * [R
+00001c80: 6561 6420 7374 7265 616d 2073 7562 7363  ead stream subsc
+00001c90: 7269 7074 696f 6e5d 2823 7265 6164 2d73  ription](#read-s
+00001ca0: 7472 6561 6d2d 7375 6273 6372 6970 7469  tream-subscripti
+00001cb0: 6f6e 290a 2020 2a20 5b47 6574 2073 7472  on).  * [Get str
+00001cc0: 6561 6d20 7375 6273 6372 6970 7469 6f6e  eam subscription
+00001cd0: 2069 6e66 6f5d 2823 6765 742d 7374 7265   info](#get-stre
+00001ce0: 616d 2d73 7562 7363 7269 7074 696f 6e2d  am-subscription-
+00001cf0: 696e 666f 290a 2020 2a20 5b4c 6973 7420  info).  * [List 
+00001d00: 7374 7265 616d 2073 7562 7363 7269 7074  stream subscript
+00001d10: 696f 6e73 5d28 236c 6973 742d 7374 7265  ions](#list-stre
+00001d20: 616d 2d73 7562 7363 7269 7074 696f 6e73  am-subscriptions
+00001d30: 290a 2020 2a20 5b44 656c 6574 6520 7374  ).  * [Delete st
+00001d40: 7265 616d 2073 7562 7363 7269 7074 696f  ream subscriptio
+00001d50: 6e5d 2823 6465 6c65 7465 2d73 7472 6561  n](#delete-strea
+00001d60: 6d2d 7375 6273 6372 6970 7469 6f6e 290a  m-subscription).
+00001d70: 2a20 5b43 6f6e 6e65 6374 696f 6e5d 2823  * [Connection](#
+00001d80: 636f 6e6e 6563 7469 6f6e 290a 2020 2a20  connection).  * 
+00001d90: 5b52 6563 6f6e 6e65 6374 5d28 2372 6563  [Reconnect](#rec
+00001da0: 6f6e 6e65 6374 290a 2020 2a20 5b43 6c6f  onnect).  * [Clo
+00001db0: 7365 5d28 2363 6c6f 7365 290a 2a20 5b4e  se](#close).* [N
+00001dc0: 6f74 6573 5d28 236e 6f74 6573 290a 2020  otes](#notes).  
+00001dd0: 2a20 5b43 6f6e 6e65 6374 696f 6e20 7374  * [Connection st
+00001de0: 7269 6e67 735d 2823 636f 6e6e 6563 7469  rings](#connecti
+00001df0: 6f6e 2d73 7472 696e 6773 290a 2020 2a20  on-strings).  * 
+00001e00: 5b52 6567 756c 6172 2065 7870 7265 7373  [Regular express
+00001e10: 696f 6e20 6669 6c74 6572 735d 2823 7265  ion filters](#re
+00001e20: 6775 6c61 722d 6578 7072 6573 7369 6f6e  gular-expression
+00001e30: 2d66 696c 7465 7273 290a 2020 2a20 5b4e  -filters).  * [N
+00001e40: 6577 2065 7665 6e74 206f 626a 6563 7473  ew event objects
+00001e50: 5d28 236e 6577 2d65 7665 6e74 2d6f 626a  ](#new-event-obj
+00001e60: 6563 7473 290a 2020 2a20 5b52 6563 6f72  ects).  * [Recor
+00001e70: 6465 6420 6576 656e 7420 6f62 6a65 6374  ded event object
+00001e80: 735d 2823 7265 636f 7264 6564 2d65 7665  s](#recorded-eve
+00001e90: 6e74 2d6f 626a 6563 7473 290a 2020 2a20  nt-objects).  * 
+00001ea0: 5b41 7379 6e63 696f 2063 6c69 656e 745d  [Asyncio client]
+00001eb0: 2823 6173 796e 6369 6f2d 636c 6965 6e74  (#asyncio-client
+00001ec0: 290a 2a20 5b43 6f6e 7472 6962 7574 6f72  ).* [Contributor
+00001ed0: 735d 2823 636f 6e74 7269 6275 746f 7273  s](#contributors
+00001ee0: 290a 2020 2a20 5b49 6e73 7461 6c6c 2050  ).  * [Install P
+00001ef0: 6f65 7472 795d 2823 696e 7374 616c 6c2d  oetry](#install-
+00001f00: 706f 6574 7279 290a 2020 2a20 5b53 6574  poetry).  * [Set
+00001f10: 7570 2066 6f72 2050 7943 6861 726d 2075  up for PyCharm u
+00001f20: 7365 7273 5d28 2373 6574 7570 2d66 6f72  sers](#setup-for
+00001f30: 2d70 7963 6861 726d 2d75 7365 7273 290a  -pycharm-users).
+00001f40: 2020 2a20 5b53 6574 7570 2066 726f 6d20    * [Setup from 
+00001f50: 636f 6d6d 616e 6420 6c69 6e65 5d28 2373  command line](#s
+00001f60: 6574 7570 2d66 726f 6d2d 636f 6d6d 616e  etup-from-comman
+00001f70: 642d 6c69 6e65 290a 2020 2a20 5b50 726f  d-line).  * [Pro
+00001f80: 6a65 6374 204d 616b 6566 696c 6520 636f  ject Makefile co
+00001f90: 6d6d 616e 6473 5d28 2370 726f 6a65 6374  mmands](#project
+00001fa0: 2d6d 616b 6566 696c 652d 636f 6d6d 616e  -makefile-comman
+00001fb0: 6473 290a 3c21 2d2d 2054 4f43 202d 2d3e  ds).<!-- TOC -->
+00001fc0: 0a0a 2323 2049 6e73 7461 6c6c 2070 6163  ..## Install pac
+00001fd0: 6b61 6765 0a0a 4974 2069 7320 7265 636f  kage..It is reco
+00001fe0: 6d6d 656e 6465 6420 746f 2069 6e73 7461  mmended to insta
+00001ff0: 6c6c 2050 7974 686f 6e20 7061 636b 6167  ll Python packag
+00002000: 6573 2069 6e74 6f20 6120 5079 7468 6f6e  es into a Python
+00002010: 2076 6972 7475 616c 2065 6e76 6972 6f6e   virtual environ
+00002020: 6d65 6e74 2e0a 0a23 2323 2046 726f 6d20  ment...### From 
+00002030: 5079 5049 0a0a 596f 7520 6361 6e20 7573  PyPI..You can us
+00002040: 6520 7069 7020 746f 2069 6e73 7461 6c6c  e pip to install
+00002050: 2074 6869 7320 7061 636b 6167 6520 6469   this package di
+00002060: 7265 6374 6c79 2066 726f 6d0a 5b74 6865  rectly from.[the
+00002070: 2050 7974 686f 6e20 5061 636b 6167 6520   Python Package 
+00002080: 496e 6465 785d 2868 7474 7073 3a2f 2f70  Index](https://p
+00002090: 7970 692e 6f72 672f 7072 6f6a 6563 742f  ypi.org/project/
+000020a0: 6573 6462 636c 6965 6e74 2f29 2e0a 0a20  esdbclient/)... 
+000020b0: 2020 2024 2070 6970 2069 6e73 7461 6c6c     $ pip install
+000020c0: 2065 7364 6263 6c69 656e 740a 0a23 2323   esdbclient..###
+000020d0: 2057 6974 6820 506f 6574 7279 0a0a 596f   With Poetry..Yo
+000020e0: 7520 6361 6e20 7573 6520 506f 6574 7279  u can use Poetry
+000020f0: 2074 6f20 6164 6420 7468 6973 2070 6163   to add this pac
+00002100: 6b61 6765 2074 6f20 796f 7572 2070 7970  kage to your pyp
+00002110: 726f 6a65 6374 2e74 6f6d 6c20 616e 6420  roject.toml and 
+00002120: 696e 7374 616c 6c20 6974 2e0a 0a20 2020  install it...   
+00002130: 2024 2070 6f65 7472 7920 6164 6420 6573   $ poetry add es
+00002140: 6462 636c 6965 6e74 0a0a 2323 2045 7665  dbclient..## Eve
+00002150: 6e74 5374 6f72 6544 4220 7365 7276 6572  ntStoreDB server
+00002160: 0a0a 5468 6520 4576 656e 7453 746f 7265  ..The EventStore
+00002170: 4442 2073 6572 7665 7220 6361 6e20 6265  DB server can be
+00002180: 2072 756e 206c 6f63 616c 6c79 2075 7369   run locally usi
+00002190: 6e67 2074 6865 206f 6666 6963 6961 6c20  ng the official 
+000021a0: 446f 636b 6572 2063 6f6e 7461 696e 6572  Docker container
+000021b0: 2069 6d61 6765 2e0a 0a23 2323 2052 756e   image...### Run
+000021c0: 2063 6f6e 7461 696e 6572 0a0a 466f 7220   container..For 
+000021d0: 6465 7665 6c6f 706d 656e 742c 2079 6f75  development, you
+000021e0: 2063 616e 2072 756e 2061 2022 7365 6375   can run a "secu
+000021f0: 7265 2220 4576 656e 7453 746f 7265 4442  re" EventStoreDB
+00002200: 2073 6572 7665 7220 7573 696e 6720 7468   server using th
+00002210: 6520 666f 6c6c 6f77 696e 6720 636f 6d6d  e following comm
+00002220: 616e 642e 0a0a 2020 2020 2420 646f 636b  and...    $ dock
+00002230: 6572 2072 756e 202d 6420 2d2d 6e61 6d65  er run -d --name
+00002240: 2065 7665 6e74 7374 6f72 6564 622d 7365   eventstoredb-se
+00002250: 6375 7265 202d 6974 202d 7020 3231 3133  cure -it -p 2113
+00002260: 3a32 3131 3320 2d2d 656e 7620 2248 4f4d  :2113 --env "HOM
+00002270: 453d 2f74 6d70 2220 6576 656e 7473 746f  E=/tmp" eventsto
+00002280: 7265 2f65 7665 6e74 7374 6f72 653a 3231  re/eventstore:21
+00002290: 2e31 302e 392d 6275 7374 6572 2d73 6c69  .10.9-buster-sli
+000022a0: 6d20 2d2d 6465 760a 0a41 7320 7765 2077  m --dev..As we w
+000022b0: 696c 6c20 7365 652c 2074 6865 2063 6c69  ill see, the cli
+000022c0: 656e 7420 6e65 6564 7320 616e 2045 7665  ent needs an Eve
+000022d0: 6e74 5374 6f72 6544 4220 636f 6e6e 6563  ntStoreDB connec
+000022e0: 7469 6f6e 2073 7472 696e 6720 5552 4920  tion string URI 
+000022f0: 6173 2074 6865 2076 616c 7565 206f 660a  as the value of.
+00002300: 6974 7320 6075 7269 6020 636f 6e73 7472  its `uri` constr
+00002310: 7563 746f 7220 6172 6775 6d65 6e74 2e20  uctor argument. 
+00002320: 5365 6520 7468 6520 4e6f 7465 7320 7365  See the Notes se
+00002330: 6374 696f 6e20 6265 6c6f 7720 666f 7220  ction below for 
+00002340: 6465 7461 696c 6564 2069 6e66 6f72 6d61  detailed informa
+00002350: 7469 6f6e 0a61 626f 7574 2045 7665 6e74  tion.about Event
+00002360: 5374 6f72 6544 4220 636f 6e6e 6563 7469  StoreDB connecti
+00002370: 6f6e 2073 7472 696e 6720 5552 4973 2e0a  on string URIs..
+00002380: 0a54 6865 2063 6f6e 6e65 6374 696f 6e20  .The connection 
+00002390: 7374 7269 6e67 2066 6f72 2074 6869 7320  string for this 
+000023a0: 2273 6563 7572 6522 2045 7665 6e74 5374  "secure" EventSt
+000023b0: 6f72 6544 4220 7365 7276 6572 2077 6f75  oreDB server wou
+000023c0: 6c64 2062 653a 0a0a 2020 2020 6573 6462  ld be:..    esdb
+000023d0: 3a2f 2f61 646d 696e 3a63 6861 6e67 6569  ://admin:changei
+000023e0: 7440 6c6f 6361 6c68 6f73 743a 3231 3133  t@localhost:2113
+000023f0: 0a0a 546f 2063 6f6e 6e65 6374 2074 6f20  ..To connect to 
+00002400: 6120 2273 6563 7572 6522 2073 6572 7665  a "secure" serve
+00002410: 722c 2079 6f75 2077 696c 6c20 7573 7561  r, you will usua
+00002420: 6c6c 7920 6e65 6564 2074 6f20 696e 636c  lly need to incl
+00002430: 7564 6520 6120 2275 7365 726e 616d 6522  ude a "username"
+00002440: 0a61 6e64 2061 2022 7061 7373 776f 7264  .and a "password
+00002450: 2220 696e 2074 6865 2063 6f6e 6e65 6374  " in the connect
+00002460: 696f 6e20 7374 7269 6e67 2c20 736f 2074  ion string, so t
+00002470: 6861 7420 7468 6520 7365 7276 6572 2063  hat the server c
+00002480: 616e 2061 7574 6865 6e74 6963 6174 6520  an authenticate 
+00002490: 7468 650a 636c 6965 6e74 2e20 5468 6520  the.client. The 
+000024a0: 6465 6661 756c 7420 7573 6572 6e61 6d65  default username
+000024b0: 2069 7320 2261 646d 696e 2220 616e 6420   is "admin" and 
+000024c0: 7468 6520 6465 6661 756c 7420 7061 7373  the default pass
+000024d0: 776f 7264 2069 7320 2263 6861 6e67 6569  word is "changei
+000024e0: 7422 2e0a 0a57 6865 6e20 636f 6e6e 6563  t"...When connec
+000024f0: 7469 6e67 2074 6f20 6120 2273 6563 7572  ting to a "secur
+00002500: 6522 2073 6572 7665 722c 2074 6865 2063  e" server, the c
+00002510: 6c69 656e 7420 616c 736f 206e 6565 6473  lient also needs
+00002520: 2061 6e20 5353 4c2f 544c 530a 6365 7274   an SSL/TLS.cert
+00002530: 6966 6963 6174 6520 6173 2074 6865 2076  ificate as the v
+00002540: 616c 7565 206f 6620 6974 7320 6072 6f6f  alue of its `roo
+00002550: 745f 6365 7274 6966 6963 6174 6573 6020  t_certificates` 
+00002560: 636f 6e73 7472 7563 746f 7220 6172 6775  constructor argu
+00002570: 6d65 6e74 2e20 546f 2063 6f6e 6e65 6374  ment. To connect
+00002580: 0a74 6f20 6120 2273 6563 7572 6522 2073  .to a "secure" s
+00002590: 6572 7665 7220 796f 7520 7769 6c6c 206e  erver you will n
+000025a0: 6565 6420 616e 2053 534c 2f54 4c53 2063  eed an SSL/TLS c
+000025b0: 6572 7469 6669 6361 7465 2073 6f20 7468  ertificate so th
+000025c0: 6174 2074 6865 2063 6c69 656e 7420 6361  at the client ca
+000025d0: 6e0a 6175 7468 656e 7469 6361 7465 2074  n.authenticate t
+000025e0: 6865 2073 6572 7665 722e 2046 6f72 2064  he server. For d
+000025f0: 6576 656c 6f70 6d65 6e74 2c20 796f 7520  evelopment, you 
+00002600: 6361 6e20 6569 7468 6572 2075 7365 2074  can either use t
+00002610: 6865 2053 534c 2f54 4c53 2063 6572 7469  he SSL/TLS certi
+00002620: 6669 6361 7465 0a6f 6620 7468 6520 6365  ficate.of the ce
+00002630: 7274 6966 6963 6174 6520 6175 7468 6f72  rtificate author
+00002640: 6974 7920 7573 6564 2074 6f20 6372 6561  ity used to crea
+00002650: 7465 2074 6865 2073 6572 7665 7227 7320  te the server's 
+00002660: 6365 7274 6966 6963 6174 652c 206f 7220  certificate, or 
+00002670: 7768 656e 2075 7369 6e67 2061 0a73 696e  when using a.sin
+00002680: 676c 652d 6e6f 6465 2063 6c75 7374 6572  gle-node cluster
+00002690: 2c20 796f 7520 6361 6e20 7573 6520 7468  , you can use th
+000026a0: 6520 7365 7276 6572 2063 6572 7469 6669  e server certifi
+000026b0: 6361 7465 2069 7473 656c 662e 2059 6f75  cate itself. You
+000026c0: 2063 616e 2067 6574 2074 6865 0a73 6572   can get the.ser
+000026d0: 7665 7220 6365 7274 6966 6963 6174 6520  ver certificate 
+000026e0: 7769 7468 2074 6865 2066 6f6c 6c6f 7769  with the followi
+000026f0: 6e67 2050 7974 686f 6e20 636f 6465 2e0a  ng Python code..
+00002700: 0a0a 6060 6070 7974 686f 6e0a 696d 706f  ..```python.impo
+00002710: 7274 2073 736c 0a0a 7365 7276 6572 5f63  rt ssl..server_c
+00002720: 6572 7469 6669 6361 7465 203d 2073 736c  ertificate = ssl
+00002730: 2e67 6574 5f73 6572 7665 725f 6365 7274  .get_server_cert
+00002740: 6966 6963 6174 6528 6164 6472 3d28 276c  ificate(addr=('l
+00002750: 6f63 616c 686f 7374 272c 2032 3131 3329  ocalhost', 2113)
+00002760: 290a 6060 600a 0a59 6f75 2063 616e 2061  ).```..You can a
+00002770: 6c73 6f20 7374 6172 7420 616e 2022 696e  lso start an "in
+00002780: 7365 6375 7265 2220 7365 7276 6572 2075  secure" server u
+00002790: 7369 6e67 2074 6865 2066 6f6c 6c6f 7769  sing the followi
+000027a0: 6e67 2063 6f6d 6d61 6e64 2e0a 0a20 2020  ng command...   
+000027b0: 2024 2064 6f63 6b65 7220 7275 6e20 2d64   $ docker run -d
+000027c0: 202d 2d6e 616d 6520 6576 656e 7473 746f   --name eventsto
+000027d0: 7265 6462 2d69 6e73 6563 7572 6520 2d69  redb-insecure -i
+000027e0: 7420 2d70 2032 3131 343a 3231 3133 2065  t -p 2114:2113 e
+000027f0: 7665 6e74 7374 6f72 652f 6576 656e 7473  ventstore/events
+00002800: 746f 7265 3a32 312e 3130 2e39 2d62 7573  tore:21.10.9-bus
+00002810: 7465 722d 736c 696d 202d 2d69 6e73 6563  ter-slim --insec
+00002820: 7572 650a 0a54 6865 2063 6f6e 6e65 6374  ure..The connect
+00002830: 696f 6e20 7374 7269 6e67 2055 5249 2066  ion string URI f
+00002840: 6f72 2074 6869 7320 2269 6e73 6563 7572  or this "insecur
+00002850: 6522 2073 6572 7665 7220 776f 756c 6420  e" server would 
+00002860: 6265 3a0a 0a20 2020 2065 7364 623a 2f2f  be:..    esdb://
+00002870: 6c6f 6361 6c68 6f73 743a 3231 3134 3f54  localhost:2114?T
+00002880: 6c73 3d66 616c 7365 0a0a 4173 2077 6520  ls=false..As we 
+00002890: 7769 6c6c 2073 6565 2c20 7768 656e 2063  will see, when c
+000028a0: 6f6e 6e65 6374 696e 6720 746f 2061 6e20  onnecting to an 
+000028b0: 2269 6e73 6563 7572 6522 2073 6572 7665  "insecure" serve
+000028c0: 722c 2074 6865 7265 2069 7320 6e6f 206e  r, there is no n
+000028d0: 6565 6420 746f 2069 6e63 6c75 6465 0a61  eed to include.a
+000028e0: 2022 7573 6572 6e61 6d65 2220 616e 6420   "username" and 
+000028f0: 6120 2270 6173 7377 6f72 6422 2069 6e20  a "password" in 
+00002900: 7468 6520 636f 6e6e 6563 7469 6f6e 2073  the connection s
+00002910: 7472 696e 672e 2049 6620 796f 7520 646f  tring. If you do
+00002920: 2c20 7468 6573 6520 7661 6c75 6573 2077  , these values w
+00002930: 696c 6c0a 6265 2069 676e 6f72 6564 2062  ill.be ignored b
+00002940: 7920 7468 6520 636c 6965 6e74 2c20 736f  y the client, so
+00002950: 2074 6861 7420 7468 6579 2077 696c 6c20   that they will 
+00002960: 6e6f 7420 6265 2073 656e 7420 746f 2074  not be sent to t
+00002970: 6865 2073 6572 7665 7220 6f76 6572 2061  he server over a
+00002980: 6e0a 696e 7365 6375 7265 2063 6861 6e6e  n.insecure chann
+00002990: 656c 2e0a 0a50 6c65 6173 6520 6e6f 7465  el...Please note
+000029a0: 2c20 7468 6520 2269 6e73 6563 7572 6522  , the "insecure"
+000029b0: 2063 6f6e 6e65 6374 696f 6e20 7374 7269   connection stri
+000029c0: 6e67 2075 7365 7320 6120 7175 6572 7920  ng uses a query 
+000029d0: 7374 7269 6e67 2077 6974 6820 7468 6520  string with the 
+000029e0: 6669 656c 642d 7661 6c75 650a 6054 6c73  field-value.`Tls
+000029f0: 3d66 616c 7365 602e 2054 6865 2076 616c  =false`. The val
+00002a00: 7565 206f 6620 7468 6973 2066 6965 6c64  ue of this field
+00002a10: 2069 7320 6279 2064 6566 6175 6c74 2060   is by default `
+00002a20: 7472 7565 602e 2053 6565 2074 6865 204e  true`. See the N
+00002a30: 6f74 6573 2073 6563 7469 6f6e 2062 656c  otes section bel
+00002a40: 6f77 0a66 6f72 206d 6f72 6520 696e 666f  ow.for more info
+00002a50: 726d 6174 696f 6e20 6162 6f75 7420 4576  rmation about Ev
+00002a60: 656e 7453 746f 7265 4442 2063 6f6e 6e65  entStoreDB conne
+00002a70: 6374 696f 6e20 7374 7269 6e67 7320 616e  ction strings an
+00002a80: 6420 7468 6520 6669 656c 6473 2074 6861  d the fields tha
+00002a90: 7420 6361 6e20 6265 0a75 7365 6420 696e  t can be.used in
+00002aa0: 2074 6865 2071 7565 7279 2073 7472 696e   the query strin
+00002ab0: 6720 746f 2073 7065 6369 6679 2063 6f6e  g to specify con
+00002ac0: 6e65 6374 696f 6e20 6f70 7469 6f6e 732e  nection options.
+00002ad0: 0a0a 2323 2320 5374 6f70 2063 6f6e 7461  ..### Stop conta
+00002ae0: 696e 6572 0a0a 546f 2073 746f 7020 616e  iner..To stop an
+00002af0: 6420 7265 6d6f 7665 2074 6865 2022 7365  d remove the "se
+00002b00: 6375 7265 2220 636f 6e74 6169 6e65 722c  cure" container,
+00002b10: 2075 7365 2074 6865 2066 6f6c 6c6f 7769   use the followi
+00002b20: 6e67 2044 6f63 6b65 7220 636f 6d6d 616e  ng Docker comman
+00002b30: 6473 2e0a 0a20 2020 2024 2064 6f63 6b65  ds...    $ docke
+00002b40: 7220 7374 6f70 2065 7665 6e74 7374 6f72  r stop eventstor
+00002b50: 6564 622d 7365 6375 7265 0a09 2420 646f  edb-secure..$ do
+00002b60: 636b 6572 2072 6d20 6576 656e 7473 746f  cker rm eventsto
+00002b70: 7265 6462 2d73 6563 7572 650a 0a54 6f20  redb-secure..To 
+00002b80: 7374 6f70 2061 6e64 2072 656d 6f76 6520  stop and remove 
+00002b90: 7468 6520 2269 6e73 6563 7572 6522 2063  the "insecure" c
+00002ba0: 6f6e 7461 696e 6572 2c20 7573 6520 7468  ontainer, use th
+00002bb0: 6520 666f 6c6c 6f77 696e 6720 446f 636b  e following Dock
+00002bc0: 6572 2063 6f6d 6d61 6e64 732e 0a0a 2020  er commands...  
+00002bd0: 2020 2420 646f 636b 6572 2073 746f 7020    $ docker stop 
+00002be0: 6576 656e 7473 746f 7265 6462 2d69 6e73  eventstoredb-ins
+00002bf0: 6563 7572 650a 0924 2064 6f63 6b65 7220  ecure..$ docker 
+00002c00: 726d 2065 7665 6e74 7374 6f72 6564 622d  rm eventstoredb-
+00002c10: 696e 7365 6375 7265 0a0a 0a23 2320 4576  insecure...## Ev
+00002c20: 656e 7453 746f 7265 4442 2063 6c69 656e  entStoreDB clien
+00002c30: 740a 0a54 6869 7320 4576 656e 7453 746f  t..This EventSto
+00002c40: 7265 4442 2063 6c69 656e 7420 6973 2069  reDB client is i
+00002c50: 6d70 6c65 6d65 6e74 6564 2069 6e20 7468  mplemented in th
+00002c60: 6520 6065 7364 6263 6c69 656e 7460 2070  e `esdbclient` p
+00002c70: 6163 6b61 6765 2077 6974 680a 7468 6520  ackage with.the 
+00002c80: 6045 5344 4243 6c69 656e 7460 2063 6c61  `ESDBClient` cla
+00002c90: 7373 2e0a 0a23 2323 2049 6d70 6f72 7420  ss...### Import 
+00002ca0: 636c 6173 730a 0a54 6865 2060 4553 4442  class..The `ESDB
+00002cb0: 436c 6965 6e74 6020 636c 6173 7320 6361  Client` class ca
+00002cc0: 6e20 6265 2069 6d70 6f72 7465 6420 6672  n be imported fr
+00002cd0: 6f6d 2074 6865 2060 6573 6462 636c 6965  om the `esdbclie
+00002ce0: 6e74 6020 7061 636b 6167 652e 0a0a 6060  nt` package...``
+00002cf0: 6070 7974 686f 6e0a 6672 6f6d 2065 7364  `python.from esd
+00002d00: 6263 6c69 656e 7420 696d 706f 7274 2045  bclient import E
+00002d10: 5344 4243 6c69 656e 740a 6060 600a 0a23  SDBClient.```..#
+00002d20: 2323 2043 6f6e 7374 7275 6374 2063 6c69  ## Construct cli
+00002d30: 656e 740a 0a54 6865 2060 4553 4442 436c  ent..The `ESDBCl
+00002d40: 6965 6e74 6020 636c 6173 7320 6361 6e20  ient` class can 
+00002d50: 6265 2063 6f6e 7374 7275 6374 6564 2077  be constructed w
+00002d60: 6974 6820 6120 6075 7269 6020 6172 6775  ith a `uri` argu
+00002d70: 6d65 6e74 2c20 7768 6963 6820 6973 2072  ment, which is r
+00002d80: 6571 7569 7265 642e 0a41 6e64 2c20 746f  equired..And, to
+00002d90: 2063 6f6e 6e65 6374 2074 6f20 6120 2273   connect to a "s
+00002da0: 6563 7572 6522 2045 7665 6e74 5374 6f72  ecure" EventStor
+00002db0: 6544 4220 7365 7276 6572 2c20 7468 6520  eDB server, the 
+00002dc0: 6f70 7469 6f6e 616c 2060 726f 6f74 5f63  optional `root_c
+00002dd0: 6572 7469 6669 6361 7465 7360 0a61 7267  ertificates`.arg
+00002de0: 756d 656e 7420 6973 2061 6c73 6f20 7265  ument is also re
+00002df0: 7175 6972 6564 2e0a 0a54 6865 2060 7572  quired...The `ur
+00002e00: 6960 2061 7267 756d 656e 7420 6973 2065  i` argument is e
+00002e10: 7870 6563 7465 6420 746f 2062 6520 616e  xpected to be an
+00002e20: 2045 7665 6e74 5374 6f72 6544 4220 636f   EventStoreDB co
+00002e30: 6e6e 6563 7469 6f6e 2073 7472 696e 6720  nnection string 
+00002e40: 5552 4920 7468 6174 0a63 6f6e 666f 726d  URI that.conform
+00002e50: 7320 7769 7468 2074 6865 2073 7461 6e64  s with the stand
+00002e60: 6172 6420 4576 656e 7453 746f 7265 4442  ard EventStoreDB
+00002e70: 2022 6573 6462 2220 6f72 2022 6573 6462   "esdb" or "esdb
+00002e80: 2b64 6973 636f 7665 7222 2055 5249 2073  +discover" URI s
+00002e90: 6368 656d 6573 2e20 5468 650a 7379 6e74  chemes. The.synt
+00002ea0: 6178 2061 6e64 2073 656d 616e 7469 6373  ax and semantics
+00002eb0: 206f 6620 4576 656e 7453 746f 7265 4442   of EventStoreDB
+00002ec0: 2063 6f6e 6e65 6374 696f 6e20 7374 7269   connection stri
+00002ed0: 6e67 7320 6172 6520 6578 706c 6169 6e65  ngs are explaine
+00002ee0: 6420 696e 2074 6865 204e 6f74 6573 0a73  d in the Notes.s
+00002ef0: 6563 7469 6f6e 2062 656c 6f77 2e0a 0a46  ection below...F
+00002f00: 6f72 2065 7861 6d70 6c65 2c20 7468 6520  or example, the 
+00002f10: 666f 6c6c 6f77 696e 6720 636f 6e6e 6563  following connec
+00002f20: 7469 6f6e 2073 7472 696e 6720 7370 6563  tion string spec
+00002f30: 6966 6965 7320 7468 6174 2074 6865 2063  ifies that the c
+00002f40: 6c69 656e 7420 7368 6f75 6c64 0a61 7474  lient should.att
+00002f50: 656d 7074 2074 6f20 6372 6561 7465 2061  empt to create a
+00002f60: 2022 7365 6375 7265 2220 636f 6e6e 6563   "secure" connec
+00002f70: 7469 6f6e 2074 6f20 706f 7274 2032 3131  tion to port 211
+00002f80: 3320 6f6e 2022 6c6f 6361 6c68 6f73 7422  3 on "localhost"
+00002f90: 2c20 616e 6420 7573 6520 7468 650a 636c  , and use the.cl
+00002fa0: 6965 6e74 2063 7265 6465 6e74 6961 6c73  ient credentials
+00002fb0: 2022 7573 6572 6e61 6d65 2220 616e 6420   "username" and 
+00002fc0: 2270 6173 7377 6f72 6422 2077 6865 6e20  "password" when 
+00002fd0: 6d61 6b69 6e67 2063 616c 6c73 2074 6f20  making calls to 
+00002fe0: 7468 6520 7365 7276 6572 2e0a 0a20 2020  the server...   
+00002ff0: 2065 7364 623a 2f2f 7573 6572 6e61 6d65   esdb://username
+00003000: 3a70 6173 7377 6f72 6440 6c6f 6361 6c68  :password@localh
+00003010: 6f73 743a 3231 3133 3f54 6c73 3d74 7275  ost:2113?Tls=tru
+00003020: 650a 0a54 6865 2063 6c69 656e 7420 6d75  e..The client mu
+00003030: 7374 2062 6520 636f 6e66 6967 7572 6564  st be configured
+00003040: 2074 6f20 6372 6561 7465 2061 2022 7365   to create a "se
+00003050: 6375 7265 2220 636f 6e6e 6563 7469 6f6e  cure" connection
+00003060: 2074 6f20 6120 2273 6563 7572 6522 2073   to a "secure" s
+00003070: 6572 7665 722c 0a6f 7220 616c 7465 726e  erver,.or altern
+00003080: 6174 6976 656c 7920 616e 2022 696e 7365  atively an "inse
+00003090: 6375 7265 2220 636f 6e6e 6563 7469 6f6e  cure" connection
+000030a0: 2074 6f20 616e 2022 696e 7365 6375 7265   to an "insecure
+000030b0: 2220 7365 7276 6572 2e20 4279 2064 6566  " server. By def
+000030c0: 6175 6c74 2c20 7468 650a 636c 6965 6e74  ault, the.client
+000030d0: 2077 696c 6c20 6174 7465 6d70 7420 746f   will attempt to
+000030e0: 2063 7265 6174 6520 6120 2273 6563 7572   create a "secur
+000030f0: 6522 2063 6f6e 6e65 6374 696f 6e2e 2041  e" connection. A
+00003100: 6e64 2073 6f2c 2077 6865 6e20 636f 6e6e  nd so, when conn
+00003110: 6563 7469 6e67 2074 6f20 616e 0a22 696e  ecting to an."in
+00003120: 7365 6375 7265 2220 7365 7276 6572 2c20  secure" server, 
+00003130: 7468 6520 636f 6e6e 6563 7469 6f6e 2073  the connection s
+00003140: 7472 696e 6720 6d75 7374 2073 7065 6369  tring must speci
+00003150: 6679 2074 6861 7420 7468 6520 636c 6965  fy that the clie
+00003160: 6e74 2073 686f 756c 6420 6174 7465 6d70  nt should attemp
+00003170: 740a 746f 206d 616b 6520 616e 2022 696e  t.to make an "in
+00003180: 7365 6375 7265 2220 636f 6e6e 6563 7469  secure" connecti
+00003190: 6f6e 2e0a 0a54 6865 2066 6f6c 6c6f 7769  on...The followi
+000031a0: 6e67 2063 6f6e 6e65 6374 696f 6e20 7374  ng connection st
+000031b0: 7269 6e67 2073 7065 6369 6669 6573 2074  ring specifies t
+000031c0: 6861 7420 7468 6520 636c 6965 6e74 2073  hat the client s
+000031d0: 686f 756c 640a 6174 7465 6d70 7420 746f  hould.attempt to
+000031e0: 2063 7265 6174 6520 616e 2022 696e 7365   create an "inse
+000031f0: 6375 7265 2220 636f 6e6e 6563 7469 6f6e  cure" connection
+00003200: 2074 6f20 706f 7274 2032 3131 3420 6f6e   to port 2114 on
+00003210: 2022 6c6f 6361 6c68 6f73 7422 2e0a 5768   "localhost"..Wh
+00003220: 656e 2063 6f6e 6e65 6374 696e 6720 746f  en connecting to
+00003230: 2061 6e20 2269 6e73 6563 7572 6522 2073   an "insecure" s
+00003240: 6572 7665 722c 2074 6865 2063 6c69 656e  erver, the clien
+00003250: 7420 7769 6c6c 2069 676e 6f72 6520 616e  t will ignore an
+00003260: 790a 7573 6572 6e61 6d65 2061 6e64 2070  y.username and p
+00003270: 6173 7377 6f72 6420 696e 666f 726d 6174  assword informat
+00003280: 696f 6e20 696e 636c 7564 6564 2069 6e20  ion included in 
+00003290: 7468 6520 636f 6e6e 6563 7469 6f6e 2073  the connection s
+000032a0: 7472 696e 672c 0a73 6f20 7468 6174 2075  tring,.so that u
+000032b0: 7365 726e 616d 6573 2061 6e64 2070 6173  sernames and pas
+000032c0: 7377 6f72 6473 2061 7265 206e 6f74 2073  swords are not s
+000032d0: 656e 7420 6f76 6572 2061 6e20 2269 6e73  ent over an "ins
+000032e0: 6563 7572 6522 2063 6f6e 6e65 6374 696f  ecure" connectio
+000032f0: 6e2e 0a0a 2020 2020 6573 6462 3a2f 2f6c  n...    esdb://l
+00003300: 6f63 616c 686f 7374 3a32 3131 343f 546c  ocalhost:2114?Tl
+00003310: 733d 6661 6c73 650a 0a50 6c65 6173 6520  s=false..Please 
+00003320: 6e6f 7465 2c20 7468 6520 2269 6e73 6563  note, the "insec
+00003330: 7572 6522 2063 6f6e 6e65 6374 696f 6e20  ure" connection 
+00003340: 7374 7269 6e67 2075 7365 7320 6120 7175  string uses a qu
+00003350: 6572 7920 7374 7269 6e67 2077 6974 6820  ery string with 
+00003360: 7468 6520 6669 656c 642d 7661 6c75 650a  the field-value.
+00003370: 6054 6c73 3d66 616c 7365 602e 2054 6865  `Tls=false`. The
+00003380: 2076 616c 7565 206f 6620 7468 6973 2066   value of this f
+00003390: 6965 6c64 2069 7320 6279 2064 6566 6175  ield is by defau
+000033a0: 6c74 2060 7472 7565 602e 2055 6e6c 6573  lt `true`. Unles
+000033b0: 7320 7468 6520 636f 6e6e 6563 7469 6f6e  s the connection
+000033c0: 2073 7472 696e 670a 5552 4920 696e 636c   string.URI incl
+000033d0: 7564 6573 2074 6865 2066 6965 6c64 2d76  udes the field-v
+000033e0: 616c 7565 2060 546c 733d 6661 6c73 6560  alue `Tls=false`
+000033f0: 2069 6e20 7468 6520 7175 6572 7920 7374   in the query st
+00003400: 7269 6e67 2c20 7468 6520 6072 6f6f 745f  ring, the `root_
+00003410: 6365 7274 6966 6963 6174 6573 600a 636f  certificates`.co
+00003420: 6e73 7472 7563 746f 7220 6172 6775 6d65  nstructor argume
+00003430: 6e74 2069 7320 616c 736f 2072 6571 7569  nt is also requi
+00003440: 7265 642e 0a0a 5768 656e 2063 6f6e 6e65  red...When conne
+00003450: 6374 696e 6720 746f 2061 2022 7365 6375  cting to a "secu
+00003460: 7265 2220 7365 7276 6572 2c20 7468 6520  re" server, the 
+00003470: 6072 6f6f 745f 6365 7274 6966 6963 6174  `root_certificat
+00003480: 6573 6020 6172 6775 6d65 6e74 2069 7320  es` argument is 
+00003490: 6578 7065 6374 6564 2074 6f0a 6265 2061  expected to.be a
+000034a0: 2050 7974 686f 6e20 6073 7472 6020 636f   Python `str` co
+000034b0: 6e74 6169 6e69 6e67 2050 454d 2065 6e63  ntaining PEM enc
+000034c0: 6f64 6564 2053 534c 2f54 4c53 2072 6f6f  oded SSL/TLS roo
+000034d0: 7420 6365 7274 6966 6963 6174 6573 2e20  t certificates. 
+000034e0: 5468 6973 2076 616c 7565 2069 730a 7061  This value is.pa
+000034f0: 7373 6564 2064 6972 6563 746c 7920 746f  ssed directly to
+00003500: 2060 6772 7063 2e73 736c 5f63 6861 6e6e   `grpc.ssl_chann
+00003510: 656c 5f63 7265 6465 6e74 6961 6c73 2829  el_credentials()
+00003520: 602e 2049 7420 6973 2075 7365 6420 666f  `. It is used fo
+00003530: 7220 6175 7468 656e 7469 6361 7469 6e67  r authenticating
+00003540: 2074 6865 0a73 6572 7665 7220 746f 2074   the.server to t
+00003550: 6865 2063 6c69 656e 742e 2049 7420 6973  he client. It is
+00003560: 2063 6f6d 6d6f 6e6c 7920 7468 6520 6365   commonly the ce
+00003570: 7274 6966 6963 6174 6520 6f66 2074 6865  rtificate of the
+00003580: 2063 6572 7469 6669 6361 7465 2061 7574   certificate aut
+00003590: 686f 7269 7479 2074 6861 740a 7761 7320  hority that.was 
+000035a0: 7265 7370 6f6e 7369 626c 6520 666f 7220  responsible for 
+000035b0: 6765 6e65 7261 7469 6e67 2074 6865 2053  generating the S
+000035c0: 534c 2f54 4c53 2063 6572 7469 6669 6361  SL/TLS certifica
+000035d0: 7465 2075 7365 6420 6279 2074 6865 2045  te used by the E
+000035e0: 7665 6e74 5374 6f72 6544 4220 7365 7276  ventStoreDB serv
+000035f0: 6572 2e0a 4275 742c 2061 6c74 6572 6e61  er..But, alterna
+00003600: 7469 7665 6c79 2066 6f72 2064 6576 656c  tively for devel
+00003610: 6f70 6d65 6e74 2c20 796f 7520 6361 6e20  opment, you can 
+00003620: 7573 6520 7468 6520 7365 7276 6572 2773  use the server's
+00003630: 2063 6572 7469 6669 6361 7465 2069 7473   certificate its
+00003640: 656c 662e 0a0a 496e 2074 6865 2065 7861  elf...In the exa
+00003650: 6d70 6c65 2062 656c 6f77 2c20 7468 6520  mple below, the 
+00003660: 636f 6e73 7472 7563 746f 7220 6172 6775  constructor argu
+00003670: 6d65 6e74 2076 616c 7565 7320 6172 6520  ment values are 
+00003680: 7461 6b65 6e20 6672 6f6d 2074 6865 206f  taken from the o
+00003690: 7065 7261 7469 6e67 0a73 7973 7465 6d20  perating.system 
+000036a0: 656e 7669 726f 6e6d 656e 742e 2054 6869  environment. Thi
+000036b0: 7320 6973 2061 2074 7970 6963 616c 2061  s is a typical a
+000036c0: 7272 616e 6765 6d65 6e74 2069 6e20 6120  rrangement in a 
+000036d0: 7072 6f64 7563 7469 6f6e 2065 6e76 6972  production envir
+000036e0: 6f6e 6d65 6e74 2e20 4974 2069 730a 646f  onment. It is.do
+000036f0: 6e65 2074 6869 7320 7761 7920 6865 7265  ne this way here
+00003700: 2073 6f20 7468 6174 2074 6865 2063 6f64   so that the cod
+00003710: 6520 696e 2074 6869 7320 646f 6375 6d65  e in this docume
+00003720: 6e74 6174 696f 6e20 6361 6e20 6265 2074  ntation can be t
+00003730: 6573 7465 6420 7769 7468 2062 6f74 680a  ested with both.
+00003740: 6120 2273 6563 7572 6522 2061 6e64 2061  a "secure" and a
+00003750: 6e20 2269 6e73 6563 7572 6522 2073 6572  n "insecure" ser
+00003760: 7665 722e 0a0a 6060 6070 7974 686f 6e0a  ver...```python.
+00003770: 696d 706f 7274 206f 730a 0a63 6c69 656e  import os..clien
+00003780: 7420 3d20 4553 4442 436c 6965 6e74 280a  t = ESDBClient(.
+00003790: 2020 2020 7572 693d 6f73 2e67 6574 656e      uri=os.geten
+000037a0: 7628 2245 5344 425f 5552 4922 292c 0a20  v("ESDB_URI"),. 
+000037b0: 2020 2072 6f6f 745f 6365 7274 6966 6963     root_certific
+000037c0: 6174 6573 3d6f 732e 6765 7465 6e76 2822  ates=os.getenv("
+000037d0: 4553 4442 5f52 4f4f 545f 4345 5254 4946  ESDB_ROOT_CERTIF
+000037e0: 4943 4154 4553 2229 2c0a 290a 6060 600a  ICATES"),.).```.
+000037f0: 0a53 6565 2074 6865 204e 6f74 6573 2073  .See the Notes s
+00003800: 6563 7469 6f6e 2062 656c 6f77 2066 6f72  ection below for
+00003810: 2064 6574 6169 6c65 6420 696e 666f 726d   detailed inform
+00003820: 6174 696f 6e20 6162 6f75 7420 4576 656e  ation about Even
+00003830: 7453 746f 7265 4442 2063 6f6e 6e65 6374  tStoreDB connect
+00003840: 696f 6e0a 7374 7269 6e67 7320 616e 6420  ion.strings and 
+00003850: 7468 6520 6669 656c 6473 2074 6861 7420  the fields that 
+00003860: 6361 6e20 6265 2075 7365 6420 696e 2074  can be used in t
+00003870: 6865 2071 7565 7279 2073 7472 696e 6720  he query string 
+00003880: 746f 2073 7065 6369 6679 2063 6f6e 6e65  to specify conne
+00003890: 6374 696f 6e0a 6f70 7469 6f6e 732e 0a0a  ction.options...
+000038a0: 2323 2053 7472 6561 6d73 0a0a 496e 2045  ## Streams..In E
+000038b0: 7665 6e74 5374 6f72 6544 422c 2061 2022  ventStoreDB, a "
+000038c0: 7374 7265 616d 2220 6973 2061 2073 6571  stream" is a seq
+000038d0: 7565 6e63 6520 6f66 2072 6563 6f72 6465  uence of recorde
+000038e0: 6420 6576 656e 7473 2074 6861 7420 616c  d events that al
+000038f0: 6c20 6861 7665 0a74 6865 2073 616d 6520  l have.the same 
+00003900: 2273 7472 6561 6d20 6e61 6d65 222e 2054  "stream name". T
+00003910: 6865 7265 2077 696c 6c20 6e6f 726d 616c  here will normal
+00003920: 6c79 2062 6520 6d61 6e79 2073 7472 6561  ly be many strea
+00003930: 6d73 2069 6e20 6120 6461 7461 6261 7365  ms in a database
+00003940: 2e0a 4561 6368 2072 6563 6f72 6465 6420  ..Each recorded 
+00003950: 6576 656e 7420 6861 7320 6120 2273 7472  event has a "str
+00003960: 6561 6d20 706f 7369 7469 6f6e 2220 696e  eam position" in
+00003970: 2069 7473 2073 7472 6561 6d2c 2061 6e64   its stream, and
+00003980: 2061 2022 636f 6d6d 6974 2070 6f73 6974   a "commit posit
+00003990: 696f 6e22 0a69 6e20 7468 6520 6461 7461  ion".in the data
+000039a0: 6261 7365 2e20 5468 6520 7374 7265 616d  base. The stream
+000039b0: 2070 6f73 6974 696f 6e73 206f 6620 7468   positions of th
+000039c0: 6520 7265 636f 7264 6564 2065 7665 6e74  e recorded event
+000039d0: 7320 696e 2061 2073 7472 6561 6d20 6973  s in a stream is
+000039e0: 2061 2067 6170 6c65 7373 0a73 6571 7565   a gapless.seque
+000039f0: 6e63 6520 7374 6172 7469 6e67 2066 726f  nce starting fro
+00003a00: 6d20 7a65 726f 2e20 5468 6520 636f 6d6d  m zero. The comm
+00003a10: 6974 2070 6f73 6974 696f 6e73 206f 6620  it positions of 
+00003a20: 7468 6520 7265 636f 7264 6564 2065 7665  the recorded eve
+00003a30: 6e74 7320 696e 2074 6865 2064 6174 6162  nts in the datab
+00003a40: 6173 650a 666f 726d 2061 2073 6571 7565  ase.form a seque
+00003a50: 6e63 6520 7468 6174 2069 7320 6e6f 7420  nce that is not 
+00003a60: 6761 706c 6573 732e 0a0a 5468 6520 6d65  gapless...The me
+00003a70: 7468 6f64 7320 6061 7070 656e 645f 6576  thods `append_ev
+00003a80: 656e 7473 2829 602c 2060 7265 6164 5f73  ents()`, `read_s
+00003a90: 7472 6561 6d5f 6576 656e 7473 2829 6020  tream_events()` 
+00003aa0: 616e 6420 6072 6561 645f 616c 6c5f 6576  and `read_all_ev
+00003ab0: 656e 7473 2829 6020 6361 6e0a 6265 2075  ents()` can.be u
+00003ac0: 7365 6420 746f 2072 6563 6f72 6420 616e  sed to record an
+00003ad0: 6420 7265 6164 2065 7665 6e74 7320 696e  d read events in
+00003ae0: 2074 6865 2064 6174 6162 6173 652e 0a0a   the database...
+00003af0: 2323 2320 4170 7065 6e64 2065 7665 6e74  ### Append event
+00003b00: 730a 0a2a 7265 7175 6972 6573 206c 6561  s..*requires lea
+00003b10: 6465 722a 0a0a 5468 6520 6061 7070 656e  der*..The `appen
+00003b20: 645f 6576 656e 7473 2829 6020 6d65 7468  d_events()` meth
+00003b30: 6f64 2063 616e 2062 6520 7573 6564 2074  od can be used t
+00003b40: 6f20 7772 6974 6520 6120 7365 7175 656e  o write a sequen
+00003b50: 6365 206f 6620 6e65 7720 6576 656e 7473  ce of new events
+00003b60: 2061 746f 6d69 6361 6c6c 790a 746f 2061   atomically.to a
+00003b70: 2022 7374 7265 616d 222e 2057 7269 7469   "stream". Writi
+00003b80: 6e67 206e 6577 2065 7665 6e74 7320 6569  ng new events ei
+00003b90: 7468 6572 2063 7265 6174 6573 2061 2073  ther creates a s
+00003ba0: 7472 6561 6d2c 206f 7220 6170 7065 6e64  tream, or append
+00003bb0: 7320 6576 656e 7473 2074 6f20 7468 6520  s events to the 
+00003bc0: 656e 640a 6f66 2061 2073 7472 6561 6d2e  end.of a stream.
+00003bd0: 2054 6869 7320 6d65 7468 6f64 2069 7320   This method is 
+00003be0: 6964 656d 706f 7465 6e74 2028 7365 6520  idempotent (see 
+00003bf0: 6265 6c6f 7729 2e0a 0a54 6869 7320 6d65  below)...This me
+00003c00: 7468 6f64 2063 616e 2062 6520 7573 6564  thod can be used
+00003c10: 2074 6f20 7265 636f 7264 2061 746f 6d69   to record atomi
+00003c20: 6361 6c6c 7920 616c 6c20 7468 6520 6e65  cally all the ne
+00003c30: 770a 6576 656e 7473 2074 6861 7420 6172  w.events that ar
+00003c40: 6520 6765 6e65 7261 7465 6420 7768 656e  e generated when
+00003c50: 2065 7865 6375 7469 6e67 2061 2063 6f6d   executing a com
+00003c60: 6d61 6e64 2069 6e20 616e 2061 7070 6c69  mand in an appli
+00003c70: 6361 7469 6f6e 2e0a 0a54 6872 6565 2061  cation...Three a
+00003c80: 7267 756d 656e 7473 2061 7265 2072 6571  rguments are req
+00003c90: 7569 7265 642c 2060 7374 7265 616d 5f6e  uired, `stream_n
+00003ca0: 616d 6560 2c20 6065 7870 6563 7465 645f  ame`, `expected_
+00003cb0: 706f 7369 7469 6f6e 600a 616e 6420 6065  position`.and `e
+00003cc0: 7665 6e74 7360 2e0a 0a54 6865 2060 7374  vents`...The `st
+00003cd0: 7265 616d 5f6e 616d 6560 2061 7267 756d  ream_name` argum
+00003ce0: 656e 7420 6973 2072 6571 7569 7265 642c  ent is required,
+00003cf0: 2061 6e64 2069 7320 6578 7065 6374 6564   and is expected
+00003d00: 2074 6f20 6265 2061 2050 7974 686f 6e0a   to be a Python.
+00003d10: 6073 7472 6020 7468 6174 2075 6e69 7175  `str` that uniqu
+00003d20: 656c 7920 6964 656e 7469 6669 6573 2074  ely identifies t
+00003d30: 6865 2073 7472 6561 6d20 696e 2074 6865  he stream in the
+00003d40: 2064 6174 6162 6173 652e 0a0a 5468 6520   database...The 
 00003d50: 6065 7870 6563 7465 645f 706f 7369 7469  `expected_positi
-00003d60: 6f6e 600a 6172 6775 6d65 6e74 2077 6865  on`.argument whe
-00003d70: 6e20 7772 6974 696e 6720 7468 6520 6669  n writing the fi
-00003d80: 7273 7420 6576 656e 7420 6f66 2061 206e  rst event of a n
-00003d90: 6577 2073 7472 6561 6d20 6973 2060 4e6f  ew stream is `No
-00003da0: 6e65 602e 2050 6c65 6173 6520 6e6f 7465  ne`. Please note
-00003db0: 2c20 6974 2069 730a 6e6f 7420 706f 7373  , it is.not poss
-00003dc0: 6962 6c65 2074 6f20 736f 6d65 686f 7720  ible to somehow 
-00003dd0: 6372 6561 7465 2061 6e20 2265 6d70 7479  create an "empty
-00003de0: 2220 7374 7265 616d 2069 6e20 4576 656e  " stream in Even
-00003df0: 7453 746f 7265 4442 2e0a 0a54 6865 2073  tStoreDB...The s
-00003e00: 7472 6561 6d20 706f 7369 7469 6f6e 7320  tream positions 
-00003e10: 6f66 2072 6563 6f72 6465 6420 6576 656e  of recorded even
-00003e20: 7473 2069 6e20 6120 7374 7265 616d 2073  ts in a stream s
-00003e30: 7461 7274 2066 726f 6d20 7a65 726f 2c20  tart from zero, 
-00003e40: 616e 6420 666f 726d 2061 2067 6170 6c65  and form a gaple
-00003e50: 7373 0a73 6571 7565 6e63 6520 6f66 2069  ss.sequence of i
-00003e60: 6e74 6567 6572 732e 2054 6865 2073 7472  ntegers. The str
-00003e70: 6561 6d20 706f 7369 7469 6f6e 206f 6620  eam position of 
-00003e80: 7468 6520 6669 7273 7420 7265 636f 7264  the first record
-00003e90: 6564 2065 7665 6e74 2069 6e20 6120 7374  ed event in a st
-00003ea0: 7265 616d 2069 730a 6030 602e 2041 6e64  ream is.`0`. And
-00003eb0: 2073 6f20 7768 656e 2061 7070 656e 6469   so when appendi
-00003ec0: 6e67 2074 6865 2073 6563 6f6e 6420 6e65  ng the second ne
-00003ed0: 7720 6576 656e 7420 746f 2061 2073 7472  w event to a str
-00003ee0: 6561 6d20 7468 6174 2068 6173 206f 6e65  eam that has one
-00003ef0: 2072 6563 6f72 6465 6420 6576 656e 742c   recorded event,
-00003f00: 0a74 6865 2063 6f72 7265 6374 2076 616c  .the correct val
-00003f10: 7565 206f 6620 7468 6520 6065 7870 6563  ue of the `expec
-00003f20: 7465 645f 706f 7369 7469 6f6e 6020 6172  ted_position` ar
-00003f30: 6775 6d65 6e74 2069 7320 6030 602e 2053  gument is `0`. S
-00003f40: 696d 696c 6172 6c79 2c20 7468 6520 7374  imilarly, the st
-00003f50: 7265 616d 0a70 6f73 6974 696f 6e20 6f66  ream.position of
-00003f60: 2074 6865 2073 6563 6f6e 6420 7265 636f   the second reco
-00003f70: 7264 6564 2065 7665 6e74 2069 6e20 6120  rded event in a 
-00003f80: 7374 7265 616d 2069 7320 6031 602c 2061  stream is `1`, a
-00003f90: 6e64 2073 6f20 7768 656e 2061 7070 656e  nd so when appen
-00003fa0: 6469 6e67 2074 6865 0a74 6869 7264 206e  ding the.third n
-00003fb0: 6577 2065 7665 6e74 2074 6f20 6120 7374  ew event to a st
-00003fc0: 7265 616d 2074 6861 7420 6861 7320 7477  ream that has tw
-00003fd0: 6f20 7265 636f 7264 6564 2065 7665 6e74  o recorded event
-00003fe0: 732c 2074 6865 2063 6f72 7265 6374 2076  s, the correct v
-00003ff0: 616c 7565 206f 6620 7468 650a 6065 7870  alue of the.`exp
-00004000: 6563 7465 645f 706f 7369 7469 6f6e 6020  ected_position` 
-00004010: 6172 6775 6d65 6e74 2069 7320 6031 602e  argument is `1`.
-00004020: 2041 6e64 2073 6f20 6f6e 2e2e 2e20 2854   And so on... (T
-00004030: 6865 7265 2069 7320 6120 7468 656f 7265  here is a theore
-00004040: 7469 6361 6c20 6d61 7869 6d75 6d0a 6e75  tical maximum.nu
-00004050: 6d62 6572 206f 6620 7265 636f 7264 6564  mber of recorded
-00004060: 2065 7665 6e74 7320 7468 6174 2061 6e79   events that any
-00004070: 2073 7472 6561 6d20 6361 6e20 6861 7665   stream can have
-00004080: 2c20 6275 7420 4927 6d20 6e6f 7420 7375  , but I'm not su
-00004090: 7265 2077 6861 7420 6974 2069 733b 0a6d  re what it is;.m
-000040a0: 6179 6265 2039 2c32 3233 2c33 3732 2c30  aybe 9,223,372,0
-000040b0: 3336 2c38 3534 2c37 3735 2c38 3037 2062  36,854,775,807 b
-000040c0: 6563 6175 7365 2069 7420 6973 2069 6d70  ecause it is imp
-000040d0: 6c65 6d65 6e74 6564 2061 7320 6120 606c  lemented as a `l
-000040e0: 6f6e 6760 2069 6e20 4323 3f29 0a0a 4966  ong` in C#?)..If
-000040f0: 2074 6865 7265 2069 7320 6120 6d69 736d   there is a mism
-00004100: 6174 6368 2062 6574 7765 656e 2074 6865  atch between the
-00004110: 2067 6976 656e 2076 616c 7565 206f 6620   given value of 
-00004120: 7468 6520 6065 7870 6563 7465 645f 706f  the `expected_po
-00004130: 7369 7469 6f6e 6020 6172 6775 6d65 6e74  sition` argument
-00004140: 0a61 6e64 2074 6865 2070 6f73 6974 696f  .and the positio
-00004150: 6e20 6f66 2074 6865 206c 6173 7420 7265  n of the last re
-00004160: 636f 7264 6564 2065 7665 6e74 2069 6e20  corded event in 
-00004170: 6120 7374 7265 616d 2c20 7468 656e 2061  a stream, then a
-00004180: 6e20 6045 7870 6563 7465 6450 6f73 6974  n `ExpectedPosit
-00004190: 696f 6e45 7272 6f72 600a 6578 6365 7074  ionError`.except
-000041a0: 696f 6e20 7769 6c6c 2062 6520 7261 6973  ion will be rais
-000041b0: 6564 2e20 5468 6973 2065 6666 6563 7469  ed. This effecti
-000041c0: 7665 6c79 2061 6363 6f6d 706c 6973 6865  vely accomplishe
-000041d0: 7320 6f70 7469 6d69 7374 6963 2063 6f6e  s optimistic con
-000041e0: 6375 7272 656e 6379 2063 6f6e 7472 6f6c  currency control
-000041f0: 2e0a 0a49 6620 796f 7520 7769 7368 2074  ...If you wish t
-00004200: 6f20 6469 7361 626c 6520 6f70 7469 6d69  o disable optimi
-00004210: 7374 6963 2063 6f6e 6375 7272 656e 6379  stic concurrency
-00004220: 2063 6f6e 7472 6f6c 2077 6865 6e20 6170   control when ap
-00004230: 7065 6e64 696e 6720 6e65 7720 6576 656e  pending new even
-00004240: 7473 2c20 796f 750a 6361 6e20 7365 7420  ts, you.can set 
-00004250: 7468 6520 6065 7870 6563 7465 645f 706f  the `expected_po
-00004260: 7369 7469 6f6e 6020 746f 2061 206e 6567  sition` to a neg
-00004270: 6174 6976 6520 696e 7465 6765 722e 0a0a  ative integer...
-00004280: 4966 2079 6f75 206e 6565 6420 746f 2064  If you need to d
-00004290: 6973 636f 7665 7220 7468 6520 6375 7272  iscover the curr
-000042a0: 656e 7420 706f 7369 7469 6f6e 206f 6620  ent position of 
-000042b0: 7468 6520 6c61 7374 2072 6563 6f72 6465  the last recorde
-000042c0: 6420 6576 656e 7420 696e 2061 2073 7472  d event in a str
-000042d0: 6561 6d2c 0a79 6f75 2063 616e 2075 7365  eam,.you can use
-000042e0: 2074 6865 2060 6765 745f 7374 7265 616d   the `get_stream
-000042f0: 5f70 6f73 6974 696f 6e28 2960 206d 6574  _position()` met
-00004300: 686f 6420 2873 6565 2062 656c 6f77 292e  hod (see below).
-00004310: 0a0a 506c 6561 7365 206e 6f74 652c 2074  ..Please note, t
-00004320: 6865 2061 7070 656e 6420 6576 656e 7473  he append events
-00004330: 206f 7065 7261 7469 6f6e 2069 7320 6174   operation is at
-00004340: 6f6d 6963 2c20 736f 2074 6861 7420 6569  omic, so that ei
-00004350: 7468 6572 2061 6c6c 0a6f 7220 6e6f 6e65  ther all.or none
-00004360: 206f 6620 7468 6520 6769 7665 6e20 6e65   of the given ne
-00004370: 7720 6576 656e 7473 2077 696c 6c20 6265  w events will be
-00004380: 2072 6563 6f72 6465 642e 2042 7920 6465   recorded. By de
-00004390: 7369 676e 2c20 6974 2069 7320 6f6e 6c79  sign, it is only
-000043a0: 0a70 6f73 7369 626c 6520 7769 7468 2045  .possible with E
-000043b0: 7665 6e74 5374 6f72 6544 4220 746f 2061  ventStoreDB to a
-000043c0: 746f 6d69 6361 6c6c 7920 7265 636f 7264  tomically record
-000043d0: 206e 6577 2065 7665 6e74 7320 696e 206f   new events in o
-000043e0: 6e65 2073 7472 6561 6d2e 0a0a 496e 2074  ne stream...In t
-000043f0: 6865 2065 7861 6d70 6c65 2062 656c 6f77  he example below
-00004400: 2c20 6120 6e65 7720 6576 656e 7420 6973  , a new event is
-00004410: 2061 7070 656e 6465 6420 746f 2061 206e   appended to a n
-00004420: 6577 2073 7472 6561 6d2e 0a0a 6060 6070  ew stream...```p
-00004430: 7974 686f 6e0a 6672 6f6d 2075 7569 6420  ython.from uuid 
-00004440: 696d 706f 7274 2075 7569 6434 0a0a 6672  import uuid4..fr
-00004450: 6f6d 2065 7364 6263 6c69 656e 7420 696d  om esdbclient im
-00004460: 706f 7274 204e 6577 4576 656e 740a 0a23  port NewEvent..#
-00004470: 2043 6f6e 7374 7275 6374 206e 6577 2065   Construct new e
-00004480: 7665 6e74 206f 626a 6563 742e 0a65 7665  vent object..eve
-00004490: 6e74 3120 3d20 4e65 7745 7665 6e74 2874  nt1 = NewEvent(t
-000044a0: 7970 653d 274f 7264 6572 4372 6561 7465  ype='OrderCreate
-000044b0: 6427 2c20 6461 7461 3d62 2764 6174 6131  d', data=b'data1
-000044c0: 2729 0a0a 2320 4465 6669 6e65 2073 7472  ')..# Define str
-000044d0: 6561 6d20 6e61 6d65 2e0a 7374 7265 616d  eam name..stream
-000044e0: 5f6e 616d 6531 203d 2073 7472 2875 7569  _name1 = str(uui
-000044f0: 6434 2829 290a 0a23 2041 7070 656e 6420  d4())..# Append 
-00004500: 6c69 7374 206f 6620 6576 656e 7473 2074  list of events t
-00004510: 6f20 6e65 7720 7374 7265 616d 2e0a 636f  o new stream..co
-00004520: 6d6d 6974 5f70 6f73 6974 696f 6e31 203d  mmit_position1 =
-00004530: 2063 6c69 656e 742e 6170 7065 6e64 5f65   client.append_e
-00004540: 7665 6e74 7328 0a20 2020 2073 7472 6561  vents(.    strea
-00004550: 6d5f 6e61 6d65 3d73 7472 6561 6d5f 6e61  m_name=stream_na
-00004560: 6d65 312c 0a20 2020 2065 7870 6563 7465  me1,.    expecte
-00004570: 645f 706f 7369 7469 6f6e 3d4e 6f6e 652c  d_position=None,
-00004580: 0a20 2020 2065 7665 6e74 733d 5b65 7665  .    events=[eve
-00004590: 6e74 315d 2c0a 290a 6060 600a 0a49 6e20  nt1],.).```..In 
-000045a0: 7468 6520 6578 616d 706c 6520 6265 6c6f  the example belo
-000045b0: 772c 2074 776f 2073 7562 7365 7175 656e  w, two subsequen
-000045c0: 7420 6576 656e 7473 2061 7265 2061 7070  t events are app
-000045d0: 656e 6465 6420 746f 2061 6e20 6578 6973  ended to an exis
-000045e0: 7469 6e67 0a73 7472 6561 6d2e 0a0a 6060  ting.stream...``
-000045f0: 6070 7974 686f 6e0a 6576 656e 7432 203d  `python.event2 =
-00004600: 204e 6577 4576 656e 7428 7479 7065 3d27   NewEvent(type='
-00004610: 4f72 6465 7255 7064 6174 6564 272c 2064  OrderUpdated', d
-00004620: 6174 613d 6227 6461 7461 3227 290a 6576  ata=b'data2').ev
-00004630: 656e 7433 203d 204e 6577 4576 656e 7428  ent3 = NewEvent(
-00004640: 7479 7065 3d27 4f72 6465 7244 656c 6574  type='OrderDelet
-00004650: 6564 272c 2064 6174 613d 6227 6461 7461  ed', data=b'data
-00004660: 3327 290a 0a63 6f6d 6d69 745f 706f 7369  3')..commit_posi
-00004670: 7469 6f6e 3220 3d20 636c 6965 6e74 2e61  tion2 = client.a
-00004680: 7070 656e 645f 6576 656e 7473 280a 2020  ppend_events(.  
-00004690: 2020 7374 7265 616d 5f6e 616d 653d 7374    stream_name=st
-000046a0: 7265 616d 5f6e 616d 6531 2c0a 2020 2020  ream_name1,.    
-000046b0: 6578 7065 6374 6564 5f70 6f73 6974 696f  expected_positio
-000046c0: 6e3d 302c 0a20 2020 2065 7665 6e74 733d  n=0,.    events=
-000046d0: 5b65 7665 6e74 322c 2065 7665 6e74 335d  [event2, event3]
-000046e0: 2c0a 290a 6060 600a 0a49 6620 7468 6520  ,.).```..If the 
-000046f0: 6f70 6572 6174 696f 6e20 6973 2073 7563  operation is suc
-00004700: 6365 7373 6675 6c2c 2074 6869 7320 6d65  cessful, this me
-00004710: 7468 6f64 2072 6574 7572 6e73 2061 6e20  thod returns an 
-00004720: 696e 7465 6765 720a 7265 7072 6573 656e  integer.represen
-00004730: 7469 6e67 2074 6865 206f 7665 7261 6c6c  ting the overall
-00004740: 2022 636f 6d6d 6974 2070 6f73 6974 696f   "commit positio
-00004750: 6e22 2061 7320 6974 2077 6173 2077 6865  n" as it was whe
-00004760: 6e20 7468 6520 6f70 6572 6174 696f 6e0a  n the operation.
-00004770: 7761 7320 636f 6d70 6c65 7465 642e 204f  was completed. O
-00004780: 7468 6572 7769 7365 2c20 616e 2065 7863  therwise, an exc
-00004790: 6570 7469 6f6e 2077 696c 6c20 6265 2072  eption will be r
-000047a0: 6169 7365 642e 0a0a 4120 2263 6f6d 6d69  aised...A "commi
-000047b0: 7420 706f 7369 7469 6f6e 2220 6973 2061  t position" is a
-000047c0: 206d 6f6e 6f74 6f6e 6963 616c 6c79 2069   monotonically i
-000047d0: 6e63 7265 6173 696e 6720 696e 7465 6765  ncreasing intege
-000047e0: 7220 7265 7072 6573 656e 7469 6e67 0a74  r representing.t
-000047f0: 6865 2070 6f73 6974 696f 6e20 6f66 2074  he position of t
-00004800: 6865 2072 6563 6f72 6465 6420 6576 656e  he recorded even
-00004810: 7420 696e 2061 2022 746f 7461 6c20 6f72  t in a "total or
-00004820: 6465 7222 206f 6620 616c 6c20 7265 636f  der" of all reco
-00004830: 7264 6564 0a65 7665 6e74 7320 696e 2074  rded.events in t
-00004840: 6865 2064 6174 6162 6173 6520 6163 726f  he database acro
-00004850: 7373 2061 6c6c 2073 7472 6561 6d73 2e20  ss all streams. 
-00004860: 4974 2069 7320 7468 6520 6163 7475 616c  It is the actual
-00004870: 2070 6f73 6974 696f 6e0a 6f66 2074 6865   position.of the
-00004880: 2065 7665 6e74 2072 6563 6f72 6420 6f6e   event record on
-00004890: 2064 6973 6b2c 2061 6e64 2074 6865 7265   disk, and there
-000048a0: 2061 7265 2075 7375 616c 6c79 206c 6172   are usually lar
-000048b0: 6765 2064 6966 6665 7265 6e63 6573 0a62  ge differences.b
-000048c0: 6574 7765 656e 2073 7563 6365 7373 6976  etween successiv
-000048d0: 6520 636f 6d6d 6974 732e 2049 6e20 636f  e commits. In co
-000048e0: 6e73 6571 7565 6e63 652c 2074 6865 2073  nsequence, the s
-000048f0: 6571 7565 6e63 6520 6f66 2063 6f6d 6d69  equence of commi
-00004900: 740a 706f 7369 7469 6f6e 7320 6973 206e  t.positions is n
-00004910: 6f74 2067 6170 6c65 7373 2e20 496e 6465  ot gapless. Inde
-00004920: 6564 2c20 7468 6572 6520 6172 6520 7573  ed, there are us
-00004930: 7561 6c6c 7920 6c61 7267 6520 6469 6666  ually large diff
-00004940: 6572 656e 6365 730a 6265 7477 6565 6e20  erences.between 
-00004950: 7468 6520 636f 6d6d 6974 2070 6f73 6974  the commit posit
-00004960: 696f 6e73 206f 6620 7375 6363 6573 7369  ions of successi
-00004970: 7665 2072 6563 6f72 6465 6420 6576 656e  ve recorded even
-00004980: 7473 2e0a 0a54 6865 2022 636f 6d6d 6974  ts...The "commit
-00004990: 2070 6f73 6974 696f 6e22 2072 6574 7572   position" retur
-000049a0: 6e65 6420 6279 2060 6170 7065 6e64 5f65  ned by `append_e
-000049b0: 7665 6e74 7328 2960 2069 7320 7468 6174  vents()` is that
-000049c0: 206f 6620 7468 6520 6c61 7374 0a72 6563   of the last.rec
-000049d0: 6f72 6465 6420 6576 656e 7420 696e 2074  orded event in t
-000049e0: 6865 2067 6976 656e 2062 6174 6368 206f  he given batch o
-000049f0: 6620 6e65 7720 6576 656e 7473 2e0a 0a54  f new events...T
-00004a00: 6865 2022 636f 6d6d 6974 2070 6f73 6974  he "commit posit
-00004a10: 696f 6e22 2072 6574 7572 6e65 6420 696e  ion" returned in
-00004a20: 2074 6869 7320 7761 7920 6361 6e20 7468   this way can th
-00004a30: 6572 6566 6f72 6520 6265 2075 7365 6420  erefore be used 
-00004a40: 746f 2077 6169 740a 666f 7220 6120 646f  to wait.for a do
-00004a50: 776e 7374 7265 616d 2063 6f6d 706f 6e65  wnstream compone
-00004a60: 6e74 2074 6f20 6861 7665 2070 726f 6365  nt to have proce
-00004a70: 7373 6564 2061 6c6c 2074 6865 2065 7665  ssed all the eve
-00004a80: 6e74 7320 7468 6174 2077 6572 6520 7265  nts that were re
-00004a90: 636f 7264 6564 2e0a 0a46 6f72 2065 7861  corded...For exa
-00004aa0: 6d70 6c65 2c20 636f 6e73 6964 6572 2061  mple, consider a
-00004ab0: 2075 7365 7220 696e 7465 7266 6163 6520   user interface 
-00004ac0: 636f 6d6d 616e 6420 7468 6174 2072 6573  command that res
-00004ad0: 756c 7473 2069 6e20 7468 6520 7265 636f  ults in the reco
-00004ae0: 7264 696e 670a 6f66 206e 6577 2065 7665  rding.of new eve
-00004af0: 6e74 732c 2061 6e64 2061 2071 7565 7279  nts, and a query
-00004b00: 2069 6e74 6f20 616e 2065 7665 6e74 7561   into an eventua
-00004b10: 6c6c 7920 636f 6e73 6973 7465 6e74 206d  lly consistent m
-00004b20: 6174 6572 6961 6c69 7a65 640a 7669 6577  aterialized.view
-00004b30: 2069 6e20 6120 646f 776e 7374 7265 616d   in a downstream
-00004b40: 2063 6f6d 706f 6e65 6e74 2074 6861 7420   component that 
-00004b50: 6973 2075 7064 6174 6564 2066 726f 6d20  is updated from 
-00004b60: 7468 6573 6520 6576 656e 7473 2e20 4966  these events. If
-00004b70: 2074 6865 206e 6577 0a65 7665 6e74 7320   the new.events 
-00004b80: 6861 7665 206e 6f74 2079 6574 2062 6565  have not yet bee
-00004b90: 6e20 7072 6f63 6573 7365 642c 2074 6865  n processed, the
-00004ba0: 2076 6965 7720 776f 756c 6420 6265 2073   view would be s
-00004bb0: 7461 6c65 2e20 5468 6520 2263 6f6d 6d69  tale. The "commi
-00004bc0: 7420 706f 7369 7469 6f6e 220a 6361 6e20  t position".can 
-00004bd0: 6265 2075 7365 6420 6279 2074 6865 2075  be used by the u
-00004be0: 7365 7220 696e 7465 7266 6163 6520 746f  ser interface to
-00004bf0: 2070 6f6c 6c20 7468 6520 646f 776e 7374   poll the downst
-00004c00: 7265 616d 2063 6f6d 706f 6e65 6e74 2075  ream component u
-00004c10: 6e74 696c 2069 7420 6861 730a 7072 6f63  ntil it has.proc
-00004c20: 6573 7365 6420 7468 6f73 6520 6e65 7720  essed those new 
-00004c30: 6576 656e 7473 2c20 6166 7465 7220 7768  events, after wh
-00004c40: 6963 6820 7469 6d65 2074 6865 2076 6965  ich time the vie
-00004c50: 7720 7769 6c6c 206e 6f74 2062 6520 7374  w will not be st
-00004c60: 616c 652e 0a0a 0a23 2323 2041 7070 656e  ale....### Appen
-00004c70: 6420 6576 656e 740a 0a54 6865 2060 6170  d event..The `ap
-00004c80: 7065 6e64 5f65 7665 6e74 2829 6020 6d65  pend_event()` me
-00004c90: 7468 6f64 2063 616e 2062 6520 7573 6564  thod can be used
-00004ca0: 2074 6f20 7772 6974 6520 6120 7369 6e67   to write a sing
-00004cb0: 6c65 206e 6577 2065 7665 6e74 2074 6f20  le new event to 
-00004cc0: 6120 7374 7265 616d 2e0a 0a54 6872 6565  a stream...Three
-00004cd0: 2061 7267 756d 656e 7473 2061 7265 2072   arguments are r
-00004ce0: 6571 7569 7265 642c 2060 7374 7265 616d  equired, `stream
-00004cf0: 5f6e 616d 6560 2c20 6065 7870 6563 7465  _name`, `expecte
-00004d00: 645f 706f 7369 7469 6f6e 6020 616e 6420  d_position` and 
-00004d10: 6065 7665 6e74 602e 0a0a 5468 6973 206d  `event`...This m
-00004d20: 6574 686f 6420 776f 726b 7320 696e 2074  ethod works in t
-00004d30: 6865 2073 616d 6520 7761 7920 6173 2060  he same way as `
-00004d40: 6170 7065 6e64 5f65 7665 6e74 7328 2960  append_events()`
-00004d50: 2c20 686f 7765 7665 7220 6065 7665 6e74  , however `event
-00004d60: 6020 6973 2065 7870 6563 7465 640a 746f  ` is expected.to
-00004d70: 2062 6520 6120 7369 6e67 6c65 2060 4e65   be a single `Ne
-00004d80: 7745 7665 6e74 602e 0a0a 5468 6973 206d  wEvent`...This m
-00004d90: 6574 686f 6420 7461 6b65 7320 616e 206f  ethod takes an o
-00004da0: 7074 696f 6e61 6c20 6074 696d 656f 7574  ptional `timeout
-00004db0: 6020 6172 6775 6d65 6e74 2c20 7768 6963  ` argument, whic
-00004dc0: 6820 6973 2061 2050 7974 686f 6e20 6066  h is a Python `f
-00004dd0: 6c6f 6174 6020 7468 6174 2073 6574 730a  loat` that sets.
-00004de0: 6120 6465 6164 6c69 6e65 2066 6f72 2074  a deadline for t
-00004df0: 6865 2063 6f6d 706c 6574 696f 6e20 6f66  he completion of
-00004e00: 2074 6865 2067 5250 4320 6f70 6572 6174   the gRPC operat
-00004e10: 696f 6e2e 0a0a 5369 6e63 6520 7468 6520  ion...Since the 
-00004e20: 6861 6e64 6c69 6e67 206f 6620 6120 636f  handling of a co
-00004e30: 6d6d 616e 6420 696e 2079 6f75 7220 6170  mmand in your ap
-00004e40: 706c 6963 6174 696f 6e20 6d61 7920 7265  plication may re
-00004e50: 7375 6c74 2069 6e20 6f6e 6520 6f72 206d  sult in one or m
-00004e60: 616e 790a 6e65 7720 6576 656e 7473 2c20  any.new events, 
-00004e70: 616e 6420 7468 6520 7265 7375 6c74 7320  and the results 
-00004e80: 6f66 2068 616e 646c 696e 6720 6120 636f  of handling a co
-00004e90: 6d6d 616e 6420 7368 6f75 6c64 2062 6520  mmand should be 
-00004ea0: 7265 636f 7264 6564 2061 746f 6d69 6361  recorded atomica
-00004eb0: 6c6c 792c 0a61 6e64 2074 6865 2077 7269  lly,.and the wri
-00004ec0: 7469 6e67 206f 6620 6e65 7720 6576 656e  ting of new even
-00004ed0: 7473 2067 656e 6572 6174 6564 2062 7920  ts generated by 
-00004ee0: 6120 636f 6d6d 616e 6420 6861 6e64 6c65  a command handle
-00004ef0: 7220 6973 2075 7375 616c 6c79 2061 2063  r is usually a c
-00004f00: 6f6e 6365 726e 0a74 6861 7420 6973 2066  oncern.that is f
-00004f10: 6163 746f 7265 6420 6f75 7420 616e 6420  actored out and 
-00004f20: 7573 6564 2065 7665 7279 7768 6572 6520  used everywhere 
-00004f30: 696e 2061 2070 726f 6a65 6374 2c20 6974  in a project, it
-00004f40: 2069 7320 7175 6974 6520 7573 7561 6c20   is quite usual 
-00004f50: 696e 2061 2070 726f 6a65 6374 0a74 6f20  in a project.to 
-00004f60: 6f6e 6c79 2075 7365 2060 6170 7065 6e64  only use `append
-00004f70: 5f65 7665 6e74 7328 2960 2074 6f20 7265  _events()` to re
-00004f80: 636f 7264 206e 6577 2065 7665 6e74 732e  cord new events.
-00004f90: 2046 6f72 2074 6869 7320 7265 6173 6f6e   For this reason
-00004fa0: 2c20 616e 2065 7861 6d70 6c65 2069 730a  , an example is.
-00004fb0: 6e6f 7420 7072 6f76 6964 6564 2068 6572  not provided her
-00004fc0: 652e 0a0a 0a23 2323 2049 6465 6d70 6f74  e....### Idempot
-00004fd0: 656e 7420 6170 7065 6e64 206f 7065 7261  ent append opera
-00004fe0: 7469 6f6e 730a 0a53 6f6d 6574 696d 6573  tions..Sometimes
-00004ff0: 2069 7420 6d61 7920 6861 7070 656e 2074   it may happen t
-00005000: 6861 7420 6120 6e65 7720 6576 656e 7420  hat a new event 
-00005010: 6973 2073 7563 6365 7373 6675 6c6c 7920  is successfully 
-00005020: 7265 636f 7264 6564 2061 6e64 2074 6865  recorded and the
-00005030: 6e20 736f 6d65 686f 770a 7468 6520 636f  n somehow.the co
-00005040: 6e6e 6563 7469 6f6e 2074 6f20 7468 6520  nnection to the 
-00005050: 6461 7461 6261 7365 2067 6574 7320 696e  database gets in
-00005060: 7465 7272 7570 7465 6420 6265 666f 7265  terrupted before
-00005070: 2074 6865 2073 7563 6365 7373 6675 6c20   the successful 
-00005080: 6361 6c6c 2063 616e 2072 6574 7572 6e0a  call can return.
-00005090: 7375 6363 6573 7366 756c 6c79 2074 6f20  successfully to 
-000050a0: 7468 6520 636c 6965 6e74 2e20 496e 2063  the client. In c
-000050b0: 6173 6520 6f66 2061 6e20 6572 726f 7220  ase of an error 
-000050c0: 7768 656e 2061 7070 656e 6469 6e67 2061  when appending a
-000050d0: 6e20 6576 656e 742c 2069 7420 6d61 7920  n event, it may 
-000050e0: 6265 0a64 6573 6972 6162 6c65 2074 6f20  be.desirable to 
-000050f0: 7265 7472 7920 6170 7065 6e64 696e 6720  retry appending 
-00005100: 7468 6520 7361 6d65 2065 7665 6e74 2061  the same event a
-00005110: 7420 7468 6520 7361 6d65 2070 6f73 6974  t the same posit
-00005120: 696f 6e2e 2049 6620 7468 6520 6576 656e  ion. If the even
-00005130: 7420 7761 730a 696e 2066 6163 7420 7375  t was.in fact su
-00005140: 6363 6573 7366 756c 6c79 2072 6563 6f72  ccessfully recor
-00005150: 6465 642c 2069 7420 6973 2063 6f6e 7665  ded, it is conve
-00005160: 6e69 656e 7420 666f 7220 7468 6520 7265  nient for the re
-00005170: 7472 7920 746f 2072 6574 7572 6e20 7375  try to return su
-00005180: 6363 6573 7366 756c 6c79 0a77 6974 686f  ccessfully.witho
-00005190: 7574 2072 6169 7369 6e67 2061 6e20 6572  ut raising an er
-000051a0: 726f 7220 6475 6520 746f 206f 7074 696d  ror due to optim
-000051b0: 6973 7469 6320 636f 6e63 7572 7265 6e63  istic concurrenc
-000051c0: 7920 636f 6e74 726f 6c20 2861 7320 6465  y control (as de
-000051d0: 7363 7269 6265 6420 6162 6f76 6529 2e0a  scribed above)..
-000051e0: 0a54 6865 2065 7861 6d70 6c65 2062 656c  .The example bel
-000051f0: 6f77 2073 686f 7773 2074 6865 2060 6170  ow shows the `ap
-00005200: 7065 6e64 5f65 7665 6e74 7328 2960 206d  pend_events()` m
-00005210: 6574 686f 6420 6265 696e 6720 6361 6c6c  ethod being call
-00005220: 6564 2061 6761 696e 2077 6974 680a 6065  ed again with.`e
-00005230: 7665 6e74 3360 2061 6e64 2060 6578 7065  vent3` and `expe
-00005240: 6374 6564 5f70 6f73 6974 696f 6e3d 3260  cted_position=2`
-00005250: 2e20 5765 2063 616e 2073 6565 2074 6861  . We can see tha
-00005260: 7420 7265 7065 6174 696e 6720 7468 6520  t repeating the 
-00005270: 6361 6c6c 2074 6f0a 6061 7070 656e 645f  call to.`append_
-00005280: 6576 656e 7473 2829 6020 7265 7475 726e  events()` return
-00005290: 7320 7375 6363 6573 7366 756c 6c79 2e0a  s successfully..
-000052a0: 0a60 6060 7079 7468 6f6e 0a23 2052 6574  .```python.# Ret
-000052b0: 7279 2061 7070 656e 6469 6e67 2065 7665  ry appending eve
-000052c0: 6e74 332e 0a63 6f6d 6d69 745f 706f 7369  nt3..commit_posi
-000052d0: 7469 6f6e 5f72 6574 7279 203d 2063 6c69  tion_retry = cli
-000052e0: 656e 742e 6170 7065 6e64 5f65 7665 6e74  ent.append_event
-000052f0: 7328 0a20 2020 2073 7472 6561 6d5f 6e61  s(.    stream_na
-00005300: 6d65 3d73 7472 6561 6d5f 6e61 6d65 312c  me=stream_name1,
-00005310: 0a20 2020 2065 7870 6563 7465 645f 706f  .    expected_po
-00005320: 7369 7469 6f6e 3d30 2c0a 2020 2020 6576  sition=0,.    ev
-00005330: 656e 7473 3d5b 6576 656e 7432 2c20 6576  ents=[event2, ev
-00005340: 656e 7433 5d2c 0a29 0a60 6060 0a0a 5765  ent3],.).```..We
-00005350: 2063 616e 2073 6565 2074 6861 7420 7468   can see that th
-00005360: 6520 7361 6d65 2063 6f6d 6d69 7420 706f  e same commit po
-00005370: 7369 7469 6f6e 2069 7320 7265 7475 726e  sition is return
-00005380: 6564 2061 7320 6162 6f76 652e 0a0a 6060  ed as above...``
-00005390: 6070 7974 686f 6e0a 6173 7365 7274 2063  `python.assert c
-000053a0: 6f6d 6d69 745f 706f 7369 7469 6f6e 5f72  ommit_position_r
-000053b0: 6574 7279 203d 3d20 636f 6d6d 6974 5f70  etry == commit_p
-000053c0: 6f73 6974 696f 6e32 0a60 6060 0a0a 5765  osition2.```..We
-000053d0: 2063 616e 2061 6c73 6f20 7365 6520 7468   can also see th
-000053e0: 6520 7374 7265 616d 2068 6173 2062 6565  e stream has bee
-000053f0: 6e20 756e 6368 616e 6765 6420 6465 7370  n unchanged desp
-00005400: 6974 6520 6361 6c6c 696e 6720 7468 6520  ite calling the 
-00005410: 6170 7065 6e64 5f65 7665 6e74 7328 290a  append_events().
-00005420: 7477 6963 6520 7769 7468 2074 6865 2073  twice with the s
-00005430: 616d 6520 6172 6775 6d65 6e74 732c 2062  ame arguments, b
-00005440: 7920 6361 6c6c 696e 6720 6072 6561 645f  y calling `read_
-00005450: 7374 7265 616d 5f65 7665 6e74 7328 2960  stream_events()`
-00005460: 2e20 5468 6174 2069 732c 2074 6865 7265  . That is, there
-00005470: 0a61 7265 2073 7469 6c6c 206f 6e6c 7920  .are still only 
-00005480: 7468 7265 6520 6576 656e 7473 2069 6e20  three events in 
-00005490: 7468 6520 7374 7265 616d 2e0a 0a60 6060  the stream...```
-000054a0: 7079 7468 6f6e 0a72 6573 706f 6e73 6520  python.response 
-000054b0: 3d20 636c 6965 6e74 2e72 6561 645f 7374  = client.read_st
-000054c0: 7265 616d 5f65 7665 6e74 7328 0a20 2020  ream_events(.   
-000054d0: 2073 7472 6561 6d5f 6e61 6d65 3d73 7472   stream_name=str
-000054e0: 6561 6d5f 6e61 6d65 310a 290a 0a65 7665  eam_name1.)..eve
-000054f0: 6e74 7320 3d20 6c69 7374 2872 6573 706f  nts = list(respo
-00005500: 6e73 6529 0a61 7373 6572 7420 6c65 6e28  nse).assert len(
-00005510: 6576 656e 7473 2920 3d3d 2033 0a60 6060  events) == 3.```
-00005520: 0a0a 5468 6973 2069 6465 6d70 6f74 656e  ..This idempoten
-00005530: 7420 6265 6861 7669 6f75 7220 6973 2061  t behaviour is a
-00005540: 6374 6976 6174 6564 2062 6563 6175 7365  ctivated because
-00005550: 2074 6865 2060 4e65 7745 7665 6e74 6020   the `NewEvent` 
-00005560: 636c 6173 7320 6861 7320 616e 2060 6964  class has an `id
-00005570: 600a 6174 7472 6962 7574 6520 7468 6174  `.attribute that
-00005580: 2c20 6279 2064 6566 6175 6c74 2c20 6973  , by default, is
-00005590: 2061 7373 6967 6e65 6420 6120 6e65 7720   assigned a new 
-000055a0: 616e 6420 756e 6971 7565 2076 6572 7369  and unique versi
-000055b0: 6f6e 2d34 2055 5549 4420 7768 656e 2061  on-4 UUID when a
-000055c0: 6e0a 696e 7374 616e 6365 206f 6620 604e  n.instance of `N
-000055d0: 6577 4576 656e 7460 2069 7320 636f 6e73  ewEvent` is cons
-000055e0: 7472 7563 7465 642e 2049 6620 6576 656e  tructed. If even
-000055f0: 7473 2077 6974 6820 7468 6520 7361 6d65  ts with the same
-00005600: 2060 6964 6020 6172 6520 6170 7065 6e64   `id` are append
-00005610: 6564 0a61 7420 7468 6520 7361 6d65 2060  ed.at the same `
-00005620: 6578 7065 6374 6564 5f70 6f73 6974 696f  expected_positio
-00005630: 6e60 2c20 7468 6520 7374 7265 616d 2077  n`, the stream w
-00005640: 696c 6c20 6265 2075 6e63 6861 6e67 6564  ill be unchanged
-00005650: 2c20 7468 6520 6f70 6572 6174 696f 6e20  , the operation 
-00005660: 7769 6c6c 0a63 6f6d 706c 6574 6520 7375  will.complete su
-00005670: 6363 6573 7366 756c 6c79 2c20 616e 6420  ccessfully, and 
-00005680: 7468 6520 7361 6d65 2063 6f6d 6d69 7420  the same commit 
-00005690: 706f 7369 7469 6f6e 2077 696c 6c20 6265  position will be
-000056a0: 2072 6574 7572 6e65 6420 746f 2074 6865   returned to the
-000056b0: 2063 616c 6c65 722e 0a0a 6060 6070 7974   caller...```pyt
-000056c0: 686f 6e0a 6672 6f6d 2075 7569 6420 696d  hon.from uuid im
-000056d0: 706f 7274 2055 5549 440a 0a0a 6173 7365  port UUID...asse
-000056e0: 7274 2069 7369 6e73 7461 6e63 6528 6576  rt isinstance(ev
-000056f0: 656e 7431 2e69 642c 2055 5549 4429 0a61  ent1.id, UUID).a
-00005700: 7373 6572 7420 6973 696e 7374 616e 6365  ssert isinstance
-00005710: 2865 7665 6e74 322e 6964 2c20 5555 4944  (event2.id, UUID
-00005720: 290a 6173 7365 7274 2069 7369 6e73 7461  ).assert isinsta
-00005730: 6e63 6528 6576 656e 7433 2e69 642c 2055  nce(event3.id, U
-00005740: 5549 4429 0a0a 6173 7365 7274 2065 7665  UID)..assert eve
-00005750: 6e74 312e 6964 2021 3d20 6576 656e 7432  nt1.id != event2
-00005760: 2e69 640a 6173 7365 7274 2065 7665 6e74  .id.assert event
-00005770: 322e 6964 2021 3d20 6576 656e 7433 2e69  2.id != event3.i
-00005780: 640a 0a61 7373 6572 7420 6576 656e 7473  d..assert events
-00005790: 5b30 5d2e 6964 203d 3d20 6576 656e 7431  [0].id == event1
-000057a0: 2e69 640a 6173 7365 7274 2065 7665 6e74  .id.assert event
-000057b0: 735b 315d 2e69 6420 3d3d 2065 7665 6e74  s[1].id == event
-000057c0: 322e 6964 0a61 7373 6572 7420 6576 656e  2.id.assert even
-000057d0: 7473 5b32 5d2e 6964 203d 3d20 6576 656e  ts[2].id == even
-000057e0: 7433 2e69 640a 6060 600a 0a49 7420 6973  t3.id.```..It is
-000057f0: 2070 6f73 7369 626c 6520 746f 2073 6574   possible to set
-00005800: 2074 6865 2060 6964 6020 636f 6e73 7472   the `id` constr
-00005810: 7563 746f 7220 6172 6775 6d65 6e74 206f  uctor argument o
-00005820: 6620 604e 6577 4576 656e 7460 2077 6865  f `NewEvent` whe
-00005830: 6e20 696e 7374 616e 7469 6174 696e 670a  n instantiating.
-00005840: 7468 6520 604e 6577 4576 656e 7460 2063  the `NewEvent` c
-00005850: 6c61 7373 2c20 6275 7420 696e 2074 6865  lass, but in the
-00005860: 2065 7861 6d70 6c65 7320 6162 6f76 6520   examples above 
-00005870: 7765 2068 6176 6520 6265 656e 2075 7369  we have been usi
-00005880: 6e67 2074 6865 2064 6566 6175 6c74 0a62  ng the default.b
-00005890: 6568 6176 696f 7572 2c20 7768 6963 6820  ehaviour, which 
-000058a0: 6973 2074 6861 7420 7468 6520 6069 6460  is that the `id`
-000058b0: 2076 616c 7565 2069 7320 6765 6e65 7261   value is genera
-000058c0: 7465 6420 7768 656e 2074 6865 2060 4e65  ted when the `Ne
-000058d0: 7745 7665 6e74 6020 636c 6173 7320 6973  wEvent` class is
-000058e0: 0a69 6e73 7461 6e74 6961 7465 642e 0a0a  .instantiated...
-000058f0: 0a23 2323 2052 6561 6420 7374 7265 616d  .### Read stream
-00005900: 2065 7665 6e74 730a 0a54 6865 2060 7265   events..The `re
-00005910: 6164 5f73 7472 6561 6d5f 6576 656e 7473  ad_stream_events
-00005920: 2829 6020 6d65 7468 6f64 2063 616e 2062  ()` method can b
-00005930: 6520 7573 6564 2074 6f20 7265 6164 2074  e used to read t
-00005940: 6865 2072 6563 6f72 6465 6420 6576 656e  he recorded even
-00005950: 7473 206f 6620 6120 7374 7265 616d 2e0a  ts of a stream..
-00005960: 0a54 6869 7320 6d65 7468 6f64 2063 616e  .This method can
-00005970: 2062 6520 7573 6564 2074 6f20 7265 7472   be used to retr
-00005980: 6965 7665 2061 6c6c 2074 6865 2072 6563  ieve all the rec
-00005990: 6f72 6465 6420 6576 656e 7473 2066 6f72  orded events for
-000059a0: 2061 6e20 6167 6772 6567 6174 6520 6265   an aggregate be
-000059b0: 666f 7265 0a65 7865 6375 7469 6e67 2061  fore.executing a
-000059c0: 2063 6f6d 6d61 6e64 2069 6e20 616e 2061   command in an a
-000059d0: 7070 6c69 6361 7469 6f6e 2e0a 0a54 6869  pplication...Thi
-000059e0: 7320 6d65 7468 6f64 2068 6173 206f 6e65  s method has one
-000059f0: 2072 6571 7569 7265 6420 6172 6775 6d65   required argume
-00005a00: 6e74 2c20 6073 7472 6561 6d5f 6e61 6d65  nt, `stream_name
-00005a10: 602c 2077 6869 6368 2069 7320 7468 6520  `, which is the 
-00005a20: 6e61 6d65 206f 660a 7468 6520 7374 7265  name of.the stre
-00005a30: 616d 2066 726f 6d20 7768 6963 6820 746f  am from which to
-00005a40: 2072 6561 6420 6576 656e 7473 2e20 4279   read events. By
-00005a50: 2064 6566 6175 6c74 2c20 7468 6520 7265   default, the re
-00005a60: 636f 7264 6564 2065 7665 6e74 7320 696e  corded events in
-00005a70: 2074 6865 0a73 7472 6561 6d20 6172 6520   the.stream are 
-00005a80: 7265 7475 726e 6564 2069 6e20 7468 6520  returned in the 
-00005a90: 6f72 6465 7220 7468 6579 2077 6572 6520  order they were 
-00005aa0: 7265 636f 7264 6564 2e0a 0a54 6865 206d  recorded...The m
-00005ab0: 6574 686f 6420 6072 6561 645f 7374 7265  ethod `read_stre
-00005ac0: 616d 5f65 7665 6e74 7328 2960 2061 6c73  am_events()` als
-00005ad0: 6f20 7375 7070 6f72 7473 2066 6f75 7220  o supports four 
-00005ae0: 6f70 7469 6f6e 616c 2061 7267 756d 656e  optional argumen
-00005af0: 7473 2c0a 6073 7472 6561 6d5f 706f 7369  ts,.`stream_posi
-00005b00: 7469 6f6e 602c 2060 6261 636b 7761 7264  tion`, `backward
-00005b10: 7360 2c20 606c 696d 6974 602c 2061 6e64  s`, `limit`, and
-00005b20: 2060 7469 6d65 6f75 7460 2e0a 0a54 6865   `timeout`...The
-00005b30: 206f 7074 696f 6e61 6c20 6073 7472 6561   optional `strea
-00005b40: 6d5f 706f 7369 7469 6f6e 6020 6172 6775  m_position` argu
-00005b50: 6d65 6e74 2069 7320 616e 206f 7074 696f  ment is an optio
-00005b60: 6e61 6c20 696e 7465 6765 7220 7468 6174  nal integer that
-00005b70: 2063 616e 2062 6520 7573 6564 2074 6f0a   can be used to.
-00005b80: 696e 6469 6361 7465 2074 6865 2070 6f73  indicate the pos
-00005b90: 6974 696f 6e20 696e 2074 6865 2073 7472  ition in the str
-00005ba0: 6561 6d20 6672 6f6d 2077 6869 6368 2074  eam from which t
-00005bb0: 6f20 7374 6172 7420 7265 6164 696e 672e  o start reading.
-00005bc0: 2054 6869 7320 6172 6775 6d65 6e74 2069   This argument i
-00005bd0: 730a 604e 6f6e 6560 2062 7920 6465 6661  s.`None` by defa
-00005be0: 756c 742c 2077 6869 6368 206d 6561 6e73  ult, which means
-00005bf0: 2074 6865 2073 7472 6561 6d20 7769 6c6c   the stream will
-00005c00: 2062 6520 7265 6164 2065 6974 6865 7220   be read either 
-00005c10: 6672 6f6d 2074 6865 2073 7461 7274 206f  from the start o
-00005c20: 6620 7468 650a 7374 7265 616d 2028 7468  f the.stream (th
-00005c30: 6520 6465 6661 756c 7420 6265 6861 7669  e default behavi
-00005c40: 6f75 7229 2c20 6f72 2066 726f 6d20 7468  our), or from th
-00005c50: 6520 656e 6420 6f66 2074 6865 2073 7472  e end of the str
-00005c60: 6561 6d20 6966 2060 6261 636b 7761 7264  eam if `backward
-00005c70: 7360 2069 730a 6054 7275 6560 2028 7365  s` is.`True` (se
-00005c80: 6520 6265 6c6f 7729 2e20 5768 656e 2072  e below). When r
-00005c90: 6561 6469 6e67 2061 2073 7472 6561 6d20  eading a stream 
-00005ca0: 6672 6f6d 2061 2073 7065 6369 6669 6320  from a specific 
-00005cb0: 706f 7369 7469 6f6e 2069 6e20 7468 6520  position in the 
-00005cc0: 7374 7265 616d 2c20 7468 650a 7265 636f  stream, the.reco
-00005cd0: 7264 6564 2065 7665 6e74 2061 7420 7468  rded event at th
-00005ce0: 6174 2070 6f73 6974 696f 6e20 5749 4c4c  at position WILL
-00005cf0: 2062 6520 696e 636c 7564 6564 2c20 626f   be included, bo
-00005d00: 7468 2077 6865 6e20 7265 6164 696e 6720  th when reading 
-00005d10: 666f 7277 6172 6473 0a66 726f 6d20 7468  forwards.from th
-00005d20: 6174 2070 6f73 6974 696f 6e2c 2061 6e64  at position, and
-00005d30: 2077 6865 6e20 7265 6164 696e 6720 6261   when reading ba
-00005d40: 636b 7761 7264 7320 6672 6f6d 2074 6861  ckwards from tha
-00005d50: 7420 706f 7369 7469 6f6e 2e0a 0a54 6865  t position...The
-00005d60: 206f 7074 696f 6e61 6c20 6172 6775 6d65   optional argume
-00005d70: 6e74 2060 6261 636b 7761 7264 7360 2069  nt `backwards` i
-00005d80: 7320 6120 626f 6f6c 6561 6e2c 2062 7920  s a boolean, by 
-00005d90: 6465 6661 756c 7420 6046 616c 7365 602c  default `False`,
-00005da0: 2077 6869 6368 206d 6561 6e73 2074 6865   which means the
-00005db0: 0a73 7472 6561 6d20 7769 6c6c 2062 6520  .stream will be 
-00005dc0: 7265 6164 2066 6f72 7761 7264 7320 6279  read forwards by
-00005dd0: 2064 6566 6175 6c74 2c20 736f 2074 6861   default, so tha
-00005de0: 7420 6576 656e 7473 2061 7265 2072 6574  t events are ret
-00005df0: 7572 6e65 6420 696e 2074 6865 0a6f 7264  urned in the.ord
-00005e00: 6572 2074 6865 7920 7765 7265 2061 7070  er they were app
-00005e10: 656e 6465 642c 2049 6620 6062 6163 6b77  ended, If `backw
-00005e20: 6172 6473 6020 6973 2060 5472 7565 602c  ards` is `True`,
-00005e30: 2074 6865 2073 7472 6561 6d20 7769 6c6c   the stream will
-00005e40: 2062 6520 7265 6164 0a62 6163 6b77 6172   be read.backwar
-00005e50: 6473 2c20 736f 2074 6861 7420 6576 656e  ds, so that even
-00005e60: 7473 2061 7265 2072 6574 7572 6e65 6420  ts are returned 
-00005e70: 696e 2072 6576 6572 7365 206f 7264 6572  in reverse order
-00005e80: 2e0a 0a54 6865 206f 7074 696f 6e61 6c20  ...The optional 
-00005e90: 6172 6775 6d65 6e74 2060 6c69 6d69 7460  argument `limit`
-00005ea0: 2069 7320 616e 2069 6e74 6567 6572 2077   is an integer w
-00005eb0: 6869 6368 206c 696d 6974 7320 7468 6520  hich limits the 
-00005ec0: 6e75 6d62 6572 206f 6620 6576 656e 7473  number of events
-00005ed0: 2074 6861 7420 7769 6c6c 0a62 6520 7265   that will.be re
-00005ee0: 7475 726e 6564 2e20 5468 6520 6465 6661  turned. The defa
-00005ef0: 756c 7420 7661 6c75 6520 6973 2060 7379  ult value is `sy
-00005f00: 732e 6d61 7869 6e74 602e 0a0a 5468 6520  s.maxint`...The 
-00005f10: 6f70 7469 6f6e 616c 2061 7267 756d 656e  optional argumen
-00005f20: 7420 6074 696d 656f 7574 6020 6973 2061  t `timeout` is a
-00005f30: 2050 7974 686f 6e20 6066 6c6f 6174 6020   Python `float` 
-00005f40: 7768 6963 6820 7365 7473 2061 2064 6561  which sets a dea
-00005f50: 646c 696e 6520 666f 7220 7468 6520 636f  dline for the co
-00005f60: 6d70 6c65 7469 6f6e 206f 660a 7468 6520  mpletion of.the 
-00005f70: 6752 5043 206f 7065 7261 7469 6f6e 2e0a  gRPC operation..
-00005f80: 0a54 6869 7320 6d65 7468 6f64 2072 6574  .This method ret
-00005f90: 7572 6e73 2061 2050 7974 686f 6e20 6974  urns a Python it
-00005fa0: 6572 6162 6c65 206f 626a 6563 7420 7468  erable object th
-00005fb0: 6174 2079 6965 6c64 7320 6052 6563 6f72  at yields `Recor
-00005fc0: 6465 6445 7665 6e74 6020 6f62 6a65 6374  dedEvent` object
-00005fd0: 732e 0a54 6865 7365 2072 6563 6f72 6465  s..These recorde
-00005fe0: 6420 6576 656e 7420 6f62 6a65 6374 7320  d event objects 
-00005ff0: 6172 6520 696e 7374 616e 6365 7320 6f66  are instances of
-00006000: 2074 6865 2060 5265 636f 7264 6564 4576   the `RecordedEv
-00006010: 656e 7460 2063 6c61 7373 2028 7365 6520  ent` class (see 
-00006020: 6265 6c6f 7729 0a0a 5468 6520 6578 616d  below)..The exam
-00006030: 706c 6520 6265 6c6f 7720 7368 6f77 7320  ple below shows 
-00006040: 686f 7720 746f 2072 6561 6420 7468 6520  how to read the 
-00006050: 7265 636f 7264 6564 2065 7665 6e74 7320  recorded events 
-00006060: 6f66 2061 2073 7472 6561 6d0a 666f 7277  of a stream.forw
-00006070: 6172 6473 2066 726f 6d20 7468 6520 7374  ards from the st
-00006080: 6172 7420 6f66 2074 6865 2073 7472 6561  art of the strea
-00006090: 6d20 746f 2074 6865 2065 6e64 206f 6620  m to the end of 
-000060a0: 7468 6520 7374 7265 616d 2e20 5468 650a  the stream. The.
-000060b0: 6e61 6d65 206f 6620 6120 7374 7265 616d  name of a stream
-000060c0: 2069 7320 6769 7665 6e20 7768 656e 2063   is given when c
-000060d0: 616c 6c69 6e67 2074 6865 206d 6574 686f  alling the metho
-000060e0: 642e 2049 6e20 7468 6973 2065 7861 6d70  d. In this examp
-000060f0: 6c65 2c0a 7468 6520 6974 6572 6162 6c65  le,.the iterable
-00006100: 2072 6573 706f 6e73 6520 6f62 6a65 6374   response object
-00006110: 2069 7320 636f 6e76 6572 7465 6420 696e   is converted in
-00006120: 746f 2061 2050 7974 686f 6e20 606c 6973  to a Python `lis
-00006130: 7460 2c20 7768 6963 680a 636f 6e74 6169  t`, which.contai
-00006140: 6e73 2061 6c6c 2074 6865 2072 6563 6f72  ns all the recor
-00006150: 6465 6420 6576 656e 7420 6f62 6a65 6374  ded event object
-00006160: 7320 7468 6174 2077 6572 6520 7265 6164  s that were read
-00006170: 2066 726f 6d20 7468 6520 7374 7265 616d   from the stream
-00006180: 2e0a 0a60 6060 7079 7468 6f6e 0a72 6573  ...```python.res
-00006190: 706f 6e73 6520 3d20 636c 6965 6e74 2e72  ponse = client.r
-000061a0: 6561 645f 7374 7265 616d 5f65 7665 6e74  ead_stream_event
-000061b0: 7328 0a20 2020 2073 7472 6561 6d5f 6e61  s(.    stream_na
-000061c0: 6d65 3d73 7472 6561 6d5f 6e61 6d65 310a  me=stream_name1.
-000061d0: 290a 0a65 7665 6e74 7320 3d20 6c69 7374  )..events = list
-000061e0: 2872 6573 706f 6e73 6529 0a60 6060 0a0a  (response).```..
-000061f0: 4e6f 7720 7468 6174 2077 6520 6861 7665  Now that we have
-00006200: 2061 206c 6973 7420 6f66 2065 7665 6e74   a list of event
-00006210: 206f 626a 6563 7473 2c20 7765 2063 616e   objects, we can
-00006220: 2063 6865 636b 2077 6520 676f 7420 7468   check we got th
-00006230: 650a 7468 7265 6520 6576 656e 7473 2074  e.three events t
-00006240: 6861 7420 7765 7265 2061 7070 656e 6465  hat were appende
-00006250: 6420 746f 2074 6865 2073 7472 6561 6d2c  d to the stream,
-00006260: 2061 6e64 2074 6861 7420 7468 6579 2061   and that they a
-00006270: 7265 0a6f 7264 6572 6564 2065 7861 6374  re.ordered exact
-00006280: 6c79 2061 7320 7468 6579 2077 6572 6520  ly as they were 
-00006290: 6170 7065 6e64 6564 2e0a 0a60 6060 7079  appended...```py
-000062a0: 7468 6f6e 0a61 7373 6572 7420 6c65 6e28  thon.assert len(
-000062b0: 6576 656e 7473 2920 3d3d 2033 0a0a 6173  events) == 3..as
-000062c0: 7365 7274 2065 7665 6e74 735b 305d 2e73  sert events[0].s
-000062d0: 7472 6561 6d5f 6e61 6d65 203d 3d20 7374  tream_name == st
-000062e0: 7265 616d 5f6e 616d 6531 0a61 7373 6572  ream_name1.asser
-000062f0: 7420 6576 656e 7473 5b30 5d2e 7374 7265  t events[0].stre
-00006300: 616d 5f70 6f73 6974 696f 6e20 3d3d 2030  am_position == 0
-00006310: 0a61 7373 6572 7420 6576 656e 7473 5b30  .assert events[0
-00006320: 5d2e 7479 7065 203d 3d20 6576 656e 7431  ].type == event1
-00006330: 2e74 7970 650a 6173 7365 7274 2065 7665  .type.assert eve
-00006340: 6e74 735b 305d 2e64 6174 6120 3d3d 2065  nts[0].data == e
-00006350: 7665 6e74 312e 6461 7461 0a0a 6173 7365  vent1.data..asse
-00006360: 7274 2065 7665 6e74 735b 315d 2e73 7472  rt events[1].str
-00006370: 6561 6d5f 6e61 6d65 203d 3d20 7374 7265  eam_name == stre
-00006380: 616d 5f6e 616d 6531 0a61 7373 6572 7420  am_name1.assert 
-00006390: 6576 656e 7473 5b31 5d2e 7374 7265 616d  events[1].stream
-000063a0: 5f70 6f73 6974 696f 6e20 3d3d 2031 0a61  _position == 1.a
-000063b0: 7373 6572 7420 6576 656e 7473 5b31 5d2e  ssert events[1].
-000063c0: 7479 7065 203d 3d20 6576 656e 7432 2e74  type == event2.t
-000063d0: 7970 650a 6173 7365 7274 2065 7665 6e74  ype.assert event
-000063e0: 735b 315d 2e64 6174 6120 3d3d 2065 7665  s[1].data == eve
-000063f0: 6e74 322e 6461 7461 0a0a 6173 7365 7274  nt2.data..assert
-00006400: 2065 7665 6e74 735b 325d 2e73 7472 6561   events[2].strea
-00006410: 6d5f 6e61 6d65 203d 3d20 7374 7265 616d  m_name == stream
-00006420: 5f6e 616d 6531 0a61 7373 6572 7420 6576  _name1.assert ev
-00006430: 656e 7473 5b32 5d2e 7374 7265 616d 5f70  ents[2].stream_p
-00006440: 6f73 6974 696f 6e20 3d3d 2032 0a61 7373  osition == 2.ass
-00006450: 6572 7420 6576 656e 7473 5b32 5d2e 7479  ert events[2].ty
-00006460: 7065 203d 3d20 6576 656e 7433 2e74 7970  pe == event3.typ
-00006470: 650a 6173 7365 7274 2065 7665 6e74 735b  e.assert events[
-00006480: 325d 2e64 6174 6120 3d3d 2065 7665 6e74  2].data == event
-00006490: 332e 6461 7461 0a60 6060 0a0a 5468 6520  3.data.```..The 
-000064a0: 6578 616d 706c 6520 6265 6c6f 7720 7368  example below sh
-000064b0: 6f77 7320 686f 7720 746f 2072 6561 6420  ows how to read 
-000064c0: 7265 636f 7264 6564 2065 7665 6e74 7320  recorded events 
-000064d0: 696e 2061 2073 7472 6561 6d20 666f 7277  in a stream forw
-000064e0: 6172 6473 2066 726f 6d0a 6120 7370 6563  ards from.a spec
-000064f0: 6966 6963 2073 7472 6561 6d20 706f 7369  ific stream posi
-00006500: 7469 6f6e 2074 6f20 7468 6520 656e 6420  tion to the end 
-00006510: 6f66 2074 6865 2073 7472 6561 6d2e 0a0a  of the stream...
-00006520: 6060 6070 7974 686f 6e0a 6576 656e 7473  ```python.events
-00006530: 203d 206c 6973 7428 0a20 2020 2063 6c69   = list(.    cli
-00006540: 656e 742e 7265 6164 5f73 7472 6561 6d5f  ent.read_stream_
-00006550: 6576 656e 7473 280a 2020 2020 2020 2020  events(.        
-00006560: 7374 7265 616d 5f6e 616d 653d 7374 7265  stream_name=stre
-00006570: 616d 5f6e 616d 6531 2c0a 2020 2020 2020  am_name1,.      
-00006580: 2020 7374 7265 616d 5f70 6f73 6974 696f    stream_positio
-00006590: 6e3d 312c 0a20 2020 2029 0a29 0a0a 6173  n=1,.    ).)..as
-000065a0: 7365 7274 206c 656e 2865 7665 6e74 7329  sert len(events)
-000065b0: 203d 3d20 320a 0a61 7373 6572 7420 6576   == 2..assert ev
-000065c0: 656e 7473 5b30 5d2e 7374 7265 616d 5f6e  ents[0].stream_n
-000065d0: 616d 6520 3d3d 2073 7472 6561 6d5f 6e61  ame == stream_na
-000065e0: 6d65 310a 6173 7365 7274 2065 7665 6e74  me1.assert event
-000065f0: 735b 305d 2e73 7472 6561 6d5f 706f 7369  s[0].stream_posi
-00006600: 7469 6f6e 203d 3d20 310a 6173 7365 7274  tion == 1.assert
-00006610: 2065 7665 6e74 735b 305d 2e74 7970 6520   events[0].type 
-00006620: 3d3d 2065 7665 6e74 322e 7479 7065 0a61  == event2.type.a
-00006630: 7373 6572 7420 6576 656e 7473 5b30 5d2e  ssert events[0].
-00006640: 6461 7461 203d 3d20 6576 656e 7432 2e64  data == event2.d
-00006650: 6174 610a 0a61 7373 6572 7420 6576 656e  ata..assert even
-00006660: 7473 5b31 5d2e 7374 7265 616d 5f6e 616d  ts[1].stream_nam
-00006670: 6520 3d3d 2073 7472 6561 6d5f 6e61 6d65  e == stream_name
-00006680: 310a 6173 7365 7274 2065 7665 6e74 735b  1.assert events[
-00006690: 315d 2e73 7472 6561 6d5f 706f 7369 7469  1].stream_positi
-000066a0: 6f6e 203d 3d20 320a 6173 7365 7274 2065  on == 2.assert e
-000066b0: 7665 6e74 735b 315d 2e74 7970 6520 3d3d  vents[1].type ==
-000066c0: 2065 7665 6e74 332e 7479 7065 0a61 7373   event3.type.ass
-000066d0: 6572 7420 6576 656e 7473 5b31 5d2e 6461  ert events[1].da
-000066e0: 7461 203d 3d20 6576 656e 7433 2e64 6174  ta == event3.dat
-000066f0: 610a 6060 600a 0a54 6865 2065 7861 6d70  a.```..The examp
-00006700: 6c65 2062 656c 6f77 2073 686f 7773 2068  le below shows h
-00006710: 6f77 2074 6f20 7265 6164 2074 6865 2072  ow to read the r
-00006720: 6563 6f72 6465 6420 6576 656e 7473 2069  ecorded events i
-00006730: 6e20 6120 7374 7265 616d 2062 6163 6b77  n a stream backw
-00006740: 6172 6473 2066 726f 6d0a 7468 6520 656e  ards from.the en
-00006750: 6420 6f66 2074 6865 2073 7472 6561 6d20  d of the stream 
-00006760: 746f 2074 6865 2073 7461 7274 206f 6620  to the start of 
-00006770: 7468 6520 7374 7265 616d 2e0a 0a60 6060  the stream...```
-00006780: 7079 7468 6f6e 0a65 7665 6e74 7320 3d20  python.events = 
-00006790: 6c69 7374 280a 2020 2020 636c 6965 6e74  list(.    client
-000067a0: 2e72 6561 645f 7374 7265 616d 5f65 7665  .read_stream_eve
-000067b0: 6e74 7328 0a20 2020 2020 2020 2073 7472  nts(.        str
-000067c0: 6561 6d5f 6e61 6d65 3d73 7472 6561 6d5f  eam_name=stream_
-000067d0: 6e61 6d65 312c 0a20 2020 2020 2020 2062  name1,.        b
-000067e0: 6163 6b77 6172 6473 3d54 7275 652c 0a20  ackwards=True,. 
-000067f0: 2020 2029 0a29 0a0a 6173 7365 7274 206c     ).)..assert l
-00006800: 656e 2865 7665 6e74 7329 203d 3d20 330a  en(events) == 3.
-00006810: 0a61 7373 6572 7420 6576 656e 7473 5b30  .assert events[0
-00006820: 5d2e 7374 7265 616d 5f6e 616d 6520 3d3d  ].stream_name ==
-00006830: 2073 7472 6561 6d5f 6e61 6d65 310a 6173   stream_name1.as
-00006840: 7365 7274 2065 7665 6e74 735b 305d 2e73  sert events[0].s
-00006850: 7472 6561 6d5f 706f 7369 7469 6f6e 203d  tream_position =
-00006860: 3d20 320a 6173 7365 7274 2065 7665 6e74  = 2.assert event
-00006870: 735b 305d 2e74 7970 6520 3d3d 2065 7665  s[0].type == eve
-00006880: 6e74 332e 7479 7065 0a61 7373 6572 7420  nt3.type.assert 
-00006890: 6576 656e 7473 5b30 5d2e 6461 7461 203d  events[0].data =
-000068a0: 3d20 6576 656e 7433 2e64 6174 610a 0a61  = event3.data..a
-000068b0: 7373 6572 7420 6576 656e 7473 5b31 5d2e  ssert events[1].
-000068c0: 7374 7265 616d 5f6e 616d 6520 3d3d 2073  stream_name == s
-000068d0: 7472 6561 6d5f 6e61 6d65 310a 6173 7365  tream_name1.asse
-000068e0: 7274 2065 7665 6e74 735b 315d 2e73 7472  rt events[1].str
-000068f0: 6561 6d5f 706f 7369 7469 6f6e 203d 3d20  eam_position == 
-00006900: 310a 6173 7365 7274 2065 7665 6e74 735b  1.assert events[
-00006910: 315d 2e74 7970 6520 3d3d 2065 7665 6e74  1].type == event
-00006920: 322e 7479 7065 0a61 7373 6572 7420 6576  2.type.assert ev
-00006930: 656e 7473 5b31 5d2e 6461 7461 203d 3d20  ents[1].data == 
-00006940: 6576 656e 7432 2e64 6174 610a 6060 600a  event2.data.```.
-00006950: 0a54 6865 2065 7861 6d70 6c65 2062 656c  .The example bel
-00006960: 6f77 2073 686f 7773 2068 6f77 2074 6f20  ow shows how to 
-00006970: 7265 6164 2061 206c 696d 6974 6564 206e  read a limited n
-00006980: 756d 6265 7220 2874 776f 2920 6f66 2074  umber (two) of t
-00006990: 6865 2072 6563 6f72 6465 6420 6576 656e  he recorded even
-000069a0: 7473 0a69 6e20 6120 7374 7265 616d 2066  ts.in a stream f
-000069b0: 6f72 7761 7264 7320 6672 6f6d 2074 6865  orwards from the
-000069c0: 2073 7461 7274 206f 6620 7468 6520 7374   start of the st
-000069d0: 7265 616d 2e0a 0a60 6060 7079 7468 6f6e  ream...```python
-000069e0: 0a65 7665 6e74 7320 3d20 6c69 7374 280a  .events = list(.
-000069f0: 2020 2020 636c 6965 6e74 2e72 6561 645f      client.read_
-00006a00: 7374 7265 616d 5f65 7665 6e74 7328 0a20  stream_events(. 
-00006a10: 2020 2020 2020 2073 7472 6561 6d5f 6e61         stream_na
-00006a20: 6d65 3d73 7472 6561 6d5f 6e61 6d65 312c  me=stream_name1,
-00006a30: 0a20 2020 2020 2020 206c 696d 6974 3d32  .        limit=2
-00006a40: 2c0a 2020 2020 290a 290a 0a61 7373 6572  ,.    ).)..asser
-00006a50: 7420 6c65 6e28 6576 656e 7473 2920 3d3d  t len(events) ==
-00006a60: 2032 0a0a 6173 7365 7274 2065 7665 6e74   2..assert event
-00006a70: 735b 305d 2e73 7472 6561 6d5f 6e61 6d65  s[0].stream_name
-00006a80: 203d 3d20 7374 7265 616d 5f6e 616d 6531   == stream_name1
-00006a90: 0a61 7373 6572 7420 6576 656e 7473 5b30  .assert events[0
-00006aa0: 5d2e 7374 7265 616d 5f70 6f73 6974 696f  ].stream_positio
-00006ab0: 6e20 3d3d 2030 0a61 7373 6572 7420 6576  n == 0.assert ev
-00006ac0: 656e 7473 5b30 5d2e 7479 7065 203d 3d20  ents[0].type == 
-00006ad0: 6576 656e 7431 2e74 7970 650a 6173 7365  event1.type.asse
-00006ae0: 7274 2065 7665 6e74 735b 305d 2e64 6174  rt events[0].dat
-00006af0: 6120 3d3d 2065 7665 6e74 312e 6461 7461  a == event1.data
-00006b00: 0a0a 6173 7365 7274 2065 7665 6e74 735b  ..assert events[
-00006b10: 315d 2e73 7472 6561 6d5f 6e61 6d65 203d  1].stream_name =
-00006b20: 3d20 7374 7265 616d 5f6e 616d 6531 0a61  = stream_name1.a
-00006b30: 7373 6572 7420 6576 656e 7473 5b31 5d2e  ssert events[1].
-00006b40: 7374 7265 616d 5f70 6f73 6974 696f 6e20  stream_position 
-00006b50: 3d3d 2031 0a61 7373 6572 7420 6576 656e  == 1.assert even
-00006b60: 7473 5b31 5d2e 7479 7065 203d 3d20 6576  ts[1].type == ev
-00006b70: 656e 7432 2e74 7970 650a 6173 7365 7274  ent2.type.assert
-00006b80: 2065 7665 6e74 735b 315d 2e64 6174 6120   events[1].data 
-00006b90: 3d3d 2065 7665 6e74 322e 6461 7461 0a60  == event2.data.`
-00006ba0: 6060 0a0a 5468 6520 6578 616d 706c 6520  ``..The example 
-00006bb0: 6265 6c6f 7720 7368 6f77 7320 686f 7720  below shows how 
-00006bc0: 746f 2072 6561 6420 6120 6c69 6d69 7465  to read a limite
-00006bd0: 6420 6e75 6d62 6572 2028 6f6e 6529 206f  d number (one) o
-00006be0: 6620 7468 6520 7265 636f 7264 6564 0a65  f the recorded.e
-00006bf0: 7665 6e74 7320 696e 2061 2073 7472 6561  vents in a strea
-00006c00: 6d20 6261 636b 7761 7264 7320 6672 6f6d  m backwards from
-00006c10: 2061 2067 6976 656e 2073 7472 6561 6d20   a given stream 
-00006c20: 706f 7369 7469 6f6e 2e0a 0a60 6060 7079  position...```py
-00006c30: 7468 6f6e 0a65 7665 6e74 7320 3d20 6c69  thon.events = li
-00006c40: 7374 280a 2020 2020 636c 6965 6e74 2e72  st(.    client.r
-00006c50: 6561 645f 7374 7265 616d 5f65 7665 6e74  ead_stream_event
-00006c60: 7328 0a20 2020 2020 2020 2073 7472 6561  s(.        strea
-00006c70: 6d5f 6e61 6d65 3d73 7472 6561 6d5f 6e61  m_name=stream_na
-00006c80: 6d65 312c 0a20 2020 2020 2020 2073 7472  me1,.        str
-00006c90: 6561 6d5f 706f 7369 7469 6f6e 3d32 2c0a  eam_position=2,.
-00006ca0: 2020 2020 2020 2020 6261 636b 7761 7264          backward
-00006cb0: 733d 5472 7565 2c0a 2020 2020 2020 2020  s=True,.        
-00006cc0: 6c69 6d69 743d 312c 0a20 2020 2029 0a29  limit=1,.    ).)
-00006cd0: 0a0a 6173 7365 7274 206c 656e 2865 7665  ..assert len(eve
-00006ce0: 6e74 7329 203d 3d20 310a 0a61 7373 6572  nts) == 1..asser
-00006cf0: 7420 6576 656e 7473 5b30 5d2e 7374 7265  t events[0].stre
-00006d00: 616d 5f6e 616d 6520 3d3d 2073 7472 6561  am_name == strea
-00006d10: 6d5f 6e61 6d65 310a 6173 7365 7274 2065  m_name1.assert e
-00006d20: 7665 6e74 735b 305d 2e73 7472 6561 6d5f  vents[0].stream_
-00006d30: 706f 7369 7469 6f6e 203d 3d20 320a 6173  position == 2.as
-00006d40: 7365 7274 2065 7665 6e74 735b 305d 2e74  sert events[0].t
-00006d50: 7970 6520 3d3d 2065 7665 6e74 332e 7479  ype == event3.ty
-00006d60: 7065 0a61 7373 6572 7420 6576 656e 7473  pe.assert events
-00006d70: 5b30 5d2e 6461 7461 203d 3d20 6576 656e  [0].data == even
-00006d80: 7433 2e64 6174 610a 6060 600a 0a23 2323  t3.data.```..###
-00006d90: 2052 6561 6420 616c 6c20 6576 656e 7473   Read all events
-00006da0: 0a0a 5468 6520 6d65 7468 6f64 2060 7265  ..The method `re
-00006db0: 6164 5f61 6c6c 5f65 7665 6e74 7328 2960  ad_all_events()`
-00006dc0: 2063 616e 2062 6520 7573 6564 2074 6f20   can be used to 
-00006dd0: 7265 6164 2061 6c6c 2072 6563 6f72 6465  read all recorde
-00006de0: 6420 6576 656e 7473 0a69 6e20 7468 6520  d events.in the 
-00006df0: 6461 7461 6261 7365 2069 6e20 7468 6520  database in the 
-00006e00: 6f72 6465 7220 7468 6579 2077 6572 6520  order they were 
-00006e10: 7265 636f 7264 6564 2e20 416e 2069 7465  recorded. An ite
-00006e20: 7261 626c 6520 6f62 6a65 6374 206f 660a  rable object of.
-00006e30: 7265 636f 7264 6564 2065 7665 6e74 7320  recorded events 
-00006e40: 6973 2072 6574 7572 6e65 642e 2054 6869  is returned. Thi
-00006e50: 7320 6974 6572 6162 6c65 206f 626a 6563  s iterable objec
-00006e60: 7420 7769 6c6c 2073 746f 7020 7768 656e  t will stop when
-00006e70: 2069 7420 6861 730a 7969 656c 6465 6420   it has.yielded 
-00006e80: 7468 6520 6c61 7374 2072 6563 6f72 6465  the last recorde
-00006e90: 6420 6576 656e 742e 0a0a 5468 6973 206d  d event...This m
-00006ea0: 6574 686f 6420 7375 7070 6f72 7473 2073  ethod supports s
-00006eb0: 6978 206f 7074 696f 6e61 6c20 6172 6775  ix optional argu
-00006ec0: 6d65 6e74 732c 2060 636f 6d6d 6974 5f70  ments, `commit_p
-00006ed0: 6f73 6974 696f 6e60 2c20 6062 6163 6b77  osition`, `backw
-00006ee0: 6172 6473 602c 0a60 6669 6c74 6572 5f65  ards`,.`filter_e
-00006ef0: 7863 6c75 6465 602c 2060 6669 6c74 6572  xclude`, `filter
-00006f00: 5f69 6e63 6c75 6465 602c 2060 6c69 6d69  _include`, `limi
-00006f10: 7460 2c20 616e 6420 6074 696d 656f 7574  t`, and `timeout
-00006f20: 602e 0a0a 5468 6520 6f70 7469 6f6e 616c  `...The optional
-00006f30: 2061 7267 756d 656e 7420 6063 6f6d 6d69   argument `commi
-00006f40: 745f 706f 7369 7469 6f6e 6020 6973 2061  t_position` is a
-00006f50: 6e20 6f70 7469 6f6e 616c 2069 6e74 6567  n optional integ
-00006f60: 6572 2074 6861 7420 6361 6e20 6265 2075  er that can be u
-00006f70: 7365 6420 746f 0a73 7065 6369 6679 2074  sed to.specify t
-00006f80: 6865 2063 6f6d 6d69 7420 706f 7369 7469  he commit positi
-00006f90: 6f6e 2066 726f 6d20 7768 6963 6820 746f  on from which to
-00006fa0: 2073 7461 7274 2072 6561 6469 6e67 2e20   start reading. 
-00006fb0: 5468 6973 2061 7267 756d 656e 7420 6973  This argument is
-00006fc0: 2060 4e6f 6e65 6020 6279 0a64 6566 6175   `None` by.defau
-00006fd0: 6c74 2c20 6d65 616e 696e 6720 7468 6174  lt, meaning that
-00006fe0: 2061 6c6c 2074 6865 2065 7665 6e74 7320   all the events 
-00006ff0: 7769 6c6c 2062 6520 7265 6164 2065 6974  will be read eit
-00007000: 6865 7220 6672 6f6d 2074 6865 2073 7461  her from the sta
-00007010: 7274 2c20 6f72 0a66 726f 6d20 7468 6520  rt, or.from the 
-00007020: 656e 6420 6966 2060 6261 636b 7761 7264  end if `backward
-00007030: 7360 2069 7320 6054 7275 6560 2028 7365  s` is `True` (se
-00007040: 6520 6265 6c6f 7729 2e20 506c 6561 7365  e below). Please
-00007050: 206e 6f74 652c 2069 6620 7370 6563 6966   note, if specif
-00007060: 6965 642c 0a74 6865 2073 7065 6369 6669  ied,.the specifi
-00007070: 6564 2070 6f73 6974 696f 6e20 6d75 7374  ed position must
-00007080: 2062 6520 616e 2061 6374 7561 6c6c 7920   be an actually 
-00007090: 6578 6973 7469 6e67 2063 6f6d 6d69 7420  existing commit 
-000070a0: 706f 7369 7469 6f6e 2c20 6265 6361 7573  position, becaus
-000070b0: 650a 616e 7920 6f74 6865 7220 6e75 6d62  e.any other numb
-000070c0: 6572 2077 696c 6c20 7265 7375 6c74 2069  er will result i
-000070d0: 6e20 6120 7365 7276 6572 2065 7272 6f72  n a server error
-000070e0: 2028 6174 206c 6561 7374 2069 6e20 4576   (at least in Ev
-000070f0: 656e 7453 746f 7265 4442 2076 3231 2e31  entStoreDB v21.1
-00007100: 3029 2e0a 0a54 6865 206f 7074 696f 6e61  0)...The optiona
-00007110: 6c20 6172 6775 6d65 6e74 2060 6261 636b  l argument `back
-00007120: 7761 7264 7360 2069 7320 6120 626f 6f6c  wards` is a bool
-00007130: 6561 6e20 7768 6963 6820 6973 2062 7920  ean which is by 
-00007140: 6465 6661 756c 7420 6046 616c 7365 6020  default `False` 
-00007150: 6d65 616e 696e 6720 7468 650a 6576 656e  meaning the.even
-00007160: 7473 2077 696c 6c20 6265 2072 6561 6420  ts will be read 
-00007170: 666f 7277 6172 6473 2062 7920 6465 6661  forwards by defa
-00007180: 756c 742c 2073 6f20 7468 6174 2065 7665  ult, so that eve
-00007190: 6e74 7320 6172 6520 7265 7475 726e 6564  nts are returned
-000071a0: 2069 6e20 7468 650a 6f72 6465 7220 7468   in the.order th
-000071b0: 6579 2077 6572 6520 636f 6d6d 6974 7465  ey were committe
-000071c0: 642c 2049 6620 6062 6163 6b77 6172 6473  d, If `backwards
-000071d0: 6020 6973 2060 5472 7565 602c 2074 6865  ` is `True`, the
-000071e0: 2065 7665 6e74 7320 7769 6c6c 2062 6520   events will be 
-000071f0: 7265 6164 0a62 6163 6b77 6172 6473 2c20  read.backwards, 
-00007200: 736f 2074 6861 7420 6576 656e 7473 2061  so that events a
-00007210: 7265 2072 6574 7572 6e65 6420 696e 2072  re returned in r
-00007220: 6576 6572 7365 206f 7264 6572 2e0a 0a54  everse order...T
-00007230: 6865 206f 7074 696f 6e61 6c20 6172 6775  he optional argu
-00007240: 6d65 6e74 2060 6669 6c74 6572 5f65 7863  ment `filter_exc
-00007250: 6c75 6465 6020 6973 2061 2073 6571 7565  lude` is a seque
-00007260: 6e63 6520 6f66 2072 6567 756c 6172 2065  nce of regular e
-00007270: 7870 7265 7373 696f 6e73 2074 6861 740a  xpressions that.
-00007280: 6d61 7463 6820 7468 6520 7479 7065 2073  match the type s
-00007290: 7472 696e 6773 206f 6620 7265 636f 7264  trings of record
-000072a0: 6564 2065 7665 6e74 7320 7468 6174 2073  ed events that s
-000072b0: 686f 756c 6420 6e6f 7420 6265 2069 6e63  hould not be inc
-000072c0: 6c75 6465 642e 2042 7920 6465 6661 756c  luded. By defaul
-000072d0: 742c 0a74 6869 7320 6172 6775 6d65 6e74  t,.this argument
-000072e0: 2077 696c 6c20 6d61 7463 6820 2273 7973   will match "sys
-000072f0: 7465 6d20 6576 656e 7473 222c 2073 6f20  tem events", so 
-00007300: 7468 6174 2074 6865 7920 7769 6c6c 206e  that they will n
-00007310: 6f74 2062 6520 696e 636c 7564 6564 2e0a  ot be included..
-00007320: 5468 6973 2061 7267 756d 656e 7420 6973  This argument is
-00007330: 2069 676e 6f72 6564 2069 6620 6066 696c   ignored if `fil
-00007340: 7465 725f 696e 636c 7564 6560 2069 7320  ter_include` is 
-00007350: 7365 7420 746f 2061 206e 6f6e 2d65 6d70  set to a non-emp
-00007360: 7479 2073 6571 7565 6e63 652e 0a0a 5468  ty sequence...Th
-00007370: 6520 6f70 7469 6f6e 616c 2061 7267 756d  e optional argum
-00007380: 656e 7420 6066 696c 7465 725f 696e 636c  ent `filter_incl
-00007390: 7564 6560 2069 7320 6120 7365 7175 656e  ude` is a sequen
-000073a0: 6365 206f 6620 7265 6775 6c61 7220 6578  ce of regular ex
-000073b0: 7072 6573 7369 6f6e 730a 7468 6174 206d  pressions.that m
-000073c0: 6174 6368 2074 6865 2074 7970 6520 7374  atch the type st
-000073d0: 7269 6e67 7320 6f66 2072 6563 6f72 6465  rings of recorde
-000073e0: 6420 6576 656e 7473 2074 6861 7420 7368  d events that sh
-000073f0: 6f75 6c64 2062 6520 696e 636c 7564 6564  ould be included
-00007400: 2e20 4279 0a64 6566 6175 6c74 2c20 7468  . By.default, th
-00007410: 6973 2061 7267 756d 656e 7420 6973 2061  is argument is a
-00007420: 6e20 656d 7074 7920 7475 706c 652e 2049  n empty tuple. I
-00007430: 6620 7468 6973 2061 7267 756d 656e 7420  f this argument 
-00007440: 6973 2073 6574 2074 6f20 610a 6e6f 6e2d  is set to a.non-
-00007450: 656d 7074 7920 7365 7175 656e 6365 2c20  empty sequence, 
-00007460: 7468 6520 6066 696c 7465 725f 6578 636c  the `filter_excl
-00007470: 7564 6560 2061 7267 756d 656e 7420 6973  ude` argument is
-00007480: 2069 676e 6f72 6564 2e0a 0a54 6865 206f   ignored...The o
-00007490: 7074 696f 6e61 6c20 6172 6775 6d65 6e74  ptional argument
-000074a0: 2060 6c69 6d69 7460 2069 7320 616e 2069   `limit` is an i
-000074b0: 6e74 6567 6572 2077 6869 6368 206c 696d  nteger which lim
-000074c0: 6974 7320 7468 6520 6e75 6d62 6572 206f  its the number o
-000074d0: 6620 6576 656e 7473 2074 6861 7420 7769  f events that wi
-000074e0: 6c6c 0a62 6520 7265 7475 726e 6564 2e20  ll.be returned. 
-000074f0: 5468 6520 6465 6661 756c 7420 7661 6c75  The default valu
-00007500: 6520 6973 2060 7379 732e 6d61 7869 6e74  e is `sys.maxint
-00007510: 602e 0a0a 5468 6520 6f70 7469 6f6e 616c  `...The optional
-00007520: 2061 7267 756d 656e 7420 6074 696d 656f   argument `timeo
-00007530: 7574 6020 6973 2061 2050 7974 686f 6e20  ut` is a Python 
-00007540: 6066 6c6f 6174 6020 7768 6963 6820 7365  `float` which se
-00007550: 7473 2061 2064 6561 646c 696e 6520 666f  ts a deadline fo
-00007560: 7220 7468 6520 636f 6d70 6c65 7469 6f6e  r the completion
-00007570: 206f 660a 7468 6520 6752 5043 206f 7065   of.the gRPC ope
-00007580: 7261 7469 6f6e 2e0a 0a54 6865 2066 696c  ration...The fil
-00007590: 7465 7269 6e67 206f 6620 6576 656e 7473  tering of events
-000075a0: 2069 7320 646f 6e65 206f 6e20 7468 6520   is done on the 
-000075b0: 4576 656e 7453 746f 7265 4442 2073 6572  EventStoreDB ser
-000075c0: 7665 722e 2054 6865 0a60 6c69 6d69 7460  ver. The.`limit`
-000075d0: 2061 7267 756d 656e 7420 6973 2061 7070   argument is app
-000075e0: 6c69 6564 206f 6e20 7468 6520 7365 7276  lied on the serv
-000075f0: 6572 2061 6674 6572 2066 696c 7465 7269  er after filteri
-00007600: 6e67 2e20 5365 6520 6265 6c6f 7720 666f  ng. See below fo
-00007610: 720a 6d6f 7265 2069 6e66 6f72 6d61 7469  r.more informati
-00007620: 6f6e 2061 626f 7574 2066 696c 7465 7220  on about filter 
-00007630: 7265 6775 6c61 7220 6578 7072 6573 7369  regular expressi
-00007640: 6f6e 732e 0a0a 5768 656e 2072 6561 6469  ons...When readi
-00007650: 6e67 2066 6f72 7761 7264 7320 6672 6f6d  ng forwards from
-00007660: 2061 2073 7065 6369 6669 6320 636f 6d6d   a specific comm
-00007670: 6974 2070 6f73 6974 696f 6e2c 2074 6865  it position, the
-00007680: 2065 7665 6e74 2061 7420 7468 6520 7370   event at the sp
-00007690: 6563 6966 6965 640a 706f 7369 7469 6f6e  ecified.position
-000076a0: 2057 494c 4c20 6265 2069 6e63 6c75 6465   WILL be include
-000076b0: 642e 2048 6f77 6576 6572 2c20 7768 656e  d. However, when
-000076c0: 2072 6561 6469 6e67 2062 6163 6b77 6172   reading backwar
-000076d0: 6473 2c20 7468 6520 6576 656e 7420 6174  ds, the event at
-000076e0: 2074 6865 0a73 7065 6369 6669 6564 2070   the.specified p
-000076f0: 6f73 6974 696f 6e20 7769 6c6c 204e 4f54  osition will NOT
-00007700: 2062 6520 696e 636c 7564 6564 2e20 2854   be included. (T
-00007710: 6869 7320 6e6f 6e2d 696e 636c 7573 6976  his non-inclusiv
-00007720: 6520 6265 6861 7669 6f75 722c 206f 6620  e behaviour, of 
-00007730: 6578 636c 7564 696e 670a 7468 6520 7370  excluding.the sp
-00007740: 6563 6966 6965 6420 636f 6d6d 6974 2070  ecified commit p
-00007750: 6f73 6974 696f 6e20 7768 656e 2072 6561  osition when rea
-00007760: 6469 6e67 2061 6c6c 2073 7472 6561 6d73  ding all streams
-00007770: 2062 6163 6b77 6172 6473 2c20 6469 6666   backwards, diff
-00007780: 6572 7320 6672 6f6d 2074 6865 0a62 6568  ers from the.beh
-00007790: 6176 696f 7572 2077 6865 6e20 7265 6164  aviour when read
-000077a0: 696e 6720 6120 7374 7265 616d 2062 6163  ing a stream bac
-000077b0: 6b77 6172 6473 2066 726f 6d20 6120 7370  kwards from a sp
-000077c0: 6563 6966 6963 2073 7472 6561 6d20 706f  ecific stream po
-000077d0: 7369 7469 6f6e 2c20 4927 6d0a 6e6f 7420  sition, I'm.not 
-000077e0: 7375 7265 2077 6879 2e29 0a0a 5468 6520  sure why.)..The 
-000077f0: 6578 616d 706c 6520 6265 6c6f 7720 7368  example below sh
-00007800: 6f77 7320 686f 7720 746f 2072 6561 6420  ows how to read 
-00007810: 616c 6c20 6576 656e 7473 2069 6e20 7468  all events in th
-00007820: 6520 6461 7461 6261 7365 2069 6e20 7468  e database in th
-00007830: 650a 6f72 6465 7220 7468 6579 2077 6572  e.order they wer
-00007840: 6520 7265 636f 7264 6564 2e0a 0a60 6060  e recorded...```
-00007850: 7079 7468 6f6e 0a65 7665 6e74 7320 3d20  python.events = 
-00007860: 6c69 7374 2863 6c69 656e 742e 7265 6164  list(client.read
-00007870: 5f61 6c6c 5f65 7665 6e74 7328 2929 0a0a  _all_events())..
-00007880: 6173 7365 7274 206c 656e 2865 7665 6e74  assert len(event
-00007890: 7329 203e 3d20 330a 6060 600a 0a54 6865  s) >= 3.```..The
-000078a0: 2065 7861 6d70 6c65 2062 656c 6f77 2073   example below s
-000078b0: 686f 7773 2068 6f77 2074 6f20 7265 6164  hows how to read
-000078c0: 2061 6c6c 2072 6563 6f72 6465 6420 6576   all recorded ev
-000078d0: 656e 7473 2066 726f 6d20 6120 7370 6563  ents from a spec
-000078e0: 6966 6963 2063 6f6d 6d69 7420 706f 7369  ific commit posi
-000078f0: 7469 6f6e 2e0a 0a60 6060 7079 7468 6f6e  tion...```python
-00007900: 0a65 7665 6e74 7320 3d20 6c69 7374 280a  .events = list(.
-00007910: 2020 2020 636c 6965 6e74 2e72 6561 645f      client.read_
-00007920: 616c 6c5f 6576 656e 7473 280a 2020 2020  all_events(.    
-00007930: 2020 2020 636f 6d6d 6974 5f70 6f73 6974      commit_posit
-00007940: 696f 6e3d 636f 6d6d 6974 5f70 6f73 6974  ion=commit_posit
-00007950: 696f 6e31 0a20 2020 2029 0a29 0a0a 6173  ion1.    ).)..as
-00007960: 7365 7274 206c 656e 2865 7665 6e74 7329  sert len(events)
-00007970: 203d 3d20 330a 0a61 7373 6572 7420 6576   == 3..assert ev
-00007980: 656e 7473 5b30 5d2e 7374 7265 616d 5f6e  ents[0].stream_n
-00007990: 616d 6520 3d3d 2073 7472 6561 6d5f 6e61  ame == stream_na
-000079a0: 6d65 310a 6173 7365 7274 2065 7665 6e74  me1.assert event
-000079b0: 735b 305d 2e73 7472 6561 6d5f 706f 7369  s[0].stream_posi
-000079c0: 7469 6f6e 203d 3d20 300a 6173 7365 7274  tion == 0.assert
-000079d0: 2065 7665 6e74 735b 305d 2e74 7970 6520   events[0].type 
-000079e0: 3d3d 2065 7665 6e74 312e 7479 7065 0a61  == event1.type.a
-000079f0: 7373 6572 7420 6576 656e 7473 5b30 5d2e  ssert events[0].
-00007a00: 6461 7461 203d 3d20 6576 656e 7431 2e64  data == event1.d
-00007a10: 6174 610a 0a61 7373 6572 7420 6576 656e  ata..assert even
-00007a20: 7473 5b31 5d2e 7374 7265 616d 5f6e 616d  ts[1].stream_nam
-00007a30: 6520 3d3d 2073 7472 6561 6d5f 6e61 6d65  e == stream_name
-00007a40: 310a 6173 7365 7274 2065 7665 6e74 735b  1.assert events[
-00007a50: 315d 2e73 7472 6561 6d5f 706f 7369 7469  1].stream_positi
-00007a60: 6f6e 203d 3d20 310a 6173 7365 7274 2065  on == 1.assert e
-00007a70: 7665 6e74 735b 315d 2e74 7970 6520 3d3d  vents[1].type ==
-00007a80: 2065 7665 6e74 322e 7479 7065 0a61 7373   event2.type.ass
-00007a90: 6572 7420 6576 656e 7473 5b31 5d2e 6461  ert events[1].da
-00007aa0: 7461 203d 3d20 6576 656e 7432 2e64 6174  ta == event2.dat
-00007ab0: 610a 0a61 7373 6572 7420 6576 656e 7473  a..assert events
-00007ac0: 5b32 5d2e 7374 7265 616d 5f6e 616d 6520  [2].stream_name 
-00007ad0: 3d3d 2073 7472 6561 6d5f 6e61 6d65 310a  == stream_name1.
-00007ae0: 6173 7365 7274 2065 7665 6e74 735b 325d  assert events[2]
-00007af0: 2e73 7472 6561 6d5f 706f 7369 7469 6f6e  .stream_position
-00007b00: 203d 3d20 320a 6173 7365 7274 2065 7665   == 2.assert eve
-00007b10: 6e74 735b 325d 2e74 7970 6520 3d3d 2065  nts[2].type == e
-00007b20: 7665 6e74 332e 7479 7065 0a61 7373 6572  vent3.type.asser
-00007b30: 7420 6576 656e 7473 5b32 5d2e 6461 7461  t events[2].data
-00007b40: 203d 3d20 6576 656e 7433 2e64 6174 610a   == event3.data.
-00007b50: 6060 600a 0a54 6865 2065 7861 6d70 6c65  ```..The example
-00007b60: 2062 656c 6f77 2073 686f 7773 2068 6f77   below shows how
-00007b70: 2074 6f20 7265 6164 2061 6c6c 2072 6563   to read all rec
-00007b80: 6f72 6465 6420 6576 656e 7473 2069 6e20  orded events in 
-00007b90: 7265 7665 7273 6520 6f72 6465 722e 0a0a  reverse order...
-00007ba0: 6060 6070 7974 686f 6e0a 6576 656e 7473  ```python.events
-00007bb0: 203d 206c 6973 7428 0a20 2020 2063 6c69   = list(.    cli
-00007bc0: 656e 742e 7265 6164 5f61 6c6c 5f65 7665  ent.read_all_eve
-00007bd0: 6e74 7328 0a20 2020 2020 2020 2062 6163  nts(.        bac
-00007be0: 6b77 6172 6473 3d54 7275 650a 2020 2020  kwards=True.    
-00007bf0: 290a 290a 0a61 7373 6572 7420 6c65 6e28  ).)..assert len(
-00007c00: 6576 656e 7473 2920 3e3d 2033 0a0a 6173  events) >= 3..as
-00007c10: 7365 7274 2065 7665 6e74 735b 305d 2e73  sert events[0].s
-00007c20: 7472 6561 6d5f 6e61 6d65 203d 3d20 7374  tream_name == st
-00007c30: 7265 616d 5f6e 616d 6531 0a61 7373 6572  ream_name1.asser
-00007c40: 7420 6576 656e 7473 5b30 5d2e 7374 7265  t events[0].stre
-00007c50: 616d 5f70 6f73 6974 696f 6e20 3d3d 2032  am_position == 2
-00007c60: 0a61 7373 6572 7420 6576 656e 7473 5b30  .assert events[0
-00007c70: 5d2e 7479 7065 203d 3d20 6576 656e 7433  ].type == event3
-00007c80: 2e74 7970 650a 6173 7365 7274 2065 7665  .type.assert eve
-00007c90: 6e74 735b 305d 2e64 6174 6120 3d3d 2065  nts[0].data == e
-00007ca0: 7665 6e74 332e 6461 7461 0a0a 6173 7365  vent3.data..asse
-00007cb0: 7274 2065 7665 6e74 735b 315d 2e73 7472  rt events[1].str
-00007cc0: 6561 6d5f 6e61 6d65 203d 3d20 7374 7265  eam_name == stre
-00007cd0: 616d 5f6e 616d 6531 0a61 7373 6572 7420  am_name1.assert 
-00007ce0: 6576 656e 7473 5b31 5d2e 7374 7265 616d  events[1].stream
-00007cf0: 5f70 6f73 6974 696f 6e20 3d3d 2031 0a61  _position == 1.a
-00007d00: 7373 6572 7420 6576 656e 7473 5b31 5d2e  ssert events[1].
-00007d10: 7479 7065 203d 3d20 6576 656e 7432 2e74  type == event2.t
-00007d20: 7970 650a 6173 7365 7274 2065 7665 6e74  ype.assert event
-00007d30: 735b 315d 2e64 6174 6120 3d3d 2065 7665  s[1].data == eve
-00007d40: 6e74 322e 6461 7461 0a0a 6173 7365 7274  nt2.data..assert
-00007d50: 2065 7665 6e74 735b 325d 2e73 7472 6561   events[2].strea
-00007d60: 6d5f 6e61 6d65 203d 3d20 7374 7265 616d  m_name == stream
-00007d70: 5f6e 616d 6531 0a61 7373 6572 7420 6576  _name1.assert ev
-00007d80: 656e 7473 5b32 5d2e 7374 7265 616d 5f70  ents[2].stream_p
-00007d90: 6f73 6974 696f 6e20 3d3d 2030 0a61 7373  osition == 0.ass
-00007da0: 6572 7420 6576 656e 7473 5b32 5d2e 7479  ert events[2].ty
-00007db0: 7065 203d 3d20 6576 656e 7431 2e74 7970  pe == event1.typ
-00007dc0: 650a 6173 7365 7274 2065 7665 6e74 735b  e.assert events[
-00007dd0: 325d 2e64 6174 6120 3d3d 2065 7665 6e74  2].data == event
-00007de0: 312e 6461 7461 0a60 6060 0a0a 5468 6520  1.data.```..The 
-00007df0: 6578 616d 706c 6520 6265 6c6f 7720 7368  example below sh
-00007e00: 6f77 7320 686f 7720 746f 2072 6561 6420  ows how to read 
-00007e10: 6120 6c69 6d69 7465 6420 6e75 6d62 6572  a limited number
-00007e20: 2028 6f6e 6529 206f 6620 7468 6520 7265   (one) of the re
-00007e30: 636f 7264 6564 2065 7665 6e74 730a 696e  corded events.in
-00007e40: 2074 6865 2064 6174 6162 6173 6520 666f   the database fo
-00007e50: 7277 6172 6473 2066 726f 6d20 6120 7370  rwards from a sp
-00007e60: 6563 6966 6963 2063 6f6d 6d69 7420 706f  ecific commit po
-00007e70: 7369 7469 6f6e 2e20 506c 6561 7365 206e  sition. Please n
-00007e80: 6f74 652c 2077 6865 6e20 7265 6164 696e  ote, when readin
-00007e90: 670a 616c 6c20 6576 656e 7473 2066 6f72  g.all events for
-00007ea0: 7761 7264 7320 6672 6f6d 2061 2073 7065  wards from a spe
-00007eb0: 6369 6669 6320 636f 6d6d 6974 2070 6f73  cific commit pos
-00007ec0: 6974 696f 6e2c 2074 6865 2065 7665 6e74  ition, the event
-00007ed0: 2061 7420 7468 6520 7370 6563 6966 6965   at the specifie
-00007ee0: 640a 706f 7369 7469 6f6e 2057 494c 4c20  d.position WILL 
-00007ef0: 6265 2069 6e63 6c75 6465 642e 0a0a 0a60  be included....`
-00007f00: 6060 7079 7468 6f6e 0a65 7665 6e74 7320  ``python.events 
-00007f10: 3d20 6c69 7374 280a 2020 2020 636c 6965  = list(.    clie
-00007f20: 6e74 2e72 6561 645f 616c 6c5f 6576 656e  nt.read_all_even
-00007f30: 7473 280a 2020 2020 2020 2020 636f 6d6d  ts(.        comm
-00007f40: 6974 5f70 6f73 6974 696f 6e3d 636f 6d6d  it_position=comm
-00007f50: 6974 5f70 6f73 6974 696f 6e31 2c0a 2020  it_position1,.  
-00007f60: 2020 2020 2020 6c69 6d69 743d 312c 0a20        limit=1,. 
-00007f70: 2020 2029 0a29 0a0a 6173 7365 7274 206c     ).)..assert l
-00007f80: 656e 2865 7665 6e74 7329 203d 3d20 310a  en(events) == 1.
-00007f90: 0a61 7373 6572 7420 6576 656e 7473 5b30  .assert events[0
-00007fa0: 5d2e 7374 7265 616d 5f6e 616d 6520 3d3d  ].stream_name ==
-00007fb0: 2073 7472 6561 6d5f 6e61 6d65 310a 6173   stream_name1.as
-00007fc0: 7365 7274 2065 7665 6e74 735b 305d 2e73  sert events[0].s
-00007fd0: 7472 6561 6d5f 706f 7369 7469 6f6e 203d  tream_position =
-00007fe0: 3d20 300a 6173 7365 7274 2065 7665 6e74  = 0.assert event
-00007ff0: 735b 305d 2e74 7970 6520 3d3d 2065 7665  s[0].type == eve
-00008000: 6e74 312e 7479 7065 0a61 7373 6572 7420  nt1.type.assert 
-00008010: 6576 656e 7473 5b30 5d2e 6461 7461 203d  events[0].data =
-00008020: 3d20 6576 656e 7431 2e64 6174 610a 0a61  = event1.data..a
-00008030: 7373 6572 7420 6576 656e 7473 5b30 5d2e  ssert events[0].
-00008040: 636f 6d6d 6974 5f70 6f73 6974 696f 6e20  commit_position 
-00008050: 3d3d 2063 6f6d 6d69 745f 706f 7369 7469  == commit_positi
-00008060: 6f6e 310a 6060 600a 0a54 6865 2065 7861  on1.```..The exa
-00008070: 6d70 6c65 2062 656c 6f77 2073 686f 7773  mple below shows
-00008080: 2068 6f77 2074 6f20 7265 6164 2061 206c   how to read a l
-00008090: 696d 6974 6564 206e 756d 6265 7220 286f  imited number (o
-000080a0: 6e65 2920 6f66 2074 6865 2072 6563 6f72  ne) of the recor
-000080b0: 6465 6420 6576 656e 7473 0a69 6e20 7468  ded events.in th
-000080c0: 6520 6461 7461 6261 7365 2062 6163 6b77  e database backw
-000080d0: 6172 6473 2066 726f 6d20 7468 6520 656e  ards from the en
-000080e0: 642e 2054 6869 7320 6769 7665 7320 7468  d. This gives th
-000080f0: 6520 6c61 7374 2072 6563 6f72 6465 6420  e last recorded 
-00008100: 6576 656e 742e 0a0a 6060 6070 7974 686f  event...```pytho
-00008110: 6e0a 6576 656e 7473 203d 206c 6973 7428  n.events = list(
-00008120: 0a20 2020 2063 6c69 656e 742e 7265 6164  .    client.read
-00008130: 5f61 6c6c 5f65 7665 6e74 7328 0a20 2020  _all_events(.   
-00008140: 2020 2020 2062 6163 6b77 6172 6473 3d54       backwards=T
-00008150: 7275 652c 0a20 2020 2020 2020 206c 696d  rue,.        lim
-00008160: 6974 3d31 2c0a 2020 2020 290a 290a 0a61  it=1,.    ).)..a
-00008170: 7373 6572 7420 6c65 6e28 6576 656e 7473  ssert len(events
-00008180: 2920 3d3d 2031 0a0a 6173 7365 7274 2065  ) == 1..assert e
-00008190: 7665 6e74 735b 305d 2e73 7472 6561 6d5f  vents[0].stream_
-000081a0: 6e61 6d65 203d 3d20 7374 7265 616d 5f6e  name == stream_n
-000081b0: 616d 6531 0a61 7373 6572 7420 6576 656e  ame1.assert even
-000081c0: 7473 5b30 5d2e 7374 7265 616d 5f70 6f73  ts[0].stream_pos
-000081d0: 6974 696f 6e20 3d3d 2032 0a61 7373 6572  ition == 2.asser
-000081e0: 7420 6576 656e 7473 5b30 5d2e 7479 7065  t events[0].type
-000081f0: 203d 3d20 6576 656e 7433 2e74 7970 650a   == event3.type.
-00008200: 6173 7365 7274 2065 7665 6e74 735b 305d  assert events[0]
-00008210: 2e64 6174 6120 3d3d 2065 7665 6e74 332e  .data == event3.
-00008220: 6461 7461 0a60 6060 0a0a 5468 6520 6578  data.```..The ex
-00008230: 616d 706c 6520 6265 6c6f 7720 7368 6f77  ample below show
-00008240: 7320 686f 7720 746f 2072 6561 6420 6120  s how to read a 
-00008250: 6c69 6d69 7465 6420 6e75 6d62 6572 2028  limited number (
-00008260: 6f6e 6529 206f 6620 7468 6520 7265 636f  one) of the reco
-00008270: 7264 6564 2065 7665 6e74 730a 696e 2074  rded events.in t
-00008280: 6865 2064 6174 6162 6173 6520 6261 636b  he database back
-00008290: 7761 7264 7320 6672 6f6d 2061 2073 7065  wards from a spe
-000082a0: 6369 6669 6320 636f 6d6d 6974 2070 6f73  cific commit pos
-000082b0: 6974 696f 6e2e 2050 6c65 6173 6520 6e6f  ition. Please no
-000082c0: 7465 2c20 7768 656e 2072 6561 6469 6e67  te, when reading
-000082d0: 0a61 6c6c 2065 7665 6e74 7320 6261 636b  .all events back
-000082e0: 7761 7264 7320 6672 6f6d 2061 2073 7065  wards from a spe
-000082f0: 6369 6669 6320 636f 6d6d 6974 2070 6f73  cific commit pos
-00008300: 6974 696f 6e2c 2074 6865 2065 7665 6e74  ition, the event
-00008310: 2061 7420 7468 6520 7370 6563 6966 6965   at the specifie
-00008320: 640a 706f 7369 7469 6f6e 2057 494c 4c20  d.position WILL 
-00008330: 4e4f 5420 6265 2069 6e63 6c75 6465 642e  NOT be included.
-00008340: 0a0a 6060 6070 7974 686f 6e0a 6576 656e  ..```python.even
-00008350: 7473 203d 206c 6973 7428 0a20 2020 2063  ts = list(.    c
-00008360: 6c69 656e 742e 7265 6164 5f61 6c6c 5f65  lient.read_all_e
-00008370: 7665 6e74 7328 0a20 2020 2020 2020 2063  vents(.        c
-00008380: 6f6d 6d69 745f 706f 7369 7469 6f6e 3d63  ommit_position=c
-00008390: 6f6d 6d69 745f 706f 7369 7469 6f6e 322c  ommit_position2,
-000083a0: 0a20 2020 2020 2020 2062 6163 6b77 6172  .        backwar
-000083b0: 6473 3d54 7275 652c 0a20 2020 2020 2020  ds=True,.       
-000083c0: 206c 696d 6974 3d31 2c0a 2020 2020 290a   limit=1,.    ).
-000083d0: 290a 0a61 7373 6572 7420 6c65 6e28 6576  )..assert len(ev
-000083e0: 656e 7473 2920 3d3d 2031 0a0a 6173 7365  ents) == 1..asse
-000083f0: 7274 2065 7665 6e74 735b 305d 2e63 6f6d  rt events[0].com
-00008400: 6d69 745f 706f 7369 7469 6f6e 203c 2063  mit_position < c
-00008410: 6f6d 6d69 745f 706f 7369 7469 6f6e 320a  ommit_position2.
-00008420: 6060 600a 0a0a 2323 2320 4765 7420 6375  ```...### Get cu
-00008430: 7272 656e 7420 7374 7265 616d 2070 6f73  rrent stream pos
-00008440: 6974 696f 6e0a 0a54 6865 2060 6765 745f  ition..The `get_
-00008450: 7374 7265 616d 5f70 6f73 6974 696f 6e28  stream_position(
-00008460: 2960 206d 6574 686f 6420 6361 6e20 6265  )` method can be
-00008470: 2075 7365 6420 746f 0a67 6574 2074 6865   used to.get the
-00008480: 2022 7374 7265 616d 2070 6f73 6974 696f   "stream positio
-00008490: 6e22 206f 6620 7468 6520 6c61 7374 2072  n" of the last r
-000084a0: 6563 6f72 6465 6420 6576 656e 7420 696e  ecorded event in
-000084b0: 2061 2073 7472 6561 6d2e 0a0a 5468 6973   a stream...This
-000084c0: 206d 6574 686f 6420 6861 7320 6120 6073   method has a `s
-000084d0: 7472 6561 6d5f 6e61 6d65 6020 6172 6775  tream_name` argu
-000084e0: 6d65 6e74 2c20 7768 6963 6820 6973 2072  ment, which is r
-000084f0: 6571 7569 7265 642e 0a0a 5468 6973 206d  equired...This m
-00008500: 6574 686f 6420 616c 736f 2074 616b 6573  ethod also takes
-00008510: 2061 6e20 6f70 7469 6f6e 616c 2060 7469   an optional `ti
-00008520: 6d65 6f75 7460 2061 7267 756d 656e 742c  meout` argument,
-00008530: 2074 6861 740a 6973 2065 7870 6563 7465   that.is expecte
-00008540: 6420 746f 2062 6520 6120 5079 7468 6f6e  d to be a Python
-00008550: 2060 666c 6f61 7460 2c20 7768 6963 6820   `float`, which 
-00008560: 7365 7473 2061 2064 6561 646c 696e 650a  sets a deadline.
-00008570: 666f 7220 7468 6520 636f 6d70 6c65 7469  for the completi
-00008580: 6f6e 206f 6620 7468 6520 6752 5043 206f  on of the gRPC o
-00008590: 7065 7261 7469 6f6e 2e0a 0a54 6865 2073  peration...The s
-000085a0: 6571 7565 6e63 6520 6f66 2070 6f73 6974  equence of posit
-000085b0: 696f 6e73 2069 6e20 6120 7374 7265 616d  ions in a stream
-000085c0: 2069 7320 6761 706c 6573 732e 2049 7420   is gapless. It 
-000085d0: 6973 207a 6572 6f2d 6261 7365 642c 0a73  is zero-based,.s
-000085e0: 6f20 7468 6174 2061 2073 7472 6561 6d20  o that a stream 
-000085f0: 7769 7468 206f 6e65 2072 6563 6f72 6465  with one recorde
-00008600: 6420 6576 656e 7420 6861 7320 6120 6375  d event has a cu
-00008610: 7272 656e 7420 7374 7265 616d 0a70 6f73  rrent stream.pos
-00008620: 6974 696f 6e20 6f66 2060 3060 2e20 5468  ition of `0`. Th
-00008630: 6520 6375 7272 656e 7420 7374 7265 616d  e current stream
-00008640: 2070 6f73 6974 696f 6e20 6973 2060 3160   position is `1`
-00008650: 2077 6865 6e20 6120 7374 7265 616d 2068   when a stream h
-00008660: 6173 0a74 776f 2065 7665 6e74 732c 2061  as.two events, a
-00008670: 6e64 2069 7420 6973 2060 3260 2077 6865  nd it is `2` whe
-00008680: 6e20 7468 6572 6520 6172 6520 6576 656e  n there are even
-00008690: 7473 2c20 616e 6420 736f 206f 6e2e 0a0a  ts, and so on...
-000086a0: 496e 2074 6865 2065 7861 6d70 6c65 2062  In the example b
-000086b0: 656c 6f77 2c20 7468 6520 6375 7272 656e  elow, the curren
-000086c0: 7420 7374 7265 616d 2070 6f73 6974 696f  t stream positio
-000086d0: 6e20 6973 206f 6274 6169 6e65 6420 6f66  n is obtained of
-000086e0: 2074 6865 0a73 7472 6561 6d20 746f 2077   the.stream to w
-000086f0: 6869 6368 2065 7665 6e74 7320 7765 7265  hich events were
-00008700: 2061 7070 656e 6465 6420 696e 2074 6865   appended in the
-00008710: 2065 7861 6d70 6c65 7320 6162 6f76 652e   examples above.
-00008720: 0a42 6563 6175 7365 2074 6865 2073 6571  .Because the seq
-00008730: 7565 6e63 6520 6f66 2073 7472 6561 6d20  uence of stream 
-00008740: 706f 7369 7469 6f6e 7320 6973 207a 6572  positions is zer
-00008750: 6f2d 6261 7365 642c 2061 6e64 2062 6563  o-based, and bec
-00008760: 6175 7365 0a74 6872 6565 2065 7665 6e74  ause.three event
-00008770: 7320 7765 7265 2061 7070 656e 6465 642c  s were appended,
-00008780: 2073 6f20 7468 6520 6375 7272 656e 7420   so the current 
-00008790: 7374 7265 616d 2070 6f73 6974 696f 6e20  stream position 
-000087a0: 6973 2060 3260 2e0a 0a60 6060 7079 7468  is `2`...```pyth
-000087b0: 6f6e 0a73 7472 6561 6d5f 706f 7369 7469  on.stream_positi
-000087c0: 6f6e 203d 2063 6c69 656e 742e 6765 745f  on = client.get_
-000087d0: 7374 7265 616d 5f70 6f73 6974 696f 6e28  stream_position(
-000087e0: 0a20 2020 2073 7472 6561 6d5f 6e61 6d65  .    stream_name
-000087f0: 3d73 7472 6561 6d5f 6e61 6d65 310a 290a  =stream_name1.).
-00008800: 0a61 7373 6572 7420 7374 7265 616d 5f70  .assert stream_p
-00008810: 6f73 6974 696f 6e20 3d3d 2032 0a60 6060  osition == 2.```
-00008820: 0a0a 4966 2061 2073 7472 6561 6d20 646f  ..If a stream do
-00008830: 6573 206e 6f74 2065 7869 7374 2c20 7468  es not exist, th
-00008840: 6520 7265 7475 726e 6564 2073 7472 6561  e returned strea
-00008850: 6d20 706f 7369 7469 6f6e 2076 616c 7565  m position value
-00008860: 2069 7320 604e 6f6e 6560 2c0a 7768 6963   is `None`,.whic
-00008870: 6820 6d61 7463 6865 7320 7468 6520 7265  h matches the re
-00008880: 7175 6972 6564 2065 7870 6563 7465 6420  quired expected 
-00008890: 706f 7369 7469 6f6e 2077 6865 6e20 6170  position when ap
-000088a0: 7065 6e64 696e 6720 7468 6520 6669 7273  pending the firs
-000088b0: 7420 6576 656e 740a 6f66 2061 206e 6577  t event.of a new
-000088c0: 2073 7472 6561 6d20 2873 6565 2061 626f   stream (see abo
-000088d0: 7665 292e 0a0a 6060 6070 7974 686f 6e0a  ve)...```python.
-000088e0: 7374 7265 616d 5f70 6f73 6974 696f 6e20  stream_position 
-000088f0: 3d20 636c 6965 6e74 2e67 6574 5f73 7472  = client.get_str
-00008900: 6561 6d5f 706f 7369 7469 6f6e 280a 2020  eam_position(.  
-00008910: 2020 7374 7265 616d 5f6e 616d 653d 7374    stream_name=st
-00008920: 7228 7575 6964 3428 2929 0a29 0a0a 6173  r(uuid4()).)..as
-00008930: 7365 7274 2073 7472 6561 6d5f 706f 7369  sert stream_posi
-00008940: 7469 6f6e 203d 3d20 4e6f 6e65 0a60 6060  tion == None.```
-00008950: 0a0a 5468 6973 206d 6574 686f 6420 7461  ..This method ta
-00008960: 6b65 7320 616e 206f 7074 696f 6e61 6c20  kes an optional 
-00008970: 6172 6775 6d65 6e74 2060 7469 6d65 6f75  argument `timeou
-00008980: 7460 2077 6869 6368 2069 7320 6120 5079  t` which is a Py
-00008990: 7468 6f6e 2060 666c 6f61 7460 2074 6861  thon `float` tha
-000089a0: 7420 7365 7473 0a61 2064 6561 646c 696e  t sets.a deadlin
-000089b0: 6520 666f 7220 7468 6520 636f 6d70 6c65  e for the comple
-000089c0: 7469 6f6e 206f 6620 7468 6520 6752 5043  tion of the gRPC
-000089d0: 206f 7065 7261 7469 6f6e 2e0a 0a0a 2323   operation....##
-000089e0: 2320 4765 7420 6375 7272 656e 7420 636f  # Get current co
-000089f0: 6d6d 6974 2070 6f73 6974 696f 6e0a 0a54  mmit position..T
-00008a00: 6865 206d 6574 686f 6420 6067 6574 5f63  he method `get_c
-00008a10: 6f6d 6d69 745f 706f 7369 7469 6f6e 2829  ommit_position()
-00008a20: 6020 6361 6e20 6265 2075 7365 6420 746f  ` can be used to
-00008a30: 2067 6574 2074 6865 2063 7572 7265 6e74   get the current
-00008a40: 0a63 6f6d 6d69 7420 706f 7369 7469 6f6e  .commit position
-00008a50: 206f 6620 7468 6520 6461 7461 6261 7365   of the database
-00008a60: 2e0a 0a60 6060 7079 7468 6f6e 0a63 6f6d  ...```python.com
-00008a70: 6d69 745f 706f 7369 7469 6f6e 203d 2063  mit_position = c
-00008a80: 6c69 656e 742e 6765 745f 636f 6d6d 6974  lient.get_commit
-00008a90: 5f70 6f73 6974 696f 6e28 290a 6060 600a  _position().```.
-00008aa0: 0a54 6869 7320 6d65 7468 6f64 2074 616b  .This method tak
-00008ab0: 6573 2061 6e20 6f70 7469 6f6e 616c 2061  es an optional a
-00008ac0: 7267 756d 656e 7420 6074 696d 656f 7574  rgument `timeout
-00008ad0: 6020 7768 6963 6820 6973 2061 2050 7974  ` which is a Pyt
-00008ae0: 686f 6e20 6066 6c6f 6174 6020 7468 6174  hon `float` that
-00008af0: 2073 6574 730a 6120 6465 6164 6c69 6e65   sets.a deadline
-00008b00: 2066 6f72 2074 6865 2063 6f6d 706c 6574   for the complet
-00008b10: 696f 6e20 6f66 2074 6865 2067 5250 4320  ion of the gRPC 
-00008b20: 6f70 6572 6174 696f 6e2e 0a0a 5468 6973  operation...This
-00008b30: 206d 6574 686f 6420 6361 6e20 6265 2075   method can be u
-00008b40: 7365 6675 6c20 746f 206d 6561 7375 7265  seful to measure
-00008b50: 2070 726f 6772 6573 7320 6f66 2061 2064   progress of a d
-00008b60: 6f77 6e73 7472 6561 6d20 636f 6d70 6f6e  ownstream compon
-00008b70: 656e 740a 7468 6174 2069 7320 7072 6f63  ent.that is proc
-00008b80: 6573 7369 6e67 2061 6c6c 2072 6563 6f72  essing all recor
-00008b90: 6465 6420 6576 656e 7473 2c20 6279 2063  ded events, by c
-00008ba0: 6f6d 7061 7269 6e67 2074 6865 2063 7572  omparing the cur
-00008bb0: 7265 6e74 2063 6f6d 6d69 740a 706f 7369  rent commit.posi
-00008bc0: 7469 6f6e 2077 6974 6820 7468 6520 7265  tion with the re
-00008bd0: 636f 7264 6564 2063 6f6d 6d69 7420 706f  corded commit po
-00008be0: 7369 7469 6f6e 206f 6620 7468 6520 6c61  sition of the la
-00008bf0: 7374 2073 7563 6365 7373 6675 6c6c 7920  st successfully 
-00008c00: 7072 6f63 6573 7365 640a 6576 656e 7420  processed.event 
-00008c10: 696e 2061 2064 6f77 6e73 7472 6561 6d20  in a downstream 
-00008c20: 636f 6d70 6f6e 656e 742e 0a0a 5468 6520  component...The 
-00008c30: 7661 6c75 6520 6f66 2074 6865 2060 636f  value of the `co
-00008c40: 6d6d 6974 5f70 6f73 6974 696f 6e60 2061  mmit_position` a
-00008c50: 7267 756d 656e 7420 7768 656e 2072 6561  rgument when rea
-00008c60: 6469 6e67 2065 7665 6e74 7320 6569 7468  ding events eith
-00008c70: 6572 2062 7920 7573 696e 670a 7468 6520  er by using.the 
-00008c80: 6072 6561 645f 616c 6c5f 6576 656e 7473  `read_all_events
-00008c90: 2829 6020 6d65 7468 6f64 206f 7220 6279  ()` method or by
-00008ca0: 2075 7369 6e67 2061 2063 6174 6368 2d75   using a catch-u
-00008cb0: 7020 7375 6273 6372 6970 7469 6f6e 2077  p subscription w
-00008cc0: 6f75 6c64 2075 7375 616c 6c79 0a62 6520  ould usually.be 
-00008cd0: 6465 7465 726d 696e 6564 2062 7920 7468  determined by th
-00008ce0: 6520 7265 636f 7264 6564 2063 6f6d 6d69  e recorded commi
-00008cf0: 7420 706f 7369 7469 6f6e 206f 6620 7468  t position of th
-00008d00: 6520 6c61 7374 2073 7563 6365 7373 6675  e last successfu
-00008d10: 6c6c 7920 7072 6f63 6573 7365 640a 6576  lly processed.ev
-00008d20: 656e 7420 696e 2061 2064 6f77 6e73 7472  ent in a downstr
-00008d30: 6561 6d20 636f 6d70 6f6e 656e 742e 0a0a  eam component...
-00008d40: 0a0a 2323 2320 4765 7420 7374 7265 616d  ..### Get stream
-00008d50: 206d 6574 6164 6174 610a 0a54 6865 206d   metadata..The m
-00008d60: 6574 686f 6420 6067 6574 5f73 7472 6561  ethod `get_strea
-00008d70: 6d5f 6d65 7461 6461 7461 2829 6020 6765  m_metadata()` ge
-00008d80: 7473 2074 6865 206d 6574 6164 6174 6120  ts the metadata 
-00008d90: 666f 7220 6120 7374 7265 616d 2c20 616c  for a stream, al
-00008da0: 6f6e 670a 7769 7468 2074 6865 2076 6572  ong.with the ver
-00008db0: 7369 6f6e 206f 6620 7468 6520 7374 7265  sion of the stre
-00008dc0: 616d 206d 6574 6164 6174 612e 0a0a 6060  am metadata...``
-00008dd0: 6070 7974 686f 6e0a 6d65 7461 6461 7461  `python.metadata
-00008de0: 2c20 6d65 7461 6461 7461 5f76 6572 7369  , metadata_versi
-00008df0: 6f6e 203d 2063 6c69 656e 742e 6765 745f  on = client.get_
-00008e00: 7374 7265 616d 5f6d 6574 6164 6174 6128  stream_metadata(
-00008e10: 7374 7265 616d 5f6e 616d 653d 7374 7265  stream_name=stre
-00008e20: 616d 5f6e 616d 6531 290a 6060 600a 0a54  am_name1).```..T
-00008e30: 6865 2072 6574 7572 6e65 6420 606d 6574  he returned `met
-00008e40: 6164 6174 6160 2076 616c 7565 2069 7320  adata` value is 
-00008e50: 6120 5079 7468 6f6e 2060 6469 6374 602e  a Python `dict`.
-00008e60: 2054 6865 2072 6574 7572 6e65 6420 606d   The returned `m
-00008e70: 6574 6164 6174 615f 7665 7273 696f 6e60  etadata_version`
-00008e80: 0a76 616c 7565 2069 7320 6569 7468 6572  .value is either
-00008e90: 2061 6e20 6069 6e74 602c 206f 7220 604e   an `int`, or `N
-00008ea0: 6f6e 6560 2069 6620 7468 6520 7374 7265  one` if the stre
-00008eb0: 616d 2064 6f65 7320 6e6f 7420 6578 6973  am does not exis
-00008ec0: 742e 2054 6865 7365 2076 616c 7565 7320  t. These values 
-00008ed0: 6361 6e0a 6265 2070 6173 7365 6420 696e  can.be passed in
-00008ee0: 746f 2060 7365 745f 7374 7265 616d 5f6d  to `set_stream_m
-00008ef0: 6574 6164 6174 6128 2960 2e0a 0a0a 2323  etadata()`....##
-00008f00: 2320 5365 7420 7374 7265 616d 206d 6574  # Set stream met
-00008f10: 6164 6174 610a 0a54 6865 206d 6574 686f  adata..The metho
-00008f20: 6420 6073 6574 5f73 7472 6561 6d5f 6d65  d `set_stream_me
-00008f30: 7461 6461 7461 2829 6020 7365 7473 2074  tadata()` sets t
-00008f40: 6865 206d 6574 6164 6174 6120 666f 7220  he metadata for 
-00008f50: 6120 7374 7265 616d 2c20 616c 6f6e 670a  a stream, along.
-00008f60: 7769 7468 2074 6865 2076 6572 7369 6f6e  with the version
-00008f70: 206f 6620 7468 6520 7374 7265 616d 206d   of the stream m
-00008f80: 6574 6164 6174 612e 0a0a 6060 6070 7974  etadata...```pyt
-00008f90: 686f 6e0a 6d65 7461 6461 7461 5b22 666f  hon.metadata["fo
-00008fa0: 6f22 5d20 3d20 2262 6172 220a 0a63 6c69  o"] = "bar"..cli
-00008fb0: 656e 742e 7365 745f 7374 7265 616d 5f6d  ent.set_stream_m
-00008fc0: 6574 6164 6174 6128 0a20 2020 2073 7472  etadata(.    str
-00008fd0: 6561 6d5f 6e61 6d65 3d73 7472 6561 6d5f  eam_name=stream_
-00008fe0: 6e61 6d65 312c 0a20 2020 206d 6574 6164  name1,.    metad
-00008ff0: 6174 613d 6d65 7461 6461 7461 2c0a 2020  ata=metadata,.  
-00009000: 2020 6578 7065 6374 6564 5f70 6f73 6974    expected_posit
-00009010: 696f 6e3d 6d65 7461 6461 7461 5f76 6572  ion=metadata_ver
-00009020: 7369 6f6e 2c0a 290a 6060 600a 0a54 6865  sion,.).```..The
-00009030: 2060 6578 7065 6374 6564 5f70 6f73 6974   `expected_posit
-00009040: 696f 6e60 2061 7267 756d 656e 7420 7368  ion` argument sh
-00009050: 6f75 6c64 2062 6520 7468 6520 6375 7272  ould be the curr
-00009060: 656e 7420 7665 7273 696f 6e20 6f66 2074  ent version of t
-00009070: 6865 2073 7472 6561 6d20 6d65 7461 6461  he stream metada
-00009080: 7461 2e0a 0a50 6c65 6173 6520 7265 6665  ta...Please refe
-00009090: 7220 746f 2074 6865 2045 7665 6e74 5374  r to the EventSt
-000090a0: 6f72 6544 4220 646f 6375 6d65 6e74 6174  oreDB documentat
-000090b0: 696f 6e20 666f 7220 6d6f 7265 2069 6e66  ion for more inf
-000090c0: 6f72 6d61 7469 6f6e 2061 626f 7574 2073  ormation about s
-000090d0: 7472 6561 6d0a 6d65 7461 6461 7461 2e0a  tream.metadata..
-000090e0: 0a23 2323 2044 656c 6574 6520 7374 7265  .### Delete stre
-000090f0: 616d 0a0a 5468 6520 6d65 7468 6f64 2060  am..The method `
-00009100: 6465 6c65 7465 5f73 7472 6561 6d28 2960  delete_stream()`
-00009110: 2063 616e 2062 6520 7573 6564 2074 6f20   can be used to 
-00009120: 2264 656c 6574 6522 2061 2073 7472 6561  "delete" a strea
-00009130: 6d2e 0a0a 6060 6070 7974 686f 6e0a 636f  m...```python.co
-00009140: 6d6d 6974 5f70 6f73 6974 696f 6e20 3d20  mmit_position = 
-00009150: 636c 6965 6e74 2e64 656c 6574 655f 7374  client.delete_st
-00009160: 7265 616d 2873 7472 6561 6d5f 6e61 6d65  ream(stream_name
-00009170: 3d73 7472 6561 6d5f 6e61 6d65 312c 2065  =stream_name1, e
-00009180: 7870 6563 7465 645f 706f 7369 7469 6f6e  xpected_position
-00009190: 3d32 290a 6060 600a 0a41 6674 6572 2064  =2).```..After d
-000091a0: 656c 6574 696e 6720 6120 7374 7265 616d  eleting a stream
-000091b0: 2c20 6974 2773 2073 7469 6c6c 2070 6f73  , it's still pos
-000091c0: 7369 626c 6520 746f 2061 7070 656e 6420  sible to append 
-000091d0: 6e65 7720 6576 656e 7473 2e20 5265 6164  new events. Read
-000091e0: 696e 6720 6672 6f6d 2061 0a64 656c 6574  ing from a.delet
-000091f0: 6564 2073 7472 6561 6d20 7769 6c6c 2072  ed stream will r
-00009200: 6574 7572 6e20 6f6e 6c79 2065 7665 6e74  eturn only event
-00009210: 7320 7468 6174 2068 6176 6520 6265 656e  s that have been
-00009220: 2061 7070 656e 6465 6420 6166 7465 7220   appended after 
-00009230: 6974 2077 6173 0a64 656c 6574 6564 2e0a  it was.deleted..
-00009240: 0a23 2323 2054 6f6d 6273 746f 6e65 2073  .### Tombstone s
-00009250: 7472 6561 6d0a 0a54 6865 206d 6574 686f  tream..The metho
-00009260: 6420 6074 6f6d 6273 746f 6e65 5f73 7472  d `tombstone_str
-00009270: 6561 6d28 2960 2063 616e 2062 6520 7573  eam()` can be us
-00009280: 6564 2074 6f20 2274 6f6d 6273 746f 6e65  ed to "tombstone
-00009290: 2220 6120 7374 7265 616d 2e0a 0a60 6060  " a stream...```
-000092a0: 7079 7468 6f6e 0a63 6f6d 6d69 745f 706f  python.commit_po
-000092b0: 7369 7469 6f6e 203d 2063 6c69 656e 742e  sition = client.
-000092c0: 746f 6d62 7374 6f6e 655f 7374 7265 616d  tombstone_stream
-000092d0: 2873 7472 6561 6d5f 6e61 6d65 3d73 7472  (stream_name=str
-000092e0: 6561 6d5f 6e61 6d65 312c 2065 7870 6563  eam_name1, expec
-000092f0: 7465 645f 706f 7369 7469 6f6e 3d32 290a  ted_position=2).
-00009300: 6060 600a 0a41 6674 6572 2074 6f6d 6273  ```..After tombs
-00009310: 746f 6e69 6e67 2061 2073 7472 6561 6d2c  toning a stream,
-00009320: 2069 7427 7320 6e6f 7420 706f 7373 6962   it's not possib
-00009330: 6c65 2074 6f20 6170 7065 6e64 206e 6577  le to append new
-00009340: 2065 7665 6e74 732e 0a0a 0a23 2320 4361   events....## Ca
-00009350: 7463 682d 7570 2073 7562 7363 7269 7074  tch-up subscript
-00009360: 696f 6e73 0a0a 4120 2263 6174 6368 2d75  ions..A "catch-u
-00009370: 7020 7375 6273 6372 6970 7469 6f6e 2220  p subscription" 
-00009380: 6361 6e20 6265 2075 7365 6420 746f 2072  can be used to r
-00009390: 6563 6569 7665 2061 6c72 6561 6479 2072  eceive already r
-000093a0: 6563 6f72 6465 6420 6576 656e 7473 2c20  ecorded events, 
-000093b0: 6275 740a 6974 2077 696c 6c20 616c 736f  but.it will also
-000093c0: 2072 6574 7572 6e20 6576 656e 7473 2074   return events t
-000093d0: 6861 7420 6172 6520 7265 636f 7264 6564  hat are recorded
-000093e0: 2061 6674 6572 2074 6865 2073 7562 7363   after the subsc
-000093f0: 7269 7074 696f 6e20 7761 7320 7374 6172  ription was star
-00009400: 7465 642e 0a0a 5468 6520 6d65 7468 6f64  ted...The method
-00009410: 2060 7375 6273 6372 6962 655f 616c 6c5f   `subscribe_all_
-00009420: 6576 656e 7473 2829 6020 7374 6172 7473  events()` starts
-00009430: 2061 2063 6174 6368 2d75 7020 7375 6273   a catch-up subs
-00009440: 6372 6970 7469 6f6e 2074 6f20 7265 6365  cription to rece
-00009450: 6976 6520 616c 6c0a 6576 656e 7473 2069  ive all.events i
-00009460: 6e20 7468 6520 6461 7461 6261 7365 2e20  n the database. 
-00009470: 5468 6520 6d65 7468 6f64 2060 7375 6273  The method `subs
-00009480: 6372 6962 655f 7374 7265 616d 5f65 7665  cribe_stream_eve
-00009490: 6e74 7328 2960 2073 7461 7274 7320 6120  nts()` starts a 
-000094a0: 6361 7463 682d 7570 0a73 7562 7363 7269  catch-up.subscri
-000094b0: 7074 696f 6e20 746f 2072 6563 6569 7665  ption to receive
-000094c0: 2065 7665 6e74 7320 6672 6f6d 2061 2073   events from a s
-000094d0: 7065 6369 6669 6320 7374 7265 616d 2e0a  pecific stream..
-000094e0: 0a43 6174 6368 2d75 7020 7375 6273 6372  .Catch-up subscr
-000094f0: 6970 7469 6f6e 7320 6172 6520 7369 6d70  iptions are simp
-00009500: 6c79 2061 2073 7472 6561 6d69 6e67 2067  ly a streaming g
-00009510: 5250 4320 6361 6c6c 2077 6869 6368 2069  RPC call which i
-00009520: 730a 6b65 7074 206f 7065 6e20 6279 2074  s.kept open by t
-00009530: 6865 2073 6572 7665 722c 2077 6974 6820  he server, with 
-00009540: 6e65 776c 7920 7265 636f 7264 6564 2065  newly recorded e
-00009550: 7665 6e74 7320 7365 6e74 2074 6f20 7468  vents sent to th
-00009560: 6520 636c 6965 6e74 0a61 7320 7468 6520  e client.as the 
-00009570: 636c 6965 6e74 2069 7465 7261 7465 7320  client iterates 
-00009580: 6f76 6572 2074 6865 2073 7562 7363 7269  over the subscri
-00009590: 7074 696f 6e2e 0a0a 4d61 6e79 2063 6174  ption...Many cat
-000095a0: 6368 2d75 7020 7375 6273 6372 6970 7469  ch-up subscripti
-000095b0: 6f6e 7320 6361 6e20 6265 2063 7265 6174  ons can be creat
-000095c0: 6564 2c20 636f 6e63 7572 7265 6e74 6c79  ed, concurrently
-000095d0: 206f 7220 7375 6363 6573 7369 7665 6c79   or successively
-000095e0: 2c20 616e 6420 616c 6c0a 7769 6c6c 2072  , and all.will r
-000095f0: 6563 6569 7665 2061 6c6c 2074 6865 2072  eceive all the r
-00009600: 6563 6f72 6465 6420 6576 656e 7473 2074  ecorded events t
-00009610: 6865 7920 6861 7665 2062 6565 6e20 7265  hey have been re
-00009620: 7175 6573 7465 6420 746f 2072 6563 6569  quested to recei
-00009630: 7665 2e0a 0a52 6563 6569 7665 6420 7265  ve...Received re
-00009640: 636f 7264 6564 2065 7665 6e74 7320 6172  corded events ar
-00009650: 6520 696e 7374 616e 6365 7320 6f66 2074  e instances of t
-00009660: 6865 2060 5265 636f 7264 6564 4576 656e  he `RecordedEven
-00009670: 7460 2063 6c61 7373 2028 7365 6520 6265  t` class (see be
-00009680: 6c6f 7729 2e0a 5265 636f 7264 6564 2065  low)..Recorded e
-00009690: 7665 6e74 206f 626a 6563 7473 2068 6176  vent objects hav
-000096a0: 6520 6120 636f 6d6d 6974 2070 6f73 6974  e a commit posit
-000096b0: 696f 6e2c 2061 6d6f 6e73 7420 6f74 6865  ion, amonst othe
-000096c0: 7220 6174 7472 6962 7574 6573 2e0a 0a23  r attributes...#
-000096d0: 2323 2048 6f77 2074 6f20 696d 706c 656d  ## How to implem
-000096e0: 656e 7420 6578 6163 746c 792d 6f6e 6365  ent exactly-once
-000096f0: 2065 7665 6e74 2070 726f 6365 7373 696e   event processin
-00009700: 670a 0a54 6865 2063 6f6d 6d69 7420 706f  g..The commit po
-00009710: 7369 7469 6f6e 7320 6f66 2072 6563 6f72  sitions of recor
-00009720: 6465 6420 6576 656e 7473 2074 6861 7420  ded events that 
-00009730: 6172 6520 7265 6365 6976 6564 2061 6e64  are received and
-00009740: 2070 726f 6365 7373 6564 2062 7920 610a   processed by a.
-00009750: 646f 776e 7374 7265 616d 2063 6f6d 706f  downstream compo
-00009760: 6e65 6e74 2061 7265 2075 7365 6675 6c6c  nent are usefull
-00009770: 7920 7265 636f 7264 6564 2062 7920 7468  y recorded by th
-00009780: 6520 646f 776e 7374 7265 616d 2063 6f6d  e downstream com
-00009790: 706f 6e65 6e74 2073 6f20 7468 6174 0a74  ponent so that.t
-000097a0: 6865 2063 6f6d 6d69 7420 706f 7369 7469  he commit positi
-000097b0: 6f6e 206f 6620 6c61 7374 2070 726f 6365  on of last proce
-000097c0: 7373 6564 2065 7665 6e74 2063 616e 2062  ssed event can b
-000097d0: 6520 6465 7465 726d 696e 6564 2e0a 0a54  e determined...T
-000097e0: 6865 206c 6173 7420 7265 636f 7264 6564  he last recorded
-000097f0: 2063 6f6d 6d69 7420 706f 7369 7469 6f6e   commit position
-00009800: 2063 616e 2062 6520 7573 6564 2074 6f20   can be used to 
-00009810: 7370 6563 6966 7920 7468 6520 636f 6d6d  specify the comm
-00009820: 6974 2070 6f73 6974 696f 6e20 6672 6f6d  it position from
-00009830: 2077 6869 6368 0a74 6f20 7375 6273 6372   which.to subscr
-00009840: 6962 6520 7768 656e 2070 726f 6365 7373  ibe when process
-00009850: 696e 6720 6973 2072 6573 756d 6564 2e20  ing is resumed. 
-00009860: 5369 6e63 6520 7468 6973 2063 6f6d 6d69  Since this commi
-00009870: 7420 706f 7369 7469 6f6e 2077 696c 6c20  t position will 
-00009880: 7265 7072 6573 656e 7420 7468 650a 706f  represent the.po
-00009890: 7369 7469 6f6e 206f 6620 7468 6520 6c61  sition of the la
-000098a0: 7374 2073 7563 6365 7373 6675 6c6c 7920  st successfully 
-000098b0: 7072 6f63 6573 7365 6420 6576 656e 7420  processed event 
-000098c0: 696e 2061 2064 6f77 6e73 7472 6561 6d20  in a downstream 
-000098d0: 636f 6d70 6f6e 656e 742c 2073 6f20 6974  component, so it
-000098e0: 0a77 696c 6c20 6265 2075 7375 616c 2074  .will be usual t
-000098f0: 6f20 7761 6e74 2074 6865 206e 6578 7420  o want the next 
-00009900: 6576 656e 7420 6166 7465 7220 7468 6973  event after this
-00009910: 2070 6f73 6974 696f 6e2c 2062 6563 6175   position, becau
-00009920: 7365 2074 6861 7420 6973 2074 6865 206e  se that is the n
-00009930: 6578 740a 6576 656e 7420 7468 6174 2068  ext.event that h
-00009940: 6173 206e 6f74 2079 6574 2062 6565 6e20  as not yet been 
-00009950: 7072 6f63 6573 7365 642e 2046 6f72 2074  processed. For t
-00009960: 6869 7320 7265 6173 6f6e 2c20 7768 656e  his reason, when
-00009970: 2073 7562 7363 7269 6269 6e67 2066 6f72   subscribing for
-00009980: 2065 7665 6e74 730a 6672 6f6d 2061 2073   events.from a s
-00009990: 7065 6369 6669 6320 636f 6d6d 6974 2070  pecific commit p
-000099a0: 6f73 6974 696f 6e20 7573 696e 6720 6120  osition using a 
-000099b0: 6361 7463 682d 7570 2073 7562 7363 7269  catch-up subscri
-000099c0: 7074 696f 6e20 696e 2045 7665 6e74 5374  ption in EventSt
-000099d0: 6f72 6544 422c 2074 6865 0a72 6563 6f72  oreDB, the.recor
-000099e0: 6465 6420 6576 656e 7420 6174 2074 6865  ded event at the
-000099f0: 2073 7065 6369 6669 6564 2063 6f6d 6d69   specified commi
-00009a00: 7420 706f 7369 7469 6f6e 2077 696c 6c20  t position will 
-00009a10: 4e4f 5420 6265 2069 6e63 6c75 6465 6420  NOT be included 
-00009a20: 696e 2074 6865 2073 6571 7565 6e63 650a  in the sequence.
-00009a30: 6f66 2072 6563 6f72 6465 6420 6576 656e  of recorded even
-00009a40: 7473 2074 6861 7420 6172 6520 7265 6365  ts that are rece
-00009a50: 6976 6564 2e0a 0a54 6f20 6163 636f 6d70  ived...To accomp
-00009a60: 6c69 7368 2022 6578 6163 746c 792d 6f6e  lish "exactly-on
-00009a70: 6365 2220 7072 6f63 6573 7369 6e67 206f  ce" processing o
-00009a80: 6620 7265 636f 7264 6564 2065 7665 6e74  f recorded event
-00009a90: 7320 696e 2061 2064 6f77 6e73 7472 6561  s in a downstrea
-00009aa0: 6d0a 636f 6d70 6f6e 656e 7420 7768 656e  m.component when
-00009ab0: 2075 7369 6e67 2061 2063 6174 6368 2d75   using a catch-u
-00009ac0: 7020 7375 6273 6372 6970 7469 6f6e 2c20  p subscription, 
-00009ad0: 7468 6520 636f 6d6d 6974 2070 6f73 6974  the commit posit
-00009ae0: 696f 6e20 6f66 2061 2072 6563 6f72 6465  ion of a recorde
-00009af0: 640a 6576 656e 7420 7368 6f75 6c64 2062  d.event should b
-00009b00: 6520 7265 636f 7264 6564 2061 746f 6d69  e recorded atomi
-00009b10: 6361 6c6c 7920 616e 6420 756e 6971 7565  cally and unique
-00009b20: 6c79 2061 6c6f 6e67 2077 6974 6820 7468  ly along with th
-00009b30: 6520 7265 7375 6c74 206f 6620 7072 6f63  e result of proc
-00009b40: 6573 7369 6e67 0a72 6563 6f72 6465 6420  essing.recorded 
-00009b50: 6576 656e 7473 2c20 666f 7220 6578 616d  events, for exam
-00009b60: 706c 6520 696e 2074 6865 2073 616d 6520  ple in the same 
-00009b70: 6461 7461 6261 7365 2061 7320 6d61 7465  database as mate
-00009b80: 7269 616c 6973 6564 2076 6965 7773 2077  rialised views w
-00009b90: 6865 6e0a 696d 706c 656d 656e 7469 6e67  hen.implementing
-00009ba0: 2065 7665 6e74 7561 6c6c 792d 636f 6e73   eventually-cons
-00009bb0: 6973 7465 6e74 2043 5152 532c 206f 7220  istent CQRS, or 
-00009bc0: 696e 2074 6865 2073 616d 6520 6461 7461  in the same data
-00009bd0: 6261 7365 2061 7320 6120 646f 776e 7374  base as a downst
-00009be0: 7265 616d 0a61 6e61 6c79 7469 6373 206f  ream.analytics o
-00009bf0: 7220 7265 706f 7274 696e 6720 6f72 2061  r reporting or a
-00009c00: 7263 6869 7669 6e67 2061 7070 6c69 6361  rchiving applica
-00009c10: 7469 6f6e 2e20 4279 2072 6563 6f72 6469  tion. By recordi
-00009c20: 6e67 2074 6865 2063 6f6d 6d69 7420 706f  ng the commit po
-00009c30: 7369 7469 6f6e 0a6f 6620 7265 636f 7264  sition.of record
-00009c40: 6564 2065 7665 6e74 7320 6174 6f6d 6963  ed events atomic
-00009c50: 616c 6c79 2077 6974 6820 7468 6520 6e65  ally with the ne
-00009c60: 7720 7374 6174 6520 7468 6174 2072 6573  w state that res
-00009c70: 756c 7473 2066 726f 6d20 7072 6f63 6573  ults from proces
-00009c80: 7369 6e67 0a72 6563 6f72 6465 6420 6576  sing.recorded ev
-00009c90: 656e 7473 2c20 2264 7561 6c20 7772 6974  ents, "dual writ
-00009ca0: 696e 6722 2069 6e20 7468 6520 636f 6e73  ing" in the cons
-00009cb0: 756d 7074 696f 6e20 6f66 2072 6563 6f72  umption of recor
-00009cc0: 6465 6420 6576 656e 7473 2063 616e 2062  ded events can b
-00009cd0: 650a 6176 6f69 6465 642e 2042 7920 616c  e.avoided. By al
-00009ce0: 736f 2072 6563 6f72 6469 6e67 2074 6865  so recording the
-00009cf0: 2063 6f6d 6d69 7420 706f 7369 7469 6f6e   commit position
-00009d00: 2075 6e69 7175 656c 792c 2074 6865 206e   uniquely, the n
-00009d10: 6577 2073 7461 7465 2063 616e 6e6f 7420  ew state cannot 
-00009d20: 6265 0a72 6563 6f72 6465 6420 7477 6963  be.recorded twic
-00009d30: 652c 2061 6e64 2068 656e 6365 2074 6865  e, and hence the
-00009d40: 2072 6563 6f72 6465 6420 7374 6174 6520   recorded state 
-00009d50: 6f66 2074 6865 2064 6f77 6e73 7472 6561  of the downstrea
-00009d60: 6d20 636f 6d70 6f6e 656e 7420 7769 6c6c  m component will
-00009d70: 2062 650a 7570 6461 7465 6420 6f6e 6c79   be.updated only
-00009d80: 206f 6e63 6520 666f 7220 616e 7920 7265   once for any re
-00009d90: 636f 7264 6564 2065 7665 6e74 2e20 4279  corded event. By
-00009da0: 2075 7369 6e67 2074 6865 2067 7265 6174   using the great
-00009db0: 6573 7420 7265 636f 7264 6564 2063 6f6d  est recorded com
-00009dc0: 6d69 740a 706f 7369 7469 6f6e 2074 6f20  mit.position to 
-00009dd0: 7265 7375 6d65 2061 2063 6174 6368 2d75  resume a catch-u
-00009de0: 7020 7375 6273 6372 6970 7469 6f6e 2c20  p subscription, 
-00009df0: 616c 6c20 7265 636f 7264 6564 2065 7665  all recorded eve
-00009e00: 6e74 7320 7769 6c6c 2065 7665 6e74 7561  nts will eventua
-00009e10: 6c6c 790a 6265 2070 726f 6365 7373 6564  lly.be processed
-00009e20: 2e20 5468 6520 636f 6d62 696e 6174 696f  . The combinatio
-00009e30: 6e20 6f66 2074 6865 2022 6174 2d6d 6f73  n of the "at-mos
-00009e40: 742d 6f6e 6365 2220 636f 6e64 6974 696f  t-once" conditio
-00009e50: 6e20 616e 6420 7468 6520 2261 742d 6c65  n and the "at-le
-00009e60: 6173 742d 6f6e 6365 220a 636f 6e64 6974  ast-once".condit
-00009e70: 696f 6e20 6769 7665 7320 7468 6520 2265  ion gives the "e
-00009e80: 7861 6374 6c79 2d6f 6e63 6522 2063 6f6e  xactly-once" con
-00009e90: 6469 7469 6f6e 2e0a 0a54 6865 2064 616e  dition...The dan
-00009ea0: 6765 7220 7769 7468 2022 6475 616c 2077  ger with "dual w
-00009eb0: 7269 7469 6e67 2220 696e 2074 6865 2063  riting" in the c
-00009ec0: 6f6e 7375 6d70 7469 6f6e 206f 6620 7265  onsumption of re
-00009ed0: 636f 7264 6564 2065 7665 6e74 7320 6973  corded events is
-00009ee0: 2074 6861 7420 6966 2061 0a72 6563 6f72   that if a.recor
-00009ef0: 6465 6420 6576 656e 7420 6973 2073 7563  ded event is suc
-00009f00: 6365 7373 6675 6c6c 7920 7072 6f63 6573  cessfully proces
-00009f10: 7365 6420 616e 6420 6e65 7720 7374 6174  sed and new stat
-00009f20: 6520 7265 636f 7264 6564 2061 746f 6d69  e recorded atomi
-00009f30: 6361 6c6c 7920 696e 206f 6e65 0a74 7261  cally in one.tra
-00009f40: 6e73 6163 7469 6f6e 2077 6974 6820 7468  nsaction with th
-00009f50: 6520 636f 6d6d 6974 2070 6f73 6974 696f  e commit positio
-00009f60: 6e20 7265 636f 7264 6564 2069 6e20 6120  n recorded in a 
-00009f70: 7365 7061 7261 7465 2074 7261 6e73 6163  separate transac
-00009f80: 7469 6f6e 2c20 6f6e 6520 6d61 790a 6861  tion, one may.ha
-00009f90: 7070 656e 2061 6e64 206e 6f74 2074 6865  ppen and not the
-00009fa0: 206f 7468 6572 2e20 4966 2074 6865 206e   other. If the n
-00009fb0: 6577 2073 7461 7465 2069 7320 7265 636f  ew state is reco
-00009fc0: 7264 6564 2062 7574 2074 6865 2070 6f73  rded but the pos
-00009fd0: 6974 696f 6e20 6973 206c 6f73 742c 0a61  ition is lost,.a
-00009fe0: 6e64 2074 6865 6e20 7468 6520 7072 6f63  nd then the proc
-00009ff0: 6573 7369 6e67 2069 7320 7374 6f70 7065  essing is stoppe
-0000a000: 6420 616e 6420 7265 7375 6d65 642c 2074  d and resumed, t
-0000a010: 6865 2072 6563 6f72 6465 6420 6576 656e  he recorded even
-0000a020: 7420 6d61 7920 6265 2070 726f 6365 7373  t may be process
-0000a030: 6564 0a74 7769 6365 2e20 4f6e 2074 6865  ed.twice. On the
-0000a040: 206f 7468 6572 2068 616e 642c 2069 6620   other hand, if 
-0000a050: 7468 6520 636f 6d6d 6974 2070 6f73 6974  the commit posit
-0000a060: 696f 6e20 6973 2072 6563 6f72 6465 6420  ion is recorded 
-0000a070: 6275 7420 7468 6520 6e65 7720 7374 6174  but the new stat
-0000a080: 6520 6973 0a6c 6f73 742c 2074 6865 2072  e is.lost, the r
-0000a090: 6563 6f72 6465 6420 6576 656e 7420 6d61  ecorded event ma
-0000a0a0: 7920 6566 6665 6374 6976 656c 7920 6e6f  y effectively no
-0000a0b0: 7420 6265 2070 726f 6365 7373 6564 2061  t be processed a
-0000a0c0: 7420 616c 6c2e 2042 7920 6569 7468 6572  t all. By either
-0000a0d0: 0a70 726f 6365 7373 696e 6720 616e 2065  .processing an e
-0000a0e0: 7665 6e74 206d 6f72 6520 7468 616e 206f  vent more than o
-0000a0f0: 6e63 652c 206f 7220 6279 2066 6169 6c69  nce, or by faili
-0000a100: 6e67 2074 6f20 7072 6f63 6573 7320 616e  ng to process an
-0000a110: 2065 7665 6e74 2c20 7468 6520 7265 636f   event, the reco
-0000a120: 7264 6564 0a73 7461 7465 206f 6620 7468  rded.state of th
-0000a130: 6520 646f 776e 7374 7265 616d 2063 6f6d  e downstream com
-0000a140: 706f 6e65 6e74 206d 6967 6874 2062 6520  ponent might be 
-0000a150: 696e 6163 6375 7261 7465 2c20 6f72 2070  inaccurate, or p
-0000a160: 6f73 7369 626c 7920 696e 636f 6e73 6973  ossibly inconsis
-0000a170: 7465 6e74 2c20 616e 640a 7065 7268 6170  tent, and.perhap
-0000a180: 7320 6361 7461 7374 726f 7068 6963 616c  s catastrophical
-0000a190: 6c79 2073 6f2e 2053 7563 6820 636f 6e73  ly so. Such cons
-0000a1a0: 6571 7565 6e63 6573 206d 6179 206f 7220  equences may or 
-0000a1b0: 6d61 7920 6e6f 7420 6d61 7474 6572 2069  may not matter i
-0000a1c0: 6e20 796f 7572 2073 6974 7561 7469 6f6e  n your situation
-0000a1d0: 2e0a 4275 7420 736f 6d65 7469 6d65 7320  ..But sometimes 
-0000a1e0: 696e 636f 6e73 6973 7465 6e63 6965 7320  inconsistencies 
-0000a1f0: 6d61 7920 6861 6c74 2070 726f 6365 7373  may halt process
-0000a200: 696e 6720 756e 7469 6c20 7468 6520 6973  ing until the is
-0000a210: 7375 6520 6973 2072 6573 6f6c 7665 642e  sue is resolved.
-0000a220: 2059 6f75 2063 616e 0a61 766f 6964 2022   You can.avoid "
-0000a230: 6475 616c 2077 7269 7469 6e67 2220 696e  dual writing" in
-0000a240: 2074 6865 2063 6f6e 7375 6d70 7469 6f6e   the consumption
-0000a250: 206f 6620 6576 656e 7473 2062 7920 6174   of events by at
-0000a260: 6f6d 6963 616c 6c79 2072 6563 6f72 6469  omically recordi
-0000a270: 6e67 2074 6865 2063 6f6d 6d69 740a 706f  ng the commit.po
-0000a280: 7369 7469 6f6e 206f 6620 6120 7265 636f  sition of a reco
-0000a290: 7264 6564 2065 7665 6e74 2061 6c6f 6e67  rded event along
-0000a2a0: 2077 6974 6820 7468 6520 6e65 7720 7374   with the new st
-0000a2b0: 6174 6520 7468 6174 2072 6573 756c 7473  ate that results
-0000a2c0: 2066 726f 6d20 7072 6f63 6573 7369 6e67   from processing
-0000a2d0: 2074 6861 740a 6576 656e 7420 696e 2074   that.event in t
-0000a2e0: 6865 2073 616d 6520 6174 6f6d 6963 2074  he same atomic t
-0000a2f0: 7261 6e73 6163 7469 6f6e 2e20 4279 206d  ransaction. By m
-0000a300: 616b 696e 6720 7468 6520 7265 636f 7264  aking the record
-0000a310: 696e 6720 6f66 2074 6865 2063 6f6d 6d69  ing of the commi
-0000a320: 7420 706f 7369 7469 6f6e 730a 756e 6971  t positions.uniq
-0000a330: 7565 2c20 736f 2074 6861 7420 7472 616e  ue, so that tran
-0000a340: 7361 6374 696f 6e73 2077 696c 6c20 6265  sactions will be
-0000a350: 2072 6f6c 6c65 6420 6261 636b 2077 6865   rolled back whe
-0000a360: 6e20 7468 6572 6520 6973 2061 2063 6f6e  n there is a con
-0000a370: 666c 6963 742c 2079 6f75 2077 696c 6c0a  flict, you will.
-0000a380: 7072 6576 656e 7420 7468 6520 7265 7375  prevent the resu
-0000a390: 6c74 7320 6f66 2061 6e79 2064 7570 6c69  lts of any dupli
-0000a3a0: 6361 7465 2070 726f 6365 7373 696e 6720  cate processing 
-0000a3b0: 6f66 2061 2072 6563 6f72 6465 6420 6576  of a recorded ev
-0000a3c0: 656e 7420 6265 696e 6720 636f 6d6d 6974  ent being commit
-0000a3d0: 7465 642e 0a0a 5265 636f 7264 6564 2065  ted...Recorded e
-0000a3e0: 7665 6e74 7320 7265 6365 6976 6564 2066  vents received f
-0000a3f0: 726f 6d20 6120 6361 7463 682d 7570 2073  rom a catch-up s
-0000a400: 7562 7363 7269 7074 696f 6e20 6361 6e6e  ubscription cann
-0000a410: 6f74 2062 6520 6163 6b6e 6f77 6c65 6467  ot be acknowledg
-0000a420: 6564 2062 6163 6b0a 746f 2074 6865 2045  ed back.to the E
-0000a430: 7665 6e74 5374 6f72 6544 4220 7365 7276  ventStoreDB serv
-0000a440: 6572 2e20 4163 6b6e 6f77 6c65 6467 696e  er. Acknowledgin
-0000a450: 6720 6576 656e 7473 2c20 686f 7765 7665  g events, howeve
-0000a460: 722c 2069 7320 616e 2061 7370 6563 7420  r, is an aspect 
-0000a470: 6f66 2022 7065 7273 6973 7465 6e74 0a73  of "persistent.s
-0000a480: 7562 7363 7269 7074 696f 6e73 2220 2873  ubscriptions" (s
-0000a490: 6565 2062 656c 6f77 292e 2048 6f70 696e  ee below). Hopin
-0000a4a0: 6720 746f 2072 656c 7920 6f6e 2061 636b  g to rely on ack
-0000a4b0: 6e6f 776c 6564 6769 6e67 2065 7665 6e74  nowledging event
-0000a4c0: 7320 746f 2061 6e20 7570 7374 7265 616d  s to an upstream
-0000a4d0: 0a63 6f6d 706f 6e65 6e74 2069 7320 616e  .component is an
-0000a4e0: 2065 7861 6d70 6c65 206f 6620 6475 616c   example of dual
-0000a4f0: 2077 7269 7469 6e67 2e0a 0a23 2323 2053   writing...### S
-0000a500: 7562 7363 7269 6265 2061 6c6c 2065 7665  ubscribe all eve
-0000a510: 6e74 730a 0a54 6865 6073 7562 7363 7269  nts..The`subscri
-0000a520: 6265 5f61 6c6c 5f65 7665 6e74 7328 2960  be_all_events()`
-0000a530: 206d 6574 686f 6420 6361 6e20 6265 2075   method can be u
-0000a540: 7365 6420 746f 2073 7461 7274 2061 2022  sed to start a "
-0000a550: 6361 7463 682d 7570 2220 7375 6273 6372  catch-up" subscr
-0000a560: 6970 7469 6f6e 0a74 6861 7420 6361 6e20  iption.that can 
-0000a570: 7265 7475 726e 2061 6c6c 2065 7665 6e74  return all event
-0000a580: 7320 696e 2074 6865 2064 6174 6162 6173  s in the databas
-0000a590: 652e 0a0a 5468 6973 206d 6574 686f 6420  e...This method 
-0000a5a0: 6361 6e20 6265 2075 7365 6420 6279 2061  can be used by a
-0000a5b0: 2064 6f77 6e73 7472 6561 6d20 636f 6d70   downstream comp
-0000a5c0: 6f6e 656e 740a 746f 2070 726f 6365 7373  onent.to process
-0000a5d0: 2072 6563 6f72 6465 6420 6576 656e 7473   recorded events
-0000a5e0: 2077 6974 6820 6578 6163 746c 792d 6f6e   with exactly-on
-0000a5f0: 6365 2073 656d 616e 7469 6373 2e0a 0a54  ce semantics...T
-0000a600: 6869 7320 6d65 7468 6f64 2074 616b 6573  his method takes
-0000a610: 2061 6e20 6f70 7469 6f6e 616c 2060 636f   an optional `co
-0000a620: 6d6d 6974 5f70 6f73 6974 696f 6e60 2061  mmit_position` a
-0000a630: 7267 756d 656e 742c 2077 6869 6368 2063  rgument, which c
-0000a640: 616e 2062 650a 7573 6564 2074 6f20 7370  an be.used to sp
-0000a650: 6563 6966 7920 6120 636f 6d6d 6974 2070  ecify a commit p
-0000a660: 6f73 6974 696f 6e20 6672 6f6d 2077 6869  osition from whi
-0000a670: 6368 2074 6f20 7375 6273 6372 6962 6520  ch to subscribe 
-0000a680: 666f 720a 7265 636f 7264 6564 2065 7665  for.recorded eve
-0000a690: 6e74 732e 2054 6865 2064 6566 6175 6c74  nts. The default
-0000a6a0: 2076 616c 7565 2069 7320 604e 6f6e 6560   value is `None`
-0000a6b0: 2c20 7768 6963 6820 6d65 616e 730a 7468  , which means.th
-0000a6c0: 6520 7375 6273 6372 6970 7469 6f6e 2077  e subscription w
-0000a6d0: 696c 6c20 6f70 6572 6174 6520 6672 6f6d  ill operate from
-0000a6e0: 2074 6865 2066 6972 7374 2072 6563 6f72   the first recor
-0000a6f0: 6465 6420 6576 656e 740a 696e 2074 6865  ded event.in the
-0000a700: 2064 6174 6162 6173 652e 2049 6620 6120   database. If a 
-0000a710: 636f 6d6d 6974 2070 6f73 6974 696f 6e20  commit position 
-0000a720: 6973 2067 6976 656e 2c20 6974 206d 7573  is given, it mus
-0000a730: 7420 6d61 7463 680a 616e 2061 6374 7561  t match.an actua
-0000a740: 6c6c 7920 6578 6973 7469 6e67 2063 6f6d  lly existing com
-0000a750: 6d69 7420 706f 7369 7469 6f6e 2069 6e20  mit position in 
-0000a760: 7468 6520 6461 7461 6261 7365 2e20 5468  the database. Th
-0000a770: 6520 6576 656e 7473 0a74 6861 7420 6172  e events.that ar
-0000a780: 6520 6f62 7461 696e 6564 2077 696c 6c20  e obtained will 
-0000a790: 6e6f 7420 696e 636c 7564 6520 7468 6520  not include the 
-0000a7a0: 6576 656e 7420 7265 636f 7264 6564 2061  event recorded a
-0000a7b0: 7420 7468 6174 2063 6f6d 6d69 740a 706f  t that commit.po
-0000a7c0: 7369 7469 6f6e 2e0a 0a54 6869 7320 6d65  sition...This me
-0000a7d0: 7468 6f64 2061 6c73 6f20 7461 6b65 7320  thod also takes 
-0000a7e0: 7468 7265 6520 6f74 6865 7220 6f70 7469  three other opti
-0000a7f0: 6f6e 616c 2061 7267 756d 656e 7473 2c20  onal arguments, 
-0000a800: 6066 696c 7465 725f 6578 636c 7564 6560  `filter_exclude`
-0000a810: 2c0a 6066 696c 7465 725f 696e 636c 7564  ,.`filter_includ
-0000a820: 6560 2c20 616e 6420 6074 696d 656f 7574  e`, and `timeout
-0000a830: 602e 0a0a 5468 6520 6172 6775 6d65 6e74  `...The argument
-0000a840: 2060 6669 6c74 6572 5f65 7863 6c75 6465   `filter_exclude
-0000a850: 6020 6973 2061 2073 6571 7565 6e63 6520  ` is a sequence 
-0000a860: 6f66 2072 6567 756c 6172 2065 7870 7265  of regular expre
-0000a870: 7373 696f 6e73 206d 6174 6368 696e 670a  ssions matching.
-0000a880: 7468 6520 7479 7065 2073 7472 696e 6773  the type strings
-0000a890: 206f 6620 7265 636f 7264 6564 2065 7665   of recorded eve
-0000a8a0: 6e74 7320 7468 6174 2073 686f 756c 6420  nts that should 
-0000a8b0: 6265 2065 7863 6c75 6465 642e 2042 7920  be excluded. By 
-0000a8c0: 6465 6661 756c 742c 0a74 6869 7320 6172  default,.this ar
-0000a8d0: 6775 6d65 6e74 2077 696c 6c20 6d61 7463  gument will matc
-0000a8e0: 6820 2273 7973 7465 6d20 6576 656e 7473  h "system events
-0000a8f0: 222c 2073 6f20 7468 6174 2074 6865 7920  ", so that they 
-0000a900: 7769 6c6c 206e 6f74 2062 6520 696e 636c  will not be incl
-0000a910: 7564 6564 2e0a 5468 6973 2061 7267 756d  uded..This argum
-0000a920: 656e 7420 6973 2069 676e 6f72 6564 2069  ent is ignored i
-0000a930: 6620 6066 696c 7465 725f 696e 636c 7564  f `filter_includ
-0000a940: 6560 2069 7320 7365 7420 746f 2061 206e  e` is set to a n
-0000a950: 6f6e 2d65 6d70 7479 2073 6571 7565 6e63  on-empty sequenc
-0000a960: 652e 0a0a 5468 6520 6172 6775 6d65 6e74  e...The argument
-0000a970: 2060 6669 6c74 6572 5f69 6e63 6c75 6465   `filter_include
-0000a980: 6020 6973 2061 2073 6571 7565 6e63 6520  ` is a sequence 
-0000a990: 6f66 2072 6567 756c 6172 2065 7870 7265  of regular expre
-0000a9a0: 7373 696f 6e73 0a6d 6174 6368 696e 6720  ssions.matching 
-0000a9b0: 7468 6520 7479 7065 2073 7472 696e 6773  the type strings
-0000a9c0: 206f 6620 7265 636f 7264 6564 2065 7665   of recorded eve
-0000a9d0: 6e74 7320 7468 6174 2073 686f 756c 6420  nts that should 
-0000a9e0: 6265 2069 6e63 6c75 6465 642e 2042 790a  be included. By.
-0000a9f0: 6465 6661 756c 742c 2074 6869 7320 6172  default, this ar
-0000aa00: 6775 6d65 6e74 2069 7320 616e 2065 6d70  gument is an emp
-0000aa10: 7479 2074 7570 6c65 2e20 4966 2074 6869  ty tuple. If thi
-0000aa20: 7320 6172 6775 6d65 6e74 2069 7320 7365  s argument is se
-0000aa30: 7420 746f 2061 0a6e 6f6e 2d65 6d70 7479  t to a.non-empty
-0000aa40: 2073 6571 7565 6e63 652c 2074 6865 2060   sequence, the `
-0000aa50: 6669 6c74 6572 5f65 7863 6c75 6465 6020  filter_exclude` 
-0000aa60: 6172 6775 6d65 6e74 2069 7320 6967 6e6f  argument is igno
-0000aa70: 7265 642e 0a0a 506c 6561 7365 206e 6f74  red...Please not
-0000aa80: 652c 2074 6865 2066 696c 7465 7269 6e67  e, the filtering
-0000aa90: 2068 6170 7065 6e73 206f 6e20 7468 6520   happens on the 
-0000aaa0: 4576 656e 7453 746f 7265 4442 2073 6572  EventStoreDB ser
-0000aab0: 7665 722c 2061 6e64 2074 6865 0a60 6c69  ver, and the.`li
-0000aac0: 6d69 7460 2061 7267 756d 656e 7420 6973  mit` argument is
-0000aad0: 2061 7070 6c69 6564 206f 6e20 7468 6520   applied on the 
-0000aae0: 7365 7276 6572 2061 6674 6572 2066 696c  server after fil
-0000aaf0: 7465 7269 6e67 2e20 5365 6520 6265 6c6f  tering. See belo
-0000ab00: 7720 666f 720a 6d6f 7265 2069 6e66 6f72  w for.more infor
-0000ab10: 6d61 7469 6f6e 2061 626f 7574 2066 696c  mation about fil
-0000ab20: 7465 7220 7265 6775 6c61 7220 6578 7072  ter regular expr
-0000ab30: 6573 7369 6f6e 732e 0a0a 5468 6520 6172  essions...The ar
-0000ab40: 6775 6d65 6e74 2060 7469 6d65 6f75 7460  gument `timeout`
-0000ab50: 2069 7320 6120 5079 7468 6f6e 2060 666c   is a Python `fl
-0000ab60: 6f61 7460 2077 6869 6368 2073 6574 7320  oat` which sets 
-0000ab70: 6120 6465 6164 6c69 6e65 2066 6f72 2074  a deadline for t
-0000ab80: 6865 2063 6f6d 706c 6574 696f 6e20 6f66  he completion of
-0000ab90: 0a74 6865 2067 5250 4320 6f70 6572 6174  .the gRPC operat
-0000aba0: 696f 6e2e 2054 6869 7320 7072 6f62 6162  ion. This probab
-0000abb0: 6c79 2069 736e 2774 2076 6572 7920 7573  ly isn't very us
-0000abc0: 6566 756c 2c20 6275 7420 6973 2069 6e63  eful, but is inc
-0000abd0: 6c75 6465 6420 666f 720a 636f 6d70 6c65  luded for.comple
-0000abe0: 7465 6e65 7373 2061 6e64 2063 6f6e 7369  teness and consi
-0000abf0: 7374 656e 6379 2077 6974 6820 7468 6520  stency with the 
-0000ac00: 6f74 6865 7220 6d65 7468 6f64 732e 0a0a  other methods...
-0000ac10: 5468 6973 206d 6574 686f 6420 7265 7475  This method retu
-0000ac20: 726e 7320 6120 5079 7468 6f6e 2069 7465  rns a Python ite
-0000ac30: 7261 746f 7220 7468 6174 2079 6965 6c64  rator that yield
-0000ac40: 7320 7265 636f 7264 6564 2065 7665 6e74  s recorded event
-0000ac50: 732c 2069 6e63 6c75 6469 6e67 2065 7665  s, including eve
-0000ac60: 6e74 730a 7468 6174 2061 7265 2072 6563  nts.that are rec
-0000ac70: 6f72 6465 6420 6166 7465 7220 7468 6520  orded after the 
-0000ac80: 7375 6273 6372 6970 7469 6f6e 2077 6173  subscription was
-0000ac90: 2063 7265 6174 6564 2e20 4974 6572 6174   created. Iterat
-0000aca0: 696e 6720 6f76 6572 2074 6869 7320 6f62  ing over this ob
-0000acb0: 6a65 6374 2077 696c 6c0a 7468 6572 6566  ject will.theref
-0000acc0: 6f72 6520 6e6f 7420 7374 6f70 2c20 756e  ore not stop, un
-0000acd0: 6c65 7373 2074 6865 2063 6f6e 6e65 6374  less the connect
-0000ace0: 696f 6e20 746f 2074 6865 2064 6174 6162  ion to the datab
-0000acf0: 6173 6520 6973 206c 6f73 742e 2054 6865  ase is lost. The
-0000ad00: 2063 6f6e 6e65 6374 696f 6e20 7769 6c6c   connection will
-0000ad10: 0a62 6520 636c 6f73 6564 2077 6865 6e20  .be closed when 
-0000ad20: 7468 6520 6974 6572 6174 6f72 206f 626a  the iterator obj
-0000ad30: 6563 7420 6973 2064 656c 6574 6564 2066  ect is deleted f
-0000ad40: 726f 6d20 6d65 6d6f 7279 2c20 7768 6963  rom memory, whic
-0000ad50: 6820 7769 6c6c 2068 6170 7065 6e20 7768  h will happen wh
-0000ad60: 656e 2074 6865 0a69 7465 7261 746f 7220  en the.iterator 
-0000ad70: 6f62 6a65 6374 2067 6f65 7320 6f75 7420  object goes out 
-0000ad80: 6f66 2073 636f 7065 206f 7220 6973 2065  of scope or is e
-0000ad90: 7870 6c69 6369 746c 7920 6465 6c65 7465  xplicitly delete
-0000ada0: 6420 2873 6565 2062 656c 6f77 292e 2054  d (see below). T
-0000adb0: 6865 2063 6f6e 6e65 6374 696f 6e0a 6d61  he connection.ma
-0000adc0: 7920 616c 736f 2062 6520 636c 6f73 6564  y also be closed
-0000add0: 2062 7920 7468 6520 7365 7276 6572 2e0a   by the server..
-0000ade0: 0a54 6865 2073 7562 7363 7269 7074 696f  .The subscriptio
-0000adf0: 6e20 6f62 6a65 6374 2063 616e 2062 6520  n object can be 
-0000ae00: 7573 6564 2064 6972 6563 746c 792c 2062  used directly, b
-0000ae10: 7574 2069 7420 6d69 6768 7420 6265 2075  ut it might be u
-0000ae20: 7365 6420 7769 7468 696e 2061 2074 6872  sed within a thr
-0000ae30: 6561 6465 640a 6c6f 6f70 2064 6564 6963  eaded.loop dedic
-0000ae40: 6174 6564 2074 6f20 7265 6365 6976 696e  ated to receivin
-0000ae50: 6720 6576 656e 7473 2074 6861 7420 6361  g events that ca
-0000ae60: 6e20 6265 2073 746f 7070 6564 2069 6e20  n be stopped in 
-0000ae70: 6120 636f 6e74 726f 6c6c 6564 2077 6179  a controlled way
-0000ae80: 2c20 7769 7468 0a72 6563 6f72 6465 6420  , with.recorded 
-0000ae90: 6576 656e 7473 2070 7574 206f 6e20 6120  events put on a 
-0000aea0: 7175 6575 6520 666f 7220 7072 6f63 6573  queue for proces
-0000aeb0: 7369 6e67 2069 6e20 6120 6469 6666 6572  sing in a differ
-0000aec0: 656e 7420 7468 7265 6164 2e20 5468 6973  ent thread. This
-0000aed0: 2070 6163 6b61 6765 0a64 6f65 736e 2774   package.doesn't
-0000aee0: 2070 726f 7669 6465 2073 7563 6820 6120   provide such a 
-0000aef0: 7468 7265 6164 6564 206f 7220 7175 6575  threaded or queu
-0000af00: 696e 6720 6f62 6a65 6374 2063 6c61 7373  ing object class
-0000af10: 2e20 4a75 7374 206d 616b 6520 7375 7265  . Just make sure
-0000af20: 2074 6f20 7265 636f 6e73 7472 7563 740a   to reconstruct.
-0000af30: 7468 6520 7375 6273 6372 6970 7469 6f6e  the subscription
-0000af40: 2028 616e 6420 7468 6520 7175 6575 6529   (and the queue)
-0000af50: 2075 7369 6e67 2074 6865 206c 6173 7420   using the last 
-0000af60: 7265 636f 7264 6564 2063 6f6d 6d69 7420  recorded commit 
-0000af70: 706f 7369 7469 6f6e 2077 6865 6e20 7265  position when re
-0000af80: 7375 6d69 6e67 0a74 6865 2073 7562 7363  suming.the subsc
-0000af90: 7269 7074 696f 6e20 6166 7465 7220 616e  ription after an
-0000afa0: 2065 7272 6f72 2c20 746f 2062 6520 7375   error, to be su
-0000afb0: 7265 2061 6c6c 2065 7665 6e74 7320 6172  re all events ar
-0000afc0: 6520 7072 6f63 6573 7365 6420 6f6e 6365  e processed once
-0000afd0: 2e0a 0a54 6865 2065 7861 6d70 6c65 2062  ...The example b
-0000afe0: 656c 6f77 2073 686f 7773 2068 6f77 2074  elow shows how t
-0000aff0: 6f20 7375 6273 6372 6962 6520 746f 2072  o subscribe to r
-0000b000: 6563 6569 7665 2061 6c6c 2072 6563 6f72  eceive all recor
-0000b010: 6465 640a 6576 656e 7473 2066 726f 6d20  ded.events from 
-0000b020: 7468 6520 7374 6172 742c 2061 6e64 2074  the start, and t
-0000b030: 6865 6e20 7265 7375 6d69 6e67 2066 726f  hen resuming fro
-0000b040: 6d20 6120 7370 6563 6966 6963 2063 6f6d  m a specific com
-0000b050: 6d69 7420 706f 7369 7469 6f6e 2e0a 5468  mit position..Th
-0000b060: 7265 6520 616c 7265 6164 792d 7265 636f  ree already-reco
-0000b070: 7264 6564 2065 7665 6e74 7320 6172 6520  rded events are 
-0000b080: 7265 6365 6976 6564 2c20 616e 6420 7468  received, and th
-0000b090: 656e 2074 6872 6565 206e 6577 2065 7665  en three new eve
-0000b0a0: 6e74 7320 6172 650a 7265 636f 7264 6564  nts are.recorded
-0000b0b0: 2c20 7768 6963 6820 6172 6520 7468 656e  , which are then
-0000b0c0: 2072 6563 6569 7665 6420 7669 6120 7468   received via th
-0000b0d0: 6520 7375 6273 6372 6970 7469 6f6e 2e0a  e subscription..
-0000b0e0: 0a60 6060 7079 7468 6f6e 0a0a 2320 4170  .```python..# Ap
-0000b0f0: 7065 6e64 2061 6e20 6576 656e 7420 746f  pend an event to
-0000b100: 2061 206e 6577 2073 7472 6561 6d2e 0a73   a new stream..s
-0000b110: 7472 6561 6d5f 6e61 6d65 3220 3d20 7374  tream_name2 = st
-0000b120: 7228 7575 6964 3428 2929 0a65 7665 6e74  r(uuid4()).event
-0000b130: 3420 3d20 4e65 7745 7665 6e74 2874 7970  4 = NewEvent(typ
-0000b140: 653d 274f 7264 6572 4372 6561 7465 6427  e='OrderCreated'
-0000b150: 2c20 6461 7461 3d62 2764 6174 6134 2729  , data=b'data4')
-0000b160: 0a63 6c69 656e 742e 6170 7065 6e64 5f65  .client.append_e
-0000b170: 7665 6e74 7328 0a20 2020 2073 7472 6561  vents(.    strea
-0000b180: 6d5f 6e61 6d65 3d73 7472 6561 6d5f 6e61  m_name=stream_na
-0000b190: 6d65 322c 0a20 2020 2065 7870 6563 7465  me2,.    expecte
-0000b1a0: 645f 706f 7369 7469 6f6e 3d4e 6f6e 652c  d_position=None,
-0000b1b0: 0a20 2020 2065 7665 6e74 733d 5b65 7665  .    events=[eve
-0000b1c0: 6e74 345d 2c0a 290a 0a23 2053 7562 7363  nt4],.)..# Subsc
-0000b1d0: 7269 6265 2066 726f 6d20 7468 6520 6669  ribe from the fi
-0000b1e0: 7273 7420 7265 636f 7264 6564 2065 7665  rst recorded eve
-0000b1f0: 6e74 2069 6e20 7468 6520 6461 7461 6261  nt in the databa
-0000b200: 7365 2e0a 7375 6273 6372 6970 7469 6f6e  se..subscription
-0000b210: 203d 2063 6c69 656e 742e 7375 6273 6372   = client.subscr
-0000b220: 6962 655f 616c 6c5f 6576 656e 7473 2829  ibe_all_events()
-0000b230: 0a72 6563 6569 7665 645f 6576 656e 7473  .received_events
-0000b240: 203d 205b 5d0a 0a23 2050 726f 6365 7373   = []..# Process
-0000b250: 2065 7665 6e74 7320 7265 6365 6976 6564   events received
-0000b260: 2066 726f 6d20 7468 6520 6361 7463 682d   from the catch-
-0000b270: 7570 2073 7562 7363 7269 7074 696f 6e2e  up subscription.
-0000b280: 0a66 6f72 2065 7665 6e74 2069 6e20 7375  .for event in su
-0000b290: 6273 6372 6970 7469 6f6e 3a0a 2020 2020  bscription:.    
-0000b2a0: 6c61 7374 5f63 6f6d 6d69 745f 706f 7369  last_commit_posi
-0000b2b0: 7469 6f6e 203d 2065 7665 6e74 2e63 6f6d  tion = event.com
-0000b2c0: 6d69 745f 706f 7369 7469 6f6e 0a20 2020  mit_position.   
-0000b2d0: 2072 6563 6569 7665 645f 6576 656e 7473   received_events
-0000b2e0: 2e61 7070 656e 6428 6576 656e 7429 0a20  .append(event). 
-0000b2f0: 2020 2069 6620 6576 656e 742e 6964 203d     if event.id =
-0000b300: 3d20 6576 656e 7434 2e69 643a 0a20 2020  = event4.id:.   
-0000b310: 2020 2020 2062 7265 616b 0a0a 6173 7365       break..asse
-0000b320: 7274 2072 6563 6569 7665 645f 6576 656e  rt received_even
-0000b330: 7473 5b2d 345d 2e69 6420 3d3d 2065 7665  ts[-4].id == eve
-0000b340: 6e74 312e 6964 0a61 7373 6572 7420 7265  nt1.id.assert re
-0000b350: 6365 6976 6564 5f65 7665 6e74 735b 2d33  ceived_events[-3
-0000b360: 5d2e 6964 203d 3d20 6576 656e 7432 2e69  ].id == event2.i
-0000b370: 640a 6173 7365 7274 2072 6563 6569 7665  d.assert receive
-0000b380: 645f 6576 656e 7473 5b2d 325d 2e69 6420  d_events[-2].id 
-0000b390: 3d3d 2065 7665 6e74 332e 6964 0a61 7373  == event3.id.ass
-0000b3a0: 6572 7420 7265 6365 6976 6564 5f65 7665  ert received_eve
-0000b3b0: 6e74 735b 2d31 5d2e 6964 203d 3d20 6576  nts[-1].id == ev
-0000b3c0: 656e 7434 2e69 640a 0a23 2041 7070 656e  ent4.id..# Appen
-0000b3d0: 6420 7375 6273 6571 7565 6e74 2065 7665  d subsequent eve
-0000b3e0: 6e74 7320 746f 2074 6865 2073 7472 6561  nts to the strea
-0000b3f0: 6d2e 0a65 7665 6e74 3520 3d20 4e65 7745  m..event5 = NewE
-0000b400: 7665 6e74 2874 7970 653d 274f 7264 6572  vent(type='Order
-0000b410: 5570 6461 7465 6427 2c20 6461 7461 3d62  Updated', data=b
-0000b420: 2764 6174 6135 2729 0a63 6c69 656e 742e  'data5').client.
-0000b430: 6170 7065 6e64 5f65 7665 6e74 7328 0a20  append_events(. 
-0000b440: 2020 2073 7472 6561 6d5f 6e61 6d65 3d73     stream_name=s
-0000b450: 7472 6561 6d5f 6e61 6d65 322c 0a20 2020  tream_name2,.   
-0000b460: 2065 7870 6563 7465 645f 706f 7369 7469   expected_positi
-0000b470: 6f6e 3d30 2c0a 2020 2020 6576 656e 7473  on=0,.    events
-0000b480: 3d5b 6576 656e 7435 5d2c 0a29 0a0a 2320  =[event5],.)..# 
-0000b490: 5265 6365 6976 6520 7375 6273 6571 7565  Receive subseque
-0000b4a0: 6e74 2065 7665 6e74 7320 6672 6f6d 2074  nt events from t
-0000b4b0: 6865 2073 7562 7363 7269 7074 696f 6e2e  he subscription.
-0000b4c0: 0a66 6f72 2065 7665 6e74 2069 6e20 7375  .for event in su
-0000b4d0: 6273 6372 6970 7469 6f6e 3a0a 2020 2020  bscription:.    
-0000b4e0: 6c61 7374 5f63 6f6d 6d69 745f 706f 7369  last_commit_posi
-0000b4f0: 7469 6f6e 203d 2065 7665 6e74 2e63 6f6d  tion = event.com
-0000b500: 6d69 745f 706f 7369 7469 6f6e 0a20 2020  mit_position.   
-0000b510: 2072 6563 6569 7665 645f 6576 656e 7473   received_events
-0000b520: 2e61 7070 656e 6428 6576 656e 7429 0a20  .append(event). 
-0000b530: 2020 2069 6620 6576 656e 742e 6964 203d     if event.id =
-0000b540: 3d20 6576 656e 7435 2e69 643a 0a20 2020  = event5.id:.   
-0000b550: 2020 2020 2062 7265 616b 0a0a 0a61 7373       break...ass
-0000b560: 6572 7420 7265 6365 6976 6564 5f65 7665  ert received_eve
-0000b570: 6e74 735b 2d35 5d2e 6964 203d 3d20 6576  nts[-5].id == ev
-0000b580: 656e 7431 2e69 640a 6173 7365 7274 2072  ent1.id.assert r
-0000b590: 6563 6569 7665 645f 6576 656e 7473 5b2d  eceived_events[-
-0000b5a0: 345d 2e69 6420 3d3d 2065 7665 6e74 322e  4].id == event2.
-0000b5b0: 6964 0a61 7373 6572 7420 7265 6365 6976  id.assert receiv
-0000b5c0: 6564 5f65 7665 6e74 735b 2d33 5d2e 6964  ed_events[-3].id
-0000b5d0: 203d 3d20 6576 656e 7433 2e69 640a 6173   == event3.id.as
-0000b5e0: 7365 7274 2072 6563 6569 7665 645f 6576  sert received_ev
-0000b5f0: 656e 7473 5b2d 325d 2e69 6420 3d3d 2065  ents[-2].id == e
-0000b600: 7665 6e74 342e 6964 0a61 7373 6572 7420  vent4.id.assert 
-0000b610: 7265 6365 6976 6564 5f65 7665 6e74 735b  received_events[
-0000b620: 2d31 5d2e 6964 203d 3d20 6576 656e 7435  -1].id == event5
-0000b630: 2e69 640a 0a0a 2320 4170 7065 6e64 206d  .id...# Append m
-0000b640: 6f72 6520 6576 656e 7473 2074 6f20 7468  ore events to th
-0000b650: 6520 7374 7265 616d 2e0a 6576 656e 7436  e stream..event6
-0000b660: 203d 204e 6577 4576 656e 7428 7479 7065   = NewEvent(type
-0000b670: 3d27 4f72 6465 7244 656c 6574 6564 272c  ='OrderDeleted',
-0000b680: 2064 6174 613d 6227 6461 7461 3627 290a   data=b'data6').
-0000b690: 636c 6965 6e74 2e61 7070 656e 645f 6576  client.append_ev
-0000b6a0: 656e 7473 280a 2020 2020 7374 7265 616d  ents(.    stream
-0000b6b0: 5f6e 616d 653d 7374 7265 616d 5f6e 616d  _name=stream_nam
-0000b6c0: 6532 2c0a 2020 2020 6578 7065 6374 6564  e2,.    expected
-0000b6d0: 5f70 6f73 6974 696f 6e3d 312c 0a20 2020  _position=1,.   
-0000b6e0: 2065 7665 6e74 733d 5b65 7665 6e74 365d   events=[event6]
-0000b6f0: 2c0a 290a 0a0a 2320 5265 7375 6d65 2073  ,.)...# Resume s
-0000b700: 7562 7363 7269 6269 6e67 2066 726f 6d20  ubscribing from 
-0000b710: 7468 6520 6c61 7374 2063 6f6d 6d69 7420  the last commit 
-0000b720: 706f 7369 7469 6f6e 2e0a 7375 6273 6372  position..subscr
-0000b730: 6970 7469 6f6e 203d 2063 6c69 656e 742e  iption = client.
-0000b740: 7375 6273 6372 6962 655f 616c 6c5f 6576  subscribe_all_ev
-0000b750: 656e 7473 280a 2020 2020 636f 6d6d 6974  ents(.    commit
-0000b760: 5f70 6f73 6974 696f 6e3d 6c61 7374 5f63  _position=last_c
-0000b770: 6f6d 6d69 745f 706f 7369 7469 6f6e 0a29  ommit_position.)
-0000b780: 0a0a 0a23 2043 6174 6368 2075 7020 6279  ...# Catch up by
-0000b790: 2072 6563 6569 7669 6e67 2074 6865 206e   receiving the n
-0000b7a0: 6577 2065 7665 6e74 2066 726f 6d20 7468  ew event from th
-0000b7b0: 6520 7375 6273 6372 6970 7469 6f6e 2e0a  e subscription..
-0000b7c0: 666f 7220 6576 656e 7420 696e 2073 7562  for event in sub
-0000b7d0: 7363 7269 7074 696f 6e3a 0a20 2020 2072  scription:.    r
-0000b7e0: 6563 6569 7665 645f 6576 656e 7473 2e61  eceived_events.a
-0000b7f0: 7070 656e 6428 6576 656e 7429 0a20 2020  ppend(event).   
-0000b800: 2069 6620 6576 656e 742e 6964 203d 3d20   if event.id == 
-0000b810: 6576 656e 7436 2e69 643a 0a20 2020 2020  event6.id:.     
-0000b820: 2020 2062 7265 616b 0a0a 6173 7365 7274     break..assert
-0000b830: 2072 6563 6569 7665 645f 6576 656e 7473   received_events
-0000b840: 5b2d 365d 2e69 6420 3d3d 2065 7665 6e74  [-6].id == event
-0000b850: 312e 6964 0a61 7373 6572 7420 7265 6365  1.id.assert rece
-0000b860: 6976 6564 5f65 7665 6e74 735b 2d35 5d2e  ived_events[-5].
-0000b870: 6964 203d 3d20 6576 656e 7432 2e69 640a  id == event2.id.
-0000b880: 6173 7365 7274 2072 6563 6569 7665 645f  assert received_
-0000b890: 6576 656e 7473 5b2d 345d 2e69 6420 3d3d  events[-4].id ==
-0000b8a0: 2065 7665 6e74 332e 6964 0a61 7373 6572   event3.id.asser
-0000b8b0: 7420 7265 6365 6976 6564 5f65 7665 6e74  t received_event
-0000b8c0: 735b 2d33 5d2e 6964 203d 3d20 6576 656e  s[-3].id == even
-0000b8d0: 7434 2e69 640a 6173 7365 7274 2072 6563  t4.id.assert rec
-0000b8e0: 6569 7665 645f 6576 656e 7473 5b2d 325d  eived_events[-2]
-0000b8f0: 2e69 6420 3d3d 2065 7665 6e74 352e 6964  .id == event5.id
-0000b900: 0a61 7373 6572 7420 7265 6365 6976 6564  .assert received
-0000b910: 5f65 7665 6e74 735b 2d31 5d2e 6964 203d  _events[-1].id =
-0000b920: 3d20 6576 656e 7436 2e69 640a 0a0a 2320  = event6.id...# 
-0000b930: 4170 7065 6e64 2074 6872 6565 206d 6f72  Append three mor
-0000b940: 6520 6576 656e 7473 2074 6f20 6120 6e65  e events to a ne
-0000b950: 7720 7374 7265 616d 2e0a 7374 7265 616d  w stream..stream
-0000b960: 5f6e 616d 6533 203d 2073 7472 2875 7569  _name3 = str(uui
-0000b970: 6434 2829 290a 6576 656e 7437 203d 204e  d4()).event7 = N
-0000b980: 6577 4576 656e 7428 7479 7065 3d27 4f72  ewEvent(type='Or
-0000b990: 6465 7243 7265 6174 6564 272c 2064 6174  derCreated', dat
-0000b9a0: 613d 6227 6461 7461 3727 290a 6576 656e  a=b'data7').even
-0000b9b0: 7438 203d 204e 6577 4576 656e 7428 7479  t8 = NewEvent(ty
-0000b9c0: 7065 3d27 4f72 6465 7255 7064 6174 6564  pe='OrderUpdated
-0000b9d0: 272c 2064 6174 613d 6227 6461 7461 3827  ', data=b'data8'
-0000b9e0: 290a 6576 656e 7439 203d 204e 6577 4576  ).event9 = NewEv
-0000b9f0: 656e 7428 7479 7065 3d27 4f72 6465 7244  ent(type='OrderD
-0000ba00: 656c 6574 6564 272c 2064 6174 613d 6227  eleted', data=b'
-0000ba10: 6461 7461 3927 290a 0a63 6c69 656e 742e  data9')..client.
-0000ba20: 6170 7065 6e64 5f65 7665 6e74 7328 0a20  append_events(. 
-0000ba30: 2020 2073 7472 6561 6d5f 6e61 6d65 3d73     stream_name=s
-0000ba40: 7472 6561 6d5f 6e61 6d65 332c 0a20 2020  tream_name3,.   
-0000ba50: 2065 7870 6563 7465 645f 706f 7369 7469   expected_positi
-0000ba60: 6f6e 3d4e 6f6e 652c 0a20 2020 2065 7665  on=None,.    eve
-0000ba70: 6e74 733d 5b65 7665 6e74 372c 2065 7665  nts=[event7, eve
-0000ba80: 6e74 382c 2065 7665 6e74 395d 2c0a 290a  nt8, event9],.).
-0000ba90: 0a23 2052 6563 6569 7665 2074 6865 2074  .# Receive the t
-0000baa0: 6872 6565 206e 6577 2065 7665 6e74 7320  hree new events 
-0000bab0: 6672 6f6d 2074 6865 2072 6573 756d 6564  from the resumed
-0000bac0: 2073 7562 7363 7269 7074 696f 6e2e 0a66   subscription..f
-0000bad0: 6f72 2065 7665 6e74 2069 6e20 7375 6273  or event in subs
-0000bae0: 6372 6970 7469 6f6e 3a0a 2020 2020 7265  cription:.    re
-0000baf0: 6365 6976 6564 5f65 7665 6e74 732e 6170  ceived_events.ap
-0000bb00: 7065 6e64 2865 7665 6e74 290a 2020 2020  pend(event).    
-0000bb10: 6966 2065 7665 6e74 2e69 6420 3d3d 2065  if event.id == e
-0000bb20: 7665 6e74 392e 6964 3a0a 2020 2020 2020  vent9.id:.      
-0000bb30: 2020 6272 6561 6b0a 0a61 7373 6572 7420    break..assert 
-0000bb40: 7265 6365 6976 6564 5f65 7665 6e74 735b  received_events[
-0000bb50: 2d39 5d2e 6964 203d 3d20 6576 656e 7431  -9].id == event1
-0000bb60: 2e69 640a 6173 7365 7274 2072 6563 6569  .id.assert recei
-0000bb70: 7665 645f 6576 656e 7473 5b2d 385d 2e69  ved_events[-8].i
-0000bb80: 6420 3d3d 2065 7665 6e74 322e 6964 0a61  d == event2.id.a
-0000bb90: 7373 6572 7420 7265 6365 6976 6564 5f65  ssert received_e
-0000bba0: 7665 6e74 735b 2d37 5d2e 6964 203d 3d20  vents[-7].id == 
-0000bbb0: 6576 656e 7433 2e69 640a 6173 7365 7274  event3.id.assert
-0000bbc0: 2072 6563 6569 7665 645f 6576 656e 7473   received_events
-0000bbd0: 5b2d 365d 2e69 6420 3d3d 2065 7665 6e74  [-6].id == event
-0000bbe0: 342e 6964 0a61 7373 6572 7420 7265 6365  4.id.assert rece
-0000bbf0: 6976 6564 5f65 7665 6e74 735b 2d35 5d2e  ived_events[-5].
-0000bc00: 6964 203d 3d20 6576 656e 7435 2e69 640a  id == event5.id.
-0000bc10: 6173 7365 7274 2072 6563 6569 7665 645f  assert received_
-0000bc20: 6576 656e 7473 5b2d 345d 2e69 6420 3d3d  events[-4].id ==
-0000bc30: 2065 7665 6e74 362e 6964 0a61 7373 6572   event6.id.asser
-0000bc40: 7420 7265 6365 6976 6564 5f65 7665 6e74  t received_event
-0000bc50: 735b 2d33 5d2e 6964 203d 3d20 6576 656e  s[-3].id == even
-0000bc60: 7437 2e69 640a 6173 7365 7274 2072 6563  t7.id.assert rec
-0000bc70: 6569 7665 645f 6576 656e 7473 5b2d 325d  eived_events[-2]
-0000bc80: 2e69 6420 3d3d 2065 7665 6e74 382e 6964  .id == event8.id
-0000bc90: 0a61 7373 6572 7420 7265 6365 6976 6564  .assert received
-0000bca0: 5f65 7665 6e74 735b 2d31 5d2e 6964 203d  _events[-1].id =
-0000bcb0: 3d20 6576 656e 7439 2e69 640a 6060 600a  = event9.id.```.
-0000bcc0: 0a54 6865 2063 6174 6368 2d75 7020 7375  .The catch-up su
-0000bcd0: 6273 6372 6970 7469 6f6e 2067 5250 4320  bscription gRPC 
-0000bce0: 6f70 6572 6174 696f 6e20 6973 2065 6e64  operation is end
-0000bcf0: 6564 2061 7320 736f 6f6e 2061 7320 7468  ed as soon as th
-0000bd00: 6520 7375 6273 6372 6970 7469 6f6e 206f  e subscription o
-0000bd10: 626a 6563 740a 676f 6573 206f 7574 206f  bject.goes out o
-0000bd20: 6620 7363 6f70 6520 6f72 2069 7320 6578  f scope or is ex
-0000bd30: 706c 6963 6974 6c79 2064 656c 6574 6564  plicitly deleted
-0000bd40: 2066 726f 6d20 6d65 6d6f 7279 2e0a 0a60   from memory...`
-0000bd50: 6060 7079 7468 6f6e 0a23 2045 6e64 2074  ``python.# End t
-0000bd60: 6865 2073 7562 7363 7269 7074 696f 6e2e  he subscription.
-0000bd70: 0a64 656c 2073 7562 7363 7269 7074 696f  .del subscriptio
-0000bd80: 6e0a 6060 600a 0a23 2323 2053 7562 7363  n.```..### Subsc
-0000bd90: 7269 6265 2073 7472 6561 6d20 6576 656e  ribe stream even
-0000bda0: 7473 0a0a 5468 6560 7375 6273 6372 6962  ts..The`subscrib
-0000bdb0: 655f 7374 7265 616d 5f65 7665 6e74 7328  e_stream_events(
-0000bdc0: 2960 206d 6574 686f 6420 6361 6e20 6265  )` method can be
-0000bdd0: 2075 7365 6420 746f 2073 7461 7274 2061   used to start a
-0000bde0: 2022 6361 7463 682d 7570 2220 7375 6273   "catch-up" subs
-0000bdf0: 6372 6970 7469 6f6e 0a74 6861 7420 6361  cription.that ca
-0000be00: 6e20 7265 7475 726e 2061 6c6c 2065 7665  n return all eve
-0000be10: 6e74 7320 696e 2061 2073 7472 6561 6d2e  nts in a stream.
-0000be20: 0a0a 5468 6973 206d 6574 686f 6420 7461  ..This method ta
-0000be30: 6b65 7320 6120 6073 7472 6561 6d5f 6e61  kes a `stream_na
-0000be40: 6d65 6020 6172 6775 6d65 6e74 2c20 7768  me` argument, wh
-0000be50: 6963 6820 7370 6563 6966 6965 7320 7468  ich specifies th
-0000be60: 6520 6e61 6d65 206f 6620 7468 6520 7374  e name of the st
-0000be70: 7265 616d 0a66 726f 6d20 7768 6963 6820  ream.from which 
-0000be80: 7265 636f 7264 6564 2065 7665 6e74 7320  recorded events 
-0000be90: 7769 6c6c 2062 6520 7265 6365 6976 6564  will be received
-0000bea0: 2e0a 0a54 6869 7320 6d65 7468 6f64 2074  ...This method t
-0000beb0: 616b 6573 2061 6e20 6f70 7469 6f6e 616c  akes an optional
-0000bec0: 2060 7374 7265 616d 5f70 6f73 6974 696f   `stream_positio
-0000bed0: 6e60 2061 7267 756d 656e 742c 2077 6869  n` argument, whi
-0000bee0: 6368 2073 7065 6369 6669 6573 2061 0a73  ch specifies a.s
-0000bef0: 7472 6561 6d20 706f 7369 7469 6f6e 2069  tream position i
-0000bf00: 6e20 7468 6520 7374 7265 616d 2066 726f  n the stream fro
-0000bf10: 6d20 7768 6963 6820 7265 636f 7264 6564  m which recorded
-0000bf20: 2065 7665 6e74 7320 7769 6c6c 2062 6520   events will be 
-0000bf30: 7265 6365 6976 6564 2e20 5468 650a 6576  received. The.ev
-0000bf40: 656e 7420 6174 2074 6865 2073 7065 6369  ent at the speci
-0000bf50: 6669 6564 2073 7472 6561 6d20 706f 7369  fied stream posi
-0000bf60: 7469 6f6e 2077 696c 6c20 6e6f 7420 6265  tion will not be
-0000bf70: 2069 6e63 6c75 6465 642e 0a0a 5468 6973   included...This
-0000bf80: 206d 6574 686f 6420 7461 6b65 7320 616e   method takes an
-0000bf90: 206f 7074 696f 6e61 6c20 6074 696d 656f   optional `timeo
-0000bfa0: 7574 6020 6172 6775 6d65 6e74 2c20 7768  ut` argument, wh
-0000bfb0: 6963 6820 6973 2061 2050 7974 686f 6e20  ich is a Python 
-0000bfc0: 6066 6c6f 6174 6020 7468 6174 2073 6574  `float` that set
-0000bfd0: 730a 6120 6465 6164 6c69 6e65 2066 6f72  s.a deadline for
-0000bfe0: 2074 6865 2063 6f6d 706c 6574 696f 6e20   the completion 
-0000bff0: 6f66 2074 6865 2067 5250 4320 6f70 6572  of the gRPC oper
-0000c000: 6174 696f 6e2e 0a0a 5468 6520 6578 616d  ation...The exam
-0000c010: 706c 6520 6265 6c6f 7720 7368 6f77 7320  ple below shows 
-0000c020: 686f 7720 746f 2073 7461 7274 2061 2063  how to start a c
-0000c030: 6174 6368 2d75 7020 7375 6273 6372 6970  atch-up subscrip
-0000c040: 7469 6f6e 2074 6f20 6120 7374 7265 616d  tion to a stream
-0000c050: 2e0a 0a60 6060 7079 7468 6f6e 0a0a 2320  ...```python..# 
-0000c060: 5375 6273 6372 6962 6520 746f 2065 7665  Subscribe to eve
-0000c070: 6e74 7320 6672 6f6d 2073 7472 6561 6d32  nts from stream2
-0000c080: 2c20 6672 6f6d 2074 6865 2073 7461 7274  , from the start
-0000c090: 2e0a 7375 6273 6372 6970 7469 6f6e 203d  ..subscription =
-0000c0a0: 2063 6c69 656e 742e 7375 6273 6372 6962   client.subscrib
-0000c0b0: 655f 7374 7265 616d 5f65 7665 6e74 7328  e_stream_events(
-0000c0c0: 7374 7265 616d 5f6e 616d 653d 7374 7265  stream_name=stre
-0000c0d0: 616d 5f6e 616d 6532 290a 0a23 2052 6561  am_name2)..# Rea
-0000c0e0: 6420 6672 6f6d 2074 6865 2073 7562 7363  d from the subsc
-0000c0f0: 7269 7074 696f 6e2e 0a65 7665 6e74 7320  ription..events 
-0000c100: 3d20 5b5d 0a66 6f72 2065 7665 6e74 2069  = [].for event i
-0000c110: 6e20 7375 6273 6372 6970 7469 6f6e 3a0a  n subscription:.
-0000c120: 2020 2020 6576 656e 7473 2e61 7070 656e      events.appen
-0000c130: 6428 6576 656e 7429 0a20 2020 2069 6620  d(event).    if 
-0000c140: 6576 656e 742e 6964 203d 3d20 6576 656e  event.id == even
-0000c150: 7436 2e69 643a 0a20 2020 2020 2020 2062  t6.id:.        b
-0000c160: 7265 616b 0a0a 2320 4368 6563 6b20 7765  reak..# Check we
-0000c170: 2067 6f74 2065 7665 6e74 7320 6f6e 6c79   got events only
-0000c180: 2066 726f 6d20 7374 7265 616d 322e 0a61   from stream2..a
-0000c190: 7373 6572 7420 6c65 6e28 6576 656e 7473  ssert len(events
-0000c1a0: 2920 3d3d 2033 0a65 7665 6e74 735b 305d  ) == 3.events[0]
-0000c1b0: 2e73 7472 6561 6d5f 6e61 6d65 203d 3d20  .stream_name == 
-0000c1c0: 7374 7265 616d 5f6e 616d 6532 0a65 7665  stream_name2.eve
-0000c1d0: 6e74 735b 315d 2e73 7472 6561 6d5f 6e61  nts[1].stream_na
-0000c1e0: 6d65 203d 3d20 7374 7265 616d 5f6e 616d  me == stream_nam
-0000c1f0: 6532 0a65 7665 6e74 735b 325d 2e73 7472  e2.events[2].str
-0000c200: 6561 6d5f 6e61 6d65 203d 3d20 7374 7265  eam_name == stre
-0000c210: 616d 5f6e 616d 6532 0a0a 2320 4170 7065  am_name2..# Appe
-0000c220: 6e64 2061 6e6f 7468 6572 2065 7665 6e74  nd another event
-0000c230: 2074 6f20 7374 7265 616d 332e 0a65 7665   to stream3..eve
-0000c240: 6e74 3130 203d 204e 6577 4576 656e 7428  nt10 = NewEvent(
-0000c250: 7479 7065 3d22 4f72 6465 7255 6e64 656c  type="OrderUndel
-0000c260: 6574 6564 222c 2064 6174 613d 6227 6461  eted", data=b'da
-0000c270: 7461 3130 2729 0a63 6c69 656e 742e 6170  ta10').client.ap
-0000c280: 7065 6e64 5f65 7665 6e74 7328 0a20 2020  pend_events(.   
-0000c290: 2073 7472 6561 6d5f 6e61 6d65 3d73 7472   stream_name=str
-0000c2a0: 6561 6d5f 6e61 6d65 332c 0a20 2020 2065  eam_name3,.    e
-0000c2b0: 7870 6563 7465 645f 706f 7369 7469 6f6e  xpected_position
-0000c2c0: 3d32 2c0a 2020 2020 6576 656e 7473 3d5b  =2,.    events=[
-0000c2d0: 6576 656e 7431 305d 2c0a 290a 0a23 2041  event10],.)..# A
-0000c2e0: 7070 656e 6420 616e 6f74 6865 7220 6576  ppend another ev
-0000c2f0: 656e 7420 746f 2073 7472 6561 6d32 2e0a  ent to stream2..
-0000c300: 6576 656e 7431 3120 3d20 4e65 7745 7665  event11 = NewEve
-0000c310: 6e74 2874 7970 653d 224f 7264 6572 556e  nt(type="OrderUn
-0000c320: 6465 6c65 7465 6422 2c20 6461 7461 3d62  deleted", data=b
-0000c330: 2764 6174 6131 3127 290a 636c 6965 6e74  'data11').client
-0000c340: 2e61 7070 656e 645f 6576 656e 7473 280a  .append_events(.
-0000c350: 2020 2020 7374 7265 616d 5f6e 616d 653d      stream_name=
-0000c360: 7374 7265 616d 5f6e 616d 6532 2c0a 2020  stream_name2,.  
-0000c370: 2020 6578 7065 6374 6564 5f70 6f73 6974    expected_posit
-0000c380: 696f 6e3d 322c 0a20 2020 2065 7665 6e74  ion=2,.    event
-0000c390: 733d 5b65 7665 6e74 3131 5d0a 290a 0a23  s=[event11].)..#
-0000c3a0: 2043 6f6e 7469 6e75 6520 7265 6164 696e   Continue readin
-0000c3b0: 6720 6672 6f6d 2074 6865 2073 7562 7363  g from the subsc
-0000c3c0: 7269 7074 696f 6e2e 0a66 6f72 2065 7665  ription..for eve
-0000c3d0: 6e74 2069 6e20 7375 6273 6372 6970 7469  nt in subscripti
-0000c3e0: 6f6e 3a0a 2020 2020 6576 656e 7473 2e61  on:.    events.a
-0000c3f0: 7070 656e 6428 6576 656e 7429 0a20 2020  ppend(event).   
-0000c400: 2069 6620 6576 656e 742e 6964 203d 3d20   if event.id == 
-0000c410: 6576 656e 7431 312e 6964 3a0a 2020 2020  event11.id:.    
-0000c420: 2020 2020 6272 6561 6b0a 0a23 2043 6865      break..# Che
-0000c430: 636b 2077 6520 676f 7420 6576 656e 7473  ck we got events
-0000c440: 206f 6e6c 7920 6672 6f6d 2073 7472 6561   only from strea
-0000c450: 6d32 2e0a 6173 7365 7274 206c 656e 2865  m2..assert len(e
-0000c460: 7665 6e74 7329 203d 3d20 340a 6576 656e  vents) == 4.even
-0000c470: 7473 5b30 5d2e 7374 7265 616d 5f6e 616d  ts[0].stream_nam
-0000c480: 6520 3d3d 2073 7472 6561 6d5f 6e61 6d65  e == stream_name
-0000c490: 320a 6576 656e 7473 5b31 5d2e 7374 7265  2.events[1].stre
-0000c4a0: 616d 5f6e 616d 6520 3d3d 2073 7472 6561  am_name == strea
-0000c4b0: 6d5f 6e61 6d65 320a 6576 656e 7473 5b32  m_name2.events[2
-0000c4c0: 5d2e 7374 7265 616d 5f6e 616d 6520 3d3d  ].stream_name ==
-0000c4d0: 2073 7472 6561 6d5f 6e61 6d65 320a 6576   stream_name2.ev
-0000c4e0: 656e 7473 5b33 5d2e 7374 7265 616d 5f6e  ents[3].stream_n
-0000c4f0: 616d 6520 3d3d 2073 7472 6561 6d5f 6e61  ame == stream_na
-0000c500: 6d65 320a 6060 600a 0a54 6865 2065 7861  me2.```..The exa
-0000c510: 6d70 6c65 2062 656c 6f77 2073 686f 7773  mple below shows
-0000c520: 2068 6f77 2074 6f20 7374 6172 7420 6120   how to start a 
-0000c530: 6361 7463 682d 7570 2073 7562 7363 7269  catch-up subscri
-0000c540: 7074 696f 6e20 746f 2061 2073 7472 6561  ption to a strea
-0000c550: 6d20 6672 6f6d 2061 0a73 7065 6369 6669  m from a.specifi
-0000c560: 6320 7374 7265 616d 2070 6f73 6974 696f  c stream positio
-0000c570: 6e2e 0a0a 6060 6070 7974 686f 6e0a 0a23  n...```python..#
-0000c580: 2053 7562 7363 7269 6265 2074 6f20 6576   Subscribe to ev
-0000c590: 656e 7473 2066 726f 6d20 7374 7265 616d  ents from stream
-0000c5a0: 322c 2066 726f 6d20 7468 6520 7374 6172  2, from the star
-0000c5b0: 742e 0a73 7562 7363 7269 7074 696f 6e20  t..subscription 
-0000c5c0: 3d20 636c 6965 6e74 2e73 7562 7363 7269  = client.subscri
-0000c5d0: 6265 5f73 7472 6561 6d5f 6576 656e 7473  be_stream_events
-0000c5e0: 280a 2020 2020 7374 7265 616d 5f6e 616d  (.    stream_nam
-0000c5f0: 653d 7374 7265 616d 5f6e 616d 6532 2c0a  e=stream_name2,.
-0000c600: 2020 2020 7374 7265 616d 5f70 6f73 6974      stream_posit
-0000c610: 696f 6e3d 312c 0a29 0a0a 2320 5265 6164  ion=1,.)..# Read
-0000c620: 2065 7665 6e74 2066 726f 6d20 7468 6520   event from the 
-0000c630: 7375 6273 6372 6970 7469 6f6e 2e0a 6576  subscription..ev
-0000c640: 656e 7473 203d 205b 5d0a 666f 7220 6576  ents = [].for ev
-0000c650: 656e 7420 696e 2073 7562 7363 7269 7074  ent in subscript
-0000c660: 696f 6e3a 0a20 2020 2065 7665 6e74 732e  ion:.    events.
-0000c670: 6170 7065 6e64 2865 7665 6e74 290a 2020  append(event).  
-0000c680: 2020 6966 2065 7665 6e74 2e69 6420 3d3d    if event.id ==
-0000c690: 2065 7665 6e74 3131 2e69 643a 0a20 2020   event11.id:.   
-0000c6a0: 2020 2020 2062 7265 616b 0a0a 2320 4368       break..# Ch
-0000c6b0: 6563 6b20 7765 2067 6f74 2065 7665 6e74  eck we got event
-0000c6c0: 7320 6f6e 6c79 2061 6674 6572 2070 6f73  s only after pos
-0000c6d0: 6974 696f 6e20 312e 0a61 7373 6572 7420  ition 1..assert 
-0000c6e0: 6c65 6e28 6576 656e 7473 2920 3d3d 2032  len(events) == 2
-0000c6f0: 0a65 7665 6e74 735b 305d 2e69 6420 3d3d  .events[0].id ==
-0000c700: 2065 7665 6e74 362e 6964 0a65 7665 6e74   event6.id.event
-0000c710: 735b 305d 2e73 7472 6561 6d5f 706f 7369  s[0].stream_posi
-0000c720: 7469 6f6e 203d 3d20 320a 6576 656e 7473  tion == 2.events
-0000c730: 5b30 5d2e 7374 7265 616d 5f6e 616d 6520  [0].stream_name 
-0000c740: 3d3d 2073 7472 6561 6d5f 6e61 6d65 320a  == stream_name2.
-0000c750: 6576 656e 7473 5b31 5d2e 6964 203d 3d20  events[1].id == 
-0000c760: 6576 656e 7431 312e 6964 0a65 7665 6e74  event11.id.event
-0000c770: 735b 315d 2e73 7472 6561 6d5f 706f 7369  s[1].stream_posi
-0000c780: 7469 6f6e 203d 3d20 330a 6576 656e 7473  tion == 3.events
-0000c790: 5b31 5d2e 7374 7265 616d 5f6e 616d 6520  [1].stream_name 
-0000c7a0: 3d3d 2073 7472 6561 6d5f 6e61 6d65 320a  == stream_name2.
-0000c7b0: 6060 600a 0a23 2320 5065 7273 6973 7465  ```..## Persiste
-0000c7c0: 6e74 2073 7562 7363 7269 7074 696f 6e73  nt subscriptions
-0000c7d0: 0a0a 2323 2320 4372 6561 7465 2073 7562  ..### Create sub
-0000c7e0: 7363 7269 7074 696f 6e0a 0a54 6865 206d  scription..The m
-0000c7f0: 6574 686f 6420 6063 7265 6174 655f 7375  ethod `create_su
-0000c800: 6273 6372 6970 7469 6f6e 2829 6020 6361  bscription()` ca
-0000c810: 6e20 6265 2075 7365 6420 746f 2063 7265  n be used to cre
-0000c820: 6174 6520 610a 2270 6572 7369 7374 656e  ate a."persisten
-0000c830: 7420 7375 6273 6372 6970 7469 6f6e 2220  t subscription" 
-0000c840: 746f 2045 7665 6e74 5374 6f72 6544 422e  to EventStoreDB.
-0000c850: 0a0a 5468 6973 206d 6574 686f 6420 7461  ..This method ta
-0000c860: 6b65 7320 6120 7265 7175 6972 6564 2060  kes a required `
-0000c870: 6772 6f75 705f 6e61 6d65 6020 6172 6775  group_name` argu
-0000c880: 6d65 6e74 2c20 7768 6963 6820 6973 2074  ment, which is t
-0000c890: 6865 0a6e 616d 6520 6f66 2061 2022 6772  he.name of a "gr
-0000c8a0: 6f75 7022 206f 6620 636f 6e73 756d 6572  oup" of consumer
-0000c8b0: 7320 6f66 2074 6865 2073 7562 7363 7269  s of the subscri
-0000c8c0: 7074 696f 6e2e 0a0a 5468 6973 206d 6574  ption...This met
-0000c8d0: 686f 6420 7461 6b65 7320 616e 206f 7074  hod takes an opt
-0000c8e0: 696f 6e61 6c20 6066 726f 6d5f 656e 6460  ional `from_end`
-0000c8f0: 2061 7267 756d 656e 742c 2077 6869 6368   argument, which
-0000c900: 2063 616e 2062 650a 7573 6564 2074 6f20   can be.used to 
-0000c910: 7370 6563 6966 7920 7468 6174 2074 6865  specify that the
-0000c920: 2067 726f 7570 206f 6620 636f 6e73 756d   group of consum
-0000c930: 6572 7320 6f66 2074 6865 2073 7562 7363  ers of the subsc
-0000c940: 7269 7074 696f 6e20 7368 6f75 6c64 0a6f  ription should.o
-0000c950: 6e6c 7920 7265 6365 6976 6520 6576 656e  nly receive even
-0000c960: 7473 2074 6861 7420 7765 7265 2072 6563  ts that were rec
-0000c970: 6f72 6465 6420 6166 7465 7220 7468 6520  orded after the 
-0000c980: 7375 6273 6372 6970 7469 6f6e 2077 6173  subscription was
-0000c990: 2063 7265 6174 6564 2e0a 0a54 6869 7320   created...This 
-0000c9a0: 6d65 7468 6f64 2074 616b 6573 2061 6e20  method takes an 
-0000c9b0: 6f70 7469 6f6e 616c 2060 636f 6d6d 6974  optional `commit
-0000c9c0: 5f70 6f73 6974 696f 6e60 2061 7267 756d  _position` argum
-0000c9d0: 656e 742c 2077 6869 6368 2063 616e 2062  ent, which can b
-0000c9e0: 650a 7573 6564 2074 6f20 7370 6563 6966  e.used to specif
-0000c9f0: 7920 6120 636f 6d6d 6974 2070 6f73 6974  y a commit posit
-0000ca00: 696f 6e20 6672 6f6d 2077 6869 6368 2074  ion from which t
-0000ca10: 6865 2067 726f 7570 206f 6620 636f 6e73  he group of cons
-0000ca20: 756d 6572 7320 6f66 0a74 6865 2073 7562  umers of.the sub
-0000ca30: 7363 7269 7074 696f 6e20 7368 6f75 6c64  scription should
-0000ca40: 2072 6563 6569 7665 2065 7665 6e74 732e   receive events.
-0000ca50: 2050 6c65 6173 6520 6e6f 7465 2c20 7468   Please note, th
-0000ca60: 6520 7265 636f 7264 6564 2065 7665 6e74  e recorded event
-0000ca70: 0a61 7420 7468 6520 7370 6563 6966 6965  .at the specifie
-0000ca80: 6420 636f 6d6d 6974 2070 6f73 6974 696f  d commit positio
-0000ca90: 6e20 4d41 5920 6265 2069 6e63 6c75 6465  n MAY be include
-0000caa0: 6420 696e 2074 6865 2072 6563 6f72 6465  d in the recorde
-0000cab0: 6420 6576 656e 7473 0a72 6563 6569 7665  d events.receive
-0000cac0: 6420 6279 2074 6865 2067 726f 7570 206f  d by the group o
-0000cad0: 6620 636f 6e73 756d 6572 732e 0a0a 4966  f consumers...If
-0000cae0: 206e 6569 7468 6572 2060 6672 6f6d 5f65   neither `from_e
-0000caf0: 6e64 6020 6f72 2060 636f 6d6d 6974 5f70  nd` or `commit_p
-0000cb00: 6f73 6974 696f 6e60 2061 7265 2073 7065  osition` are spe
-0000cb10: 6369 6669 6564 2c20 7468 6520 6772 6f75  cified, the grou
-0000cb20: 7020 6f66 2063 6f6e 7375 6d65 7273 0a6f  p of consumers.o
-0000cb30: 6620 7468 6520 7375 6273 6372 6970 7469  f the subscripti
-0000cb40: 6f6e 2077 696c 6c20 7265 6365 6976 6520  on will receive 
-0000cb50: 616c 6c20 7265 636f 7264 6564 2065 7665  all recorded eve
-0000cb60: 6e74 732e 0a0a 5468 6973 206d 6574 686f  nts...This metho
-0000cb70: 6420 616c 736f 2074 616b 6573 206f 7074  d also takes opt
-0000cb80: 696f 6e20 6066 696c 7465 725f 6578 636c  ion `filter_excl
-0000cb90: 7564 6560 2c20 6066 696c 7465 725f 696e  ude`, `filter_in
-0000cba0: 636c 7564 6560 0a61 7267 756d 656e 7473  clude`.arguments
-0000cbb0: 2c20 7768 6963 6820 776f 726b 2069 6e20  , which work in 
-0000cbc0: 7468 6520 7361 6d65 2077 6179 2061 7320  the same way as 
-0000cbd0: 7468 6579 2064 6f20 696e 2074 6865 2060  they do in the `
-0000cbe0: 7375 6273 6372 6962 655f 616c 6c5f 6576  subscribe_all_ev
-0000cbf0: 656e 7473 2829 600a 6d65 7468 6f64 2e0a  ents()`.method..
-0000cc00: 0a54 6869 7320 6d65 7468 6f64 2061 6c73  .This method als
-0000cc10: 6f20 7461 6b65 7320 616e 206f 7074 696f  o takes an optio
-0000cc20: 6e61 6c20 6074 696d 656f 7574 6020 6172  nal `timeout` ar
-0000cc30: 6775 6d65 6e74 2c20 7468 6174 0a69 7320  gument, that.is 
-0000cc40: 6578 7065 6374 6564 2074 6f20 6265 2061  expected to be a
-0000cc50: 2050 7974 686f 6e20 6066 6c6f 6174 602c   Python `float`,
-0000cc60: 2077 6869 6368 2073 6574 7320 6120 6465   which sets a de
-0000cc70: 6164 6c69 6e65 0a66 6f72 2074 6865 2063  adline.for the c
-0000cc80: 6f6d 706c 6574 696f 6e20 6f66 2074 6865  ompletion of the
-0000cc90: 2067 5250 4320 6f70 6572 6174 696f 6e2e   gRPC operation.
-0000cca0: 0a0a 5468 6520 6d65 7468 6f64 2060 6372  ..The method `cr
-0000ccb0: 6561 7465 5f73 7562 7363 7269 7074 696f  eate_subscriptio
-0000ccc0: 6e28 2960 2064 6f65 7320 6e6f 7420 7265  n()` does not re
-0000ccd0: 7475 726e 2061 2076 616c 7565 2c20 6265  turn a value, be
-0000cce0: 6361 7573 650a 7265 636f 7264 6564 2065  cause.recorded e
-0000ccf0: 7665 6e74 7320 6172 6520 6f62 7461 696e  vents are obtain
-0000cd00: 6564 2062 7920 7468 6520 6772 6f75 7020  ed by the group 
-0000cd10: 6f66 2063 6f6e 7375 6d65 7273 206f 6620  of consumers of 
-0000cd20: 7468 6520 7375 6273 6372 6970 7469 6f6e  the subscription
-0000cd30: 0a75 7369 6e67 2074 6865 2060 7265 6164  .using the `read
-0000cd40: 5f73 7562 7363 7269 7074 696f 6e28 2960  _subscription()`
-0000cd50: 206d 6574 686f 642e 0a0a 2a50 6c65 6173   method...*Pleas
-0000cd60: 6520 6e6f 7465 2c20 696e 2074 6869 7320  e note, in this 
-0000cd70: 7665 7273 696f 6e20 6f66 2074 6869 7320  version of this 
-0000cd80: 636c 6965 6e74 2074 6865 2022 636f 6e73  client the "cons
-0000cd90: 756d 6572 2073 7472 6174 6567 7922 2069  umer strategy" i
-0000cda0: 730a 7365 7420 746f 2022 4469 7370 6174  s.set to "Dispat
-0000cdb0: 6368 546f 5369 6e67 6c65 222e 2053 7570  chToSingle". Sup
-0000cdc0: 706f 7274 2066 6f72 2063 686f 6f73 696e  port for choosin
-0000cdd0: 6720 6f74 6865 7220 636f 6e73 756d 6572  g other consumer
-0000cde0: 2073 7472 6174 6567 6965 730a 7375 7070   strategies.supp
-0000cdf0: 6f72 7465 6420 6279 2045 7665 6e74 5374  orted by EventSt
-0000ce00: 6f72 6544 4220 7769 6c6c 2069 6e20 6675  oreDB will in fu
-0000ce10: 7475 7265 2062 6520 7375 7070 6f72 7465  ture be supporte
-0000ce20: 6420 696e 2074 6869 7320 636c 6965 6e74  d in this client
-0000ce30: 2e2a 0a0a 496e 2074 6865 2065 7861 6d70  .*..In the examp
-0000ce40: 6c65 2062 656c 6f77 2c20 6120 7065 7273  le below, a pers
-0000ce50: 6973 7465 6e74 2073 7562 7363 7269 7074  istent subscript
-0000ce60: 696f 6e20 6973 2063 7265 6174 6564 2e0a  ion is created..
-0000ce70: 0a60 6060 7079 7468 6f6e 0a23 2043 7265  .```python.# Cre
-0000ce80: 6174 6520 6120 7065 7273 6973 7465 6e74  ate a persistent
-0000ce90: 2073 7562 7363 7269 7074 696f 6e2e 0a67   subscription..g
-0000cea0: 726f 7570 5f6e 616d 6520 3d20 6622 6772  roup_name = f"gr
-0000ceb0: 6f75 702d 7b75 7569 6434 2829 7d22 0a63  oup-{uuid4()}".c
-0000cec0: 6c69 656e 742e 6372 6561 7465 5f73 7562  lient.create_sub
-0000ced0: 7363 7269 7074 696f 6e28 6772 6f75 705f  scription(group_
-0000cee0: 6e61 6d65 3d67 726f 7570 5f6e 616d 6529  name=group_name)
-0000cef0: 0a60 6060 0a0a 2323 2320 5265 6164 2073  .```..### Read s
-0000cf00: 7562 7363 7269 7074 696f 6e0a 0a54 6865  ubscription..The
-0000cf10: 206d 6574 686f 6420 6072 6561 645f 7375   method `read_su
-0000cf20: 6273 6372 6970 7469 6f6e 2829 6020 6361  bscription()` ca
-0000cf30: 6e20 6265 2075 7365 6420 6279 2061 2067  n be used by a g
-0000cf40: 726f 7570 206f 6620 636f 6e73 756d 6572  roup of consumer
-0000cf50: 7320 746f 2072 6563 6569 7665 0a72 6563  s to receive.rec
-0000cf60: 6f72 6465 6420 6576 656e 7473 2066 726f  orded events fro
-0000cf70: 6d20 6120 7065 7273 6973 7465 6e74 2073  m a persistent s
-0000cf80: 7562 7363 7269 7074 696f 6e20 6372 6561  ubscription crea
-0000cf90: 7465 6420 7573 696e 6720 6063 7265 6174  ted using `creat
-0000cfa0: 655f 7375 6273 6372 6970 7469 6f6e 602e  e_subscription`.
-0000cfb0: 0a0a 5468 6973 206d 6574 686f 6420 7461  ..This method ta
-0000cfc0: 6b65 7320 6120 7265 7175 6972 6564 2060  kes a required `
-0000cfd0: 6772 6f75 705f 6e61 6d65 6020 6172 6775  group_name` argu
-0000cfe0: 6d65 6e74 2c20 7768 6963 6820 6973 0a74  ment, which is.t
-0000cff0: 6865 206e 616d 6520 6f66 2061 2022 6772  he name of a "gr
-0000d000: 6f75 7022 206f 6620 636f 6e73 756d 6572  oup" of consumer
-0000d010: 7320 6f66 2074 6865 2073 7562 7363 7269  s of the subscri
-0000d020: 7074 696f 6e20 7370 6563 6966 6965 640a  ption specified.
-0000d030: 7768 656e 2060 6372 6561 7465 5f73 7562  when `create_sub
-0000d040: 7363 7269 7074 696f 6e28 2960 2077 6173  scription()` was
-0000d050: 2063 616c 6c65 642e 0a0a 5468 6973 206d   called...This m
-0000d060: 6574 686f 6420 616c 736f 2074 616b 6573  ethod also takes
-0000d070: 2061 6e20 6f70 7469 6f6e 616c 2060 7469   an optional `ti
-0000d080: 6d65 6f75 7460 2061 7267 756d 656e 742c  meout` argument,
-0000d090: 2074 6861 740a 6973 2065 7870 6563 7465   that.is expecte
-0000d0a0: 6420 746f 2062 6520 6120 5079 7468 6f6e  d to be a Python
-0000d0b0: 2060 666c 6f61 7460 2c20 7768 6963 6820   `float`, which 
-0000d0c0: 7365 7473 2061 2064 6561 646c 696e 650a  sets a deadline.
-0000d0d0: 666f 7220 7468 6520 636f 6d70 6c65 7469  for the completi
-0000d0e0: 6f6e 206f 6620 7468 6520 6752 5043 206f  on of the gRPC o
-0000d0f0: 7065 7261 7469 6f6e 2e0a 0a54 6869 7320  peration...This 
-0000d100: 6d65 7468 6f64 2072 6574 7572 6e73 2061  method returns a
-0000d110: 2032 2d74 7570 6c65 3a20 6120 2272 6561   2-tuple: a "rea
-0000d120: 6420 7265 7175 6573 7422 206f 626a 6563  d request" objec
-0000d130: 7420 616e 6420 6120 2272 6561 6420 7265  t and a "read re
-0000d140: 7370 6f6e 7365 2220 6f62 6a65 6374 2e0a  sponse" object..
-0000d150: 0a60 6060 7079 7468 6f6e 0a72 6561 645f  .```python.read_
-0000d160: 7265 712c 2072 6561 645f 7265 7370 203d  req, read_resp =
-0000d170: 2063 6c69 656e 742e 7265 6164 5f73 7562   client.read_sub
-0000d180: 7363 7269 7074 696f 6e28 6772 6f75 705f  scription(group_
-0000d190: 6e61 6d65 3d67 726f 7570 5f6e 616d 6529  name=group_name)
-0000d1a0: 0a60 6060 0a0a 5468 6520 2272 6561 6420  .```..The "read 
-0000d1b0: 7265 7370 6f6e 7365 2220 6f62 6a65 6374  response" object
-0000d1c0: 2069 7320 616e 2069 7465 7261 746f 7220   is an iterator 
-0000d1d0: 7468 6174 2079 6965 6c64 7320 7265 636f  that yields reco
-0000d1e0: 7264 6564 2065 7665 6e74 7320 6672 6f6d  rded events from
-0000d1f0: 0a74 6865 2073 7065 6369 6669 6564 2063  .the specified c
-0000d200: 6f6d 6d69 7420 706f 7369 7469 6f6e 2e0a  ommit position..
-0000d210: 0a54 6865 2022 7265 6164 2072 6571 7565  .The "read reque
-0000d220: 7374 2220 6f62 6a65 6374 2068 6173 2061  st" object has a
-0000d230: 6e20 6061 636b 2829 6020 6d65 7468 6f64  n `ack()` method
-0000d240: 2074 6861 7420 6361 6e20 6265 2075 7365   that can be use
-0000d250: 6420 6279 2061 2063 6f6e 7375 6d65 720a  d by a consumer.
-0000d260: 696e 2061 2067 726f 7570 2074 6f20 6163  in a group to ac
-0000d270: 6b6e 6f77 6c65 6467 6520 746f 2074 6865  knowledge to the
-0000d280: 2073 6572 7665 7220 7468 6174 2069 7420   server that it 
-0000d290: 6861 7320 7265 6365 6976 6564 2061 6e64  has received and
-0000d2a0: 2073 7563 6365 7373 6675 6c6c 790a 7072   successfully.pr
-0000d2b0: 6f63 6573 7365 6420 6120 7265 636f 7264  ocessed a record
-0000d2c0: 6564 2065 7665 6e74 2e20 5468 6973 2077  ed event. This w
-0000d2d0: 696c 6c20 7072 6576 656e 7420 7468 6174  ill prevent that
-0000d2e0: 2072 6563 6f72 6465 6420 6576 656e 7420   recorded event 
-0000d2f0: 6265 696e 6720 7265 6365 6976 6564 0a62  being received.b
-0000d300: 7920 616e 6f74 6865 7220 636f 6e73 756d  y another consum
-0000d310: 6572 2069 6e20 7468 6520 7361 6d65 2067  er in the same g
-0000d320: 726f 7570 2e20 5468 6520 6061 636b 2829  roup. The `ack()
-0000d330: 6020 6d65 7468 6f64 2074 616b 6573 2061  ` method takes a
-0000d340: 6e20 6065 7665 6e74 5f69 6460 0a61 7267  n `event_id`.arg
-0000d350: 756d 656e 742c 2077 6869 6368 2069 7320  ument, which is 
-0000d360: 7468 6520 4944 206f 6620 7468 6520 7265  the ID of the re
-0000d370: 636f 7264 6564 2065 7665 6e74 2074 6861  corded event tha
-0000d380: 7420 6861 7320 6265 656e 2072 6563 6569  t has been recei
-0000d390: 7665 642e 0a0a 5468 6520 6578 616d 706c  ved...The exampl
-0000d3a0: 6520 6265 6c6f 7720 6974 6572 6174 6573  e below iterates
-0000d3b0: 206f 7665 7220 7468 6520 2272 6561 6420   over the "read 
-0000d3c0: 7265 7370 6f6e 7365 2220 6f62 6a65 6374  response" object
-0000d3d0: 2c20 616e 6420 6361 6c6c 7320 6061 636b  , and calls `ack
-0000d3e0: 2829 600a 6f6e 2074 6865 2022 7265 6164  ()`.on the "read
-0000d3f0: 2072 6573 706f 6e73 6522 206f 626a 6563   response" objec
-0000d400: 742e 2054 6865 2066 6f72 206c 6f6f 7020  t. The for loop 
-0000d410: 6272 6561 6b73 2077 6865 6e20 7765 2068  breaks when we h
-0000d420: 6176 6520 7265 6365 6976 6564 0a74 6865  ave received.the
-0000d430: 206c 6173 7420 6576 656e 742c 2073 6f20   last event, so 
-0000d440: 7468 6174 2077 6520 6361 6e20 636f 6e74  that we can cont
-0000d450: 696e 7565 2077 6974 6820 7468 6520 6578  inue with the ex
-0000d460: 616d 706c 6573 2062 656c 6f77 2e0a 0a60  amples below...`
-0000d470: 6060 7079 7468 6f6e 0a65 7665 6e74 7320  ``python.events 
-0000d480: 3d20 5b5d 0a66 6f72 2065 7665 6e74 2069  = [].for event i
-0000d490: 6e20 7265 6164 5f72 6573 703a 0a20 2020  n read_resp:.   
-0000d4a0: 2065 7665 6e74 732e 6170 7065 6e64 2865   events.append(e
-0000d4b0: 7665 6e74 290a 0a20 2020 2023 2041 636b  vent)..    # Ack
-0000d4c0: 6e6f 776c 6564 6765 2074 6865 2072 6563  nowledge the rec
-0000d4d0: 6569 7665 6420 6576 656e 742e 0a20 2020  eived event..   
-0000d4e0: 2072 6561 645f 7265 712e 6163 6b28 6576   read_req.ack(ev
-0000d4f0: 656e 745f 6964 3d65 7665 6e74 2e69 6429  ent_id=event.id)
-0000d500: 0a0a 2020 2020 2320 4272 6561 6b20 7768  ..    # Break wh
-0000d510: 656e 2074 6865 206c 6173 7420 6576 656e  en the last even
-0000d520: 7420 6861 7320 6265 656e 2072 6563 6569  t has been recei
-0000d530: 7665 642e 0a20 2020 2069 6620 6576 656e  ved..    if even
-0000d540: 742e 6964 203d 3d20 6576 656e 7431 312e  t.id == event11.
-0000d550: 6964 3a0a 2020 2020 2020 2020 6272 6561  id:.        brea
-0000d560: 6b0a 6060 600a 0a54 6865 2072 6563 6569  k.```..The recei
-0000d570: 7665 6420 6576 656e 7473 2061 7265 2074  ved events are t
-0000d580: 6865 2065 7665 6e74 7320 7765 2061 7070  he events we app
-0000d590: 656e 6465 6420 6162 6f76 652e 0a0a 6060  ended above...``
-0000d5a0: 6070 7974 686f 6e0a 6173 7365 7274 2065  `python.assert e
-0000d5b0: 7665 6e74 735b 2d31 315d 2e69 6420 3d3d  vents[-11].id ==
-0000d5c0: 2065 7665 6e74 312e 6964 0a61 7373 6572   event1.id.asser
-0000d5d0: 7420 6576 656e 7473 5b2d 3130 5d2e 6964  t events[-10].id
-0000d5e0: 203d 3d20 6576 656e 7432 2e69 640a 6173   == event2.id.as
-0000d5f0: 7365 7274 2065 7665 6e74 735b 2d39 5d2e  sert events[-9].
-0000d600: 6964 203d 3d20 6576 656e 7433 2e69 640a  id == event3.id.
-0000d610: 6173 7365 7274 2065 7665 6e74 735b 2d38  assert events[-8
-0000d620: 5d2e 6964 203d 3d20 6576 656e 7434 2e69  ].id == event4.i
-0000d630: 640a 6173 7365 7274 2065 7665 6e74 735b  d.assert events[
-0000d640: 2d37 5d2e 6964 203d 3d20 6576 656e 7435  -7].id == event5
-0000d650: 2e69 640a 6173 7365 7274 2065 7665 6e74  .id.assert event
-0000d660: 735b 2d36 5d2e 6964 203d 3d20 6576 656e  s[-6].id == even
-0000d670: 7436 2e69 640a 6173 7365 7274 2065 7665  t6.id.assert eve
-0000d680: 6e74 735b 2d35 5d2e 6964 203d 3d20 6576  nts[-5].id == ev
-0000d690: 656e 7437 2e69 640a 6173 7365 7274 2065  ent7.id.assert e
-0000d6a0: 7665 6e74 735b 2d34 5d2e 6964 203d 3d20  vents[-4].id == 
-0000d6b0: 6576 656e 7438 2e69 640a 6173 7365 7274  event8.id.assert
-0000d6c0: 2065 7665 6e74 735b 2d33 5d2e 6964 203d   events[-3].id =
-0000d6d0: 3d20 6576 656e 7439 2e69 640a 6173 7365  = event9.id.asse
-0000d6e0: 7274 2065 7665 6e74 735b 2d32 5d2e 6964  rt events[-2].id
-0000d6f0: 203d 3d20 6576 656e 7431 302e 6964 0a61   == event10.id.a
-0000d700: 7373 6572 7420 6576 656e 7473 5b2d 315d  ssert events[-1]
-0000d710: 2e69 6420 3d3d 2065 7665 6e74 3131 2e69  .id == event11.i
-0000d720: 640a 6060 600a 0a54 6865 2022 7265 6164  d.```..The "read
-0000d730: 2072 6571 7565 7374 2220 6f62 6a65 6374   request" object
-0000d740: 2061 6c73 6f20 6861 7320 616e 2060 6e61   also has an `na
-0000d750: 636b 2829 6020 6d65 7468 6f64 2074 6861  ck()` method tha
-0000d760: 7420 6361 6e20 6265 2075 7365 6420 6279  t can be used by
-0000d770: 2061 2063 6f6e 7375 6d65 720a 696e 2061   a consumer.in a
-0000d780: 2067 726f 7570 2074 6f20 6163 6b6e 6f77   group to acknow
-0000d790: 6c65 6467 6520 746f 2074 6865 2073 6572  ledge to the ser
-0000d7a0: 7665 7220 7468 6174 2069 7420 6861 7320  ver that it has 
-0000d7b0: 6661 696c 6564 2073 7563 6365 7373 6675  failed successfu
-0000d7c0: 6c6c 7920 746f 0a70 726f 6365 7373 2061  lly to.process a
-0000d7d0: 2072 6563 6f72 6465 6420 6576 656e 742e   recorded event.
-0000d7e0: 2054 6869 7320 7769 6c6c 2061 6c6c 6f77   This will allow
-0000d7f0: 2074 6861 7420 7265 636f 7264 6564 2065   that recorded e
-0000d800: 7665 6e74 2074 6f20 6265 2072 6563 6569  vent to be recei
-0000d810: 7665 640a 6279 2074 6869 7320 6f72 2061  ved.by this or a
-0000d820: 6e6f 7468 6572 2063 6f6e 7375 6d65 7220  nother consumer 
-0000d830: 696e 2074 6865 2073 616d 6520 6772 6f75  in the same grou
-0000d840: 702e 0a0a 4974 206d 6967 6874 2062 6520  p...It might be 
-0000d850: 6d6f 7265 2075 7365 6675 6c20 746f 2065  more useful to e
-0000d860: 6e63 6170 7375 6c61 7465 2074 6865 2072  ncapsulate the r
-0000d870: 6571 7565 7374 2061 6e64 2072 6573 706f  equest and respo
-0000d880: 6e73 6520 6f62 6a65 6374 7320 616e 6420  nse objects and 
-0000d890: 746f 2069 7465 7261 7465 0a6f 7665 7220  to iterate.over 
-0000d8a0: 7468 6520 2272 6561 6420 7265 7370 6f6e  the "read respon
-0000d8b0: 7365 2220 696e 2061 2073 6570 6172 6174  se" in a separat
-0000d8c0: 6520 7468 7265 6164 2c20 746f 2063 616c  e thread, to cal
-0000d8d0: 6c20 6261 636b 2074 6f20 6120 6861 6e64  l back to a hand
-0000d8e0: 6c65 7220 6675 6e63 7469 6f6e 2077 6865  ler function whe
-0000d8f0: 6e0a 6120 7265 636f 7264 6564 2065 7665  n.a recorded eve
-0000d900: 6e74 2069 7320 7265 6365 6976 6564 2c20  nt is received, 
-0000d910: 616e 6420 6361 6c6c 2060 6163 6b28 2960  and call `ack()`
-0000d920: 2069 6620 7468 6520 6861 6e64 6c65 7220   if the handler 
-0000d930: 646f 6573 206e 6f74 2072 6169 7365 2061  does not raise a
-0000d940: 6e0a 6578 6365 7074 696f 6e2c 2061 6e64  n.exception, and
-0000d950: 2074 6f20 6361 6c6c 2060 6e61 636b 2829   to call `nack()
-0000d960: 6020 6966 2061 6e20 6578 6365 7074 696f  ` if an exceptio
-0000d970: 6e20 6973 2072 6169 7365 642e 2054 6865  n is raised. The
-0000d980: 2065 7861 6d70 6c65 2062 656c 6f77 2073   example below s
-0000d990: 686f 7773 2068 6f77 0a74 6869 7320 6d69  hows how.this mi
-0000d9a0: 6768 7420 6265 2064 6f6e 652e 0a0a 6060  ght be done...``
-0000d9b0: 6070 7974 686f 6e0a 6672 6f6d 2074 6872  `python.from thr
-0000d9c0: 6561 6469 6e67 2069 6d70 6f72 7420 5468  eading import Th
-0000d9d0: 7265 6164 0a0a 0a63 6c61 7373 2053 7562  read...class Sub
-0000d9e0: 7363 7269 7074 696f 6e52 6561 6465 723a  scriptionReader:
-0000d9f0: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
-0000da00: 5f28 7365 6c66 2c20 636c 6965 6e74 2c20  _(self, client, 
-0000da10: 6772 6f75 705f 6e61 6d65 2c20 6361 6c6c  group_name, call
-0000da20: 6261 636b 293a 0a20 2020 2020 2020 2073  back):.        s
-0000da30: 656c 662e 636c 6965 6e74 203d 2063 6c69  elf.client = cli
-0000da40: 656e 740a 2020 2020 2020 2020 7365 6c66  ent.        self
-0000da50: 2e67 726f 7570 5f6e 616d 6520 3d20 6772  .group_name = gr
-0000da60: 6f75 705f 6e61 6d65 0a20 2020 2020 2020  oup_name.       
-0000da70: 2073 656c 662e 6361 6c6c 6261 636b 203d   self.callback =
-0000da80: 2063 616c 6c62 6163 6b0a 2020 2020 2020   callback.      
-0000da90: 2020 7365 6c66 2e74 6872 6561 6420 3d20    self.thread = 
-0000daa0: 5468 7265 6164 2874 6172 6765 743d 7365  Thread(target=se
-0000dab0: 6c66 2e72 6561 645f 7375 6273 6372 6970  lf.read_subscrip
-0000dac0: 7469 6f6e 2c20 6461 656d 6f6e 3d54 7275  tion, daemon=Tru
-0000dad0: 6529 0a20 2020 2020 2020 2073 656c 662e  e).        self.
-0000dae0: 6572 726f 7220 3d20 4e6f 6e65 0a0a 2020  error = None..  
-0000daf0: 2020 6465 6620 7374 6172 7428 7365 6c66    def start(self
-0000db00: 293a 0a20 2020 2020 2020 2073 656c 662e  ):.        self.
-0000db10: 7468 7265 6164 2e73 7461 7274 2829 0a0a  thread.start()..
-0000db20: 2020 2020 6465 6620 6a6f 696e 2873 656c      def join(sel
-0000db30: 6629 3a0a 2020 2020 2020 2020 7365 6c66  f):.        self
-0000db40: 2e74 6872 6561 642e 6a6f 696e 2829 0a0a  .thread.join()..
-0000db50: 2020 2020 6465 6620 7265 6164 5f73 7562      def read_sub
-0000db60: 7363 7269 7074 696f 6e28 7365 6c66 293a  scription(self):
-0000db70: 0a20 2020 2020 2020 2072 6571 2c20 7265  .        req, re
-0000db80: 7370 203d 2073 656c 662e 636c 6965 6e74  sp = self.client
-0000db90: 2e72 6561 645f 7375 6273 6372 6970 7469  .read_subscripti
-0000dba0: 6f6e 2867 726f 7570 5f6e 616d 653d 7365  on(group_name=se
-0000dbb0: 6c66 2e67 726f 7570 5f6e 616d 6529 0a20  lf.group_name). 
-0000dbc0: 2020 2020 2020 2066 6f72 2065 7665 6e74         for event
-0000dbd0: 2069 6e20 7265 7370 3a0a 2020 2020 2020   in resp:.      
-0000dbe0: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
-0000dbf0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000dc00: 6361 6c6c 6261 636b 2865 7665 6e74 290a  callback(event).
-0000dc10: 2020 2020 2020 2020 2020 2020 6578 6365              exce
-0000dc20: 7074 2045 7863 6570 7469 6f6e 2061 7320  pt Exception as 
-0000dc30: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0000dc40: 2020 2023 2072 6571 2e6e 6163 6b28 6576     # req.nack(ev
-0000dc50: 656e 742e 6964 2920 2023 206e 6f74 2079  ent.id)  # not y
-0000dc60: 6574 2069 6d70 6c65 6d65 6e74 6564 2e2e  et implemented..
-0000dc70: 2e2e 0a20 2020 2020 2020 2020 2020 2020  ...             
-0000dc80: 2020 2073 656c 662e 6572 726f 7220 3d20     self.error = 
-0000dc90: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-0000dca0: 2020 6272 6561 6b0a 2020 2020 2020 2020    break.        
-0000dcb0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0000dcc0: 2020 2020 2020 2020 2020 7265 712e 6163            req.ac
-0000dcd0: 6b28 6576 656e 742e 6964 290a 0a0a 2320  k(event.id)...# 
-0000dce0: 4372 6561 7465 2061 6e6f 7468 6572 2070  Create another p
-0000dcf0: 6572 7369 7374 656e 7420 7375 6273 6372  ersistent subscr
-0000dd00: 6970 7469 6f6e 2e0a 6772 6f75 705f 6e61  iption..group_na
-0000dd10: 6d65 203d 2066 2267 726f 7570 2d7b 7575  me = f"group-{uu
-0000dd20: 6964 3428 297d 220a 636c 6965 6e74 2e63  id4()}".client.c
-0000dd30: 7265 6174 655f 7375 6273 6372 6970 7469  reate_subscripti
-0000dd40: 6f6e 2867 726f 7570 5f6e 616d 653d 6772  on(group_name=gr
-0000dd50: 6f75 705f 6e61 6d65 290a 0a65 7665 6e74  oup_name)..event
-0000dd60: 7320 3d20 5b5d 0a0a 6465 6620 6861 6e64  s = []..def hand
-0000dd70: 6c65 5f65 7665 6e74 2865 7665 6e74 293a  le_event(event):
-0000dd80: 0a20 2020 2065 7665 6e74 732e 6170 7065  .    events.appe
-0000dd90: 6e64 2865 7665 6e74 290a 2020 2020 6966  nd(event).    if
-0000dda0: 2065 7665 6e74 2e69 6420 3d3d 2065 7665   event.id == eve
-0000ddb0: 6e74 3131 2e69 643a 0a20 2020 2020 2020  nt11.id:.       
-0000ddc0: 2072 6169 7365 2045 7863 6570 7469 6f6e   raise Exception
-0000ddd0: 2829 0a0a 0a72 6561 6465 7220 3d20 5375  ()...reader = Su
-0000dde0: 6273 6372 6970 7469 6f6e 5265 6164 6572  bscriptionReader
-0000ddf0: 280a 2020 2020 636c 6965 6e74 3d63 6c69  (.    client=cli
-0000de00: 656e 742c 0a20 2020 2067 726f 7570 5f6e  ent,.    group_n
-0000de10: 616d 653d 6772 6f75 705f 6e61 6d65 2c0a  ame=group_name,.
-0000de20: 2020 2020 6361 6c6c 6261 636b 3d68 616e      callback=han
-0000de30: 646c 655f 6576 656e 740a 290a 0a72 6561  dle_event.)..rea
-0000de40: 6465 722e 7374 6172 7428 290a 7265 6164  der.start().read
-0000de50: 6572 2e6a 6f69 6e28 290a 0a61 7373 6572  er.join()..asser
-0000de60: 7420 6576 656e 7473 5b2d 315d 2e69 6420  t events[-1].id 
-0000de70: 3d3d 2065 7665 6e74 3131 2e69 640a 6060  == event11.id.``
-0000de80: 600a 0a50 6c65 6173 6520 6e6f 7465 2c20  `..Please note, 
-0000de90: 7768 656e 2070 726f 6365 7373 696e 6720  when processing 
-0000dea0: 6576 656e 7473 2069 6e20 6120 646f 776e  events in a down
-0000deb0: 7374 7265 616d 2063 6f6d 706f 6e65 6e74  stream component
-0000dec0: 2c20 7468 6520 636f 6d6d 6974 2070 6f73  , the commit pos
-0000ded0: 6974 696f 6e20 6f66 0a74 6865 206c 6173  ition of.the las
-0000dee0: 7420 7375 6363 6573 7366 756c 6c79 2070  t successfully p
-0000def0: 726f 6365 7373 6564 2065 7665 6e74 2069  rocessed event i
-0000df00: 7320 7573 6566 756c 6c79 2072 6563 6f72  s usefully recor
-0000df10: 6465 6420 6279 2074 6865 2064 6f77 6e73  ded by the downs
-0000df20: 7472 6561 6d20 636f 6d70 6f6e 656e 740a  tream component.
-0000df30: 736f 2074 6861 7420 7468 6520 636f 6d6d  so that the comm
-0000df40: 6974 2070 6f73 6974 696f 6e20 6361 6e20  it position can 
-0000df50: 6265 2064 6574 6572 6d69 6e65 6420 6279  be determined by
-0000df60: 2074 6865 2064 6f77 6e73 7472 6561 6d20   the downstream 
-0000df70: 636f 6d70 6f6e 656e 7420 6672 6f6d 2069  component from i
-0000df80: 7473 206f 776e 0a72 6563 6f72 6465 6420  ts own.recorded 
-0000df90: 7768 656e 2069 7420 6973 2072 6573 7461  when it is resta
-0000dfa0: 7274 6564 2e20 5468 6973 2063 6f6d 6d69  rted. This commi
-0000dfb0: 7420 706f 7369 7469 6f6e 2063 616e 2062  t position can b
-0000dfc0: 6520 7573 6564 2074 6f20 7370 6563 6966  e used to specif
-0000dfd0: 7920 7468 6520 636f 6d6d 6974 0a70 6f73  y the commit.pos
-0000dfe0: 6974 696f 6e20 6672 6f6d 2077 6869 6368  ition from which
-0000dff0: 2074 6f20 7375 6273 6372 6962 652e 2053   to subscribe. S
-0000e000: 696e 6365 2074 6869 7320 636f 6d6d 6974  ince this commit
-0000e010: 2070 6f73 6974 696f 6e20 7265 7072 6573   position repres
-0000e020: 656e 7473 2074 6865 2070 6f73 6974 696f  ents the positio
-0000e030: 6e20 6f66 0a74 6865 206c 6173 7420 7375  n of.the last su
-0000e040: 6363 6573 7366 756c 6c79 2070 726f 6365  ccessfully proce
-0000e050: 7373 6564 2065 7665 6e74 2069 6e20 6120  ssed event in a 
-0000e060: 646f 776e 7374 7265 616d 2063 6f6d 706f  downstream compo
-0000e070: 6e65 6e74 2c20 736f 2069 7420 7769 6c6c  nent, so it will
-0000e080: 2062 6520 7573 7561 6c20 746f 0a77 616e   be usual to.wan
-0000e090: 7420 746f 2072 6561 6420 6672 6f6d 2074  t to read from t
-0000e0a0: 6865 206e 6578 7420 6576 656e 7420 6166  he next event af
-0000e0b0: 7465 7220 7468 6973 2070 6f73 6974 696f  ter this positio
-0000e0c0: 6e2c 2062 6563 6175 7365 2074 6861 7420  n, because that 
-0000e0d0: 6973 2074 6865 206e 6578 7420 6576 656e  is the next even
-0000e0e0: 740a 7468 6174 206e 6565 6473 2074 6f20  t.that needs to 
-0000e0f0: 6265 2070 726f 6365 7373 6564 2e20 486f  be processed. Ho
-0000e100: 7765 7665 722c 2077 6865 6e20 7375 6273  wever, when subs
-0000e110: 6372 6962 696e 6720 666f 7220 6576 656e  cribing for even
-0000e120: 7473 2075 7369 6e67 2061 2070 6572 7369  ts using a persi
-0000e130: 7374 656e 740a 7375 6273 6372 6970 7469  stent.subscripti
-0000e140: 6f6e 2069 6e20 4576 656e 7453 746f 7265  on in EventStore
-0000e150: 4442 2c20 7468 6520 6576 656e 7420 6174  DB, the event at
-0000e160: 2074 6865 2073 7065 6369 6669 6564 2063   the specified c
-0000e170: 6f6d 6d69 7420 706f 7369 7469 6f6e 204d  ommit position M
-0000e180: 4159 2062 6520 7265 7475 726e 6564 0a61  AY be returned.a
-0000e190: 7320 7468 6520 6669 7273 7420 6576 656e  s the first even
-0000e1a0: 7420 696e 2074 6865 2072 6563 6569 7665  t in the receive
-0000e1b0: 6420 7365 7175 656e 6365 206f 6620 7265  d sequence of re
-0000e1c0: 636f 7264 6564 2065 7665 6e74 732c 2061  corded events, a
-0000e1d0: 6e64 2073 6f20 6974 206d 6179 0a62 6520  nd so it may.be 
-0000e1e0: 6e65 6365 7373 6172 7920 746f 2063 6865  necessary to che
-0000e1f0: 636b 2074 6865 2063 6f6d 6d69 7420 706f  ck the commit po
-0000e200: 7369 7469 6f6e 206f 6620 7468 6520 7265  sition of the re
-0000e210: 6365 6976 6564 2065 7665 6e74 7320 616e  ceived events an
-0000e220: 6420 746f 2064 6973 6361 7264 0a61 6e79  d to discard.any
-0000e230: 2020 7265 636f 7264 6564 2065 7665 6e74    recorded event
-0000e240: 206f 626a 6563 7420 7468 6174 2068 6173   object that has
-0000e250: 2061 2063 6f6d 6d69 7420 706f 7369 7469   a commit positi
-0000e260: 6f6e 2065 7175 616c 2074 6f20 7468 6520  on equal to the 
-0000e270: 636f 6d6d 6974 2070 6f73 6974 696f 6e0a  commit position.
-0000e280: 7370 6563 6966 6965 6420 696e 2074 6865  specified in the
-0000e290: 2072 6571 7565 7374 2e0a 0a57 6869 6c73   request...Whils
-0000e2a0: 7420 7468 6572 6520 6172 6520 736f 6d65  t there are some
-0000e2b0: 2061 6476 616e 7461 6765 7320 6f66 2070   advantages of p
-0000e2c0: 6572 7369 7374 656e 7420 7375 6273 6372  ersistent subscr
-0000e2d0: 6970 7469 6f6e 732c 2069 6e20 7061 7274  iptions, in part
-0000e2e0: 6963 756c 6172 2074 6865 0a70 726f 6365  icular the.proce
-0000e2f0: 7373 696e 6720 6f66 2072 6563 6f72 6465  ssing of recorde
-0000e300: 6420 6576 656e 7473 2062 7920 6120 6772  d events by a gr
-0000e310: 6f75 7020 6f66 2063 6f6e 7375 6d65 7273  oup of consumers
-0000e320: 2c20 6279 2074 7261 636b 696e 6720 696e  , by tracking in
-0000e330: 2074 6865 0a75 7073 7472 6561 6d20 7365   the.upstream se
-0000e340: 7276 6572 2074 6865 2070 6f73 6974 696f  rver the positio
-0000e350: 6e20 696e 2074 6865 2063 6f6d 6d69 7420  n in the commit 
-0000e360: 7365 7175 656e 6365 206f 6620 6576 656e  sequence of even
-0000e370: 7473 2074 6861 7420 6861 7665 2062 6565  ts that have bee
-0000e380: 6e20 7072 6f63 6573 7365 642c 0a74 6865  n processed,.the
-0000e390: 7265 2069 7320 6120 6461 6e67 6572 206f  re is a danger o
-0000e3a0: 6620 2264 7561 6c20 7772 6974 696e 6722  f "dual writing"
-0000e3b0: 2069 6e20 7468 6520 636f 6e73 756d 7074   in the consumpt
-0000e3c0: 696f 6e20 6f66 2065 7665 6e74 732e 2052  ion of events. R
-0000e3d0: 656c 6961 6269 6c69 7479 0a69 6e20 7072  eliability.in pr
-0000e3e0: 6f63 6573 7369 6e67 206f 6620 7265 636f  ocessing of reco
-0000e3f0: 7264 6564 2065 7665 6e74 7320 6279 2061  rded events by a
-0000e400: 2067 726f 7570 206f 6620 636f 6e73 756d   group of consum
-0000e410: 6572 7320 7769 6c6c 2072 656c 7920 696e  ers will rely in
-0000e420: 7374 6561 6420 6f6e 0a69 6465 6d70 6f74  stead on.idempot
-0000e430: 656e 7420 6861 6e64 6c69 6e67 206f 6620  ent handling of 
-0000e440: 6475 706c 6963 6174 6520 6d65 7373 6167  duplicate messag
-0000e450: 6573 2c20 616e 6420 7265 7369 6c69 656e  es, and resilien
-0000e460: 6365 2074 6f20 6f75 742d 6f66 2d6f 7264  ce to out-of-ord
-0000e470: 6572 2064 656c 6976 6572 792e 0a0a 2323  er delivery...##
-0000e480: 2320 4765 7420 7375 6273 6372 6970 7469  # Get subscripti
-0000e490: 6f6e 2069 6e66 6f0a 0a54 6865 2060 6765  on info..The `ge
-0000e4a0: 745f 7375 6273 6372 6970 7469 6f6e 5f69  t_subscription_i
-0000e4b0: 6e66 6f28 2960 206d 6574 686f 6420 6361  nfo()` method ca
-0000e4c0: 6e20 6265 2075 7365 6420 746f 2067 6574  n be used to get
-0000e4d0: 2069 6e66 6f72 6d61 7469 6f6e 2066 6f72   information for
-0000e4e0: 2061 0a70 6572 7369 7374 656e 7420 7375   a.persistent su
-0000e4f0: 6273 6372 6970 7469 6f6e 2e0a 0a54 6869  bscription...Thi
-0000e500: 7320 6d65 7468 6f64 2068 6173 206f 6e65  s method has one
-0000e510: 2072 6571 7569 7265 6420 6172 6775 6d65   required argume
-0000e520: 6e74 2c20 6067 726f 7570 5f6e 616d 6560  nt, `group_name`
-0000e530: 2c20 7768 6963 680a 7368 6f75 6c64 206d  , which.should m
-0000e540: 6174 6368 2074 6865 2076 616c 7565 206f  atch the value o
-0000e550: 6620 7468 6520 6172 6775 6d65 6e74 2075  f the argument u
-0000e560: 7365 6420 7768 656e 2063 616c 6c69 6e67  sed when calling
-0000e570: 2060 6372 6561 7465 5f73 7562 7363 7269   `create_subscri
-0000e580: 7074 696f 6e28 2960 2e0a 0a54 6869 7320  ption()`...This 
-0000e590: 6d65 7468 6f64 2061 6c73 6f20 7461 6b65  method also take
-0000e5a0: 7320 616e 206f 7074 696f 6e61 6c20 6074  s an optional `t
-0000e5b0: 696d 656f 7574 6020 6172 6775 6d65 6e74  imeout` argument
-0000e5c0: 2c20 7468 6174 0a69 7320 6578 7065 6374  , that.is expect
-0000e5d0: 6564 2074 6f20 6265 2061 2050 7974 686f  ed to be a Pytho
-0000e5e0: 6e20 6066 6c6f 6174 602c 2077 6869 6368  n `float`, which
-0000e5f0: 2073 6574 7320 6120 6465 6164 6c69 6e65   sets a deadline
-0000e600: 0a66 6f72 2074 6865 2063 6f6d 706c 6574  .for the complet
-0000e610: 696f 6e20 6f66 2074 6865 2067 5250 4320  ion of the gRPC 
-0000e620: 6f70 6572 6174 696f 6e2e 0a0a 6060 6070  operation...```p
-0000e630: 7974 686f 6e0a 7375 6273 6372 6970 7469  ython.subscripti
-0000e640: 6f6e 5f69 6e66 6f20 3d20 636c 6965 6e74  on_info = client
-0000e650: 2e67 6574 5f73 7562 7363 7269 7074 696f  .get_subscriptio
-0000e660: 6e5f 696e 666f 280a 2020 2020 6772 6f75  n_info(.    grou
-0000e670: 705f 6e61 6d65 3d67 726f 7570 5f6e 616d  p_name=group_nam
-0000e680: 652c 0a29 0a60 6060 0a0a 5468 6520 7265  e,.).```..The re
-0000e690: 7475 726e 6564 2076 616c 7565 2069 7320  turned value is 
-0000e6a0: 6120 6053 7562 7363 7269 7074 696f 6e49  a `SubscriptionI
-0000e6b0: 6e66 6f60 206f 626a 6563 742e 0a0a 2323  nfo` object...##
-0000e6c0: 2320 4c69 7374 2073 7562 7363 7269 7074  # List subscript
-0000e6d0: 696f 6e73 0a0a 5468 6520 606c 6973 745f  ions..The `list_
-0000e6e0: 7375 6273 6372 6970 7469 6f6e 7328 2960  subscriptions()`
-0000e6f0: 206d 6574 686f 6420 6361 6e20 6265 2075   method can be u
-0000e700: 7365 6420 746f 2067 6574 2069 6e66 6f72  sed to get infor
-0000e710: 6d61 7469 6f6e 2066 6f72 2061 6c6c 0a65  mation for all.e
-0000e720: 7869 7374 696e 6720 7065 7273 6973 7465  xisting persiste
-0000e730: 6e74 2073 7562 7363 7269 7074 696f 6e73  nt subscriptions
-0000e740: 2e0a 0a54 6869 7320 6d65 7468 6f64 2074  ...This method t
-0000e750: 616b 6573 2061 6e20 6f70 7469 6f6e 616c  akes an optional
-0000e760: 2060 7469 6d65 6f75 7460 2061 7267 756d   `timeout` argum
-0000e770: 656e 742c 2074 6861 740a 6973 2065 7870  ent, that.is exp
-0000e780: 6563 7465 6420 746f 2062 6520 6120 5079  ected to be a Py
-0000e790: 7468 6f6e 2060 666c 6f61 7460 2c20 7768  thon `float`, wh
-0000e7a0: 6963 6820 7365 7473 2061 2064 6561 646c  ich sets a deadl
-0000e7b0: 696e 650a 666f 7220 7468 6520 636f 6d70  ine.for the comp
-0000e7c0: 6c65 7469 6f6e 206f 6620 7468 6520 6752  letion of the gR
-0000e7d0: 5043 206f 7065 7261 7469 6f6e 2e0a 0a60  PC operation...`
-0000e7e0: 6060 7079 7468 6f6e 0a73 7562 7363 7269  ``python.subscri
-0000e7f0: 7074 696f 6e73 203d 2063 6c69 656e 742e  ptions = client.
-0000e800: 6c69 7374 5f73 7562 7363 7269 7074 696f  list_subscriptio
-0000e810: 6e73 2829 0a60 6060 0a0a 5468 6520 7265  ns().```..The re
-0000e820: 7475 726e 6564 2076 616c 7565 2069 7320  turned value is 
-0000e830: 6120 6c69 7374 206f 6620 6053 7562 7363  a list of `Subsc
-0000e840: 7269 7074 696f 6e49 6e66 6f60 206f 626a  riptionInfo` obj
-0000e850: 6563 7473 2e0a 0a23 2323 2044 656c 6574  ects...### Delet
-0000e860: 6520 7375 6273 6372 6970 7469 6f6e 0a0a  e subscription..
-0000e870: 5468 6520 6064 656c 6574 655f 7375 6273  The `delete_subs
-0000e880: 6372 6970 7469 6f6e 2829 6020 6d65 7468  cription()` meth
-0000e890: 6f64 2063 616e 2062 6520 7573 6564 2074  od can be used t
-0000e8a0: 6f20 6465 6c65 7465 2061 2070 6572 7369  o delete a persi
-0000e8b0: 7374 656e 740a 7375 6273 6372 6970 7469  stent.subscripti
-0000e8c0: 6f6e 2e0a 0a54 6869 7320 6d65 7468 6f64  on...This method
-0000e8d0: 2068 6173 206f 6e65 2072 6571 7569 7265   has one require
-0000e8e0: 6420 6172 6775 6d65 6e74 2c20 6067 726f  d argument, `gro
-0000e8f0: 7570 5f6e 616d 6560 2c20 7768 6963 680a  up_name`, which.
-0000e900: 7368 6f75 6c64 206d 6174 6368 2074 6865  should match the
-0000e910: 2076 616c 7565 206f 6620 6172 6775 6d65   value of argume
-0000e920: 6e74 2075 7365 6420 7768 656e 2063 616c  nt used when cal
-0000e930: 6c69 6e67 2060 6372 6561 7465 5f73 7562  ling `create_sub
-0000e940: 7363 7269 7074 696f 6e28 2960 2e0a 0a54  scription()`...T
-0000e950: 6869 7320 6d65 7468 6f64 2061 6c73 6f20  his method also 
-0000e960: 7461 6b65 7320 616e 206f 7074 696f 6e61  takes an optiona
-0000e970: 6c20 6074 696d 656f 7574 6020 6172 6775  l `timeout` argu
-0000e980: 6d65 6e74 2c20 7468 6174 0a69 7320 6578  ment, that.is ex
-0000e990: 7065 6374 6564 2074 6f20 6265 2061 2050  pected to be a P
-0000e9a0: 7974 686f 6e20 6066 6c6f 6174 602c 2077  ython `float`, w
-0000e9b0: 6869 6368 2073 6574 7320 6120 6465 6164  hich sets a dead
-0000e9c0: 6c69 6e65 0a66 6f72 2074 6865 2063 6f6d  line.for the com
-0000e9d0: 706c 6574 696f 6e20 6f66 2074 6865 2067  pletion of the g
-0000e9e0: 5250 4320 6f70 6572 6174 696f 6e2e 0a0a  RPC operation...
-0000e9f0: 6060 6070 7974 686f 6e0a 636c 6965 6e74  ```python.client
-0000ea00: 2e64 656c 6574 655f 7375 6273 6372 6970  .delete_subscrip
-0000ea10: 7469 6f6e 280a 2020 2020 6772 6f75 705f  tion(.    group_
-0000ea20: 6e61 6d65 3d67 726f 7570 5f6e 616d 652c  name=group_name,
-0000ea30: 0a29 0a60 6060 0a0a 2323 2320 4372 6561  .).```..### Crea
-0000ea40: 7465 2073 7472 6561 6d20 7375 6273 6372  te stream subscr
-0000ea50: 6970 7469 6f6e 0a0a 5468 6520 6063 7265  iption..The `cre
-0000ea60: 6174 655f 7374 7265 616d 5f73 7562 7363  ate_stream_subsc
-0000ea70: 7269 7074 696f 6e28 2960 206d 6574 686f  ription()` metho
-0000ea80: 6420 6361 6e20 6265 2075 7365 6420 746f  d can be used to
-0000ea90: 2063 7265 6174 6520 6120 7065 7273 6973   create a persis
-0000eaa0: 7465 6e74 0a73 7562 7363 7269 7074 696f  tent.subscriptio
-0000eab0: 6e20 666f 7220 6120 7374 7265 616d 2e0a  n for a stream..
-0000eac0: 0a54 6869 7320 6d65 7468 6f64 2068 6173  .This method has
-0000ead0: 2074 776f 2072 6571 7569 7265 6420 6172   two required ar
-0000eae0: 6775 6d65 6e74 732c 2060 6772 6f75 705f  guments, `group_
-0000eaf0: 6e61 6d65 6020 616e 6420 6073 7472 6561  name` and `strea
-0000eb00: 6d5f 6e61 6d65 602e 2054 6865 0a60 6772  m_name`. The.`gr
-0000eb10: 6f75 705f 6e61 6d65 6020 6172 6775 6d65  oup_name` argume
-0000eb20: 6e74 206e 616d 6573 2074 6865 2067 726f  nt names the gro
-0000eb30: 7570 206f 6620 636f 6e73 756d 6572 7320  up of consumers 
-0000eb40: 7468 6174 2077 696c 6c20 7265 6365 6976  that will receiv
-0000eb50: 6520 6576 656e 7473 0a66 726f 6d20 7468  e events.from th
-0000eb60: 6973 2073 7562 7363 7269 7074 696f 6e2e  is subscription.
-0000eb70: 2054 6865 2060 7374 7265 616d 5f6e 616d   The `stream_nam
-0000eb80: 6560 2061 7267 756d 656e 7420 7370 6563  e` argument spec
-0000eb90: 6966 6965 7320 7768 6963 6820 7374 7265  ifies which stre
-0000eba0: 616d 0a74 6865 2073 7562 7363 7269 7074  am.the subscript
-0000ebb0: 696f 6e20 7769 6c6c 2066 6f6c 6c6f 772e  ion will follow.
-0000ebc0: 2054 6865 2076 616c 7565 7320 6f66 2062   The values of b
-0000ebd0: 6f74 6820 7468 6573 6520 6172 6775 6d65  oth these argume
-0000ebe0: 6e74 7320 6172 6520 6578 7065 6374 6564  nts are expected
-0000ebf0: 0a74 6f20 6265 2050 7974 686f 6e20 6073  .to be Python `s
-0000ec00: 7472 6020 6f62 6a65 6374 732e 0a0a 5468  tr` objects...Th
-0000ec10: 6973 206d 6574 686f 6420 6861 7320 616e  is method has an
-0000ec20: 206f 7074 696f 6e61 6c20 6073 7472 6561   optional `strea
-0000ec30: 6d5f 706f 7369 7469 6f6e 6020 6172 6775  m_position` argu
-0000ec40: 6d65 6e74 2c20 7768 6963 6820 7370 6563  ment, which spec
-0000ec50: 6966 6965 7320 610a 7374 7265 616d 2070  ifies a.stream p
-0000ec60: 6f73 6974 696f 6e20 6672 6f6d 2077 6869  osition from whi
-0000ec70: 6368 2074 6f20 7375 6273 6372 6962 652e  ch to subscribe.
-0000ec80: 2054 6865 2072 6563 6f72 6465 6420 6576   The recorded ev
-0000ec90: 656e 7420 6174 2074 6869 7320 7374 7265  ent at this stre
-0000eca0: 616d 0a70 6f73 6974 696f 6e20 7769 6c6c  am.position will
-0000ecb0: 2062 6520 7265 6365 6976 6564 2077 6865   be received whe
-0000ecc0: 6e20 7265 6164 696e 6720 7468 6520 7375  n reading the su
-0000ecd0: 6273 6372 6970 7469 6f6e 2e0a 0a54 6869  bscription...Thi
-0000ece0: 7320 6d65 7468 6f64 2068 6173 2061 6e20  s method has an 
-0000ecf0: 6f70 7469 6f6e 616c 2060 6672 6f6d 5f65  optional `from_e
-0000ed00: 6e64 6020 6172 6775 6d65 6e74 2c20 7768  nd` argument, wh
-0000ed10: 6963 6820 6973 2061 2050 7974 686f 6e20  ich is a Python 
-0000ed20: 6062 6f6f 6c60 2e0a 4279 2064 6566 6175  `bool`..By defau
-0000ed30: 6c74 2c20 7468 6520 7661 6c75 6520 6f66  lt, the value of
-0000ed40: 2074 6869 7320 6172 6775 6d65 6e74 2069   this argument i
-0000ed50: 7320 4661 6c73 652e 2049 6620 7468 6973  s False. If this
-0000ed60: 2061 7267 756d 656e 7420 6973 2073 6574   argument is set
-0000ed70: 0a74 6f20 6120 5472 7565 2076 616c 7565  .to a True value
-0000ed80: 2c20 7265 6164 696e 6720 6672 6f6d 2074  , reading from t
-0000ed90: 6865 2073 7562 7363 7269 7074 696f 6e20  he subscription 
-0000eda0: 7769 6c6c 2072 6563 6569 7665 206f 6e6c  will receive onl
-0000edb0: 7920 6576 656e 7473 0a72 6563 6f72 6465  y events.recorde
-0000edc0: 6420 6166 7465 7220 7468 6520 7375 6273  d after the subs
-0000edd0: 6372 6970 7469 6f6e 2077 6173 2063 7265  cription was cre
-0000ede0: 6174 6564 2e20 5468 6174 2069 732c 2069  ated. That is, i
-0000edf0: 7420 6973 206e 6f74 2069 6e63 6c75 7369  t is not inclusi
-0000ee00: 7665 0a6f 6620 7468 6520 6375 7272 656e  ve.of the curren
-0000ee10: 7420 7374 7265 616d 2070 6f73 6974 696f  t stream positio
-0000ee20: 6e2e 0a0a 5468 6973 206d 6574 686f 6420  n...This method 
-0000ee30: 616c 736f 2074 616b 6573 2061 6e20 6f70  also takes an op
-0000ee40: 7469 6f6e 616c 2060 7469 6d65 6f75 7460  tional `timeout`
-0000ee50: 2061 7267 756d 656e 742c 2074 6861 740a   argument, that.
-0000ee60: 6973 2065 7870 6563 7465 6420 746f 2062  is expected to b
-0000ee70: 6520 6120 5079 7468 6f6e 2060 666c 6f61  e a Python `floa
-0000ee80: 7460 2c20 7768 6963 6820 7365 7473 2061  t`, which sets a
-0000ee90: 2064 6561 646c 696e 650a 666f 7220 7468   deadline.for th
-0000eea0: 6520 636f 6d70 6c65 7469 6f6e 206f 6620  e completion of 
-0000eeb0: 7468 6520 6752 5043 206f 7065 7261 7469  the gRPC operati
-0000eec0: 6f6e 2e0a 0a54 6869 7320 6d65 7468 6f64  on...This method
-0000eed0: 2064 6f65 7320 6e6f 7420 7265 7475 726e   does not return
-0000eee0: 2061 2076 616c 7565 2e20 4576 656e 7473   a value. Events
-0000eef0: 2063 616e 2062 6520 7265 6365 6976 6564   can be received
-0000ef00: 2062 7920 6974 6572 6174 696e 670a 6f76   by iterating.ov
-0000ef10: 6572 2074 6865 2076 616c 7565 2072 6574  er the value ret
-0000ef20: 7572 6e65 6420 6279 2063 616c 6c69 6e67  urned by calling
-0000ef30: 2060 7265 6164 5f73 7472 6561 6d5f 7375   `read_stream_su
-0000ef40: 6273 6372 6970 7469 6f6e 2829 6020 2873  bscription()` (s
-0000ef50: 6565 2062 656c 6f77 292e 0a0a 5468 6520  ee below)...The 
-0000ef60: 6578 616d 706c 6520 6265 6c6f 7720 6372  example below cr
-0000ef70: 6561 7465 7320 6120 7065 7273 6973 7465  eates a persiste
-0000ef80: 6e74 2073 7472 6561 6d20 7375 6273 6372  nt stream subscr
-0000ef90: 6970 7469 6f6e 2066 726f 6d20 7468 6520  iption from the 
-0000efa0: 7374 6172 7420 6f66 2074 6865 2073 7472  start of the str
-0000efb0: 6561 6d2e 0a0a 6060 6070 7974 686f 6e0a  eam...```python.
-0000efc0: 2320 4372 6561 7465 2061 2070 6572 7369  # Create a persi
-0000efd0: 7374 656e 7420 7374 7265 616d 2073 7562  stent stream sub
-0000efe0: 7363 7269 7074 696f 6e20 6672 6f6d 2073  scription from s
-0000eff0: 7461 7274 206f 6620 7468 6520 7374 7265  tart of the stre
-0000f000: 616d 2e0a 6772 6f75 705f 6e61 6d65 3120  am..group_name1 
-0000f010: 3d20 6622 6772 6f75 702d 7b75 7569 6434  = f"group-{uuid4
-0000f020: 2829 7d22 0a63 6c69 656e 742e 6372 6561  ()}".client.crea
-0000f030: 7465 5f73 7472 6561 6d5f 7375 6273 6372  te_stream_subscr
-0000f040: 6970 7469 6f6e 280a 2020 2020 6772 6f75  iption(.    grou
-0000f050: 705f 6e61 6d65 3d67 726f 7570 5f6e 616d  p_name=group_nam
-0000f060: 6531 2c0a 2020 2020 7374 7265 616d 5f6e  e1,.    stream_n
-0000f070: 616d 653d 7374 7265 616d 5f6e 616d 6532  ame=stream_name2
-0000f080: 2c0a 290a 6060 600a 0a54 6865 2065 7861  ,.).```..The exa
-0000f090: 6d70 6c65 2062 656c 6f77 2063 7265 6174  mple below creat
-0000f0a0: 6573 2061 2070 6572 7369 7374 656e 7420  es a persistent 
-0000f0b0: 7374 7265 616d 2073 7562 7363 7269 7074  stream subscript
-0000f0c0: 696f 6e20 6672 6f6d 2061 2073 7472 6561  ion from a strea
-0000f0d0: 6d20 706f 7369 7469 6f6e 2e0a 0a60 6060  m position...```
-0000f0e0: 7079 7468 6f6e 0a23 2043 7265 6174 6520  python.# Create 
-0000f0f0: 6120 7065 7273 6973 7465 6e74 2073 7472  a persistent str
-0000f100: 6561 6d20 7375 6273 6372 6970 7469 6f6e  eam subscription
-0000f110: 2066 726f 6d20 6120 7374 7265 616d 2070   from a stream p
-0000f120: 6f73 6974 696f 6e2e 0a67 726f 7570 5f6e  osition..group_n
-0000f130: 616d 6532 203d 2066 2267 726f 7570 2d7b  ame2 = f"group-{
-0000f140: 7575 6964 3428 297d 220a 636c 6965 6e74  uuid4()}".client
-0000f150: 2e63 7265 6174 655f 7374 7265 616d 5f73  .create_stream_s
-0000f160: 7562 7363 7269 7074 696f 6e28 0a20 2020  ubscription(.   
-0000f170: 2067 726f 7570 5f6e 616d 653d 6772 6f75   group_name=grou
-0000f180: 705f 6e61 6d65 322c 0a20 2020 2073 7472  p_name2,.    str
-0000f190: 6561 6d5f 6e61 6d65 3d73 7472 6561 6d5f  eam_name=stream_
-0000f1a0: 6e61 6d65 322c 0a20 2020 2073 7472 6561  name2,.    strea
-0000f1b0: 6d5f 706f 7369 7469 6f6e 3d32 0a29 0a60  m_position=2.).`
-0000f1c0: 6060 0a0a 5468 6520 6578 616d 706c 6520  ``..The example 
-0000f1d0: 6265 6c6f 7720 6372 6561 7465 7320 6120  below creates a 
-0000f1e0: 7065 7273 6973 7465 6e74 2073 7472 6561  persistent strea
-0000f1f0: 6d20 7375 6273 6372 6970 7469 6f6e 2066  m subscription f
-0000f200: 726f 6d20 7468 6520 656e 6420 6f66 2074  rom the end of t
-0000f210: 6865 2073 7472 6561 6d2e 0a0a 6060 6070  he stream...```p
-0000f220: 7974 686f 6e0a 2320 4372 6561 7465 2061  ython.# Create a
-0000f230: 2070 6572 7369 7374 656e 7420 7374 7265   persistent stre
-0000f240: 616d 2073 7562 7363 7269 7074 696f 6e20  am subscription 
-0000f250: 6672 6f6d 2065 6e64 206f 6620 7468 6520  from end of the 
-0000f260: 7374 7265 616d 2e0a 6772 6f75 705f 6e61  stream..group_na
-0000f270: 6d65 3320 3d20 6622 6772 6f75 702d 7b75  me3 = f"group-{u
-0000f280: 7569 6434 2829 7d22 0a63 6c69 656e 742e  uid4()}".client.
-0000f290: 6372 6561 7465 5f73 7472 6561 6d5f 7375  create_stream_su
-0000f2a0: 6273 6372 6970 7469 6f6e 280a 2020 2020  bscription(.    
-0000f2b0: 6772 6f75 705f 6e61 6d65 3d67 726f 7570  group_name=group
-0000f2c0: 5f6e 616d 6533 2c0a 2020 2020 7374 7265  _name3,.    stre
-0000f2d0: 616d 5f6e 616d 653d 7374 7265 616d 5f6e  am_name=stream_n
-0000f2e0: 616d 6532 2c0a 2020 2020 6672 6f6d 5f65  ame2,.    from_e
-0000f2f0: 6e64 3d54 7275 650a 290a 6060 600a 0a23  nd=True.).```..#
-0000f300: 2323 2052 6561 6420 7374 7265 616d 2073  ## Read stream s
-0000f310: 7562 7363 7269 7074 696f 6e0a 0a54 6865  ubscription..The
-0000f320: 2060 7265 6164 5f73 7472 6561 6d5f 7375   `read_stream_su
-0000f330: 6273 6372 6970 7469 6f6e 2829 6020 6d65  bscription()` me
-0000f340: 7468 6f64 2063 616e 2062 6520 7573 6564  thod can be used
-0000f350: 2074 6f20 6372 6561 7465 2061 2070 6572   to create a per
-0000f360: 7369 7374 656e 740a 7375 6273 6372 6970  sistent.subscrip
-0000f370: 7469 6f6e 2066 6f72 2061 2073 7472 6561  tion for a strea
-0000f380: 6d2e 0a0a 5468 6973 206d 6574 686f 6420  m...This method 
-0000f390: 6861 7320 7477 6f20 7265 7175 6972 6564  has two required
-0000f3a0: 2061 7267 756d 656e 7473 2c20 6067 726f   arguments, `gro
-0000f3b0: 7570 5f6e 616d 6560 2061 6e64 2060 7374  up_name` and `st
-0000f3c0: 7265 616d 5f6e 616d 6560 2c20 7768 6963  ream_name`, whic
-0000f3d0: 680a 7368 6f75 6c64 206d 6174 6368 2074  h.should match t
-0000f3e0: 6865 2076 616c 7565 7320 6f66 2061 7267  he values of arg
-0000f3f0: 756d 656e 7473 2075 7365 6420 7768 656e  uments used when
-0000f400: 2063 616c 6c69 6e67 2060 6372 6561 7465   calling `create
-0000f410: 5f73 7472 6561 6d5f 7375 6273 6372 6970  _stream_subscrip
-0000f420: 7469 6f6e 2829 602e 0a0a 5468 6973 206d  tion()`...This m
-0000f430: 6574 686f 6420 616c 736f 2074 616b 6573  ethod also takes
-0000f440: 2061 6e20 6f70 7469 6f6e 616c 2060 7469   an optional `ti
-0000f450: 6d65 6f75 7460 2061 7267 756d 656e 742c  meout` argument,
-0000f460: 2074 6861 740a 6973 2065 7870 6563 7465   that.is expecte
-0000f470: 6420 746f 2062 6520 6120 5079 7468 6f6e  d to be a Python
-0000f480: 2060 666c 6f61 7460 2c20 7768 6963 6820   `float`, which 
-0000f490: 7365 7473 2061 2064 6561 646c 696e 650a  sets a deadline.
-0000f4a0: 666f 7220 7468 6520 636f 6d70 6c65 7469  for the completi
-0000f4b0: 6f6e 206f 6620 7468 6520 6752 5043 206f  on of the gRPC o
-0000f4c0: 7065 7261 7469 6f6e 2e0a 0a4a 7573 7420  peration...Just 
-0000f4d0: 6c69 6b65 2060 7265 6164 5f73 7562 7363  like `read_subsc
-0000f4e0: 7269 7074 696f 6e60 2c20 7468 6973 206d  ription`, this m
-0000f4f0: 6574 686f 6420 7265 7475 726e 7320 6120  ethod returns a 
-0000f500: 322d 7475 706c 653a 2061 2022 7265 6164  2-tuple: a "read
-0000f510: 2072 6571 7565 7374 2220 6f62 6a65 6374   request" object
-0000f520: 0a61 6e64 2061 2022 7265 6164 2072 6573  .and a "read res
-0000f530: 706f 6e73 6522 206f 626a 6563 742e 0a0a  ponse" object...
-0000f540: 6060 6070 7974 686f 6e0a 7265 6164 5f72  ```python.read_r
-0000f550: 6571 2c20 7265 6164 5f72 6573 7020 3d20  eq, read_resp = 
-0000f560: 636c 6965 6e74 2e72 6561 645f 7374 7265  client.read_stre
-0000f570: 616d 5f73 7562 7363 7269 7074 696f 6e28  am_subscription(
-0000f580: 0a20 2020 2067 726f 7570 5f6e 616d 653d  .    group_name=
-0000f590: 6772 6f75 705f 6e61 6d65 312c 0a20 2020  group_name1,.   
-0000f5a0: 2073 7472 6561 6d5f 6e61 6d65 3d73 7472   stream_name=str
-0000f5b0: 6561 6d5f 6e61 6d65 322c 0a29 0a60 6060  eam_name2,.).```
-0000f5c0: 0a0a 5468 6520 6578 616d 706c 6520 6265  ..The example be
-0000f5d0: 6c6f 7720 6974 6572 6174 6573 206f 7665  low iterates ove
-0000f5e0: 7220 7468 6520 2272 6561 6420 7265 7370  r the "read resp
-0000f5f0: 6f6e 7365 2220 6f62 6a65 6374 2c20 616e  onse" object, an
-0000f600: 6420 6361 6c6c 7320 6061 636b 2829 600a  d calls `ack()`.
-0000f610: 6f6e 2074 6865 2022 7265 6164 2072 6573  on the "read res
-0000f620: 706f 6e73 6522 206f 626a 6563 742e 2054  ponse" object. T
-0000f630: 6865 2066 6f72 206c 6f6f 7020 6272 6561  he for loop brea
-0000f640: 6b73 2077 6865 6e20 7765 2068 6176 6520  ks when we have 
-0000f650: 7265 6365 6976 6564 0a74 6865 206c 6173  received.the las
-0000f660: 7420 6576 656e 7420 696e 2074 6865 2073  t event in the s
-0000f670: 7472 6561 6d2c 2073 6f20 7468 6174 2077  tream, so that w
-0000f680: 6520 6361 6e20 6669 6e69 7368 2074 6865  e can finish the
-0000f690: 2065 7861 6d70 6c65 7320 696e 2074 6869   examples in thi
-0000f6a0: 730a 646f 6375 6d65 6e74 6174 696f 6e2e  s.documentation.
-0000f6b0: 0a0a 6060 6070 7974 686f 6e0a 6576 656e  ..```python.even
-0000f6c0: 7473 203d 205b 5d0a 666f 7220 6576 656e  ts = [].for even
-0000f6d0: 7420 696e 2072 6561 645f 7265 7370 3a0a  t in read_resp:.
-0000f6e0: 2020 2020 6576 656e 7473 2e61 7070 656e      events.appen
-0000f6f0: 6428 6576 656e 7429 0a0a 2020 2020 2320  d(event)..    # 
-0000f700: 4163 6b6e 6f77 6c65 6467 6520 7468 6520  Acknowledge the 
-0000f710: 7265 6365 6976 6564 2065 7665 6e74 2e0a  received event..
-0000f720: 2020 2020 7265 6164 5f72 6571 2e61 636b      read_req.ack
-0000f730: 2865 7665 6e74 5f69 643d 6576 656e 742e  (event_id=event.
-0000f740: 6964 290a 0a20 2020 2023 2042 7265 616b  id)..    # Break
-0000f750: 2077 6865 6e20 7468 6520 6c61 7374 2065   when the last e
-0000f760: 7665 6e74 2068 6173 2062 6565 6e20 7265  vent has been re
-0000f770: 6365 6976 6564 2e0a 2020 2020 6966 2065  ceived..    if e
-0000f780: 7665 6e74 2e69 6420 3d3d 2065 7665 6e74  vent.id == event
-0000f790: 3131 2e69 643a 0a20 2020 2020 2020 2062  11.id:.        b
-0000f7a0: 7265 616b 0a60 6060 0a0a 5765 2063 616e  reak.```..We can
-0000f7b0: 2063 6865 636b 2077 6520 7265 6365 6976   check we receiv
-0000f7c0: 6564 2061 6c6c 2074 6865 2065 7665 6e74  ed all the event
-0000f7d0: 7320 7468 6174 2077 6572 6520 6170 7065  s that were appe
-0000f7e0: 6e64 6564 2074 6f20 6073 7472 6561 6d5f  nded to `stream_
-0000f7f0: 6e61 6d65 3260 0a69 6e20 7468 6520 6578  name2`.in the ex
-0000f800: 616d 706c 6573 2061 626f 7665 2e0a 0a60  amples above...`
-0000f810: 6060 7079 7468 6f6e 0a61 7373 6572 7420  ``python.assert 
-0000f820: 6c65 6e28 6576 656e 7473 2920 3d3d 2034  len(events) == 4
-0000f830: 0a61 7373 6572 7420 6576 656e 7473 5b30  .assert events[0
-0000f840: 5d2e 7374 7265 616d 5f6e 616d 6520 3d3d  ].stream_name ==
-0000f850: 2073 7472 6561 6d5f 6e61 6d65 320a 6173   stream_name2.as
-0000f860: 7365 7274 2065 7665 6e74 735b 305d 2e69  sert events[0].i
-0000f870: 6420 3d3d 2065 7665 6e74 342e 6964 0a61  d == event4.id.a
-0000f880: 7373 6572 7420 6576 656e 7473 5b31 5d2e  ssert events[1].
-0000f890: 7374 7265 616d 5f6e 616d 6520 3d3d 2073  stream_name == s
-0000f8a0: 7472 6561 6d5f 6e61 6d65 320a 6173 7365  tream_name2.asse
-0000f8b0: 7274 2065 7665 6e74 735b 315d 2e69 6420  rt events[1].id 
-0000f8c0: 3d3d 2065 7665 6e74 352e 6964 0a61 7373  == event5.id.ass
-0000f8d0: 6572 7420 6576 656e 7473 5b32 5d2e 7374  ert events[2].st
-0000f8e0: 7265 616d 5f6e 616d 6520 3d3d 2073 7472  ream_name == str
-0000f8f0: 6561 6d5f 6e61 6d65 320a 6173 7365 7274  eam_name2.assert
-0000f900: 2065 7665 6e74 735b 325d 2e69 6420 3d3d   events[2].id ==
-0000f910: 2065 7665 6e74 362e 6964 0a61 7373 6572   event6.id.asser
-0000f920: 7420 6576 656e 7473 5b33 5d2e 7374 7265  t events[3].stre
-0000f930: 616d 5f6e 616d 6520 3d3d 2073 7472 6561  am_name == strea
-0000f940: 6d5f 6e61 6d65 320a 6173 7365 7274 2065  m_name2.assert e
-0000f950: 7665 6e74 735b 335d 2e69 6420 3d3d 2065  vents[3].id == e
-0000f960: 7665 6e74 3131 2e69 640a 6060 600a 0a23  vent11.id.```..#
-0000f970: 2323 2047 6574 2073 7472 6561 6d20 7375  ## Get stream su
-0000f980: 6273 6372 6970 7469 6f6e 2069 6e66 6f0a  bscription info.
-0000f990: 0a54 6865 2060 6765 745f 7374 7265 616d  .The `get_stream
-0000f9a0: 5f73 7562 7363 7269 7074 696f 6e5f 696e  _subscription_in
-0000f9b0: 666f 2829 6020 6d65 7468 6f64 2063 616e  fo()` method can
-0000f9c0: 2062 6520 7573 6564 2074 6f20 6765 7420   be used to get 
-0000f9d0: 696e 666f 726d 6174 696f 6e20 666f 7220  information for 
-0000f9e0: 610a 7065 7273 6973 7465 6e74 2073 7562  a.persistent sub
-0000f9f0: 7363 7269 7074 696f 6e20 666f 7220 6120  scription for a 
-0000fa00: 7374 7265 616d 2e0a 0a54 6869 7320 6d65  stream...This me
-0000fa10: 7468 6f64 2068 6173 2074 776f 2072 6571  thod has two req
-0000fa20: 7569 7265 6420 6172 6775 6d65 6e74 732c  uired arguments,
-0000fa30: 2060 6772 6f75 705f 6e61 6d65 6020 616e   `group_name` an
-0000fa40: 6420 6073 7472 6561 6d5f 6e61 6d65 602c  d `stream_name`,
-0000fa50: 2077 6869 6368 0a73 686f 756c 6420 6d61   which.should ma
-0000fa60: 7463 6820 7468 6520 7661 6c75 6573 206f  tch the values o
-0000fa70: 6620 6172 6775 6d65 6e74 7320 7573 6564  f arguments used
-0000fa80: 2077 6865 6e20 6361 6c6c 696e 6720 6063   when calling `c
-0000fa90: 7265 6174 655f 7374 7265 616d 5f73 7562  reate_stream_sub
-0000faa0: 7363 7269 7074 696f 6e28 2960 2e0a 0a54  scription()`...T
-0000fab0: 6869 7320 6d65 7468 6f64 2061 6c73 6f20  his method also 
-0000fac0: 7461 6b65 7320 616e 206f 7074 696f 6e61  takes an optiona
-0000fad0: 6c20 6074 696d 656f 7574 6020 6172 6775  l `timeout` argu
-0000fae0: 6d65 6e74 2c20 7468 6174 0a69 7320 6578  ment, that.is ex
-0000faf0: 7065 6374 6564 2074 6f20 6265 2061 2050  pected to be a P
-0000fb00: 7974 686f 6e20 6066 6c6f 6174 602c 2077  ython `float`, w
-0000fb10: 6869 6368 2073 6574 7320 6120 6465 6164  hich sets a dead
-0000fb20: 6c69 6e65 0a66 6f72 2074 6865 2063 6f6d  line.for the com
-0000fb30: 706c 6574 696f 6e20 6f66 2074 6865 2067  pletion of the g
-0000fb40: 5250 4320 6f70 6572 6174 696f 6e2e 0a0a  RPC operation...
-0000fb50: 6060 6070 7974 686f 6e0a 7375 6273 6372  ```python.subscr
-0000fb60: 6970 7469 6f6e 5f69 6e66 6f20 3d20 636c  iption_info = cl
-0000fb70: 6965 6e74 2e67 6574 5f73 7472 6561 6d5f  ient.get_stream_
-0000fb80: 7375 6273 6372 6970 7469 6f6e 5f69 6e66  subscription_inf
-0000fb90: 6f28 0a20 2020 2067 726f 7570 5f6e 616d  o(.    group_nam
-0000fba0: 653d 6772 6f75 705f 6e61 6d65 312c 0a20  e=group_name1,. 
-0000fbb0: 2020 2073 7472 6561 6d5f 6e61 6d65 3d73     stream_name=s
-0000fbc0: 7472 6561 6d5f 6e61 6d65 322c 0a29 0a60  tream_name2,.).`
-0000fbd0: 6060 0a0a 5468 6520 7265 7475 726e 6564  ``..The returned
-0000fbe0: 2076 616c 7565 2069 7320 6120 6053 7562   value is a `Sub
-0000fbf0: 7363 7269 7074 696f 6e49 6e66 6f60 206f  scriptionInfo` o
-0000fc00: 626a 6563 742e 0a0a 2323 2320 4c69 7374  bject...### List
-0000fc10: 2073 7472 6561 6d20 7375 6273 6372 6970   stream subscrip
-0000fc20: 7469 6f6e 730a 0a54 6865 2060 6c69 7374  tions..The `list
-0000fc30: 5f73 7472 6561 6d5f 7375 6273 6372 6970  _stream_subscrip
-0000fc40: 7469 6f6e 7328 2960 206d 6574 686f 6420  tions()` method 
-0000fc50: 6361 6e20 6265 2075 7365 6420 746f 2067  can be used to g
-0000fc60: 6574 2069 6e66 6f72 6d61 7469 6f6e 2066  et information f
-0000fc70: 6f72 2061 6c6c 0a74 6865 2070 6572 7369  or all.the persi
-0000fc80: 7374 656e 7420 7375 6273 6372 6970 7469  stent subscripti
-0000fc90: 6f6e 7320 666f 7220 6120 7374 7265 616d  ons for a stream
-0000fca0: 2e0a 0a54 6869 7320 6d65 7468 6f64 2068  ...This method h
-0000fcb0: 6173 206f 6e65 2072 6571 7569 7265 6420  as one required 
-0000fcc0: 6172 6775 6d65 6e74 2c20 6073 7472 6561  argument, `strea
-0000fcd0: 6d5f 6e61 6d65 602e 0a0a 5468 6973 206d  m_name`...This m
-0000fce0: 6574 686f 6420 616c 736f 2074 616b 6573  ethod also takes
-0000fcf0: 2061 6e20 6f70 7469 6f6e 616c 2060 7469   an optional `ti
-0000fd00: 6d65 6f75 7460 2061 7267 756d 656e 742c  meout` argument,
-0000fd10: 2074 6861 740a 6973 2065 7870 6563 7465   that.is expecte
-0000fd20: 6420 746f 2062 6520 6120 5079 7468 6f6e  d to be a Python
-0000fd30: 2060 666c 6f61 7460 2c20 7768 6963 6820   `float`, which 
-0000fd40: 7365 7473 2061 2064 6561 646c 696e 650a  sets a deadline.
-0000fd50: 666f 7220 7468 6520 636f 6d70 6c65 7469  for the completi
-0000fd60: 6f6e 206f 6620 7468 6520 6752 5043 206f  on of the gRPC o
-0000fd70: 7065 7261 7469 6f6e 2e0a 0a60 6060 7079  peration...```py
-0000fd80: 7468 6f6e 0a73 7562 7363 7269 7074 696f  thon.subscriptio
-0000fd90: 6e73 203d 2063 6c69 656e 742e 6c69 7374  ns = client.list
-0000fda0: 5f73 7472 6561 6d5f 7375 6273 6372 6970  _stream_subscrip
-0000fdb0: 7469 6f6e 7328 0a20 2020 2073 7472 6561  tions(.    strea
-0000fdc0: 6d5f 6e61 6d65 3d73 7472 6561 6d5f 6e61  m_name=stream_na
-0000fdd0: 6d65 322c 0a29 0a60 6060 0a0a 5468 6520  me2,.).```..The 
-0000fde0: 7265 7475 726e 6564 2076 616c 7565 2069  returned value i
-0000fdf0: 7320 6120 6c69 7374 206f 6620 6053 7562  s a list of `Sub
-0000fe00: 7363 7269 7074 696f 6e49 6e66 6f60 206f  scriptionInfo` o
-0000fe10: 626a 6563 7473 2e0a 0a23 2323 2044 656c  bjects...### Del
-0000fe20: 6574 6520 7374 7265 616d 2073 7562 7363  ete stream subsc
-0000fe30: 7269 7074 696f 6e0a 0a54 6865 2060 6465  ription..The `de
-0000fe40: 6c65 7465 5f73 7472 6561 6d5f 7375 6273  lete_stream_subs
-0000fe50: 6372 6970 7469 6f6e 2829 6020 6d65 7468  cription()` meth
-0000fe60: 6f64 2063 616e 2062 6520 7573 6564 2074  od can be used t
-0000fe70: 6f20 6465 6c65 7465 2061 2070 6572 7369  o delete a persi
-0000fe80: 7374 656e 740a 7375 6273 6372 6970 7469  stent.subscripti
-0000fe90: 6f6e 2066 6f72 2061 2073 7472 6561 6d2e  on for a stream.
-0000fea0: 0a0a 5468 6973 206d 6574 686f 6420 6861  ..This method ha
-0000feb0: 7320 7477 6f20 7265 7175 6972 6564 2061  s two required a
-0000fec0: 7267 756d 656e 7473 2c20 6067 726f 7570  rguments, `group
-0000fed0: 5f6e 616d 6560 2061 6e64 2060 7374 7265  _name` and `stre
-0000fee0: 616d 5f6e 616d 6560 2c20 7768 6963 680a  am_name`, which.
-0000fef0: 7368 6f75 6c64 206d 6174 6368 2074 6865  should match the
-0000ff00: 2076 616c 7565 7320 6f66 2061 7267 756d   values of argum
-0000ff10: 656e 7473 2075 7365 6420 7768 656e 2063  ents used when c
-0000ff20: 616c 6c69 6e67 2060 6372 6561 7465 5f73  alling `create_s
-0000ff30: 7472 6561 6d5f 7375 6273 6372 6970 7469  tream_subscripti
-0000ff40: 6f6e 2829 602e 0a0a 5468 6973 206d 6574  on()`...This met
-0000ff50: 686f 6420 616c 736f 2074 616b 6573 2061  hod also takes a
-0000ff60: 6e20 6f70 7469 6f6e 616c 2060 7469 6d65  n optional `time
-0000ff70: 6f75 7460 2061 7267 756d 656e 742c 2074  out` argument, t
-0000ff80: 6861 740a 6973 2065 7870 6563 7465 6420  hat.is expected 
-0000ff90: 746f 2062 6520 6120 5079 7468 6f6e 2060  to be a Python `
-0000ffa0: 666c 6f61 7460 2c20 7768 6963 6820 7365  float`, which se
-0000ffb0: 7473 2061 2064 6561 646c 696e 650a 666f  ts a deadline.fo
-0000ffc0: 7220 7468 6520 636f 6d70 6c65 7469 6f6e  r the completion
-0000ffd0: 206f 6620 7468 6520 6752 5043 206f 7065   of the gRPC ope
-0000ffe0: 7261 7469 6f6e 2e0a 0a60 6060 7079 7468  ration...```pyth
-0000fff0: 6f6e 0a63 6c69 656e 742e 6465 6c65 7465  on.client.delete
-00010000: 5f73 7472 6561 6d5f 7375 6273 6372 6970  _stream_subscrip
-00010010: 7469 6f6e 280a 2020 2020 6772 6f75 705f  tion(.    group_
-00010020: 6e61 6d65 3d67 726f 7570 5f6e 616d 6531  name=group_name1
-00010030: 2c0a 2020 2020 7374 7265 616d 5f6e 616d  ,.    stream_nam
-00010040: 653d 7374 7265 616d 5f6e 616d 6532 2c0a  e=stream_name2,.
-00010050: 290a 6060 600a 0a23 2320 436f 6e6e 6563  ).```..## Connec
-00010060: 7469 6f6e 0a0a 2323 2320 5265 636f 6e6e  tion..### Reconn
-00010070: 6563 740a 0a54 6865 2060 7265 636f 6e6e  ect..The `reconn
-00010080: 6563 7428 2960 206d 6574 686f 6420 6361  ect()` method ca
-00010090: 6e20 6265 2075 7365 6420 746f 206d 616e  n be used to man
-000100a0: 7561 6c6c 7920 7265 636f 6e6e 6563 7420  ually reconnect 
-000100b0: 7468 6520 636c 6965 6e74 2074 6f20 610a  the client to a.
-000100c0: 7375 6974 6162 6c65 2045 7665 6e74 5374  suitable EventSt
-000100d0: 6f72 6544 4220 6e6f 6465 2e20 5468 6973  oreDB node. This
-000100e0: 206d 6574 686f 6420 7573 6573 2074 6865   method uses the
-000100f0: 2073 616d 6520 726f 7574 696e 652c 2066   same routine, f
-00010100: 6f72 2064 6973 636f 7665 7269 6e67 2074  or discovering t
-00010110: 6865 0a63 6c75 7374 6572 206e 6f64 6573  he.cluster nodes
-00010120: 2061 6e64 2063 6f6e 6e65 6374 696e 6720   and connecting 
-00010130: 746f 2061 2073 7569 7461 626c 6520 6e6f  to a suitable no
-00010140: 6465 2061 6363 6f72 6469 6e67 2074 6f20  de according to 
-00010150: 7468 6520 6e6f 6465 2070 7265 6665 7265  the node prefere
-00010160: 6e63 650a 7370 6563 6966 6965 6420 696e  nce.specified in
-00010170: 2074 6865 2063 6f6e 6e65 6374 696f 6e20   the connection 
-00010180: 7374 7269 6e67 2c20 7468 6174 2069 7320  string, that is 
-00010190: 7573 6564 2077 6865 6e20 7468 6520 636c  used when the cl
-000101a0: 6965 6e74 2069 730a 696e 7374 616e 7469  ient is.instanti
-000101b0: 6174 6564 2e20 5468 6973 206d 6574 686f  ated. This metho
-000101c0: 6420 6973 2074 6872 6561 642d 7361 6665  d is thread-safe
-000101d0: 2c20 616e 6420 6974 2069 7320 2263 6f6e  , and it is "con
-000101e0: 7365 7276 6174 6976 6522 0a69 6e20 7468  servative".in th
-000101f0: 6174 206f 6e6c 7920 6f6e 6520 7265 636f  at only one reco
-00010200: 6e6e 6563 7469 6f6e 2077 696c 6c20 6f63  nnection will oc
-00010210: 6375 722e 2043 6f6e 6375 7272 656e 7420  cur. Concurrent 
-00010220: 6174 7465 6d70 7473 2074 6f20 7265 636f  attempts to reco
-00010230: 6e6e 6563 740a 7769 6c6c 2062 6c6f 636b  nnect.will block
-00010240: 2075 6e74 696c 2074 6865 2063 6c69 656e   until the clien
-00010250: 7420 6861 7320 7265 636f 6e6e 6563 7465  t has reconnecte
-00010260: 6420 7375 6363 6573 7366 756c 6c79 2c20  d successfully, 
-00010270: 616e 6420 7468 656e 2074 6865 7920 7769  and then they wi
-00010280: 6c6c 0a61 6c6c 2072 6574 7572 6e20 6e6f  ll.all return no
-00010290: 726d 616c 6c79 2e0a 0a60 6060 7079 7468  rmally...```pyth
-000102a0: 6f6e 0a63 6c69 656e 742e 7265 636f 6e6e  on.client.reconn
-000102b0: 6563 7428 290a 6060 600a 0a41 6e20 6578  ect().```..An ex
-000102c0: 616d 706c 6520 6f66 2077 6865 6e20 6974  ample of when it
-000102d0: 206d 6967 6874 2062 6520 6465 7369 7261   might be desira
-000102e0: 626c 6520 746f 2072 6563 6f6e 6e65 6374  ble to reconnect
-000102f0: 206d 616e 7561 6c6c 7920 6973 2077 6865   manually is whe
-00010300: 6e20 2866 6f72 2070 6572 666f 726d 616e  n (for performan
-00010310: 6365 0a72 6561 736f 6e73 2920 7468 6520  ce.reasons) the 
-00010320: 6e6f 6465 2070 7265 6665 7265 6e63 6520  node preference 
-00010330: 6973 2066 6f72 2074 6865 2063 6c69 656e  is for the clien
-00010340: 7420 746f 2062 6520 636f 6e6e 6563 7465  t to be connecte
-00010350: 6420 746f 2061 2066 6f6c 6c6f 7765 7220  d to a follower 
-00010360: 6e6f 6465 2069 6e20 7468 650a 636c 7573  node in the.clus
-00010370: 7465 722c 2061 6e64 2c20 6166 7465 7220  ter, and, after 
-00010380: 6120 636c 7573 7465 7220 6c65 6164 6572  a cluster leader
-00010390: 2065 6c65 6374 696f 6e2c 2074 6865 2066   election, the f
-000103a0: 6f6c 6c6f 7765 7220 6e6f 6465 2062 6563  ollower node bec
-000103b0: 6f6d 6573 2061 206c 6561 6465 7220 6e6f  omes a leader no
-000103c0: 6465 2e0a 5265 636f 6e6e 6563 7469 6e67  de..Reconnecting
-000103d0: 2074 6f20 6120 666f 6c6c 6f77 6572 206e   to a follower n
-000103e0: 6f64 6520 696e 2074 6869 7320 6361 7365  ode in this case
-000103f0: 2069 7320 6375 7272 656e 746c 7920 6265   is currently be
-00010400: 796f 6e64 2074 6865 2063 6170 6162 696c  yond the capabil
-00010410: 6974 6965 7320 6f66 0a74 6869 7320 636c  ities of.this cl
-00010420: 6965 6e74 2c20 6275 7420 7468 6973 2062  ient, but this b
-00010430: 6568 6176 696f 7220 6d69 6768 7420 6265  ehavior might be
-00010440: 2069 6d70 6c65 6d65 6e74 6564 2069 6e20   implemented in 
-00010450: 6120 6675 7475 7265 2072 656c 6561 7365  a future release
-00010460: 2e0a 0a50 6c65 6173 6520 6e6f 7465 2c20  ...Please note, 
-00010470: 616c 6c20 7468 6520 636c 6965 6e74 206d  all the client m
-00010480: 6574 686f 6473 2075 7365 2061 6e20 6040  ethods use an `@
-00010490: 6175 746f 7265 636f 6e6e 6563 7460 2064  autoreconnect` d
-000104a0: 6563 6f72 6174 6f72 2028 7768 6963 6820  ecorator (which 
-000104b0: 6361 6c6c 7320 7468 650a 6072 6563 6f6e  calls the.`recon
-000104c0: 6e65 6374 2829 6020 6d65 7468 6f64 2920  nect()` method) 
-000104d0: 616e 6420 6120 6040 7265 7472 7960 2064  and a `@retry` d
-000104e0: 6563 6f72 6174 6f72 2074 6861 7420 7769  ecorator that wi
-000104f0: 6c6c 2072 6574 7279 206f 7065 7261 7469  ll retry operati
-00010500: 6f6e 7320 7468 6174 2066 6169 6c0a 6475  ons that fail.du
-00010510: 6520 746f 2063 6f6e 6e65 6374 6976 6974  e to connectivit
-00010520: 7920 6973 7375 6573 2e20 5468 6973 206d  y issues. This m
-00010530: 6561 6e73 2c20 666f 7220 6578 616d 706c  eans, for exampl
-00010540: 652c 2074 6861 7420 7768 656e 2074 6865  e, that when the
-00010550: 206e 6f64 6520 7072 6566 6572 656e 6365   node preference
-00010560: 0a69 7320 666f 7220 7468 6520 636c 6965  .is for the clie
-00010570: 6e74 2074 6f20 6265 2063 6f6e 6e65 6374  nt to be connect
-00010580: 6564 2074 6f20 6120 6c65 6164 6572 2028  ed to a leader (
-00010590: 7768 6963 6820 6973 2074 6865 2064 6566  which is the def
-000105a0: 6175 6c74 2920 616e 6420 7768 656e 2c20  ault) and when, 
-000105b0: 6166 7465 7220 610a 636c 7573 7465 7220  after a.cluster 
-000105c0: 6c65 6164 6572 2065 6c65 6374 696f 6e2c  leader election,
-000105d0: 2074 6865 206e 6f64 6520 746f 2077 6869   the node to whi
-000105e0: 6368 2074 6865 2063 6c69 656e 7420 6973  ch the client is
-000105f0: 2063 6f6e 6e65 6374 6564 2062 6563 6f6d   connected becom
-00010600: 6573 2061 2066 6f6c 6c6f 7765 722c 0a73  es a follower,.s
-00010610: 6f20 7468 6174 2077 7269 7465 206f 7065  o that write ope
-00010620: 7261 7469 6f6e 7320 7769 6c6c 2062 6567  rations will beg
-00010630: 696e 2074 6f20 6661 696c 2062 6563 6175  in to fail becau
-00010640: 7365 2074 6865 2063 6c69 656e 7420 6973  se the client is
-00010650: 206e 6f20 6c6f 6e67 6572 2063 6f6e 6e65   no longer conne
-00010660: 6374 6564 0a74 6f20 6120 6c65 6164 6572  cted.to a leader
-00010670: 2c20 7468 656e 2074 6865 2063 6c69 656e  , then the clien
-00010680: 7420 7769 6c6c 2061 7574 6f6d 6174 6963  t will automatic
-00010690: 616c 6c79 2072 6563 6f6e 6e65 6374 2074  ally reconnect t
-000106a0: 6f20 7468 6520 6e65 7720 6c65 6164 6572  o the new leader
-000106b0: 2061 6e64 2061 6c73 6f0a 7468 6520 636c   and also.the cl
-000106c0: 6965 6e74 2077 696c 6c20 7265 7472 7920  ient will retry 
-000106d0: 7468 6520 6661 696c 6564 2077 7269 7465  the failed write
-000106e0: 206f 7065 7261 7469 6f6e 732e 2054 6865   operations. The
-000106f0: 2063 6c69 656e 7420 616c 736f 2077 696c   client also wil
-00010700: 6c20 7265 636f 6e6e 6563 740a 6163 636f  l reconnect.acco
-00010710: 7264 696e 6720 746f 2074 6865 206e 6f64  rding to the nod
-00010720: 6520 7072 6566 6572 656e 6365 2077 6865  e preference whe
-00010730: 6e20 7468 6572 6520 6172 6520 636f 6e6e  n there are conn
-00010740: 6563 7469 7669 7479 2069 7373 7565 7320  ectivity issues 
-00010750: 6361 7573 696e 6720 7265 6164 0a6f 7065  causing read.ope
-00010760: 7261 7469 6f6e 7320 746f 2066 6169 6c20  rations to fail 
-00010770: 7769 7468 2074 6865 2063 7572 7265 6e74  with the current
-00010780: 2063 6f6e 6e65 6374 696f 6e2e 0a0a 506c   connection...Pl
-00010790: 6561 7365 2061 6c73 6f20 6e6f 7465 2c20  ease also note, 
-000107a0: 616e 2065 7665 6e74 2d70 726f 6365 7373  an event-process
-000107b0: 696e 6720 636f 6d70 6f6e 656e 7420 7468  ing component th
-000107c0: 6174 2075 7365 7320 6120 6361 7463 682d  at uses a catch-
-000107d0: 7570 2073 7562 7363 7269 7074 696f 6e20  up subscription 
-000107e0: 7769 6c6c 0a6e 6565 6420 746f 2062 6520  will.need to be 
-000107f0: 6d6f 6e69 746f 7265 6420 666f 7220 6572  monitored for er
-00010800: 726f 7273 2c20 616e 642c 2069 6620 6974  rors, and, if it
-00010810: 2066 6169 6c73 2061 6674 6572 2074 6865   fails after the
-00010820: 2073 7562 7363 7269 7074 696f 6e20 7374   subscription st
-00010830: 6172 7465 642c 2069 740a 7769 6c6c 206e  arted, it.will n
-00010840: 6565 6420 746f 2062 6520 7265 7374 6172  eed to be restar
-00010850: 7465 6420 6672 6f6d 2074 6865 206c 6173  ted from the las
-00010860: 7420 7361 7665 6420 636f 6d6d 6974 2070  t saved commit p
-00010870: 6f73 6974 696f 6e2e 2049 6e20 7468 6973  osition. In this
-00010880: 2063 6173 652c 2074 6865 0a63 6c69 656e   case, the.clien
-00010890: 7420 7769 6c6c 2061 7574 6f6d 6174 6963  t will automatic
-000108a0: 616c 6c79 2072 6563 6f6e 6e65 6374 2074  ally reconnect t
-000108b0: 6f20 6120 6e6f 6465 2069 6e20 7468 6520  o a node in the 
-000108c0: 636c 7573 7465 7220 7768 656e 2074 6865  cluster when the
-000108d0: 2073 7562 7365 7175 656e 7420 6361 6c6c   subsequent call
-000108e0: 0a74 6f20 7374 6172 7420 6120 6361 7463  .to start a catc
-000108f0: 682d 7570 2073 7562 7363 7269 7074 696f  h-up subscriptio
-00010900: 6e20 6973 206d 6164 652e 2059 6f75 206a  n is made. You j
-00010910: 7573 7420 6e65 6564 2074 6f20 6361 7463  ust need to catc
-00010920: 6820 7468 6520 6572 726f 722c 2072 6561  h the error, rea
-00010930: 640a 7468 6520 6c61 7374 2073 6176 6564  d.the last saved
-00010940: 2063 6f6d 6d69 7420 706f 7369 7469 6f6e   commit position
-00010950: 2c20 616e 6420 7265 7374 6172 7420 7468  , and restart th
-00010960: 6520 6576 656e 7420 7072 6f63 6573 7369  e event processi
-00010970: 6e67 2c20 7573 696e 6720 7468 6520 7361  ng, using the sa
-00010980: 6d65 0a60 4553 4442 436c 6965 6e74 6020  me.`ESDBClient` 
-00010990: 696e 7374 616e 6365 2c20 6275 7420 7769  instance, but wi
-000109a0: 7468 2061 206e 6577 2063 616c 6c20 746f  th a new call to
-000109b0: 2060 7375 6273 6372 6962 655f 616c 6c5f   `subscribe_all_
-000109c0: 6576 656e 7473 2829 602e 0a0a 0a23 2323  events()`....###
-000109d0: 2043 6c6f 7365 0a0a 5468 6520 6063 6c6f   Close..The `clo
-000109e0: 7365 2829 6020 6d65 7468 6f64 2063 616e  se()` method can
-000109f0: 2062 6520 7573 6564 2074 6f20 636c 6561   be used to clea
-00010a00: 6e6c 7920 636c 6f73 6520 7468 6520 6752  nly close the gR
-00010a10: 5043 2063 6f6e 6e65 6374 696f 6e2e 0a0a  PC connection...
-00010a20: 6060 6070 7974 686f 6e0a 636c 6965 6e74  ```python.client
-00010a30: 2e63 6c6f 7365 2829 0a60 6060 0a0a 2323  .close().```..##
-00010a40: 204e 6f74 6573 0a0a 2323 2320 436f 6e6e   Notes..### Conn
-00010a50: 6563 7469 6f6e 2073 7472 696e 6773 0a0a  ection strings..
-00010a60: 5468 6520 4576 656e 7453 746f 7265 4442  The EventStoreDB
-00010a70: 2063 6f6e 6e65 6374 696f 6e20 7374 7269   connection stri
-00010a80: 6e67 2069 7320 6120 5552 4920 7468 6174  ng is a URI that
-00010a90: 2063 6f6e 666f 726d 7320 7769 7468 206f   conforms with o
-00010aa0: 6e65 206f 6620 7477 6f20 706f 7373 6962  ne of two possib
-00010ab0: 6c65 0a73 6368 656d 6573 2c20 6569 7468  le.schemes, eith
-00010ac0: 6572 2074 6865 2022 6573 6462 2220 7363  er the "esdb" sc
-00010ad0: 6865 6d65 206f 7220 7468 6520 2265 7364  heme or the "esd
-00010ae0: 622b 6469 7363 6f76 6572 2220 7363 6865  b+discover" sche
-00010af0: 6d65 2e20 5468 6520 7379 6e74 6178 2061  me. The syntax a
-00010b00: 6e64 0a73 656d 616e 7469 6373 206f 6620  nd.semantics of 
-00010b10: 7468 6520 4576 656e 7453 746f 7265 4442  the EventStoreDB
-00010b20: 2055 5249 2073 6368 656d 6573 2061 7265   URI schemes are
-00010b30: 2065 7870 6c61 696e 6564 2062 656c 6f77   explained below
-00010b40: 2e20 5468 6520 7379 6e74 6178 2069 730a  . The syntax is.
-00010b50: 6465 6669 6e65 6420 7573 696e 6720 5b45  defined using [E
-00010b60: 424e 465d 2868 7474 7073 3a2f 2f65 6e2e  BNF](https://en.
-00010b70: 7769 6b69 7065 6469 612e 6f72 672f 7769  wikipedia.org/wi
-00010b80: 6b69 2f45 7874 656e 6465 645f 4261 636b  ki/Extended_Back
-00010b90: 7573 e280 934e 6175 725f 666f 726d 292e  us...Naur_form).
-00010ba0: 0a0a 5468 6520 2265 7364 6222 2055 5249  ..The "esdb" URI
-00010bb0: 2073 6368 656d 6520 6361 6e20 6265 2064   scheme can be d
-00010bc0: 6566 696e 6564 2069 6e20 7468 6520 666f  efined in the fo
-00010bd0: 6c6c 6f77 696e 6720 7761 792e 0a0a 2020  llowing way...  
-00010be0: 2020 6573 6462 2d75 7269 203d 2022 6573    esdb-uri = "es
-00010bf0: 6462 3a2f 2f22 202c 205b 2075 7365 722d  db://" , [ user-
-00010c00: 696e 666f 202c 2022 4022 205d 202c 2067  info , "@" ] , g
-00010c10: 7270 632d 7461 7267 6574 2c20 7b20 222c  rpc-target, { ",
-00010c20: 2220 2c20 6772 7063 2d74 6172 6765 7420  " , grpc-target 
-00010c30: 7d20 2c20 5b20 223f 2220 2c20 7175 6572  } , [ "?" , quer
-00010c40: 792d 7374 7269 6e67 205d 203b 0a0a 496e  y-string ] ;..In
-00010c50: 2074 6865 2022 6573 6462 2220 5552 4920   the "esdb" URI 
-00010c60: 7363 6865 6d65 2c20 6166 7465 7220 7468  scheme, after th
-00010c70: 6520 6f70 7469 6f6e 616c 2075 7365 7220  e optional user 
-00010c80: 696e 666f 2073 7472 696e 672c 2074 6865  info string, the
-00010c90: 7265 206d 7573 7420 6265 2061 7420 6c65  re must be at le
-00010ca0: 6173 740a 6f6e 6520 6752 5043 2074 6172  ast.one gRPC tar
-00010cb0: 6765 742e 2049 6620 7468 6572 6520 6172  get. If there ar
-00010cc0: 6520 7365 7665 7261 6c20 6752 5043 2074  e several gRPC t
-00010cd0: 6172 6765 7473 2c20 7468 6579 206d 7573  argets, they mus
-00010ce0: 7420 6265 2073 6570 6172 6174 6564 2066  t be separated f
-00010cf0: 726f 6d20 6561 6368 0a6f 7468 6572 2077  rom each.other w
-00010d00: 6974 6820 7468 6520 222c 2220 6368 6172  ith the "," char
-00010d10: 6163 7465 722e 2045 6163 6820 6752 5043  acter. Each gRPC
-00010d20: 2074 6172 6765 7420 7368 6f75 6c64 2069   target should i
-00010d30: 6e64 6963 6174 6520 616e 2045 7665 6e74  ndicate an Event
-00010d40: 5374 6f72 6544 4220 6752 5043 0a73 6572  StoreDB gRPC.ser
-00010d50: 7665 7220 736f 636b 6574 2c20 6279 2073  ver socket, by s
-00010d60: 7065 6369 6679 696e 6720 6120 686f 7374  pecifying a host
-00010d70: 2061 6e64 2061 2070 6f72 7420 6e75 6d62   and a port numb
-00010d80: 6572 2073 6570 6172 6174 6564 2077 6974  er separated wit
-00010d90: 6820 7468 6520 223a 2220 6368 6172 6163  h the ":" charac
-00010da0: 7465 722e 0a54 6865 2068 6f73 7420 6d61  ter..The host ma
-00010db0: 7920 6265 2061 2068 6f73 746e 616d 6520  y be a hostname 
-00010dc0: 7468 6174 2063 616e 2062 6520 7265 736f  that can be reso
-00010dd0: 6c76 6564 2074 6f20 616e 2049 5020 6164  lved to an IP ad
-00010de0: 6472 6573 732c 206f 7220 616e 2049 5020  dress, or an IP 
-00010df0: 6164 6472 6573 732e 0a0a 2020 2020 6772  address...    gr
-00010e00: 7063 2d74 6172 6765 7420 3d20 2820 686f  pc-target = ( ho
-00010e10: 7374 6e61 6d65 207c 2069 702d 6164 6472  stname | ip-addr
-00010e20: 6573 7320 2920 2c20 223a 2220 2c20 706f  ess ) , ":" , po
-00010e30: 7274 2d6e 756d 6265 7220 3b0a 0a0a 5468  rt-number ;...Th
-00010e40: 6520 2265 7364 622b 6469 7363 6f76 6572  e "esdb+discover
-00010e50: 2220 5552 4920 7363 6865 6d65 2063 616e  " URI scheme can
-00010e60: 2062 6520 6465 6669 6e65 6420 696e 2074   be defined in t
-00010e70: 6865 2066 6f6c 6c6f 7769 6e67 2077 6179  he following way
-00010e80: 2e0a 0a20 2020 2065 7364 622d 6469 7363  ...    esdb-disc
-00010e90: 6f76 6572 2d75 7269 203d 2022 6573 6462  over-uri = "esdb
-00010ea0: 2b64 6973 636f 7665 723a 2f2f 2220 2c20  +discover://" , 
-00010eb0: 5b20 7573 6572 2d69 6e66 6f2c 2022 4022  [ user-info, "@"
-00010ec0: 205d 202c 2063 6c75 7374 6572 2d64 6f6d   ] , cluster-dom
-00010ed0: 6169 6e6e 616d 6520 2c20 5b20 223f 2220  ainname , [ "?" 
-00010ee0: 2c20 7175 6572 792d 7374 7269 6e67 205d  , query-string ]
-00010ef0: 203b 0a0a 496e 2074 6865 2022 6573 6462   ;..In the "esdb
-00010f00: 2b64 6973 636f 7665 7222 2055 5249 2073  +discover" URI s
-00010f10: 6368 656d 652c 2061 6674 6572 2074 6865  cheme, after the
-00010f20: 2075 7365 7220 696e 666f 2073 7472 696e   user info strin
-00010f30: 672c 2074 6865 7265 206d 7573 7420 6265  g, there must be
-00010f40: 2061 2064 6f6d 6169 6e0a 6e61 6d65 2077   a domain.name w
-00010f50: 6869 6368 2073 686f 756c 6420 6964 656e  hich should iden
-00010f60: 7469 6679 2061 2063 6c75 7374 6572 206f  tify a cluster o
-00010f70: 6620 4576 656e 7453 746f 7265 4442 2073  f EventStoreDB s
-00010f80: 6572 7665 7273 2e20 5468 6520 636c 6965  ervers. The clie
-00010f90: 6e74 2077 696c 6c20 7573 6520 6120 444e  nt will use a DN
-00010fa0: 530a 7365 7276 6572 2074 6f20 7265 736f  S.server to reso
-00010fb0: 6c76 6520 7468 6520 646f 6d61 696e 206e  lve the domain n
-00010fc0: 616d 6520 746f 2061 206c 6973 7420 6f66  ame to a list of
-00010fd0: 2061 6464 7265 7373 6573 206f 6620 4576   addresses of Ev
-00010fe0: 656e 7453 746f 7265 4442 2073 6572 7665  entStoreDB serve
-00010ff0: 7273 2c0a 6279 2071 7565 7279 696e 6720  rs,.by querying 
-00011000: 666f 7220 2741 2720 7265 636f 7264 732e  for 'A' records.
-00011010: 2049 6e20 7468 6973 2063 6173 652c 2074   In this case, t
-00011020: 6865 2070 6f72 7420 6e75 6d62 6572 2022  he port number "
-00011030: 3231 3133 2220 7769 6c6c 2062 6520 7573  2113" will be us
-00011040: 6564 2074 6f0a 636f 6e73 7472 7563 7420  ed to.construct 
-00011050: 6752 5043 2074 6172 6765 7473 2066 726f  gRPC targets fro
-00011060: 6d20 7468 6520 6164 6472 6573 7365 7320  m the addresses 
-00011070: 6f62 7461 696e 6564 2066 726f 6d20 2741  obtained from 'A
-00011080: 2720 7265 636f 7264 7320 7072 6f76 6964  ' records provid
-00011090: 6564 2062 7920 7468 650a 444e 5320 7365  ed by the.DNS se
-000110a0: 7276 6572 2e20 5468 6572 6566 6f72 652c  rver. Therefore,
-000110b0: 2069 6620 796f 7520 7761 6e74 2074 6f20   if you want to 
-000110c0: 7573 6520 7468 6520 2265 7364 622b 6469  use the "esdb+di
-000110d0: 7363 6f76 6572 2220 5552 4920 7363 6865  scover" URI sche
-000110e0: 6d65 2c20 796f 7520 7769 6c6c 0a6e 6565  me, you will.nee
-000110f0: 6420 746f 2063 6f6e 6669 6775 7265 2044  d to configure D
-00011100: 4e53 2077 6865 6e20 7365 7474 696e 6720  NS when setting 
-00011110: 7570 2079 6f75 7220 4576 656e 7453 746f  up your EventSto
-00011120: 7265 4442 2063 6c75 7374 6572 2e0a 0a57  reDB cluster...W
-00011130: 6974 6820 626f 7468 2074 6865 2022 6573  ith both the "es
-00011140: 6462 2220 616e 6420 2265 7364 622b 6469  db" and "esdb+di
-00011150: 736f 6376 6572 2220 5552 4920 7363 6865  socver" URI sche
-00011160: 6d65 732c 2074 6865 2063 6c69 656e 7420  mes, the client 
-00011170: 6669 7273 746c 7920 6f62 7461 696e 730a  firstly obtains.
-00011180: 6120 6c69 7374 206f 6620 6752 5043 2074  a list of gRPC t
-00011190: 6172 6765 7473 3a20 6569 7468 6572 2064  argets: either d
-000111a0: 6972 6563 746c 7920 6672 6f6d 2022 6573  irectly from "es
-000111b0: 6462 2220 636f 6e6e 6563 7469 6f6e 2073  db" connection s
-000111c0: 7472 696e 6773 3b20 6f72 2069 6e64 6972  trings; or indir
-000111d0: 6563 746c 790a 6672 6f6d 2022 6573 6462  ectly.from "esdb
-000111e0: 2b64 6973 636f 7665 7222 2063 6f6e 6e65  +discover" conne
-000111f0: 6374 696f 6e20 7374 7269 6e67 7320 7669  ction strings vi
-00011200: 6120 444e 532e 2054 6869 7320 6c69 7374  a DNS. This list
-00011210: 206f 6620 7461 7267 6574 7320 6973 206b   of targets is k
-00011220: 6e6f 776e 2061 7320 7468 650a 2267 6f73  nown as the."gos
-00011230: 7369 7020 7365 6564 222e 2054 6865 2063  sip seed". The c
-00011240: 6c69 656e 7420 7769 6c6c 2074 6865 6e20  lient will then 
-00011250: 6174 7465 6d70 7420 746f 2063 6f6e 6e65  attempt to conne
-00011260: 6374 2074 6f20 6561 6368 2067 5250 4320  ct to each gRPC 
-00011270: 7461 7267 6574 2069 6e20 7475 726e 2c0a  target in turn,.
-00011280: 6174 7465 6d70 7469 6e67 2074 6f20 6361  attempting to ca
-00011290: 6c6c 2074 6865 2045 7665 6e74 5374 6f72  ll the EventStor
-000112a0: 6544 4220 476f 7373 6970 2041 5049 2074  eDB Gossip API t
-000112b0: 6f20 6f62 7461 696e 2069 6e66 6f72 6d61  o obtain informa
-000112c0: 7469 6f6e 2061 626f 7574 2074 6865 0a45  tion about the.E
-000112d0: 7665 6e74 5374 6f72 6544 4220 636c 7573  ventStoreDB clus
-000112e0: 7465 722e 2041 206d 656d 6265 7220 6f66  ter. A member of
-000112f0: 2074 6865 2063 6c75 7374 6572 2069 7320   the cluster is 
-00011300: 7365 6c65 6374 6564 2062 7920 7468 6520  selected by the 
-00011310: 636c 6965 6e74 2c20 6163 636f 7264 696e  client, accordin
-00011320: 670a 746f 2074 6865 2022 6e6f 6465 2070  g.to the "node p
-00011330: 7265 6665 7265 6e63 6522 206f 7074 696f  reference" optio
-00011340: 6e20 2873 6565 2062 656c 6f77 292e 2054  n (see below). T
-00011350: 6865 2063 6c69 656e 7420 6d61 7920 7468  he client may th
-00011360: 656e 206e 6565 6420 746f 2063 6c6f 7365  en need to close
-00011370: 2069 7473 0a63 6f6e 6e65 6374 696f 6e20   its.connection 
-00011380: 616e 6420 7265 636f 6e6e 6563 7420 746f  and reconnect to
-00011390: 2074 6865 2073 656c 6563 7465 6420 7365   the selected se
-000113a0: 7276 6572 2e0a 0a49 6e20 626f 7468 2074  rver...In both t
-000113b0: 6865 2022 6573 6462 2220 616e 6420 2265  he "esdb" and "e
-000113c0: 7364 622b 6469 7363 6f76 6572 2220 7363  sdb+discover" sc
-000113d0: 6865 6d65 732c 2074 6865 2055 5249 206d  hemes, the URI m
-000113e0: 6179 2069 6e63 6c75 6465 2061 2075 7365  ay include a use
-000113f0: 7220 696e 666f 2073 7472 696e 672e 0a49  r info string..I
-00011400: 6620 6974 2065 7869 7374 7320 696e 2074  f it exists in t
-00011410: 6865 2055 5249 2c20 7468 6520 7573 6572  he URI, the user
-00011420: 2069 6e66 6f20 7374 7269 6e67 206d 7573   info string mus
-00011430: 7420 6265 2073 6570 6172 6174 6564 2066  t be separated f
-00011440: 726f 6d20 7468 6520 7265 7374 206f 6620  rom the rest of 
-00011450: 7468 6520 5552 490a 7769 7468 2074 6865  the URI.with the
-00011460: 2022 4022 2063 6861 7261 6374 6572 2e20   "@" character. 
-00011470: 5468 6520 7573 6572 2069 6e66 6f20 7374  The user info st
-00011480: 7269 6e67 206d 7573 7420 696e 636c 7564  ring must includ
-00011490: 6520 6120 7573 6572 6e61 6d65 2061 6e64  e a username and
-000114a0: 2061 2070 6173 7377 6f72 642c 0a73 6570   a password,.sep
-000114b0: 6172 6174 6564 2077 6974 6820 7468 6520  arated with the 
-000114c0: 223a 2220 6368 6172 6163 7465 722e 0a0a  ":" character...
-000114d0: 2020 2020 7573 6572 2d69 6e66 6f20 3d20      user-info = 
-000114e0: 7573 6572 6e61 6d65 202c 2022 3a22 202c  username , ":" ,
-000114f0: 2070 6173 7377 6f72 6420 3b0a 0a54 6865   password ;..The
-00011500: 2075 7365 7220 696e 666f 2069 7320 7365   user info is se
-00011510: 6e74 2062 7920 7468 6520 636c 6965 6e74  nt by the client
-00011520: 2061 7320 2263 616c 6c20 6372 6564 656e   as "call creden
-00011530: 7469 616c 7322 2069 6e20 6561 6368 2063  tials" in each c
-00011540: 616c 6c20 746f 2061 2022 7365 6375 7265  all to a "secure
-00011550: 220a 7365 7276 6572 2c20 696e 2061 2022  ".server, in a "
-00011560: 6261 7369 6320 6175 7468 2220 6175 7468  basic auth" auth
-00011570: 6f72 697a 6174 696f 6e20 6865 6164 6572  orization header
-00011580: 2e20 5468 6973 2061 7574 686f 7269 7a61  . This authoriza
-00011590: 7469 6f6e 2068 6561 6465 7220 6973 2075  tion header is u
-000115a0: 7365 6420 6279 0a74 6865 2073 6572 7665  sed by.the serve
-000115b0: 7220 746f 2061 7574 6865 6e74 6963 6174  r to authenticat
-000115c0: 6520 7468 6520 636c 6965 6e74 2e20 5468  e the client. Th
-000115d0: 6520 6175 7468 6f72 697a 6174 696f 6e20  e authorization 
-000115e0: 6865 6164 6572 2069 7320 6e6f 7420 7365  header is not se
-000115f0: 6e74 2074 6f0a 2269 6e73 6563 7572 6522  nt to."insecure"
-00011600: 2073 6572 7665 7273 2e0a 0a49 6e20 626f   servers...In bo
-00011610: 7468 2074 6865 2022 6573 6462 2220 616e  th the "esdb" an
-00011620: 6420 2265 7364 622b 6469 7363 6f76 6572  d "esdb+discover
-00011630: 2220 7363 6865 6d65 732c 2074 6865 206f  " schemes, the o
-00011640: 7074 696f 6e61 6c20 7175 6572 7920 7374  ptional query st
-00011650: 7269 6e67 206d 7573 7420 6265 206f 6e65  ring must be one
-00011660: 0a6f 7220 6d61 6e79 2066 6965 6c64 2d76  .or many field-v
-00011670: 616c 7565 2061 7267 756d 656e 7473 2c20  alue arguments, 
-00011680: 7365 7061 7261 7465 6420 6672 6f6d 2065  separated from e
-00011690: 6163 6820 6f74 6865 7220 7769 7468 2074  ach other with t
-000116a0: 6865 2022 2622 2063 6861 7261 6374 6572  he "&" character
-000116b0: 2e0a 0a20 2020 2071 7565 7279 2d73 7472  ...    query-str
-000116c0: 696e 6720 3d20 6669 656c 642d 7661 6c75  ing = field-valu
-000116d0: 652c 207b 2022 2622 2c20 6669 656c 642d  e, { "&", field-
-000116e0: 7661 6c75 6520 7d20 3b0a 0a45 6163 6820  value } ;..Each 
-000116f0: 6669 656c 642d 7661 6c75 6520 6172 6775  field-value argu
-00011700: 6d65 6e74 206d 7573 7420 6265 206f 6e65  ment must be one
-00011710: 206f 6620 7468 6520 7375 7070 6f72 7465   of the supporte
-00011720: 6420 6669 656c 6473 2c20 616e 6420 616e  d fields, and an
-00011730: 0a61 7070 726f 7072 6961 7465 2076 616c  .appropriate val
-00011740: 7565 2c20 7365 7061 7261 7465 6420 7769  ue, separated wi
-00011750: 7468 2074 6865 2022 3d22 2063 6861 7261  th the "=" chara
-00011760: 6374 6572 2e0a 0a20 2020 2066 6965 6c64  cter...    field
-00011770: 2d76 616c 7565 203d 2028 2022 546c 7322  -value = ( "Tls"
-00011780: 2c20 223d 2220 2c20 2274 7275 6522 207c  , "=" , "true" |
-00011790: 2022 6661 6c73 6522 2029 0a20 2020 2020   "false" ).     
-000117a0: 2020 2020 2020 2020 2020 207c 2028 2022             | ( "
-000117b0: 546c 7356 6572 6966 7943 6572 7422 2c20  TlsVerifyCert", 
-000117c0: 223d 2220 2c20 2274 7275 6522 207c 2022  "=" , "true" | "
-000117d0: 6661 6c73 6522 2029 0a20 2020 2020 2020  false" ).       
-000117e0: 2020 2020 2020 2020 207c 2028 2022 436f           | ( "Co
-000117f0: 6e6e 6563 7469 6f6e 4e61 6d65 222c 2022  nnectionName", "
-00011800: 3d22 202c 2073 7472 696e 6720 290a 2020  =" , string ).  
-00011810: 2020 2020 2020 2020 2020 2020 2020 7c20                | 
-00011820: 2820 224e 6f64 6550 7265 6665 7265 6e63  ( "NodePreferenc
-00011830: 6522 2c20 223d 2220 2c20 226c 6561 6465  e", "=" , "leade
-00011840: 7222 207c 2022 666f 6c6c 6f77 6572 2220  r" | "follower" 
-00011850: 7c20 2272 6561 646f 6e6c 7972 6570 6c69  | "readonlyrepli
-00011860: 6361 2220 7c20 2272 616e 646f 6d22 2029  ca" | "random" )
-00011870: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011880: 207c 2028 2022 4465 6661 756c 7444 6561   | ( "DefaultDea
-00011890: 646c 696e 6522 2c20 223d 2220 2c20 696e  dline", "=" , in
-000118a0: 7465 6765 7220 290a 2020 2020 2020 2020  teger ).        
-000118b0: 2020 2020 2020 2020 7c20 2820 2247 6f73          | ( "Gos
-000118c0: 7369 7054 696d 656f 7574 222c 2022 3d22  sipTimeout", "="
-000118d0: 202c 2069 6e74 6567 6572 2029 0a20 2020   , integer ).   
-000118e0: 2020 2020 2020 2020 2020 2020 207c 2028               | (
-000118f0: 2022 4d61 7844 6973 636f 7665 7241 7474   "MaxDiscoverAtt
-00011900: 656d 7074 7322 2c20 223d 2220 2c20 696e  empts", "=" , in
-00011910: 7465 6765 7220 290a 2020 2020 2020 2020  teger ).        
-00011920: 2020 2020 2020 2020 7c20 2820 2244 6973          | ( "Dis
-00011930: 636f 7665 7279 496e 7465 7276 616c 222c  coveryInterval",
-00011940: 2022 3d22 202c 2069 6e74 6567 6572 2029   "=" , integer )
-00011950: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011960: 207c 2028 2022 4d61 7844 6973 636f 7665   | ( "MaxDiscove
-00011970: 7241 7474 656d 7074 7322 2c20 223d 2220  rAttempts", "=" 
-00011980: 2c20 696e 7465 6765 7220 290a 2020 2020  , integer ).    
-00011990: 2020 2020 2020 2020 2020 2020 7c20 2820              | ( 
-000119a0: 224b 6565 7041 6c69 7665 496e 7465 7276  "KeepAliveInterv
-000119b0: 616c 222c 2022 3d22 202c 2069 6e74 6567  al", "=" , integ
-000119c0: 6572 2029 0a20 2020 2020 2020 2020 2020  er ).           
-000119d0: 2020 2020 207c 2028 2022 4b65 6570 416c       | ( "KeepAl
-000119e0: 6976 6549 6e74 6572 7661 6c22 2c20 223d  iveInterval", "=
-000119f0: 2220 2c20 696e 7465 6765 7220 2920 3b0a  " , integer ) ;.
-00011a00: 0a54 6865 2074 6162 6c65 2062 656c 6f77  .The table below
-00011a10: 2064 6573 6372 6962 6573 2074 6865 2071   describes the q
-00011a20: 7565 7279 2066 6965 6c64 2d76 616c 7565  uery field-value
-00011a30: 7320 7375 7070 6f72 7465 6420 6279 2074  s supported by t
-00011a40: 6869 7320 636c 6965 6e74 2e0a 0a7c 2046  his client...| F
-00011a50: 6965 6c64 2020 2020 2020 2020 2020 2020  ield            
-00011a60: 2020 207c 2056 616c 7565 2020 2020 2020     | Value      
-00011a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011aa0: 2020 2020 2020 2020 2020 207c 2044 6573             | Des
-00011ab0: 6372 6970 7469 6f6e 2020 2020 2020 2020  cription        
-00011ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011b40: 2020 2020 2020 2020 2020 2020 2020 207c                 |
-00011b50: 0a7c 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .|--------------
-00011b60: 2d2d 2d2d 2d2d 2d7c 2d2d 2d2d 2d2d 2d2d  -------|--------
-00011b70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011b80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011b90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011ba0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d7c  ---------------|
-00011bb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011bc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011bd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011be0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011bf0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011c00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011c10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011c20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011c30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011c40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011c50: 2d2d 2d7c 0a7c 2054 6c73 2020 2020 2020  ---|.| Tls      
-00011c60: 2020 2020 2020 2020 2020 207c 2022 7472             | "tr
-00011c70: 7565 222c 2022 6661 6c73 6522 2028 6465  ue", "false" (de
-00011c80: 6661 756c 743a 2022 7472 7565 2229 2020  fault: "true")  
-00011c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011cb0: 2020 207c 2049 6620 2274 7275 6522 2074     | If "true" t
-00011cc0: 6865 2063 6c69 656e 7420 7769 6c6c 2063  he client will c
-00011cd0: 7265 6174 6520 6120 2273 6563 7572 6522  reate a "secure"
-00011ce0: 2067 5250 4320 6368 616e 6e65 6c2e 2049   gRPC channel. I
-00011cf0: 6620 2266 616c 7365 2220 7468 6520 636c  f "false" the cl
-00011d00: 6965 6e74 2077 696c 6c20 6372 6561 7465  ient will create
-00011d10: 2061 6e20 2269 6e73 6563 7572 6522 2067   an "insecure" g
-00011d20: 5250 4320 6368 616e 6e65 6c2e 2054 6869  RPC channel. Thi
-00011d30: 7320 6d75 7374 206d 6174 6368 2074 6865  s must match the
-00011d40: 2073 6572 7665 7220 636f 6e66 6967 7572   server configur
-00011d50: 6174 696f 6e2e 207c 0a7c 2054 6c73 5665  ation. |.| TlsVe
-00011d60: 7269 6679 4365 7274 2020 2020 2020 207c  rifyCert       |
-00011d70: 2022 7472 7565 222c 2022 6661 6c73 6522   "true", "false"
-00011d80: 2028 6465 6661 756c 743a 2022 7472 7565   (default: "true
-00011d90: 2229 2020 2020 2020 2020 2020 2020 2020  ")              
-00011da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011db0: 2020 2020 2020 207c 204e 4f54 2059 4554         | NOT YET
-00011dc0: 2049 4d50 4c45 4d45 4e54 4544 2020 2020   IMPLEMENTED    
-00011dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011e50: 2020 2020 2020 2020 2020 207c 0a7c 2043             |.| C
-00011e60: 6f6e 6e65 6374 696f 6e4e 616d 6520 2020  onnectionName   
-00011e70: 2020 207c 2073 7472 696e 6720 2864 6566     | string (def
-00011e80: 6175 6c74 3a20 6175 746f 2d67 656e 6572  ault: auto-gener
-00011e90: 6174 6564 2076 6572 7369 6f6e 2d34 2055  ated version-4 U
-00011ea0: 5549 4429 2020 2020 2020 2020 2020 2020  UID)            
-00011eb0: 2020 2020 2020 2020 2020 207c 2053 656e             | Sen
-00011ec0: 7420 696e 2063 616c 6c20 6d65 7461 6461  t in call metada
-00011ed0: 7461 2066 6f72 2065 7665 7279 2063 616c  ta for every cal
-00011ee0: 6c2c 2074 6f20 6964 656e 7469 6679 2074  l, to identify t
-00011ef0: 6865 2063 6c69 656e 7420 746f 2074 6865  he client to the
-00011f00: 2063 6c75 7374 6572 2e20 2020 2020 2020   cluster.       
-00011f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011f50: 2020 2020 2020 2020 2020 2020 2020 207c                 |
-00011f60: 0a7c 204e 6f64 6550 7265 6665 7265 6e63  .| NodePreferenc
-00011f70: 6520 2020 2020 207c 2022 6c65 6164 6572  e      | "leader
-00011f80: 222c 2022 666f 6c6c 6f77 6572 222c 2022  ", "follower", "
-00011f90: 7265 6164 6f6e 6c79 7265 706c 6963 6122  readonlyreplica"
-00011fa0: 2c20 2272 616e 646f 6d22 2028 6465 6661  , "random" (defa
-00011fb0: 756c 743a 2022 6c65 6164 6572 2229 207c  ult: "leader") |
-00011fc0: 2054 6865 206e 6f64 6520 7374 6174 6520   The node state 
-00011fd0: 7072 6566 6572 7265 6420 6279 2074 6865  preferred by the
-00011fe0: 2063 6c69 656e 742e 2054 6865 2063 6c69   client. The cli
-00011ff0: 656e 7420 7769 6c6c 2073 656c 6563 7420  ent will select 
-00012000: 6120 6e6f 6465 2066 726f 6d20 7468 6520  a node from the 
-00012010: 636c 7573 7465 7220 696e 666f 2072 6563  cluster info rec
-00012020: 6569 7665 6420 6672 6f6d 2074 6865 2047  eived from the G
-00012030: 6f73 7369 7020 4150 4920 6163 636f 7264  ossip API accord
-00012040: 696e 6720 746f 2074 6869 7320 7072 6566  ing to this pref
-00012050: 6572 656e 6365 2e20 2020 2020 2020 2020  erence.         
-00012060: 2020 207c 0a7c 2044 6566 6175 6c74 4465     |.| DefaultDe
-00012070: 6164 6c69 6e65 2020 2020 207c 2069 6e74  adline     | int
-00012080: 6567 6572 2028 6465 6661 756c 743a 2060  eger (default: `
-00012090: 4e6f 6e65 6029 2020 2020 2020 2020 2020  None`)          
-000120a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000120b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000120c0: 2020 207c 2054 6865 2064 6566 6175 6c74     | The default
-000120d0: 2076 616c 7565 2028 696e 2073 6563 6f6e   value (in secon
-000120e0: 6473 2920 6f66 2074 6865 2060 7469 6d65  ds) of the `time
-000120f0: 6f75 7460 2061 7267 756d 656e 7420 6f66  out` argument of
-00012100: 2063 6c69 656e 7420 2277 7269 7465 2220   client "write" 
-00012110: 6d65 7468 6f64 7320 7375 6368 2061 7320  methods such as 
-00012120: 6061 7070 656e 645f 6576 656e 7473 2829  `append_events()
-00012130: 602e 2020 2020 2020 2020 2020 2020 2020  `.              
-00012140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012160: 2020 2020 2020 207c 0a7c 2047 6f73 7369         |.| Gossi
-00012170: 7054 696d 656f 7574 2020 2020 2020 207c  pTimeout       |
-00012180: 2069 6e74 6567 6572 2028 6465 6661 756c   integer (defaul
-00012190: 743a 2035 2920 2020 2020 2020 2020 2020  t: 5)           
-000121a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000121b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000121c0: 2020 2020 2020 207c 2054 6865 2064 6566         | The def
-000121d0: 6175 6c74 2076 616c 7565 2028 696e 2073  ault value (in s
-000121e0: 6563 6f6e 6473 2920 6f66 2074 6865 2060  econds) of the `
-000121f0: 7469 6d65 6f75 7460 2061 7267 756d 656e  timeout` argumen
-00012200: 7420 6f66 2067 6f73 7369 7020 7265 6164  t of gossip read
-00012210: 206d 6574 686f 6473 2c20 7375 6368 2061   methods, such a
-00012220: 7320 6072 6561 645f 676f 7373 6970 2829  s `read_gossip()
-00012230: 602e 2020 2020 2020 2020 2020 2020 2020  `.              
-00012240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012260: 2020 2020 2020 2020 2020 207c 0a7c 204d             |.| M
-00012270: 6178 4469 7363 6f76 6572 4174 7465 6d70  axDiscoverAttemp
-00012280: 7473 207c 2069 6e74 6567 6572 2028 6465  ts | integer (de
-00012290: 6661 756c 743a 2031 3029 2020 2020 2020  fault: 10)      
-000122a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000122b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000122c0: 2020 2020 2020 2020 2020 207c 2054 6865             | The
-000122d0: 206e 756d 6265 7220 6f66 2061 7474 656d   number of attem
-000122e0: 7074 7320 746f 2072 6561 6420 676f 7373  pts to read goss
-000122f0: 6970 2077 6865 6e20 636f 6e6e 6563 7469  ip when connecti
-00012300: 6e67 206f 7220 7265 636f 6e6e 6563 7469  ng or reconnecti
-00012310: 6e67 2074 6f20 6120 636c 7573 7465 7220  ng to a cluster 
-00012320: 6d65 6d62 6572 2e20 2020 2020 2020 2020  member.         
-00012330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012360: 2020 2020 2020 2020 2020 2020 2020 207c                 |
-00012370: 0a7c 2044 6973 636f 7665 7279 496e 7465  .| DiscoveryInte
-00012380: 7276 616c 2020 207c 2069 6e74 6567 6572  rval   | integer
-00012390: 2028 6465 6661 756c 743a 2031 3030 2920   (default: 100) 
-000123a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000123b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000123c0: 2020 2020 2020 2020 2020 2020 2020 207c                 |
-000123d0: 2048 6f77 206c 6f6e 6720 746f 2077 6169   How long to wai
-000123e0: 7420 2869 6e20 6d69 6c6c 6973 6563 6f6e  t (in millisecon
-000123f0: 6473 2920 6265 7477 6565 6e20 676f 7373  ds) between goss
-00012400: 6970 2072 6574 7269 6573 2e20 2020 2020  ip retries.     
-00012410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012470: 2020 207c 0a7c 204b 6565 7041 6c69 7665     |.| KeepAlive
-00012480: 496e 7465 7276 616c 2020 207c 2069 6e74  Interval   | int
-00012490: 6567 6572 2028 6465 6661 756c 743a 2060  eger (default: `
-000124a0: 4e6f 6e65 6029 2020 2020 2020 2020 2020  None`)          
-000124b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000124c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000124d0: 2020 207c 2054 6865 2076 616c 7565 206f     | The value o
-000124e0: 6620 7468 6520 2267 7270 632e 6b65 6570  f the "grpc.keep
-000124f0: 616c 6976 655f 6d73 2220 6752 5043 2063  alive_ms" gRPC c
-00012500: 6861 6e6e 656c 206f 7074 696f 6e2e 2020  hannel option.  
-00012510: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012520: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012570: 2020 2020 2020 207c 0a7c 204b 6565 7041         |.| KeepA
-00012580: 6c69 7665 5469 6d65 6f75 7420 2020 207c  liveTimeout    |
-00012590: 2069 6e74 6567 6572 2028 6465 6661 756c   integer (defaul
-000125a0: 743a 2060 4e6f 6e65 6029 2020 2020 2020  t: `None`)      
-000125b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000125c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000125d0: 2020 2020 2020 207c 2054 6865 2076 616c         | The val
-000125e0: 7565 206f 6620 7468 6520 2267 7270 632e  ue of the "grpc.
-000125f0: 6b65 6570 616c 6976 655f 7469 6d65 6f75  keepalive_timeou
-00012600: 745f 6d73 2220 6752 5043 2063 6861 6e6e  t_ms" gRPC chann
-00012610: 656c 206f 7074 696f 6e2e 2020 2020 2020  el option.      
-00012620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012670: 2020 2020 2020 2020 2020 207c 0a0a 0a48             |...H
-00012680: 6572 6520 6172 6520 736f 6d65 2065 7861  ere are some exa
-00012690: 6d70 6c65 7320 6f66 2045 7665 6e74 5374  mples of EventSt
-000126a0: 6f72 6544 4220 636f 6e6e 6563 7469 6f6e  oreDB connection
-000126b0: 2073 7472 696e 6720 5552 4973 2e0a 0a20   string URIs... 
-000126c0: 2020 2023 2047 6574 2063 6c75 7374 6572     # Get cluster
-000126d0: 2069 6e66 6f20 6672 6f6d 2073 6563 7572   info from secur
-000126e0: 6520 7365 7276 6572 2073 6f63 6b65 7420  e server socket 
-000126f0: 6c6f 6361 6c68 6f73 743a 3231 3133 2c0a  localhost:2113,.
-00012700: 2020 2020 2320 616e 6420 7573 6520 2261      # and use "a
-00012710: 646d 696e 2220 616e 6420 2263 6861 6e67  dmin" and "chang
-00012720: 6569 7422 2061 7320 7573 6572 6e61 6d65  eit" as username
-00012730: 2061 6e64 2070 6173 7377 6f72 640a 2020   and password.  
-00012740: 2020 2320 7768 656e 206d 616b 696e 6720    # when making 
-00012750: 6361 6c6c 7320 746f 2045 7665 6e74 5374  calls to EventSt
-00012760: 6f72 6544 4220 4150 4920 6d65 7468 6f64  oreDB API method
-00012770: 732e 0a0a 2020 2020 6573 6462 3a2f 2f61  s...    esdb://a
-00012780: 646d 696e 3a63 6861 6e67 6569 7440 6c6f  dmin:changeit@lo
-00012790: 6361 6c68 6f73 743a 3231 3133 0a0a 0a20  calhost:2113... 
-000127a0: 2020 2023 2047 6574 2063 6c75 7374 6572     # Get cluster
-000127b0: 2069 6e66 6f20 6672 6f6d 2069 6e73 6563   info from insec
-000127c0: 7572 6520 7365 7276 6572 2073 6f63 6b65  ure server socke
-000127d0: 7420 3132 372e 302e 302e 313a 3231 3134  t 127.0.0.1:2114
-000127e0: 0a0a 2020 2020 6573 6462 3a2f 2f31 3237  ..    esdb://127
-000127f0: 2e30 2e30 2e31 3a32 3131 343f 546c 733d  .0.0.1:2114?Tls=
-00012800: 6661 6c73 650a 0a0a 2020 2020 2320 4765  false...    # Ge
-00012810: 7420 636c 7573 7465 7220 696e 666f 2066  t cluster info f
-00012820: 726f 6d20 6164 6472 6573 7365 7320 696e  rom addresses in
-00012830: 2027 4127 2072 6563 6f72 6473 2066 6f72   'A' records for
-00012840: 2063 6c75 7374 6572 312e 6578 616d 706c   cluster1.exampl
-00012850: 652e 636f 6d2c 0a20 2020 2023 2061 6e64  e.com,.    # and
-00012860: 2075 7365 2061 2064 6566 6175 6c74 2064   use a default d
-00012870: 6561 646c 696e 6520 666f 7220 6d61 6b69  eadline for maki
-00012880: 6e67 2063 616c 6c73 2074 6f20 4576 656e  ng calls to Even
-00012890: 7453 746f 7265 2041 5049 206d 6574 686f  tStore API metho
-000128a0: 642e 0a0a 2020 2020 6573 6462 2b64 6973  d...    esdb+dis
-000128b0: 636f 7665 723a 2f2f 6164 6d69 6e3a 6368  cover://admin:ch
-000128c0: 616e 6765 6974 4063 6c75 7374 6572 312e  angeit@cluster1.
-000128d0: 6578 616d 706c 652e 636f 6d3f 4465 6661  example.com?Defa
-000128e0: 756c 7444 6561 646c 696e 653d 350a 0a0a  ultDeadline=5...
-000128f0: 2020 2020 2320 4765 7420 636c 7573 7465      # Get cluste
-00012900: 7220 696e 666f 2066 726f 6d20 6569 7468  r info from eith
-00012910: 6572 206c 6f63 616c 686f 7374 3a32 3131  er localhost:211
-00012920: 3120 6f72 206c 6f63 616c 686f 7374 3a32  1 or localhost:2
-00012930: 3131 3220 6f72 0a20 2020 2023 206c 6f63  112 or.    # loc
-00012940: 616c 686f 7374 3a32 3131 332c 2061 6e64  alhost:2113, and
-00012950: 2074 6865 6e20 636f 6e6e 6563 7420 746f   then connect to
-00012960: 2061 2066 6f6c 6c6f 7765 7220 6e6f 6465   a follower node
-00012970: 2069 6e20 7468 6520 636c 7573 7465 722e   in the cluster.
-00012980: 0a0a 2020 2020 6573 6462 3a2f 2f61 646d  ..    esdb://adm
-00012990: 696e 3a63 6861 6e67 6569 7440 6c6f 6361  in:changeit@loca
-000129a0: 6c68 6f73 743a 3231 3131 2c6c 6f63 616c  lhost:2111,local
-000129b0: 686f 7374 3a32 3131 322c 6c6f 6361 6c68  host:2112,localh
-000129c0: 6f73 743a 3231 3133 3f4e 6f64 6550 7265  ost:2113?NodePre
-000129d0: 6665 7265 6e63 653d 666f 6c6c 6f77 6572  ference=follower
-000129e0: 0a0a 0a20 2020 2023 2047 6574 2063 6c75  ...    # Get clu
-000129f0: 7374 6572 2069 6e66 6f20 6672 6f6d 2061  ster info from a
-00012a00: 6464 7265 7373 6573 2069 6e20 2741 2720  ddresses in 'A' 
-00012a10: 7265 636f 7264 7320 666f 7220 636c 7573  records for clus
-00012a20: 7465 7231 2e65 7861 6d70 6c65 2e63 6f6d  ter1.example.com
-00012a30: 2c0a 2020 2020 2320 616e 6420 636f 6e66  ,.    # and conf
-00012a40: 6967 7572 6520 226b 6565 7020 616c 6976  igure "keep aliv
-00012a50: 6522 2074 696d 656f 7574 2061 6e64 2069  e" timeout and i
-00012a60: 6e74 6572 7661 6c20 696e 2074 6865 2067  nterval in the g
-00012a70: 5250 4320 6368 616e 6e65 6c2e 0a0a 2020  RPC channel...  
-00012a80: 2020 6573 6462 2b64 6973 636f 7665 723a    esdb+discover:
-00012a90: 2f2f 6164 6d69 6e3a 6368 616e 6765 6974  //admin:changeit
-00012aa0: 4063 6c75 7374 6572 312e 6578 616d 706c  @cluster1.exampl
-00012ab0: 652e 636f 6d3f 4b65 6570 416c 6976 6549  e.com?KeepAliveI
-00012ac0: 6e74 6572 7661 6c3d 3130 3030 3026 4b65  nterval=10000&Ke
-00012ad0: 6570 416c 6976 6554 696d 656f 7574 3d31  epAliveTimeout=1
-00012ae0: 3030 3030 0a0a 0a50 6c65 6173 6520 6e6f  0000...Please no
-00012af0: 7465 2c20 7468 6520 636c 6965 6e74 2069  te, the client i
-00012b00: 7320 696e 7365 6e73 6974 6976 6520 746f  s insensitive to
-00012b10: 2074 6865 2063 6173 6520 6f66 2066 6965   the case of fie
-00012b20: 6c64 7320 616e 6420 7661 6c75 6573 2e20  lds and values. 
-00012b30: 4966 2066 6965 6c64 7320 6172 650a 7265  If fields are.re
-00012b40: 7065 6174 6564 2069 6e20 7468 6520 7175  peated in the qu
-00012b50: 6572 7920 7374 7269 6e67 2c20 7468 6520  ery string, the 
-00012b60: 7175 6572 7920 7374 7269 6e67 2077 696c  query string wil
-00012b70: 6c20 6265 2070 6172 7365 6420 7769 7468  l be parsed with
-00012b80: 6f75 7420 6572 726f 722e 2048 6f77 6576  out error. Howev
-00012b90: 6572 2c0a 7468 6520 636f 6e6e 6563 7469  er,.the connecti
-00012ba0: 6f6e 206f 7074 696f 6e73 2075 7365 6420  on options used 
-00012bb0: 6279 2074 6865 2063 6c69 656e 7420 7769  by the client wi
-00012bc0: 6c6c 2075 7365 2074 6865 2076 616c 7565  ll use the value
-00012bd0: 206f 6620 7468 6520 6669 7273 7420 6669   of the first fi
-00012be0: 656c 642e 2041 6c6c 0a74 6865 206f 7468  eld. All.the oth
-00012bf0: 6572 2066 6965 6c64 2d76 616c 7565 7320  er field-values 
-00012c00: 696e 2074 6865 2071 7565 7279 2073 7472  in the query str
-00012c10: 696e 6720 7769 7468 2074 6865 2073 616d  ing with the sam
-00012c20: 6520 6669 656c 6420 6e61 6d65 2077 696c  e field name wil
-00012c30: 6c20 6265 2069 676e 6f72 6564 2e0a 4669  l be ignored..Fi
-00012c40: 656c 6473 2077 6974 686f 7574 2076 616c  elds without val
-00012c50: 7565 7320 7769 6c6c 2061 6c73 6f20 6265  ues will also be
-00012c60: 2069 676e 6f72 6564 2e0a 0a49 6620 7468   ignored...If th
-00012c70: 6520 636c 6965 6e74 2773 206e 6f64 6520  e client's node 
-00012c80: 7072 6566 6572 656e 6365 2069 7320 226c  preference is "l
-00012c90: 6561 6465 7222 2061 6e64 2074 6865 206e  eader" and the n
-00012ca0: 6f64 6520 6265 636f 6d65 7320 610a 2266  ode becomes a."f
-00012cb0: 6f6c 6c6f 7765 7222 2c20 7468 6520 636c  ollower", the cl
-00012cc0: 6965 6e74 2077 696c 6c20 6174 7465 6d70  ient will attemp
-00012cd0: 7420 746f 2072 6563 6f6e 6e65 6374 2074  t to reconnect t
-00012ce0: 6f20 7468 6520 6375 7272 656e 7420 6c65  o the current le
-00012cf0: 6164 6572 2077 6865 6e20 6120 6d65 7468  ader when a meth
-00012d00: 6f64 0a69 7320 6361 6c6c 6564 2074 6861  od.is called tha
-00012d10: 7420 6578 7065 6374 7320 746f 2063 616c  t expects to cal
-00012d20: 6c20 6120 6c65 6164 6572 2e20 4d65 7468  l a leader. Meth
-00012d30: 6f64 7320 7768 6963 6820 6d75 7461 7465  ods which mutate
-00012d40: 2074 6865 2073 7461 7465 206f 6620 7468   the state of th
-00012d50: 6520 6461 7461 6261 7365 0a65 7870 6563  e database.expec
-00012d60: 7420 746f 2063 616c 6c20 6120 6c65 6164  t to call a lead
-00012d70: 6572 2e20 466f 7220 7375 6368 206d 6574  er. For such met
-00012d80: 686f 6473 2c20 7468 6520 4854 5450 2068  hods, the HTTP h
-00012d90: 6561 6465 7222 7265 7175 6972 6573 2d6c  eader"requires-l
-00012da0: 6561 6465 7222 2069 7320 7365 7420 746f  eader" is set to
-00012db0: 0a22 7472 7565 222c 2061 6e64 2074 6869  ."true", and thi
-00012dc0: 7320 6865 6164 6572 2069 7320 6f62 7365  s header is obse
-00012dd0: 7276 6564 2062 7920 7468 6520 7365 7276  rved by the serv
-00012de0: 6572 2c20 616e 6420 736f 2061 206e 6f64  er, and so a nod
-00012df0: 6520 7768 6963 6820 6973 206e 6f74 2061  e which is not a
-00012e00: 206c 6561 6465 720a 7468 6174 2072 6563   leader.that rec
-00012e10: 6569 7665 7320 7375 6368 2061 2072 6571  eives such a req
-00012e20: 7565 7374 2077 696c 6c20 7265 7475 726e  uest will return
-00012e30: 2061 6e20 6572 726f 722e 2054 6869 7320   an error. This 
-00012e40: 6572 726f 7220 6973 2064 6574 6563 7465  error is detecte
-00012e50: 6420 6279 2074 6865 2063 6c69 656e 742c  d by the client,
-00012e60: 0a77 6869 6368 2077 696c 6c20 7468 656e  .which will then
-00012e70: 2063 6c6f 7365 2074 6865 2063 7572 7265   close the curre
-00012e80: 6e74 2067 5250 4320 636f 6e6e 6563 7469  nt gRPC connecti
-00012e90: 6f6e 2061 6e64 2063 7265 6174 6520 6120  on and create a 
-00012ea0: 6e65 7720 636f 6e6e 6563 7469 6f6e 2074  new connection t
-00012eb0: 6f20 7468 650a 6c65 6164 6572 2e20 5468  o the.leader. Th
-00012ec0: 6520 7265 7175 6573 7420 7769 6c6c 2074  e request will t
-00012ed0: 6865 6e20 6265 2072 6574 7269 6564 2077  hen be retried w
-00012ee0: 6974 6820 7468 6520 6c65 6164 6572 2e0a  ith the leader..
-00012ef0: 0a49 6620 7468 6520 636c 6965 6e74 2773  .If the client's
-00012f00: 206e 6f64 6520 7072 6566 6572 656e 6365   node preference
-00012f10: 2069 7320 2266 6f6c 6c6f 7765 7222 2061   is "follower" a
-00012f20: 6e64 2074 6865 7265 2061 7265 206e 6f20  nd there are no 
-00012f30: 666f 6c6c 6f77 6572 0a6e 6f64 6573 2069  follower.nodes i
-00012f40: 6e20 7468 6520 636c 7573 7465 722c 2074  n the cluster, t
-00012f50: 6865 6e20 7468 6520 636c 6965 6e74 2077  hen the client w
-00012f60: 696c 6c20 7261 6973 6520 616e 2065 7863  ill raise an exc
-00012f70: 6570 7469 6f6e 2e20 5369 6d69 6c61 726c  eption. Similarl
-00012f80: 792c 2069 6620 7468 650a 636c 6965 6e74  y, if the.client
-00012f90: 2773 206e 6f64 6520 7072 6566 6572 656e  's node preferen
-00012fa0: 6365 2069 7320 2272 6561 646f 6e6c 7972  ce is "readonlyr
-00012fb0: 6570 6c69 6361 2220 616e 6420 7468 6572  eplica" and ther
-00012fc0: 6520 6172 6520 6e6f 2072 6561 642d 6f6e  e are no read-on
-00012fd0: 6c79 2072 6570 6c69 6361 0a6e 6f64 6573  ly replica.nodes
-00012fe0: 2069 6e20 7468 6520 636c 7573 7465 722c   in the cluster,
-00012ff0: 2074 6865 6e20 7468 6520 636c 6965 6e74   then the client
-00013000: 2077 696c 6c20 616c 736f 2072 6169 7365   will also raise
-00013010: 2061 6e20 6578 6365 7074 696f 6e2e 0a0a   an exception...
-00013020: 5468 6520 6752 5043 2063 6861 6e6e 656c  The gRPC channel
-00013030: 206f 7074 696f 6e20 2267 7270 632e 6d61   option "grpc.ma
-00013040: 785f 7265 6365 6976 655f 6d65 7373 6167  x_receive_messag
-00013050: 655f 6c65 6e67 7468 2220 6973 2061 7574  e_length" is aut
-00013060: 6f6d 6174 6963 616c 6c79 0a63 6f6e 6669  omatically.confi
-00013070: 6775 7265 6420 746f 2074 6865 2076 616c  gured to the val
-00013080: 7565 2060 3137 202a 2031 3032 3420 2a20  ue `17 * 1024 * 
-00013090: 3130 3234 602e 2054 6869 7320 7661 6c75  1024`. This valu
-000130a0: 6520 6361 6e6e 6f74 2062 6520 6368 616e  e cannot be chan
-000130b0: 6765 642e 0a0a 0a23 2323 2052 6567 756c  ged....### Regul
-000130c0: 6172 2065 7870 7265 7373 696f 6e20 6669  ar expression fi
-000130d0: 6c74 6572 730a 0a54 6865 2066 696c 7465  lters..The filte
-000130e0: 7220 6172 6775 6d65 6e74 7320 696e 2060  r arguments in `
-000130f0: 7265 6164 5f61 6c6c 5f65 7665 6e74 7328  read_all_events(
-00013100: 2960 2c20 6073 7562 7363 7269 6265 5f61  )`, `subscribe_a
-00013110: 6c6c 5f65 7665 6e74 7328 2960 2c0a 6063  ll_events()`,.`c
-00013120: 7265 6174 655f 7375 6273 6372 6970 7469  reate_subscripti
-00013130: 6f6e 2829 6020 616e 6420 6063 6f6d 6d69  on()` and `commi
-00013140: 745f 706f 7369 7469 6f6e 2829 6020 6172  t_position()` ar
-00013150: 6520 6170 706c 6965 6420 746f 2074 6865  e applied to the
-00013160: 2060 7479 7065 600a 6174 7472 6962 7574   `type`.attribut
-00013170: 6520 6f66 2072 6563 6f72 6465 6420 6576  e of recorded ev
-00013180: 656e 7473 2e0a 0a54 6865 2064 6566 6175  ents...The defau
-00013190: 6c74 2076 616c 7565 206f 6620 7468 6520  lt value of the 
-000131a0: 6066 696c 7465 725f 6578 636c 7564 6560  `filter_exclude`
-000131b0: 2061 7267 756d 656e 7473 2069 7320 6465   arguments is de
-000131c0: 7369 676e 6564 2074 6f20 6578 636c 7564  signed to exclud
-000131d0: 650a 4576 656e 7453 746f 7265 4442 2022  e.EventStoreDB "
-000131e0: 7379 7374 656d 2220 616e 6420 2270 6572  system" and "per
-000131f0: 7369 7374 656e 6365 2073 7562 7363 7269  sistence subscri
-00013200: 7074 696f 6e20 636f 6e66 6967 2220 6576  ption config" ev
-00013210: 656e 7473 2c20 7768 6963 680a 6f74 6865  ents, which.othe
-00013220: 7277 6973 6520 776f 756c 6420 6265 2069  rwise would be i
-00013230: 6e63 6c75 6465 642e 2053 7973 7465 6d20  ncluded. System 
-00013240: 6576 656e 7473 2067 656e 6572 6174 6564  events generated
-00013250: 2062 7920 4576 656e 7453 746f 7265 4442   by EventStoreDB
-00013260: 2061 6c6c 0a68 6176 6520 6074 7970 6560   all.have `type`
-00013270: 2073 7472 696e 6773 2074 6861 7420 7374   strings that st
-00013280: 6172 7420 7769 7468 2074 6865 2060 2460  art with the `$`
-00013290: 2073 6967 6e2e 2050 6572 7369 7374 656e   sign. Persisten
-000132a0: 6365 2073 7562 7363 7269 7074 696f 6e0a  ce subscription.
-000132b0: 6576 656e 7473 2067 656e 6572 6174 6564  events generated
-000132c0: 2077 6865 6e20 6d61 6e69 7075 6c61 7469   when manipulati
-000132d0: 6e67 2070 6572 7369 7374 656e 6365 2073  ng persistence s
-000132e0: 7562 7363 7269 7074 696f 6e73 2061 6c6c  ubscriptions all
-000132f0: 2068 6176 6520 6074 7970 6560 0a73 7472   have `type`.str
-00013300: 696e 6773 2074 6861 7420 7374 6172 7420  ings that start 
-00013310: 7769 7468 2060 5065 7273 6973 7465 6e74  with `Persistent
-00013320: 436f 6e66 6967 602e 0a0a 466f 7220 6578  Config`...For ex
-00013330: 616d 706c 652c 2074 6f20 6d61 7463 6820  ample, to match 
-00013340: 7468 6520 7479 7065 206f 6620 4576 656e  the type of Even
-00013350: 7453 746f 7265 4442 2073 7973 7465 6d20  tStoreDB system 
-00013360: 6576 656e 7473 2c20 7573 6520 7468 6520  events, use the 
-00013370: 7265 6775 6c61 720a 6578 7072 6573 7369  regular.expressi
-00013380: 6f6e 2060 7227 5c24 2e2b 2760 2e20 506c  on `r'\$.+'`. Pl
-00013390: 6561 7365 206e 6f74 652c 2074 6865 2063  ease note, the c
-000133a0: 6f6e 7374 616e 7420 6045 5344 425f 5359  onstant `ESDB_SY
-000133b0: 5354 454d 5f45 5645 4e54 535f 5245 4745  STEM_EVENTS_REGE
-000133c0: 5860 2069 730a 7365 7420 746f 2060 7227  X` is.set to `r'
-000133d0: 5c24 2e2b 2760 2e20 596f 7520 6361 6e20  \$.+'`. You can 
-000133e0: 696d 706f 7274 2074 6869 7320 7661 6c75  import this valu
-000133f0: 650a 2860 6672 6f6d 2065 7364 6263 6c69  e.(`from esdbcli
-00013400: 656e 7420 696d 706f 7274 2045 5344 425f  ent import ESDB_
-00013410: 5359 5354 454d 5f45 5645 4e54 535f 5245  SYSTEM_EVENTS_RE
-00013420: 4745 5860 2920 616e 6420 7573 650a 6974  GEX`) and use.it
-00013430: 2077 6865 6e20 6275 696c 6469 6e67 206c   when building l
-00013440: 6f6e 6765 7220 7365 7175 656e 6365 7320  onger sequences 
-00013450: 6f66 2072 6567 756c 6172 2065 7870 7265  of regular expre
-00013460: 7373 696f 6e73 2e0a 0a53 696d 696c 6172  ssions...Similar
-00013470: 6c79 2c20 746f 206d 6174 6368 2074 6865  ly, to match the
-00013480: 2074 7970 6520 6f66 2045 7665 6e74 5374   type of EventSt
-00013490: 6f72 6544 4220 7065 7273 6973 7465 6e63  oreDB persistenc
-000134a0: 6520 7375 6273 6372 6970 7469 6f6e 2065  e subscription e
-000134b0: 7665 6e74 732c 2075 7365 2074 6865 0a72  vents, use the.r
-000134c0: 6567 756c 6172 2065 7870 7265 7373 696f  egular expressio
-000134d0: 6e20 6072 2750 6572 7369 7374 656e 7443  n `r'PersistentC
-000134e0: 6f6e 6669 675c 642b 2760 2e20 5468 6520  onfig\d+'`. The 
-000134f0: 636f 6e73 7461 6e74 2060 4553 4442 5f50  constant `ESDB_P
-00013500: 4552 5349 5354 454e 545f 434f 4e46 4947  ERSISTENT_CONFIG
-00013510: 5f45 5645 4e54 535f 5245 4745 5860 0a69  _EVENTS_REGEX`.i
-00013520: 7320 7365 7420 746f 2060 7227 5065 7273  s set to `r'Pers
-00013530: 6973 7465 6e74 436f 6e66 6967 5c64 2b27  istentConfig\d+'
-00013540: 602e 2059 6f75 2063 616e 2061 6c73 6f20  `. You can also 
-00013550: 696d 706f 7274 2074 6869 7320 7661 6c75  import this valu
-00013560: 650a 2860 6672 6f6d 2065 7364 6263 6c69  e.(`from esdbcli
-00013570: 656e 7420 696d 706f 7274 2045 5344 425f  ent import ESDB_
-00013580: 5045 5253 4953 5445 4e54 5f43 4f4e 4649  PERSISTENT_CONFI
-00013590: 475f 4556 454e 5453 5f52 4547 4558 6029  G_EVENTS_REGEX`)
-000135a0: 2061 6e64 2075 7365 2069 7420 7768 656e   and use it when
-000135b0: 2062 7569 6c64 696e 670a 6c6f 6e67 6572   building.longer
-000135c0: 2073 6571 7565 6e63 6573 206f 6620 7265   sequences of re
-000135d0: 6775 6c61 7220 6578 7072 6573 7369 6f6e  gular expression
-000135e0: 732e 0a0a 5468 6520 636f 6e73 7461 6e74  s...The constant
-000135f0: 2060 4445 4641 554c 545f 4558 434c 5544   `DEFAULT_EXCLUD
-00013600: 455f 4649 4c54 4552 6020 6973 2061 2073  E_FILTER` is a s
-00013610: 6571 7565 6e63 6520 6f66 2072 6567 756c  equence of regul
-00013620: 6172 2065 7870 7265 7373 696f 6e73 2074  ar expressions t
-00013630: 6861 7420 6d61 7463 680a 7468 6520 6576  hat match.the ev
-00013640: 656e 7473 2074 6861 7420 4576 656e 7453  ents that EventS
-00013650: 746f 7265 4442 2067 656e 6572 6174 6573  toreDB generates
-00013660: 2069 6e74 6572 6e61 6c6c 792c 2065 7665   internally, eve
-00013670: 6e74 7320 7468 6174 2061 7265 2065 7874  nts that are ext
-00013680: 7261 6e65 6f75 7320 746f 2074 686f 7365  raneous to those
-00013690: 0a77 6869 6368 2079 6f75 2061 7070 656e  .which you appen
-000136a0: 6420 7573 696e 6720 7468 6520 6061 7070  d using the `app
-000136b0: 656e 645f 6576 656e 7473 2829 6020 6d65  end_events()` me
-000136c0: 7468 6f64 2e0a 0a46 6f72 2065 7861 6d70  thod...For examp
-000136d0: 6c65 2c20 746f 2065 7863 6c75 6465 2073  le, to exclude s
-000136e0: 7973 7465 6d20 6576 656e 7473 2061 6e64  ystem events and
-000136f0: 2070 6572 7369 7374 656e 6365 2073 7562   persistence sub
-00013700: 7363 7269 7074 696f 6e20 636f 6e66 6967  scription config
-00013710: 7572 6174 696f 6e20 6576 656e 7473 2c0a  uration events,.
-00013720: 616e 6420 736e 6170 7368 6f74 732c 2079  and snapshots, y
-00013730: 6f75 206d 6967 6874 2075 7365 2074 6865  ou might use the
-00013740: 2073 6571 7565 6e63 6520 6044 4546 4155   sequence `DEFAU
-00013750: 4c54 5f45 5843 4c55 4445 5f46 494c 5445  LT_EXCLUDE_FILTE
-00013760: 5220 2b20 5b27 2e2a 536e 6170 7368 6f74  R + ['.*Snapshot
-00013770: 275d 6020 6173 0a74 6865 2076 616c 7565  ']` as.the value
-00013780: 206f 6620 7468 6520 6066 696c 7465 725f   of the `filter_
-00013790: 6578 636c 7564 6560 2061 7267 756d 656e  exclude` argumen
-000137a0: 7420 7768 656e 2063 616c 6c69 6e67 2060  t when calling `
-000137b0: 7265 6164 5f61 6c6c 5f65 7665 6e74 7328  read_all_events(
-000137c0: 2960 2c0a 6073 7562 7363 7269 6265 5f61  )`,.`subscribe_a
-000137d0: 6c6c 5f65 7665 6e74 7328 2960 2c20 6063  ll_events()`, `c
-000137e0: 7265 6174 655f 7375 6273 6372 6970 7469  reate_subscripti
-000137f0: 6f6e 2829 6020 6f72 2060 6765 745f 636f  on()` or `get_co
-00013800: 6d6d 6974 5f70 6f73 6974 696f 6e28 2960  mmit_position()`
-00013810: 2e0a 0a23 2323 204e 6577 2065 7665 6e74  ...### New event
-00013820: 206f 626a 6563 7473 0a0a 5468 6520 604e   objects..The `N
-00013830: 6577 4576 656e 7460 2063 6c61 7373 2069  ewEvent` class i
-00013840: 7320 7573 6564 2077 6865 6e20 6170 7065  s used when appe
-00013850: 6e64 696e 6720 6576 656e 7473 2e0a 0a54  nding events...T
-00013860: 6865 2072 6571 7569 7265 6420 6172 6775  he required argu
-00013870: 6d65 6e74 2060 7479 7065 6020 6973 2061  ment `type` is a
-00013880: 2050 7974 686f 6e20 6073 7472 6020 6f62   Python `str` ob
-00013890: 6a65 6374 2c20 7573 6564 2074 6f20 696e  ject, used to in
-000138a0: 6469 6361 7465 2074 6865 2074 7970 6520  dicate the type 
-000138b0: 6f66 0a74 6865 2065 7665 6e74 2074 6861  of.the event tha
-000138c0: 7420 7769 6c6c 2062 6520 7265 636f 7264  t will be record
-000138d0: 6564 2e0a 0a54 6865 2072 6571 7569 7265  ed...The require
-000138e0: 6420 6172 6775 6d65 6e74 2060 6461 7461  d argument `data
-000138f0: 6020 6973 2061 2050 7974 686f 6e20 6062  ` is a Python `b
-00013900: 7974 6573 6020 6f62 6a65 6374 2c20 7573  ytes` object, us
-00013910: 6564 2074 6f20 696e 6469 6361 7465 2074  ed to indicate t
-00013920: 6865 2064 6174 6120 6f66 0a74 6865 2065  he data of.the e
-00013930: 7665 6e74 2074 6861 7420 7769 6c6c 2062  vent that will b
-00013940: 6520 7265 636f 7264 6564 2e0a 0a54 6865  e recorded...The
-00013950: 206f 7074 696f 6e61 6c20 6172 6775 6d65   optional argume
-00013960: 6e74 2060 6d65 7461 6461 7461 6020 6973  nt `metadata` is
-00013970: 2061 2050 7974 686f 6e20 6062 7974 6573   a Python `bytes
-00013980: 6020 6f62 6a65 6374 2c20 7573 6564 2074  ` object, used t
-00013990: 6f20 696e 6469 6361 7465 2061 6e79 0a6d  o indicate any.m
-000139a0: 6574 6164 6174 6120 6f66 2074 6865 2065  etadata of the e
-000139b0: 7665 6e74 2074 6861 7420 7769 6c6c 2062  vent that will b
-000139c0: 6520 7265 636f 7264 6564 2e20 5468 6520  e recorded. The 
-000139d0: 6465 6661 756c 7420 7661 6c75 6520 6973  default value is
-000139e0: 2061 6e20 656d 7074 7920 6062 7974 6573   an empty `bytes
-000139f0: 600a 6f62 6a65 6374 2e0a 0a54 6865 206f  `.object...The o
-00013a00: 7074 696f 6e61 6c20 6172 6775 6d65 6e74  ptional argument
-00013a10: 2060 636f 6e74 656e 745f 7479 7065 6020   `content_type` 
-00013a20: 6973 2061 2050 7974 686f 6e20 6073 7472  is a Python `str
-00013a30: 6020 6f62 6a65 6374 2c20 7573 6564 2074  ` object, used t
-00013a40: 6f20 696e 6469 6361 7465 2074 6865 0a74  o indicate the.t
-00013a50: 7970 6520 6f66 2074 6865 2064 6174 6120  ype of the data 
-00013a60: 7468 6174 2077 696c 6c20 6265 2072 6563  that will be rec
-00013a70: 6f72 6465 6420 666f 7220 7468 6973 2065  orded for this e
-00013a80: 7665 6e74 2e20 5468 6520 6465 6661 756c  vent. The defaul
-00013a90: 7420 7661 6c75 6520 6973 0a60 6170 706c  t value is.`appl
-00013aa0: 6963 6174 696f 6e2f 6a73 6f6e 602c 2077  ication/json`, w
-00013ab0: 6869 6368 2069 6e64 6963 6174 6573 2074  hich indicates t
-00013ac0: 6861 7420 7468 6520 6064 6174 6160 2077  hat the `data` w
-00013ad0: 6173 2073 6572 6961 6c69 7365 6420 7573  as serialised us
-00013ae0: 696e 6720 4a53 4f4e 2e0a 416e 2061 6c74  ing JSON..An alt
-00013af0: 6572 6e61 7469 7665 2076 616c 7565 2066  ernative value f
-00013b00: 6f72 2074 6869 7320 6172 6775 6d65 6e74  or this argument
-00013b10: 2069 7320 6061 7070 6c69 6361 7469 6f6e   is `application
-00013b20: 2f6f 6374 6574 2d73 7472 6561 6d60 2e0a  /octet-stream`..
-00013b30: 0a54 6865 206f 7074 696f 6e61 6c20 6172  .The optional ar
-00013b40: 6775 6d65 6e74 2060 6964 6020 6973 2061  gument `id` is a
-00013b50: 2050 7974 686f 6e20 6055 5549 4460 206f   Python `UUID` o
-00013b60: 626a 6563 742c 2075 7365 6420 746f 2073  bject, used to s
-00013b70: 7065 6369 6679 2074 6865 2075 6e69 7175  pecify the uniqu
-00013b80: 6520 4944 0a6f 6620 7468 6520 6576 656e  e ID.of the even
-00013b90: 7420 7468 6174 2077 696c 6c20 6265 2072  t that will be r
-00013ba0: 6563 6f72 6465 642e 2054 6869 7320 7661  ecorded. This va
-00013bb0: 6c75 6520 7769 6c6c 2064 6566 6175 6c74  lue will default
-00013bc0: 2074 6f20 6120 6e65 7720 7665 7273 696f   to a new versio
-00013bd0: 6e2d 3420 5555 4944 2e0a 0a60 6060 7079  n-4 UUID...```py
-00013be0: 7468 6f6e 0a6e 6577 5f65 7665 6e74 3120  thon.new_event1 
-00013bf0: 3d20 4e65 7745 7665 6e74 280a 2020 2020  = NewEvent(.    
-00013c00: 7479 7065 3d27 4f72 6465 7243 7265 6174  type='OrderCreat
-00013c10: 6564 272c 0a20 2020 2064 6174 613d 6227  ed',.    data=b'
-00013c20: 7b22 6e61 6d65 223a 2022 4772 6567 227d  {"name": "Greg"}
-00013c30: 272c 0a29 0a61 7373 6572 7420 6e65 775f  ',.).assert new_
-00013c40: 6576 656e 7431 2e74 7970 6520 3d3d 2027  event1.type == '
-00013c50: 4f72 6465 7243 7265 6174 6564 270a 6173  OrderCreated'.as
-00013c60: 7365 7274 206e 6577 5f65 7665 6e74 312e  sert new_event1.
-00013c70: 6461 7461 203d 3d20 6227 7b22 6e61 6d65  data == b'{"name
-00013c80: 223a 2022 4772 6567 227d 270a 6173 7365  ": "Greg"}'.asse
-00013c90: 7274 206e 6577 5f65 7665 6e74 312e 6d65  rt new_event1.me
-00013ca0: 7461 6461 7461 203d 3d20 6227 270a 6173  tadata == b''.as
-00013cb0: 7365 7274 206e 6577 5f65 7665 6e74 312e  sert new_event1.
-00013cc0: 636f 6e74 656e 745f 7479 7065 203d 3d20  content_type == 
-00013cd0: 2761 7070 6c69 6361 7469 6f6e 2f6a 736f  'application/jso
-00013ce0: 6e27 0a61 7373 6572 7420 6973 696e 7374  n'.assert isinst
-00013cf0: 616e 6365 286e 6577 5f65 7665 6e74 312e  ance(new_event1.
-00013d00: 6964 2c20 5555 4944 290a 0a65 7665 6e74  id, UUID)..event
-00013d10: 5f69 6420 3d20 7575 6964 3428 290a 6e65  _id = uuid4().ne
-00013d20: 775f 6576 656e 7432 203d 204e 6577 4576  w_event2 = NewEv
-00013d30: 656e 7428 0a20 2020 2074 7970 653d 2749  ent(.    type='I
-00013d40: 6d61 6765 4372 6561 7465 6427 2c0a 2020  mageCreated',.  
-00013d50: 2020 6461 7461 3d62 2730 3130 3130 3130    data=b'0101010
-00013d60: 3130 3130 3130 3127 2c0a 2020 2020 6d65  1010101',.    me
-00013d70: 7461 6461 7461 3d62 277b 2261 223a 2031  tadata=b'{"a": 1
-00013d80: 7d27 2c0a 2020 2020 636f 6e74 656e 745f  }',.    content_
-00013d90: 7479 7065 3d27 6170 706c 6963 6174 696f  type='applicatio
-00013da0: 6e2f 6f63 7465 742d 7374 7265 616d 272c  n/octet-stream',
-00013db0: 0a20 2020 2069 643d 6576 656e 745f 6964  .    id=event_id
-00013dc0: 2c0a 290a 6173 7365 7274 206e 6577 5f65  ,.).assert new_e
-00013dd0: 7665 6e74 322e 7479 7065 203d 3d20 2749  vent2.type == 'I
-00013de0: 6d61 6765 4372 6561 7465 6427 0a61 7373  mageCreated'.ass
-00013df0: 6572 7420 6e65 775f 6576 656e 7432 2e64  ert new_event2.d
-00013e00: 6174 6120 3d3d 2062 2730 3130 3130 3130  ata == b'0101010
-00013e10: 3130 3130 3130 3127 0a61 7373 6572 7420  1010101'.assert 
-00013e20: 6e65 775f 6576 656e 7432 2e6d 6574 6164  new_event2.metad
-00013e30: 6174 6120 3d3d 2062 277b 2261 223a 2031  ata == b'{"a": 1
-00013e40: 7d27 0a61 7373 6572 7420 6e65 775f 6576  }'.assert new_ev
-00013e50: 656e 7432 2e63 6f6e 7465 6e74 5f74 7970  ent2.content_typ
-00013e60: 6520 3d3d 2027 6170 706c 6963 6174 696f  e == 'applicatio
-00013e70: 6e2f 6f63 7465 742d 7374 7265 616d 270a  n/octet-stream'.
-00013e80: 6173 7365 7274 206e 6577 5f65 7665 6e74  assert new_event
-00013e90: 322e 6964 203d 3d20 6576 656e 745f 6964  2.id == event_id
-00013ea0: 0a60 6060 0a0a 2323 2320 5265 636f 7264  .```..### Record
-00013eb0: 6564 2065 7665 6e74 206f 626a 6563 7473  ed event objects
-00013ec0: 0a0a 5468 6520 6052 6563 6f72 6465 6445  ..The `RecordedE
-00013ed0: 7665 6e74 6020 636c 6173 7320 6973 2075  vent` class is u
-00013ee0: 7365 6420 7768 656e 2072 6561 6469 6e67  sed when reading
-00013ef0: 2065 7665 6e74 732e 0a0a 5468 6520 6174   events...The at
-00013f00: 7472 6962 7574 6520 6074 7970 6560 2069  tribute `type` i
-00013f10: 7320 6120 5079 7468 6f6e 2060 7374 7260  s a Python `str`
-00013f20: 206f 626a 6563 742c 2075 7365 6420 746f   object, used to
-00013f30: 2069 6e64 6963 6174 6520 7468 6520 7479   indicate the ty
-00013f40: 7065 206f 6620 6576 656e 740a 7468 6174  pe of event.that
-00013f50: 2077 6173 2072 6563 6f72 6465 642e 0a0a   was recorded...
-00013f60: 5468 6520 6174 7472 6962 7574 6520 6064  The attribute `d
-00013f70: 6174 6160 2069 7320 6120 5079 7468 6f6e  ata` is a Python
-00013f80: 2060 6279 7465 7360 206f 626a 6563 742c   `bytes` object,
-00013f90: 2075 7365 6420 746f 2069 6e64 6963 6174   used to indicat
-00013fa0: 6520 7468 6520 6461 7461 206f 6620 7468  e the data of th
-00013fb0: 650a 6576 656e 7420 7468 6174 2077 6173  e.event that was
-00013fc0: 2072 6563 6f72 6465 642e 0a0a 5468 6520   recorded...The 
-00013fd0: 6174 7472 6962 7574 6520 606d 6574 6164  attribute `metad
-00013fe0: 6174 6160 2069 7320 6120 5079 7468 6f6e  ata` is a Python
-00013ff0: 2060 6279 7465 7360 206f 626a 6563 742c   `bytes` object,
-00014000: 2075 7365 6420 746f 2069 6e64 6963 6174   used to indicat
-00014010: 6520 7468 6520 6d65 7461 6461 7461 206f  e the metadata o
-00014020: 660a 7468 6520 6576 656e 7420 7468 6174  f.the event that
-00014030: 2077 6173 2072 6563 6f72 6465 642e 0a0a   was recorded...
-00014040: 5468 6520 6174 7472 6962 7574 6520 6063  The attribute `c
-00014050: 6f6e 7465 6e74 5f74 7970 6560 2069 7320  ontent_type` is 
-00014060: 6120 5079 7468 6f6e 2060 7374 7260 206f  a Python `str` o
-00014070: 626a 6563 742c 2075 7365 6420 746f 2069  bject, used to i
-00014080: 6e64 6963 6174 6520 7468 6520 7479 7065  ndicate the type
-00014090: 206f 660a 6461 7461 2074 6861 7420 7761   of.data that wa
-000140a0: 7320 7265 636f 7264 6564 2066 6f72 2074  s recorded for t
-000140b0: 6869 7320 6576 656e 7420 2875 7375 616c  his event (usual
-000140c0: 6c79 2060 6170 706c 6963 6174 696f 6e2f  ly `application/
-000140d0: 6a73 6f6e 6020 746f 2069 6e64 6963 6174  json` to indicat
-000140e0: 6520 7468 6174 0a74 6869 7320 6461 7461  e that.this data
-000140f0: 2063 616e 2062 6520 7061 7273 6564 2061   can be parsed a
-00014100: 7320 4a53 4f4e 2c20 6275 7420 616c 7465  s JSON, but alte
-00014110: 726e 6174 6976 656c 7920 6061 7070 6c69  rnatively `appli
-00014120: 6361 7469 6f6e 2f6f 6374 6574 2d73 7472  cation/octet-str
-00014130: 6561 6d60 2074 6f0a 696e 6469 6361 7465  eam` to.indicate
-00014140: 2074 6861 7420 6974 2069 7320 736f 6d65   that it is some
-00014150: 7468 696e 6720 656c 7365 292e 0a0a 5468  thing else)...Th
-00014160: 6520 6174 7472 6962 7574 6520 6069 6460  e attribute `id`
-00014170: 2069 7320 6120 5079 7468 6f6e 2060 5555   is a Python `UU
-00014180: 4944 6020 6f62 6a65 6374 2c20 7573 6564  ID` object, used
-00014190: 2074 6f20 696e 6469 6361 7465 2074 6865   to indicate the
-000141a0: 2075 6e69 7175 6520 4944 206f 6620 7468   unique ID of th
-000141b0: 650a 6576 656e 7420 7468 6174 2077 6173  e.event that was
-000141c0: 2072 6563 6f72 6465 642e 2050 6c65 6173   recorded. Pleas
-000141d0: 6520 6e6f 7465 2c20 7768 656e 2072 6563  e note, when rec
-000141e0: 6f72 6465 6420 6576 656e 7473 2061 7265  orded events are
-000141f0: 2072 6574 7572 6e65 6420 6672 6f6d 2061   returned from a
-00014200: 2063 616c 6c0a 746f 2060 7265 6164 5f73   call.to `read_s
-00014210: 7472 6561 6d5f 6576 656e 7473 2829 6020  tream_events()` 
-00014220: 696e 2045 7665 6e74 5374 6f72 6544 4220  in EventStoreDB 
-00014230: 7632 312e 3130 2c20 7468 6520 636f 6d6d  v21.10, the comm
-00014240: 6974 2070 6f73 6974 696f 6e20 6973 206e  it position is n
-00014250: 6f74 2061 6374 7561 6c6c 790a 7365 7420  ot actually.set 
-00014260: 696e 2074 6865 2072 6573 706f 6e73 652e  in the response.
-00014270: 2054 6869 7320 6174 7472 6962 7574 6520   This attribute 
-00014280: 6973 2074 7970 6564 2061 7320 616e 206f  is typed as an o
-00014290: 7074 696f 6e61 6c20 7661 6c75 6520 2860  ptional value (`
-000142a0: 4f70 7469 6f6e 616c 5b55 5549 445d 6029  Optional[UUID]`)
-000142b0: 2c0a 616e 6420 696e 2074 6865 2063 6173  ,.and in the cas
-000142c0: 6520 6f66 2075 7369 6e67 2045 7665 6e74  e of using Event
-000142d0: 5374 6f72 6544 4220 7632 312e 3130 2074  StoreDB v21.10 t
-000142e0: 6865 2076 616c 7565 206f 6620 7468 6973  he value of this
-000142f0: 2061 7474 7269 6275 7465 2077 696c 6c20   attribute will 
-00014300: 6265 2060 4e6f 6e65 600a 7768 656e 2072  be `None`.when r
-00014310: 6561 6469 6e67 2072 6563 6f72 6465 6420  eading recorded 
-00014320: 6576 656e 7473 2066 726f 6d20 6120 7374  events from a st
-00014330: 7265 616d 2e20 5265 636f 7264 6564 2065  ream. Recorded e
-00014340: 7665 6e74 7320 7769 6c6c 2068 6f77 6576  vents will howev
-00014350: 6572 2068 6176 6520 7468 6973 0a76 616c  er have this.val
-00014360: 7565 7320 7365 7420 7768 656e 2072 6561  ues set when rea
-00014370: 6469 6e67 2072 6563 6f72 6465 6420 6576  ding recorded ev
-00014380: 656e 7473 2066 726f 6d20 6072 6561 645f  ents from `read_
-00014390: 616c 6c5f 6576 656e 7473 2829 6020 616e  all_events()` an
-000143a0: 6420 6672 6f6d 2062 6f74 680a 6361 7463  d from both.catc
-000143b0: 682d 7570 2061 6e64 2070 6572 7369 7374  h-up and persist
-000143c0: 656e 7420 7375 6273 6372 6970 7469 6f6e  ent subscription
-000143d0: 732e 0a0a 5468 6520 6174 7472 6962 7574  s...The attribut
-000143e0: 6520 6073 7472 6561 6d5f 6e61 6d65 6020  e `stream_name` 
-000143f0: 6973 2061 2050 7974 686f 6e20 6073 7472  is a Python `str
-00014400: 6020 6f62 6a65 6374 2c20 7573 6564 2074  ` object, used t
-00014410: 6f20 696e 6469 6361 7465 2074 6865 206e  o indicate the n
-00014420: 616d 6520 6f66 2074 6865 0a73 7472 6561  ame of the.strea
-00014430: 6d20 696e 2077 6869 6368 2074 6865 2065  m in which the e
-00014440: 7665 6e74 2077 6173 2072 6563 6f72 6465  vent was recorde
-00014450: 642e 0a0a 5468 6520 6174 7472 6962 7574  d...The attribut
-00014460: 6520 6073 7472 6561 6d5f 706f 7369 7469  e `stream_positi
-00014470: 6f6e 6020 6973 2061 2050 7974 686f 6e20  on` is a Python 
-00014480: 6069 6e74 602c 2075 7365 6420 746f 2069  `int`, used to i
-00014490: 6e64 6963 6174 6520 7468 6520 706f 7369  ndicate the posi
-000144a0: 7469 6f6e 2069 6e20 7468 650a 7374 7265  tion in the.stre
-000144b0: 616d 2061 7420 7768 6963 6820 7468 6520  am at which the 
-000144c0: 6576 656e 7420 7761 7320 7265 636f 7264  event was record
-000144d0: 6564 2e0a 0a54 6865 2061 7474 7269 6275  ed...The attribu
-000144e0: 7465 2060 636f 6d6d 6974 5f70 6f73 6974  te `commit_posit
-000144f0: 696f 6e60 2069 7320 6120 5079 7468 6f6e  ion` is a Python
-00014500: 2060 696e 7460 2c20 7573 6564 2074 6f20   `int`, used to 
-00014510: 696e 6469 6361 7465 2074 6865 2063 6f6d  indicate the com
-00014520: 6d69 7420 706f 7369 7469 6f6e 0a61 7420  mit position.at 
-00014530: 7768 6963 6820 7468 6520 6576 656e 7420  which the event 
-00014540: 7761 7320 7265 636f 7264 6564 2e0a 0a60  was recorded...`
-00014550: 6060 7079 7468 6f6e 0a66 726f 6d20 6573  ``python.from es
-00014560: 6462 636c 6965 6e74 2e65 7665 6e74 7320  dbclient.events 
-00014570: 696d 706f 7274 2052 6563 6f72 6465 6445  import RecordedE
-00014580: 7665 6e74 0a0a 7265 636f 7264 6564 5f65  vent..recorded_e
-00014590: 7665 6e74 203d 2052 6563 6f72 6465 6445  vent = RecordedE
-000145a0: 7665 6e74 280a 2020 2020 7479 7065 3d27  vent(.    type='
-000145b0: 4f72 6465 7243 7265 6174 6564 272c 0a20  OrderCreated',. 
-000145c0: 2020 2064 6174 613d 6227 7b7d 272c 0a20     data=b'{}',. 
-000145d0: 2020 206d 6574 6164 6174 613d 6227 272c     metadata=b'',
-000145e0: 0a20 2020 2063 6f6e 7465 6e74 5f74 7970  .    content_typ
-000145f0: 653d 2761 7070 6c69 6361 7469 6f6e 2f6a  e='application/j
-00014600: 736f 6e27 2c0a 2020 2020 6964 3d75 7569  son',.    id=uui
-00014610: 6434 2829 2c0a 2020 2020 7374 7265 616d  d4(),.    stream
-00014620: 5f6e 616d 653d 2773 7472 6561 6d31 272c  _name='stream1',
-00014630: 0a20 2020 2073 7472 6561 6d5f 706f 7369  .    stream_posi
-00014640: 7469 6f6e 3d30 2c0a 2020 2020 636f 6d6d  tion=0,.    comm
-00014650: 6974 5f70 6f73 6974 696f 6e3d 3531 322c  it_position=512,
-00014660: 0a29 0a60 6060 0a0a 2323 2043 6f6e 7472  .).```..## Contr
-00014670: 6962 7574 6f72 730a 0a23 2323 2049 6e73  ibutors..### Ins
-00014680: 7461 6c6c 2050 6f65 7472 790a 0a54 6865  tall Poetry..The
-00014690: 2066 6972 7374 2074 6869 6e67 2069 7320   first thing is 
-000146a0: 746f 2063 6865 636b 2079 6f75 2068 6176  to check you hav
-000146b0: 6520 506f 6574 7279 2069 6e73 7461 6c6c  e Poetry install
-000146c0: 6564 2e0a 0a20 2020 2024 2070 6f65 7472  ed...    $ poetr
-000146d0: 7920 2d2d 7665 7273 696f 6e0a 0a49 6620  y --version..If 
-000146e0: 796f 7520 646f 6e27 742c 2074 6865 6e20  you don't, then 
-000146f0: 706c 6561 7365 205b 696e 7374 616c 6c20  please [install 
-00014700: 506f 6574 7279 5d28 6874 7470 733a 2f2f  Poetry](https://
-00014710: 7079 7468 6f6e 2d70 6f65 7472 792e 6f72  python-poetry.or
-00014720: 672f 646f 6373 2f23 696e 7374 616c 6c69  g/docs/#installi
-00014730: 6e67 2d77 6974 682d 7468 652d 6f66 6669  ng-with-the-offi
-00014740: 6369 616c 2d69 6e73 7461 6c6c 6572 292e  cial-installer).
-00014750: 0a0a 2020 2020 2420 6375 726c 202d 7353  ..    $ curl -sS
-00014760: 4c20 6874 7470 733a 2f2f 696e 7374 616c  L https://instal
-00014770: 6c2e 7079 7468 6f6e 2d70 6f65 7472 792e  l.python-poetry.
-00014780: 6f72 6720 7c20 7079 7468 6f6e 3320 2d0a  org | python3 -.
-00014790: 0a49 7420 7769 6c6c 2068 656c 7020 746f  .It will help to
-000147a0: 206d 616b 6520 7375 7265 2050 6f65 7472   make sure Poetr
-000147b0: 7927 7320 6269 6e20 6469 7265 6374 6f72  y's bin director
-000147c0: 7920 6973 2069 6e20 796f 7572 2060 5041  y is in your `PA
-000147d0: 5448 6020 656e 7669 726f 6e6d 656e 7420  TH` environment 
-000147e0: 7661 7269 6162 6c65 2e0a 0a42 7574 2069  variable...But i
-000147f0: 6e20 616e 7920 6361 7365 2c20 6d61 6b65  n any case, make
-00014800: 2073 7572 6520 796f 7520 6b6e 6f77 2074   sure you know t
-00014810: 6865 2070 6174 6820 746f 2074 6865 2060  he path to the `
-00014820: 706f 6574 7279 6020 6578 6563 7574 6162  poetry` executab
-00014830: 6c65 2e20 5468 6520 506f 6574 7279 0a69  le. The Poetry.i
-00014840: 6e73 7461 6c6c 6572 2074 656c 6c73 2079  nstaller tells y
-00014850: 6f75 2077 6865 7265 2069 7420 6861 7320  ou where it has 
-00014860: 6265 656e 2069 6e73 7461 6c6c 6564 2c20  been installed, 
-00014870: 616e 6420 686f 7720 746f 2063 6f6e 6669  and how to confi
-00014880: 6775 7265 2079 6f75 7220 7368 656c 6c2e  gure your shell.
-00014890: 0a0a 506c 6561 7365 2072 6566 6572 2074  ..Please refer t
-000148a0: 6f20 7468 6520 5b50 6f65 7472 7920 646f  o the [Poetry do
-000148b0: 6373 5d28 6874 7470 733a 2f2f 7079 7468  cs](https://pyth
-000148c0: 6f6e 2d70 6f65 7472 792e 6f72 672f 646f  on-poetry.org/do
-000148d0: 6373 2f29 2066 6f72 2067 7569 6461 6e63  cs/) for guidanc
-000148e0: 6520 6f6e 0a75 7369 6e67 2050 6f65 7472  e on.using Poetr
-000148f0: 792e 0a0a 2323 2320 5365 7475 7020 666f  y...### Setup fo
-00014900: 7220 5079 4368 6172 6d20 7573 6572 730a  r PyCharm users.
-00014910: 0a59 6f75 2063 616e 2065 6173 696c 7920  .You can easily 
-00014920: 6f62 7461 696e 2074 6865 2070 726f 6a65  obtain the proje
-00014930: 6374 2066 696c 6573 2075 7369 6e67 2050  ct files using P
-00014940: 7943 6861 726d 2028 6d65 6e75 2022 4769  yCharm (menu "Gi
-00014950: 7420 3e20 436c 6f6e 652e 2e2e 2229 2e0a  t > Clone...")..
-00014960: 5079 4368 6172 6d20 7769 6c6c 2074 6865  PyCharm will the
-00014970: 6e20 7573 7561 6c6c 7920 7072 6f6d 7074  n usually prompt
-00014980: 2079 6f75 2074 6f20 6f70 656e 2074 6865   you to open the
-00014990: 2070 726f 6a65 6374 2e0a 0a4f 7065 6e20   project...Open 
-000149a0: 7468 6520 7072 6f6a 6563 7420 696e 2061  the project in a
-000149b0: 206e 6577 2077 696e 646f 772e 2050 7943   new window. PyC
-000149c0: 6861 726d 2077 696c 6c20 7468 656e 2075  harm will then u
-000149d0: 7375 616c 6c79 2070 726f 6d70 7420 796f  sually prompt yo
-000149e0: 7520 746f 2063 7265 6174 650a 6120 6e65  u to create.a ne
-000149f0: 7720 7669 7274 7561 6c20 656e 7669 726f  w virtual enviro
-00014a00: 6e6d 656e 742e 0a0a 4372 6561 7465 2061  nment...Create a
-00014a10: 206e 6577 2050 6f65 7472 7920 7669 7274   new Poetry virt
-00014a20: 7561 6c20 656e 7669 726f 6e6d 656e 7420  ual environment 
-00014a30: 666f 7220 7468 6520 7072 6f6a 6563 742e  for the project.
-00014a40: 2049 6620 5079 4368 6172 6d20 646f 6573   If PyCharm does
-00014a50: 6e27 7420 616c 7265 6164 790a 6b6e 6f77  n't already.know
-00014a60: 2077 6865 7265 2079 6f75 7220 6070 6f65   where your `poe
-00014a70: 7472 7960 2065 7865 6375 7461 626c 6520  try` executable 
-00014a80: 6973 2c20 7468 656e 2073 6574 2074 6865  is, then set the
-00014a90: 2070 6174 6820 746f 2079 6f75 7220 6070   path to your `p
-00014aa0: 6f65 7472 7960 2065 7865 6375 7461 626c  oetry` executabl
-00014ab0: 650a 696e 2074 6865 2022 4e65 7720 506f  e.in the "New Po
-00014ac0: 6574 7279 2045 6e76 6972 6f6e 6d65 6e74  etry Environment
-00014ad0: 2220 666f 726d 2069 6e70 7574 2066 6965  " form input fie
-00014ae0: 6c64 206c 6162 656c 6c65 6420 2250 6f65  ld labelled "Poe
-00014af0: 7472 7920 6578 6563 7574 6162 6c65 222e  try executable".
-00014b00: 2049 6e20 7468 650a 224e 6577 2050 6f65   In the."New Poe
-00014b10: 7472 7920 456e 7669 726f 6e6d 656e 7422  try Environment"
-00014b20: 2066 6f72 6d2c 2079 6f75 2077 696c 6c20   form, you will 
-00014b30: 616c 736f 2068 6176 6520 7468 6520 6f70  also have the op
-00014b40: 706f 7274 756e 6974 7920 746f 2073 656c  portunity to sel
-00014b50: 6563 7420 7768 6963 680a 5079 7468 6f6e  ect which.Python
-00014b60: 2065 7865 6375 7461 626c 6520 7769 6c6c   executable will
-00014b70: 2062 6520 7573 6564 2062 7920 7468 6520   be used by the 
-00014b80: 7669 7274 7561 6c20 656e 7669 726f 6e6d  virtual environm
-00014b90: 656e 742e 0a0a 5079 4368 6172 6d20 7769  ent...PyCharm wi
-00014ba0: 6c6c 2074 6865 6e20 6372 6561 7465 2061  ll then create a
-00014bb0: 206e 6577 2050 6f65 7472 7920 7669 7274   new Poetry virt
-00014bc0: 7561 6c20 656e 7669 726f 6e6d 656e 7420  ual environment 
-00014bd0: 666f 7220 796f 7572 2070 726f 6a65 6374  for your project
-00014be0: 2c20 7573 696e 670a 6120 7061 7274 6963  , using.a partic
-00014bf0: 756c 6172 2076 6572 7369 6f6e 206f 6620  ular version of 
-00014c00: 5079 7468 6f6e 2c20 616e 6420 616c 736f  Python, and also
-00014c10: 2069 6e73 7461 6c6c 2069 6e74 6f20 7468   install into th
-00014c20: 6973 2076 6972 7475 616c 2065 6e76 6972  is virtual envir
-00014c30: 6f6e 6d65 6e74 2074 6865 0a70 726f 6a65  onment the.proje
-00014c40: 6374 2773 2070 6163 6b61 6765 2064 6570  ct's package dep
-00014c50: 656e 6465 6e63 6965 7320 6163 636f 7264  endencies accord
-00014c60: 696e 6720 746f 2074 6865 2070 726f 6a65  ing to the proje
-00014c70: 6374 2773 2060 706f 6574 7279 2e6c 6f63  ct's `poetry.loc
-00014c80: 6b60 2066 696c 652e 0a0a 596f 7520 6361  k` file...You ca
-00014c90: 6e20 6164 6420 6469 6666 6572 656e 7420  n add different 
-00014ca0: 506f 6574 7279 2065 6e76 6972 6f6e 6d65  Poetry environme
-00014cb0: 6e74 7320 666f 7220 6469 6666 6572 656e  nts for differen
-00014cc0: 7420 5079 7468 6f6e 2076 6572 7369 6f6e  t Python version
-00014cd0: 732c 2061 6e64 2073 7769 7463 680a 6265  s, and switch.be
-00014ce0: 7477 6565 6e20 7468 656d 2075 7369 6e67  tween them using
-00014cf0: 2074 6865 2022 5079 7468 6f6e 2049 6e74   the "Python Int
-00014d00: 6572 7072 6574 6572 2220 7365 7474 696e  erpreter" settin
-00014d10: 6773 206f 6620 5079 4368 6172 6d2e 2049  gs of PyCharm. I
-00014d20: 6620 796f 7520 7761 6e74 2074 6f20 7573  f you want to us
-00014d30: 650a 6120 7665 7273 696f 6e20 6f66 2050  e.a version of P
-00014d40: 7974 686f 6e20 7468 6174 2069 736e 2774  ython that isn't
-00014d50: 2069 6e73 7461 6c6c 6564 2c20 6569 7468   installed, eith
-00014d60: 6572 2075 7365 2079 6f75 7220 6661 766f  er use your favo
-00014d70: 7572 6974 6520 7061 636b 6167 6520 6d61  urite package ma
-00014d80: 6e61 6765 722c 0a6f 7220 696e 7374 616c  nager,.or instal
-00014d90: 6c20 5079 7468 6f6e 2062 7920 646f 776e  l Python by down
-00014da0: 6c6f 6164 696e 6720 616e 2069 6e73 7461  loading an insta
-00014db0: 6c6c 6572 2066 6f72 2072 6563 656e 7420  ller for recent 
-00014dc0: 7665 7273 696f 6e73 206f 6620 5079 7468  versions of Pyth
-00014dd0: 6f6e 2064 6972 6563 746c 790a 6672 6f6d  on directly.from
-00014de0: 2074 6865 205b 5079 7468 6f6e 2077 6562   the [Python web
-00014df0: 7369 7465 5d28 6874 7470 733a 2f2f 7777  site](https://ww
-00014e00: 772e 7079 7468 6f6e 2e6f 7267 2f64 6f77  w.python.org/dow
-00014e10: 6e6c 6f61 6473 2f29 2e0a 0a4f 6e63 6520  nloads/)...Once 
-00014e20: 7072 6f6a 6563 7420 6465 7065 6e64 656e  project dependen
-00014e30: 6369 6573 2068 6176 6520 6265 656e 2069  cies have been i
-00014e40: 6e73 7461 6c6c 6564 2c20 796f 7520 7368  nstalled, you sh
-00014e50: 6f75 6c64 2062 6520 6162 6c65 2074 6f20  ould be able to 
-00014e60: 7275 6e20 7465 7374 730a 6672 6f6d 2077  run tests.from w
-00014e70: 6974 6869 6e20 5079 4368 6172 6d20 2872  ithin PyCharm (r
-00014e80: 6967 6874 2d63 6c69 636b 206f 6e20 7468  ight-click on th
-00014e90: 6520 6074 6573 7473 6020 666f 6c64 6572  e `tests` folder
-00014ea0: 2061 6e64 2073 656c 6563 7420 7468 6520   and select the 
-00014eb0: 2752 756e 2720 6f70 7469 6f6e 292e 0a0a  'Run' option)...
-00014ec0: 4265 6361 7573 6520 6f66 2061 2063 6f6e  Because of a con
-00014ed0: 666c 6963 7420 6265 7477 6565 6e20 7079  flict between py
-00014ee0: 7465 7374 2061 6e64 2050 7943 6861 726d  test and PyCharm
-00014ef0: 2773 2064 6562 7567 6765 7220 616e 6420  's debugger and 
-00014f00: 7468 6520 636f 7665 7261 6765 2074 6f6f  the coverage too
-00014f10: 6c2c 0a79 6f75 206d 6179 206e 6565 6420  l,.you may need 
-00014f20: 746f 2061 6464 2060 602d 2d6e 6f2d 636f  to add ``--no-co
-00014f30: 7660 6020 6173 2061 6e20 6f70 7469 6f6e  v`` as an option
-00014f40: 2074 6f20 7468 6520 7465 7374 2072 756e   to the test run
-00014f50: 6e65 7220 7465 6d70 6c61 7465 2e20 416c  ner template. Al
-00014f60: 7465 726e 6174 6976 656c 792c 0a6a 7573  ternatively,.jus
-00014f70: 7420 7573 6520 7468 6520 5079 7468 6f6e  t use the Python
-00014f80: 2053 7461 6e64 6172 6420 4c69 6272 6172   Standard Librar
-00014f90: 7927 7320 6060 756e 6974 7465 7374 6060  y's ``unittest``
-00014fa0: 206d 6f64 756c 652e 0a0a 596f 7520 7368   module...You sh
-00014fb0: 6f75 6c64 2061 6c73 6f20 6265 2061 626c  ould also be abl
-00014fc0: 6520 746f 206f 7065 6e20 6120 7465 726d  e to open a term
-00014fd0: 696e 616c 2077 696e 646f 7720 696e 2050  inal window in P
-00014fe0: 7943 6861 726d 2c20 616e 6420 7275 6e20  yCharm, and run 
-00014ff0: 7468 6520 7072 6f6a 6563 7427 730a 4d61  the project's.Ma
-00015000: 6b65 6669 6c65 2063 6f6d 6d61 6e64 7320  kefile commands 
-00015010: 6672 6f6d 2074 6865 2063 6f6d 6d61 6e64  from the command
-00015020: 206c 696e 6520 2873 6565 2062 656c 6f77   line (see below
-00015030: 292e 0a0a 2323 2320 5365 7475 7020 6672  )...### Setup fr
-00015040: 6f6d 2063 6f6d 6d61 6e64 206c 696e 650a  om command line.
-00015050: 0a4f 6274 6169 6e20 7468 6520 7072 6f6a  .Obtain the proj
-00015060: 6563 7420 6669 6c65 732c 2075 7369 6e67  ect files, using
-00015070: 2047 6974 206f 7220 7375 6974 6162 6c65   Git or suitable
-00015080: 2061 6c74 6572 6e61 7469 7665 2e0a 0a49   alternative...I
-00015090: 6e20 6120 7465 726d 696e 616c 2061 7070  n a terminal app
-000150a0: 6c69 6361 7469 6f6e 2c20 6368 616e 6765  lication, change
-000150b0: 2079 6f75 7220 6375 7272 656e 7420 776f   your current wo
-000150c0: 726b 696e 6720 6469 7265 6374 6f72 790a  rking directory.
-000150d0: 746f 2074 6865 2072 6f6f 7420 666f 6c64  to the root fold
-000150e0: 6572 206f 6620 7468 6520 7072 6f6a 6563  er of the projec
-000150f0: 7420 6669 6c65 732e 2054 6865 7265 2073  t files. There s
-00015100: 686f 756c 6420 6265 2061 204d 616b 6566  hould be a Makef
-00015110: 696c 650a 696e 2074 6869 7320 666f 6c64  ile.in this fold
-00015120: 6572 2e0a 0a55 7365 2074 6865 204d 616b  er...Use the Mak
-00015130: 6566 696c 6520 746f 2063 7265 6174 6520  efile to create 
-00015140: 6120 6e65 7720 506f 6574 7279 2076 6972  a new Poetry vir
-00015150: 7475 616c 2065 6e76 6972 6f6e 6d65 6e74  tual environment
-00015160: 2066 6f72 2074 6865 0a70 726f 6a65 6374   for the.project
-00015170: 2061 6e64 2069 6e73 7461 6c6c 2074 6865   and install the
-00015180: 2070 726f 6a65 6374 2773 2070 6163 6b61   project's packa
-00015190: 6765 2064 6570 656e 6465 6e63 6965 7320  ge dependencies 
-000151a0: 696e 746f 2069 742c 0a75 7369 6e67 2074  into it,.using t
-000151b0: 6865 2066 6f6c 6c6f 7769 6e67 2063 6f6d  he following com
-000151c0: 6d61 6e64 2e0a 0a20 2020 2024 206d 616b  mand...    $ mak
-000151d0: 6520 696e 7374 616c 6c2d 7061 636b 6167  e install-packag
-000151e0: 6573 0a0a 4974 2773 2061 6c73 6f20 706f  es..It's also po
-000151f0: 7373 6962 6c65 2074 6f20 616c 736f 2069  ssible to also i
-00015200: 6e73 7461 6c6c 2074 6865 2070 726f 6a65  nstall the proje
-00015210: 6374 2069 6e20 2765 6469 7461 626c 6520  ct in 'editable 
-00015220: 6d6f 6465 272e 0a0a 2020 2020 2420 6d61  mode'...    $ ma
-00015230: 6b65 2069 6e73 7461 6c6c 0a0a 506c 6561  ke install..Plea
-00015240: 7365 206e 6f74 652c 2069 6620 796f 7520  se note, if you 
-00015250: 6372 6561 7465 2074 6865 2076 6972 7475  create the virtu
-00015260: 616c 2065 6e76 6972 6f6e 6d65 6e74 2069  al environment i
-00015270: 6e20 7468 6973 2077 6179 2c20 616e 6420  n this way, and 
-00015280: 7468 656e 2074 7279 2074 6f0a 6f70 656e  then try to.open
-00015290: 2074 6865 2070 726f 6a65 6374 2069 6e20   the project in 
-000152a0: 5079 4368 6172 6d20 616e 6420 636f 6e66  PyCharm and conf
-000152b0: 6967 7572 6520 7468 6520 7072 6f6a 6563  igure the projec
-000152c0: 7420 746f 2075 7365 2074 6869 7320 7669  t to use this vi
-000152d0: 7274 7561 6c0a 656e 7669 726f 6e6d 656e  rtual.environmen
-000152e0: 7420 6173 2061 6e20 2245 7869 7374 696e  t as an "Existin
-000152f0: 6720 506f 6574 7279 2045 6e76 6972 6f6e  g Poetry Environ
-00015300: 6d65 6e74 222c 2050 7943 6861 726d 2073  ment", PyCharm s
-00015310: 6f6d 6574 696d 6573 2068 6173 2073 6f6d  ometimes has som
-00015320: 650a 6973 7375 6573 2028 646f 6e27 7420  e.issues (don't 
-00015330: 6b6e 6f77 2077 6879 2920 7768 6963 6820  know why) which 
-00015340: 6d69 6768 7420 6265 2070 726f 626c 656d  might be problem
-00015350: 6174 6963 2e20 4966 2079 6f75 2065 6e63  atic. If you enc
-00015360: 6f75 6e74 6572 2073 7563 680a 6973 7375  ounter such.issu
-00015370: 6573 2c20 796f 7520 6361 6e20 7265 736f  es, you can reso
-00015380: 6c76 6520 7468 6573 6520 6973 7375 6573  lve these issues
-00015390: 2062 7920 6465 6c65 7469 6e67 2074 6865   by deleting the
-000153a0: 2076 6972 7475 616c 2065 6e76 6972 6f6e   virtual environ
-000153b0: 6d65 6e74 0a61 6e64 2063 7265 6174 696e  ment.and creatin
-000153c0: 6720 7468 6520 506f 6574 7279 2076 6972  g the Poetry vir
-000153d0: 7475 616c 2065 6e76 6972 6f6e 6d65 6e74  tual environment
-000153e0: 2075 7369 6e67 2050 7943 6861 726d 2028   using PyCharm (
-000153f0: 7365 6520 6162 6f76 6529 2e0a 0a23 2323  see above)...###
-00015400: 2050 726f 6a65 6374 204d 616b 6566 696c   Project Makefil
-00015410: 6520 636f 6d6d 616e 6473 0a0a 596f 7520  e commands..You 
-00015420: 6361 6e20 7374 6172 7420 4576 656e 7453  can start EventS
-00015430: 746f 7265 4442 2075 7369 6e67 2074 6865  toreDB using the
-00015440: 2066 6f6c 6c6f 7769 6e67 2063 6f6d 6d61   following comma
-00015450: 6e64 2e0a 0a20 2020 2024 206d 616b 6520  nd...    $ make 
-00015460: 7374 6172 742d 6576 656e 7473 746f 7265  start-eventstore
-00015470: 6462 0a0a 596f 7520 6361 6e20 7275 6e20  db..You can run 
-00015480: 7465 7374 7320 7573 696e 6720 7468 6520  tests using the 
-00015490: 666f 6c6c 6f77 696e 6720 636f 6d6d 616e  following comman
-000154a0: 6420 286e 6565 6473 2045 7665 6e74 5374  d (needs EventSt
-000154b0: 6f72 6544 4220 746f 2062 6520 7275 6e6e  oreDB to be runn
-000154c0: 696e 6729 2e0a 0a20 2020 2024 206d 616b  ing)...    $ mak
-000154d0: 6520 7465 7374 0a0a 596f 7520 6361 6e20  e test..You can 
-000154e0: 7374 6f70 2045 7665 6e74 5374 6f72 6544  stop EventStoreD
-000154f0: 4220 7573 696e 6720 7468 6520 666f 6c6c  B using the foll
-00015500: 6f77 696e 6720 636f 6d6d 616e 642e 0a0a  owing command...
-00015510: 2020 2020 2420 6d61 6b65 2073 746f 702d      $ make stop-
-00015520: 6576 656e 7473 746f 7265 6462 0a0a 596f  eventstoredb..Yo
-00015530: 7520 6361 6e20 6368 6563 6b20 7468 6520  u can check the 
-00015540: 666f 726d 6174 7469 6e67 206f 6620 7468  formatting of th
-00015550: 6520 636f 6465 2075 7369 6e67 2074 6865  e code using the
-00015560: 2066 6f6c 6c6f 7769 6e67 2063 6f6d 6d61   following comma
-00015570: 6e64 2e0a 0a20 2020 2024 206d 616b 6520  nd...    $ make 
-00015580: 6c69 6e74 0a0a 596f 7520 6361 6e20 7265  lint..You can re
-00015590: 666f 726d 6174 2074 6865 2063 6f64 6520  format the code 
-000155a0: 7573 696e 6720 7468 6520 666f 6c6c 6f77  using the follow
-000155b0: 696e 6720 636f 6d6d 616e 642e 0a0a 2020  ing command...  
-000155c0: 2020 2420 6d61 6b65 2066 6d74 0a0a 5465    $ make fmt..Te
-000155d0: 7374 7320 6265 6c6f 6e67 2069 6e20 602e  sts belong in `.
-000155e0: 2f74 6573 7473 602e 2043 6f64 652d 756e  /tests`. Code-un
-000155f0: 6465 722d 7465 7374 2062 656c 6f6e 6773  der-test belongs
-00015600: 2069 6e20 602e 2f65 7364 6263 6c69 656e   in `./esdbclien
-00015610: 7460 2e0a 0a45 6469 7420 7061 636b 6167  t`...Edit packag
-00015620: 6520 6465 7065 6e64 656e 6369 6573 2069  e dependencies i
-00015630: 6e20 6070 7970 726f 6a65 6374 2e74 6f6d  n `pyproject.tom
-00015640: 6c60 2e20 5570 6461 7465 2069 6e73 7461  l`. Update insta
-00015650: 6c6c 6564 2070 6163 6b61 6765 7320 2861  lled packages (a
-00015660: 6e64 2074 6865 0a60 706f 6574 7279 2e6c  nd the.`poetry.l
-00015670: 6f63 6b60 2066 696c 6529 2075 7369 6e67  ock` file) using
-00015680: 2074 6865 2066 6f6c 6c6f 7769 6e67 2063   the following c
-00015690: 6f6d 6d61 6e64 2e0a 0a20 2020 2024 206d  ommand...    $ m
-000156a0: 616b 6520 7570 6461 7465 2d70 6163 6b61  ake update-packa
-000156b0: 6765 730a 0a                             ges..
+00003d60: 6f6e 6020 6172 6775 6d65 6e74 2069 7320  on` argument is 
+00003d70: 7265 7175 6972 6564 2c20 6973 2065 7870  required, is exp
+00003d80: 6563 7465 6420 746f 2062 653a 2060 4e6f  ected to be: `No
+00003d90: 6e65 600a 6966 2065 7665 6e74 7320 6172  ne`.if events ar
+00003da0: 6520 6265 696e 6720 7772 6974 7465 6e20  e being written 
+00003db0: 746f 2061 206e 6577 2073 7472 6561 6d2c  to a new stream,
+00003dc0: 2061 6e64 206f 7468 6572 7769 7365 2061   and otherwise a
+00003dd0: 6e20 5079 7468 6f6e 2060 696e 7460 0a65  n Python `int`.e
+00003de0: 7175 616c 2074 6f20 7468 6520 706f 7369  qual to the posi
+00003df0: 7469 6f6e 2069 6e20 7468 6520 7374 7265  tion in the stre
+00003e00: 616d 206f 6620 7468 6520 6c61 7374 2072  am of the last r
+00003e10: 6563 6f72 6465 6420 6576 656e 7420 696e  ecorded event in
+00003e20: 2074 6865 2073 7472 6561 6d2e 0a0a 5468   the stream...Th
+00003e30: 6520 6065 7665 6e74 7360 2061 7267 756d  e `events` argum
+00003e40: 656e 7420 6973 2072 6571 7569 7265 642c  ent is required,
+00003e50: 2061 6e64 2069 7320 6578 7065 6374 6564   and is expected
+00003e60: 2074 6f20 6265 2061 2073 6571 7565 6e63   to be a sequenc
+00003e70: 6520 6f66 206e 6577 0a65 7665 6e74 206f  e of new.event o
+00003e80: 626a 6563 7473 2074 6f20 6265 2061 7070  bjects to be app
+00003e90: 656e 6465 6420 746f 2074 6865 206e 616d  ended to the nam
+00003ea0: 6564 2073 7472 6561 6d2e 2054 6865 2060  ed stream. The `
+00003eb0: 4e65 7745 7665 6e74 6020 636c 6173 7320  NewEvent` class 
+00003ec0: 7368 6f75 6c64 0a62 6520 7573 6564 2074  should.be used t
+00003ed0: 6f20 636f 6e73 7472 7563 7420 6e65 7720  o construct new 
+00003ee0: 6576 656e 7420 6f62 6a65 6374 7320 2873  event objects (s
+00003ef0: 6565 2062 656c 6f77 292e 0a0a 5468 6973  ee below)...This
+00003f00: 206d 6574 686f 6420 7461 6b65 7320 616e   method takes an
+00003f10: 206f 7074 696f 6e61 6c20 6074 696d 656f   optional `timeo
+00003f20: 7574 6020 6172 6775 6d65 6e74 2c20 7768  ut` argument, wh
+00003f30: 6963 6820 6973 2061 2050 7974 686f 6e20  ich is a Python 
+00003f40: 6066 6c6f 6174 6020 7468 6174 2073 6574  `float` that set
+00003f50: 730a 6120 6465 6164 6c69 6e65 2066 6f72  s.a deadline for
+00003f60: 2074 6865 2063 6f6d 706c 6574 696f 6e20   the completion 
+00003f70: 6f66 2074 6865 2067 5250 4320 6f70 6572  of the gRPC oper
+00003f80: 6174 696f 6e2e 0a0a 5374 7265 616d 7320  ation...Streams 
+00003f90: 6172 6520 6372 6561 7465 6420 6279 2077  are created by w
+00003fa0: 7269 7469 6e67 2065 7665 6e74 732e 2054  riting events. T
+00003fb0: 6865 2063 6f72 7265 6374 2076 616c 7565  he correct value
+00003fc0: 206f 6620 7468 6520 6065 7870 6563 7465   of the `expecte
+00003fd0: 645f 706f 7369 7469 6f6e 600a 6172 6775  d_position`.argu
+00003fe0: 6d65 6e74 2077 6865 6e20 7772 6974 696e  ment when writin
+00003ff0: 6720 7468 6520 6669 7273 7420 6576 656e  g the first even
+00004000: 7420 6f66 2061 206e 6577 2073 7472 6561  t of a new strea
+00004010: 6d20 6973 2060 4e6f 6e65 602e 2050 6c65  m is `None`. Ple
+00004020: 6173 6520 6e6f 7465 2c20 6974 2069 730a  ase note, it is.
+00004030: 6e6f 7420 706f 7373 6962 6c65 2074 6f20  not possible to 
+00004040: 736f 6d65 686f 7720 6372 6561 7465 2061  somehow create a
+00004050: 6e20 2265 6d70 7479 2220 7374 7265 616d  n "empty" stream
+00004060: 2069 6e20 4576 656e 7453 746f 7265 4442   in EventStoreDB
+00004070: 2e0a 0a54 6865 2073 7472 6561 6d20 706f  ...The stream po
+00004080: 7369 7469 6f6e 7320 6f66 2072 6563 6f72  sitions of recor
+00004090: 6465 6420 6576 656e 7473 2069 6e20 6120  ded events in a 
+000040a0: 7374 7265 616d 2073 7461 7274 2066 726f  stream start fro
+000040b0: 6d20 7a65 726f 2c20 616e 6420 666f 726d  m zero, and form
+000040c0: 2061 2067 6170 6c65 7373 0a73 6571 7565   a gapless.seque
+000040d0: 6e63 6520 6f66 2069 6e74 6567 6572 732e  nce of integers.
+000040e0: 2054 6865 2073 7472 6561 6d20 706f 7369   The stream posi
+000040f0: 7469 6f6e 206f 6620 7468 6520 6669 7273  tion of the firs
+00004100: 7420 7265 636f 7264 6564 2065 7665 6e74  t recorded event
+00004110: 2069 6e20 6120 7374 7265 616d 2069 730a   in a stream is.
+00004120: 6030 602e 2041 6e64 2073 6f20 7768 656e  `0`. And so when
+00004130: 2061 7070 656e 6469 6e67 2074 6865 2073   appending the s
+00004140: 6563 6f6e 6420 6e65 7720 6576 656e 7420  econd new event 
+00004150: 746f 2061 2073 7472 6561 6d20 7468 6174  to a stream that
+00004160: 2068 6173 206f 6e65 2072 6563 6f72 6465   has one recorde
+00004170: 6420 6576 656e 742c 0a74 6865 2063 6f72  d event,.the cor
+00004180: 7265 6374 2076 616c 7565 206f 6620 7468  rect value of th
+00004190: 6520 6065 7870 6563 7465 645f 706f 7369  e `expected_posi
+000041a0: 7469 6f6e 6020 6172 6775 6d65 6e74 2069  tion` argument i
+000041b0: 7320 6030 602e 2053 696d 696c 6172 6c79  s `0`. Similarly
+000041c0: 2c20 7468 6520 7374 7265 616d 0a70 6f73  , the stream.pos
+000041d0: 6974 696f 6e20 6f66 2074 6865 2073 6563  ition of the sec
+000041e0: 6f6e 6420 7265 636f 7264 6564 2065 7665  ond recorded eve
+000041f0: 6e74 2069 6e20 6120 7374 7265 616d 2069  nt in a stream i
+00004200: 7320 6031 602c 2061 6e64 2073 6f20 7768  s `1`, and so wh
+00004210: 656e 2061 7070 656e 6469 6e67 2074 6865  en appending the
+00004220: 0a74 6869 7264 206e 6577 2065 7665 6e74  .third new event
+00004230: 2074 6f20 6120 7374 7265 616d 2074 6861   to a stream tha
+00004240: 7420 6861 7320 7477 6f20 7265 636f 7264  t has two record
+00004250: 6564 2065 7665 6e74 732c 2074 6865 2063  ed events, the c
+00004260: 6f72 7265 6374 2076 616c 7565 206f 6620  orrect value of 
+00004270: 7468 650a 6065 7870 6563 7465 645f 706f  the.`expected_po
+00004280: 7369 7469 6f6e 6020 6172 6775 6d65 6e74  sition` argument
+00004290: 2069 7320 6031 602e 2041 6e64 2073 6f20   is `1`. And so 
+000042a0: 6f6e 2e2e 2e20 2854 6865 7265 2069 7320  on... (There is 
+000042b0: 6120 7468 656f 7265 7469 6361 6c20 6d61  a theoretical ma
+000042c0: 7869 6d75 6d0a 6e75 6d62 6572 206f 6620  ximum.number of 
+000042d0: 7265 636f 7264 6564 2065 7665 6e74 7320  recorded events 
+000042e0: 7468 6174 2061 6e79 2073 7472 6561 6d20  that any stream 
+000042f0: 6361 6e20 6861 7665 2c20 6275 7420 4927  can have, but I'
+00004300: 6d20 6e6f 7420 7375 7265 2077 6861 7420  m not sure what 
+00004310: 6974 2069 733b 0a6d 6179 6265 2039 2c32  it is;.maybe 9,2
+00004320: 3233 2c33 3732 2c30 3336 2c38 3534 2c37  23,372,036,854,7
+00004330: 3735 2c38 3037 2062 6563 6175 7365 2069  75,807 because i
+00004340: 7420 6973 2069 6d70 6c65 6d65 6e74 6564  t is implemented
+00004350: 2061 7320 6120 606c 6f6e 6760 2069 6e20   as a `long` in 
+00004360: 4323 3f29 0a0a 4966 2074 6865 7265 2069  C#?)..If there i
+00004370: 7320 6120 6d69 736d 6174 6368 2062 6574  s a mismatch bet
+00004380: 7765 656e 2074 6865 2067 6976 656e 2076  ween the given v
+00004390: 616c 7565 206f 6620 7468 6520 6065 7870  alue of the `exp
+000043a0: 6563 7465 645f 706f 7369 7469 6f6e 6020  ected_position` 
+000043b0: 6172 6775 6d65 6e74 0a61 6e64 2074 6865  argument.and the
+000043c0: 2070 6f73 6974 696f 6e20 6f66 2074 6865   position of the
+000043d0: 206c 6173 7420 7265 636f 7264 6564 2065   last recorded e
+000043e0: 7665 6e74 2069 6e20 6120 7374 7265 616d  vent in a stream
+000043f0: 2c20 7468 656e 2061 6e20 6045 7870 6563  , then an `Expec
+00004400: 7465 6450 6f73 6974 696f 6e45 7272 6f72  tedPositionError
+00004410: 600a 6578 6365 7074 696f 6e20 7769 6c6c  `.exception will
+00004420: 2062 6520 7261 6973 6564 2e20 5468 6973   be raised. This
+00004430: 2065 6666 6563 7469 7665 6c79 2061 6363   effectively acc
+00004440: 6f6d 706c 6973 6865 7320 6f70 7469 6d69  omplishes optimi
+00004450: 7374 6963 2063 6f6e 6375 7272 656e 6379  stic concurrency
+00004460: 2063 6f6e 7472 6f6c 2e0a 0a49 6620 796f   control...If yo
+00004470: 7520 7769 7368 2074 6f20 6469 7361 626c  u wish to disabl
+00004480: 6520 6f70 7469 6d69 7374 6963 2063 6f6e  e optimistic con
+00004490: 6375 7272 656e 6379 2063 6f6e 7472 6f6c  currency control
+000044a0: 2077 6865 6e20 6170 7065 6e64 696e 6720   when appending 
+000044b0: 6e65 7720 6576 656e 7473 2c20 796f 750a  new events, you.
+000044c0: 6361 6e20 7365 7420 7468 6520 6065 7870  can set the `exp
+000044d0: 6563 7465 645f 706f 7369 7469 6f6e 6020  ected_position` 
+000044e0: 746f 2061 206e 6567 6174 6976 6520 696e  to a negative in
+000044f0: 7465 6765 722e 0a0a 4966 2079 6f75 206e  teger...If you n
+00004500: 6565 6420 746f 2064 6973 636f 7665 7220  eed to discover 
+00004510: 7468 6520 6375 7272 656e 7420 706f 7369  the current posi
+00004520: 7469 6f6e 206f 6620 7468 6520 6c61 7374  tion of the last
+00004530: 2072 6563 6f72 6465 6420 6576 656e 7420   recorded event 
+00004540: 696e 2061 2073 7472 6561 6d2c 0a79 6f75  in a stream,.you
+00004550: 2063 616e 2075 7365 2074 6865 2060 6765   can use the `ge
+00004560: 745f 7374 7265 616d 5f70 6f73 6974 696f  t_stream_positio
+00004570: 6e28 2960 206d 6574 686f 6420 2873 6565  n()` method (see
+00004580: 2062 656c 6f77 292e 0a0a 506c 6561 7365   below)...Please
+00004590: 206e 6f74 652c 2074 6865 2061 7070 656e   note, the appen
+000045a0: 6420 6576 656e 7473 206f 7065 7261 7469  d events operati
+000045b0: 6f6e 2069 7320 6174 6f6d 6963 2c20 736f  on is atomic, so
+000045c0: 2074 6861 7420 6569 7468 6572 2061 6c6c   that either all
+000045d0: 0a6f 7220 6e6f 6e65 206f 6620 7468 6520  .or none of the 
+000045e0: 6769 7665 6e20 6e65 7720 6576 656e 7473  given new events
+000045f0: 2077 696c 6c20 6265 2072 6563 6f72 6465   will be recorde
+00004600: 642e 2042 7920 6465 7369 676e 2c20 6974  d. By design, it
+00004610: 2069 7320 6f6e 6c79 0a70 6f73 7369 626c   is only.possibl
+00004620: 6520 7769 7468 2045 7665 6e74 5374 6f72  e with EventStor
+00004630: 6544 4220 746f 2061 746f 6d69 6361 6c6c  eDB to atomicall
+00004640: 7920 7265 636f 7264 206e 6577 2065 7665  y record new eve
+00004650: 6e74 7320 696e 206f 6e65 2073 7472 6561  nts in one strea
+00004660: 6d2e 0a0a 496e 2074 6865 2065 7861 6d70  m...In the examp
+00004670: 6c65 2062 656c 6f77 2c20 6120 6e65 7720  le below, a new 
+00004680: 6576 656e 7420 6973 2061 7070 656e 6465  event is appende
+00004690: 6420 746f 2061 206e 6577 2073 7472 6561  d to a new strea
+000046a0: 6d2e 0a0a 6060 6070 7974 686f 6e0a 6672  m...```python.fr
+000046b0: 6f6d 2075 7569 6420 696d 706f 7274 2075  om uuid import u
+000046c0: 7569 6434 0a0a 6672 6f6d 2065 7364 6263  uid4..from esdbc
+000046d0: 6c69 656e 7420 696d 706f 7274 204e 6577  lient import New
+000046e0: 4576 656e 740a 0a23 2043 6f6e 7374 7275  Event..# Constru
+000046f0: 6374 206e 6577 2065 7665 6e74 206f 626a  ct new event obj
+00004700: 6563 742e 0a65 7665 6e74 3120 3d20 4e65  ect..event1 = Ne
+00004710: 7745 7665 6e74 2874 7970 653d 274f 7264  wEvent(type='Ord
+00004720: 6572 4372 6561 7465 6427 2c20 6461 7461  erCreated', data
+00004730: 3d62 2764 6174 6131 2729 0a0a 2320 4465  =b'data1')..# De
+00004740: 6669 6e65 2073 7472 6561 6d20 6e61 6d65  fine stream name
+00004750: 2e0a 7374 7265 616d 5f6e 616d 6531 203d  ..stream_name1 =
+00004760: 2073 7472 2875 7569 6434 2829 290a 0a23   str(uuid4())..#
+00004770: 2041 7070 656e 6420 6c69 7374 206f 6620   Append list of 
+00004780: 6576 656e 7473 2074 6f20 6e65 7720 7374  events to new st
+00004790: 7265 616d 2e0a 636f 6d6d 6974 5f70 6f73  ream..commit_pos
+000047a0: 6974 696f 6e31 203d 2063 6c69 656e 742e  ition1 = client.
+000047b0: 6170 7065 6e64 5f65 7665 6e74 7328 0a20  append_events(. 
+000047c0: 2020 2073 7472 6561 6d5f 6e61 6d65 3d73     stream_name=s
+000047d0: 7472 6561 6d5f 6e61 6d65 312c 0a20 2020  tream_name1,.   
+000047e0: 2065 7870 6563 7465 645f 706f 7369 7469   expected_positi
+000047f0: 6f6e 3d4e 6f6e 652c 0a20 2020 2065 7665  on=None,.    eve
+00004800: 6e74 733d 5b65 7665 6e74 315d 2c0a 290a  nts=[event1],.).
+00004810: 6060 600a 0a49 6e20 7468 6520 6578 616d  ```..In the exam
+00004820: 706c 6520 6265 6c6f 772c 2074 776f 2073  ple below, two s
+00004830: 7562 7365 7175 656e 7420 6576 656e 7473  ubsequent events
+00004840: 2061 7265 2061 7070 656e 6465 6420 746f   are appended to
+00004850: 2061 6e20 6578 6973 7469 6e67 0a73 7472   an existing.str
+00004860: 6561 6d2e 0a0a 6060 6070 7974 686f 6e0a  eam...```python.
+00004870: 6576 656e 7432 203d 204e 6577 4576 656e  event2 = NewEven
+00004880: 7428 7479 7065 3d27 4f72 6465 7255 7064  t(type='OrderUpd
+00004890: 6174 6564 272c 2064 6174 613d 6227 6461  ated', data=b'da
+000048a0: 7461 3227 290a 6576 656e 7433 203d 204e  ta2').event3 = N
+000048b0: 6577 4576 656e 7428 7479 7065 3d27 4f72  ewEvent(type='Or
+000048c0: 6465 7244 656c 6574 6564 272c 2064 6174  derDeleted', dat
+000048d0: 613d 6227 6461 7461 3327 290a 0a63 6f6d  a=b'data3')..com
+000048e0: 6d69 745f 706f 7369 7469 6f6e 3220 3d20  mit_position2 = 
+000048f0: 636c 6965 6e74 2e61 7070 656e 645f 6576  client.append_ev
+00004900: 656e 7473 280a 2020 2020 7374 7265 616d  ents(.    stream
+00004910: 5f6e 616d 653d 7374 7265 616d 5f6e 616d  _name=stream_nam
+00004920: 6531 2c0a 2020 2020 6578 7065 6374 6564  e1,.    expected
+00004930: 5f70 6f73 6974 696f 6e3d 302c 0a20 2020  _position=0,.   
+00004940: 2065 7665 6e74 733d 5b65 7665 6e74 322c   events=[event2,
+00004950: 2065 7665 6e74 335d 2c0a 290a 6060 600a   event3],.).```.
+00004960: 0a49 6620 7468 6520 6f70 6572 6174 696f  .If the operatio
+00004970: 6e20 6973 2073 7563 6365 7373 6675 6c2c  n is successful,
+00004980: 2074 6869 7320 6d65 7468 6f64 2072 6574   this method ret
+00004990: 7572 6e73 2061 6e20 696e 7465 6765 720a  urns an integer.
+000049a0: 7265 7072 6573 656e 7469 6e67 2074 6865  representing the
+000049b0: 206f 7665 7261 6c6c 2022 636f 6d6d 6974   overall "commit
+000049c0: 2070 6f73 6974 696f 6e22 2061 7320 6974   position" as it
+000049d0: 2077 6173 2077 6865 6e20 7468 6520 6f70   was when the op
+000049e0: 6572 6174 696f 6e0a 7761 7320 636f 6d70  eration.was comp
+000049f0: 6c65 7465 642e 204f 7468 6572 7769 7365  leted. Otherwise
+00004a00: 2c20 616e 2065 7863 6570 7469 6f6e 2077  , an exception w
+00004a10: 696c 6c20 6265 2072 6169 7365 642e 0a0a  ill be raised...
+00004a20: 4120 2263 6f6d 6d69 7420 706f 7369 7469  A "commit positi
+00004a30: 6f6e 2220 6973 2061 206d 6f6e 6f74 6f6e  on" is a monoton
+00004a40: 6963 616c 6c79 2069 6e63 7265 6173 696e  ically increasin
+00004a50: 6720 696e 7465 6765 7220 7265 7072 6573  g integer repres
+00004a60: 656e 7469 6e67 0a74 6865 2070 6f73 6974  enting.the posit
+00004a70: 696f 6e20 6f66 2074 6865 2072 6563 6f72  ion of the recor
+00004a80: 6465 6420 6576 656e 7420 696e 2061 2022  ded event in a "
+00004a90: 746f 7461 6c20 6f72 6465 7222 206f 6620  total order" of 
+00004aa0: 616c 6c20 7265 636f 7264 6564 0a65 7665  all recorded.eve
+00004ab0: 6e74 7320 696e 2074 6865 2064 6174 6162  nts in the datab
+00004ac0: 6173 6520 6163 726f 7373 2061 6c6c 2073  ase across all s
+00004ad0: 7472 6561 6d73 2e20 4974 2069 7320 7468  treams. It is th
+00004ae0: 6520 6163 7475 616c 2070 6f73 6974 696f  e actual positio
+00004af0: 6e0a 6f66 2074 6865 2065 7665 6e74 2072  n.of the event r
+00004b00: 6563 6f72 6420 6f6e 2064 6973 6b2c 2061  ecord on disk, a
+00004b10: 6e64 2074 6865 7265 2061 7265 2075 7375  nd there are usu
+00004b20: 616c 6c79 206c 6172 6765 2064 6966 6665  ally large diffe
+00004b30: 7265 6e63 6573 0a62 6574 7765 656e 2073  rences.between s
+00004b40: 7563 6365 7373 6976 6520 636f 6d6d 6974  uccessive commit
+00004b50: 732e 2049 6e20 636f 6e73 6571 7565 6e63  s. In consequenc
+00004b60: 652c 2074 6865 2073 6571 7565 6e63 6520  e, the sequence 
+00004b70: 6f66 2063 6f6d 6d69 740a 706f 7369 7469  of commit.positi
+00004b80: 6f6e 7320 6973 206e 6f74 2067 6170 6c65  ons is not gaple
+00004b90: 7373 2e20 496e 6465 6564 2c20 7468 6572  ss. Indeed, ther
+00004ba0: 6520 6172 6520 7573 7561 6c6c 7920 6c61  e are usually la
+00004bb0: 7267 6520 6469 6666 6572 656e 6365 730a  rge differences.
+00004bc0: 6265 7477 6565 6e20 7468 6520 636f 6d6d  between the comm
+00004bd0: 6974 2070 6f73 6974 696f 6e73 206f 6620  it positions of 
+00004be0: 7375 6363 6573 7369 7665 2072 6563 6f72  successive recor
+00004bf0: 6465 6420 6576 656e 7473 2e0a 0a54 6865  ded events...The
+00004c00: 2022 636f 6d6d 6974 2070 6f73 6974 696f   "commit positio
+00004c10: 6e22 2072 6574 7572 6e65 6420 6279 2060  n" returned by `
+00004c20: 6170 7065 6e64 5f65 7665 6e74 7328 2960  append_events()`
+00004c30: 2069 7320 7468 6174 206f 6620 7468 6520   is that of the 
+00004c40: 6c61 7374 0a72 6563 6f72 6465 6420 6576  last.recorded ev
+00004c50: 656e 7420 696e 2074 6865 2067 6976 656e  ent in the given
+00004c60: 2062 6174 6368 206f 6620 6e65 7720 6576   batch of new ev
+00004c70: 656e 7473 2e0a 0a54 6865 2022 636f 6d6d  ents...The "comm
+00004c80: 6974 2070 6f73 6974 696f 6e22 2072 6574  it position" ret
+00004c90: 7572 6e65 6420 696e 2074 6869 7320 7761  urned in this wa
+00004ca0: 7920 6361 6e20 7468 6572 6566 6f72 6520  y can therefore 
+00004cb0: 6265 2075 7365 6420 746f 2077 6169 740a  be used to wait.
+00004cc0: 666f 7220 6120 646f 776e 7374 7265 616d  for a downstream
+00004cd0: 2063 6f6d 706f 6e65 6e74 2074 6f20 6861   component to ha
+00004ce0: 7665 2070 726f 6365 7373 6564 2061 6c6c  ve processed all
+00004cf0: 2074 6865 2065 7665 6e74 7320 7468 6174   the events that
+00004d00: 2077 6572 6520 7265 636f 7264 6564 2e0a   were recorded..
+00004d10: 0a46 6f72 2065 7861 6d70 6c65 2c20 636f  .For example, co
+00004d20: 6e73 6964 6572 2061 2075 7365 7220 696e  nsider a user in
+00004d30: 7465 7266 6163 6520 636f 6d6d 616e 6420  terface command 
+00004d40: 7468 6174 2072 6573 756c 7473 2069 6e20  that results in 
+00004d50: 7468 6520 7265 636f 7264 696e 670a 6f66  the recording.of
+00004d60: 206e 6577 2065 7665 6e74 732c 2061 6e64   new events, and
+00004d70: 2061 2071 7565 7279 2069 6e74 6f20 616e   a query into an
+00004d80: 2065 7665 6e74 7561 6c6c 7920 636f 6e73   eventually cons
+00004d90: 6973 7465 6e74 206d 6174 6572 6961 6c69  istent materiali
+00004da0: 7a65 640a 7669 6577 2069 6e20 6120 646f  zed.view in a do
+00004db0: 776e 7374 7265 616d 2063 6f6d 706f 6e65  wnstream compone
+00004dc0: 6e74 2074 6861 7420 6973 2075 7064 6174  nt that is updat
+00004dd0: 6564 2066 726f 6d20 7468 6573 6520 6576  ed from these ev
+00004de0: 656e 7473 2e20 4966 2074 6865 206e 6577  ents. If the new
+00004df0: 0a65 7665 6e74 7320 6861 7665 206e 6f74  .events have not
+00004e00: 2079 6574 2062 6565 6e20 7072 6f63 6573   yet been proces
+00004e10: 7365 642c 2074 6865 2076 6965 7720 776f  sed, the view wo
+00004e20: 756c 6420 6265 2073 7461 6c65 2e20 5468  uld be stale. Th
+00004e30: 6520 2263 6f6d 6d69 7420 706f 7369 7469  e "commit positi
+00004e40: 6f6e 220a 6361 6e20 6265 2075 7365 6420  on".can be used 
+00004e50: 6279 2074 6865 2075 7365 7220 696e 7465  by the user inte
+00004e60: 7266 6163 6520 746f 2070 6f6c 6c20 7468  rface to poll th
+00004e70: 6520 646f 776e 7374 7265 616d 2063 6f6d  e downstream com
+00004e80: 706f 6e65 6e74 2075 6e74 696c 2069 7420  ponent until it 
+00004e90: 6861 730a 7072 6f63 6573 7365 6420 7468  has.processed th
+00004ea0: 6f73 6520 6e65 7720 6576 656e 7473 2c20  ose new events, 
+00004eb0: 6166 7465 7220 7768 6963 6820 7469 6d65  after which time
+00004ec0: 2074 6865 2076 6965 7720 7769 6c6c 206e   the view will n
+00004ed0: 6f74 2062 6520 7374 616c 652e 0a0a 0a23  ot be stale....#
+00004ee0: 2323 2041 7070 656e 6420 6576 656e 740a  ## Append event.
+00004ef0: 0a2a 7265 7175 6972 6573 206c 6561 6465  .*requires leade
+00004f00: 722a 0a0a 5468 6520 6061 7070 656e 645f  r*..The `append_
+00004f10: 6576 656e 7428 2960 206d 6574 686f 6420  event()` method 
+00004f20: 6361 6e20 6265 2075 7365 6420 746f 2077  can be used to w
+00004f30: 7269 7465 2061 2073 696e 676c 6520 6e65  rite a single ne
+00004f40: 7720 6576 656e 7420 746f 2061 2073 7472  w event to a str
+00004f50: 6561 6d2e 0a0a 5468 7265 6520 6172 6775  eam...Three argu
+00004f60: 6d65 6e74 7320 6172 6520 7265 7175 6972  ments are requir
+00004f70: 6564 2c20 6073 7472 6561 6d5f 6e61 6d65  ed, `stream_name
+00004f80: 602c 2060 6578 7065 6374 6564 5f70 6f73  `, `expected_pos
+00004f90: 6974 696f 6e60 2061 6e64 2060 6576 656e  ition` and `even
+00004fa0: 7460 2e0a 0a54 6869 7320 6d65 7468 6f64  t`...This method
+00004fb0: 2077 6f72 6b73 2069 6e20 7468 6520 7361   works in the sa
+00004fc0: 6d65 2077 6179 2061 7320 6061 7070 656e  me way as `appen
+00004fd0: 645f 6576 656e 7473 2829 602c 2068 6f77  d_events()`, how
+00004fe0: 6576 6572 2060 6576 656e 7460 2069 7320  ever `event` is 
+00004ff0: 6578 7065 6374 6564 0a74 6f20 6265 2061  expected.to be a
+00005000: 2073 696e 676c 6520 604e 6577 4576 656e   single `NewEven
+00005010: 7460 2e0a 0a54 6869 7320 6d65 7468 6f64  t`...This method
+00005020: 2074 616b 6573 2061 6e20 6f70 7469 6f6e   takes an option
+00005030: 616c 2060 7469 6d65 6f75 7460 2061 7267  al `timeout` arg
+00005040: 756d 656e 742c 2077 6869 6368 2069 7320  ument, which is 
+00005050: 6120 5079 7468 6f6e 2060 666c 6f61 7460  a Python `float`
+00005060: 2074 6861 7420 7365 7473 0a61 2064 6561   that sets.a dea
+00005070: 646c 696e 6520 666f 7220 7468 6520 636f  dline for the co
+00005080: 6d70 6c65 7469 6f6e 206f 6620 7468 6520  mpletion of the 
+00005090: 6752 5043 206f 7065 7261 7469 6f6e 2e0a  gRPC operation..
+000050a0: 0a53 696e 6365 2074 6865 2068 616e 646c  .Since the handl
+000050b0: 696e 6720 6f66 2061 2063 6f6d 6d61 6e64  ing of a command
+000050c0: 2069 6e20 796f 7572 2061 7070 6c69 6361   in your applica
+000050d0: 7469 6f6e 206d 6179 2072 6573 756c 7420  tion may result 
+000050e0: 696e 206f 6e65 206f 7220 6d61 6e79 0a6e  in one or many.n
+000050f0: 6577 2065 7665 6e74 732c 2061 6e64 2074  ew events, and t
+00005100: 6865 2072 6573 756c 7473 206f 6620 6861  he results of ha
+00005110: 6e64 6c69 6e67 2061 2063 6f6d 6d61 6e64  ndling a command
+00005120: 2073 686f 756c 6420 6265 2072 6563 6f72   should be recor
+00005130: 6465 6420 6174 6f6d 6963 616c 6c79 2c0a  ded atomically,.
+00005140: 616e 6420 7468 6520 7772 6974 696e 6720  and the writing 
+00005150: 6f66 206e 6577 2065 7665 6e74 7320 6765  of new events ge
+00005160: 6e65 7261 7465 6420 6279 2061 2063 6f6d  nerated by a com
+00005170: 6d61 6e64 2068 616e 646c 6572 2069 7320  mand handler is 
+00005180: 7573 7561 6c6c 7920 6120 636f 6e63 6572  usually a concer
+00005190: 6e0a 7468 6174 2069 7320 6661 6374 6f72  n.that is factor
+000051a0: 6564 206f 7574 2061 6e64 2075 7365 6420  ed out and used 
+000051b0: 6576 6572 7977 6865 7265 2069 6e20 6120  everywhere in a 
+000051c0: 7072 6f6a 6563 742c 2069 7420 6973 2071  project, it is q
+000051d0: 7569 7465 2075 7375 616c 2069 6e20 6120  uite usual in a 
+000051e0: 7072 6f6a 6563 740a 746f 206f 6e6c 7920  project.to only 
+000051f0: 7573 6520 6061 7070 656e 645f 6576 656e  use `append_even
+00005200: 7473 2829 6020 746f 2072 6563 6f72 6420  ts()` to record 
+00005210: 6e65 7720 6576 656e 7473 2e20 466f 7220  new events. For 
+00005220: 7468 6973 2072 6561 736f 6e2c 2061 6e20  this reason, an 
+00005230: 6578 616d 706c 6520 6973 0a6e 6f74 2070  example is.not p
+00005240: 726f 7669 6465 6420 6865 7265 2e0a 0a0a  rovided here....
+00005250: 2323 2320 4964 656d 706f 7465 6e74 2061  ### Idempotent a
+00005260: 7070 656e 6420 6f70 6572 6174 696f 6e73  ppend operations
+00005270: 0a0a 536f 6d65 7469 6d65 7320 6974 206d  ..Sometimes it m
+00005280: 6179 2068 6170 7065 6e20 7468 6174 2061  ay happen that a
+00005290: 206e 6577 2065 7665 6e74 2069 7320 7375   new event is su
+000052a0: 6363 6573 7366 756c 6c79 2072 6563 6f72  ccessfully recor
+000052b0: 6465 6420 616e 6420 7468 656e 2073 6f6d  ded and then som
+000052c0: 6568 6f77 0a74 6865 2063 6f6e 6e65 6374  ehow.the connect
+000052d0: 696f 6e20 746f 2074 6865 2064 6174 6162  ion to the datab
+000052e0: 6173 6520 6765 7473 2069 6e74 6572 7275  ase gets interru
+000052f0: 7074 6564 2062 6566 6f72 6520 7468 6520  pted before the 
+00005300: 7375 6363 6573 7366 756c 2063 616c 6c20  successful call 
+00005310: 6361 6e20 7265 7475 726e 0a73 7563 6365  can return.succe
+00005320: 7373 6675 6c6c 7920 746f 2074 6865 2063  ssfully to the c
+00005330: 6c69 656e 742e 2049 6e20 6361 7365 206f  lient. In case o
+00005340: 6620 616e 2065 7272 6f72 2077 6865 6e20  f an error when 
+00005350: 6170 7065 6e64 696e 6720 616e 2065 7665  appending an eve
+00005360: 6e74 2c20 6974 206d 6179 2062 650a 6465  nt, it may be.de
+00005370: 7369 7261 626c 6520 746f 2072 6574 7279  sirable to retry
+00005380: 2061 7070 656e 6469 6e67 2074 6865 2073   appending the s
+00005390: 616d 6520 6576 656e 7420 6174 2074 6865  ame event at the
+000053a0: 2073 616d 6520 706f 7369 7469 6f6e 2e20   same position. 
+000053b0: 4966 2074 6865 2065 7665 6e74 2077 6173  If the event was
+000053c0: 0a69 6e20 6661 6374 2073 7563 6365 7373  .in fact success
+000053d0: 6675 6c6c 7920 7265 636f 7264 6564 2c20  fully recorded, 
+000053e0: 6974 2069 7320 636f 6e76 656e 6965 6e74  it is convenient
+000053f0: 2066 6f72 2074 6865 2072 6574 7279 2074   for the retry t
+00005400: 6f20 7265 7475 726e 2073 7563 6365 7373  o return success
+00005410: 6675 6c6c 790a 7769 7468 6f75 7420 7261  fully.without ra
+00005420: 6973 696e 6720 616e 2065 7272 6f72 2064  ising an error d
+00005430: 7565 2074 6f20 6f70 7469 6d69 7374 6963  ue to optimistic
+00005440: 2063 6f6e 6375 7272 656e 6379 2063 6f6e   concurrency con
+00005450: 7472 6f6c 2028 6173 2064 6573 6372 6962  trol (as describ
+00005460: 6564 2061 626f 7665 292e 0a0a 5468 6520  ed above)...The 
+00005470: 6578 616d 706c 6520 6265 6c6f 7720 7368  example below sh
+00005480: 6f77 7320 7468 6520 6061 7070 656e 645f  ows the `append_
+00005490: 6576 656e 7473 2829 6020 6d65 7468 6f64  events()` method
+000054a0: 2062 6569 6e67 2063 616c 6c65 6420 6167   being called ag
+000054b0: 6169 6e20 7769 7468 0a60 6576 656e 7433  ain with.`event3
+000054c0: 6020 616e 6420 6065 7870 6563 7465 645f  ` and `expected_
+000054d0: 706f 7369 7469 6f6e 3d32 602e 2057 6520  position=2`. We 
+000054e0: 6361 6e20 7365 6520 7468 6174 2072 6570  can see that rep
+000054f0: 6561 7469 6e67 2074 6865 2063 616c 6c20  eating the call 
+00005500: 746f 0a60 6170 7065 6e64 5f65 7665 6e74  to.`append_event
+00005510: 7328 2960 2072 6574 7572 6e73 2073 7563  s()` returns suc
+00005520: 6365 7373 6675 6c6c 792e 0a0a 6060 6070  cessfully...```p
+00005530: 7974 686f 6e0a 2320 5265 7472 7920 6170  ython.# Retry ap
+00005540: 7065 6e64 696e 6720 6576 656e 7433 2e0a  pending event3..
+00005550: 636f 6d6d 6974 5f70 6f73 6974 696f 6e5f  commit_position_
+00005560: 7265 7472 7920 3d20 636c 6965 6e74 2e61  retry = client.a
+00005570: 7070 656e 645f 6576 656e 7473 280a 2020  ppend_events(.  
+00005580: 2020 7374 7265 616d 5f6e 616d 653d 7374    stream_name=st
+00005590: 7265 616d 5f6e 616d 6531 2c0a 2020 2020  ream_name1,.    
+000055a0: 6578 7065 6374 6564 5f70 6f73 6974 696f  expected_positio
+000055b0: 6e3d 302c 0a20 2020 2065 7665 6e74 733d  n=0,.    events=
+000055c0: 5b65 7665 6e74 322c 2065 7665 6e74 335d  [event2, event3]
+000055d0: 2c0a 290a 6060 600a 0a57 6520 6361 6e20  ,.).```..We can 
+000055e0: 7365 6520 7468 6174 2074 6865 2073 616d  see that the sam
+000055f0: 6520 636f 6d6d 6974 2070 6f73 6974 696f  e commit positio
+00005600: 6e20 6973 2072 6574 7572 6e65 6420 6173  n is returned as
+00005610: 2061 626f 7665 2e0a 0a60 6060 7079 7468   above...```pyth
+00005620: 6f6e 0a61 7373 6572 7420 636f 6d6d 6974  on.assert commit
+00005630: 5f70 6f73 6974 696f 6e5f 7265 7472 7920  _position_retry 
+00005640: 3d3d 2063 6f6d 6d69 745f 706f 7369 7469  == commit_positi
+00005650: 6f6e 320a 6060 600a 0a57 6520 6361 6e20  on2.```..We can 
+00005660: 616c 736f 2073 6565 2074 6865 2073 7472  also see the str
+00005670: 6561 6d20 6861 7320 6265 656e 2075 6e63  eam has been unc
+00005680: 6861 6e67 6564 2064 6573 7069 7465 2063  hanged despite c
+00005690: 616c 6c69 6e67 2074 6865 2061 7070 656e  alling the appen
+000056a0: 645f 6576 656e 7473 2829 0a74 7769 6365  d_events().twice
+000056b0: 2077 6974 6820 7468 6520 7361 6d65 2061   with the same a
+000056c0: 7267 756d 656e 7473 2c20 6279 2063 616c  rguments, by cal
+000056d0: 6c69 6e67 2060 7265 6164 5f73 7472 6561  ling `read_strea
+000056e0: 6d5f 6576 656e 7473 2829 602e 2054 6861  m_events()`. Tha
+000056f0: 7420 6973 2c20 7468 6572 650a 6172 6520  t is, there.are 
+00005700: 7374 696c 6c20 6f6e 6c79 2074 6872 6565  still only three
+00005710: 2065 7665 6e74 7320 696e 2074 6865 2073   events in the s
+00005720: 7472 6561 6d2e 0a0a 6060 6070 7974 686f  tream...```pytho
+00005730: 6e0a 6576 656e 7473 203d 2063 6c69 656e  n.events = clien
+00005740: 742e 7265 6164 5f73 7472 6561 6d5f 6576  t.read_stream_ev
+00005750: 656e 7473 280a 2020 2020 7374 7265 616d  ents(.    stream
+00005760: 5f6e 616d 653d 7374 7265 616d 5f6e 616d  _name=stream_nam
+00005770: 6531 0a29 0a0a 6173 7365 7274 206c 656e  e1.)..assert len
+00005780: 2865 7665 6e74 7329 203d 3d20 330a 6060  (events) == 3.``
+00005790: 600a 0a54 6869 7320 6964 656d 706f 7465  `..This idempote
+000057a0: 6e74 2062 6568 6176 696f 7572 2069 7320  nt behaviour is 
+000057b0: 6163 7469 7661 7465 6420 6265 6361 7573  activated becaus
+000057c0: 6520 7468 6520 604e 6577 4576 656e 7460  e the `NewEvent`
+000057d0: 2063 6c61 7373 2068 6173 2061 6e20 6069   class has an `i
+000057e0: 6460 0a61 7474 7269 6275 7465 2074 6861  d`.attribute tha
+000057f0: 742c 2062 7920 6465 6661 756c 742c 2069  t, by default, i
+00005800: 7320 6173 7369 676e 6564 2061 206e 6577  s assigned a new
+00005810: 2061 6e64 2075 6e69 7175 6520 7665 7273   and unique vers
+00005820: 696f 6e2d 3420 5555 4944 2077 6865 6e20  ion-4 UUID when 
+00005830: 616e 0a69 6e73 7461 6e63 6520 6f66 2060  an.instance of `
+00005840: 4e65 7745 7665 6e74 6020 6973 2063 6f6e  NewEvent` is con
+00005850: 7374 7275 6374 6564 2e20 4966 2065 7665  structed. If eve
+00005860: 6e74 7320 7769 7468 2074 6865 2073 616d  nts with the sam
+00005870: 6520 6069 6460 2061 7265 2061 7070 656e  e `id` are appen
+00005880: 6465 640a 6174 2074 6865 2073 616d 6520  ded.at the same 
+00005890: 6065 7870 6563 7465 645f 706f 7369 7469  `expected_positi
+000058a0: 6f6e 602c 2074 6865 2073 7472 6561 6d20  on`, the stream 
+000058b0: 7769 6c6c 2062 6520 756e 6368 616e 6765  will be unchange
+000058c0: 642c 2074 6865 206f 7065 7261 7469 6f6e  d, the operation
+000058d0: 2077 696c 6c0a 636f 6d70 6c65 7465 2073   will.complete s
+000058e0: 7563 6365 7373 6675 6c6c 792c 2061 6e64  uccessfully, and
+000058f0: 2074 6865 2073 616d 6520 636f 6d6d 6974   the same commit
+00005900: 2070 6f73 6974 696f 6e20 7769 6c6c 2062   position will b
+00005910: 6520 7265 7475 726e 6564 2074 6f20 7468  e returned to th
+00005920: 6520 6361 6c6c 6572 2e0a 0a60 6060 7079  e caller...```py
+00005930: 7468 6f6e 0a66 726f 6d20 7575 6964 2069  thon.from uuid i
+00005940: 6d70 6f72 7420 5555 4944 0a0a 0a61 7373  mport UUID...ass
+00005950: 6572 7420 6973 696e 7374 616e 6365 2865  ert isinstance(e
+00005960: 7665 6e74 312e 6964 2c20 5555 4944 290a  vent1.id, UUID).
+00005970: 6173 7365 7274 2069 7369 6e73 7461 6e63  assert isinstanc
+00005980: 6528 6576 656e 7432 2e69 642c 2055 5549  e(event2.id, UUI
+00005990: 4429 0a61 7373 6572 7420 6973 696e 7374  D).assert isinst
+000059a0: 616e 6365 2865 7665 6e74 332e 6964 2c20  ance(event3.id, 
+000059b0: 5555 4944 290a 0a61 7373 6572 7420 6576  UUID)..assert ev
+000059c0: 656e 7431 2e69 6420 213d 2065 7665 6e74  ent1.id != event
+000059d0: 322e 6964 0a61 7373 6572 7420 6576 656e  2.id.assert even
+000059e0: 7432 2e69 6420 213d 2065 7665 6e74 332e  t2.id != event3.
+000059f0: 6964 0a0a 6173 7365 7274 2065 7665 6e74  id..assert event
+00005a00: 735b 305d 2e69 6420 3d3d 2065 7665 6e74  s[0].id == event
+00005a10: 312e 6964 0a61 7373 6572 7420 6576 656e  1.id.assert even
+00005a20: 7473 5b31 5d2e 6964 203d 3d20 6576 656e  ts[1].id == even
+00005a30: 7432 2e69 640a 6173 7365 7274 2065 7665  t2.id.assert eve
+00005a40: 6e74 735b 325d 2e69 6420 3d3d 2065 7665  nts[2].id == eve
+00005a50: 6e74 332e 6964 0a60 6060 0a0a 4974 2069  nt3.id.```..It i
+00005a60: 7320 706f 7373 6962 6c65 2074 6f20 7365  s possible to se
+00005a70: 7420 7468 6520 6069 6460 2063 6f6e 7374  t the `id` const
+00005a80: 7275 6374 6f72 2061 7267 756d 656e 7420  ructor argument 
+00005a90: 6f66 2060 4e65 7745 7665 6e74 6020 7768  of `NewEvent` wh
+00005aa0: 656e 2069 6e73 7461 6e74 6961 7469 6e67  en instantiating
+00005ab0: 0a74 6865 2060 4e65 7745 7665 6e74 6020  .the `NewEvent` 
+00005ac0: 636c 6173 732c 2062 7574 2069 6e20 7468  class, but in th
+00005ad0: 6520 6578 616d 706c 6573 2061 626f 7665  e examples above
+00005ae0: 2077 6520 6861 7665 2062 6565 6e20 7573   we have been us
+00005af0: 696e 6720 7468 6520 6465 6661 756c 740a  ing the default.
+00005b00: 6265 6861 7669 6f75 722c 2077 6869 6368  behaviour, which
+00005b10: 2069 7320 7468 6174 2074 6865 2060 6964   is that the `id
+00005b20: 6020 7661 6c75 6520 6973 2067 656e 6572  ` value is gener
+00005b30: 6174 6564 2077 6865 6e20 7468 6520 604e  ated when the `N
+00005b40: 6577 4576 656e 7460 2063 6c61 7373 2069  ewEvent` class i
+00005b50: 730a 696e 7374 616e 7469 6174 6564 2e0a  s.instantiated..
+00005b60: 0a0a 2323 2320 5265 6164 2073 7472 6561  ..### Read strea
+00005b70: 6d20 6576 656e 7473 0a0a 5468 6520 6072  m events..The `r
+00005b80: 6561 645f 7374 7265 616d 5f65 7665 6e74  ead_stream_event
+00005b90: 7328 2960 206d 6574 686f 6420 6361 6e20  s()` method can 
+00005ba0: 6265 2075 7365 6420 746f 206f 6274 6169  be used to obtai
+00005bb0: 6e20 7468 6520 7265 636f 7264 6564 2065  n the recorded e
+00005bc0: 7665 6e74 7320 696e 2061 0a73 7472 6561  vents in a.strea
+00005bd0: 6d2e 2049 7420 7265 7475 726e 7320 6120  m. It returns a 
+00005be0: 7365 7175 656e 6365 206f 6620 7265 636f  sequence of reco
+00005bf0: 7264 6564 2065 7665 6e74 7320 6f62 6a65  rded events obje
+00005c00: 6374 732e 2054 6865 2072 6563 6569 7665  cts. The receive
+00005c10: 6420 7265 636f 7264 6564 2065 7665 6e74  d recorded event
+00005c20: 0a6f 626a 6563 7420 6172 6520 696e 7374  .object are inst
+00005c30: 616e 6365 7320 6f66 2074 6865 2060 5265  ances of the `Re
+00005c40: 636f 7264 6564 4576 656e 7460 2063 6c61  cordedEvent` cla
+00005c50: 7373 2028 7365 6520 6265 6c6f 7729 2e0a  ss (see below)..
+00005c60: 0a54 6869 7320 6d65 7468 6f64 2068 6173  .This method has
+00005c70: 206f 6e65 2072 6571 7569 7265 6420 6172   one required ar
+00005c80: 6775 6d65 6e74 2c20 6073 7472 6561 6d5f  gument, `stream_
+00005c90: 6e61 6d65 602c 2077 6869 6368 2069 7320  name`, which is 
+00005ca0: 7468 6520 6e61 6d65 206f 660a 7468 6520  the name of.the 
+00005cb0: 7374 7265 616d 2066 726f 6d20 7768 6963  stream from whic
+00005cc0: 6820 746f 2072 6561 6420 6576 656e 7473  h to read events
+00005cd0: 2e20 4279 2064 6566 6175 6c74 2c20 7468  . By default, th
+00005ce0: 6520 7265 636f 7264 6564 2065 7665 6e74  e recorded event
+00005cf0: 7320 696e 2074 6865 0a73 7472 6561 6d20  s in the.stream 
+00005d00: 6172 6520 7265 7475 726e 6564 2069 6e20  are returned in 
+00005d10: 7468 6520 6f72 6465 7220 7468 6579 2077  the order they w
+00005d20: 6572 6520 7265 636f 7264 6564 2e0a 0a54  ere recorded...T
+00005d30: 6865 206d 6574 686f 6420 6072 6561 645f  he method `read_
+00005d40: 7374 7265 616d 5f65 7665 6e74 7328 2960  stream_events()`
+00005d50: 2061 6c73 6f20 7375 7070 6f72 7473 2066   also supports f
+00005d60: 6f75 7220 6f70 7469 6f6e 616c 2061 7267  our optional arg
+00005d70: 756d 656e 7473 2c0a 6073 7472 6561 6d5f  uments,.`stream_
+00005d80: 706f 7369 7469 6f6e 602c 2060 6261 636b  position`, `back
+00005d90: 7761 7264 7360 2c20 606c 696d 6974 602c  wards`, `limit`,
+00005da0: 2061 6e64 2060 7469 6d65 6f75 7460 2e0a   and `timeout`..
+00005db0: 0a54 6865 206f 7074 696f 6e61 6c20 6073  .The optional `s
+00005dc0: 7472 6561 6d5f 706f 7369 7469 6f6e 6020  tream_position` 
+00005dd0: 6172 6775 6d65 6e74 2069 7320 616e 206f  argument is an o
+00005de0: 7074 696f 6e61 6c20 696e 7465 6765 7220  ptional integer 
+00005df0: 7468 6174 2063 616e 2062 6520 7573 6564  that can be used
+00005e00: 2074 6f0a 696e 6469 6361 7465 2074 6865   to.indicate the
+00005e10: 2070 6f73 6974 696f 6e20 696e 2074 6865   position in the
+00005e20: 2073 7472 6561 6d20 6672 6f6d 2077 6869   stream from whi
+00005e30: 6368 2074 6f20 7374 6172 7420 7265 6164  ch to start read
+00005e40: 696e 672e 2054 6869 7320 6172 6775 6d65  ing. This argume
+00005e50: 6e74 2069 730a 604e 6f6e 6560 2062 7920  nt is.`None` by 
+00005e60: 6465 6661 756c 742c 2077 6869 6368 206d  default, which m
+00005e70: 6561 6e73 2074 6865 2073 7472 6561 6d20  eans the stream 
+00005e80: 7769 6c6c 2062 6520 7265 6164 2065 6974  will be read eit
+00005e90: 6865 7220 6672 6f6d 2074 6865 2073 7461  her from the sta
+00005ea0: 7274 206f 6620 7468 650a 7374 7265 616d  rt of the.stream
+00005eb0: 2028 7468 6520 6465 6661 756c 7420 6265   (the default be
+00005ec0: 6861 7669 6f75 7229 2c20 6f72 2066 726f  haviour), or fro
+00005ed0: 6d20 7468 6520 656e 6420 6f66 2074 6865  m the end of the
+00005ee0: 2073 7472 6561 6d20 6966 2060 6261 636b   stream if `back
+00005ef0: 7761 7264 7360 2069 730a 6054 7275 6560  wards` is.`True`
+00005f00: 2028 7365 6520 6265 6c6f 7729 2e20 5768   (see below). Wh
+00005f10: 656e 2072 6561 6469 6e67 2061 2073 7472  en reading a str
+00005f20: 6561 6d20 6672 6f6d 2061 2073 7065 6369  eam from a speci
+00005f30: 6669 6320 706f 7369 7469 6f6e 2069 6e20  fic position in 
+00005f40: 7468 6520 7374 7265 616d 2c20 7468 650a  the stream, the.
+00005f50: 7265 636f 7264 6564 2065 7665 6e74 2061  recorded event a
+00005f60: 7420 7468 6174 2070 6f73 6974 696f 6e20  t that position 
+00005f70: 7769 6c6c 2062 6520 696e 636c 7564 6564  will be included
+00005f80: 2c20 626f 7468 2077 6865 6e20 7265 6164  , both when read
+00005f90: 696e 6720 666f 7277 6172 6473 0a66 726f  ing forwards.fro
+00005fa0: 6d20 7468 6174 2070 6f73 6974 696f 6e2c  m that position,
+00005fb0: 2061 6e64 2077 6865 6e20 7265 6164 696e   and when readin
+00005fc0: 6720 6261 636b 7761 7264 7320 6672 6f6d  g backwards from
+00005fd0: 2074 6861 7420 706f 7369 7469 6f6e 2e0a   that position..
+00005fe0: 0a54 6865 206f 7074 696f 6e61 6c20 6062  .The optional `b
+00005ff0: 6163 6b77 6172 6473 6020 6172 6775 6d65  ackwards` argume
+00006000: 6e74 2069 7320 6120 626f 6f6c 6561 6e2c  nt is a boolean,
+00006010: 2062 7920 6465 6661 756c 7420 6046 616c   by default `Fal
+00006020: 7365 602c 2077 6869 6368 206d 6561 6e73  se`, which means
+00006030: 2074 6865 0a73 7472 6561 6d20 7769 6c6c   the.stream will
+00006040: 2062 6520 7265 6164 2066 6f72 7761 7264   be read forward
+00006050: 7320 6279 2064 6566 6175 6c74 2c20 736f  s by default, so
+00006060: 2074 6861 7420 6576 656e 7473 2061 7265   that events are
+00006070: 2072 6574 7572 6e65 6420 696e 2074 6865   returned in the
+00006080: 0a6f 7264 6572 2074 6865 7920 7765 7265  .order they were
+00006090: 2061 7070 656e 6465 642c 2049 6620 6062   appended, If `b
+000060a0: 6163 6b77 6172 6473 6020 6973 2060 5472  ackwards` is `Tr
+000060b0: 7565 602c 2074 6865 2073 7472 6561 6d20  ue`, the stream 
+000060c0: 7769 6c6c 2062 6520 7265 6164 0a62 6163  will be read.bac
+000060d0: 6b77 6172 6473 2c20 736f 2074 6861 7420  kwards, so that 
+000060e0: 6576 656e 7473 2061 7265 2072 6574 7572  events are retur
+000060f0: 6e65 6420 696e 2072 6576 6572 7365 206f  ned in reverse o
+00006100: 7264 6572 2e0a 0a54 6865 206f 7074 696f  rder...The optio
+00006110: 6e61 6c20 606c 696d 6974 6020 6172 6775  nal `limit` argu
+00006120: 6d65 6e74 2069 7320 616e 2069 6e74 6567  ment is an integ
+00006130: 6572 2077 6869 6368 206c 696d 6974 7320  er which limits 
+00006140: 7468 6520 6e75 6d62 6572 206f 6620 6576  the number of ev
+00006150: 656e 7473 2074 6861 7420 7769 6c6c 0a62  ents that will.b
+00006160: 6520 7265 7475 726e 6564 2e20 5468 6520  e returned. The 
+00006170: 6465 6661 756c 7420 7661 6c75 6520 6973  default value is
+00006180: 2060 7379 732e 6d61 7869 6e74 602e 0a0a   `sys.maxint`...
+00006190: 5468 6520 6f70 7469 6f6e 616c 2060 7469  The optional `ti
+000061a0: 6d65 6f75 7460 2061 7267 756d 656e 7420  meout` argument 
+000061b0: 6973 2061 2050 7974 686f 6e20 6066 6c6f  is a Python `flo
+000061c0: 6174 6020 7768 6963 6820 7365 7473 2061  at` which sets a
+000061d0: 2064 6561 646c 696e 6520 666f 720a 7468   deadline for.th
+000061e0: 6520 636f 6d70 6c65 7469 6f6e 206f 6620  e completion of 
+000061f0: 7468 6520 6752 5043 206f 7065 7261 7469  the gRPC operati
+00006200: 6f6e 2e0a 0a54 6865 2065 7861 6d70 6c65  on...The example
+00006210: 2062 656c 6f77 2073 686f 7773 2068 6f77   below shows how
+00006220: 2074 6f20 7265 6164 2074 6865 2072 6563   to read the rec
+00006230: 6f72 6465 6420 6576 656e 7473 206f 6620  orded events of 
+00006240: 6120 7374 7265 616d 0a66 6f72 7761 7264  a stream.forward
+00006250: 7320 6672 6f6d 2074 6865 2073 7461 7274  s from the start
+00006260: 206f 6620 7468 6520 7374 7265 616d 2074   of the stream t
+00006270: 6f20 7468 6520 656e 6420 6f66 2074 6865  o the end of the
+00006280: 2073 7472 6561 6d2e 2054 6865 0a6e 616d   stream. The.nam
+00006290: 6520 6f66 2061 2073 7472 6561 6d20 6973  e of a stream is
+000062a0: 2067 6976 656e 2077 6865 6e20 6361 6c6c   given when call
+000062b0: 696e 6720 7468 6520 6d65 7468 6f64 2e0a  ing the method..
+000062c0: 0a60 6060 7079 7468 6f6e 0a65 7665 6e74  .```python.event
+000062d0: 7320 3d20 636c 6965 6e74 2e72 6561 645f  s = client.read_
+000062e0: 7374 7265 616d 5f65 7665 6e74 7328 0a20  stream_events(. 
+000062f0: 2020 2073 7472 6561 6d5f 6e61 6d65 3d73     stream_name=s
+00006300: 7472 6561 6d5f 6e61 6d65 310a 290a 6060  tream_name1.).``
+00006310: 600a 0a4e 6f77 2074 6861 7420 7765 2068  `..Now that we h
+00006320: 6176 6520 6120 7365 7175 656e 6365 206f  ave a sequence o
+00006330: 6620 6576 656e 7420 6f62 6a65 6374 732c  f event objects,
+00006340: 2077 6520 6361 6e20 6368 6563 6b20 7765   we can check we
+00006350: 2067 6f74 2074 6865 0a74 6872 6565 2065   got the.three e
+00006360: 7665 6e74 7320 7468 6174 2077 6572 6520  vents that were 
+00006370: 6170 7065 6e64 6564 2074 6f20 7468 6520  appended to the 
+00006380: 7374 7265 616d 2c20 616e 6420 7468 6174  stream, and that
+00006390: 2074 6865 7920 6172 650a 6f72 6465 7265   they are.ordere
+000063a0: 6420 6578 6163 746c 7920 6173 2074 6865  d exactly as the
+000063b0: 7920 7765 7265 2061 7070 656e 6465 642e  y were appended.
+000063c0: 0a0a 6060 6070 7974 686f 6e0a 6173 7365  ..```python.asse
+000063d0: 7274 206c 656e 2865 7665 6e74 7329 203d  rt len(events) =
+000063e0: 3d20 330a 0a61 7373 6572 7420 6576 656e  = 3..assert even
+000063f0: 7473 5b30 5d2e 7374 7265 616d 5f6e 616d  ts[0].stream_nam
+00006400: 6520 3d3d 2073 7472 6561 6d5f 6e61 6d65  e == stream_name
+00006410: 310a 6173 7365 7274 2065 7665 6e74 735b  1.assert events[
+00006420: 305d 2e73 7472 6561 6d5f 706f 7369 7469  0].stream_positi
+00006430: 6f6e 203d 3d20 300a 6173 7365 7274 2065  on == 0.assert e
+00006440: 7665 6e74 735b 305d 2e74 7970 6520 3d3d  vents[0].type ==
+00006450: 2065 7665 6e74 312e 7479 7065 0a61 7373   event1.type.ass
+00006460: 6572 7420 6576 656e 7473 5b30 5d2e 6461  ert events[0].da
+00006470: 7461 203d 3d20 6576 656e 7431 2e64 6174  ta == event1.dat
+00006480: 610a 0a61 7373 6572 7420 6576 656e 7473  a..assert events
+00006490: 5b31 5d2e 7374 7265 616d 5f6e 616d 6520  [1].stream_name 
+000064a0: 3d3d 2073 7472 6561 6d5f 6e61 6d65 310a  == stream_name1.
+000064b0: 6173 7365 7274 2065 7665 6e74 735b 315d  assert events[1]
+000064c0: 2e73 7472 6561 6d5f 706f 7369 7469 6f6e  .stream_position
+000064d0: 203d 3d20 310a 6173 7365 7274 2065 7665   == 1.assert eve
+000064e0: 6e74 735b 315d 2e74 7970 6520 3d3d 2065  nts[1].type == e
+000064f0: 7665 6e74 322e 7479 7065 0a61 7373 6572  vent2.type.asser
+00006500: 7420 6576 656e 7473 5b31 5d2e 6461 7461  t events[1].data
+00006510: 203d 3d20 6576 656e 7432 2e64 6174 610a   == event2.data.
+00006520: 0a61 7373 6572 7420 6576 656e 7473 5b32  .assert events[2
+00006530: 5d2e 7374 7265 616d 5f6e 616d 6520 3d3d  ].stream_name ==
+00006540: 2073 7472 6561 6d5f 6e61 6d65 310a 6173   stream_name1.as
+00006550: 7365 7274 2065 7665 6e74 735b 325d 2e73  sert events[2].s
+00006560: 7472 6561 6d5f 706f 7369 7469 6f6e 203d  tream_position =
+00006570: 3d20 320a 6173 7365 7274 2065 7665 6e74  = 2.assert event
+00006580: 735b 325d 2e74 7970 6520 3d3d 2065 7665  s[2].type == eve
+00006590: 6e74 332e 7479 7065 0a61 7373 6572 7420  nt3.type.assert 
+000065a0: 6576 656e 7473 5b32 5d2e 6461 7461 203d  events[2].data =
+000065b0: 3d20 6576 656e 7433 2e64 6174 610a 6060  = event3.data.``
+000065c0: 600a 0a54 6865 2065 7861 6d70 6c65 2062  `..The example b
+000065d0: 656c 6f77 2073 686f 7773 2068 6f77 2074  elow shows how t
+000065e0: 6f20 7265 6164 2072 6563 6f72 6465 6420  o read recorded 
+000065f0: 6576 656e 7473 2069 6e20 6120 7374 7265  events in a stre
+00006600: 616d 2066 6f72 7761 7264 7320 6672 6f6d  am forwards from
+00006610: 0a61 2073 7065 6369 6669 6320 7374 7265  .a specific stre
+00006620: 616d 2070 6f73 6974 696f 6e20 746f 2074  am position to t
+00006630: 6865 2065 6e64 206f 6620 7468 6520 7374  he end of the st
+00006640: 7265 616d 2e0a 0a60 6060 7079 7468 6f6e  ream...```python
+00006650: 0a65 7665 6e74 7320 3d20 636c 6965 6e74  .events = client
+00006660: 2e72 6561 645f 7374 7265 616d 5f65 7665  .read_stream_eve
+00006670: 6e74 7328 0a20 2020 2073 7472 6561 6d5f  nts(.    stream_
+00006680: 6e61 6d65 3d73 7472 6561 6d5f 6e61 6d65  name=stream_name
+00006690: 312c 0a20 2020 2073 7472 6561 6d5f 706f  1,.    stream_po
+000066a0: 7369 7469 6f6e 3d31 2c0a 290a 0a61 7373  sition=1,.)..ass
+000066b0: 6572 7420 6c65 6e28 6576 656e 7473 2920  ert len(events) 
+000066c0: 3d3d 2032 0a0a 6173 7365 7274 2065 7665  == 2..assert eve
+000066d0: 6e74 735b 305d 2e73 7472 6561 6d5f 6e61  nts[0].stream_na
+000066e0: 6d65 203d 3d20 7374 7265 616d 5f6e 616d  me == stream_nam
+000066f0: 6531 0a61 7373 6572 7420 6576 656e 7473  e1.assert events
+00006700: 5b30 5d2e 7374 7265 616d 5f70 6f73 6974  [0].stream_posit
+00006710: 696f 6e20 3d3d 2031 0a61 7373 6572 7420  ion == 1.assert 
+00006720: 6576 656e 7473 5b30 5d2e 7479 7065 203d  events[0].type =
+00006730: 3d20 6576 656e 7432 2e74 7970 650a 6173  = event2.type.as
+00006740: 7365 7274 2065 7665 6e74 735b 305d 2e64  sert events[0].d
+00006750: 6174 6120 3d3d 2065 7665 6e74 322e 6461  ata == event2.da
+00006760: 7461 0a0a 6173 7365 7274 2065 7665 6e74  ta..assert event
+00006770: 735b 315d 2e73 7472 6561 6d5f 6e61 6d65  s[1].stream_name
+00006780: 203d 3d20 7374 7265 616d 5f6e 616d 6531   == stream_name1
+00006790: 0a61 7373 6572 7420 6576 656e 7473 5b31  .assert events[1
+000067a0: 5d2e 7374 7265 616d 5f70 6f73 6974 696f  ].stream_positio
+000067b0: 6e20 3d3d 2032 0a61 7373 6572 7420 6576  n == 2.assert ev
+000067c0: 656e 7473 5b31 5d2e 7479 7065 203d 3d20  ents[1].type == 
+000067d0: 6576 656e 7433 2e74 7970 650a 6173 7365  event3.type.asse
+000067e0: 7274 2065 7665 6e74 735b 315d 2e64 6174  rt events[1].dat
+000067f0: 6120 3d3d 2065 7665 6e74 332e 6461 7461  a == event3.data
+00006800: 0a60 6060 0a0a 5468 6520 6578 616d 706c  .```..The exampl
+00006810: 6520 6265 6c6f 7720 7368 6f77 7320 686f  e below shows ho
+00006820: 7720 746f 2072 6561 6420 7468 6520 7265  w to read the re
+00006830: 636f 7264 6564 2065 7665 6e74 7320 696e  corded events in
+00006840: 2061 2073 7472 6561 6d20 6261 636b 7761   a stream backwa
+00006850: 7264 7320 6672 6f6d 0a74 6865 2065 6e64  rds from.the end
+00006860: 206f 6620 7468 6520 7374 7265 616d 2074   of the stream t
+00006870: 6f20 7468 6520 7374 6172 7420 6f66 2074  o the start of t
+00006880: 6865 2073 7472 6561 6d2e 0a0a 6060 6070  he stream...```p
+00006890: 7974 686f 6e0a 6576 656e 7473 203d 2063  ython.events = c
+000068a0: 6c69 656e 742e 7265 6164 5f73 7472 6561  lient.read_strea
+000068b0: 6d5f 6576 656e 7473 280a 2020 2020 7374  m_events(.    st
+000068c0: 7265 616d 5f6e 616d 653d 7374 7265 616d  ream_name=stream
+000068d0: 5f6e 616d 6531 2c0a 2020 2020 6261 636b  _name1,.    back
+000068e0: 7761 7264 733d 5472 7565 2c0a 290a 0a61  wards=True,.)..a
+000068f0: 7373 6572 7420 6c65 6e28 6576 656e 7473  ssert len(events
+00006900: 2920 3d3d 2033 0a0a 6173 7365 7274 2065  ) == 3..assert e
+00006910: 7665 6e74 735b 305d 2e73 7472 6561 6d5f  vents[0].stream_
+00006920: 6e61 6d65 203d 3d20 7374 7265 616d 5f6e  name == stream_n
+00006930: 616d 6531 0a61 7373 6572 7420 6576 656e  ame1.assert even
+00006940: 7473 5b30 5d2e 7374 7265 616d 5f70 6f73  ts[0].stream_pos
+00006950: 6974 696f 6e20 3d3d 2032 0a61 7373 6572  ition == 2.asser
+00006960: 7420 6576 656e 7473 5b30 5d2e 7479 7065  t events[0].type
+00006970: 203d 3d20 6576 656e 7433 2e74 7970 650a   == event3.type.
+00006980: 6173 7365 7274 2065 7665 6e74 735b 305d  assert events[0]
+00006990: 2e64 6174 6120 3d3d 2065 7665 6e74 332e  .data == event3.
+000069a0: 6461 7461 0a0a 6173 7365 7274 2065 7665  data..assert eve
+000069b0: 6e74 735b 315d 2e73 7472 6561 6d5f 6e61  nts[1].stream_na
+000069c0: 6d65 203d 3d20 7374 7265 616d 5f6e 616d  me == stream_nam
+000069d0: 6531 0a61 7373 6572 7420 6576 656e 7473  e1.assert events
+000069e0: 5b31 5d2e 7374 7265 616d 5f70 6f73 6974  [1].stream_posit
+000069f0: 696f 6e20 3d3d 2031 0a61 7373 6572 7420  ion == 1.assert 
+00006a00: 6576 656e 7473 5b31 5d2e 7479 7065 203d  events[1].type =
+00006a10: 3d20 6576 656e 7432 2e74 7970 650a 6173  = event2.type.as
+00006a20: 7365 7274 2065 7665 6e74 735b 315d 2e64  sert events[1].d
+00006a30: 6174 6120 3d3d 2065 7665 6e74 322e 6461  ata == event2.da
+00006a40: 7461 0a60 6060 0a0a 5468 6520 6578 616d  ta.```..The exam
+00006a50: 706c 6520 6265 6c6f 7720 7368 6f77 7320  ple below shows 
+00006a60: 686f 7720 746f 2072 6561 6420 6120 6c69  how to read a li
+00006a70: 6d69 7465 6420 6e75 6d62 6572 2028 7477  mited number (tw
+00006a80: 6f29 206f 6620 7468 6520 7265 636f 7264  o) of the record
+00006a90: 6564 2065 7665 6e74 730a 696e 2061 2073  ed events.in a s
+00006aa0: 7472 6561 6d20 666f 7277 6172 6473 2066  tream forwards f
+00006ab0: 726f 6d20 7468 6520 7374 6172 7420 6f66  rom the start of
+00006ac0: 2074 6865 2073 7472 6561 6d2e 0a0a 6060   the stream...``
+00006ad0: 6070 7974 686f 6e0a 6576 656e 7473 203d  `python.events =
+00006ae0: 2063 6c69 656e 742e 7265 6164 5f73 7472   client.read_str
+00006af0: 6561 6d5f 6576 656e 7473 280a 2020 2020  eam_events(.    
+00006b00: 7374 7265 616d 5f6e 616d 653d 7374 7265  stream_name=stre
+00006b10: 616d 5f6e 616d 6531 2c0a 2020 2020 6c69  am_name1,.    li
+00006b20: 6d69 743d 322c 0a29 0a0a 6173 7365 7274  mit=2,.)..assert
+00006b30: 206c 656e 2865 7665 6e74 7329 203d 3d20   len(events) == 
+00006b40: 320a 0a61 7373 6572 7420 6576 656e 7473  2..assert events
+00006b50: 5b30 5d2e 7374 7265 616d 5f6e 616d 6520  [0].stream_name 
+00006b60: 3d3d 2073 7472 6561 6d5f 6e61 6d65 310a  == stream_name1.
+00006b70: 6173 7365 7274 2065 7665 6e74 735b 305d  assert events[0]
+00006b80: 2e73 7472 6561 6d5f 706f 7369 7469 6f6e  .stream_position
+00006b90: 203d 3d20 300a 6173 7365 7274 2065 7665   == 0.assert eve
+00006ba0: 6e74 735b 305d 2e74 7970 6520 3d3d 2065  nts[0].type == e
+00006bb0: 7665 6e74 312e 7479 7065 0a61 7373 6572  vent1.type.asser
+00006bc0: 7420 6576 656e 7473 5b30 5d2e 6461 7461  t events[0].data
+00006bd0: 203d 3d20 6576 656e 7431 2e64 6174 610a   == event1.data.
+00006be0: 0a61 7373 6572 7420 6576 656e 7473 5b31  .assert events[1
+00006bf0: 5d2e 7374 7265 616d 5f6e 616d 6520 3d3d  ].stream_name ==
+00006c00: 2073 7472 6561 6d5f 6e61 6d65 310a 6173   stream_name1.as
+00006c10: 7365 7274 2065 7665 6e74 735b 315d 2e73  sert events[1].s
+00006c20: 7472 6561 6d5f 706f 7369 7469 6f6e 203d  tream_position =
+00006c30: 3d20 310a 6173 7365 7274 2065 7665 6e74  = 1.assert event
+00006c40: 735b 315d 2e74 7970 6520 3d3d 2065 7665  s[1].type == eve
+00006c50: 6e74 322e 7479 7065 0a61 7373 6572 7420  nt2.type.assert 
+00006c60: 6576 656e 7473 5b31 5d2e 6461 7461 203d  events[1].data =
+00006c70: 3d20 6576 656e 7432 2e64 6174 610a 6060  = event2.data.``
+00006c80: 600a 0a54 6865 2065 7861 6d70 6c65 2062  `..The example b
+00006c90: 656c 6f77 2073 686f 7773 2068 6f77 2074  elow shows how t
+00006ca0: 6f20 7265 6164 2061 206c 696d 6974 6564  o read a limited
+00006cb0: 206e 756d 6265 7220 286f 6e65 2920 6f66   number (one) of
+00006cc0: 2074 6865 2072 6563 6f72 6465 640a 6576   the recorded.ev
+00006cd0: 656e 7473 2069 6e20 6120 7374 7265 616d  ents in a stream
+00006ce0: 2062 6163 6b77 6172 6473 2066 726f 6d20   backwards from 
+00006cf0: 6120 6769 7665 6e20 7374 7265 616d 2070  a given stream p
+00006d00: 6f73 6974 696f 6e2e 0a0a 6060 6070 7974  osition...```pyt
+00006d10: 686f 6e0a 6576 656e 7473 203d 2063 6c69  hon.events = cli
+00006d20: 656e 742e 7265 6164 5f73 7472 6561 6d5f  ent.read_stream_
+00006d30: 6576 656e 7473 280a 2020 2020 7374 7265  events(.    stre
+00006d40: 616d 5f6e 616d 653d 7374 7265 616d 5f6e  am_name=stream_n
+00006d50: 616d 6531 2c0a 2020 2020 7374 7265 616d  ame1,.    stream
+00006d60: 5f70 6f73 6974 696f 6e3d 322c 0a20 2020  _position=2,.   
+00006d70: 2062 6163 6b77 6172 6473 3d54 7275 652c   backwards=True,
+00006d80: 0a20 2020 206c 696d 6974 3d31 2c0a 290a  .    limit=1,.).
+00006d90: 0a61 7373 6572 7420 6c65 6e28 6576 656e  .assert len(even
+00006da0: 7473 2920 3d3d 2031 0a0a 6173 7365 7274  ts) == 1..assert
+00006db0: 2065 7665 6e74 735b 305d 2e73 7472 6561   events[0].strea
+00006dc0: 6d5f 6e61 6d65 203d 3d20 7374 7265 616d  m_name == stream
+00006dd0: 5f6e 616d 6531 0a61 7373 6572 7420 6576  _name1.assert ev
+00006de0: 656e 7473 5b30 5d2e 7374 7265 616d 5f70  ents[0].stream_p
+00006df0: 6f73 6974 696f 6e20 3d3d 2032 0a61 7373  osition == 2.ass
+00006e00: 6572 7420 6576 656e 7473 5b30 5d2e 7479  ert events[0].ty
+00006e10: 7065 203d 3d20 6576 656e 7433 2e74 7970  pe == event3.typ
+00006e20: 650a 6173 7365 7274 2065 7665 6e74 735b  e.assert events[
+00006e30: 305d 2e64 6174 6120 3d3d 2065 7665 6e74  0].data == event
+00006e40: 332e 6461 7461 0a60 6060 0a0a 2323 2320  3.data.```..### 
+00006e50: 5265 6164 2061 6c6c 2065 7665 6e74 730a  Read all events.
+00006e60: 0a54 6865 206d 6574 686f 6420 6072 6561  .The method `rea
+00006e70: 645f 616c 6c5f 6576 656e 7473 2829 6020  d_all_events()` 
+00006e80: 6361 6e20 6265 2075 7365 6420 746f 2072  can be used to r
+00006e90: 6561 6420 616c 6c20 7265 636f 7264 6564  ead all recorded
+00006ea0: 2065 7665 6e74 730a 696e 2074 6865 2064   events.in the d
+00006eb0: 6174 6162 6173 6520 696e 2074 6865 206f  atabase in the o
+00006ec0: 7264 6572 2074 6865 7920 7765 7265 2072  rder they were r
+00006ed0: 6563 6f72 6465 642e 2049 7420 7265 7475  ecorded. It retu
+00006ee0: 726e 7320 616e 2069 7465 7261 626c 6520  rns an iterable 
+00006ef0: 6f66 0a65 7665 6e74 7320 7468 6174 2068  of.events that h
+00006f00: 6176 6520 6265 656e 2072 6563 6f72 6465  ave been recorde
+00006f10: 6420 696e 2074 6865 2064 6174 6162 6173  d in the databas
+00006f20: 652e 2049 7465 7261 7469 6e67 206f 7665  e. Iterating ove
+00006f30: 7220 7468 6973 2069 7465 7261 626c 650a  r this iterable.
+00006f40: 6f62 6a65 6374 2077 696c 6c20 7374 6f70  object will stop
+00006f50: 2077 6865 6e20 6974 2068 6173 2079 6965   when it has yie
+00006f60: 6c64 6564 2074 6865 206c 6173 7420 7265  lded the last re
+00006f70: 636f 7264 6564 2065 7665 6e74 2e20 5468  corded event. Th
+00006f80: 6520 7265 6365 6976 6564 0a72 6563 6f72  e received.recor
+00006f90: 6465 6420 6576 656e 7420 6f62 6a65 6374  ded event object
+00006fa0: 2061 7265 2069 6e73 7461 6e63 6573 206f   are instances o
+00006fb0: 6620 7468 6520 6052 6563 6f72 6465 6445  f the `RecordedE
+00006fc0: 7665 6e74 6020 636c 6173 7320 2873 6565  vent` class (see
+00006fd0: 2062 656c 6f77 292e 0a0a 5468 6973 206d   below)...This m
+00006fe0: 6574 686f 6420 7375 7070 6f72 7473 2073  ethod supports s
+00006ff0: 6576 656e 206f 7074 696f 6e61 6c20 6172  even optional ar
+00007000: 6775 6d65 6e74 732c 2060 636f 6d6d 6974  guments, `commit
+00007010: 5f70 6f73 6974 696f 6e60 2c20 6062 6163  _position`, `bac
+00007020: 6b77 6172 6473 602c 0a60 6669 6c74 6572  kwards`,.`filter
+00007030: 5f65 7863 6c75 6465 602c 2060 6669 6c74  _exclude`, `filt
+00007040: 6572 5f69 6e63 6c75 6465 602c 2060 6669  er_include`, `fi
+00007050: 6c74 6572 5f62 795f 7374 7265 616d 5f6e  lter_by_stream_n
+00007060: 616d 6560 2c20 606c 696d 6974 602c 2061  ame`, `limit`, a
+00007070: 6e64 2060 7469 6d65 6f75 7460 2e0a 0a54  nd `timeout`...T
+00007080: 6865 206f 7074 696f 6e61 6c20 6063 6f6d  he optional `com
+00007090: 6d69 745f 706f 7369 7469 6f6e 6020 6172  mit_position` ar
+000070a0: 6775 6d65 6e74 2069 7320 616e 206f 7074  gument is an opt
+000070b0: 696f 6e61 6c20 696e 7465 6765 7220 7468  ional integer th
+000070c0: 6174 2063 616e 2062 6520 7573 6564 2074  at can be used t
+000070d0: 6f0a 7370 6563 6966 7920 7468 6520 636f  o.specify the co
+000070e0: 6d6d 6974 2070 6f73 6974 696f 6e20 6672  mmit position fr
+000070f0: 6f6d 2077 6869 6368 2074 6f20 7374 6172  om which to star
+00007100: 7420 7265 6164 696e 672e 2054 6869 7320  t reading. This 
+00007110: 6172 6775 6d65 6e74 2069 7320 604e 6f6e  argument is `Non
+00007120: 6560 2062 790a 6465 6661 756c 742c 206d  e` by.default, m
+00007130: 6561 6e69 6e67 2074 6861 7420 616c 6c20  eaning that all 
+00007140: 7468 6520 6576 656e 7473 2077 696c 6c20  the events will 
+00007150: 6265 2072 6561 6420 6569 7468 6572 2066  be read either f
+00007160: 726f 6d20 7468 6520 7374 6172 742c 206f  rom the start, o
+00007170: 720a 6672 6f6d 2074 6865 2065 6e64 2069  r.from the end i
+00007180: 6620 6062 6163 6b77 6172 6473 6020 6973  f `backwards` is
+00007190: 2060 5472 7565 6020 2873 6565 2062 656c   `True` (see bel
+000071a0: 6f77 292e 2050 6c65 6173 6520 6e6f 7465  ow). Please note
+000071b0: 2c20 6966 2073 7065 6369 6669 6564 2c0a  , if specified,.
+000071c0: 7468 6520 7370 6563 6966 6965 6420 706f  the specified po
+000071d0: 7369 7469 6f6e 206d 7573 7420 6265 2061  sition must be a
+000071e0: 6e20 6163 7475 616c 6c79 2065 7869 7374  n actually exist
+000071f0: 696e 6720 636f 6d6d 6974 2070 6f73 6974  ing commit posit
+00007200: 696f 6e2c 2062 6563 6175 7365 0a61 6e79  ion, because.any
+00007210: 206f 7468 6572 206e 756d 6265 7220 7769   other number wi
+00007220: 6c6c 2072 6573 756c 7420 696e 2061 2073  ll result in a s
+00007230: 6572 7665 7220 6572 726f 7220 2861 7420  erver error (at 
+00007240: 6c65 6173 7420 696e 2045 7665 6e74 5374  least in EventSt
+00007250: 6f72 6544 4220 7632 312e 3130 292e 0a0a  oreDB v21.10)...
+00007260: 5468 6520 6f70 7469 6f6e 616c 2060 6261  The optional `ba
+00007270: 636b 7761 7264 7360 2061 7267 756d 656e  ckwards` argumen
+00007280: 7420 6973 2061 2062 6f6f 6c65 616e 2077  t is a boolean w
+00007290: 6869 6368 2069 7320 6279 2064 6566 6175  hich is by defau
+000072a0: 6c74 2060 4661 6c73 6560 206d 6561 6e69  lt `False` meani
+000072b0: 6e67 2074 6865 0a65 7665 6e74 7320 7769  ng the.events wi
+000072c0: 6c6c 2062 6520 7265 6164 2066 6f72 7761  ll be read forwa
+000072d0: 7264 7320 6279 2064 6566 6175 6c74 2c20  rds by default, 
+000072e0: 736f 2074 6861 7420 6576 656e 7473 2061  so that events a
+000072f0: 7265 2072 6574 7572 6e65 6420 696e 2074  re returned in t
+00007300: 6865 0a6f 7264 6572 2074 6865 7920 7765  he.order they we
+00007310: 7265 2063 6f6d 6d69 7474 6564 2c20 4966  re committed, If
+00007320: 2060 6261 636b 7761 7264 7360 2069 7320   `backwards` is 
+00007330: 6054 7275 6560 2c20 7468 6520 6576 656e  `True`, the even
+00007340: 7473 2077 696c 6c20 6265 2072 6561 640a  ts will be read.
+00007350: 6261 636b 7761 7264 732c 2073 6f20 7468  backwards, so th
+00007360: 6174 2065 7665 6e74 7320 6172 6520 7265  at events are re
+00007370: 7475 726e 6564 2069 6e20 7265 7665 7273  turned in revers
+00007380: 6520 6f72 6465 722e 0a0a 5468 6520 6f70  e order...The op
+00007390: 7469 6f6e 616c 2060 6669 6c74 6572 5f65  tional `filter_e
+000073a0: 7863 6c75 6465 6020 6172 6775 6d65 6e74  xclude` argument
+000073b0: 2069 7320 6120 7365 7175 656e 6365 206f   is a sequence o
+000073c0: 6620 7265 6775 6c61 7220 6578 7072 6573  f regular expres
+000073d0: 7369 6f6e 7320 7468 6174 0a6d 6174 6368  sions that.match
+000073e0: 2072 6563 6f72 6465 6420 6576 656e 7473   recorded events
+000073f0: 2074 6861 7420 7368 6f75 6c64 206e 6f74   that should not
+00007400: 2062 6520 696e 636c 7564 6564 2e20 5468   be included. Th
+00007410: 6973 2061 7267 756d 656e 7420 6973 2069  is argument is i
+00007420: 676e 6f72 6564 0a69 6620 6066 696c 7465  gnored.if `filte
+00007430: 725f 696e 636c 7564 6560 2069 7320 7365  r_include` is se
+00007440: 7420 746f 2061 206e 6f6e 2d65 6d70 7479  t to a non-empty
+00007450: 2073 6571 7565 6e63 652e 2042 7920 6465   sequence. By de
+00007460: 6661 756c 742c 2074 6869 7320 6172 6775  fault, this argu
+00007470: 6d65 6e74 2069 7320 7365 740a 746f 206d  ment is set.to m
+00007480: 6174 6368 2074 6865 2065 7665 6e74 2074  atch the event t
+00007490: 7970 6573 206f 6620 2273 7973 7465 6d20  ypes of "system 
+000074a0: 6576 656e 7473 222c 2073 6f20 7468 6174  events", so that
+000074b0: 2045 7665 6e74 5374 6f72 6544 4220 7379   EventStoreDB sy
+000074c0: 7374 656d 2065 7665 6e74 730a 7769 6c6c  stem events.will
+000074d0: 206e 6f74 206e 6f72 6d61 6c6c 7920 6265   not normally be
+000074e0: 2069 6e63 6c75 6465 642e 2053 6565 2074   included. See t
+000074f0: 6865 204e 6f74 6573 2073 6563 7469 6f6e  he Notes section
+00007500: 2062 656c 6f77 2066 6f72 206d 6f72 6520   below for more 
+00007510: 696e 666f 726d 6174 696f 6e0a 6162 6f75  information.abou
+00007520: 7420 6669 6c74 6572 2065 7870 7265 7373  t filter express
+00007530: 696f 6e73 2e0a 0a54 6865 2061 7267 756d  ions...The argum
+00007540: 656e 7420 6066 696c 7465 725f 696e 636c  ent `filter_incl
+00007550: 7564 6560 206f 7074 696f 6e61 6c20 6973  ude` optional is
+00007560: 2061 2073 6571 7565 6e63 6520 6f66 2072   a sequence of r
+00007570: 6567 756c 6172 2065 7870 7265 7373 696f  egular expressio
+00007580: 6e73 0a74 6861 7420 6d61 7463 6820 7265  ns.that match re
+00007590: 636f 7264 6564 2065 7665 6e74 7320 7468  corded events th
+000075a0: 6174 2073 686f 756c 6420 6265 2069 6e63  at should be inc
+000075b0: 6c75 6465 642e 2042 7920 6465 6661 756c  luded. By defaul
+000075c0: 742c 2074 6869 7320 6172 6775 6d65 6e74  t, this argument
+000075d0: 0a69 7320 616e 2065 6d70 7479 2074 7570  .is an empty tup
+000075e0: 6c65 2e20 4966 2074 6869 7320 6172 6775  le. If this argu
+000075f0: 6d65 6e74 2069 7320 7365 7420 746f 2061  ment is set to a
+00007600: 206e 6f6e 2d65 6d70 7479 2073 6571 7565   non-empty seque
+00007610: 6e63 652c 2074 6865 0a60 6669 6c74 6572  nce, the.`filter
+00007620: 5f65 7863 6c75 6465 6020 6172 6775 6d65  _exclude` argume
+00007630: 6e74 2069 7320 6967 6e6f 7265 642e 0a0a  nt is ignored...
+00007640: 5468 6520 6172 6775 6d65 6e74 2060 6669  The argument `fi
+00007650: 6c74 6572 5f62 795f 7374 7265 616d 5f6e  lter_by_stream_n
+00007660: 616d 6560 206f 7074 696f 6e61 6c20 6973  ame` optional is
+00007670: 2061 2062 6f6f 6c65 616e 2076 616c 7565   a boolean value
+00007680: 2074 6861 7420 696e 6469 6361 7465 7320   that indicates 
+00007690: 7768 6574 6865 720a 7468 6520 6669 6c74  whether.the filt
+000076a0: 6572 2077 696c 6c20 6170 706c 7920 746f  er will apply to
+000076b0: 2065 7665 6e74 2074 7970 6573 206f 7220   event types or 
+000076c0: 7374 7265 616d 206e 616d 6573 2e20 4279  stream names. By
+000076d0: 2064 6566 6175 6c74 2c20 7468 6973 2076   default, this v
+000076e0: 616c 7565 2069 7320 6046 616c 7365 600a  alue is `False`.
+000076f0: 616e 6420 736f 2074 6865 2066 696c 7465  and so the filte
+00007700: 7269 6e67 2077 696c 6c20 6170 706c 7920  ring will apply 
+00007710: 746f 2074 6865 2065 7665 6e74 2074 7970  to the event typ
+00007720: 6520 7374 7269 6e67 7320 6f66 2072 6563  e strings of rec
+00007730: 6f72 6465 6420 6576 656e 7473 2e0a 0a54  orded events...T
+00007740: 6865 2061 7267 756d 656e 7420 606c 696d  he argument `lim
+00007750: 6974 6020 6f70 7469 6f6e 616c 2069 7320  it` optional is 
+00007760: 616e 2069 6e74 6567 6572 2077 6869 6368  an integer which
+00007770: 206c 696d 6974 7320 7468 6520 6e75 6d62   limits the numb
+00007780: 6572 206f 6620 6576 656e 7473 2074 6861  er of events tha
+00007790: 7420 7769 6c6c 0a62 6520 7265 7475 726e  t will.be return
+000077a0: 6564 2e20 5468 6520 6465 6661 756c 7420  ed. The default 
+000077b0: 7661 6c75 6520 6973 2060 7379 732e 6d61  value is `sys.ma
+000077c0: 7869 6e74 602e 0a0a 5468 6520 6f70 7469  xint`...The opti
+000077d0: 6f6e 616c 2060 7469 6d65 6f75 7460 2061  onal `timeout` a
+000077e0: 7267 756d 656e 7420 6973 2061 2050 7974  rgument is a Pyt
+000077f0: 686f 6e20 6066 6c6f 6174 6020 7768 6963  hon `float` whic
+00007800: 6820 7365 7473 2061 0a64 6561 646c 696e  h sets a.deadlin
+00007810: 6520 666f 7220 7468 6520 636f 6d70 6c65  e for the comple
+00007820: 7469 6f6e 206f 6620 7468 6520 6752 5043  tion of the gRPC
+00007830: 206f 7065 7261 7469 6f6e 2e0a 0a54 6865   operation...The
+00007840: 2066 696c 7465 7269 6e67 206f 6620 6576   filtering of ev
+00007850: 656e 7473 2069 7320 646f 6e65 206f 6e20  ents is done on 
+00007860: 7468 6520 4576 656e 7453 746f 7265 4442  the EventStoreDB
+00007870: 2073 6572 7665 722e 2054 6865 0a60 6c69   server. The.`li
+00007880: 6d69 7460 2061 7267 756d 656e 7420 6973  mit` argument is
+00007890: 2061 7070 6c69 6564 206f 6e20 7468 6520   applied on the 
+000078a0: 7365 7276 6572 2061 6674 6572 2066 696c  server after fil
+000078b0: 7465 7269 6e67 2e20 5365 6520 6265 6c6f  tering. See belo
+000078c0: 7720 666f 720a 6d6f 7265 2069 6e66 6f72  w for.more infor
+000078d0: 6d61 7469 6f6e 2061 626f 7574 2066 696c  mation about fil
+000078e0: 7465 7220 7265 6775 6c61 7220 6578 7072  ter regular expr
+000078f0: 6573 7369 6f6e 732e 0a0a 5768 656e 2072  essions...When r
+00007900: 6561 6469 6e67 2066 6f72 7761 7264 7320  eading forwards 
+00007910: 6672 6f6d 2061 2073 7065 6369 6669 6320  from a specific 
+00007920: 636f 6d6d 6974 2070 6f73 6974 696f 6e2c  commit position,
+00007930: 2074 6865 2065 7665 6e74 2061 7420 7468   the event at th
+00007940: 6520 7370 6563 6966 6965 640a 706f 7369  e specified.posi
+00007950: 7469 6f6e 2057 494c 4c20 6265 2069 6e63  tion WILL be inc
+00007960: 6c75 6465 642e 2048 6f77 6576 6572 2c20  luded. However, 
+00007970: 7768 656e 2072 6561 6469 6e67 2062 6163  when reading bac
+00007980: 6b77 6172 6473 2c20 7468 6520 6576 656e  kwards, the even
+00007990: 7420 6174 2074 6865 0a73 7065 6369 6669  t at the.specifi
+000079a0: 6564 2070 6f73 6974 696f 6e20 7769 6c6c  ed position will
+000079b0: 204e 4f54 2062 6520 696e 636c 7564 6564   NOT be included
+000079c0: 2e20 2854 6869 7320 6e6f 6e2d 696e 636c  . (This non-incl
+000079d0: 7573 6976 6520 6265 6861 7669 6f75 722c  usive behaviour,
+000079e0: 206f 6620 6578 636c 7564 696e 670a 7468   of excluding.th
+000079f0: 6520 7370 6563 6966 6965 6420 636f 6d6d  e specified comm
+00007a00: 6974 2070 6f73 6974 696f 6e20 7768 656e  it position when
+00007a10: 2072 6561 6469 6e67 2061 6c6c 2073 7472   reading all str
+00007a20: 6561 6d73 2062 6163 6b77 6172 6473 2c20  eams backwards, 
+00007a30: 6469 6666 6572 7320 6672 6f6d 2074 6865  differs from the
+00007a40: 0a62 6568 6176 696f 7572 2077 6865 6e20  .behaviour when 
+00007a50: 7265 6164 696e 6720 6120 7374 7265 616d  reading a stream
+00007a60: 2062 6163 6b77 6172 6473 2066 726f 6d20   backwards from 
+00007a70: 6120 7370 6563 6966 6963 2073 7472 6561  a specific strea
+00007a80: 6d20 706f 7369 7469 6f6e 2e29 0a0a 5468  m position.)..Th
+00007a90: 6520 6578 616d 706c 6520 6265 6c6f 7720  e example below 
+00007aa0: 7368 6f77 7320 686f 7720 746f 2072 6561  shows how to rea
+00007ab0: 6420 616c 6c20 6576 656e 7473 2069 6e20  d all events in 
+00007ac0: 7468 6520 6461 7461 6261 7365 2069 6e20  the database in 
+00007ad0: 7468 650a 6f72 6465 7220 7468 6579 2077  the.order they w
+00007ae0: 6572 6520 7265 636f 7264 6564 2e0a 0a60  ere recorded...`
+00007af0: 6060 7079 7468 6f6e 0a65 7665 6e74 7320  ``python.events 
+00007b00: 3d20 6c69 7374 2863 6c69 656e 742e 7265  = list(client.re
+00007b10: 6164 5f61 6c6c 5f65 7665 6e74 7328 2929  ad_all_events())
+00007b20: 0a0a 6173 7365 7274 206c 656e 2865 7665  ..assert len(eve
+00007b30: 6e74 7329 203e 3d20 330a 6060 600a 0a54  nts) >= 3.```..T
+00007b40: 6865 2065 7861 6d70 6c65 2062 656c 6f77  he example below
+00007b50: 2073 686f 7773 2068 6f77 2074 6f20 7265   shows how to re
+00007b60: 6164 2061 6c6c 2072 6563 6f72 6465 6420  ad all recorded 
+00007b70: 6576 656e 7473 2066 726f 6d20 6120 7370  events from a sp
+00007b80: 6563 6966 6963 2063 6f6d 6d69 7420 706f  ecific commit po
+00007b90: 7369 7469 6f6e 2e0a 0a60 6060 7079 7468  sition...```pyth
+00007ba0: 6f6e 0a65 7665 6e74 7320 3d20 6c69 7374  on.events = list
+00007bb0: 280a 2020 2020 636c 6965 6e74 2e72 6561  (.    client.rea
+00007bc0: 645f 616c 6c5f 6576 656e 7473 280a 2020  d_all_events(.  
+00007bd0: 2020 2020 2020 636f 6d6d 6974 5f70 6f73        commit_pos
+00007be0: 6974 696f 6e3d 636f 6d6d 6974 5f70 6f73  ition=commit_pos
+00007bf0: 6974 696f 6e31 0a20 2020 2029 0a29 0a0a  ition1.    ).)..
+00007c00: 6173 7365 7274 206c 656e 2865 7665 6e74  assert len(event
+00007c10: 7329 203d 3d20 330a 0a61 7373 6572 7420  s) == 3..assert 
+00007c20: 6576 656e 7473 5b30 5d2e 7374 7265 616d  events[0].stream
+00007c30: 5f6e 616d 6520 3d3d 2073 7472 6561 6d5f  _name == stream_
+00007c40: 6e61 6d65 310a 6173 7365 7274 2065 7665  name1.assert eve
+00007c50: 6e74 735b 305d 2e73 7472 6561 6d5f 706f  nts[0].stream_po
+00007c60: 7369 7469 6f6e 203d 3d20 300a 6173 7365  sition == 0.asse
+00007c70: 7274 2065 7665 6e74 735b 305d 2e74 7970  rt events[0].typ
+00007c80: 6520 3d3d 2065 7665 6e74 312e 7479 7065  e == event1.type
+00007c90: 0a61 7373 6572 7420 6576 656e 7473 5b30  .assert events[0
+00007ca0: 5d2e 6461 7461 203d 3d20 6576 656e 7431  ].data == event1
+00007cb0: 2e64 6174 610a 0a61 7373 6572 7420 6576  .data..assert ev
+00007cc0: 656e 7473 5b31 5d2e 7374 7265 616d 5f6e  ents[1].stream_n
+00007cd0: 616d 6520 3d3d 2073 7472 6561 6d5f 6e61  ame == stream_na
+00007ce0: 6d65 310a 6173 7365 7274 2065 7665 6e74  me1.assert event
+00007cf0: 735b 315d 2e73 7472 6561 6d5f 706f 7369  s[1].stream_posi
+00007d00: 7469 6f6e 203d 3d20 310a 6173 7365 7274  tion == 1.assert
+00007d10: 2065 7665 6e74 735b 315d 2e74 7970 6520   events[1].type 
+00007d20: 3d3d 2065 7665 6e74 322e 7479 7065 0a61  == event2.type.a
+00007d30: 7373 6572 7420 6576 656e 7473 5b31 5d2e  ssert events[1].
+00007d40: 6461 7461 203d 3d20 6576 656e 7432 2e64  data == event2.d
+00007d50: 6174 610a 0a61 7373 6572 7420 6576 656e  ata..assert even
+00007d60: 7473 5b32 5d2e 7374 7265 616d 5f6e 616d  ts[2].stream_nam
+00007d70: 6520 3d3d 2073 7472 6561 6d5f 6e61 6d65  e == stream_name
+00007d80: 310a 6173 7365 7274 2065 7665 6e74 735b  1.assert events[
+00007d90: 325d 2e73 7472 6561 6d5f 706f 7369 7469  2].stream_positi
+00007da0: 6f6e 203d 3d20 320a 6173 7365 7274 2065  on == 2.assert e
+00007db0: 7665 6e74 735b 325d 2e74 7970 6520 3d3d  vents[2].type ==
+00007dc0: 2065 7665 6e74 332e 7479 7065 0a61 7373   event3.type.ass
+00007dd0: 6572 7420 6576 656e 7473 5b32 5d2e 6461  ert events[2].da
+00007de0: 7461 203d 3d20 6576 656e 7433 2e64 6174  ta == event3.dat
+00007df0: 610a 6060 600a 0a54 6865 2065 7861 6d70  a.```..The examp
+00007e00: 6c65 2062 656c 6f77 2073 686f 7773 2068  le below shows h
+00007e10: 6f77 2074 6f20 7265 6164 2061 6c6c 2072  ow to read all r
+00007e20: 6563 6f72 6465 6420 6576 656e 7473 2069  ecorded events i
+00007e30: 6e20 7265 7665 7273 6520 6f72 6465 722e  n reverse order.
+00007e40: 0a0a 6060 6070 7974 686f 6e0a 6576 656e  ..```python.even
+00007e50: 7473 203d 206c 6973 7428 0a20 2020 2063  ts = list(.    c
+00007e60: 6c69 656e 742e 7265 6164 5f61 6c6c 5f65  lient.read_all_e
+00007e70: 7665 6e74 7328 0a20 2020 2020 2020 2062  vents(.        b
+00007e80: 6163 6b77 6172 6473 3d54 7275 650a 2020  ackwards=True.  
+00007e90: 2020 290a 290a 0a61 7373 6572 7420 6c65    ).)..assert le
+00007ea0: 6e28 6576 656e 7473 2920 3e3d 2033 0a0a  n(events) >= 3..
+00007eb0: 6173 7365 7274 2065 7665 6e74 735b 305d  assert events[0]
+00007ec0: 2e73 7472 6561 6d5f 6e61 6d65 203d 3d20  .stream_name == 
+00007ed0: 7374 7265 616d 5f6e 616d 6531 0a61 7373  stream_name1.ass
+00007ee0: 6572 7420 6576 656e 7473 5b30 5d2e 7374  ert events[0].st
+00007ef0: 7265 616d 5f70 6f73 6974 696f 6e20 3d3d  ream_position ==
+00007f00: 2032 0a61 7373 6572 7420 6576 656e 7473   2.assert events
+00007f10: 5b30 5d2e 7479 7065 203d 3d20 6576 656e  [0].type == even
+00007f20: 7433 2e74 7970 650a 6173 7365 7274 2065  t3.type.assert e
+00007f30: 7665 6e74 735b 305d 2e64 6174 6120 3d3d  vents[0].data ==
+00007f40: 2065 7665 6e74 332e 6461 7461 0a0a 6173   event3.data..as
+00007f50: 7365 7274 2065 7665 6e74 735b 315d 2e73  sert events[1].s
+00007f60: 7472 6561 6d5f 6e61 6d65 203d 3d20 7374  tream_name == st
+00007f70: 7265 616d 5f6e 616d 6531 0a61 7373 6572  ream_name1.asser
+00007f80: 7420 6576 656e 7473 5b31 5d2e 7374 7265  t events[1].stre
+00007f90: 616d 5f70 6f73 6974 696f 6e20 3d3d 2031  am_position == 1
+00007fa0: 0a61 7373 6572 7420 6576 656e 7473 5b31  .assert events[1
+00007fb0: 5d2e 7479 7065 203d 3d20 6576 656e 7432  ].type == event2
+00007fc0: 2e74 7970 650a 6173 7365 7274 2065 7665  .type.assert eve
+00007fd0: 6e74 735b 315d 2e64 6174 6120 3d3d 2065  nts[1].data == e
+00007fe0: 7665 6e74 322e 6461 7461 0a0a 6173 7365  vent2.data..asse
+00007ff0: 7274 2065 7665 6e74 735b 325d 2e73 7472  rt events[2].str
+00008000: 6561 6d5f 6e61 6d65 203d 3d20 7374 7265  eam_name == stre
+00008010: 616d 5f6e 616d 6531 0a61 7373 6572 7420  am_name1.assert 
+00008020: 6576 656e 7473 5b32 5d2e 7374 7265 616d  events[2].stream
+00008030: 5f70 6f73 6974 696f 6e20 3d3d 2030 0a61  _position == 0.a
+00008040: 7373 6572 7420 6576 656e 7473 5b32 5d2e  ssert events[2].
+00008050: 7479 7065 203d 3d20 6576 656e 7431 2e74  type == event1.t
+00008060: 7970 650a 6173 7365 7274 2065 7665 6e74  ype.assert event
+00008070: 735b 325d 2e64 6174 6120 3d3d 2065 7665  s[2].data == eve
+00008080: 6e74 312e 6461 7461 0a60 6060 0a0a 5468  nt1.data.```..Th
+00008090: 6520 6578 616d 706c 6520 6265 6c6f 7720  e example below 
+000080a0: 7368 6f77 7320 686f 7720 746f 2072 6561  shows how to rea
+000080b0: 6420 6120 6c69 6d69 7465 6420 6e75 6d62  d a limited numb
+000080c0: 6572 2028 6f6e 6529 206f 6620 7468 6520  er (one) of the 
+000080d0: 7265 636f 7264 6564 2065 7665 6e74 730a  recorded events.
+000080e0: 696e 2074 6865 2064 6174 6162 6173 6520  in the database 
+000080f0: 666f 7277 6172 6473 2066 726f 6d20 6120  forwards from a 
+00008100: 7370 6563 6966 6963 2063 6f6d 6d69 7420  specific commit 
+00008110: 706f 7369 7469 6f6e 2e20 506c 6561 7365  position. Please
+00008120: 206e 6f74 652c 2077 6865 6e20 7265 6164   note, when read
+00008130: 696e 670a 616c 6c20 6576 656e 7473 2066  ing.all events f
+00008140: 6f72 7761 7264 7320 6672 6f6d 2061 2073  orwards from a s
+00008150: 7065 6369 6669 6320 636f 6d6d 6974 2070  pecific commit p
+00008160: 6f73 6974 696f 6e2c 2074 6865 2065 7665  osition, the eve
+00008170: 6e74 2061 7420 7468 6520 7370 6563 6966  nt at the specif
+00008180: 6965 640a 706f 7369 7469 6f6e 2057 494c  ied.position WIL
+00008190: 4c20 6265 2069 6e63 6c75 6465 642e 0a0a  L be included...
+000081a0: 0a60 6060 7079 7468 6f6e 0a65 7665 6e74  .```python.event
+000081b0: 7320 3d20 6c69 7374 280a 2020 2020 636c  s = list(.    cl
+000081c0: 6965 6e74 2e72 6561 645f 616c 6c5f 6576  ient.read_all_ev
+000081d0: 656e 7473 280a 2020 2020 2020 2020 636f  ents(.        co
+000081e0: 6d6d 6974 5f70 6f73 6974 696f 6e3d 636f  mmit_position=co
+000081f0: 6d6d 6974 5f70 6f73 6974 696f 6e31 2c0a  mmit_position1,.
+00008200: 2020 2020 2020 2020 6c69 6d69 743d 312c          limit=1,
+00008210: 0a20 2020 2029 0a29 0a0a 6173 7365 7274  .    ).)..assert
+00008220: 206c 656e 2865 7665 6e74 7329 203d 3d20   len(events) == 
+00008230: 310a 0a61 7373 6572 7420 6576 656e 7473  1..assert events
+00008240: 5b30 5d2e 7374 7265 616d 5f6e 616d 6520  [0].stream_name 
+00008250: 3d3d 2073 7472 6561 6d5f 6e61 6d65 310a  == stream_name1.
+00008260: 6173 7365 7274 2065 7665 6e74 735b 305d  assert events[0]
+00008270: 2e73 7472 6561 6d5f 706f 7369 7469 6f6e  .stream_position
+00008280: 203d 3d20 300a 6173 7365 7274 2065 7665   == 0.assert eve
+00008290: 6e74 735b 305d 2e74 7970 6520 3d3d 2065  nts[0].type == e
+000082a0: 7665 6e74 312e 7479 7065 0a61 7373 6572  vent1.type.asser
+000082b0: 7420 6576 656e 7473 5b30 5d2e 6461 7461  t events[0].data
+000082c0: 203d 3d20 6576 656e 7431 2e64 6174 610a   == event1.data.
+000082d0: 0a61 7373 6572 7420 6576 656e 7473 5b30  .assert events[0
+000082e0: 5d2e 636f 6d6d 6974 5f70 6f73 6974 696f  ].commit_positio
+000082f0: 6e20 3d3d 2063 6f6d 6d69 745f 706f 7369  n == commit_posi
+00008300: 7469 6f6e 310a 6060 600a 0a54 6865 2065  tion1.```..The e
+00008310: 7861 6d70 6c65 2062 656c 6f77 2073 686f  xample below sho
+00008320: 7773 2068 6f77 2074 6f20 7265 6164 2061  ws how to read a
+00008330: 206c 696d 6974 6564 206e 756d 6265 7220   limited number 
+00008340: 286f 6e65 2920 6f66 2074 6865 2072 6563  (one) of the rec
+00008350: 6f72 6465 6420 6576 656e 7473 0a69 6e20  orded events.in 
+00008360: 7468 6520 6461 7461 6261 7365 2062 6163  the database bac
+00008370: 6b77 6172 6473 2066 726f 6d20 7468 6520  kwards from the 
+00008380: 656e 642e 2054 6869 7320 6769 7665 7320  end. This gives 
+00008390: 7468 6520 6c61 7374 2072 6563 6f72 6465  the last recorde
+000083a0: 6420 6576 656e 742e 0a0a 6060 6070 7974  d event...```pyt
+000083b0: 686f 6e0a 6576 656e 7473 203d 206c 6973  hon.events = lis
+000083c0: 7428 0a20 2020 2063 6c69 656e 742e 7265  t(.    client.re
+000083d0: 6164 5f61 6c6c 5f65 7665 6e74 7328 0a20  ad_all_events(. 
+000083e0: 2020 2020 2020 2062 6163 6b77 6172 6473         backwards
+000083f0: 3d54 7275 652c 0a20 2020 2020 2020 206c  =True,.        l
+00008400: 696d 6974 3d31 2c0a 2020 2020 290a 290a  imit=1,.    ).).
+00008410: 0a61 7373 6572 7420 6c65 6e28 6576 656e  .assert len(even
+00008420: 7473 2920 3d3d 2031 0a0a 6173 7365 7274  ts) == 1..assert
+00008430: 2065 7665 6e74 735b 305d 2e73 7472 6561   events[0].strea
+00008440: 6d5f 6e61 6d65 203d 3d20 7374 7265 616d  m_name == stream
+00008450: 5f6e 616d 6531 0a61 7373 6572 7420 6576  _name1.assert ev
+00008460: 656e 7473 5b30 5d2e 7374 7265 616d 5f70  ents[0].stream_p
+00008470: 6f73 6974 696f 6e20 3d3d 2032 0a61 7373  osition == 2.ass
+00008480: 6572 7420 6576 656e 7473 5b30 5d2e 7479  ert events[0].ty
+00008490: 7065 203d 3d20 6576 656e 7433 2e74 7970  pe == event3.typ
+000084a0: 650a 6173 7365 7274 2065 7665 6e74 735b  e.assert events[
+000084b0: 305d 2e64 6174 6120 3d3d 2065 7665 6e74  0].data == event
+000084c0: 332e 6461 7461 0a60 6060 0a0a 5468 6520  3.data.```..The 
+000084d0: 6578 616d 706c 6520 6265 6c6f 7720 7368  example below sh
+000084e0: 6f77 7320 686f 7720 746f 2072 6561 6420  ows how to read 
+000084f0: 6120 6c69 6d69 7465 6420 6e75 6d62 6572  a limited number
+00008500: 2028 6f6e 6529 206f 6620 7468 6520 7265   (one) of the re
+00008510: 636f 7264 6564 2065 7665 6e74 730a 696e  corded events.in
+00008520: 2074 6865 2064 6174 6162 6173 6520 6261   the database ba
+00008530: 636b 7761 7264 7320 6672 6f6d 2061 2073  ckwards from a s
+00008540: 7065 6369 6669 6320 636f 6d6d 6974 2070  pecific commit p
+00008550: 6f73 6974 696f 6e2e 2050 6c65 6173 6520  osition. Please 
+00008560: 6e6f 7465 2c20 7768 656e 2072 6561 6469  note, when readi
+00008570: 6e67 0a61 6c6c 2065 7665 6e74 7320 6261  ng.all events ba
+00008580: 636b 7761 7264 7320 6672 6f6d 2061 2073  ckwards from a s
+00008590: 7065 6369 6669 6320 636f 6d6d 6974 2070  pecific commit p
+000085a0: 6f73 6974 696f 6e2c 2074 6865 2065 7665  osition, the eve
+000085b0: 6e74 2061 7420 7468 6520 7370 6563 6966  nt at the specif
+000085c0: 6965 640a 706f 7369 7469 6f6e 2057 494c  ied.position WIL
+000085d0: 4c20 4e4f 5420 6265 2069 6e63 6c75 6465  L NOT be include
+000085e0: 642e 0a0a 6060 6070 7974 686f 6e0a 6576  d...```python.ev
+000085f0: 656e 7473 203d 206c 6973 7428 0a20 2020  ents = list(.   
+00008600: 2063 6c69 656e 742e 7265 6164 5f61 6c6c   client.read_all
+00008610: 5f65 7665 6e74 7328 0a20 2020 2020 2020  _events(.       
+00008620: 2063 6f6d 6d69 745f 706f 7369 7469 6f6e   commit_position
+00008630: 3d63 6f6d 6d69 745f 706f 7369 7469 6f6e  =commit_position
+00008640: 322c 0a20 2020 2020 2020 2062 6163 6b77  2,.        backw
+00008650: 6172 6473 3d54 7275 652c 0a20 2020 2020  ards=True,.     
+00008660: 2020 206c 696d 6974 3d31 2c0a 2020 2020     limit=1,.    
+00008670: 290a 290a 0a61 7373 6572 7420 6c65 6e28  ).)..assert len(
+00008680: 6576 656e 7473 2920 3d3d 2031 0a0a 6173  events) == 1..as
+00008690: 7365 7274 2065 7665 6e74 735b 305d 2e63  sert events[0].c
+000086a0: 6f6d 6d69 745f 706f 7369 7469 6f6e 203c  ommit_position <
+000086b0: 2063 6f6d 6d69 745f 706f 7369 7469 6f6e   commit_position
+000086c0: 320a 6060 600a 0a0a 2323 2320 4765 7420  2.```...### Get 
+000086d0: 6375 7272 656e 7420 7374 7265 616d 2070  current stream p
+000086e0: 6f73 6974 696f 6e0a 0a54 6865 2060 6765  osition..The `ge
+000086f0: 745f 7374 7265 616d 5f70 6f73 6974 696f  t_stream_positio
+00008700: 6e28 2960 206d 6574 686f 6420 6361 6e20  n()` method can 
+00008710: 6265 2075 7365 6420 746f 0a67 6574 2074  be used to.get t
+00008720: 6865 2022 7374 7265 616d 2070 6f73 6974  he "stream posit
+00008730: 696f 6e22 206f 6620 7468 6520 6c61 7374  ion" of the last
+00008740: 2072 6563 6f72 6465 6420 6576 656e 7420   recorded event 
+00008750: 696e 2061 2073 7472 6561 6d2e 0a0a 5468  in a stream...Th
+00008760: 6973 206d 6574 686f 6420 6861 7320 6120  is method has a 
+00008770: 6073 7472 6561 6d5f 6e61 6d65 6020 6172  `stream_name` ar
+00008780: 6775 6d65 6e74 2c20 7768 6963 6820 6973  gument, which is
+00008790: 2072 6571 7569 7265 642e 0a0a 5468 6973   required...This
+000087a0: 206d 6574 686f 6420 616c 736f 2074 616b   method also tak
+000087b0: 6573 2061 6e20 6f70 7469 6f6e 616c 2060  es an optional `
+000087c0: 7469 6d65 6f75 7460 2061 7267 756d 656e  timeout` argumen
+000087d0: 742c 2074 6861 740a 6973 2065 7870 6563  t, that.is expec
+000087e0: 7465 6420 746f 2062 6520 6120 5079 7468  ted to be a Pyth
+000087f0: 6f6e 2060 666c 6f61 7460 2c20 7768 6963  on `float`, whic
+00008800: 6820 7365 7473 2061 2064 6561 646c 696e  h sets a deadlin
+00008810: 650a 666f 7220 7468 6520 636f 6d70 6c65  e.for the comple
+00008820: 7469 6f6e 206f 6620 7468 6520 6752 5043  tion of the gRPC
+00008830: 206f 7065 7261 7469 6f6e 2e0a 0a54 6865   operation...The
+00008840: 2073 6571 7565 6e63 6520 6f66 2070 6f73   sequence of pos
+00008850: 6974 696f 6e73 2069 6e20 6120 7374 7265  itions in a stre
+00008860: 616d 2069 7320 6761 706c 6573 732e 2049  am is gapless. I
+00008870: 7420 6973 207a 6572 6f2d 6261 7365 642c  t is zero-based,
+00008880: 0a73 6f20 7468 6174 2061 2073 7472 6561  .so that a strea
+00008890: 6d20 7769 7468 206f 6e65 2072 6563 6f72  m with one recor
+000088a0: 6465 6420 6576 656e 7420 6861 7320 6120  ded event has a 
+000088b0: 6375 7272 656e 7420 7374 7265 616d 0a70  current stream.p
+000088c0: 6f73 6974 696f 6e20 6f66 2060 3060 2e20  osition of `0`. 
+000088d0: 5468 6520 6375 7272 656e 7420 7374 7265  The current stre
+000088e0: 616d 2070 6f73 6974 696f 6e20 6973 2060  am position is `
+000088f0: 3160 2077 6865 6e20 6120 7374 7265 616d  1` when a stream
+00008900: 2068 6173 0a74 776f 2065 7665 6e74 732c   has.two events,
+00008910: 2061 6e64 2069 7420 6973 2060 3260 2077   and it is `2` w
+00008920: 6865 6e20 7468 6572 6520 6172 6520 6576  hen there are ev
+00008930: 656e 7473 2c20 616e 6420 736f 206f 6e2e  ents, and so on.
+00008940: 0a0a 496e 2074 6865 2065 7861 6d70 6c65  ..In the example
+00008950: 2062 656c 6f77 2c20 7468 6520 6375 7272   below, the curr
+00008960: 656e 7420 7374 7265 616d 2070 6f73 6974  ent stream posit
+00008970: 696f 6e20 6973 206f 6274 6169 6e65 6420  ion is obtained 
+00008980: 6f66 2074 6865 0a73 7472 6561 6d20 746f  of the.stream to
+00008990: 2077 6869 6368 2065 7665 6e74 7320 7765   which events we
+000089a0: 7265 2061 7070 656e 6465 6420 696e 2074  re appended in t
+000089b0: 6865 2065 7861 6d70 6c65 7320 6162 6f76  he examples abov
+000089c0: 652e 0a42 6563 6175 7365 2074 6865 2073  e..Because the s
+000089d0: 6571 7565 6e63 6520 6f66 2073 7472 6561  equence of strea
+000089e0: 6d20 706f 7369 7469 6f6e 7320 6973 207a  m positions is z
+000089f0: 6572 6f2d 6261 7365 642c 2061 6e64 2062  ero-based, and b
+00008a00: 6563 6175 7365 0a74 6872 6565 2065 7665  ecause.three eve
+00008a10: 6e74 7320 7765 7265 2061 7070 656e 6465  nts were appende
+00008a20: 642c 2073 6f20 7468 6520 6375 7272 656e  d, so the curren
+00008a30: 7420 7374 7265 616d 2070 6f73 6974 696f  t stream positio
+00008a40: 6e20 6973 2060 3260 2e0a 0a60 6060 7079  n is `2`...```py
+00008a50: 7468 6f6e 0a73 7472 6561 6d5f 706f 7369  thon.stream_posi
+00008a60: 7469 6f6e 203d 2063 6c69 656e 742e 6765  tion = client.ge
+00008a70: 745f 7374 7265 616d 5f70 6f73 6974 696f  t_stream_positio
+00008a80: 6e28 0a20 2020 2073 7472 6561 6d5f 6e61  n(.    stream_na
+00008a90: 6d65 3d73 7472 6561 6d5f 6e61 6d65 310a  me=stream_name1.
+00008aa0: 290a 0a61 7373 6572 7420 7374 7265 616d  )..assert stream
+00008ab0: 5f70 6f73 6974 696f 6e20 3d3d 2032 0a60  _position == 2.`
+00008ac0: 6060 0a0a 4966 2061 2073 7472 6561 6d20  ``..If a stream 
+00008ad0: 646f 6573 206e 6f74 2065 7869 7374 2c20  does not exist, 
+00008ae0: 7468 6520 7265 7475 726e 6564 2073 7472  the returned str
+00008af0: 6561 6d20 706f 7369 7469 6f6e 2076 616c  eam position val
+00008b00: 7565 2069 7320 604e 6f6e 6560 2c0a 7768  ue is `None`,.wh
+00008b10: 6963 6820 6d61 7463 6865 7320 7468 6520  ich matches the 
+00008b20: 7265 7175 6972 6564 2065 7870 6563 7465  required expecte
+00008b30: 6420 706f 7369 7469 6f6e 2077 6865 6e20  d position when 
+00008b40: 6170 7065 6e64 696e 6720 7468 6520 6669  appending the fi
+00008b50: 7273 7420 6576 656e 740a 6f66 2061 206e  rst event.of a n
+00008b60: 6577 2073 7472 6561 6d20 2873 6565 2061  ew stream (see a
+00008b70: 626f 7665 292e 0a0a 6060 6070 7974 686f  bove)...```pytho
+00008b80: 6e0a 7374 7265 616d 5f70 6f73 6974 696f  n.stream_positio
+00008b90: 6e20 3d20 636c 6965 6e74 2e67 6574 5f73  n = client.get_s
+00008ba0: 7472 6561 6d5f 706f 7369 7469 6f6e 280a  tream_position(.
+00008bb0: 2020 2020 7374 7265 616d 5f6e 616d 653d      stream_name=
+00008bc0: 7374 7228 7575 6964 3428 2929 0a29 0a0a  str(uuid4()).)..
+00008bd0: 6173 7365 7274 2073 7472 6561 6d5f 706f  assert stream_po
+00008be0: 7369 7469 6f6e 203d 3d20 4e6f 6e65 0a60  sition == None.`
+00008bf0: 6060 0a0a 5468 6973 206d 6574 686f 6420  ``..This method 
+00008c00: 7461 6b65 7320 616e 206f 7074 696f 6e61  takes an optiona
+00008c10: 6c20 6172 6775 6d65 6e74 2060 7469 6d65  l argument `time
+00008c20: 6f75 7460 2077 6869 6368 2069 7320 6120  out` which is a 
+00008c30: 5079 7468 6f6e 2060 666c 6f61 7460 2074  Python `float` t
+00008c40: 6861 7420 7365 7473 0a61 2064 6561 646c  hat sets.a deadl
+00008c50: 696e 6520 666f 7220 7468 6520 636f 6d70  ine for the comp
+00008c60: 6c65 7469 6f6e 206f 6620 7468 6520 6752  letion of the gR
+00008c70: 5043 206f 7065 7261 7469 6f6e 2e0a 0a0a  PC operation....
+00008c80: 2323 2320 4765 7420 6375 7272 656e 7420  ### Get current 
+00008c90: 636f 6d6d 6974 2070 6f73 6974 696f 6e0a  commit position.
+00008ca0: 0a54 6865 206d 6574 686f 6420 6067 6574  .The method `get
+00008cb0: 5f63 6f6d 6d69 745f 706f 7369 7469 6f6e  _commit_position
+00008cc0: 2829 6020 6361 6e20 6265 2075 7365 6420  ()` can be used 
+00008cd0: 746f 2067 6574 2074 6865 2063 7572 7265  to get the curre
+00008ce0: 6e74 0a63 6f6d 6d69 7420 706f 7369 7469  nt.commit positi
+00008cf0: 6f6e 206f 6620 7468 6520 6461 7461 6261  on of the databa
+00008d00: 7365 2e0a 0a60 6060 7079 7468 6f6e 0a63  se...```python.c
+00008d10: 6f6d 6d69 745f 706f 7369 7469 6f6e 203d  ommit_position =
+00008d20: 2063 6c69 656e 742e 6765 745f 636f 6d6d   client.get_comm
+00008d30: 6974 5f70 6f73 6974 696f 6e28 290a 6060  it_position().``
+00008d40: 600a 0a54 6869 7320 6d65 7468 6f64 2074  `..This method t
+00008d50: 616b 6573 2061 6e20 6f70 7469 6f6e 616c  akes an optional
+00008d60: 2061 7267 756d 656e 7420 6074 696d 656f   argument `timeo
+00008d70: 7574 6020 7768 6963 6820 6973 2061 2050  ut` which is a P
+00008d80: 7974 686f 6e20 6066 6c6f 6174 6020 7468  ython `float` th
+00008d90: 6174 2073 6574 730a 6120 6465 6164 6c69  at sets.a deadli
+00008da0: 6e65 2066 6f72 2074 6865 2063 6f6d 706c  ne for the compl
+00008db0: 6574 696f 6e20 6f66 2074 6865 2067 5250  etion of the gRP
+00008dc0: 4320 6f70 6572 6174 696f 6e2e 0a0a 5468  C operation...Th
+00008dd0: 6973 206d 6574 686f 6420 6361 6e20 6265  is method can be
+00008de0: 2075 7365 6675 6c20 746f 206d 6561 7375   useful to measu
+00008df0: 7265 2070 726f 6772 6573 7320 6f66 2061  re progress of a
+00008e00: 2064 6f77 6e73 7472 6561 6d20 636f 6d70   downstream comp
+00008e10: 6f6e 656e 740a 7468 6174 2069 7320 7072  onent.that is pr
+00008e20: 6f63 6573 7369 6e67 2061 6c6c 2072 6563  ocessing all rec
+00008e30: 6f72 6465 6420 6576 656e 7473 2c20 6279  orded events, by
+00008e40: 2063 6f6d 7061 7269 6e67 2074 6865 2063   comparing the c
+00008e50: 7572 7265 6e74 2063 6f6d 6d69 740a 706f  urrent commit.po
+00008e60: 7369 7469 6f6e 2077 6974 6820 7468 6520  sition with the 
+00008e70: 7265 636f 7264 6564 2063 6f6d 6d69 7420  recorded commit 
+00008e80: 706f 7369 7469 6f6e 206f 6620 7468 6520  position of the 
+00008e90: 6c61 7374 2073 7563 6365 7373 6675 6c6c  last successfull
+00008ea0: 7920 7072 6f63 6573 7365 640a 6576 656e  y processed.even
+00008eb0: 7420 696e 2061 2064 6f77 6e73 7472 6561  t in a downstrea
+00008ec0: 6d20 636f 6d70 6f6e 656e 742e 0a0a 5468  m component...Th
+00008ed0: 6520 7661 6c75 6520 6f66 2074 6865 2060  e value of the `
+00008ee0: 636f 6d6d 6974 5f70 6f73 6974 696f 6e60  commit_position`
+00008ef0: 2061 7267 756d 656e 7420 7768 656e 2072   argument when r
+00008f00: 6561 6469 6e67 2065 7665 6e74 7320 6569  eading events ei
+00008f10: 7468 6572 2062 7920 7573 696e 670a 7468  ther by using.th
+00008f20: 6520 6072 6561 645f 616c 6c5f 6576 656e  e `read_all_even
+00008f30: 7473 2829 6020 6d65 7468 6f64 206f 7220  ts()` method or 
+00008f40: 6279 2075 7369 6e67 2061 2063 6174 6368  by using a catch
+00008f50: 2d75 7020 7375 6273 6372 6970 7469 6f6e  -up subscription
+00008f60: 2077 6f75 6c64 2075 7375 616c 6c79 0a62   would usually.b
+00008f70: 6520 6465 7465 726d 696e 6564 2062 7920  e determined by 
+00008f80: 7468 6520 7265 636f 7264 6564 2063 6f6d  the recorded com
+00008f90: 6d69 7420 706f 7369 7469 6f6e 206f 6620  mit position of 
+00008fa0: 7468 6520 6c61 7374 2073 7563 6365 7373  the last success
+00008fb0: 6675 6c6c 7920 7072 6f63 6573 7365 640a  fully processed.
+00008fc0: 6576 656e 7420 696e 2061 2064 6f77 6e73  event in a downs
+00008fd0: 7472 6561 6d20 636f 6d70 6f6e 656e 742e  tream component.
+00008fe0: 0a0a 0a23 2323 2047 6574 2073 7472 6561  ...### Get strea
+00008ff0: 6d20 6d65 7461 6461 7461 0a0a 5468 6520  m metadata..The 
+00009000: 6d65 7468 6f64 2060 6765 745f 7374 7265  method `get_stre
+00009010: 616d 5f6d 6574 6164 6174 6128 2960 2067  am_metadata()` g
+00009020: 6574 7320 7468 6520 6d65 7461 6461 7461  ets the metadata
+00009030: 2066 6f72 2061 2073 7472 6561 6d2c 2061   for a stream, a
+00009040: 6c6f 6e67 0a77 6974 6820 7468 6520 7665  long.with the ve
+00009050: 7273 696f 6e20 6f66 2074 6865 2073 7472  rsion of the str
+00009060: 6561 6d20 6d65 7461 6461 7461 2e0a 0a60  eam metadata...`
+00009070: 6060 7079 7468 6f6e 0a6d 6574 6164 6174  ``python.metadat
+00009080: 612c 206d 6574 6164 6174 615f 7665 7273  a, metadata_vers
+00009090: 696f 6e20 3d20 636c 6965 6e74 2e67 6574  ion = client.get
+000090a0: 5f73 7472 6561 6d5f 6d65 7461 6461 7461  _stream_metadata
+000090b0: 2873 7472 6561 6d5f 6e61 6d65 3d73 7472  (stream_name=str
+000090c0: 6561 6d5f 6e61 6d65 3129 0a60 6060 0a0a  eam_name1).```..
+000090d0: 5468 6520 7265 7475 726e 6564 2060 6d65  The returned `me
+000090e0: 7461 6461 7461 6020 7661 6c75 6520 6973  tadata` value is
+000090f0: 2061 2050 7974 686f 6e20 6064 6963 7460   a Python `dict`
+00009100: 2e20 5468 6520 7265 7475 726e 6564 2060  . The returned `
+00009110: 6d65 7461 6461 7461 5f76 6572 7369 6f6e  metadata_version
+00009120: 600a 7661 6c75 6520 6973 2065 6974 6865  `.value is eithe
+00009130: 7220 616e 2060 696e 7460 2c20 6f72 2060  r an `int`, or `
+00009140: 4e6f 6e65 6020 6966 2074 6865 2073 7472  None` if the str
+00009150: 6561 6d20 646f 6573 206e 6f74 2065 7869  eam does not exi
+00009160: 7374 2e20 5468 6573 6520 7661 6c75 6573  st. These values
+00009170: 2063 616e 0a62 6520 7061 7373 6564 2069   can.be passed i
+00009180: 6e74 6f20 6073 6574 5f73 7472 6561 6d5f  nto `set_stream_
+00009190: 6d65 7461 6461 7461 2829 602e 0a0a 0a23  metadata()`....#
+000091a0: 2323 2053 6574 2073 7472 6561 6d20 6d65  ## Set stream me
+000091b0: 7461 6461 7461 0a0a 2a72 6571 7569 7265  tadata..*require
+000091c0: 7320 6c65 6164 6572 2a0a 0a54 6865 206d  s leader*..The m
+000091d0: 6574 686f 6420 6073 6574 5f73 7472 6561  ethod `set_strea
+000091e0: 6d5f 6d65 7461 6461 7461 2829 6020 7365  m_metadata()` se
+000091f0: 7473 2074 6865 206d 6574 6164 6174 6120  ts the metadata 
+00009200: 666f 7220 6120 7374 7265 616d 2c20 616c  for a stream, al
+00009210: 6f6e 670a 7769 7468 2074 6865 2076 6572  ong.with the ver
+00009220: 7369 6f6e 206f 6620 7468 6520 7374 7265  sion of the stre
+00009230: 616d 206d 6574 6164 6174 612e 0a0a 6060  am metadata...``
+00009240: 6070 7974 686f 6e0a 6d65 7461 6461 7461  `python.metadata
+00009250: 5b22 666f 6f22 5d20 3d20 2262 6172 220a  ["foo"] = "bar".
+00009260: 0a63 6c69 656e 742e 7365 745f 7374 7265  .client.set_stre
+00009270: 616d 5f6d 6574 6164 6174 6128 0a20 2020  am_metadata(.   
+00009280: 2073 7472 6561 6d5f 6e61 6d65 3d73 7472   stream_name=str
+00009290: 6561 6d5f 6e61 6d65 312c 0a20 2020 206d  eam_name1,.    m
+000092a0: 6574 6164 6174 613d 6d65 7461 6461 7461  etadata=metadata
+000092b0: 2c0a 2020 2020 6578 7065 6374 6564 5f70  ,.    expected_p
+000092c0: 6f73 6974 696f 6e3d 6d65 7461 6461 7461  osition=metadata
+000092d0: 5f76 6572 7369 6f6e 2c0a 290a 6060 600a  _version,.).```.
+000092e0: 0a54 6865 2060 6578 7065 6374 6564 5f70  .The `expected_p
+000092f0: 6f73 6974 696f 6e60 2061 7267 756d 656e  osition` argumen
+00009300: 7420 7368 6f75 6c64 2062 6520 7468 6520  t should be the 
+00009310: 6375 7272 656e 7420 7665 7273 696f 6e20  current version 
+00009320: 6f66 2074 6865 2073 7472 6561 6d20 6d65  of the stream me
+00009330: 7461 6461 7461 2e0a 0a50 6c65 6173 6520  tadata...Please 
+00009340: 7265 6665 7220 746f 2074 6865 2045 7665  refer to the Eve
+00009350: 6e74 5374 6f72 6544 4220 646f 6375 6d65  ntStoreDB docume
+00009360: 6e74 6174 696f 6e20 666f 7220 6d6f 7265  ntation for more
+00009370: 2069 6e66 6f72 6d61 7469 6f6e 2061 626f   information abo
+00009380: 7574 2073 7472 6561 6d0a 6d65 7461 6461  ut stream.metada
+00009390: 7461 2e0a 0a23 2323 2044 656c 6574 6520  ta...### Delete 
+000093a0: 7374 7265 616d 0a0a 2a72 6571 7569 7265  stream..*require
+000093b0: 7320 6c65 6164 6572 2a0a 0a54 6865 206d  s leader*..The m
+000093c0: 6574 686f 6420 6064 656c 6574 655f 7374  ethod `delete_st
+000093d0: 7265 616d 2829 6020 6361 6e20 6265 2075  ream()` can be u
+000093e0: 7365 6420 746f 2022 6465 6c65 7465 2220  sed to "delete" 
+000093f0: 6120 7374 7265 616d 2e0a 0a60 6060 7079  a stream...```py
+00009400: 7468 6f6e 0a63 6f6d 6d69 745f 706f 7369  thon.commit_posi
+00009410: 7469 6f6e 203d 2063 6c69 656e 742e 6465  tion = client.de
+00009420: 6c65 7465 5f73 7472 6561 6d28 7374 7265  lete_stream(stre
+00009430: 616d 5f6e 616d 653d 7374 7265 616d 5f6e  am_name=stream_n
+00009440: 616d 6531 2c20 6578 7065 6374 6564 5f70  ame1, expected_p
+00009450: 6f73 6974 696f 6e3d 3229 0a60 6060 0a0a  osition=2).```..
+00009460: 4166 7465 7220 6465 6c65 7469 6e67 2061  After deleting a
+00009470: 2073 7472 6561 6d2c 2069 7427 7320 7374   stream, it's st
+00009480: 696c 6c20 706f 7373 6962 6c65 2074 6f20  ill possible to 
+00009490: 6170 7065 6e64 206e 6577 2065 7665 6e74  append new event
+000094a0: 732e 2052 6561 6469 6e67 2066 726f 6d20  s. Reading from 
+000094b0: 610a 6465 6c65 7465 6420 7374 7265 616d  a.deleted stream
+000094c0: 2077 696c 6c20 7265 7475 726e 206f 6e6c   will return onl
+000094d0: 7920 6576 656e 7473 2074 6861 7420 6861  y events that ha
+000094e0: 7665 2062 6565 6e20 6170 7065 6e64 6564  ve been appended
+000094f0: 2061 6674 6572 2069 7420 7761 730a 6465   after it was.de
+00009500: 6c65 7465 642e 0a0a 2323 2320 546f 6d62  leted...### Tomb
+00009510: 7374 6f6e 6520 7374 7265 616d 0a0a 2a72  stone stream..*r
+00009520: 6571 7569 7265 7320 6c65 6164 6572 2a0a  equires leader*.
+00009530: 0a54 6865 206d 6574 686f 6420 6074 6f6d  .The method `tom
+00009540: 6273 746f 6e65 5f73 7472 6561 6d28 2960  bstone_stream()`
+00009550: 2063 616e 2062 6520 7573 6564 2074 6f20   can be used to 
+00009560: 2274 6f6d 6273 746f 6e65 2220 6120 7374  "tombstone" a st
+00009570: 7265 616d 2e0a 0a60 6060 7079 7468 6f6e  ream...```python
+00009580: 0a63 6f6d 6d69 745f 706f 7369 7469 6f6e  .commit_position
+00009590: 203d 2063 6c69 656e 742e 746f 6d62 7374   = client.tombst
+000095a0: 6f6e 655f 7374 7265 616d 2873 7472 6561  one_stream(strea
+000095b0: 6d5f 6e61 6d65 3d73 7472 6561 6d5f 6e61  m_name=stream_na
+000095c0: 6d65 312c 2065 7870 6563 7465 645f 706f  me1, expected_po
+000095d0: 7369 7469 6f6e 3d32 290a 6060 600a 0a41  sition=2).```..A
+000095e0: 6674 6572 2074 6f6d 6273 746f 6e69 6e67  fter tombstoning
+000095f0: 2061 2073 7472 6561 6d2c 2069 7427 7320   a stream, it's 
+00009600: 6e6f 7420 706f 7373 6962 6c65 2074 6f20  not possible to 
+00009610: 6170 7065 6e64 206e 6577 2065 7665 6e74  append new event
+00009620: 732e 0a0a 0a23 2320 4361 7463 682d 7570  s....## Catch-up
+00009630: 2073 7562 7363 7269 7074 696f 6e73 0a0a   subscriptions..
+00009640: 2243 6174 6368 2d75 7022 2073 7562 7363  "Catch-up" subsc
+00009650: 7269 7074 696f 6e73 2063 616e 2062 6520  riptions can be 
+00009660: 7573 6564 2074 6f20 7265 6365 6976 6520  used to receive 
+00009670: 6576 656e 7473 2074 6861 7420 6861 7665  events that have
+00009680: 2062 6565 6e20 7265 636f 7264 6564 0a69   been recorded.i
+00009690: 6e20 7468 6520 6461 7461 6261 7365 2c20  n the database, 
+000096a0: 616e 6420 616c 736f 2065 7665 6e74 7320  and also events 
+000096b0: 7468 6174 2061 7265 2072 6563 6f72 6465  that are recorde
+000096c0: 6420 6166 7465 7220 6120 7375 6273 6372  d after a subscr
+000096d0: 6970 7469 6f6e 2077 6173 2073 7461 7274  iption was start
+000096e0: 6564 2e0a 0a54 6865 206d 6574 686f 6420  ed...The method 
+000096f0: 6073 7562 7363 7269 6265 5f61 6c6c 5f65  `subscribe_all_e
+00009700: 7665 6e74 7328 2960 2073 7461 7274 7320  vents()` starts 
+00009710: 6120 6361 7463 682d 7570 2073 7562 7363  a catch-up subsc
+00009720: 7269 7074 696f 6e20 746f 2072 6563 6569  ription to recei
+00009730: 7665 2061 6c6c 0a65 7665 6e74 7320 7468  ve all.events th
+00009740: 6174 2068 6176 6520 6265 656e 2061 6e64  at have been and
+00009750: 2077 696c 6c20 6265 2072 6563 6f72 6465   will be recorde
+00009760: 6420 696e 2074 6865 2064 6174 6162 6173  d in the databas
+00009770: 652e 2054 6865 206d 6574 686f 640a 6073  e. The method.`s
+00009780: 7562 7363 7269 6265 5f73 7472 6561 6d5f  ubscribe_stream_
+00009790: 6576 656e 7473 2829 6020 7374 6172 7473  events()` starts
+000097a0: 2061 2063 6174 6368 2d75 7020 7375 6273   a catch-up subs
+000097b0: 6372 6970 7469 6f6e 2074 6f20 7265 6365  cription to rece
+000097c0: 6976 6520 6576 656e 7473 2066 726f 6d0a  ive events from.
+000097d0: 6120 7370 6563 6966 6963 2073 7472 6561  a specific strea
+000097e0: 6d2e 0a0a 4361 7463 682d 7570 2073 7562  m...Catch-up sub
+000097f0: 7363 7269 7074 696f 6e73 2065 6e63 6170  scriptions encap
+00009800: 7375 6c61 7465 2061 2073 7472 6561 6d69  sulate a streami
+00009810: 6e67 2067 5250 4320 6361 6c6c 2077 6869  ng gRPC call whi
+00009820: 6368 2069 730a 6b65 7074 206f 7065 6e20  ch is.kept open 
+00009830: 6279 2074 6865 2073 6572 7665 722c 2077  by the server, w
+00009840: 6974 6820 6e65 776c 7920 7265 636f 7264  ith newly record
+00009850: 6564 2065 7665 6e74 7320 7365 6e74 2074  ed events sent t
+00009860: 6f20 7468 6520 636c 6965 6e74 0a61 7320  o the client.as 
+00009870: 7468 6520 636c 6965 6e74 2069 7465 7261  the client itera
+00009880: 7465 7320 6f76 6572 2074 6865 2073 7562  tes over the sub
+00009890: 7363 7269 7074 696f 6e20 7265 7370 6f6e  scription respon
+000098a0: 7365 2e0a 0a4d 616e 7920 6361 7463 682d  se...Many catch-
+000098b0: 7570 2073 7562 7363 7269 7074 696f 6e73  up subscriptions
+000098c0: 2063 616e 2062 6520 6372 6561 7465 642c   can be created,
+000098d0: 2063 6f6e 6375 7272 656e 746c 7920 6f72   concurrently or
+000098e0: 2073 7563 6365 7373 6976 656c 792c 2061   successively, a
+000098f0: 6e64 2061 6c6c 0a77 696c 6c20 7265 6365  nd all.will rece
+00009900: 6976 6520 616c 6c20 7468 6520 7265 636f  ive all the reco
+00009910: 7264 6564 2065 7665 6e74 7320 7468 6579  rded events they
+00009920: 2068 6176 6520 6265 656e 2072 6571 7565   have been reque
+00009930: 7374 6564 2074 6f20 7265 6365 6976 652e  sted to receive.
+00009940: 0a0a 5468 6520 7265 6365 6976 6564 2072  ..The received r
+00009950: 6563 6f72 6465 6420 6576 656e 7420 6f62  ecorded event ob
+00009960: 6a65 6374 2061 7265 2069 6e73 7461 6e63  ject are instanc
+00009970: 6573 206f 6620 7468 6520 6052 6563 6f72  es of the `Recor
+00009980: 6465 6445 7665 6e74 6020 636c 6173 730a  dedEvent` class.
+00009990: 2873 6565 2062 656c 6f77 292e 0a0a 2323  (see below)...##
+000099a0: 2320 486f 7720 746f 2069 6d70 6c65 6d65  # How to impleme
+000099b0: 6e74 2065 7861 6374 6c79 2d6f 6e63 6520  nt exactly-once 
+000099c0: 6576 656e 7420 7072 6f63 6573 7369 6e67  event processing
+000099d0: 0a0a 5468 6520 636f 6d6d 6974 2070 6f73  ..The commit pos
+000099e0: 6974 696f 6e73 206f 6620 7265 636f 7264  itions of record
+000099f0: 6564 2065 7665 6e74 7320 7468 6174 2061  ed events that a
+00009a00: 7265 2072 6563 6569 7665 6420 616e 6420  re received and 
+00009a10: 7072 6f63 6573 7365 6420 6279 2061 0a64  processed by a.d
+00009a20: 6f77 6e73 7472 6561 6d20 636f 6d70 6f6e  ownstream compon
+00009a30: 656e 7420 6172 6520 7573 6566 756c 6c79  ent are usefully
+00009a40: 2072 6563 6f72 6465 6420 6279 2074 6865   recorded by the
+00009a50: 2064 6f77 6e73 7472 6561 6d20 636f 6d70   downstream comp
+00009a60: 6f6e 656e 7420 736f 2074 6861 740a 7468  onent so that.th
+00009a70: 6520 636f 6d6d 6974 2070 6f73 6974 696f  e commit positio
+00009a80: 6e20 6f66 206c 6173 7420 7072 6f63 6573  n of last proces
+00009a90: 7365 6420 6576 656e 7420 6361 6e20 6265  sed event can be
+00009aa0: 2064 6574 6572 6d69 6e65 642e 0a0a 5468   determined...Th
+00009ab0: 6520 6c61 7374 2072 6563 6f72 6465 6420  e last recorded 
+00009ac0: 636f 6d6d 6974 2070 6f73 6974 696f 6e20  commit position 
+00009ad0: 6361 6e20 6265 2075 7365 6420 746f 2073  can be used to s
+00009ae0: 7065 6369 6679 2074 6865 2063 6f6d 6d69  pecify the commi
+00009af0: 7420 706f 7369 7469 6f6e 2066 726f 6d20  t position from 
+00009b00: 7768 6963 680a 746f 2073 7562 7363 7269  which.to subscri
+00009b10: 6265 2077 6865 6e20 7072 6f63 6573 7369  be when processi
+00009b20: 6e67 2069 7320 7265 7375 6d65 642e 2053  ng is resumed. S
+00009b30: 696e 6365 2074 6869 7320 636f 6d6d 6974  ince this commit
+00009b40: 2070 6f73 6974 696f 6e20 7769 6c6c 2072   position will r
+00009b50: 6570 7265 7365 6e74 2074 6865 0a70 6f73  epresent the.pos
+00009b60: 6974 696f 6e20 6f66 2074 6865 206c 6173  ition of the las
+00009b70: 7420 7375 6363 6573 7366 756c 6c79 2070  t successfully p
+00009b80: 726f 6365 7373 6564 2065 7665 6e74 2069  rocessed event i
+00009b90: 6e20 6120 646f 776e 7374 7265 616d 2063  n a downstream c
+00009ba0: 6f6d 706f 6e65 6e74 2c20 736f 2069 740a  omponent, so it.
+00009bb0: 7769 6c6c 2062 6520 7573 7561 6c20 746f  will be usual to
+00009bc0: 2077 616e 7420 7468 6520 6e65 7874 2065   want the next e
+00009bd0: 7665 6e74 2061 6674 6572 2074 6869 7320  vent after this 
+00009be0: 706f 7369 7469 6f6e 2c20 6265 6361 7573  position, becaus
+00009bf0: 6520 7468 6174 2069 7320 7468 6520 6e65  e that is the ne
+00009c00: 7874 0a65 7665 6e74 2074 6861 7420 6861  xt.event that ha
+00009c10: 7320 6e6f 7420 7965 7420 6265 656e 2070  s not yet been p
+00009c20: 726f 6365 7373 6564 2e20 466f 7220 7468  rocessed. For th
+00009c30: 6973 2072 6561 736f 6e2c 2077 6865 6e20  is reason, when 
+00009c40: 7375 6273 6372 6962 696e 6720 666f 7220  subscribing for 
+00009c50: 6576 656e 7473 0a66 726f 6d20 6120 7370  events.from a sp
+00009c60: 6563 6966 6963 2063 6f6d 6d69 7420 706f  ecific commit po
+00009c70: 7369 7469 6f6e 2075 7369 6e67 2061 2063  sition using a c
+00009c80: 6174 6368 2d75 7020 7375 6273 6372 6970  atch-up subscrip
+00009c90: 7469 6f6e 2069 6e20 4576 656e 7453 746f  tion in EventSto
+00009ca0: 7265 4442 2c20 7468 650a 7265 636f 7264  reDB, the.record
+00009cb0: 6564 2065 7665 6e74 2061 7420 7468 6520  ed event at the 
+00009cc0: 7370 6563 6966 6965 6420 636f 6d6d 6974  specified commit
+00009cd0: 2070 6f73 6974 696f 6e20 7769 6c6c 204e   position will N
+00009ce0: 4f54 2062 6520 696e 636c 7564 6564 2069  OT be included i
+00009cf0: 6e20 7468 6520 7365 7175 656e 6365 0a6f  n the sequence.o
+00009d00: 6620 7265 636f 7264 6564 2065 7665 6e74  f recorded event
+00009d10: 7320 7468 6174 2061 7265 2072 6563 6569  s that are recei
+00009d20: 7665 642e 0a0a 546f 2061 6363 6f6d 706c  ved...To accompl
+00009d30: 6973 6820 2265 7861 6374 6c79 2d6f 6e63  ish "exactly-onc
+00009d40: 6522 2070 726f 6365 7373 696e 6720 6f66  e" processing of
+00009d50: 2072 6563 6f72 6465 6420 6576 656e 7473   recorded events
+00009d60: 2069 6e20 6120 646f 776e 7374 7265 616d   in a downstream
+00009d70: 0a63 6f6d 706f 6e65 6e74 2077 6865 6e20  .component when 
+00009d80: 7573 696e 6720 6120 6361 7463 682d 7570  using a catch-up
+00009d90: 2073 7562 7363 7269 7074 696f 6e2c 2074   subscription, t
+00009da0: 6865 2063 6f6d 6d69 7420 706f 7369 7469  he commit positi
+00009db0: 6f6e 206f 6620 6120 7265 636f 7264 6564  on of a recorded
+00009dc0: 0a65 7665 6e74 2073 686f 756c 6420 6265  .event should be
+00009dd0: 2072 6563 6f72 6465 6420 6174 6f6d 6963   recorded atomic
+00009de0: 616c 6c79 2061 6e64 2075 6e69 7175 656c  ally and uniquel
+00009df0: 7920 616c 6f6e 6720 7769 7468 2074 6865  y along with the
+00009e00: 2072 6573 756c 7420 6f66 2070 726f 6365   result of proce
+00009e10: 7373 696e 670a 7265 636f 7264 6564 2065  ssing.recorded e
+00009e20: 7665 6e74 732c 2066 6f72 2065 7861 6d70  vents, for examp
+00009e30: 6c65 2069 6e20 7468 6520 7361 6d65 2064  le in the same d
+00009e40: 6174 6162 6173 6520 6173 206d 6174 6572  atabase as mater
+00009e50: 6961 6c69 7365 6420 7669 6577 7320 7768  ialised views wh
+00009e60: 656e 0a69 6d70 6c65 6d65 6e74 696e 6720  en.implementing 
+00009e70: 6576 656e 7475 616c 6c79 2d63 6f6e 7369  eventually-consi
+00009e80: 7374 656e 7420 4351 5253 2c20 6f72 2069  stent CQRS, or i
+00009e90: 6e20 7468 6520 7361 6d65 2064 6174 6162  n the same datab
+00009ea0: 6173 6520 6173 2061 2064 6f77 6e73 7472  ase as a downstr
+00009eb0: 6561 6d0a 616e 616c 7974 6963 7320 6f72  eam.analytics or
+00009ec0: 2072 6570 6f72 7469 6e67 206f 7220 6172   reporting or ar
+00009ed0: 6368 6976 696e 6720 6170 706c 6963 6174  chiving applicat
+00009ee0: 696f 6e2e 2042 7920 7265 636f 7264 696e  ion. By recordin
+00009ef0: 6720 7468 6520 636f 6d6d 6974 2070 6f73  g the commit pos
+00009f00: 6974 696f 6e0a 6f66 2072 6563 6f72 6465  ition.of recorde
+00009f10: 6420 6576 656e 7473 2061 746f 6d69 6361  d events atomica
+00009f20: 6c6c 7920 7769 7468 2074 6865 206e 6577  lly with the new
+00009f30: 2073 7461 7465 2074 6861 7420 7265 7375   state that resu
+00009f40: 6c74 7320 6672 6f6d 2070 726f 6365 7373  lts from process
+00009f50: 696e 670a 7265 636f 7264 6564 2065 7665  ing.recorded eve
+00009f60: 6e74 732c 2022 6475 616c 2077 7269 7469  nts, "dual writi
+00009f70: 6e67 2220 696e 2074 6865 2063 6f6e 7375  ng" in the consu
+00009f80: 6d70 7469 6f6e 206f 6620 7265 636f 7264  mption of record
+00009f90: 6564 2065 7665 6e74 7320 6361 6e20 6265  ed events can be
+00009fa0: 0a61 766f 6964 6564 2e20 4279 2061 6c73  .avoided. By als
+00009fb0: 6f20 7265 636f 7264 696e 6720 7468 6520  o recording the 
+00009fc0: 636f 6d6d 6974 2070 6f73 6974 696f 6e20  commit position 
+00009fd0: 756e 6971 7565 6c79 2c20 7468 6520 6e65  uniquely, the ne
+00009fe0: 7720 7374 6174 6520 6361 6e6e 6f74 2062  w state cannot b
+00009ff0: 650a 7265 636f 7264 6564 2074 7769 6365  e.recorded twice
+0000a000: 2c20 616e 6420 6865 6e63 6520 7468 6520  , and hence the 
+0000a010: 7265 636f 7264 6564 2073 7461 7465 206f  recorded state o
+0000a020: 6620 7468 6520 646f 776e 7374 7265 616d  f the downstream
+0000a030: 2063 6f6d 706f 6e65 6e74 2077 696c 6c20   component will 
+0000a040: 6265 0a75 7064 6174 6564 206f 6e6c 7920  be.updated only 
+0000a050: 6f6e 6365 2066 6f72 2061 6e79 2072 6563  once for any rec
+0000a060: 6f72 6465 6420 6576 656e 742e 2042 7920  orded event. By 
+0000a070: 7573 696e 6720 7468 6520 6772 6561 7465  using the greate
+0000a080: 7374 2072 6563 6f72 6465 6420 636f 6d6d  st recorded comm
+0000a090: 6974 0a70 6f73 6974 696f 6e20 746f 2072  it.position to r
+0000a0a0: 6573 756d 6520 6120 6361 7463 682d 7570  esume a catch-up
+0000a0b0: 2073 7562 7363 7269 7074 696f 6e2c 2061   subscription, a
+0000a0c0: 6c6c 2072 6563 6f72 6465 6420 6576 656e  ll recorded even
+0000a0d0: 7473 2077 696c 6c20 6576 656e 7475 616c  ts will eventual
+0000a0e0: 6c79 0a62 6520 7072 6f63 6573 7365 642e  ly.be processed.
+0000a0f0: 2054 6865 2063 6f6d 6269 6e61 7469 6f6e   The combination
+0000a100: 206f 6620 7468 6520 2261 742d 6d6f 7374   of the "at-most
+0000a110: 2d6f 6e63 6522 2063 6f6e 6469 7469 6f6e  -once" condition
+0000a120: 2061 6e64 2074 6865 2022 6174 2d6c 6561   and the "at-lea
+0000a130: 7374 2d6f 6e63 6522 0a63 6f6e 6469 7469  st-once".conditi
+0000a140: 6f6e 2067 6976 6573 2074 6865 2022 6578  on gives the "ex
+0000a150: 6163 746c 792d 6f6e 6365 2220 636f 6e64  actly-once" cond
+0000a160: 6974 696f 6e2e 0a0a 5468 6520 6461 6e67  ition...The dang
+0000a170: 6572 2077 6974 6820 2264 7561 6c20 7772  er with "dual wr
+0000a180: 6974 696e 6722 2069 6e20 7468 6520 636f  iting" in the co
+0000a190: 6e73 756d 7074 696f 6e20 6f66 2072 6563  nsumption of rec
+0000a1a0: 6f72 6465 6420 6576 656e 7473 2069 7320  orded events is 
+0000a1b0: 7468 6174 2069 6620 610a 7265 636f 7264  that if a.record
+0000a1c0: 6564 2065 7665 6e74 2069 7320 7375 6363  ed event is succ
+0000a1d0: 6573 7366 756c 6c79 2070 726f 6365 7373  essfully process
+0000a1e0: 6564 2061 6e64 206e 6577 2073 7461 7465  ed and new state
+0000a1f0: 2072 6563 6f72 6465 6420 6174 6f6d 6963   recorded atomic
+0000a200: 616c 6c79 2069 6e20 6f6e 650a 7472 616e  ally in one.tran
+0000a210: 7361 6374 696f 6e20 7769 7468 2074 6865  saction with the
+0000a220: 2063 6f6d 6d69 7420 706f 7369 7469 6f6e   commit position
+0000a230: 2072 6563 6f72 6465 6420 696e 2061 2073   recorded in a s
+0000a240: 6570 6172 6174 6520 7472 616e 7361 6374  eparate transact
+0000a250: 696f 6e2c 206f 6e65 206d 6179 0a68 6170  ion, one may.hap
+0000a260: 7065 6e20 616e 6420 6e6f 7420 7468 6520  pen and not the 
+0000a270: 6f74 6865 722e 2049 6620 7468 6520 6e65  other. If the ne
+0000a280: 7720 7374 6174 6520 6973 2072 6563 6f72  w state is recor
+0000a290: 6465 6420 6275 7420 7468 6520 706f 7369  ded but the posi
+0000a2a0: 7469 6f6e 2069 7320 6c6f 7374 2c0a 616e  tion is lost,.an
+0000a2b0: 6420 7468 656e 2074 6865 2070 726f 6365  d then the proce
+0000a2c0: 7373 696e 6720 6973 2073 746f 7070 6564  ssing is stopped
+0000a2d0: 2061 6e64 2072 6573 756d 6564 2c20 7468   and resumed, th
+0000a2e0: 6520 7265 636f 7264 6564 2065 7665 6e74  e recorded event
+0000a2f0: 206d 6179 2062 6520 7072 6f63 6573 7365   may be processe
+0000a300: 640a 7477 6963 652e 204f 6e20 7468 6520  d.twice. On the 
+0000a310: 6f74 6865 7220 6861 6e64 2c20 6966 2074  other hand, if t
+0000a320: 6865 2063 6f6d 6d69 7420 706f 7369 7469  he commit positi
+0000a330: 6f6e 2069 7320 7265 636f 7264 6564 2062  on is recorded b
+0000a340: 7574 2074 6865 206e 6577 2073 7461 7465  ut the new state
+0000a350: 2069 730a 6c6f 7374 2c20 7468 6520 7265   is.lost, the re
+0000a360: 636f 7264 6564 2065 7665 6e74 206d 6179  corded event may
+0000a370: 2065 6666 6563 7469 7665 6c79 206e 6f74   effectively not
+0000a380: 2062 6520 7072 6f63 6573 7365 6420 6174   be processed at
+0000a390: 2061 6c6c 2e20 4279 2065 6974 6865 720a   all. By either.
+0000a3a0: 7072 6f63 6573 7369 6e67 2061 6e20 6576  processing an ev
+0000a3b0: 656e 7420 6d6f 7265 2074 6861 6e20 6f6e  ent more than on
+0000a3c0: 6365 2c20 6f72 2062 7920 6661 696c 696e  ce, or by failin
+0000a3d0: 6720 746f 2070 726f 6365 7373 2061 6e20  g to process an 
+0000a3e0: 6576 656e 742c 2074 6865 2072 6563 6f72  event, the recor
+0000a3f0: 6465 640a 7374 6174 6520 6f66 2074 6865  ded.state of the
+0000a400: 2064 6f77 6e73 7472 6561 6d20 636f 6d70   downstream comp
+0000a410: 6f6e 656e 7420 6d69 6768 7420 6265 2069  onent might be i
+0000a420: 6e61 6363 7572 6174 652c 206f 7220 706f  naccurate, or po
+0000a430: 7373 6962 6c79 2069 6e63 6f6e 7369 7374  ssibly inconsist
+0000a440: 656e 742c 2061 6e64 0a70 6572 6861 7073  ent, and.perhaps
+0000a450: 2063 6174 6173 7472 6f70 6869 6361 6c6c   catastrophicall
+0000a460: 7920 736f 2e20 5375 6368 2063 6f6e 7365  y so. Such conse
+0000a470: 7175 656e 6365 7320 6d61 7920 6f72 206d  quences may or m
+0000a480: 6179 206e 6f74 206d 6174 7465 7220 696e  ay not matter in
+0000a490: 2079 6f75 7220 7369 7475 6174 696f 6e2e   your situation.
+0000a4a0: 0a42 7574 2073 6f6d 6574 696d 6573 2069  .But sometimes i
+0000a4b0: 6e63 6f6e 7369 7374 656e 6369 6573 206d  nconsistencies m
+0000a4c0: 6179 2068 616c 7420 7072 6f63 6573 7369  ay halt processi
+0000a4d0: 6e67 2075 6e74 696c 2074 6865 2069 7373  ng until the iss
+0000a4e0: 7565 2069 7320 7265 736f 6c76 6564 2e20  ue is resolved. 
+0000a4f0: 596f 7520 6361 6e0a 6176 6f69 6420 2264  You can.avoid "d
+0000a500: 7561 6c20 7772 6974 696e 6722 2069 6e20  ual writing" in 
+0000a510: 7468 6520 636f 6e73 756d 7074 696f 6e20  the consumption 
+0000a520: 6f66 2065 7665 6e74 7320 6279 2061 746f  of events by ato
+0000a530: 6d69 6361 6c6c 7920 7265 636f 7264 696e  mically recordin
+0000a540: 6720 7468 6520 636f 6d6d 6974 0a70 6f73  g the commit.pos
+0000a550: 6974 696f 6e20 6f66 2061 2072 6563 6f72  ition of a recor
+0000a560: 6465 6420 6576 656e 7420 616c 6f6e 6720  ded event along 
+0000a570: 7769 7468 2074 6865 206e 6577 2073 7461  with the new sta
+0000a580: 7465 2074 6861 7420 7265 7375 6c74 7320  te that results 
+0000a590: 6672 6f6d 2070 726f 6365 7373 696e 6720  from processing 
+0000a5a0: 7468 6174 0a65 7665 6e74 2069 6e20 7468  that.event in th
+0000a5b0: 6520 7361 6d65 2061 746f 6d69 6320 7472  e same atomic tr
+0000a5c0: 616e 7361 6374 696f 6e2e 2042 7920 6d61  ansaction. By ma
+0000a5d0: 6b69 6e67 2074 6865 2072 6563 6f72 6469  king the recordi
+0000a5e0: 6e67 206f 6620 7468 6520 636f 6d6d 6974  ng of the commit
+0000a5f0: 2070 6f73 6974 696f 6e73 0a75 6e69 7175   positions.uniqu
+0000a600: 652c 2073 6f20 7468 6174 2074 7261 6e73  e, so that trans
+0000a610: 6163 7469 6f6e 7320 7769 6c6c 2062 6520  actions will be 
+0000a620: 726f 6c6c 6564 2062 6163 6b20 7768 656e  rolled back when
+0000a630: 2074 6865 7265 2069 7320 6120 636f 6e66   there is a conf
+0000a640: 6c69 6374 2c20 796f 7520 7769 6c6c 0a70  lict, you will.p
+0000a650: 7265 7665 6e74 2074 6865 2072 6573 756c  revent the resul
+0000a660: 7473 206f 6620 616e 7920 6475 706c 6963  ts of any duplic
+0000a670: 6174 6520 7072 6f63 6573 7369 6e67 206f  ate processing o
+0000a680: 6620 6120 7265 636f 7264 6564 2065 7665  f a recorded eve
+0000a690: 6e74 2062 6569 6e67 2063 6f6d 6d69 7474  nt being committ
+0000a6a0: 6564 2e0a 0a52 6563 6f72 6465 6420 6576  ed...Recorded ev
+0000a6b0: 656e 7473 2072 6563 6569 7665 6420 6672  ents received fr
+0000a6c0: 6f6d 2061 2063 6174 6368 2d75 7020 7375  om a catch-up su
+0000a6d0: 6273 6372 6970 7469 6f6e 2063 616e 6e6f  bscription canno
+0000a6e0: 7420 6265 2061 636b 6e6f 776c 6564 6765  t be acknowledge
+0000a6f0: 6420 6261 636b 0a74 6f20 7468 6520 4576  d back.to the Ev
+0000a700: 656e 7453 746f 7265 4442 2073 6572 7665  entStoreDB serve
+0000a710: 722e 2041 636b 6e6f 776c 6564 6769 6e67  r. Acknowledging
+0000a720: 2065 7665 6e74 732c 2068 6f77 6576 6572   events, however
+0000a730: 2c20 6973 2061 6e20 6173 7065 6374 206f  , is an aspect o
+0000a740: 6620 2270 6572 7369 7374 656e 740a 7375  f "persistent.su
+0000a750: 6273 6372 6970 7469 6f6e 7322 2028 7365  bscriptions" (se
+0000a760: 6520 6265 6c6f 7729 2e20 486f 7069 6e67  e below). Hoping
+0000a770: 2074 6f20 7265 6c79 206f 6e20 6163 6b6e   to rely on ackn
+0000a780: 6f77 6c65 6467 696e 6720 6576 656e 7473  owledging events
+0000a790: 2074 6f20 616e 2075 7073 7472 6561 6d0a   to an upstream.
+0000a7a0: 636f 6d70 6f6e 656e 7420 6973 2061 6e20  component is an 
+0000a7b0: 6578 616d 706c 6520 6f66 2064 7561 6c20  example of dual 
+0000a7c0: 7772 6974 696e 672e 0a0a 2323 2320 5375  writing...### Su
+0000a7d0: 6273 6372 6962 6520 616c 6c20 6576 656e  bscribe all even
+0000a7e0: 7473 0a0a 5468 6560 7375 6273 6372 6962  ts..The`subscrib
+0000a7f0: 655f 616c 6c5f 6576 656e 7473 2829 6020  e_all_events()` 
+0000a800: 6d65 7468 6f64 2063 616e 2062 6520 7573  method can be us
+0000a810: 6564 2074 6f20 7374 6172 7420 6120 2263  ed to start a "c
+0000a820: 6174 6368 2d75 7022 2073 7562 7363 7269  atch-up" subscri
+0000a830: 7074 696f 6e0a 7468 6174 2063 616e 2072  ption.that can r
+0000a840: 6574 7572 6e20 6576 656e 7473 2066 726f  eturn events fro
+0000a850: 6d20 616c 6c20 7374 7265 616d 7320 696e  m all streams in
+0000a860: 2074 6865 2064 6174 6162 6173 652e 0a0a   the database...
+0000a870: 5468 6973 206d 6574 686f 6420 6361 6e20  This method can 
+0000a880: 6265 2075 7365 6420 6279 2061 2064 6f77  be used by a dow
+0000a890: 6e73 7472 6561 6d20 636f 6d70 6f6e 656e  nstream componen
+0000a8a0: 740a 746f 2070 726f 6365 7373 2072 6563  t.to process rec
+0000a8b0: 6f72 6465 6420 6576 656e 7473 2077 6974  orded events wit
+0000a8c0: 6820 6578 6163 746c 792d 6f6e 6365 2073  h exactly-once s
+0000a8d0: 656d 616e 7469 6373 2e0a 0a54 6869 7320  emantics...This 
+0000a8e0: 6d65 7468 6f64 2074 616b 6573 2061 6e20  method takes an 
+0000a8f0: 6f70 7469 6f6e 616c 2060 636f 6d6d 6974  optional `commit
+0000a900: 5f70 6f73 6974 696f 6e60 2061 7267 756d  _position` argum
+0000a910: 656e 742c 2077 6869 6368 2063 616e 2062  ent, which can b
+0000a920: 650a 7573 6564 2074 6f20 7370 6563 6966  e.used to specif
+0000a930: 7920 6120 636f 6d6d 6974 2070 6f73 6974  y a commit posit
+0000a940: 696f 6e20 6672 6f6d 2077 6869 6368 2074  ion from which t
+0000a950: 6f20 7375 6273 6372 6962 652e 2054 6865  o subscribe. The
+0000a960: 2064 6566 6175 6c74 0a76 616c 7565 2069   default.value i
+0000a970: 7320 604e 6f6e 6560 2c20 7768 6963 6820  s `None`, which 
+0000a980: 6d65 616e 7320 7468 6520 7375 6273 6372  means the subscr
+0000a990: 6970 7469 6f6e 2077 696c 6c20 6f70 6572  iption will oper
+0000a9a0: 6174 6520 6672 6f6d 2074 6865 2066 6972  ate from the fir
+0000a9b0: 7374 0a72 6563 6f72 6465 6420 6576 656e  st.recorded even
+0000a9c0: 7420 696e 2074 6865 2064 6174 6162 6173  t in the databas
+0000a9d0: 652e 2049 6620 6120 636f 6d6d 6974 2070  e. If a commit p
+0000a9e0: 6f73 6974 696f 6e20 6973 2067 6976 656e  osition is given
+0000a9f0: 2c20 6974 206d 7573 7420 6d61 7463 680a  , it must match.
+0000aa00: 616e 2061 6374 7561 6c6c 7920 6578 6973  an actually exis
+0000aa10: 7469 6e67 2063 6f6d 6d69 7420 706f 7369  ting commit posi
+0000aa20: 7469 6f6e 2069 6e20 7468 6520 6461 7461  tion in the data
+0000aa30: 6261 7365 2e20 5468 6520 7265 636f 6465  base. The recode
+0000aa40: 6420 6576 656e 7473 2074 6861 740a 6172  d events that.ar
+0000aa50: 6520 6f62 7461 696e 6564 2077 696c 6c20  e obtained will 
+0000aa60: 6e6f 7420 696e 636c 7564 6520 7468 6520  not include the 
+0000aa70: 6576 656e 7420 7265 636f 7264 6564 2061  event recorded a
+0000aa80: 7420 7468 6174 2063 6f6d 6d69 7420 706f  t that commit po
+0000aa90: 7369 7469 6f6e 2e0a 0a54 6869 7320 6d65  sition...This me
+0000aaa0: 7468 6f64 2061 6c73 6f20 7461 6b65 7320  thod also takes 
+0000aab0: 666f 7572 206f 7468 6572 206f 7074 696f  four other optio
+0000aac0: 6e61 6c20 6172 6775 6d65 6e74 732c 2060  nal arguments, `
+0000aad0: 6669 6c74 6572 5f65 7863 6c75 6465 602c  filter_exclude`,
+0000aae0: 0a60 6669 6c74 6572 5f69 6e63 6c75 6465  .`filter_include
+0000aaf0: 602c 2060 6669 6c74 6572 5f62 795f 7374  `, `filter_by_st
+0000ab00: 7265 616d 5f6e 616d 6560 2c20 616e 6420  ream_name`, and 
+0000ab10: 6074 696d 656f 7574 602e 0a0a 5468 6520  `timeout`...The 
+0000ab20: 6f70 7469 6f6e 616c 2061 7267 756d 656e  optional argumen
+0000ab30: 7420 6066 696c 7465 725f 6578 636c 7564  t `filter_exclud
+0000ab40: 6560 2069 7320 6120 7365 7175 656e 6365  e` is a sequence
+0000ab50: 206f 6620 7265 6775 6c61 7220 6578 7072   of regular expr
+0000ab60: 6573 7369 6f6e 7320 7468 6174 0a6d 6174  essions that.mat
+0000ab70: 6368 2072 6563 6f72 6465 6420 6576 656e  ch recorded even
+0000ab80: 7473 2074 6861 7420 7368 6f75 6c64 206e  ts that should n
+0000ab90: 6f74 2062 6520 696e 636c 7564 6564 2e20  ot be included. 
+0000aba0: 5468 6973 2061 7267 756d 656e 7420 6973  This argument is
+0000abb0: 2069 676e 6f72 6564 0a69 6620 6066 696c   ignored.if `fil
+0000abc0: 7465 725f 696e 636c 7564 6560 2069 7320  ter_include` is 
+0000abd0: 7365 7420 746f 2061 206e 6f6e 2d65 6d70  set to a non-emp
+0000abe0: 7479 2073 6571 7565 6e63 652e 2042 7920  ty sequence. By 
+0000abf0: 6465 6661 756c 742c 2074 6869 7320 6172  default, this ar
+0000ac00: 6775 6d65 6e74 2069 7320 7365 740a 746f  gument is set.to
+0000ac10: 206d 6174 6368 2074 6865 2065 7665 6e74   match the event
+0000ac20: 2074 7970 6573 206f 6620 2273 7973 7465   types of "syste
+0000ac30: 6d20 6576 656e 7473 222c 2073 6f20 7468  m events", so th
+0000ac40: 6174 2045 7665 6e74 5374 6f72 6544 4220  at EventStoreDB 
+0000ac50: 7379 7374 656d 2065 7665 6e74 730a 7769  system events.wi
+0000ac60: 6c6c 206e 6f74 206e 6f72 6d61 6c6c 7920  ll not normally 
+0000ac70: 6265 2069 6e63 6c75 6465 642e 2053 6565  be included. See
+0000ac80: 2074 6865 204e 6f74 6573 2073 6563 7469   the Notes secti
+0000ac90: 6f6e 2062 656c 6f77 2066 6f72 206d 6f72  on below for mor
+0000aca0: 6520 696e 666f 726d 6174 696f 6e0a 6162  e information.ab
+0000acb0: 6f75 7420 6669 6c74 6572 2065 7870 7265  out filter expre
+0000acc0: 7373 696f 6e73 2e0a 0a54 6865 206f 7074  ssions...The opt
+0000acd0: 696f 6e61 6c20 6172 6775 6d65 6e74 2060  ional argument `
+0000ace0: 6669 6c74 6572 5f69 6e63 6c75 6465 6020  filter_include` 
+0000acf0: 6973 2061 2073 6571 7565 6e63 6520 6f66  is a sequence of
+0000ad00: 2072 6567 756c 6172 2065 7870 7265 7373   regular express
+0000ad10: 696f 6e73 0a74 6861 7420 6d61 7463 6820  ions.that match 
+0000ad20: 7265 636f 7264 6564 2065 7665 6e74 7320  recorded events 
+0000ad30: 7468 6174 2073 686f 756c 6420 6265 2069  that should be i
+0000ad40: 6e63 6c75 6465 642e 2042 7920 6465 6661  ncluded. By defa
+0000ad50: 756c 742c 2074 6869 7320 6172 6775 6d65  ult, this argume
+0000ad60: 6e74 0a69 7320 616e 2065 6d70 7479 2074  nt.is an empty t
+0000ad70: 7570 6c65 2e20 4966 2074 6869 7320 6172  uple. If this ar
+0000ad80: 6775 6d65 6e74 2069 7320 7365 7420 746f  gument is set to
+0000ad90: 2061 206e 6f6e 2d65 6d70 7479 2073 6571   a non-empty seq
+0000ada0: 7565 6e63 652c 2074 6865 0a60 6669 6c74  uence, the.`filt
+0000adb0: 6572 5f65 7863 6c75 6465 6020 6172 6775  er_exclude` argu
+0000adc0: 6d65 6e74 2069 7320 6967 6e6f 7265 642e  ment is ignored.
+0000add0: 0a0a 5468 6520 6f70 7469 6f6e 616c 2061  ..The optional a
+0000ade0: 7267 756d 656e 7420 6066 696c 7465 725f  rgument `filter_
+0000adf0: 6279 5f73 7472 6561 6d5f 6e61 6d65 6020  by_stream_name` 
+0000ae00: 6973 2061 2062 6f6f 6c65 616e 2076 616c  is a boolean val
+0000ae10: 7565 2074 6861 7420 696e 6469 6361 7465  ue that indicate
+0000ae20: 7320 7768 6574 6865 720a 7468 6520 6669  s whether.the fi
+0000ae30: 6c74 6572 2077 696c 6c20 6170 706c 7920  lter will apply 
+0000ae40: 746f 2065 7665 6e74 2074 7970 6573 206f  to event types o
+0000ae50: 7220 7374 7265 616d 206e 616d 6573 2e20  r stream names. 
+0000ae60: 4279 2064 6566 6175 6c74 2c20 7468 6973  By default, this
+0000ae70: 2076 616c 7565 2069 7320 6046 616c 7365   value is `False
+0000ae80: 600a 616e 6420 736f 2074 6865 2066 696c  `.and so the fil
+0000ae90: 7465 7269 6e67 2077 696c 6c20 6170 706c  tering will appl
+0000aea0: 7920 746f 2074 6865 2065 7665 6e74 2074  y to the event t
+0000aeb0: 7970 6520 7374 7269 6e67 7320 6f66 2072  ype strings of r
+0000aec0: 6563 6f72 6465 6420 6576 656e 7473 2e0a  ecorded events..
+0000aed0: 0a50 6c65 6173 6520 6e6f 7465 2c20 7468  .Please note, th
+0000aee0: 6520 6669 6c74 6572 696e 6720 6861 7070  e filtering happ
+0000aef0: 656e 7320 6f6e 2074 6865 2045 7665 6e74  ens on the Event
+0000af00: 5374 6f72 6544 4220 7365 7276 6572 2c20  StoreDB server, 
+0000af10: 616e 6420 7468 650a 606c 696d 6974 6020  and the.`limit` 
+0000af20: 6172 6775 6d65 6e74 2069 7320 6170 706c  argument is appl
+0000af30: 6965 6420 6f6e 2074 6865 2073 6572 7665  ied on the serve
+0000af40: 7220 6166 7465 7220 6669 6c74 6572 696e  r after filterin
+0000af50: 672e 2053 6565 2062 656c 6f77 2066 6f72  g. See below for
+0000af60: 0a6d 6f72 6520 696e 666f 726d 6174 696f  .more informatio
+0000af70: 6e20 6162 6f75 7420 6669 6c74 6572 2072  n about filter r
+0000af80: 6567 756c 6172 2065 7870 7265 7373 696f  egular expressio
+0000af90: 6e73 2e0a 0a54 6865 206f 7074 696f 6e61  ns...The optiona
+0000afa0: 6c20 6074 696d 656f 7574 6020 6172 6775  l `timeout` argu
+0000afb0: 6d65 6e74 2069 7320 6120 5079 7468 6f6e  ment is a Python
+0000afc0: 2060 666c 6f61 7460 2077 6869 6368 2073   `float` which s
+0000afd0: 6574 7320 610a 6465 6164 6c69 6e65 2066  ets a.deadline f
+0000afe0: 6f72 2074 6865 2063 6f6d 706c 6574 696f  or the completio
+0000aff0: 6e20 6f66 2074 6865 2067 5250 4320 6f70  n of the gRPC op
+0000b000: 6572 6174 696f 6e2e 0a0a 5468 6973 206d  eration...This m
+0000b010: 6574 686f 6420 7265 7475 726e 7320 6120  ethod returns a 
+0000b020: 5079 7468 6f6e 2069 7465 7261 746f 7220  Python iterator 
+0000b030: 7468 6174 2079 6965 6c64 7320 7265 636f  that yields reco
+0000b040: 7264 6564 2065 7665 6e74 732c 2069 6e63  rded events, inc
+0000b050: 6c75 6469 6e67 2065 7665 6e74 730a 7468  luding events.th
+0000b060: 6174 2061 7265 2072 6563 6f72 6465 6420  at are recorded 
+0000b070: 6166 7465 7220 7468 6520 7375 6273 6372  after the subscr
+0000b080: 6970 7469 6f6e 2077 6173 2063 7265 6174  iption was creat
+0000b090: 6564 2e20 4974 6572 6174 696e 6720 6f76  ed. Iterating ov
+0000b0a0: 6572 2074 6869 7320 6f62 6a65 6374 2077  er this object w
+0000b0b0: 696c 6c0a 7468 6572 6566 6f72 6520 6e6f  ill.therefore no
+0000b0c0: 7420 7374 6f70 2c20 756e 6c65 7373 2074  t stop, unless t
+0000b0d0: 6865 2063 6f6e 6e65 6374 696f 6e20 746f  he connection to
+0000b0e0: 2074 6865 2064 6174 6162 6173 6520 6973   the database is
+0000b0f0: 206c 6f73 742e 2054 6865 2063 616c 6c20   lost. The call 
+0000b100: 7769 6c6c 0a62 6520 656e 6465 6420 7768  will.be ended wh
+0000b110: 656e 2074 6865 2069 7465 7261 746f 7220  en the iterator 
+0000b120: 6f62 6a65 6374 2069 7320 6465 6c65 7465  object is delete
+0000b130: 6420 6672 6f6d 206d 656d 6f72 792c 2077  d from memory, w
+0000b140: 6869 6368 2077 696c 6c20 6861 7070 656e  hich will happen
+0000b150: 2077 6865 6e20 7468 650a 6974 6572 6174   when the.iterat
+0000b160: 6f72 206f 626a 6563 7420 676f 6573 206f  or object goes o
+0000b170: 7574 206f 6620 7363 6f70 6520 6f72 2069  ut of scope or i
+0000b180: 7320 6578 706c 6963 6974 6c79 2064 656c  s explicitly del
+0000b190: 6574 6564 2028 7365 6520 6265 6c6f 7729  eted (see below)
+0000b1a0: 2e20 5468 6520 6361 6c6c 0a6d 6179 2061  . The call.may a
+0000b1b0: 6c73 6f20 6265 2063 6c6f 7365 6420 6279  lso be closed by
+0000b1c0: 2074 6865 2073 6572 7665 722e 0a0a 5468   the server...Th
+0000b1d0: 6520 7375 6273 6372 6970 7469 6f6e 206f  e subscription o
+0000b1e0: 626a 6563 7420 6361 6e20 6265 2075 7365  bject can be use
+0000b1f0: 6420 6469 7265 6374 6c79 2c20 6275 7420  d directly, but 
+0000b200: 6974 206d 6967 6874 2062 6520 7573 6564  it might be used
+0000b210: 2077 6974 6869 6e20 6120 7468 7265 6164   within a thread
+0000b220: 6564 0a6c 6f6f 7020 6465 6469 6361 7465  ed.loop dedicate
+0000b230: 6420 746f 2072 6563 6569 7669 6e67 2065  d to receiving e
+0000b240: 7665 6e74 7320 7468 6174 2063 616e 2062  vents that can b
+0000b250: 6520 7374 6f70 7065 6420 696e 2061 2063  e stopped in a c
+0000b260: 6f6e 7472 6f6c 6c65 6420 7761 792c 2077  ontrolled way, w
+0000b270: 6974 680a 7265 636f 7264 6564 2065 7665  ith.recorded eve
+0000b280: 6e74 7320 7075 7420 6f6e 2061 2071 7565  nts put on a que
+0000b290: 7565 2066 6f72 2070 726f 6365 7373 696e  ue for processin
+0000b2a0: 6720 696e 2061 2064 6966 6665 7265 6e74  g in a different
+0000b2b0: 2074 6872 6561 642e 2054 6869 7320 7061   thread. This pa
+0000b2c0: 636b 6167 650a 646f 6573 6e27 7420 7072  ckage.doesn't pr
+0000b2d0: 6f76 6964 6520 7375 6368 2061 2074 6872  ovide such a thr
+0000b2e0: 6561 6465 6420 6f72 2071 7565 7569 6e67  eaded or queuing
+0000b2f0: 206f 626a 6563 7420 636c 6173 732e 204a   object class. J
+0000b300: 7573 7420 6d61 6b65 2073 7572 6520 746f  ust make sure to
+0000b310: 2072 6563 6f6e 7374 7275 6374 0a74 6865   reconstruct.the
+0000b320: 2073 7562 7363 7269 7074 696f 6e20 2861   subscription (a
+0000b330: 6e64 2074 6865 2071 7565 7565 2920 7573  nd the queue) us
+0000b340: 696e 6720 7468 6520 6c61 7374 2072 6563  ing the last rec
+0000b350: 6f72 6465 6420 636f 6d6d 6974 2070 6f73  orded commit pos
+0000b360: 6974 696f 6e20 7768 656e 2072 6573 756d  ition when resum
+0000b370: 696e 670a 7468 6520 7375 6273 6372 6970  ing.the subscrip
+0000b380: 7469 6f6e 2061 6674 6572 2061 6e20 6572  tion after an er
+0000b390: 726f 722c 2074 6f20 6265 2073 7572 6520  ror, to be sure 
+0000b3a0: 616c 6c20 6576 656e 7473 2061 7265 2070  all events are p
+0000b3b0: 726f 6365 7373 6564 206f 6e63 652e 0a0a  rocessed once...
+0000b3c0: 5468 6520 6578 616d 706c 6520 6265 6c6f  The example belo
+0000b3d0: 7720 7368 6f77 7320 686f 7720 746f 2073  w shows how to s
+0000b3e0: 7562 7363 7269 6265 2074 6f20 7265 6365  ubscribe to rece
+0000b3f0: 6976 6520 616c 6c20 7265 636f 7264 6564  ive all recorded
+0000b400: 0a65 7665 6e74 7320 6672 6f6d 2074 6865  .events from the
+0000b410: 2073 7461 7274 2c20 616e 6420 7468 656e   start, and then
+0000b420: 2072 6573 756d 696e 6720 6672 6f6d 2061   resuming from a
+0000b430: 2073 7065 6369 6669 6320 636f 6d6d 6974   specific commit
+0000b440: 2070 6f73 6974 696f 6e2e 0a54 6872 6565   position..Three
+0000b450: 2061 6c72 6561 6479 2d72 6563 6f72 6465   already-recorde
+0000b460: 6420 6576 656e 7473 2061 7265 2072 6563  d events are rec
+0000b470: 6569 7665 642c 2061 6e64 2074 6865 6e20  eived, and then 
+0000b480: 7468 7265 6520 6e65 7720 6576 656e 7473  three new events
+0000b490: 2061 7265 0a72 6563 6f72 6465 642c 2077   are.recorded, w
+0000b4a0: 6869 6368 2061 7265 2074 6865 6e20 7265  hich are then re
+0000b4b0: 6365 6976 6564 2076 6961 2074 6865 2073  ceived via the s
+0000b4c0: 7562 7363 7269 7074 696f 6e2e 0a0a 6060  ubscription...``
+0000b4d0: 6070 7974 686f 6e0a 0a23 2041 7070 656e  `python..# Appen
+0000b4e0: 6420 616e 2065 7665 6e74 2074 6f20 6120  d an event to a 
+0000b4f0: 6e65 7720 7374 7265 616d 2e0a 7374 7265  new stream..stre
+0000b500: 616d 5f6e 616d 6532 203d 2073 7472 2875  am_name2 = str(u
+0000b510: 7569 6434 2829 290a 6576 656e 7434 203d  uid4()).event4 =
+0000b520: 204e 6577 4576 656e 7428 7479 7065 3d27   NewEvent(type='
+0000b530: 4f72 6465 7243 7265 6174 6564 272c 2064  OrderCreated', d
+0000b540: 6174 613d 6227 6461 7461 3427 290a 636c  ata=b'data4').cl
+0000b550: 6965 6e74 2e61 7070 656e 645f 6576 656e  ient.append_even
+0000b560: 7473 280a 2020 2020 7374 7265 616d 5f6e  ts(.    stream_n
+0000b570: 616d 653d 7374 7265 616d 5f6e 616d 6532  ame=stream_name2
+0000b580: 2c0a 2020 2020 6578 7065 6374 6564 5f70  ,.    expected_p
+0000b590: 6f73 6974 696f 6e3d 4e6f 6e65 2c0a 2020  osition=None,.  
+0000b5a0: 2020 6576 656e 7473 3d5b 6576 656e 7434    events=[event4
+0000b5b0: 5d2c 0a29 0a0a 2320 5375 6273 6372 6962  ],.)..# Subscrib
+0000b5c0: 6520 6672 6f6d 2074 6865 2066 6972 7374  e from the first
+0000b5d0: 2072 6563 6f72 6465 6420 6576 656e 7420   recorded event 
+0000b5e0: 696e 2074 6865 2064 6174 6162 6173 652e  in the database.
+0000b5f0: 0a73 7562 7363 7269 7074 696f 6e20 3d20  .subscription = 
+0000b600: 636c 6965 6e74 2e73 7562 7363 7269 6265  client.subscribe
+0000b610: 5f61 6c6c 5f65 7665 6e74 7328 290a 7265  _all_events().re
+0000b620: 6365 6976 6564 5f65 7665 6e74 7320 3d20  ceived_events = 
+0000b630: 5b5d 0a0a 2320 5072 6f63 6573 7320 6576  []..# Process ev
+0000b640: 656e 7473 2072 6563 6569 7665 6420 6672  ents received fr
+0000b650: 6f6d 2074 6865 2063 6174 6368 2d75 7020  om the catch-up 
+0000b660: 7375 6273 6372 6970 7469 6f6e 2e0a 666f  subscription..fo
+0000b670: 7220 6576 656e 7420 696e 2073 7562 7363  r event in subsc
+0000b680: 7269 7074 696f 6e3a 0a20 2020 206c 6173  ription:.    las
+0000b690: 745f 636f 6d6d 6974 5f70 6f73 6974 696f  t_commit_positio
+0000b6a0: 6e20 3d20 6576 656e 742e 636f 6d6d 6974  n = event.commit
+0000b6b0: 5f70 6f73 6974 696f 6e0a 2020 2020 7265  _position.    re
+0000b6c0: 6365 6976 6564 5f65 7665 6e74 732e 6170  ceived_events.ap
+0000b6d0: 7065 6e64 2865 7665 6e74 290a 2020 2020  pend(event).    
+0000b6e0: 6966 2065 7665 6e74 2e69 6420 3d3d 2065  if event.id == e
+0000b6f0: 7665 6e74 342e 6964 3a0a 2020 2020 2020  vent4.id:.      
+0000b700: 2020 6272 6561 6b0a 0a61 7373 6572 7420    break..assert 
+0000b710: 7265 6365 6976 6564 5f65 7665 6e74 735b  received_events[
+0000b720: 2d34 5d2e 6964 203d 3d20 6576 656e 7431  -4].id == event1
+0000b730: 2e69 640a 6173 7365 7274 2072 6563 6569  .id.assert recei
+0000b740: 7665 645f 6576 656e 7473 5b2d 335d 2e69  ved_events[-3].i
+0000b750: 6420 3d3d 2065 7665 6e74 322e 6964 0a61  d == event2.id.a
+0000b760: 7373 6572 7420 7265 6365 6976 6564 5f65  ssert received_e
+0000b770: 7665 6e74 735b 2d32 5d2e 6964 203d 3d20  vents[-2].id == 
+0000b780: 6576 656e 7433 2e69 640a 6173 7365 7274  event3.id.assert
+0000b790: 2072 6563 6569 7665 645f 6576 656e 7473   received_events
+0000b7a0: 5b2d 315d 2e69 6420 3d3d 2065 7665 6e74  [-1].id == event
+0000b7b0: 342e 6964 0a0a 2320 4170 7065 6e64 2073  4.id..# Append s
+0000b7c0: 7562 7365 7175 656e 7420 6576 656e 7473  ubsequent events
+0000b7d0: 2074 6f20 7468 6520 7374 7265 616d 2e0a   to the stream..
+0000b7e0: 6576 656e 7435 203d 204e 6577 4576 656e  event5 = NewEven
+0000b7f0: 7428 7479 7065 3d27 4f72 6465 7255 7064  t(type='OrderUpd
+0000b800: 6174 6564 272c 2064 6174 613d 6227 6461  ated', data=b'da
+0000b810: 7461 3527 290a 636c 6965 6e74 2e61 7070  ta5').client.app
+0000b820: 656e 645f 6576 656e 7473 280a 2020 2020  end_events(.    
+0000b830: 7374 7265 616d 5f6e 616d 653d 7374 7265  stream_name=stre
+0000b840: 616d 5f6e 616d 6532 2c0a 2020 2020 6578  am_name2,.    ex
+0000b850: 7065 6374 6564 5f70 6f73 6974 696f 6e3d  pected_position=
+0000b860: 302c 0a20 2020 2065 7665 6e74 733d 5b65  0,.    events=[e
+0000b870: 7665 6e74 355d 2c0a 290a 0a23 2052 6563  vent5],.)..# Rec
+0000b880: 6569 7665 2073 7562 7365 7175 656e 7420  eive subsequent 
+0000b890: 6576 656e 7473 2066 726f 6d20 7468 6520  events from the 
+0000b8a0: 7375 6273 6372 6970 7469 6f6e 2e0a 666f  subscription..fo
+0000b8b0: 7220 6576 656e 7420 696e 2073 7562 7363  r event in subsc
+0000b8c0: 7269 7074 696f 6e3a 0a20 2020 206c 6173  ription:.    las
+0000b8d0: 745f 636f 6d6d 6974 5f70 6f73 6974 696f  t_commit_positio
+0000b8e0: 6e20 3d20 6576 656e 742e 636f 6d6d 6974  n = event.commit
+0000b8f0: 5f70 6f73 6974 696f 6e0a 2020 2020 7265  _position.    re
+0000b900: 6365 6976 6564 5f65 7665 6e74 732e 6170  ceived_events.ap
+0000b910: 7065 6e64 2865 7665 6e74 290a 2020 2020  pend(event).    
+0000b920: 6966 2065 7665 6e74 2e69 6420 3d3d 2065  if event.id == e
+0000b930: 7665 6e74 352e 6964 3a0a 2020 2020 2020  vent5.id:.      
+0000b940: 2020 6272 6561 6b0a 0a0a 6173 7365 7274    break...assert
+0000b950: 2072 6563 6569 7665 645f 6576 656e 7473   received_events
+0000b960: 5b2d 355d 2e69 6420 3d3d 2065 7665 6e74  [-5].id == event
+0000b970: 312e 6964 0a61 7373 6572 7420 7265 6365  1.id.assert rece
+0000b980: 6976 6564 5f65 7665 6e74 735b 2d34 5d2e  ived_events[-4].
+0000b990: 6964 203d 3d20 6576 656e 7432 2e69 640a  id == event2.id.
+0000b9a0: 6173 7365 7274 2072 6563 6569 7665 645f  assert received_
+0000b9b0: 6576 656e 7473 5b2d 335d 2e69 6420 3d3d  events[-3].id ==
+0000b9c0: 2065 7665 6e74 332e 6964 0a61 7373 6572   event3.id.asser
+0000b9d0: 7420 7265 6365 6976 6564 5f65 7665 6e74  t received_event
+0000b9e0: 735b 2d32 5d2e 6964 203d 3d20 6576 656e  s[-2].id == even
+0000b9f0: 7434 2e69 640a 6173 7365 7274 2072 6563  t4.id.assert rec
+0000ba00: 6569 7665 645f 6576 656e 7473 5b2d 315d  eived_events[-1]
+0000ba10: 2e69 6420 3d3d 2065 7665 6e74 352e 6964  .id == event5.id
+0000ba20: 0a0a 0a23 2041 7070 656e 6420 6d6f 7265  ...# Append more
+0000ba30: 2065 7665 6e74 7320 746f 2074 6865 2073   events to the s
+0000ba40: 7472 6561 6d2e 0a65 7665 6e74 3620 3d20  tream..event6 = 
+0000ba50: 4e65 7745 7665 6e74 2874 7970 653d 274f  NewEvent(type='O
+0000ba60: 7264 6572 4465 6c65 7465 6427 2c20 6461  rderDeleted', da
+0000ba70: 7461 3d62 2764 6174 6136 2729 0a63 6c69  ta=b'data6').cli
+0000ba80: 656e 742e 6170 7065 6e64 5f65 7665 6e74  ent.append_event
+0000ba90: 7328 0a20 2020 2073 7472 6561 6d5f 6e61  s(.    stream_na
+0000baa0: 6d65 3d73 7472 6561 6d5f 6e61 6d65 322c  me=stream_name2,
+0000bab0: 0a20 2020 2065 7870 6563 7465 645f 706f  .    expected_po
+0000bac0: 7369 7469 6f6e 3d31 2c0a 2020 2020 6576  sition=1,.    ev
+0000bad0: 656e 7473 3d5b 6576 656e 7436 5d2c 0a29  ents=[event6],.)
+0000bae0: 0a0a 0a23 2052 6573 756d 6520 7375 6273  ...# Resume subs
+0000baf0: 6372 6962 696e 6720 6672 6f6d 2074 6865  cribing from the
+0000bb00: 206c 6173 7420 636f 6d6d 6974 2070 6f73   last commit pos
+0000bb10: 6974 696f 6e2e 0a73 7562 7363 7269 7074  ition..subscript
+0000bb20: 696f 6e20 3d20 636c 6965 6e74 2e73 7562  ion = client.sub
+0000bb30: 7363 7269 6265 5f61 6c6c 5f65 7665 6e74  scribe_all_event
+0000bb40: 7328 0a20 2020 2063 6f6d 6d69 745f 706f  s(.    commit_po
+0000bb50: 7369 7469 6f6e 3d6c 6173 745f 636f 6d6d  sition=last_comm
+0000bb60: 6974 5f70 6f73 6974 696f 6e0a 290a 0a0a  it_position.)...
+0000bb70: 2320 4361 7463 6820 7570 2062 7920 7265  # Catch up by re
+0000bb80: 6365 6976 696e 6720 7468 6520 6e65 7720  ceiving the new 
+0000bb90: 6576 656e 7420 6672 6f6d 2074 6865 2073  event from the s
+0000bba0: 7562 7363 7269 7074 696f 6e2e 0a66 6f72  ubscription..for
+0000bbb0: 2065 7665 6e74 2069 6e20 7375 6273 6372   event in subscr
+0000bbc0: 6970 7469 6f6e 3a0a 2020 2020 7265 6365  iption:.    rece
+0000bbd0: 6976 6564 5f65 7665 6e74 732e 6170 7065  ived_events.appe
+0000bbe0: 6e64 2865 7665 6e74 290a 2020 2020 6966  nd(event).    if
+0000bbf0: 2065 7665 6e74 2e69 6420 3d3d 2065 7665   event.id == eve
+0000bc00: 6e74 362e 6964 3a0a 2020 2020 2020 2020  nt6.id:.        
+0000bc10: 6272 6561 6b0a 0a61 7373 6572 7420 7265  break..assert re
+0000bc20: 6365 6976 6564 5f65 7665 6e74 735b 2d36  ceived_events[-6
+0000bc30: 5d2e 6964 203d 3d20 6576 656e 7431 2e69  ].id == event1.i
+0000bc40: 640a 6173 7365 7274 2072 6563 6569 7665  d.assert receive
+0000bc50: 645f 6576 656e 7473 5b2d 355d 2e69 6420  d_events[-5].id 
+0000bc60: 3d3d 2065 7665 6e74 322e 6964 0a61 7373  == event2.id.ass
+0000bc70: 6572 7420 7265 6365 6976 6564 5f65 7665  ert received_eve
+0000bc80: 6e74 735b 2d34 5d2e 6964 203d 3d20 6576  nts[-4].id == ev
+0000bc90: 656e 7433 2e69 640a 6173 7365 7274 2072  ent3.id.assert r
+0000bca0: 6563 6569 7665 645f 6576 656e 7473 5b2d  eceived_events[-
+0000bcb0: 335d 2e69 6420 3d3d 2065 7665 6e74 342e  3].id == event4.
+0000bcc0: 6964 0a61 7373 6572 7420 7265 6365 6976  id.assert receiv
+0000bcd0: 6564 5f65 7665 6e74 735b 2d32 5d2e 6964  ed_events[-2].id
+0000bce0: 203d 3d20 6576 656e 7435 2e69 640a 6173   == event5.id.as
+0000bcf0: 7365 7274 2072 6563 6569 7665 645f 6576  sert received_ev
+0000bd00: 656e 7473 5b2d 315d 2e69 6420 3d3d 2065  ents[-1].id == e
+0000bd10: 7665 6e74 362e 6964 0a0a 0a23 2041 7070  vent6.id...# App
+0000bd20: 656e 6420 7468 7265 6520 6d6f 7265 2065  end three more e
+0000bd30: 7665 6e74 7320 746f 2061 206e 6577 2073  vents to a new s
+0000bd40: 7472 6561 6d2e 0a73 7472 6561 6d5f 6e61  tream..stream_na
+0000bd50: 6d65 3320 3d20 7374 7228 7575 6964 3428  me3 = str(uuid4(
+0000bd60: 2929 0a65 7665 6e74 3720 3d20 4e65 7745  )).event7 = NewE
+0000bd70: 7665 6e74 2874 7970 653d 274f 7264 6572  vent(type='Order
+0000bd80: 4372 6561 7465 6427 2c20 6461 7461 3d62  Created', data=b
+0000bd90: 2764 6174 6137 2729 0a65 7665 6e74 3820  'data7').event8 
+0000bda0: 3d20 4e65 7745 7665 6e74 2874 7970 653d  = NewEvent(type=
+0000bdb0: 274f 7264 6572 5570 6461 7465 6427 2c20  'OrderUpdated', 
+0000bdc0: 6461 7461 3d62 2764 6174 6138 2729 0a65  data=b'data8').e
+0000bdd0: 7665 6e74 3920 3d20 4e65 7745 7665 6e74  vent9 = NewEvent
+0000bde0: 2874 7970 653d 274f 7264 6572 4465 6c65  (type='OrderDele
+0000bdf0: 7465 6427 2c20 6461 7461 3d62 2764 6174  ted', data=b'dat
+0000be00: 6139 2729 0a0a 636c 6965 6e74 2e61 7070  a9')..client.app
+0000be10: 656e 645f 6576 656e 7473 280a 2020 2020  end_events(.    
+0000be20: 7374 7265 616d 5f6e 616d 653d 7374 7265  stream_name=stre
+0000be30: 616d 5f6e 616d 6533 2c0a 2020 2020 6578  am_name3,.    ex
+0000be40: 7065 6374 6564 5f70 6f73 6974 696f 6e3d  pected_position=
+0000be50: 4e6f 6e65 2c0a 2020 2020 6576 656e 7473  None,.    events
+0000be60: 3d5b 6576 656e 7437 2c20 6576 656e 7438  =[event7, event8
+0000be70: 2c20 6576 656e 7439 5d2c 0a29 0a0a 2320  , event9],.)..# 
+0000be80: 5265 6365 6976 6520 7468 6520 7468 7265  Receive the thre
+0000be90: 6520 6e65 7720 6576 656e 7473 2066 726f  e new events fro
+0000bea0: 6d20 7468 6520 7265 7375 6d65 6420 7375  m the resumed su
+0000beb0: 6273 6372 6970 7469 6f6e 2e0a 666f 7220  bscription..for 
+0000bec0: 6576 656e 7420 696e 2073 7562 7363 7269  event in subscri
+0000bed0: 7074 696f 6e3a 0a20 2020 2072 6563 6569  ption:.    recei
+0000bee0: 7665 645f 6576 656e 7473 2e61 7070 656e  ved_events.appen
+0000bef0: 6428 6576 656e 7429 0a20 2020 2069 6620  d(event).    if 
+0000bf00: 6576 656e 742e 6964 203d 3d20 6576 656e  event.id == even
+0000bf10: 7439 2e69 643a 0a20 2020 2020 2020 2062  t9.id:.        b
+0000bf20: 7265 616b 0a0a 6173 7365 7274 2072 6563  reak..assert rec
+0000bf30: 6569 7665 645f 6576 656e 7473 5b2d 395d  eived_events[-9]
+0000bf40: 2e69 6420 3d3d 2065 7665 6e74 312e 6964  .id == event1.id
+0000bf50: 0a61 7373 6572 7420 7265 6365 6976 6564  .assert received
+0000bf60: 5f65 7665 6e74 735b 2d38 5d2e 6964 203d  _events[-8].id =
+0000bf70: 3d20 6576 656e 7432 2e69 640a 6173 7365  = event2.id.asse
+0000bf80: 7274 2072 6563 6569 7665 645f 6576 656e  rt received_even
+0000bf90: 7473 5b2d 375d 2e69 6420 3d3d 2065 7665  ts[-7].id == eve
+0000bfa0: 6e74 332e 6964 0a61 7373 6572 7420 7265  nt3.id.assert re
+0000bfb0: 6365 6976 6564 5f65 7665 6e74 735b 2d36  ceived_events[-6
+0000bfc0: 5d2e 6964 203d 3d20 6576 656e 7434 2e69  ].id == event4.i
+0000bfd0: 640a 6173 7365 7274 2072 6563 6569 7665  d.assert receive
+0000bfe0: 645f 6576 656e 7473 5b2d 355d 2e69 6420  d_events[-5].id 
+0000bff0: 3d3d 2065 7665 6e74 352e 6964 0a61 7373  == event5.id.ass
+0000c000: 6572 7420 7265 6365 6976 6564 5f65 7665  ert received_eve
+0000c010: 6e74 735b 2d34 5d2e 6964 203d 3d20 6576  nts[-4].id == ev
+0000c020: 656e 7436 2e69 640a 6173 7365 7274 2072  ent6.id.assert r
+0000c030: 6563 6569 7665 645f 6576 656e 7473 5b2d  eceived_events[-
+0000c040: 335d 2e69 6420 3d3d 2065 7665 6e74 372e  3].id == event7.
+0000c050: 6964 0a61 7373 6572 7420 7265 6365 6976  id.assert receiv
+0000c060: 6564 5f65 7665 6e74 735b 2d32 5d2e 6964  ed_events[-2].id
+0000c070: 203d 3d20 6576 656e 7438 2e69 640a 6173   == event8.id.as
+0000c080: 7365 7274 2072 6563 6569 7665 645f 6576  sert received_ev
+0000c090: 656e 7473 5b2d 315d 2e69 6420 3d3d 2065  ents[-1].id == e
+0000c0a0: 7665 6e74 392e 6964 0a60 6060 0a0a 5468  vent9.id.```..Th
+0000c0b0: 6520 6361 7463 682d 7570 2073 7562 7363  e catch-up subsc
+0000c0c0: 7269 7074 696f 6e20 6361 6c6c 2069 7320  ription call is 
+0000c0d0: 656e 6465 6420 6173 2073 6f6f 6e20 6173  ended as soon as
+0000c0e0: 2074 6865 2073 7562 7363 7269 7074 696f   the subscriptio
+0000c0f0: 6e20 6f62 6a65 6374 0a67 6f65 7320 6f75  n object.goes ou
+0000c100: 7420 6f66 2073 636f 7065 206f 7220 6973  t of scope or is
+0000c110: 2065 7870 6c69 6369 746c 7920 6465 6c65   explicitly dele
+0000c120: 7465 6420 6672 6f6d 206d 656d 6f72 792e  ted from memory.
+0000c130: 0a0a 6060 6070 7974 686f 6e0a 2320 456e  ..```python.# En
+0000c140: 6420 7468 6520 7375 6273 6372 6970 7469  d the subscripti
+0000c150: 6f6e 2e0a 6465 6c20 7375 6273 6372 6970  on..del subscrip
+0000c160: 7469 6f6e 0a60 6060 0a0a 2323 2320 5375  tion.```..### Su
+0000c170: 6273 6372 6962 6520 7374 7265 616d 2065  bscribe stream e
+0000c180: 7665 6e74 730a 0a54 6865 6073 7562 7363  vents..The`subsc
+0000c190: 7269 6265 5f73 7472 6561 6d5f 6576 656e  ribe_stream_even
+0000c1a0: 7473 2829 6020 6d65 7468 6f64 2063 616e  ts()` method can
+0000c1b0: 2062 6520 7573 6564 2074 6f20 7374 6172   be used to star
+0000c1c0: 7420 6120 2263 6174 6368 2d75 7022 2073  t a "catch-up" s
+0000c1d0: 7562 7363 7269 7074 696f 6e0a 7468 6174  ubscription.that
+0000c1e0: 2063 616e 2072 6574 7572 6e20 6576 656e   can return even
+0000c1f0: 7473 2074 6861 7420 6172 6520 7265 636f  ts that are reco
+0000c200: 7264 6564 2069 6e20 6120 7369 6e67 6c65  rded in a single
+0000c210: 2073 7472 6561 6d2e 0a0a 5468 6973 206d   stream...This m
+0000c220: 6574 686f 6420 7461 6b65 7320 6120 7265  ethod takes a re
+0000c230: 7175 6972 6564 2060 7374 7265 616d 5f6e  quired `stream_n
+0000c240: 616d 6560 2061 7267 756d 656e 742c 2077  ame` argument, w
+0000c250: 6869 6368 2073 7065 6369 6669 6573 2074  hich specifies t
+0000c260: 6865 206e 616d 6520 6f66 2074 6865 2073  he name of the s
+0000c270: 7472 6561 6d0a 6672 6f6d 2077 6869 6368  tream.from which
+0000c280: 2072 6563 6f72 6465 6420 6576 656e 7473   recorded events
+0000c290: 2077 696c 6c20 6265 2072 6563 6569 7665   will be receive
+0000c2a0: 642e 0a0a 5468 6973 206d 6574 686f 6420  d...This method 
+0000c2b0: 616c 736f 2074 616b 6573 2074 776f 206f  also takes two o
+0000c2c0: 7074 696f 6e61 6c20 6172 6775 6d65 6e74  ptional argument
+0000c2d0: 732c 2060 7374 7265 616d 5f70 6f73 6974  s, `stream_posit
+0000c2e0: 696f 6e60 2c20 616e 6420 6074 696d 656f  ion`, and `timeo
+0000c2f0: 7574 602e 0a0a 5468 6520 6f70 7469 6f6e  ut`...The option
+0000c300: 616c 2060 7374 7265 616d 5f70 6f73 6974  al `stream_posit
+0000c310: 696f 6e60 2061 7267 756d 656e 7420 7370  ion` argument sp
+0000c320: 6563 6966 6965 7320 6120 706f 7369 7469  ecifies a positi
+0000c330: 6f6e 2069 6e20 7468 6520 7374 7265 616d  on in the stream
+0000c340: 2066 726f 6d20 7768 6963 680a 7265 636f   from which.reco
+0000c350: 7264 6564 2065 7665 6e74 7320 7769 6c6c  rded events will
+0000c360: 2062 6520 7265 6365 6976 6564 2e20 5468   be received. Th
+0000c370: 6520 6576 656e 7420 6174 2074 6865 2073  e event at the s
+0000c380: 7065 6369 6669 6564 2073 7472 6561 6d20  pecified stream 
+0000c390: 706f 7369 7469 6f6e 2077 696c 6c20 6e6f  position will no
+0000c3a0: 740a 6265 2069 6e63 6c75 6465 642e 0a0a  t.be included...
+0000c3b0: 5468 6520 6f70 7469 6f6e 616c 2060 7469  The optional `ti
+0000c3c0: 6d65 6f75 7460 2061 7267 756d 656e 7420  meout` argument 
+0000c3d0: 6973 2061 2050 7974 686f 6e20 6066 6c6f  is a Python `flo
+0000c3e0: 6174 6020 7468 6174 2073 6574 730a 6120  at` that sets.a 
+0000c3f0: 6465 6164 6c69 6e65 2066 6f72 2074 6865  deadline for the
+0000c400: 2063 6f6d 706c 6574 696f 6e20 6f66 2074   completion of t
+0000c410: 6865 2067 5250 4320 6f70 6572 6174 696f  he gRPC operatio
+0000c420: 6e2e 0a0a 5468 6520 6578 616d 706c 6520  n...The example 
+0000c430: 6265 6c6f 7720 7368 6f77 7320 686f 7720  below shows how 
+0000c440: 746f 2073 7461 7274 2061 2063 6174 6368  to start a catch
+0000c450: 2d75 7020 7375 6273 6372 6970 7469 6f6e  -up subscription
+0000c460: 2074 6f20 6120 7374 7265 616d 2e0a 0a60   to a stream...`
+0000c470: 6060 7079 7468 6f6e 0a0a 2320 5375 6273  ``python..# Subs
+0000c480: 6372 6962 6520 746f 2065 7665 6e74 7320  cribe to events 
+0000c490: 6672 6f6d 2073 7472 6561 6d32 2c20 6672  from stream2, fr
+0000c4a0: 6f6d 2074 6865 2073 7461 7274 2e0a 7375  om the start..su
+0000c4b0: 6273 6372 6970 7469 6f6e 203d 2063 6c69  bscription = cli
+0000c4c0: 656e 742e 7375 6273 6372 6962 655f 7374  ent.subscribe_st
+0000c4d0: 7265 616d 5f65 7665 6e74 7328 7374 7265  ream_events(stre
+0000c4e0: 616d 5f6e 616d 653d 7374 7265 616d 5f6e  am_name=stream_n
+0000c4f0: 616d 6532 290a 0a23 2052 6561 6420 6672  ame2)..# Read fr
+0000c500: 6f6d 2074 6865 2073 7562 7363 7269 7074  om the subscript
+0000c510: 696f 6e2e 0a65 7665 6e74 7320 3d20 5b5d  ion..events = []
+0000c520: 0a66 6f72 2065 7665 6e74 2069 6e20 7375  .for event in su
+0000c530: 6273 6372 6970 7469 6f6e 3a0a 2020 2020  bscription:.    
+0000c540: 6576 656e 7473 2e61 7070 656e 6428 6576  events.append(ev
+0000c550: 656e 7429 0a20 2020 2069 6620 6576 656e  ent).    if even
+0000c560: 742e 6964 203d 3d20 6576 656e 7436 2e69  t.id == event6.i
+0000c570: 643a 0a20 2020 2020 2020 2062 7265 616b  d:.        break
+0000c580: 0a0a 2320 4368 6563 6b20 7765 2067 6f74  ..# Check we got
+0000c590: 2065 7665 6e74 7320 6f6e 6c79 2066 726f   events only fro
+0000c5a0: 6d20 7374 7265 616d 322e 0a61 7373 6572  m stream2..asser
+0000c5b0: 7420 6c65 6e28 6576 656e 7473 2920 3d3d  t len(events) ==
+0000c5c0: 2033 0a65 7665 6e74 735b 305d 2e73 7472   3.events[0].str
+0000c5d0: 6561 6d5f 6e61 6d65 203d 3d20 7374 7265  eam_name == stre
+0000c5e0: 616d 5f6e 616d 6532 0a65 7665 6e74 735b  am_name2.events[
+0000c5f0: 315d 2e73 7472 6561 6d5f 6e61 6d65 203d  1].stream_name =
+0000c600: 3d20 7374 7265 616d 5f6e 616d 6532 0a65  = stream_name2.e
+0000c610: 7665 6e74 735b 325d 2e73 7472 6561 6d5f  vents[2].stream_
+0000c620: 6e61 6d65 203d 3d20 7374 7265 616d 5f6e  name == stream_n
+0000c630: 616d 6532 0a0a 2320 4170 7065 6e64 2061  ame2..# Append a
+0000c640: 6e6f 7468 6572 2065 7665 6e74 2074 6f20  nother event to 
+0000c650: 7374 7265 616d 332e 0a65 7665 6e74 3130  stream3..event10
+0000c660: 203d 204e 6577 4576 656e 7428 7479 7065   = NewEvent(type
+0000c670: 3d22 4f72 6465 7255 6e64 656c 6574 6564  ="OrderUndeleted
+0000c680: 222c 2064 6174 613d 6227 6461 7461 3130  ", data=b'data10
+0000c690: 2729 0a63 6c69 656e 742e 6170 7065 6e64  ').client.append
+0000c6a0: 5f65 7665 6e74 7328 0a20 2020 2073 7472  _events(.    str
+0000c6b0: 6561 6d5f 6e61 6d65 3d73 7472 6561 6d5f  eam_name=stream_
+0000c6c0: 6e61 6d65 332c 0a20 2020 2065 7870 6563  name3,.    expec
+0000c6d0: 7465 645f 706f 7369 7469 6f6e 3d32 2c0a  ted_position=2,.
+0000c6e0: 2020 2020 6576 656e 7473 3d5b 6576 656e      events=[even
+0000c6f0: 7431 305d 2c0a 290a 0a23 2041 7070 656e  t10],.)..# Appen
+0000c700: 6420 616e 6f74 6865 7220 6576 656e 7420  d another event 
+0000c710: 746f 2073 7472 6561 6d32 2e0a 6576 656e  to stream2..even
+0000c720: 7431 3120 3d20 4e65 7745 7665 6e74 2874  t11 = NewEvent(t
+0000c730: 7970 653d 224f 7264 6572 556e 6465 6c65  ype="OrderUndele
+0000c740: 7465 6422 2c20 6461 7461 3d62 2764 6174  ted", data=b'dat
+0000c750: 6131 3127 290a 636c 6965 6e74 2e61 7070  a11').client.app
+0000c760: 656e 645f 6576 656e 7473 280a 2020 2020  end_events(.    
+0000c770: 7374 7265 616d 5f6e 616d 653d 7374 7265  stream_name=stre
+0000c780: 616d 5f6e 616d 6532 2c0a 2020 2020 6578  am_name2,.    ex
+0000c790: 7065 6374 6564 5f70 6f73 6974 696f 6e3d  pected_position=
+0000c7a0: 322c 0a20 2020 2065 7665 6e74 733d 5b65  2,.    events=[e
+0000c7b0: 7665 6e74 3131 5d0a 290a 0a23 2043 6f6e  vent11].)..# Con
+0000c7c0: 7469 6e75 6520 7265 6164 696e 6720 6672  tinue reading fr
+0000c7d0: 6f6d 2074 6865 2073 7562 7363 7269 7074  om the subscript
+0000c7e0: 696f 6e2e 0a66 6f72 2065 7665 6e74 2069  ion..for event i
+0000c7f0: 6e20 7375 6273 6372 6970 7469 6f6e 3a0a  n subscription:.
+0000c800: 2020 2020 6576 656e 7473 2e61 7070 656e      events.appen
+0000c810: 6428 6576 656e 7429 0a20 2020 2069 6620  d(event).    if 
+0000c820: 6576 656e 742e 6964 203d 3d20 6576 656e  event.id == even
+0000c830: 7431 312e 6964 3a0a 2020 2020 2020 2020  t11.id:.        
+0000c840: 6272 6561 6b0a 0a23 2043 6865 636b 2077  break..# Check w
+0000c850: 6520 676f 7420 6576 656e 7473 206f 6e6c  e got events onl
+0000c860: 7920 6672 6f6d 2073 7472 6561 6d32 2e0a  y from stream2..
+0000c870: 6173 7365 7274 206c 656e 2865 7665 6e74  assert len(event
+0000c880: 7329 203d 3d20 340a 6576 656e 7473 5b30  s) == 4.events[0
+0000c890: 5d2e 7374 7265 616d 5f6e 616d 6520 3d3d  ].stream_name ==
+0000c8a0: 2073 7472 6561 6d5f 6e61 6d65 320a 6576   stream_name2.ev
+0000c8b0: 656e 7473 5b31 5d2e 7374 7265 616d 5f6e  ents[1].stream_n
+0000c8c0: 616d 6520 3d3d 2073 7472 6561 6d5f 6e61  ame == stream_na
+0000c8d0: 6d65 320a 6576 656e 7473 5b32 5d2e 7374  me2.events[2].st
+0000c8e0: 7265 616d 5f6e 616d 6520 3d3d 2073 7472  ream_name == str
+0000c8f0: 6561 6d5f 6e61 6d65 320a 6576 656e 7473  eam_name2.events
+0000c900: 5b33 5d2e 7374 7265 616d 5f6e 616d 6520  [3].stream_name 
+0000c910: 3d3d 2073 7472 6561 6d5f 6e61 6d65 320a  == stream_name2.
+0000c920: 6060 600a 0a54 6865 2065 7861 6d70 6c65  ```..The example
+0000c930: 2062 656c 6f77 2073 686f 7773 2068 6f77   below shows how
+0000c940: 2074 6f20 7374 6172 7420 6120 6361 7463   to start a catc
+0000c950: 682d 7570 2073 7562 7363 7269 7074 696f  h-up subscriptio
+0000c960: 6e20 746f 2061 2073 7472 6561 6d20 6672  n to a stream fr
+0000c970: 6f6d 2061 0a73 7065 6369 6669 6320 7374  om a.specific st
+0000c980: 7265 616d 2070 6f73 6974 696f 6e2e 0a0a  ream position...
+0000c990: 6060 6070 7974 686f 6e0a 0a23 2053 7562  ```python..# Sub
+0000c9a0: 7363 7269 6265 2074 6f20 6576 656e 7473  scribe to events
+0000c9b0: 2066 726f 6d20 7374 7265 616d 322c 2066   from stream2, f
+0000c9c0: 726f 6d20 7468 6520 7374 6172 742e 0a73  rom the start..s
+0000c9d0: 7562 7363 7269 7074 696f 6e20 3d20 636c  ubscription = cl
+0000c9e0: 6965 6e74 2e73 7562 7363 7269 6265 5f73  ient.subscribe_s
+0000c9f0: 7472 6561 6d5f 6576 656e 7473 280a 2020  tream_events(.  
+0000ca00: 2020 7374 7265 616d 5f6e 616d 653d 7374    stream_name=st
+0000ca10: 7265 616d 5f6e 616d 6532 2c0a 2020 2020  ream_name2,.    
+0000ca20: 7374 7265 616d 5f70 6f73 6974 696f 6e3d  stream_position=
+0000ca30: 312c 0a29 0a0a 2320 5265 6164 2065 7665  1,.)..# Read eve
+0000ca40: 6e74 2066 726f 6d20 7468 6520 7375 6273  nt from the subs
+0000ca50: 6372 6970 7469 6f6e 2e0a 6576 656e 7473  cription..events
+0000ca60: 203d 205b 5d0a 666f 7220 6576 656e 7420   = [].for event 
+0000ca70: 696e 2073 7562 7363 7269 7074 696f 6e3a  in subscription:
+0000ca80: 0a20 2020 2065 7665 6e74 732e 6170 7065  .    events.appe
+0000ca90: 6e64 2865 7665 6e74 290a 2020 2020 6966  nd(event).    if
+0000caa0: 2065 7665 6e74 2e69 6420 3d3d 2065 7665   event.id == eve
+0000cab0: 6e74 3131 2e69 643a 0a20 2020 2020 2020  nt11.id:.       
+0000cac0: 2062 7265 616b 0a0a 2320 4368 6563 6b20   break..# Check 
+0000cad0: 7765 2067 6f74 2065 7665 6e74 7320 6f6e  we got events on
+0000cae0: 6c79 2061 6674 6572 2070 6f73 6974 696f  ly after positio
+0000caf0: 6e20 312e 0a61 7373 6572 7420 6c65 6e28  n 1..assert len(
+0000cb00: 6576 656e 7473 2920 3d3d 2032 0a65 7665  events) == 2.eve
+0000cb10: 6e74 735b 305d 2e69 6420 3d3d 2065 7665  nts[0].id == eve
+0000cb20: 6e74 362e 6964 0a65 7665 6e74 735b 305d  nt6.id.events[0]
+0000cb30: 2e73 7472 6561 6d5f 706f 7369 7469 6f6e  .stream_position
+0000cb40: 203d 3d20 320a 6576 656e 7473 5b30 5d2e   == 2.events[0].
+0000cb50: 7374 7265 616d 5f6e 616d 6520 3d3d 2073  stream_name == s
+0000cb60: 7472 6561 6d5f 6e61 6d65 320a 6576 656e  tream_name2.even
+0000cb70: 7473 5b31 5d2e 6964 203d 3d20 6576 656e  ts[1].id == even
+0000cb80: 7431 312e 6964 0a65 7665 6e74 735b 315d  t11.id.events[1]
+0000cb90: 2e73 7472 6561 6d5f 706f 7369 7469 6f6e  .stream_position
+0000cba0: 203d 3d20 330a 6576 656e 7473 5b31 5d2e   == 3.events[1].
+0000cbb0: 7374 7265 616d 5f6e 616d 6520 3d3d 2073  stream_name == s
+0000cbc0: 7472 6561 6d5f 6e61 6d65 320a 6060 600a  tream_name2.```.
+0000cbd0: 0a23 2320 5065 7273 6973 7465 6e74 2073  .## Persistent s
+0000cbe0: 7562 7363 7269 7074 696f 6e73 0a0a 2323  ubscriptions..##
+0000cbf0: 2320 4372 6561 7465 2073 7562 7363 7269  # Create subscri
+0000cc00: 7074 696f 6e0a 0a2a 7265 7175 6972 6573  ption..*requires
+0000cc10: 206c 6561 6465 722a 0a0a 5468 6520 6d65   leader*..The me
+0000cc20: 7468 6f64 2060 6372 6561 7465 5f73 7562  thod `create_sub
+0000cc30: 7363 7269 7074 696f 6e28 2960 2063 616e  scription()` can
+0000cc40: 2062 6520 7573 6564 2074 6f20 6372 6561   be used to crea
+0000cc50: 7465 2061 0a22 7065 7273 6973 7465 6e74  te a."persistent
+0000cc60: 2073 7562 7363 7269 7074 696f 6e22 2074   subscription" t
+0000cc70: 6f20 4576 656e 7453 746f 7265 4442 2e0a  o EventStoreDB..
+0000cc80: 0a54 6869 7320 6d65 7468 6f64 2074 616b  .This method tak
+0000cc90: 6573 2061 2072 6571 7569 7265 6420 6067  es a required `g
+0000cca0: 726f 7570 5f6e 616d 6560 2061 7267 756d  roup_name` argum
+0000ccb0: 656e 742c 2077 6869 6368 2069 7320 7468  ent, which is th
+0000ccc0: 650a 6e61 6d65 206f 6620 6120 2267 726f  e.name of a "gro
+0000ccd0: 7570 2220 6f66 2063 6f6e 7375 6d65 7273  up" of consumers
+0000cce0: 206f 6620 7468 6520 7375 6273 6372 6970   of the subscrip
+0000ccf0: 7469 6f6e 2e0a 0a54 6869 7320 6d65 7468  tion...This meth
+0000cd00: 6f64 2061 6c73 6f20 7461 6b65 7320 7365  od also takes se
+0000cd10: 7665 6e20 6f70 7469 6f6e 616c 2061 7267  ven optional arg
+0000cd20: 756d 656e 7473 2c20 6066 726f 6d5f 656e  uments, `from_en
+0000cd30: 6460 2c20 6063 6f6d 6d69 745f 706f 7369  d`, `commit_posi
+0000cd40: 7469 6f6e 602c 0a60 6669 6c74 6572 5f65  tion`,.`filter_e
+0000cd50: 7863 6c75 6465 602c 2060 6669 6c74 6572  xclude`, `filter
+0000cd60: 5f69 6e63 6c75 6465 602c 2060 6669 6c74  _include`, `filt
+0000cd70: 6572 5f62 795f 7374 7265 616d 5f6e 616d  er_by_stream_nam
+0000cd80: 6560 2c20 6063 6f6e 7375 6d65 725f 7374  e`, `consumer_st
+0000cd90: 7261 7465 6779 602c 0a61 6e64 2060 7469  rategy`,.and `ti
+0000cda0: 6d65 6f75 7460 2e0a 0a54 6865 206f 7074  meout`...The opt
+0000cdb0: 696f 6e61 6c20 6066 726f 6d5f 656e 6460  ional `from_end`
+0000cdc0: 2061 7267 756d 656e 7420 6361 6e20 6265   argument can be
+0000cdd0: 2075 7365 6420 746f 2073 7065 6369 6679   used to specify
+0000cde0: 2074 6861 7420 7468 6520 6772 6f75 7020   that the group 
+0000cdf0: 6f66 2063 6f6e 7375 6d65 7273 0a6f 6620  of consumers.of 
+0000ce00: 7468 6520 7375 6273 6372 6970 7469 6f6e  the subscription
+0000ce10: 2073 686f 756c 6420 6f6e 6c79 2072 6563   should only rec
+0000ce20: 6569 7665 2065 7665 6e74 7320 7468 6174  eive events that
+0000ce30: 2077 6572 6520 7265 636f 7264 6564 2061   were recorded a
+0000ce40: 6674 6572 2074 6865 2073 7562 7363 7269  fter the subscri
+0000ce50: 7074 696f 6e0a 7761 7320 6372 6561 7465  ption.was create
+0000ce60: 642e 0a0a 416c 7465 726e 6174 6976 656c  d...Alternativel
+0000ce70: 792c 2074 6865 206f 7074 696f 6e61 6c20  y, the optional 
+0000ce80: 6063 6f6d 6d69 745f 706f 7369 7469 6f6e  `commit_position
+0000ce90: 6020 6172 6775 6d65 6e74 2063 616e 2062  ` argument can b
+0000cea0: 6520 7573 6564 2074 6f20 7370 6563 6966  e used to specif
+0000ceb0: 7920 6120 636f 6d6d 6974 0a70 6f73 6974  y a commit.posit
+0000cec0: 696f 6e20 6672 6f6d 2077 6869 6368 2063  ion from which c
+0000ced0: 6f6d 6d69 7420 706f 7369 7469 6f6e 2074  ommit position t
+0000cee0: 6865 2067 726f 7570 206f 6620 636f 6e73  he group of cons
+0000cef0: 756d 6572 7320 6f66 2074 6865 2073 7562  umers of the sub
+0000cf00: 7363 7269 7074 696f 6e20 7368 6f75 6c64  scription should
+0000cf10: 0a72 6563 6569 7665 2065 7665 6e74 732e  .receive events.
+0000cf20: 2050 6c65 6173 6520 6e6f 7465 2c20 7468   Please note, th
+0000cf30: 6520 7265 636f 7264 6564 2065 7665 6e74  e recorded event
+0000cf40: 2061 7420 7468 6520 7370 6563 6966 6965   at the specifie
+0000cf50: 6420 636f 6d6d 6974 2070 6f73 6974 696f  d commit positio
+0000cf60: 6e20 6d69 6768 740a 6265 2069 6e63 6c75  n might.be inclu
+0000cf70: 6465 6420 696e 2074 6865 2072 6563 6f72  ded in the recor
+0000cf80: 6465 6420 6576 656e 7473 2072 6563 6569  ded events recei
+0000cf90: 7665 6420 6279 2074 6865 2067 726f 7570  ved by the group
+0000cfa0: 206f 6620 636f 6e73 756d 6572 732e 0a0a   of consumers...
+0000cfb0: 4966 206e 6569 7468 6572 2060 6672 6f6d  If neither `from
+0000cfc0: 5f65 6e64 6020 6f72 2060 636f 6d6d 6974  _end` or `commit
+0000cfd0: 5f70 6f73 6974 696f 6e60 2061 7265 2073  _position` are s
+0000cfe0: 7065 6369 6669 6564 2c20 7468 6520 6772  pecified, the gr
+0000cff0: 6f75 7020 6f66 2063 6f6e 7375 6d65 7273  oup of consumers
+0000d000: 0a6f 6620 7468 6520 7375 6273 6372 6970  .of the subscrip
+0000d010: 7469 6f6e 2077 696c 6c20 706f 7465 6e74  tion will potent
+0000d020: 6961 6c6c 7920 7265 6365 6976 6520 616c  ially receive al
+0000d030: 6c20 7265 636f 7264 6564 2065 7665 6e74  l recorded event
+0000d040: 7320 696e 2074 6865 2064 6174 6162 6173  s in the databas
+0000d050: 652e 0a0a 5468 6520 6f70 7469 6f6e 616c  e...The optional
+0000d060: 2060 6669 6c74 6572 5f65 7863 6c75 6465   `filter_exclude
+0000d070: 6020 6172 6775 6d65 6e74 2069 7320 6120  ` argument is a 
+0000d080: 7365 7175 656e 6365 206f 6620 7265 6775  sequence of regu
+0000d090: 6c61 7220 6578 7072 6573 7369 6f6e 7320  lar expressions 
+0000d0a0: 7468 6174 0a6d 6174 6368 2072 6563 6f72  that.match recor
+0000d0b0: 6465 6420 6576 656e 7473 2074 6861 7420  ded events that 
+0000d0c0: 7368 6f75 6c64 206e 6f74 2062 6520 696e  should not be in
+0000d0d0: 636c 7564 6564 2e20 5468 6973 2061 7267  cluded. This arg
+0000d0e0: 756d 656e 7420 6973 2069 676e 6f72 6564  ument is ignored
+0000d0f0: 0a69 6620 6066 696c 7465 725f 696e 636c  .if `filter_incl
+0000d100: 7564 6560 2069 7320 7365 7420 746f 2061  ude` is set to a
+0000d110: 206e 6f6e 2d65 6d70 7479 2073 6571 7565   non-empty seque
+0000d120: 6e63 652e 2042 7920 6465 6661 756c 742c  nce. By default,
+0000d130: 2074 6869 7320 6172 6775 6d65 6e74 2069   this argument i
+0000d140: 7320 7365 740a 746f 206d 6174 6368 2074  s set.to match t
+0000d150: 6865 2065 7665 6e74 2074 7970 6573 206f  he event types o
+0000d160: 6620 2273 7973 7465 6d20 6576 656e 7473  f "system events
+0000d170: 222c 2073 6f20 7468 6174 2045 7665 6e74  ", so that Event
+0000d180: 5374 6f72 6544 4220 7379 7374 656d 2065  StoreDB system e
+0000d190: 7665 6e74 730a 7769 6c6c 206e 6f74 206e  vents.will not n
+0000d1a0: 6f72 6d61 6c6c 7920 6265 2072 6563 6569  ormally be recei
+0000d1b0: 7665 642e 2053 6565 2074 6865 204e 6f74  ved. See the Not
+0000d1c0: 6573 2073 6563 7469 6f6e 2062 656c 6f77  es section below
+0000d1d0: 2066 6f72 206d 6f72 6520 696e 666f 726d   for more inform
+0000d1e0: 6174 696f 6e0a 6162 6f75 7420 6669 6c74  ation.about filt
+0000d1f0: 6572 2065 7870 7265 7373 696f 6e73 2e0a  er expressions..
+0000d200: 0a54 6865 206f 7074 696f 6e61 6c20 6066  .The optional `f
+0000d210: 696c 7465 725f 696e 636c 7564 6560 2061  ilter_include` a
+0000d220: 7267 756d 656e 7420 6973 2061 2073 6571  rgument is a seq
+0000d230: 7565 6e63 6520 6f66 2072 6567 756c 6172  uence of regular
+0000d240: 2065 7870 7265 7373 696f 6e73 0a74 6861   expressions.tha
+0000d250: 7420 6d61 7463 6820 7265 636f 7264 6564  t match recorded
+0000d260: 2065 7665 6e74 7320 7468 6174 2073 686f   events that sho
+0000d270: 756c 6420 6265 2072 6563 6569 7665 642e  uld be received.
+0000d280: 2042 7920 6465 6661 756c 742c 2074 6869   By default, thi
+0000d290: 7320 6172 6775 6d65 6e74 0a69 7320 616e  s argument.is an
+0000d2a0: 2065 6d70 7479 2074 7570 6c65 2e20 4966   empty tuple. If
+0000d2b0: 2074 6869 7320 6172 6775 6d65 6e74 2069   this argument i
+0000d2c0: 7320 7365 7420 746f 2061 206e 6f6e 2d65  s set to a non-e
+0000d2d0: 6d70 7479 2073 6571 7565 6e63 652c 2074  mpty sequence, t
+0000d2e0: 6865 0a60 6669 6c74 6572 5f65 7863 6c75  he.`filter_exclu
+0000d2f0: 6465 6020 6172 6775 6d65 6e74 2069 7320  de` argument is 
+0000d300: 6967 6e6f 7265 642e 0a0a 5468 6520 6f70  ignored...The op
+0000d310: 7469 6f6e 616c 2060 6669 6c74 6572 5f62  tional `filter_b
+0000d320: 795f 7374 7265 616d 5f6e 616d 6560 2061  y_stream_name` a
+0000d330: 7267 756d 656e 7420 6973 2061 2062 6f6f  rgument is a boo
+0000d340: 6c65 616e 2076 616c 7565 2074 6861 7420  lean value that 
+0000d350: 696e 6469 6361 7465 7320 7768 6574 6865  indicates whethe
+0000d360: 720a 7468 6520 6669 6c74 6572 2077 696c  r.the filter wil
+0000d370: 6c20 6170 706c 7920 746f 2065 7665 6e74  l apply to event
+0000d380: 2074 7970 6573 206f 7220 7374 7265 616d   types or stream
+0000d390: 206e 616d 6573 2e20 4279 2064 6566 6175   names. By defau
+0000d3a0: 6c74 2c20 7468 6973 2076 616c 7565 2069  lt, this value i
+0000d3b0: 7320 6046 616c 7365 600a 616e 6420 736f  s `False`.and so
+0000d3c0: 2074 6865 2066 696c 7465 7269 6e67 2077   the filtering w
+0000d3d0: 696c 6c20 6170 706c 7920 746f 2074 6865  ill apply to the
+0000d3e0: 2065 7665 6e74 2074 7970 6520 7374 7269   event type stri
+0000d3f0: 6e67 7320 6f66 2072 6563 6f72 6465 6420  ngs of recorded 
+0000d400: 6576 656e 7473 2e0a 0a54 6865 206f 7074  events...The opt
+0000d410: 696f 6e61 6c20 6063 6f6e 7375 6d65 725f  ional `consumer_
+0000d420: 7374 7261 7465 6779 6020 6172 6775 6d65  strategy` argume
+0000d430: 6e74 2069 7320 6120 5079 7468 6f6e 2060  nt is a Python `
+0000d440: 7374 7260 2074 6861 7420 6465 6669 6e65  str` that define
+0000d450: 730a 7468 6520 636f 6e73 756d 6572 2073  s.the consumer s
+0000d460: 7472 6174 6567 7920 666f 7220 7468 6973  trategy for this
+0000d470: 2070 6572 7369 7374 656e 7420 7375 6273   persistent subs
+0000d480: 6372 6970 7469 6f6e 2e20 5468 6520 7661  cription. The va
+0000d490: 6c75 6520 6f66 2074 6869 7320 6172 6775  lue of this argu
+0000d4a0: 6d65 6e74 0a63 616e 2062 6520 6027 4469  ment.can be `'Di
+0000d4b0: 7370 6174 6368 546f 5369 6e67 6c65 2760  spatchToSingle'`
+0000d4c0: 2c20 6027 526f 756e 6452 6f62 696e 2760  , `'RoundRobin'`
+0000d4d0: 2c20 6027 5069 6e6e 6564 2760 2c20 6f72  , `'Pinned'`, or
+0000d4e0: 2060 2750 696e 6e65 6442 7943 6f72 7265   `'PinnedByCorre
+0000d4f0: 6c61 7469 6f6e 2760 2e20 5468 650a 6465  lation'`. The.de
+0000d500: 6661 756c 7420 7661 6c75 6520 6973 2060  fault value is `
+0000d510: 2744 6973 7061 7463 6854 6f53 696e 676c  'DispatchToSingl
+0000d520: 6527 602e 0a0a 5468 6520 6f70 7469 6f6e  e'`...The option
+0000d530: 616c 2060 7469 6d65 6f75 7460 2061 7267  al `timeout` arg
+0000d540: 756d 656e 7420 6973 2061 2050 7974 686f  ument is a Pytho
+0000d550: 6e20 6066 6c6f 6174 6020 7768 6963 6820  n `float` which 
+0000d560: 7365 7473 2061 0a64 6561 646c 696e 6520  sets a.deadline 
+0000d570: 666f 7220 7468 6520 636f 6d70 6c65 7469  for the completi
+0000d580: 6f6e 206f 6620 7468 6520 6752 5043 206f  on of the gRPC o
+0000d590: 7065 7261 7469 6f6e 2e0a 0a54 6865 206d  peration...The m
+0000d5a0: 6574 686f 6420 6063 7265 6174 655f 7375  ethod `create_su
+0000d5b0: 6273 6372 6970 7469 6f6e 2829 6020 646f  bscription()` do
+0000d5c0: 6573 206e 6f74 2072 6574 7572 6e20 6120  es not return a 
+0000d5d0: 7661 6c75 652c 2062 6563 6175 7365 0a72  value, because.r
+0000d5e0: 6563 6f72 6465 6420 6576 656e 7473 2061  ecorded events a
+0000d5f0: 7265 206f 6274 6169 6e65 6420 6279 2074  re obtained by t
+0000d600: 6865 2067 726f 7570 206f 6620 636f 6e73  he group of cons
+0000d610: 756d 6572 7320 6f66 2074 6865 2073 7562  umers of the sub
+0000d620: 7363 7269 7074 696f 6e0a 7573 696e 6720  scription.using 
+0000d630: 7468 6520 6072 6561 645f 7375 6273 6372  the `read_subscr
+0000d640: 6970 7469 6f6e 2829 6020 6d65 7468 6f64  iption()` method
+0000d650: 2e0a 0a49 6e20 7468 6520 6578 616d 706c  ...In the exampl
+0000d660: 6520 6265 6c6f 772c 2061 2070 6572 7369  e below, a persi
+0000d670: 7374 656e 7420 7375 6273 6372 6970 7469  stent subscripti
+0000d680: 6f6e 2069 7320 6372 6561 7465 642e 0a0a  on is created...
+0000d690: 6060 6070 7974 686f 6e0a 2320 4372 6561  ```python.# Crea
+0000d6a0: 7465 2061 2070 6572 7369 7374 656e 7420  te a persistent 
+0000d6b0: 7375 6273 6372 6970 7469 6f6e 2e0a 6772  subscription..gr
+0000d6c0: 6f75 705f 6e61 6d65 203d 2066 2267 726f  oup_name = f"gro
+0000d6d0: 7570 2d7b 7575 6964 3428 297d 220a 636c  up-{uuid4()}".cl
+0000d6e0: 6965 6e74 2e63 7265 6174 655f 7375 6273  ient.create_subs
+0000d6f0: 6372 6970 7469 6f6e 2867 726f 7570 5f6e  cription(group_n
+0000d700: 616d 653d 6772 6f75 705f 6e61 6d65 290a  ame=group_name).
+0000d710: 6060 600a 0a23 2323 2052 6561 6420 7375  ```..### Read su
+0000d720: 6273 6372 6970 7469 6f6e 0a0a 2a72 6571  bscription..*req
+0000d730: 7569 7265 7320 6c65 6164 6572 2a0a 0a54  uires leader*..T
+0000d740: 6865 206d 6574 686f 6420 6072 6561 645f  he method `read_
+0000d750: 7375 6273 6372 6970 7469 6f6e 2829 6020  subscription()` 
+0000d760: 6361 6e20 6265 2075 7365 6420 6279 2061  can be used by a
+0000d770: 2067 726f 7570 206f 6620 636f 6e73 756d   group of consum
+0000d780: 6572 7320 746f 2072 6563 6569 7665 0a72  ers to receive.r
+0000d790: 6563 6f72 6465 6420 6576 656e 7473 2066  ecorded events f
+0000d7a0: 726f 6d20 6120 7065 7273 6973 7465 6e74  rom a persistent
+0000d7b0: 2073 7562 7363 7269 7074 696f 6e20 6372   subscription cr
+0000d7c0: 6561 7465 6420 7573 696e 6720 6063 7265  eated using `cre
+0000d7d0: 6174 655f 7375 6273 6372 6970 7469 6f6e  ate_subscription
+0000d7e0: 602e 0a0a 5468 6973 206d 6574 686f 6420  `...This method 
+0000d7f0: 7461 6b65 7320 6120 7265 7175 6972 6564  takes a required
+0000d800: 2060 6772 6f75 705f 6e61 6d65 6020 6172   `group_name` ar
+0000d810: 6775 6d65 6e74 2c20 7768 6963 6820 6973  gument, which is
+0000d820: 0a74 6865 206e 616d 6520 6f66 2061 2022  .the name of a "
+0000d830: 6772 6f75 7022 206f 6620 636f 6e73 756d  group" of consum
+0000d840: 6572 7320 6f66 2074 6865 2073 7562 7363  ers of the subsc
+0000d850: 7269 7074 696f 6e20 7370 6563 6966 6965  ription specifie
+0000d860: 640a 7768 656e 2060 6372 6561 7465 5f73  d.when `create_s
+0000d870: 7562 7363 7269 7074 696f 6e28 2960 2077  ubscription()` w
+0000d880: 6173 2063 616c 6c65 642e 0a0a 5468 6973  as called...This
+0000d890: 206d 6574 686f 6420 616c 736f 2074 616b   method also tak
+0000d8a0: 6573 2061 6e20 6f70 7469 6f6e 616c 2060  es an optional `
+0000d8b0: 7469 6d65 6f75 7460 2061 7267 756d 656e  timeout` argumen
+0000d8c0: 742c 2074 6861 740a 6973 2065 7870 6563  t, that.is expec
+0000d8d0: 7465 6420 746f 2062 6520 6120 5079 7468  ted to be a Pyth
+0000d8e0: 6f6e 2060 666c 6f61 7460 2c20 7768 6963  on `float`, whic
+0000d8f0: 6820 7365 7473 2061 2064 6561 646c 696e  h sets a deadlin
+0000d900: 650a 666f 7220 7468 6520 636f 6d70 6c65  e.for the comple
+0000d910: 7469 6f6e 206f 6620 7468 6520 6752 5043  tion of the gRPC
+0000d920: 206f 7065 7261 7469 6f6e 2e0a 0a54 6869   operation...Thi
+0000d930: 7320 6d65 7468 6f64 2072 6574 7572 6e73  s method returns
+0000d940: 2061 2032 2d74 7570 6c65 3a20 6120 2272   a 2-tuple: a "r
+0000d950: 6561 6420 7265 7175 6573 7422 206f 626a  ead request" obj
+0000d960: 6563 7420 616e 6420 6120 2272 6561 6420  ect and a "read 
+0000d970: 7265 7370 6f6e 7365 2220 6f62 6a65 6374  response" object
+0000d980: 2e0a 0a60 6060 7079 7468 6f6e 0a72 6561  ...```python.rea
+0000d990: 645f 7265 712c 2072 6561 645f 7265 7370  d_req, read_resp
+0000d9a0: 203d 2063 6c69 656e 742e 7265 6164 5f73   = client.read_s
+0000d9b0: 7562 7363 7269 7074 696f 6e28 6772 6f75  ubscription(grou
+0000d9c0: 705f 6e61 6d65 3d67 726f 7570 5f6e 616d  p_name=group_nam
+0000d9d0: 6529 0a60 6060 0a0a 5468 6520 2272 6561  e).```..The "rea
+0000d9e0: 6420 7265 7370 6f6e 7365 2220 6f62 6a65  d response" obje
+0000d9f0: 6374 2069 7320 616e 2069 7465 7261 746f  ct is an iterato
+0000da00: 7220 7468 6174 2079 6965 6c64 7320 7265  r that yields re
+0000da10: 636f 7264 6564 2065 7665 6e74 7320 6672  corded events fr
+0000da20: 6f6d 0a74 6865 2073 7065 6369 6669 6564  om.the specified
+0000da30: 2063 6f6d 6d69 7420 706f 7369 7469 6f6e   commit position
+0000da40: 2e0a 0a54 6865 2022 7265 6164 2072 6571  ...The "read req
+0000da50: 7565 7374 2220 6f62 6a65 6374 2068 6173  uest" object has
+0000da60: 2061 6e20 6061 636b 2829 6020 6d65 7468   an `ack()` meth
+0000da70: 6f64 2074 6861 7420 7368 6f75 6c64 2062  od that should b
+0000da80: 6520 7573 6564 2062 7920 6120 636f 6e73  e used by a cons
+0000da90: 756d 6572 0a69 6e20 6120 6772 6f75 7020  umer.in a group 
+0000daa0: 746f 2061 636b 6e6f 776c 6564 6765 2074  to acknowledge t
+0000dab0: 6f20 7468 6520 7365 7276 6572 2074 6861  o the server tha
+0000dac0: 7420 6974 2068 6173 2072 6563 6569 7665  t it has receive
+0000dad0: 6420 616e 6420 7375 6363 6573 7366 756c  d and successful
+0000dae0: 6c79 0a70 726f 6365 7373 6564 2061 2072  ly.processed a r
+0000daf0: 6563 6f72 6465 6420 6576 656e 742e 2054  ecorded event. T
+0000db00: 6869 7320 7769 6c6c 2070 7265 7665 6e74  his will prevent
+0000db10: 2074 6861 7420 7265 636f 7264 6564 2065   that recorded e
+0000db20: 7665 6e74 2062 6569 6e67 2072 6563 6569  vent being recei
+0000db30: 7665 640a 6279 2061 6e6f 7468 6572 2063  ved.by another c
+0000db40: 6f6e 7375 6d65 7220 696e 2074 6865 2073  onsumer in the s
+0000db50: 616d 6520 6772 6f75 702e 2054 6865 2060  ame group. The `
+0000db60: 6163 6b28 2960 206d 6574 686f 6420 7461  ack()` method ta
+0000db70: 6b65 7320 616e 2060 6576 656e 745f 6964  kes an `event_id
+0000db80: 600a 6172 6775 6d65 6e74 2c20 7768 6963  `.argument, whic
+0000db90: 6820 6973 2074 6865 2049 4420 6f66 2074  h is the ID of t
+0000dba0: 6865 2072 6563 6f72 6465 6420 6576 656e  he recorded even
+0000dbb0: 7420 7468 6174 2068 6173 2062 6565 6e20  t that has been 
+0000dbc0: 7265 6365 6976 6564 2e0a 0a54 6865 2022  received...The "
+0000dbd0: 7265 6164 2072 6571 7565 7374 2220 6f62  read request" ob
+0000dbe0: 6a65 6374 2061 6c73 6f20 6861 7320 616e  ject also has an
+0000dbf0: 2060 6e61 636b 2829 6020 6d65 7468 6f64   `nack()` method
+0000dc00: 2074 6861 7420 7368 6f75 6c64 2062 6520   that should be 
+0000dc10: 7573 6564 2062 7920 6120 636f 6e73 756d  used by a consum
+0000dc20: 6572 0a69 6e20 6120 6772 6f75 7020 746f  er.in a group to
+0000dc30: 206e 6567 6174 6976 656c 7920 6163 6b6e   negatively ackn
+0000dc40: 6f77 6c65 6467 6520 746f 2074 6865 2073  owledge to the s
+0000dc50: 6572 7665 7220 7468 6174 2069 7420 6861  erver that it ha
+0000dc60: 7320 7265 6365 6976 6564 2062 7574 206e  s received but n
+0000dc70: 6f74 0a73 7563 6365 7373 6675 6c6c 7920  ot.successfully 
+0000dc80: 7072 6f63 6573 7365 6420 6120 7265 636f  processed a reco
+0000dc90: 7264 6564 2065 7665 6e74 2e20 5468 6520  rded event. The 
+0000dca0: 606e 6163 6b28 2960 206d 6574 686f 6420  `nack()` method 
+0000dcb0: 7461 6b65 7320 616e 2060 6576 656e 745f  takes an `event_
+0000dcc0: 6964 600a 6172 6775 6d65 6e74 2c20 7768  id`.argument, wh
+0000dcd0: 6963 6820 6973 2074 6865 2049 4420 6f66  ich is the ID of
+0000dce0: 2074 6865 2072 6563 6f72 6465 6420 6576   the recorded ev
+0000dcf0: 656e 7420 7468 6174 2068 6173 2062 6565  ent that has bee
+0000dd00: 6e20 7265 6365 6976 6564 2c20 616e 6420  n received, and 
+0000dd10: 616e 0a60 6163 7469 6f6e 6020 6172 6775  an.`action` argu
+0000dd20: 6d65 6e74 2c20 7768 6963 6820 7368 6f75  ment, which shou
+0000dd30: 6c64 2062 6520 6120 5079 7468 6f6e 2060  ld be a Python `
+0000dd40: 7374 7260 2c20 6569 7468 6572 2060 2775  str`, either `'u
+0000dd50: 6e6b 6e6f 776e 2760 2c20 6027 7061 726b  nknown'`, `'park
+0000dd60: 2760 2c0a 6027 7265 7472 7927 602c 2060  '`,.`'retry'`, `
+0000dd70: 2773 6b69 7027 602c 206f 7220 6027 7374  'skip'`, or `'st
+0000dd80: 6f70 2760 2e0a 0a54 6865 2065 7861 6d70  op'`...The examp
+0000dd90: 6c65 2062 656c 6f77 2069 7465 7261 7465  le below iterate
+0000dda0: 7320 6f76 6572 2074 6865 2022 7265 6164  s over the "read
+0000ddb0: 2072 6573 706f 6e73 6522 206f 626a 6563   response" objec
+0000ddc0: 742c 2061 6e64 2063 616c 6c73 2060 6163  t, and calls `ac
+0000ddd0: 6b28 2960 0a6f 6e20 7468 6520 2272 6561  k()`.on the "rea
+0000dde0: 6420 7265 7370 6f6e 7365 2220 6f62 6a65  d response" obje
+0000ddf0: 6374 2e20 5468 6520 666f 7220 6c6f 6f70  ct. The for loop
+0000de00: 2062 7265 616b 7320 7768 656e 2077 6520   breaks when we 
+0000de10: 6861 7665 2072 6563 6569 7665 640a 7468  have received.th
+0000de20: 6520 6c61 7374 2065 7665 6e74 2c20 736f  e last event, so
+0000de30: 2074 6861 7420 7765 2063 616e 2063 6f6e   that we can con
+0000de40: 7469 6e75 6520 7769 7468 2074 6865 2065  tinue with the e
+0000de50: 7861 6d70 6c65 7320 6265 6c6f 772e 0a0a  xamples below...
+0000de60: 6060 6070 7974 686f 6e0a 6576 656e 7473  ```python.events
+0000de70: 203d 205b 5d0a 666f 7220 6576 656e 7420   = [].for event 
+0000de80: 696e 2072 6561 645f 7265 7370 3a0a 2020  in read_resp:.  
+0000de90: 2020 6576 656e 7473 2e61 7070 656e 6428    events.append(
+0000dea0: 6576 656e 7429 0a0a 2020 2020 2320 4163  event)..    # Ac
+0000deb0: 6b6e 6f77 6c65 6467 6520 7468 6520 7265  knowledge the re
+0000dec0: 6365 6976 6564 2065 7665 6e74 2e0a 2020  ceived event..  
+0000ded0: 2020 7265 6164 5f72 6571 2e61 636b 2865    read_req.ack(e
+0000dee0: 7665 6e74 5f69 643d 6576 656e 742e 6964  vent_id=event.id
+0000def0: 290a 0a20 2020 2023 2042 7265 616b 2077  )..    # Break w
+0000df00: 6865 6e20 7468 6520 6c61 7374 2065 7665  hen the last eve
+0000df10: 6e74 2068 6173 2062 6565 6e20 7265 6365  nt has been rece
+0000df20: 6976 6564 2e0a 2020 2020 6966 2065 7665  ived..    if eve
+0000df30: 6e74 2e69 6420 3d3d 2065 7665 6e74 3131  nt.id == event11
+0000df40: 2e69 643a 0a20 2020 2020 2020 2062 7265  .id:.        bre
+0000df50: 616b 0a60 6060 0a0a 5468 6520 7265 6365  ak.```..The rece
+0000df60: 6976 6564 2065 7665 6e74 7320 6172 6520  ived events are 
+0000df70: 7468 6520 6576 656e 7473 2077 6520 6170  the events we ap
+0000df80: 7065 6e64 6564 2061 626f 7665 2e0a 0a60  pended above...`
+0000df90: 6060 7079 7468 6f6e 0a61 7373 6572 7420  ``python.assert 
+0000dfa0: 6576 656e 7473 5b2d 3131 5d2e 6964 203d  events[-11].id =
+0000dfb0: 3d20 6576 656e 7431 2e69 640a 6173 7365  = event1.id.asse
+0000dfc0: 7274 2065 7665 6e74 735b 2d31 305d 2e69  rt events[-10].i
+0000dfd0: 6420 3d3d 2065 7665 6e74 322e 6964 0a61  d == event2.id.a
+0000dfe0: 7373 6572 7420 6576 656e 7473 5b2d 395d  ssert events[-9]
+0000dff0: 2e69 6420 3d3d 2065 7665 6e74 332e 6964  .id == event3.id
+0000e000: 0a61 7373 6572 7420 6576 656e 7473 5b2d  .assert events[-
+0000e010: 385d 2e69 6420 3d3d 2065 7665 6e74 342e  8].id == event4.
+0000e020: 6964 0a61 7373 6572 7420 6576 656e 7473  id.assert events
+0000e030: 5b2d 375d 2e69 6420 3d3d 2065 7665 6e74  [-7].id == event
+0000e040: 352e 6964 0a61 7373 6572 7420 6576 656e  5.id.assert even
+0000e050: 7473 5b2d 365d 2e69 6420 3d3d 2065 7665  ts[-6].id == eve
+0000e060: 6e74 362e 6964 0a61 7373 6572 7420 6576  nt6.id.assert ev
+0000e070: 656e 7473 5b2d 355d 2e69 6420 3d3d 2065  ents[-5].id == e
+0000e080: 7665 6e74 372e 6964 0a61 7373 6572 7420  vent7.id.assert 
+0000e090: 6576 656e 7473 5b2d 345d 2e69 6420 3d3d  events[-4].id ==
+0000e0a0: 2065 7665 6e74 382e 6964 0a61 7373 6572   event8.id.asser
+0000e0b0: 7420 6576 656e 7473 5b2d 335d 2e69 6420  t events[-3].id 
+0000e0c0: 3d3d 2065 7665 6e74 392e 6964 0a61 7373  == event9.id.ass
+0000e0d0: 6572 7420 6576 656e 7473 5b2d 325d 2e69  ert events[-2].i
+0000e0e0: 6420 3d3d 2065 7665 6e74 3130 2e69 640a  d == event10.id.
+0000e0f0: 6173 7365 7274 2065 7665 6e74 735b 2d31  assert events[-1
+0000e100: 5d2e 6964 203d 3d20 6576 656e 7431 312e  ].id == event11.
+0000e110: 6964 0a60 6060 0a0a 5468 6520 2272 6561  id.```..The "rea
+0000e120: 6420 7265 7175 6573 7422 206f 626a 6563  d request" objec
+0000e130: 7420 616c 736f 2068 6173 2061 6e20 606e  t also has an `n
+0000e140: 6163 6b28 2960 206d 6574 686f 6420 7468  ack()` method th
+0000e150: 6174 2063 616e 2062 6520 7573 6564 2062  at can be used b
+0000e160: 7920 6120 636f 6e73 756d 6572 0a69 6e20  y a consumer.in 
+0000e170: 6120 6772 6f75 7020 746f 2061 636b 6e6f  a group to ackno
+0000e180: 776c 6564 6765 2074 6f20 7468 6520 7365  wledge to the se
+0000e190: 7276 6572 2074 6861 7420 6974 2068 6173  rver that it has
+0000e1a0: 2066 6169 6c65 6420 7375 6363 6573 7366   failed successf
+0000e1b0: 756c 6c79 2074 6f0a 7072 6f63 6573 7320  ully to.process 
+0000e1c0: 6120 7265 636f 7264 6564 2065 7665 6e74  a recorded event
+0000e1d0: 2e20 5468 6973 2077 696c 6c20 616c 6c6f  . This will allo
+0000e1e0: 7720 7468 6174 2072 6563 6f72 6465 6420  w that recorded 
+0000e1f0: 6576 656e 7420 746f 2062 6520 7265 6365  event to be rece
+0000e200: 6976 6564 0a62 7920 7468 6973 206f 7220  ived.by this or 
+0000e210: 616e 6f74 6865 7220 636f 6e73 756d 6572  another consumer
+0000e220: 2069 6e20 7468 6520 7361 6d65 2067 726f   in the same gro
+0000e230: 7570 2e0a 0a49 7420 6d69 6768 7420 6265  up...It might be
+0000e240: 206d 6f72 6520 7573 6566 756c 2074 6f20   more useful to 
+0000e250: 656e 6361 7073 756c 6174 6520 7468 6520  encapsulate the 
+0000e260: 7265 7175 6573 7420 616e 6420 7265 7370  request and resp
+0000e270: 6f6e 7365 206f 626a 6563 7473 2061 6e64  onse objects and
+0000e280: 2074 6f20 6974 6572 6174 650a 6f76 6572   to iterate.over
+0000e290: 2074 6865 2022 7265 6164 2072 6573 706f   the "read respo
+0000e2a0: 6e73 6522 2069 6e20 6120 7365 7061 7261  nse" in a separa
+0000e2b0: 7465 2074 6872 6561 642c 2074 6f20 6361  te thread, to ca
+0000e2c0: 6c6c 2062 6163 6b20 746f 2061 2068 616e  ll back to a han
+0000e2d0: 646c 6572 2066 756e 6374 696f 6e20 7768  dler function wh
+0000e2e0: 656e 0a61 2072 6563 6f72 6465 6420 6576  en.a recorded ev
+0000e2f0: 656e 7420 6973 2072 6563 6569 7665 642c  ent is received,
+0000e300: 2061 6e64 2063 616c 6c20 6061 636b 2829   and call `ack()
+0000e310: 6020 6966 2074 6865 2068 616e 646c 6572  ` if the handler
+0000e320: 2064 6f65 7320 6e6f 7420 7261 6973 6520   does not raise 
+0000e330: 616e 0a65 7863 6570 7469 6f6e 2c20 616e  an.exception, an
+0000e340: 6420 746f 2063 616c 6c20 606e 6163 6b28  d to call `nack(
+0000e350: 2960 2069 6620 616e 2065 7863 6570 7469  )` if an excepti
+0000e360: 6f6e 2069 7320 7261 6973 6564 2e20 5468  on is raised. Th
+0000e370: 6520 6578 616d 706c 6520 6265 6c6f 7720  e example below 
+0000e380: 7368 6f77 7320 686f 770a 7468 6973 206d  shows how.this m
+0000e390: 6967 6874 2062 6520 646f 6e65 2e0a 0a60  ight be done...`
+0000e3a0: 6060 7079 7468 6f6e 0a66 726f 6d20 7468  ``python.from th
+0000e3b0: 7265 6164 696e 6720 696d 706f 7274 2054  reading import T
+0000e3c0: 6872 6561 640a 0a0a 636c 6173 7320 5375  hread...class Su
+0000e3d0: 6273 6372 6970 7469 6f6e 5265 6164 6572  bscriptionReader
+0000e3e0: 3a0a 2020 2020 6465 6620 5f5f 696e 6974  :.    def __init
+0000e3f0: 5f5f 2873 656c 662c 2063 6c69 656e 742c  __(self, client,
+0000e400: 2067 726f 7570 5f6e 616d 652c 2063 616c   group_name, cal
+0000e410: 6c62 6163 6b29 3a0a 2020 2020 2020 2020  lback):.        
+0000e420: 7365 6c66 2e63 6c69 656e 7420 3d20 636c  self.client = cl
+0000e430: 6965 6e74 0a20 2020 2020 2020 2073 656c  ient.        sel
+0000e440: 662e 6772 6f75 705f 6e61 6d65 203d 2067  f.group_name = g
+0000e450: 726f 7570 5f6e 616d 650a 2020 2020 2020  roup_name.      
+0000e460: 2020 7365 6c66 2e63 616c 6c62 6163 6b20    self.callback 
+0000e470: 3d20 6361 6c6c 6261 636b 0a20 2020 2020  = callback.     
+0000e480: 2020 2073 656c 662e 7468 7265 6164 203d     self.thread =
+0000e490: 2054 6872 6561 6428 7461 7267 6574 3d73   Thread(target=s
+0000e4a0: 656c 662e 7265 6164 5f73 7562 7363 7269  elf.read_subscri
+0000e4b0: 7074 696f 6e2c 2064 6165 6d6f 6e3d 5472  ption, daemon=Tr
+0000e4c0: 7565 290a 2020 2020 2020 2020 7365 6c66  ue).        self
+0000e4d0: 2e65 7272 6f72 203d 204e 6f6e 650a 0a20  .error = None.. 
+0000e4e0: 2020 2064 6566 2073 7461 7274 2873 656c     def start(sel
+0000e4f0: 6629 3a0a 2020 2020 2020 2020 7365 6c66  f):.        self
+0000e500: 2e74 6872 6561 642e 7374 6172 7428 290a  .thread.start().
+0000e510: 0a20 2020 2064 6566 206a 6f69 6e28 7365  .    def join(se
+0000e520: 6c66 293a 0a20 2020 2020 2020 2073 656c  lf):.        sel
+0000e530: 662e 7468 7265 6164 2e6a 6f69 6e28 290a  f.thread.join().
+0000e540: 0a20 2020 2064 6566 2072 6561 645f 7375  .    def read_su
+0000e550: 6273 6372 6970 7469 6f6e 2873 656c 6629  bscription(self)
+0000e560: 3a0a 2020 2020 2020 2020 7265 712c 2072  :.        req, r
+0000e570: 6573 7020 3d20 7365 6c66 2e63 6c69 656e  esp = self.clien
+0000e580: 742e 7265 6164 5f73 7562 7363 7269 7074  t.read_subscript
+0000e590: 696f 6e28 6772 6f75 705f 6e61 6d65 3d73  ion(group_name=s
+0000e5a0: 656c 662e 6772 6f75 705f 6e61 6d65 290a  elf.group_name).
+0000e5b0: 2020 2020 2020 2020 666f 7220 6576 656e          for even
+0000e5c0: 7420 696e 2072 6573 703a 0a20 2020 2020  t in resp:.     
+0000e5d0: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
+0000e5e0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000e5f0: 2e63 616c 6c62 6163 6b28 6576 656e 7429  .callback(event)
+0000e600: 0a20 2020 2020 2020 2020 2020 2065 7863  .            exc
+0000e610: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
+0000e620: 2065 3a0a 2020 2020 2020 2020 2020 2020   e:.            
+0000e630: 2020 2020 2320 7265 712e 6e61 636b 2865      # req.nack(e
+0000e640: 7665 6e74 2e69 6429 2020 2320 6e6f 7420  vent.id)  # not 
+0000e650: 7965 7420 696d 706c 656d 656e 7465 642e  yet implemented.
+0000e660: 2e2e 2e0a 2020 2020 2020 2020 2020 2020  ....            
+0000e670: 2020 2020 7365 6c66 2e65 7272 6f72 203d      self.error =
+0000e680: 2065 0a20 2020 2020 2020 2020 2020 2020   e.             
+0000e690: 2020 2062 7265 616b 0a20 2020 2020 2020     break.       
+0000e6a0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0000e6b0: 2020 2020 2020 2020 2020 2072 6571 2e61             req.a
+0000e6c0: 636b 2865 7665 6e74 2e69 6429 0a0a 0a23  ck(event.id)...#
+0000e6d0: 2043 7265 6174 6520 616e 6f74 6865 7220   Create another 
+0000e6e0: 7065 7273 6973 7465 6e74 2073 7562 7363  persistent subsc
+0000e6f0: 7269 7074 696f 6e2e 0a67 726f 7570 5f6e  ription..group_n
+0000e700: 616d 6520 3d20 6622 6772 6f75 702d 7b75  ame = f"group-{u
+0000e710: 7569 6434 2829 7d22 0a63 6c69 656e 742e  uid4()}".client.
+0000e720: 6372 6561 7465 5f73 7562 7363 7269 7074  create_subscript
+0000e730: 696f 6e28 6772 6f75 705f 6e61 6d65 3d67  ion(group_name=g
+0000e740: 726f 7570 5f6e 616d 6529 0a0a 6576 656e  roup_name)..even
+0000e750: 7473 203d 205b 5d0a 0a64 6566 2068 616e  ts = []..def han
+0000e760: 646c 655f 6576 656e 7428 6576 656e 7429  dle_event(event)
+0000e770: 3a0a 2020 2020 6576 656e 7473 2e61 7070  :.    events.app
+0000e780: 656e 6428 6576 656e 7429 0a20 2020 2069  end(event).    i
+0000e790: 6620 6576 656e 742e 6964 203d 3d20 6576  f event.id == ev
+0000e7a0: 656e 7431 312e 6964 3a0a 2020 2020 2020  ent11.id:.      
+0000e7b0: 2020 7261 6973 6520 4578 6365 7074 696f    raise Exceptio
+0000e7c0: 6e28 290a 0a0a 7265 6164 6572 203d 2053  n()...reader = S
+0000e7d0: 7562 7363 7269 7074 696f 6e52 6561 6465  ubscriptionReade
+0000e7e0: 7228 0a20 2020 2063 6c69 656e 743d 636c  r(.    client=cl
+0000e7f0: 6965 6e74 2c0a 2020 2020 6772 6f75 705f  ient,.    group_
+0000e800: 6e61 6d65 3d67 726f 7570 5f6e 616d 652c  name=group_name,
+0000e810: 0a20 2020 2063 616c 6c62 6163 6b3d 6861  .    callback=ha
+0000e820: 6e64 6c65 5f65 7665 6e74 0a29 0a0a 7265  ndle_event.)..re
+0000e830: 6164 6572 2e73 7461 7274 2829 0a72 6561  ader.start().rea
+0000e840: 6465 722e 6a6f 696e 2829 0a0a 6173 7365  der.join()..asse
+0000e850: 7274 2065 7665 6e74 735b 2d31 5d2e 6964  rt events[-1].id
+0000e860: 203d 3d20 6576 656e 7431 312e 6964 0a60   == event11.id.`
+0000e870: 6060 0a0a 506c 6561 7365 206e 6f74 652c  ``..Please note,
+0000e880: 2077 6865 6e20 7072 6f63 6573 7369 6e67   when processing
+0000e890: 2065 7665 6e74 7320 696e 2061 2064 6f77   events in a dow
+0000e8a0: 6e73 7472 6561 6d20 636f 6d70 6f6e 656e  nstream componen
+0000e8b0: 742c 2074 6865 2063 6f6d 6d69 7420 706f  t, the commit po
+0000e8c0: 7369 7469 6f6e 206f 660a 7468 6520 6c61  sition of.the la
+0000e8d0: 7374 2073 7563 6365 7373 6675 6c6c 7920  st successfully 
+0000e8e0: 7072 6f63 6573 7365 6420 6576 656e 7420  processed event 
+0000e8f0: 6973 2075 7365 6675 6c6c 7920 7265 636f  is usefully reco
+0000e900: 7264 6564 2062 7920 7468 6520 646f 776e  rded by the down
+0000e910: 7374 7265 616d 2063 6f6d 706f 6e65 6e74  stream component
+0000e920: 0a73 6f20 7468 6174 2074 6865 2063 6f6d  .so that the com
+0000e930: 6d69 7420 706f 7369 7469 6f6e 2063 616e  mit position can
+0000e940: 2062 6520 6465 7465 726d 696e 6564 2062   be determined b
+0000e950: 7920 7468 6520 646f 776e 7374 7265 616d  y the downstream
+0000e960: 2063 6f6d 706f 6e65 6e74 2066 726f 6d20   component from 
+0000e970: 6974 7320 6f77 6e0a 7265 636f 7264 6564  its own.recorded
+0000e980: 2077 6865 6e20 6974 2069 7320 7265 7374   when it is rest
+0000e990: 6172 7465 642e 2054 6869 7320 636f 6d6d  arted. This comm
+0000e9a0: 6974 2070 6f73 6974 696f 6e20 6361 6e20  it position can 
+0000e9b0: 6265 2075 7365 6420 746f 2073 7065 6369  be used to speci
+0000e9c0: 6679 2074 6865 2063 6f6d 6d69 740a 706f  fy the commit.po
+0000e9d0: 7369 7469 6f6e 2066 726f 6d20 7768 6963  sition from whic
+0000e9e0: 6820 746f 2073 7562 7363 7269 6265 2e20  h to subscribe. 
+0000e9f0: 5369 6e63 6520 7468 6973 2063 6f6d 6d69  Since this commi
+0000ea00: 7420 706f 7369 7469 6f6e 2072 6570 7265  t position repre
+0000ea10: 7365 6e74 7320 7468 6520 706f 7369 7469  sents the positi
+0000ea20: 6f6e 206f 660a 7468 6520 6c61 7374 2073  on of.the last s
+0000ea30: 7563 6365 7373 6675 6c6c 7920 7072 6f63  uccessfully proc
+0000ea40: 6573 7365 6420 6576 656e 7420 696e 2061  essed event in a
+0000ea50: 2064 6f77 6e73 7472 6561 6d20 636f 6d70   downstream comp
+0000ea60: 6f6e 656e 742c 2073 6f20 6974 2077 696c  onent, so it wil
+0000ea70: 6c20 6265 2075 7375 616c 2074 6f0a 7761  l be usual to.wa
+0000ea80: 6e74 2074 6f20 7265 6164 2066 726f 6d20  nt to read from 
+0000ea90: 7468 6520 6e65 7874 2065 7665 6e74 2061  the next event a
+0000eaa0: 6674 6572 2074 6869 7320 706f 7369 7469  fter this positi
+0000eab0: 6f6e 2c20 6265 6361 7573 6520 7468 6174  on, because that
+0000eac0: 2069 7320 7468 6520 6e65 7874 2065 7665   is the next eve
+0000ead0: 6e74 0a74 6861 7420 6e65 6564 7320 746f  nt.that needs to
+0000eae0: 2062 6520 7072 6f63 6573 7365 642e 2048   be processed. H
+0000eaf0: 6f77 6576 6572 2c20 7768 656e 2073 7562  owever, when sub
+0000eb00: 7363 7269 6269 6e67 2066 6f72 2065 7665  scribing for eve
+0000eb10: 6e74 7320 7573 696e 6720 6120 7065 7273  nts using a pers
+0000eb20: 6973 7465 6e74 0a73 7562 7363 7269 7074  istent.subscript
+0000eb30: 696f 6e20 696e 2045 7665 6e74 5374 6f72  ion in EventStor
+0000eb40: 6544 422c 2074 6865 2065 7665 6e74 2061  eDB, the event a
+0000eb50: 7420 7468 6520 7370 6563 6966 6965 6420  t the specified 
+0000eb60: 636f 6d6d 6974 2070 6f73 6974 696f 6e20  commit position 
+0000eb70: 4d41 5920 6265 2072 6574 7572 6e65 640a  MAY be returned.
+0000eb80: 6173 2074 6865 2066 6972 7374 2065 7665  as the first eve
+0000eb90: 6e74 2069 6e20 7468 6520 7265 6365 6976  nt in the receiv
+0000eba0: 6564 2073 6571 7565 6e63 6520 6f66 2072  ed sequence of r
+0000ebb0: 6563 6f72 6465 6420 6576 656e 7473 2c20  ecorded events, 
+0000ebc0: 616e 6420 736f 2069 7420 6d61 790a 6265  and so it may.be
+0000ebd0: 206e 6563 6573 7361 7279 2074 6f20 6368   necessary to ch
+0000ebe0: 6563 6b20 7468 6520 636f 6d6d 6974 2070  eck the commit p
+0000ebf0: 6f73 6974 696f 6e20 6f66 2074 6865 2072  osition of the r
+0000ec00: 6563 6569 7665 6420 6576 656e 7473 2061  eceived events a
+0000ec10: 6e64 2074 6f20 6469 7363 6172 640a 616e  nd to discard.an
+0000ec20: 7920 2072 6563 6f72 6465 6420 6576 656e  y  recorded even
+0000ec30: 7420 6f62 6a65 6374 2074 6861 7420 6861  t object that ha
+0000ec40: 7320 6120 636f 6d6d 6974 2070 6f73 6974  s a commit posit
+0000ec50: 696f 6e20 6571 7561 6c20 746f 2074 6865  ion equal to the
+0000ec60: 2063 6f6d 6d69 7420 706f 7369 7469 6f6e   commit position
+0000ec70: 0a73 7065 6369 6669 6564 2069 6e20 7468  .specified in th
+0000ec80: 6520 7265 7175 6573 742e 0a0a 5768 696c  e request...Whil
+0000ec90: 7374 2074 6865 7265 2061 7265 2073 6f6d  st there are som
+0000eca0: 6520 6164 7661 6e74 6167 6573 206f 6620  e advantages of 
+0000ecb0: 7065 7273 6973 7465 6e74 2073 7562 7363  persistent subsc
+0000ecc0: 7269 7074 696f 6e73 2c20 696e 2070 6172  riptions, in par
+0000ecd0: 7469 6375 6c61 7220 7468 650a 7072 6f63  ticular the.proc
+0000ece0: 6573 7369 6e67 206f 6620 7265 636f 7264  essing of record
+0000ecf0: 6564 2065 7665 6e74 7320 6279 2061 2067  ed events by a g
+0000ed00: 726f 7570 206f 6620 636f 6e73 756d 6572  roup of consumer
+0000ed10: 732c 2062 7920 7472 6163 6b69 6e67 2069  s, by tracking i
+0000ed20: 6e20 7468 650a 7570 7374 7265 616d 2073  n the.upstream s
+0000ed30: 6572 7665 7220 7468 6520 706f 7369 7469  erver the positi
+0000ed40: 6f6e 2069 6e20 7468 6520 636f 6d6d 6974  on in the commit
+0000ed50: 2073 6571 7565 6e63 6520 6f66 2065 7665   sequence of eve
+0000ed60: 6e74 7320 7468 6174 2068 6176 6520 6265  nts that have be
+0000ed70: 656e 2070 726f 6365 7373 6564 2c0a 7468  en processed,.th
+0000ed80: 6572 6520 6973 2061 2064 616e 6765 7220  ere is a danger 
+0000ed90: 6f66 2022 6475 616c 2077 7269 7469 6e67  of "dual writing
+0000eda0: 2220 696e 2074 6865 2063 6f6e 7375 6d70  " in the consump
+0000edb0: 7469 6f6e 206f 6620 6576 656e 7473 2e20  tion of events. 
+0000edc0: 5265 6c69 6162 696c 6974 790a 696e 2070  Reliability.in p
+0000edd0: 726f 6365 7373 696e 6720 6f66 2072 6563  rocessing of rec
+0000ede0: 6f72 6465 6420 6576 656e 7473 2062 7920  orded events by 
+0000edf0: 6120 6772 6f75 7020 6f66 2063 6f6e 7375  a group of consu
+0000ee00: 6d65 7273 2077 696c 6c20 7265 6c79 2069  mers will rely i
+0000ee10: 6e73 7465 6164 206f 6e0a 6964 656d 706f  nstead on.idempo
+0000ee20: 7465 6e74 2068 616e 646c 696e 6720 6f66  tent handling of
+0000ee30: 2064 7570 6c69 6361 7465 206d 6573 7361   duplicate messa
+0000ee40: 6765 732c 2061 6e64 2072 6573 696c 6965  ges, and resilie
+0000ee50: 6e63 6520 746f 206f 7574 2d6f 662d 6f72  nce to out-of-or
+0000ee60: 6465 7220 6465 6c69 7665 7279 2e0a 0a23  der delivery...#
+0000ee70: 2323 2047 6574 2073 7562 7363 7269 7074  ## Get subscript
+0000ee80: 696f 6e20 696e 666f 0a0a 2a72 6571 7569  ion info..*requi
+0000ee90: 7265 7320 6c65 6164 6572 2a0a 0a54 6865  res leader*..The
+0000eea0: 2060 6765 745f 7375 6273 6372 6970 7469   `get_subscripti
+0000eeb0: 6f6e 5f69 6e66 6f28 2960 206d 6574 686f  on_info()` metho
+0000eec0: 6420 6361 6e20 6265 2075 7365 6420 746f  d can be used to
+0000eed0: 2067 6574 2069 6e66 6f72 6d61 7469 6f6e   get information
+0000eee0: 2066 6f72 2061 0a70 6572 7369 7374 656e   for a.persisten
+0000eef0: 7420 7375 6273 6372 6970 7469 6f6e 2e0a  t subscription..
+0000ef00: 0a54 6869 7320 6d65 7468 6f64 2068 6173  .This method has
+0000ef10: 206f 6e65 2072 6571 7569 7265 6420 6172   one required ar
+0000ef20: 6775 6d65 6e74 2c20 6067 726f 7570 5f6e  gument, `group_n
+0000ef30: 616d 6560 2c20 7768 6963 680a 7368 6f75  ame`, which.shou
+0000ef40: 6c64 206d 6174 6368 2074 6865 2076 616c  ld match the val
+0000ef50: 7565 206f 6620 7468 6520 6172 6775 6d65  ue of the argume
+0000ef60: 6e74 2075 7365 6420 7768 656e 2063 616c  nt used when cal
+0000ef70: 6c69 6e67 2060 6372 6561 7465 5f73 7562  ling `create_sub
+0000ef80: 7363 7269 7074 696f 6e28 2960 2e0a 0a54  scription()`...T
+0000ef90: 6869 7320 6d65 7468 6f64 2061 6c73 6f20  his method also 
+0000efa0: 7461 6b65 7320 616e 206f 7074 696f 6e61  takes an optiona
+0000efb0: 6c20 6074 696d 656f 7574 6020 6172 6775  l `timeout` argu
+0000efc0: 6d65 6e74 2c20 7468 6174 0a69 7320 6578  ment, that.is ex
+0000efd0: 7065 6374 6564 2074 6f20 6265 2061 2050  pected to be a P
+0000efe0: 7974 686f 6e20 6066 6c6f 6174 602c 2077  ython `float`, w
+0000eff0: 6869 6368 2073 6574 7320 6120 6465 6164  hich sets a dead
+0000f000: 6c69 6e65 0a66 6f72 2074 6865 2063 6f6d  line.for the com
+0000f010: 706c 6574 696f 6e20 6f66 2074 6865 2067  pletion of the g
+0000f020: 5250 4320 6f70 6572 6174 696f 6e2e 0a0a  RPC operation...
+0000f030: 6060 6070 7974 686f 6e0a 7375 6273 6372  ```python.subscr
+0000f040: 6970 7469 6f6e 5f69 6e66 6f20 3d20 636c  iption_info = cl
+0000f050: 6965 6e74 2e67 6574 5f73 7562 7363 7269  ient.get_subscri
+0000f060: 7074 696f 6e5f 696e 666f 280a 2020 2020  ption_info(.    
+0000f070: 6772 6f75 705f 6e61 6d65 3d67 726f 7570  group_name=group
+0000f080: 5f6e 616d 652c 0a29 0a60 6060 0a0a 5468  _name,.).```..Th
+0000f090: 6520 7265 7475 726e 6564 2076 616c 7565  e returned value
+0000f0a0: 2069 7320 6120 6053 7562 7363 7269 7074   is a `Subscript
+0000f0b0: 696f 6e49 6e66 6f60 206f 626a 6563 742e  ionInfo` object.
+0000f0c0: 0a0a 2323 2320 4c69 7374 2073 7562 7363  ..### List subsc
+0000f0d0: 7269 7074 696f 6e73 0a0a 2a72 6571 7569  riptions..*requi
+0000f0e0: 7265 7320 6c65 6164 6572 2a0a 0a54 6865  res leader*..The
+0000f0f0: 2060 6c69 7374 5f73 7562 7363 7269 7074   `list_subscript
+0000f100: 696f 6e73 2829 6020 6d65 7468 6f64 2063  ions()` method c
+0000f110: 616e 2062 6520 7573 6564 2074 6f20 6765  an be used to ge
+0000f120: 7420 696e 666f 726d 6174 696f 6e20 666f  t information fo
+0000f130: 7220 616c 6c0a 6578 6973 7469 6e67 2070  r all.existing p
+0000f140: 6572 7369 7374 656e 7420 7375 6273 6372  ersistent subscr
+0000f150: 6970 7469 6f6e 732e 0a0a 5468 6973 206d  iptions...This m
+0000f160: 6574 686f 6420 7461 6b65 7320 616e 206f  ethod takes an o
+0000f170: 7074 696f 6e61 6c20 6074 696d 656f 7574  ptional `timeout
+0000f180: 6020 6172 6775 6d65 6e74 2c20 7468 6174  ` argument, that
+0000f190: 0a69 7320 6578 7065 6374 6564 2074 6f20  .is expected to 
+0000f1a0: 6265 2061 2050 7974 686f 6e20 6066 6c6f  be a Python `flo
+0000f1b0: 6174 602c 2077 6869 6368 2073 6574 7320  at`, which sets 
+0000f1c0: 6120 6465 6164 6c69 6e65 0a66 6f72 2074  a deadline.for t
+0000f1d0: 6865 2063 6f6d 706c 6574 696f 6e20 6f66  he completion of
+0000f1e0: 2074 6865 2067 5250 4320 6f70 6572 6174   the gRPC operat
+0000f1f0: 696f 6e2e 0a0a 6060 6070 7974 686f 6e0a  ion...```python.
+0000f200: 7375 6273 6372 6970 7469 6f6e 7320 3d20  subscriptions = 
+0000f210: 636c 6965 6e74 2e6c 6973 745f 7375 6273  client.list_subs
+0000f220: 6372 6970 7469 6f6e 7328 290a 6060 600a  criptions().```.
+0000f230: 0a54 6865 2072 6574 7572 6e65 6420 7661  .The returned va
+0000f240: 6c75 6520 6973 2061 206c 6973 7420 6f66  lue is a list of
+0000f250: 2060 5375 6273 6372 6970 7469 6f6e 496e   `SubscriptionIn
+0000f260: 666f 6020 6f62 6a65 6374 732e 0a0a 2323  fo` objects...##
+0000f270: 2320 4465 6c65 7465 2073 7562 7363 7269  # Delete subscri
+0000f280: 7074 696f 6e0a 0a2a 7265 7175 6972 6573  ption..*requires
+0000f290: 206c 6561 6465 722a 0a0a 5468 6520 6064   leader*..The `d
+0000f2a0: 656c 6574 655f 7375 6273 6372 6970 7469  elete_subscripti
+0000f2b0: 6f6e 2829 6020 6d65 7468 6f64 2063 616e  on()` method can
+0000f2c0: 2062 6520 7573 6564 2074 6f20 6465 6c65   be used to dele
+0000f2d0: 7465 2061 2070 6572 7369 7374 656e 740a  te a persistent.
+0000f2e0: 7375 6273 6372 6970 7469 6f6e 2e0a 0a54  subscription...T
+0000f2f0: 6869 7320 6d65 7468 6f64 2068 6173 206f  his method has o
+0000f300: 6e65 2072 6571 7569 7265 6420 6172 6775  ne required argu
+0000f310: 6d65 6e74 2c20 6067 726f 7570 5f6e 616d  ment, `group_nam
+0000f320: 6560 2c20 7768 6963 680a 7368 6f75 6c64  e`, which.should
+0000f330: 206d 6174 6368 2074 6865 2076 616c 7565   match the value
+0000f340: 206f 6620 6172 6775 6d65 6e74 2075 7365   of argument use
+0000f350: 6420 7768 656e 2063 616c 6c69 6e67 2060  d when calling `
+0000f360: 6372 6561 7465 5f73 7562 7363 7269 7074  create_subscript
+0000f370: 696f 6e28 2960 2e0a 0a54 6869 7320 6d65  ion()`...This me
+0000f380: 7468 6f64 2061 6c73 6f20 7461 6b65 7320  thod also takes 
+0000f390: 616e 206f 7074 696f 6e61 6c20 6074 696d  an optional `tim
+0000f3a0: 656f 7574 6020 6172 6775 6d65 6e74 2c20  eout` argument, 
+0000f3b0: 7468 6174 0a69 7320 6578 7065 6374 6564  that.is expected
+0000f3c0: 2074 6f20 6265 2061 2050 7974 686f 6e20   to be a Python 
+0000f3d0: 6066 6c6f 6174 602c 2077 6869 6368 2073  `float`, which s
+0000f3e0: 6574 7320 6120 6465 6164 6c69 6e65 0a66  ets a deadline.f
+0000f3f0: 6f72 2074 6865 2063 6f6d 706c 6574 696f  or the completio
+0000f400: 6e20 6f66 2074 6865 2067 5250 4320 6f70  n of the gRPC op
+0000f410: 6572 6174 696f 6e2e 0a0a 6060 6070 7974  eration...```pyt
+0000f420: 686f 6e0a 636c 6965 6e74 2e64 656c 6574  hon.client.delet
+0000f430: 655f 7375 6273 6372 6970 7469 6f6e 280a  e_subscription(.
+0000f440: 2020 2020 6772 6f75 705f 6e61 6d65 3d67      group_name=g
+0000f450: 726f 7570 5f6e 616d 652c 0a29 0a60 6060  roup_name,.).```
+0000f460: 0a0a 2323 2320 4372 6561 7465 2073 7472  ..### Create str
+0000f470: 6561 6d20 7375 6273 6372 6970 7469 6f6e  eam subscription
+0000f480: 0a0a 2a72 6571 7569 7265 7320 6c65 6164  ..*requires lead
+0000f490: 6572 2a0a 0a54 6865 2060 6372 6561 7465  er*..The `create
+0000f4a0: 5f73 7472 6561 6d5f 7375 6273 6372 6970  _stream_subscrip
+0000f4b0: 7469 6f6e 2829 6020 6d65 7468 6f64 2063  tion()` method c
+0000f4c0: 616e 2062 6520 7573 6564 2074 6f20 6372  an be used to cr
+0000f4d0: 6561 7465 2061 2070 6572 7369 7374 656e  eate a persisten
+0000f4e0: 740a 7375 6273 6372 6970 7469 6f6e 2066  t.subscription f
+0000f4f0: 6f72 2061 2073 7472 6561 6d2e 0a0a 5468  or a stream...Th
+0000f500: 6973 206d 6574 686f 6420 6861 7320 7477  is method has tw
+0000f510: 6f20 7265 7175 6972 6564 2061 7267 756d  o required argum
+0000f520: 656e 7473 2c20 6067 726f 7570 5f6e 616d  ents, `group_nam
+0000f530: 6560 2061 6e64 2060 7374 7265 616d 5f6e  e` and `stream_n
+0000f540: 616d 6560 2e20 5468 650a 6067 726f 7570  ame`. The.`group
+0000f550: 5f6e 616d 6560 2061 7267 756d 656e 7420  _name` argument 
+0000f560: 6e61 6d65 7320 7468 6520 6772 6f75 7020  names the group 
+0000f570: 6f66 2063 6f6e 7375 6d65 7273 2074 6861  of consumers tha
+0000f580: 7420 7769 6c6c 2072 6563 6569 7665 2065  t will receive e
+0000f590: 7665 6e74 730a 6672 6f6d 2074 6869 7320  vents.from this 
+0000f5a0: 7375 6273 6372 6970 7469 6f6e 2e20 5468  subscription. Th
+0000f5b0: 6520 6073 7472 6561 6d5f 6e61 6d65 6020  e `stream_name` 
+0000f5c0: 6172 6775 6d65 6e74 2073 7065 6369 6669  argument specifi
+0000f5d0: 6573 2077 6869 6368 2073 7472 6561 6d0a  es which stream.
+0000f5e0: 7468 6520 7375 6273 6372 6970 7469 6f6e  the subscription
+0000f5f0: 2077 696c 6c20 666f 6c6c 6f77 2e20 5468   will follow. Th
+0000f600: 6520 7661 6c75 6573 206f 6620 626f 7468  e values of both
+0000f610: 2074 6865 7365 2061 7267 756d 656e 7473   these arguments
+0000f620: 2061 7265 2065 7870 6563 7465 640a 746f   are expected.to
+0000f630: 2062 6520 5079 7468 6f6e 2060 7374 7260   be Python `str`
+0000f640: 206f 626a 6563 7473 2e0a 0a54 6865 206d   objects...The m
+0000f650: 6574 686f 6420 616c 736f 2074 616b 6573  ethod also takes
+0000f660: 2066 6f75 7220 6f70 7469 6f6e 616c 2061   four optional a
+0000f670: 7267 756d 656e 7473 2c20 6073 7472 6561  rguments, `strea
+0000f680: 6d5f 706f 7369 7469 6f6e 602c 2060 6672  m_position`, `fr
+0000f690: 6f6d 5f65 6e64 602c 0a60 636f 6e73 756d  om_end`,.`consum
+0000f6a0: 6572 5f73 7472 6174 6567 7960 2c20 616e  er_strategy`, an
+0000f6b0: 6420 6074 696d 656f 7574 602e 0a0a 5468  d `timeout`...Th
+0000f6c0: 6973 206f 7074 696f 6e61 6c20 6073 7472  is optional `str
+0000f6d0: 6561 6d5f 706f 7369 7469 6f6e 6020 6172  eam_position` ar
+0000f6e0: 6775 6d65 6e74 2073 7065 6369 6669 6573  gument specifies
+0000f6f0: 2061 2073 7472 6561 6d20 706f 7369 7469   a stream positi
+0000f700: 6f6e 2066 726f 6d0a 7768 6963 6820 746f  on from.which to
+0000f710: 2073 7562 7363 7269 6265 2e20 5468 6520   subscribe. The 
+0000f720: 7265 636f 7264 6564 2065 7665 6e74 2061  recorded event a
+0000f730: 7420 7468 6973 2073 7472 6561 6d0a 706f  t this stream.po
+0000f740: 7369 7469 6f6e 2077 696c 6c20 6265 2072  sition will be r
+0000f750: 6563 6569 7665 6420 7768 656e 2072 6561  eceived when rea
+0000f760: 6469 6e67 2074 6865 2073 7562 7363 7269  ding the subscri
+0000f770: 7074 696f 6e2e 0a0a 5468 6973 206f 7074  ption...This opt
+0000f780: 696f 6e61 6c20 6066 726f 6d5f 656e 6460  ional `from_end`
+0000f790: 2061 7267 756d 656e 7420 6973 2061 2050   argument is a P
+0000f7a0: 7974 686f 6e20 6062 6f6f 6c60 2e0a 4279  ython `bool`..By
+0000f7b0: 2064 6566 6175 6c74 2c20 7468 6520 7661   default, the va
+0000f7c0: 6c75 6520 6f66 2074 6869 7320 6172 6775  lue of this argu
+0000f7d0: 6d65 6e74 2069 7320 4661 6c73 652e 2049  ment is False. I
+0000f7e0: 6620 7468 6973 2061 7267 756d 656e 7420  f this argument 
+0000f7f0: 6973 2073 6574 0a74 6f20 6120 5472 7565  is set.to a True
+0000f800: 2076 616c 7565 2c20 7265 6164 696e 6720   value, reading 
+0000f810: 6672 6f6d 2074 6865 2073 7562 7363 7269  from the subscri
+0000f820: 7074 696f 6e20 7769 6c6c 2072 6563 6569  ption will recei
+0000f830: 7665 206f 6e6c 7920 6576 656e 7473 0a72  ve only events.r
+0000f840: 6563 6f72 6465 6420 6166 7465 7220 7468  ecorded after th
+0000f850: 6520 7375 6273 6372 6970 7469 6f6e 2077  e subscription w
+0000f860: 6173 2063 7265 6174 6564 2e20 5468 6174  as created. That
+0000f870: 2069 732c 2069 7420 6973 206e 6f74 2069   is, it is not i
+0000f880: 6e63 6c75 7369 7665 0a6f 6620 7468 6520  nclusive.of the 
+0000f890: 6375 7272 656e 7420 7374 7265 616d 2070  current stream p
+0000f8a0: 6f73 6974 696f 6e2e 0a0a 5468 6520 6f70  osition...The op
+0000f8b0: 7469 6f6e 616c 2060 636f 6e73 756d 6572  tional `consumer
+0000f8c0: 5f73 7472 6174 6567 7960 2061 7267 756d  _strategy` argum
+0000f8d0: 656e 7420 6973 2061 2050 7974 686f 6e20  ent is a Python 
+0000f8e0: 6073 7472 6020 7468 6174 2064 6566 696e  `str` that defin
+0000f8f0: 6573 0a74 6865 2063 6f6e 7375 6d65 7220  es.the consumer 
+0000f900: 7374 7261 7465 6779 2066 6f72 2074 6869  strategy for thi
+0000f910: 7320 7065 7273 6973 7465 6e74 2073 7562  s persistent sub
+0000f920: 7363 7269 7074 696f 6e2e 2054 6865 2076  scription. The v
+0000f930: 616c 7565 206f 6620 7468 6973 2061 7267  alue of this arg
+0000f940: 756d 656e 740a 6361 6e20 6265 2060 2744  ument.can be `'D
+0000f950: 6973 7061 7463 6854 6f53 696e 676c 6527  ispatchToSingle'
+0000f960: 602c 2060 2752 6f75 6e64 526f 6269 6e27  `, `'RoundRobin'
+0000f970: 602c 2060 2750 696e 6e65 6427 602c 206f  `, `'Pinned'`, o
+0000f980: 7220 6027 5069 6e6e 6564 4279 436f 7272  r `'PinnedByCorr
+0000f990: 656c 6174 696f 6e27 602e 2054 6865 0a64  elation'`. The.d
+0000f9a0: 6566 6175 6c74 2076 616c 7565 2069 7320  efault value is 
+0000f9b0: 6027 4469 7370 6174 6368 546f 5369 6e67  `'DispatchToSing
+0000f9c0: 6c65 2760 2e0a 0a54 6869 7320 6d65 7468  le'`...This meth
+0000f9d0: 6f64 2061 6c73 6f20 7461 6b65 7320 616e  od also takes an
+0000f9e0: 206f 7074 696f 6e61 6c20 6074 696d 656f   optional `timeo
+0000f9f0: 7574 6020 6172 6775 6d65 6e74 2c20 7468  ut` argument, th
+0000fa00: 6174 0a69 7320 6578 7065 6374 6564 2074  at.is expected t
+0000fa10: 6f20 6265 2061 2050 7974 686f 6e20 6066  o be a Python `f
+0000fa20: 6c6f 6174 602c 2077 6869 6368 2073 6574  loat`, which set
+0000fa30: 7320 6120 6465 6164 6c69 6e65 0a66 6f72  s a deadline.for
+0000fa40: 2074 6865 2063 6f6d 706c 6574 696f 6e20   the completion 
+0000fa50: 6f66 2074 6865 2067 5250 4320 6f70 6572  of the gRPC oper
+0000fa60: 6174 696f 6e2e 0a0a 5468 6973 206d 6574  ation...This met
+0000fa70: 686f 6420 646f 6573 206e 6f74 2072 6574  hod does not ret
+0000fa80: 7572 6e20 6120 7661 6c75 652e 2045 7665  urn a value. Eve
+0000fa90: 6e74 7320 6361 6e20 6265 2072 6563 6569  nts can be recei
+0000faa0: 7665 6420 6279 2069 7465 7261 7469 6e67  ved by iterating
+0000fab0: 0a6f 7665 7220 7468 6520 7661 6c75 6520  .over the value 
+0000fac0: 7265 7475 726e 6564 2062 7920 6361 6c6c  returned by call
+0000fad0: 696e 6720 6072 6561 645f 7374 7265 616d  ing `read_stream
+0000fae0: 5f73 7562 7363 7269 7074 696f 6e28 2960  _subscription()`
+0000faf0: 2028 7365 6520 6265 6c6f 7729 2e0a 0a54   (see below)...T
+0000fb00: 6865 2065 7861 6d70 6c65 2062 656c 6f77  he example below
+0000fb10: 2063 7265 6174 6573 2061 2070 6572 7369   creates a persi
+0000fb20: 7374 656e 7420 7374 7265 616d 2073 7562  stent stream sub
+0000fb30: 7363 7269 7074 696f 6e20 6672 6f6d 2074  scription from t
+0000fb40: 6865 2073 7461 7274 206f 6620 7468 6520  he start of the 
+0000fb50: 7374 7265 616d 2e0a 0a60 6060 7079 7468  stream...```pyth
+0000fb60: 6f6e 0a23 2043 7265 6174 6520 6120 7065  on.# Create a pe
+0000fb70: 7273 6973 7465 6e74 2073 7472 6561 6d20  rsistent stream 
+0000fb80: 7375 6273 6372 6970 7469 6f6e 2066 726f  subscription fro
+0000fb90: 6d20 7374 6172 7420 6f66 2074 6865 2073  m start of the s
+0000fba0: 7472 6561 6d2e 0a67 726f 7570 5f6e 616d  tream..group_nam
+0000fbb0: 6531 203d 2066 2267 726f 7570 2d7b 7575  e1 = f"group-{uu
+0000fbc0: 6964 3428 297d 220a 636c 6965 6e74 2e63  id4()}".client.c
+0000fbd0: 7265 6174 655f 7374 7265 616d 5f73 7562  reate_stream_sub
+0000fbe0: 7363 7269 7074 696f 6e28 0a20 2020 2067  scription(.    g
+0000fbf0: 726f 7570 5f6e 616d 653d 6772 6f75 705f  roup_name=group_
+0000fc00: 6e61 6d65 312c 0a20 2020 2073 7472 6561  name1,.    strea
+0000fc10: 6d5f 6e61 6d65 3d73 7472 6561 6d5f 6e61  m_name=stream_na
+0000fc20: 6d65 322c 0a29 0a60 6060 0a0a 5468 6520  me2,.).```..The 
+0000fc30: 6578 616d 706c 6520 6265 6c6f 7720 6372  example below cr
+0000fc40: 6561 7465 7320 6120 7065 7273 6973 7465  eates a persiste
+0000fc50: 6e74 2073 7472 6561 6d20 7375 6273 6372  nt stream subscr
+0000fc60: 6970 7469 6f6e 2066 726f 6d20 6120 7374  iption from a st
+0000fc70: 7265 616d 2070 6f73 6974 696f 6e2e 0a0a  ream position...
+0000fc80: 6060 6070 7974 686f 6e0a 2320 4372 6561  ```python.# Crea
+0000fc90: 7465 2061 2070 6572 7369 7374 656e 7420  te a persistent 
+0000fca0: 7374 7265 616d 2073 7562 7363 7269 7074  stream subscript
+0000fcb0: 696f 6e20 6672 6f6d 2061 2073 7472 6561  ion from a strea
+0000fcc0: 6d20 706f 7369 7469 6f6e 2e0a 6772 6f75  m position..grou
+0000fcd0: 705f 6e61 6d65 3220 3d20 6622 6772 6f75  p_name2 = f"grou
+0000fce0: 702d 7b75 7569 6434 2829 7d22 0a63 6c69  p-{uuid4()}".cli
+0000fcf0: 656e 742e 6372 6561 7465 5f73 7472 6561  ent.create_strea
+0000fd00: 6d5f 7375 6273 6372 6970 7469 6f6e 280a  m_subscription(.
+0000fd10: 2020 2020 6772 6f75 705f 6e61 6d65 3d67      group_name=g
+0000fd20: 726f 7570 5f6e 616d 6532 2c0a 2020 2020  roup_name2,.    
+0000fd30: 7374 7265 616d 5f6e 616d 653d 7374 7265  stream_name=stre
+0000fd40: 616d 5f6e 616d 6532 2c0a 2020 2020 7374  am_name2,.    st
+0000fd50: 7265 616d 5f70 6f73 6974 696f 6e3d 320a  ream_position=2.
+0000fd60: 290a 6060 600a 0a54 6865 2065 7861 6d70  ).```..The examp
+0000fd70: 6c65 2062 656c 6f77 2063 7265 6174 6573  le below creates
+0000fd80: 2061 2070 6572 7369 7374 656e 7420 7374   a persistent st
+0000fd90: 7265 616d 2073 7562 7363 7269 7074 696f  ream subscriptio
+0000fda0: 6e20 6672 6f6d 2074 6865 2065 6e64 206f  n from the end o
+0000fdb0: 6620 7468 6520 7374 7265 616d 2e0a 0a60  f the stream...`
+0000fdc0: 6060 7079 7468 6f6e 0a23 2043 7265 6174  ``python.# Creat
+0000fdd0: 6520 6120 7065 7273 6973 7465 6e74 2073  e a persistent s
+0000fde0: 7472 6561 6d20 7375 6273 6372 6970 7469  tream subscripti
+0000fdf0: 6f6e 2066 726f 6d20 656e 6420 6f66 2074  on from end of t
+0000fe00: 6865 2073 7472 6561 6d2e 0a67 726f 7570  he stream..group
+0000fe10: 5f6e 616d 6533 203d 2066 2267 726f 7570  _name3 = f"group
+0000fe20: 2d7b 7575 6964 3428 297d 220a 636c 6965  -{uuid4()}".clie
+0000fe30: 6e74 2e63 7265 6174 655f 7374 7265 616d  nt.create_stream
+0000fe40: 5f73 7562 7363 7269 7074 696f 6e28 0a20  _subscription(. 
+0000fe50: 2020 2067 726f 7570 5f6e 616d 653d 6772     group_name=gr
+0000fe60: 6f75 705f 6e61 6d65 332c 0a20 2020 2073  oup_name3,.    s
+0000fe70: 7472 6561 6d5f 6e61 6d65 3d73 7472 6561  tream_name=strea
+0000fe80: 6d5f 6e61 6d65 322c 0a20 2020 2066 726f  m_name2,.    fro
+0000fe90: 6d5f 656e 643d 5472 7565 0a29 0a60 6060  m_end=True.).```
+0000fea0: 0a0a 2323 2320 5265 6164 2073 7472 6561  ..### Read strea
+0000feb0: 6d20 7375 6273 6372 6970 7469 6f6e 0a0a  m subscription..
+0000fec0: 2a72 6571 7569 7265 7320 6c65 6164 6572  *requires leader
+0000fed0: 2a0a 0a54 6865 2060 7265 6164 5f73 7472  *..The `read_str
+0000fee0: 6561 6d5f 7375 6273 6372 6970 7469 6f6e  eam_subscription
+0000fef0: 2829 6020 6d65 7468 6f64 2063 616e 2062  ()` method can b
+0000ff00: 6520 7573 6564 2074 6f20 6372 6561 7465  e used to create
+0000ff10: 2061 2070 6572 7369 7374 656e 740a 7375   a persistent.su
+0000ff20: 6273 6372 6970 7469 6f6e 2066 6f72 2061  bscription for a
+0000ff30: 2073 7472 6561 6d2e 0a0a 5468 6973 206d   stream...This m
+0000ff40: 6574 686f 6420 6861 7320 7477 6f20 7265  ethod has two re
+0000ff50: 7175 6972 6564 2061 7267 756d 656e 7473  quired arguments
+0000ff60: 2c20 6067 726f 7570 5f6e 616d 6560 2061  , `group_name` a
+0000ff70: 6e64 2060 7374 7265 616d 5f6e 616d 6560  nd `stream_name`
+0000ff80: 2c20 7768 6963 680a 7368 6f75 6c64 206d  , which.should m
+0000ff90: 6174 6368 2074 6865 2076 616c 7565 7320  atch the values 
+0000ffa0: 6f66 2061 7267 756d 656e 7473 2075 7365  of arguments use
+0000ffb0: 6420 7768 656e 2063 616c 6c69 6e67 2060  d when calling `
+0000ffc0: 6372 6561 7465 5f73 7472 6561 6d5f 7375  create_stream_su
+0000ffd0: 6273 6372 6970 7469 6f6e 2829 602e 0a0a  bscription()`...
+0000ffe0: 5468 6973 206d 6574 686f 6420 616c 736f  This method also
+0000fff0: 2074 616b 6573 2061 6e20 6f70 7469 6f6e   takes an option
+00010000: 616c 2060 7469 6d65 6f75 7460 2061 7267  al `timeout` arg
+00010010: 756d 656e 742c 2074 6861 740a 6973 2065  ument, that.is e
+00010020: 7870 6563 7465 6420 746f 2062 6520 6120  xpected to be a 
+00010030: 5079 7468 6f6e 2060 666c 6f61 7460 2c20  Python `float`, 
+00010040: 7768 6963 6820 7365 7473 2061 2064 6561  which sets a dea
+00010050: 646c 696e 650a 666f 7220 7468 6520 636f  dline.for the co
+00010060: 6d70 6c65 7469 6f6e 206f 6620 7468 6520  mpletion of the 
+00010070: 6752 5043 206f 7065 7261 7469 6f6e 2e0a  gRPC operation..
+00010080: 0a4a 7573 7420 6c69 6b65 2060 7265 6164  .Just like `read
+00010090: 5f73 7562 7363 7269 7074 696f 6e60 2c20  _subscription`, 
+000100a0: 7468 6973 206d 6574 686f 6420 7265 7475  this method retu
+000100b0: 726e 7320 6120 322d 7475 706c 653a 2061  rns a 2-tuple: a
+000100c0: 2022 7265 6164 2072 6571 7565 7374 2220   "read request" 
+000100d0: 6f62 6a65 6374 0a61 6e64 2061 2022 7265  object.and a "re
+000100e0: 6164 2072 6573 706f 6e73 6522 206f 626a  ad response" obj
+000100f0: 6563 742e 0a0a 6060 6070 7974 686f 6e0a  ect...```python.
+00010100: 7265 6164 5f72 6571 2c20 7265 6164 5f72  read_req, read_r
+00010110: 6573 7020 3d20 636c 6965 6e74 2e72 6561  esp = client.rea
+00010120: 645f 7374 7265 616d 5f73 7562 7363 7269  d_stream_subscri
+00010130: 7074 696f 6e28 0a20 2020 2067 726f 7570  ption(.    group
+00010140: 5f6e 616d 653d 6772 6f75 705f 6e61 6d65  _name=group_name
+00010150: 312c 0a20 2020 2073 7472 6561 6d5f 6e61  1,.    stream_na
+00010160: 6d65 3d73 7472 6561 6d5f 6e61 6d65 322c  me=stream_name2,
+00010170: 0a29 0a60 6060 0a0a 5468 6520 6578 616d  .).```..The exam
+00010180: 706c 6520 6265 6c6f 7720 6974 6572 6174  ple below iterat
+00010190: 6573 206f 7665 7220 7468 6520 2272 6561  es over the "rea
+000101a0: 6420 7265 7370 6f6e 7365 2220 6f62 6a65  d response" obje
+000101b0: 6374 2c20 616e 6420 6361 6c6c 7320 6061  ct, and calls `a
+000101c0: 636b 2829 600a 6f6e 2074 6865 2022 7265  ck()`.on the "re
+000101d0: 6164 2072 6573 706f 6e73 6522 206f 626a  ad response" obj
+000101e0: 6563 742e 2054 6865 2066 6f72 206c 6f6f  ect. The for loo
+000101f0: 7020 6272 6561 6b73 2077 6865 6e20 7765  p breaks when we
+00010200: 2068 6176 6520 7265 6365 6976 6564 0a74   have received.t
+00010210: 6865 206c 6173 7420 6576 656e 7420 696e  he last event in
+00010220: 2074 6865 2073 7472 6561 6d2c 2073 6f20   the stream, so 
+00010230: 7468 6174 2077 6520 6361 6e20 6669 6e69  that we can fini
+00010240: 7368 2074 6865 2065 7861 6d70 6c65 7320  sh the examples 
+00010250: 696e 2074 6869 730a 646f 6375 6d65 6e74  in this.document
+00010260: 6174 696f 6e2e 0a0a 6060 6070 7974 686f  ation...```pytho
+00010270: 6e0a 6576 656e 7473 203d 205b 5d0a 666f  n.events = [].fo
+00010280: 7220 6576 656e 7420 696e 2072 6561 645f  r event in read_
+00010290: 7265 7370 3a0a 2020 2020 6576 656e 7473  resp:.    events
+000102a0: 2e61 7070 656e 6428 6576 656e 7429 0a0a  .append(event)..
+000102b0: 2020 2020 2320 4163 6b6e 6f77 6c65 6467      # Acknowledg
+000102c0: 6520 7468 6520 7265 6365 6976 6564 2065  e the received e
+000102d0: 7665 6e74 2e0a 2020 2020 7265 6164 5f72  vent..    read_r
+000102e0: 6571 2e61 636b 2865 7665 6e74 5f69 643d  eq.ack(event_id=
+000102f0: 6576 656e 742e 6964 290a 0a20 2020 2023  event.id)..    #
+00010300: 2042 7265 616b 2077 6865 6e20 7468 6520   Break when the 
+00010310: 6c61 7374 2065 7665 6e74 2068 6173 2062  last event has b
+00010320: 6565 6e20 7265 6365 6976 6564 2e0a 2020  een received..  
+00010330: 2020 6966 2065 7665 6e74 2e69 6420 3d3d    if event.id ==
+00010340: 2065 7665 6e74 3131 2e69 643a 0a20 2020   event11.id:.   
+00010350: 2020 2020 2062 7265 616b 0a60 6060 0a0a       break.```..
+00010360: 5765 2063 616e 2063 6865 636b 2077 6520  We can check we 
+00010370: 7265 6365 6976 6564 2061 6c6c 2074 6865  received all the
+00010380: 2065 7665 6e74 7320 7468 6174 2077 6572   events that wer
+00010390: 6520 6170 7065 6e64 6564 2074 6f20 6073  e appended to `s
+000103a0: 7472 6561 6d5f 6e61 6d65 3260 0a69 6e20  tream_name2`.in 
+000103b0: 7468 6520 6578 616d 706c 6573 2061 626f  the examples abo
+000103c0: 7665 2e0a 0a60 6060 7079 7468 6f6e 0a61  ve...```python.a
+000103d0: 7373 6572 7420 6c65 6e28 6576 656e 7473  ssert len(events
+000103e0: 2920 3d3d 2034 0a61 7373 6572 7420 6576  ) == 4.assert ev
+000103f0: 656e 7473 5b30 5d2e 7374 7265 616d 5f6e  ents[0].stream_n
+00010400: 616d 6520 3d3d 2073 7472 6561 6d5f 6e61  ame == stream_na
+00010410: 6d65 320a 6173 7365 7274 2065 7665 6e74  me2.assert event
+00010420: 735b 305d 2e69 6420 3d3d 2065 7665 6e74  s[0].id == event
+00010430: 342e 6964 0a61 7373 6572 7420 6576 656e  4.id.assert even
+00010440: 7473 5b31 5d2e 7374 7265 616d 5f6e 616d  ts[1].stream_nam
+00010450: 6520 3d3d 2073 7472 6561 6d5f 6e61 6d65  e == stream_name
+00010460: 320a 6173 7365 7274 2065 7665 6e74 735b  2.assert events[
+00010470: 315d 2e69 6420 3d3d 2065 7665 6e74 352e  1].id == event5.
+00010480: 6964 0a61 7373 6572 7420 6576 656e 7473  id.assert events
+00010490: 5b32 5d2e 7374 7265 616d 5f6e 616d 6520  [2].stream_name 
+000104a0: 3d3d 2073 7472 6561 6d5f 6e61 6d65 320a  == stream_name2.
+000104b0: 6173 7365 7274 2065 7665 6e74 735b 325d  assert events[2]
+000104c0: 2e69 6420 3d3d 2065 7665 6e74 362e 6964  .id == event6.id
+000104d0: 0a61 7373 6572 7420 6576 656e 7473 5b33  .assert events[3
+000104e0: 5d2e 7374 7265 616d 5f6e 616d 6520 3d3d  ].stream_name ==
+000104f0: 2073 7472 6561 6d5f 6e61 6d65 320a 6173   stream_name2.as
+00010500: 7365 7274 2065 7665 6e74 735b 335d 2e69  sert events[3].i
+00010510: 6420 3d3d 2065 7665 6e74 3131 2e69 640a  d == event11.id.
+00010520: 6060 600a 0a23 2323 2047 6574 2073 7472  ```..### Get str
+00010530: 6561 6d20 7375 6273 6372 6970 7469 6f6e  eam subscription
+00010540: 2069 6e66 6f0a 0a2a 7265 7175 6972 6573   info..*requires
+00010550: 206c 6561 6465 722a 0a0a 5468 6520 6067   leader*..The `g
+00010560: 6574 5f73 7472 6561 6d5f 7375 6273 6372  et_stream_subscr
+00010570: 6970 7469 6f6e 5f69 6e66 6f28 2960 206d  iption_info()` m
+00010580: 6574 686f 6420 6361 6e20 6265 2075 7365  ethod can be use
+00010590: 6420 746f 2067 6574 2069 6e66 6f72 6d61  d to get informa
+000105a0: 7469 6f6e 2066 6f72 2061 0a70 6572 7369  tion for a.persi
+000105b0: 7374 656e 7420 7375 6273 6372 6970 7469  stent subscripti
+000105c0: 6f6e 2066 6f72 2061 2073 7472 6561 6d2e  on for a stream.
+000105d0: 0a0a 5468 6973 206d 6574 686f 6420 6861  ..This method ha
+000105e0: 7320 7477 6f20 7265 7175 6972 6564 2061  s two required a
+000105f0: 7267 756d 656e 7473 2c20 6067 726f 7570  rguments, `group
+00010600: 5f6e 616d 6560 2061 6e64 2060 7374 7265  _name` and `stre
+00010610: 616d 5f6e 616d 6560 2c20 7768 6963 680a  am_name`, which.
+00010620: 7368 6f75 6c64 206d 6174 6368 2074 6865  should match the
+00010630: 2076 616c 7565 7320 6f66 2061 7267 756d   values of argum
+00010640: 656e 7473 2075 7365 6420 7768 656e 2063  ents used when c
+00010650: 616c 6c69 6e67 2060 6372 6561 7465 5f73  alling `create_s
+00010660: 7472 6561 6d5f 7375 6273 6372 6970 7469  tream_subscripti
+00010670: 6f6e 2829 602e 0a0a 5468 6973 206d 6574  on()`...This met
+00010680: 686f 6420 616c 736f 2074 616b 6573 2061  hod also takes a
+00010690: 6e20 6f70 7469 6f6e 616c 2060 7469 6d65  n optional `time
+000106a0: 6f75 7460 2061 7267 756d 656e 742c 2074  out` argument, t
+000106b0: 6861 740a 6973 2065 7870 6563 7465 6420  hat.is expected 
+000106c0: 746f 2062 6520 6120 5079 7468 6f6e 2060  to be a Python `
+000106d0: 666c 6f61 7460 2c20 7768 6963 6820 7365  float`, which se
+000106e0: 7473 2061 2064 6561 646c 696e 650a 666f  ts a deadline.fo
+000106f0: 7220 7468 6520 636f 6d70 6c65 7469 6f6e  r the completion
+00010700: 206f 6620 7468 6520 6752 5043 206f 7065   of the gRPC ope
+00010710: 7261 7469 6f6e 2e0a 0a60 6060 7079 7468  ration...```pyth
+00010720: 6f6e 0a73 7562 7363 7269 7074 696f 6e5f  on.subscription_
+00010730: 696e 666f 203d 2063 6c69 656e 742e 6765  info = client.ge
+00010740: 745f 7374 7265 616d 5f73 7562 7363 7269  t_stream_subscri
+00010750: 7074 696f 6e5f 696e 666f 280a 2020 2020  ption_info(.    
+00010760: 6772 6f75 705f 6e61 6d65 3d67 726f 7570  group_name=group
+00010770: 5f6e 616d 6531 2c0a 2020 2020 7374 7265  _name1,.    stre
+00010780: 616d 5f6e 616d 653d 7374 7265 616d 5f6e  am_name=stream_n
+00010790: 616d 6532 2c0a 290a 6060 600a 0a54 6865  ame2,.).```..The
+000107a0: 2072 6574 7572 6e65 6420 7661 6c75 6520   returned value 
+000107b0: 6973 2061 2060 5375 6273 6372 6970 7469  is a `Subscripti
+000107c0: 6f6e 496e 666f 6020 6f62 6a65 6374 2e0a  onInfo` object..
+000107d0: 0a23 2323 204c 6973 7420 7374 7265 616d  .### List stream
+000107e0: 2073 7562 7363 7269 7074 696f 6e73 0a0a   subscriptions..
+000107f0: 2a72 6571 7569 7265 7320 6c65 6164 6572  *requires leader
+00010800: 2a0a 0a54 6865 2060 6c69 7374 5f73 7472  *..The `list_str
+00010810: 6561 6d5f 7375 6273 6372 6970 7469 6f6e  eam_subscription
+00010820: 7328 2960 206d 6574 686f 6420 6361 6e20  s()` method can 
+00010830: 6265 2075 7365 6420 746f 2067 6574 2069  be used to get i
+00010840: 6e66 6f72 6d61 7469 6f6e 2066 6f72 2061  nformation for a
+00010850: 6c6c 0a74 6865 2070 6572 7369 7374 656e  ll.the persisten
+00010860: 7420 7375 6273 6372 6970 7469 6f6e 7320  t subscriptions 
+00010870: 666f 7220 6120 7374 7265 616d 2e0a 0a54  for a stream...T
+00010880: 6869 7320 6d65 7468 6f64 2068 6173 206f  his method has o
+00010890: 6e65 2072 6571 7569 7265 6420 6172 6775  ne required argu
+000108a0: 6d65 6e74 2c20 6073 7472 6561 6d5f 6e61  ment, `stream_na
+000108b0: 6d65 602e 0a0a 5468 6973 206d 6574 686f  me`...This metho
+000108c0: 6420 616c 736f 2074 616b 6573 2061 6e20  d also takes an 
+000108d0: 6f70 7469 6f6e 616c 2060 7469 6d65 6f75  optional `timeou
+000108e0: 7460 2061 7267 756d 656e 742c 2074 6861  t` argument, tha
+000108f0: 740a 6973 2065 7870 6563 7465 6420 746f  t.is expected to
+00010900: 2062 6520 6120 5079 7468 6f6e 2060 666c   be a Python `fl
+00010910: 6f61 7460 2c20 7768 6963 6820 7365 7473  oat`, which sets
+00010920: 2061 2064 6561 646c 696e 650a 666f 7220   a deadline.for 
+00010930: 7468 6520 636f 6d70 6c65 7469 6f6e 206f  the completion o
+00010940: 6620 7468 6520 6752 5043 206f 7065 7261  f the gRPC opera
+00010950: 7469 6f6e 2e0a 0a60 6060 7079 7468 6f6e  tion...```python
+00010960: 0a73 7562 7363 7269 7074 696f 6e73 203d  .subscriptions =
+00010970: 2063 6c69 656e 742e 6c69 7374 5f73 7472   client.list_str
+00010980: 6561 6d5f 7375 6273 6372 6970 7469 6f6e  eam_subscription
+00010990: 7328 0a20 2020 2073 7472 6561 6d5f 6e61  s(.    stream_na
+000109a0: 6d65 3d73 7472 6561 6d5f 6e61 6d65 322c  me=stream_name2,
+000109b0: 0a29 0a60 6060 0a0a 5468 6520 7265 7475  .).```..The retu
+000109c0: 726e 6564 2076 616c 7565 2069 7320 6120  rned value is a 
+000109d0: 6c69 7374 206f 6620 6053 7562 7363 7269  list of `Subscri
+000109e0: 7074 696f 6e49 6e66 6f60 206f 626a 6563  ptionInfo` objec
+000109f0: 7473 2e0a 0a23 2323 2044 656c 6574 6520  ts...### Delete 
+00010a00: 7374 7265 616d 2073 7562 7363 7269 7074  stream subscript
+00010a10: 696f 6e0a 0a2a 7265 7175 6972 6573 206c  ion..*requires l
+00010a20: 6561 6465 722a 0a0a 5468 6520 6064 656c  eader*..The `del
+00010a30: 6574 655f 7374 7265 616d 5f73 7562 7363  ete_stream_subsc
+00010a40: 7269 7074 696f 6e28 2960 206d 6574 686f  ription()` metho
+00010a50: 6420 6361 6e20 6265 2075 7365 6420 746f  d can be used to
+00010a60: 2064 656c 6574 6520 6120 7065 7273 6973   delete a persis
+00010a70: 7465 6e74 0a73 7562 7363 7269 7074 696f  tent.subscriptio
+00010a80: 6e20 666f 7220 6120 7374 7265 616d 2e0a  n for a stream..
+00010a90: 0a54 6869 7320 6d65 7468 6f64 2068 6173  .This method has
+00010aa0: 2074 776f 2072 6571 7569 7265 6420 6172   two required ar
+00010ab0: 6775 6d65 6e74 732c 2060 6772 6f75 705f  guments, `group_
+00010ac0: 6e61 6d65 6020 616e 6420 6073 7472 6561  name` and `strea
+00010ad0: 6d5f 6e61 6d65 602c 2077 6869 6368 0a73  m_name`, which.s
+00010ae0: 686f 756c 6420 6d61 7463 6820 7468 6520  hould match the 
+00010af0: 7661 6c75 6573 206f 6620 6172 6775 6d65  values of argume
+00010b00: 6e74 7320 7573 6564 2077 6865 6e20 6361  nts used when ca
+00010b10: 6c6c 696e 6720 6063 7265 6174 655f 7374  lling `create_st
+00010b20: 7265 616d 5f73 7562 7363 7269 7074 696f  ream_subscriptio
+00010b30: 6e28 2960 2e0a 0a54 6869 7320 6d65 7468  n()`...This meth
+00010b40: 6f64 2061 6c73 6f20 7461 6b65 7320 616e  od also takes an
+00010b50: 206f 7074 696f 6e61 6c20 6074 696d 656f   optional `timeo
+00010b60: 7574 6020 6172 6775 6d65 6e74 2c20 7468  ut` argument, th
+00010b70: 6174 0a69 7320 6578 7065 6374 6564 2074  at.is expected t
+00010b80: 6f20 6265 2061 2050 7974 686f 6e20 6066  o be a Python `f
+00010b90: 6c6f 6174 602c 2077 6869 6368 2073 6574  loat`, which set
+00010ba0: 7320 6120 6465 6164 6c69 6e65 0a66 6f72  s a deadline.for
+00010bb0: 2074 6865 2063 6f6d 706c 6574 696f 6e20   the completion 
+00010bc0: 6f66 2074 6865 2067 5250 4320 6f70 6572  of the gRPC oper
+00010bd0: 6174 696f 6e2e 0a0a 6060 6070 7974 686f  ation...```pytho
+00010be0: 6e0a 636c 6965 6e74 2e64 656c 6574 655f  n.client.delete_
+00010bf0: 7374 7265 616d 5f73 7562 7363 7269 7074  stream_subscript
+00010c00: 696f 6e28 0a20 2020 2067 726f 7570 5f6e  ion(.    group_n
+00010c10: 616d 653d 6772 6f75 705f 6e61 6d65 312c  ame=group_name1,
+00010c20: 0a20 2020 2073 7472 6561 6d5f 6e61 6d65  .    stream_name
+00010c30: 3d73 7472 6561 6d5f 6e61 6d65 322c 0a29  =stream_name2,.)
+00010c40: 0a60 6060 0a0a 2323 2043 6f6e 6e65 6374  .```..## Connect
+00010c50: 696f 6e0a 0a23 2323 2052 6563 6f6e 6e65  ion..### Reconne
+00010c60: 6374 0a0a 5468 6520 6072 6563 6f6e 6e65  ct..The `reconne
+00010c70: 6374 2829 6020 6d65 7468 6f64 2063 616e  ct()` method can
+00010c80: 2062 6520 7573 6564 2074 6f20 6d61 6e75   be used to manu
+00010c90: 616c 6c79 2072 6563 6f6e 6e65 6374 2074  ally reconnect t
+00010ca0: 6865 2063 6c69 656e 7420 746f 2061 0a73  he client to a.s
+00010cb0: 7569 7461 626c 6520 4576 656e 7453 746f  uitable EventSto
+00010cc0: 7265 4442 206e 6f64 652e 2054 6869 7320  reDB node. This 
+00010cd0: 6d65 7468 6f64 2075 7365 7320 7468 6520  method uses the 
+00010ce0: 7361 6d65 2072 6f75 7469 6e65 2066 6f72  same routine for
+00010cf0: 2072 6561 6469 6e67 2074 6865 0a63 6c75   reading the.clu
+00010d00: 7374 6572 206e 6f64 6520 7374 6174 6573  ster node states
+00010d10: 2061 6e64 2074 6865 6e20 636f 6e6e 6563   and then connec
+00010d20: 7469 6e67 2074 6f20 6120 7375 6974 6162  ting to a suitab
+00010d30: 6c65 206e 6f64 6520 6163 636f 7264 696e  le node accordin
+00010d40: 6720 746f 2074 6865 0a63 6c69 656e 7427  g to the.client'
+00010d50: 7320 6e6f 6465 2070 7265 6665 7265 6e63  s node preferenc
+00010d60: 6520 7468 6174 2069 7320 7573 6564 2077  e that is used w
+00010d70: 6865 6e20 7468 6520 636c 6965 6e74 2069  hen the client i
+00010d80: 7320 636f 6e73 7472 7563 7465 642e 2054  s constructed. T
+00010d90: 6869 730a 6d65 7468 6f64 2069 7320 7468  his.method is th
+00010da0: 7265 6164 2d73 6166 652c 2061 6e64 2069  read-safe, and i
+00010db0: 7420 6973 2022 636f 6e73 6572 7661 7469  t is "conservati
+00010dc0: 7665 2220 696e 2074 6861 742c 2077 6865  ve" in that, whe
+00010dd0: 6e20 6974 2069 7320 6361 6c6c 6564 0a62  n it is called.b
+00010de0: 7920 7365 7665 7261 6c20 7468 7265 6164  y several thread
+00010df0: 7320 6174 2074 6865 2073 616d 6520 7469  s at the same ti
+00010e00: 6d65 2c20 6f6e 6c79 206f 6e65 2072 6563  me, only one rec
+00010e10: 6f6e 6e65 6374 696f 6e20 7769 6c6c 206f  onnection will o
+00010e20: 6363 7572 2e0a 436f 6e63 7572 7265 6e74  ccur..Concurrent
+00010e30: 2061 7474 656d 7074 7320 746f 2072 6563   attempts to rec
+00010e40: 6f6e 6e65 6374 2077 696c 6c20 626c 6f63  onnect will bloc
+00010e50: 6b20 756e 7469 6c20 7468 6520 636c 6965  k until the clie
+00010e60: 6e74 2068 6173 2072 6563 6f6e 6e65 6374  nt has reconnect
+00010e70: 6564 0a73 7563 6365 7373 6675 6c6c 792c  ed.successfully,
+00010e80: 2061 6e64 2074 6865 6e20 7468 6579 2077   and then they w
+00010e90: 696c 6c20 616c 6c20 7265 7475 726e 206e  ill all return n
+00010ea0: 6f72 6d61 6c6c 792e 0a0a 6060 6070 7974  ormally...```pyt
+00010eb0: 686f 6e0a 636c 6965 6e74 2e72 6563 6f6e  hon.client.recon
+00010ec0: 6e65 6374 2829 0a60 6060 0a0a 416e 2065  nect().```..An e
+00010ed0: 7861 6d70 6c65 206f 6620 7768 656e 2069  xample of when i
+00010ee0: 7420 6d69 6768 7420 6265 2064 6573 6972  t might be desir
+00010ef0: 6162 6c65 2074 6f20 7265 636f 6e6e 6563  able to reconnec
+00010f00: 7420 6d61 6e75 616c 6c79 2069 7320 7768  t manually is wh
+00010f10: 656e 2028 666f 7220 7065 7266 6f72 6d61  en (for performa
+00010f20: 6e63 650a 7265 6173 6f6e 7329 2074 6865  nce.reasons) the
+00010f30: 206e 6f64 6520 7072 6566 6572 656e 6365   node preference
+00010f40: 2069 7320 666f 7220 7468 6520 636c 6965   is for the clie
+00010f50: 6e74 2074 6f20 6265 2063 6f6e 6e65 6374  nt to be connect
+00010f60: 6564 2074 6f20 6120 666f 6c6c 6f77 6572  ed to a follower
+00010f70: 206e 6f64 6520 696e 2074 6865 0a63 6c75   node in the.clu
+00010f80: 7374 6572 2c20 616e 642c 2061 6674 6572  ster, and, after
+00010f90: 2061 2063 6c75 7374 6572 206c 6561 6465   a cluster leade
+00010fa0: 7220 656c 6563 7469 6f6e 2c20 7468 6520  r election, the 
+00010fb0: 666f 6c6c 6f77 6572 206e 6f64 6520 6265  follower node be
+00010fc0: 636f 6d65 7320 6120 6c65 6164 6572 206e  comes a leader n
+00010fd0: 6f64 652e 0a52 6563 6f6e 6e65 6374 696e  ode..Reconnectin
+00010fe0: 6720 746f 2061 2066 6f6c 6c6f 7765 7220  g to a follower 
+00010ff0: 6e6f 6465 2069 6e20 7468 6973 2063 6173  node in this cas
+00011000: 6520 6973 2063 7572 7265 6e74 6c79 2062  e is currently b
+00011010: 6579 6f6e 6420 7468 6520 6361 7061 6269  eyond the capabi
+00011020: 6c69 7469 6573 206f 660a 7468 6973 2063  lities of.this c
+00011030: 6c69 656e 742c 2062 7574 2074 6869 7320  lient, but this 
+00011040: 6265 6861 7669 6f72 206d 6967 6874 2062  behavior might b
+00011050: 6520 696d 706c 656d 656e 7465 6420 696e  e implemented in
+00011060: 2061 2066 7574 7572 6520 7265 6c65 6173   a future releas
+00011070: 652e 0a0a 506c 6561 7365 206e 6f74 652c  e...Please note,
+00011080: 2061 6c6c 2074 6865 2063 6c69 656e 7420   all the client 
+00011090: 6d65 7468 6f64 7320 6172 6520 6465 636f  methods are deco
+000110a0: 7261 7465 6420 7769 7468 2060 4061 7574  rated with `@aut
+000110b0: 6f72 6563 6f6e 6e65 6374 6020 2877 6869  oreconnect` (whi
+000110c0: 6368 2063 616c 6c73 2074 6865 0a60 7265  ch calls the.`re
+000110d0: 636f 6e6e 6563 7428 2960 206d 6574 686f  connect()` metho
+000110e0: 6429 2061 6e64 2061 2060 4072 6574 7279  d) and a `@retry
+000110f0: 6020 6465 636f 7261 746f 7220 7468 6174  ` decorator that
+00011100: 2077 696c 6c20 7265 7472 7920 6f70 6572   will retry oper
+00011110: 6174 696f 6e73 2074 6861 7420 6661 696c  ations that fail
+00011120: 0a64 7565 2074 6f20 636f 6e6e 6563 7469  .due to connecti
+00011130: 6f6e 2069 7373 7565 732e 2054 6865 2060  on issues. The `
+00011140: 4061 7574 6f72 6563 6f6e 6e65 6374 6020  @autoreconnect` 
+00011150: 6465 636f 7261 746f 7220 7769 6c6c 2072  decorator will r
+00011160: 6563 6f6e 6e65 6374 2074 6f20 616e 2061  econnect to an a
+00011170: 7661 696c 6162 6c65 0a6e 6f64 6520 696e  vailable.node in
+00011180: 2074 6865 2063 6c75 7374 6572 2077 6865   the cluster whe
+00011190: 6e20 7468 6520 7365 7276 6572 2074 6861  n the server tha
+000111a0: 7420 7468 6520 636c 6965 6e74 2068 6173  t the client has
+000111b0: 2062 6565 6e20 636f 6e6e 6563 7465 6420   been connected 
+000111c0: 746f 2068 6173 2062 6563 6f6d 650a 756e  to has become.un
+000111d0: 6176 6169 6c61 626c 652c 206f 7220 6966  available, or if
+000111e0: 2074 6865 2063 6c69 656e 7427 7320 6752   the client's gR
+000111f0: 5043 2063 6861 6e6e 656c 2068 6170 7065  PC channel happe
+00011200: 6e73 2074 6f20 6861 7665 2062 6565 6e20  ns to have been 
+00011210: 636c 6f73 6564 2c20 616e 6420 616c 736f  closed, and also
+00011220: 2077 6865 6e0a 6120 6d65 7468 6f64 2069   when.a method i
+00011230: 7320 6361 6c6c 6564 2074 6861 7420 7265  s called that re
+00011240: 7175 6972 6573 2061 206c 6561 6465 7220  quires a leader 
+00011250: 6275 7420 7468 6520 6e6f 6465 2074 6861  but the node tha
+00011260: 7420 7468 6520 636c 6965 6e74 2068 6173  t the client has
+00011270: 2062 6565 6e0a 636f 6e6e 6563 7465 6420   been.connected 
+00011280: 746f 2073 746f 7073 2062 6569 6e67 2074  to stops being t
+00011290: 6865 206c 6561 6465 7220 7468 656e 2074  he leader then t
+000112a0: 6865 2063 6c69 656e 7420 7769 6c6c 2072  he client will r
+000112b0: 6563 6f6e 6e65 6374 2074 6f20 7468 6520  econnect to the 
+000112c0: 6375 7272 656e 740a 6c65 6164 6572 2e20  current.leader. 
+000112d0: 5468 6520 6040 7265 7472 7960 2064 6563  The `@retry` dec
+000112e0: 6f72 6174 6f72 2077 696c 6c20 7468 656e  orator will then
+000112f0: 2072 6574 7279 206f 7065 7261 7469 6f6e   retry operation
+00011300: 7320 7468 6174 2068 6176 6520 6661 696c  s that have fail
+00011310: 6564 2064 7565 2074 6f0a 7468 6573 6520  ed due to.these 
+00011320: 636f 6e6e 6563 7469 6f6e 2069 7373 7565  connection issue
+00011330: 732e 2054 6869 7320 6d65 616e 7320 7468  s. This means th
+00011340: 6174 2061 206d 6574 686f 6420 7468 6174  at a method that
+00011350: 2068 6173 2066 6169 6c65 6420 6475 6520   has failed due 
+00011360: 746f 2063 6f6e 6e65 6374 696f 6e0a 6973  to connection.is
+00011370: 7375 6573 2077 696c 6c20 6265 2072 6574  sues will be ret
+00011380: 7269 6564 2061 6674 6572 2074 6865 2063  ried after the c
+00011390: 6c69 656e 7420 6861 7320 7265 636f 6e6e  lient has reconn
+000113a0: 6563 7465 642e 0a0a 506c 6561 7365 2061  ected...Please a
+000113b0: 6c73 6f20 6e6f 7465 2c20 7468 6520 6578  lso note, the ex
+000113c0: 6365 7074 696f 6e73 2074 6f20 7468 6973  ceptions to this
+000113d0: 2062 6568 6176 696f 7572 2068 6176 6520   behaviour have 
+000113e0: 746f 2064 6f20 7769 7468 2074 6865 206d  to do with the m
+000113f0: 6574 686f 6473 2074 6861 740a 7265 7475  ethods that.retu
+00011400: 726e 2069 7465 7261 746f 7273 2e20 466f  rn iterators. Fo
+00011410: 7220 6578 616d 706c 652c 2061 6e20 6576  r example, an ev
+00011420: 656e 742d 7072 6f63 6573 7369 6e67 2063  ent-processing c
+00011430: 6f6d 706f 6e65 6e74 2074 6861 7420 6974  omponent that it
+00011440: 6572 6174 6573 206f 7665 7220 7468 650a  erates over the.
+00011450: 7265 7370 6f6e 7365 2074 6f20 6120 6361  response to a ca
+00011460: 7463 682d 7570 2073 7562 7363 7269 7074  tch-up subscript
+00011470: 696f 6e20 6d65 7468 6f64 2063 616c 6c20  ion method call 
+00011480: 7769 6c6c 2061 6c77 6179 7320 6e65 6564  will always need
+00011490: 2074 6f20 6265 206d 6f6e 6974 6f72 6564   to be monitored
+000114a0: 2066 6f72 0a65 7272 6f72 732c 2061 6e64   for.errors, and
+000114b0: 2c20 6966 2069 7420 6661 696c 7320 6166  , if it fails af
+000114c0: 7465 7220 6974 2068 6173 2073 7461 7274  ter it has start
+000114d0: 6564 2069 7465 7261 7469 6e67 206f 7665  ed iterating ove
+000114e0: 7220 7468 6520 7265 7370 6f6e 7365 2c20  r the response, 
+000114f0: 7468 6520 6361 7463 682d 7570 0a73 7562  the catch-up.sub
+00011500: 7363 7269 7074 696f 6e20 7769 6c6c 206e  scription will n
+00011510: 6565 6420 746f 2062 6520 7265 7374 6172  eed to be restar
+00011520: 7465 6420 6672 6f6d 2074 6865 2065 7665  ted from the eve
+00011530: 6e74 2d70 726f 6365 7373 696e 6720 636f  nt-processing co
+00011540: 6d70 6f6e 656e 7427 7320 6c61 7374 2073  mponent's last s
+00011550: 6176 6564 0a63 6f6d 6d69 7420 706f 7369  aved.commit posi
+00011560: 7469 6f6e 2e20 496e 2074 6869 7320 6361  tion. In this ca
+00011570: 7365 2c20 7468 6520 636c 6965 6e74 2077  se, the client w
+00011580: 696c 6c20 6175 746f 6d61 7469 6361 6c6c  ill automaticall
+00011590: 7920 7265 636f 6e6e 6563 7420 746f 2061  y reconnect to a
+000115a0: 206e 6f64 6520 696e 2074 6865 0a63 6c75   node in the.clu
+000115b0: 7374 6572 2077 6865 6e20 7468 6520 7375  ster when the su
+000115c0: 6273 6571 7565 6e74 2063 616c 6c20 746f  bsequent call to
+000115d0: 2061 2063 6174 6368 2d75 7020 7375 6273   a catch-up subs
+000115e0: 6372 6970 7469 6f6e 206d 6574 686f 6420  cription method 
+000115f0: 6973 206d 6164 652e 2059 6f75 206a 7573  is made. You jus
+00011600: 740a 6e65 6564 2074 6f20 6861 6e64 6c65  t.need to handle
+00011610: 2074 6865 2065 7863 6570 7469 6f6e 2074   the exception t
+00011620: 6861 7420 6f63 6375 7273 2066 726f 6d20  hat occurs from 
+00011630: 7468 6520 6974 6572 6174 6f72 2c20 7468  the iterator, th
+00011640: 656e 2072 6561 6420 796f 7572 206c 6173  en read your las
+00011650: 7420 7361 7665 640a 636f 6d6d 6974 2070  t saved.commit p
+00011660: 6f73 6974 696f 6e2c 2061 6e64 2074 6865  osition, and the
+00011670: 6e20 7265 7374 6172 7420 796f 7572 2065  n restart your e
+00011680: 7665 6e74 2d70 726f 6365 7373 696e 6720  vent-processing 
+00011690: 636f 6d70 6f6e 656e 742c 2075 7369 6e67  component, using
+000116a0: 2074 6865 2073 616d 650a 6045 5344 4243   the same.`ESDBC
+000116b0: 6c69 656e 7460 2069 6e73 7461 6e63 652c  lient` instance,
+000116c0: 2062 7574 2077 6974 6820 6120 6e65 7720   but with a new 
+000116d0: 6361 7463 682d 7570 2073 7562 7363 7269  catch-up subscri
+000116e0: 7074 696f 6e20 6974 6572 6174 6f72 2e20  ption iterator. 
+000116f0: 5369 6d69 6c61 726c 792c 2077 6865 6e0a  Similarly, when.
+00011700: 7265 6164 696e 6720 7065 7273 6973 7465  reading persiste
+00011710: 6e74 2073 7562 7363 7269 7074 696f 6e73  nt subscriptions
+00011720: 3a20 6966 2074 6865 7265 2061 7265 2063  : if there are c
+00011730: 6f6e 6e65 6374 6976 6974 7920 6973 7375  onnectivity issu
+00011740: 6573 2061 6674 6572 2079 6f75 2068 6176  es after you hav
+00011750: 650a 7374 6172 7465 6420 6974 6572 6174  e.started iterat
+00011760: 696e 6720 6f76 6572 2074 6865 2072 6573  ing over the res
+00011770: 706f 6e73 652c 2074 6865 6e20 7468 6520  ponse, then the 
+00011780: 7365 7276 6572 2063 616c 6c20 7769 6c6c  server call will
+00011790: 206e 6565 6420 746f 2062 6520 7265 7374   need to be rest
+000117a0: 6172 7465 642e 0a46 6f72 2074 6865 206f  arted..For the o
+000117b0: 7065 7261 7469 6f6e 7320 7265 7475 726e  perations return
+000117c0: 2061 6e20 6974 6572 6174 6f72 2c20 7468   an iterator, th
+000117d0: 6520 6465 636f 7261 746f 7273 206d 656e  e decorators men
+000117e0: 7469 6f6e 6564 2061 626f 7665 2077 696c  tioned above wil
+000117f0: 6c20 6861 7665 2065 7869 7465 640a 6265  l have exited.be
+00011800: 666f 7265 2061 6e79 2073 7562 7365 7175  fore any subsequ
+00011810: 656e 7420 6752 5043 2073 7472 6561 6d69  ent gRPC streami
+00011820: 6e67 2065 7272 6f72 206f 6363 7572 732e  ng error occurs.
+00011830: 0a0a 0a23 2323 2043 6c6f 7365 0a0a 5468  ...### Close..Th
+00011840: 6520 6063 6c6f 7365 2829 6020 6d65 7468  e `close()` meth
+00011850: 6f64 2063 616e 2062 6520 7573 6564 2074  od can be used t
+00011860: 6f20 636c 6561 6e6c 7920 636c 6f73 6520  o cleanly close 
+00011870: 7468 6520 6752 5043 2063 6f6e 6e65 6374  the gRPC connect
+00011880: 696f 6e2e 0a0a 6060 6070 7974 686f 6e0a  ion...```python.
+00011890: 636c 6965 6e74 2e63 6c6f 7365 2829 0a60  client.close().`
+000118a0: 6060 0a0a 2323 204e 6f74 6573 0a0a 2323  ``..## Notes..##
+000118b0: 2320 436f 6e6e 6563 7469 6f6e 2073 7472  # Connection str
+000118c0: 696e 6773 0a0a 5468 6520 4576 656e 7453  ings..The EventS
+000118d0: 746f 7265 4442 2063 6f6e 6e65 6374 696f  toreDB connectio
+000118e0: 6e20 7374 7269 6e67 2069 7320 6120 5552  n string is a UR
+000118f0: 4920 7468 6174 2063 6f6e 666f 726d 7320  I that conforms 
+00011900: 7769 7468 206f 6e65 206f 6620 7477 6f20  with one of two 
+00011910: 706f 7373 6962 6c65 0a73 6368 656d 6573  possible.schemes
+00011920: 2c20 6569 7468 6572 2074 6865 2022 6573  , either the "es
+00011930: 6462 2220 7363 6865 6d65 206f 7220 7468  db" scheme or th
+00011940: 6520 2265 7364 622b 6469 7363 6f76 6572  e "esdb+discover
+00011950: 2220 7363 6865 6d65 2e20 5468 6520 7379  " scheme. The sy
+00011960: 6e74 6178 2061 6e64 0a73 656d 616e 7469  ntax and.semanti
+00011970: 6373 206f 6620 7468 6520 4576 656e 7453  cs of the EventS
+00011980: 746f 7265 4442 2055 5249 2073 6368 656d  toreDB URI schem
+00011990: 6573 2061 7265 2065 7870 6c61 696e 6564  es are explained
+000119a0: 2062 656c 6f77 2e20 5468 6520 7379 6e74   below. The synt
+000119b0: 6178 2069 730a 6465 6669 6e65 6420 7573  ax is.defined us
+000119c0: 696e 6720 5b45 424e 465d 2868 7474 7073  ing [EBNF](https
+000119d0: 3a2f 2f65 6e2e 7769 6b69 7065 6469 612e  ://en.wikipedia.
+000119e0: 6f72 672f 7769 6b69 2f45 7874 656e 6465  org/wiki/Extende
+000119f0: 645f 4261 636b 7573 e280 934e 6175 725f  d_Backus...Naur_
+00011a00: 666f 726d 292e 0a0a 5468 6520 2265 7364  form)...The "esd
+00011a10: 6222 2055 5249 2073 6368 656d 6520 6361  b" URI scheme ca
+00011a20: 6e20 6265 2064 6566 696e 6564 2069 6e20  n be defined in 
+00011a30: 7468 6520 666f 6c6c 6f77 696e 6720 7761  the following wa
+00011a40: 792e 0a0a 2020 2020 6573 6462 2d75 7269  y...    esdb-uri
+00011a50: 203d 2022 6573 6462 3a2f 2f22 202c 205b   = "esdb://" , [
+00011a60: 2075 7365 722d 696e 666f 202c 2022 4022   user-info , "@"
+00011a70: 205d 202c 2067 7270 632d 7461 7267 6574   ] , grpc-target
+00011a80: 2c20 7b20 222c 2220 2c20 6772 7063 2d74  , { "," , grpc-t
+00011a90: 6172 6765 7420 7d20 2c20 5b20 223f 2220  arget } , [ "?" 
+00011aa0: 2c20 7175 6572 792d 7374 7269 6e67 205d  , query-string ]
+00011ab0: 203b 0a0a 496e 2074 6865 2022 6573 6462   ;..In the "esdb
+00011ac0: 2220 5552 4920 7363 6865 6d65 2c20 6166  " URI scheme, af
+00011ad0: 7465 7220 7468 6520 6f70 7469 6f6e 616c  ter the optional
+00011ae0: 2075 7365 7220 696e 666f 2073 7472 696e   user info strin
+00011af0: 672c 2074 6865 7265 206d 7573 7420 6265  g, there must be
+00011b00: 2061 7420 6c65 6173 740a 6f6e 6520 6752   at least.one gR
+00011b10: 5043 2074 6172 6765 742e 2049 6620 7468  PC target. If th
+00011b20: 6572 6520 6172 6520 7365 7665 7261 6c20  ere are several 
+00011b30: 6752 5043 2074 6172 6765 7473 2c20 7468  gRPC targets, th
+00011b40: 6579 206d 7573 7420 6265 2073 6570 6172  ey must be separ
+00011b50: 6174 6564 2066 726f 6d20 6561 6368 0a6f  ated from each.o
+00011b60: 7468 6572 2077 6974 6820 7468 6520 222c  ther with the ",
+00011b70: 2220 6368 6172 6163 7465 722e 2045 6163  " character. Eac
+00011b80: 6820 6752 5043 2074 6172 6765 7420 7368  h gRPC target sh
+00011b90: 6f75 6c64 2069 6e64 6963 6174 6520 616e  ould indicate an
+00011ba0: 2045 7665 6e74 5374 6f72 6544 4220 6752   EventStoreDB gR
+00011bb0: 5043 0a73 6572 7665 7220 736f 636b 6574  PC.server socket
+00011bc0: 2c20 6279 2073 7065 6369 6679 696e 6720  , by specifying 
+00011bd0: 6120 686f 7374 2061 6e64 2061 2070 6f72  a host and a por
+00011be0: 7420 6e75 6d62 6572 2073 6570 6172 6174  t number separat
+00011bf0: 6564 2077 6974 6820 7468 6520 223a 2220  ed with the ":" 
+00011c00: 6368 6172 6163 7465 722e 0a54 6865 2068  character..The h
+00011c10: 6f73 7420 6d61 7920 6265 2061 2068 6f73  ost may be a hos
+00011c20: 746e 616d 6520 7468 6174 2063 616e 2062  tname that can b
+00011c30: 6520 7265 736f 6c76 6564 2074 6f20 616e  e resolved to an
+00011c40: 2049 5020 6164 6472 6573 732c 206f 7220   IP address, or 
+00011c50: 616e 2049 5020 6164 6472 6573 732e 0a0a  an IP address...
+00011c60: 2020 2020 6772 7063 2d74 6172 6765 7420      grpc-target 
+00011c70: 3d20 2820 686f 7374 6e61 6d65 207c 2069  = ( hostname | i
+00011c80: 702d 6164 6472 6573 7320 2920 2c20 223a  p-address ) , ":
+00011c90: 2220 2c20 706f 7274 2d6e 756d 6265 7220  " , port-number 
+00011ca0: 3b0a 0a0a 5468 6520 2265 7364 622b 6469  ;...The "esdb+di
+00011cb0: 7363 6f76 6572 2220 5552 4920 7363 6865  scover" URI sche
+00011cc0: 6d65 2063 616e 2062 6520 6465 6669 6e65  me can be define
+00011cd0: 6420 696e 2074 6865 2066 6f6c 6c6f 7769  d in the followi
+00011ce0: 6e67 2077 6179 2e0a 0a20 2020 2065 7364  ng way...    esd
+00011cf0: 622d 6469 7363 6f76 6572 2d75 7269 203d  b-discover-uri =
+00011d00: 2022 6573 6462 2b64 6973 636f 7665 723a   "esdb+discover:
+00011d10: 2f2f 2220 2c20 5b20 7573 6572 2d69 6e66  //" , [ user-inf
+00011d20: 6f2c 2022 4022 205d 202c 2063 6c75 7374  o, "@" ] , clust
+00011d30: 6572 2d64 6f6d 6169 6e6e 616d 6520 2c20  er-domainname , 
+00011d40: 5b20 223f 2220 2c20 7175 6572 792d 7374  [ "?" , query-st
+00011d50: 7269 6e67 205d 203b 0a0a 496e 2074 6865  ring ] ;..In the
+00011d60: 2022 6573 6462 2b64 6973 636f 7665 7222   "esdb+discover"
+00011d70: 2055 5249 2073 6368 656d 652c 2061 6674   URI scheme, aft
+00011d80: 6572 2074 6865 2075 7365 7220 696e 666f  er the user info
+00011d90: 2073 7472 696e 672c 2074 6865 7265 206d   string, there m
+00011da0: 7573 7420 6265 2061 2064 6f6d 6169 6e0a  ust be a domain.
+00011db0: 6e61 6d65 2077 6869 6368 2073 686f 756c  name which shoul
+00011dc0: 6420 6964 656e 7469 6679 2061 2063 6c75  d identify a clu
+00011dd0: 7374 6572 206f 6620 4576 656e 7453 746f  ster of EventSto
+00011de0: 7265 4442 2073 6572 7665 7273 2e20 5468  reDB servers. Th
+00011df0: 6520 636c 6965 6e74 2077 696c 6c20 7573  e client will us
+00011e00: 6520 6120 444e 530a 7365 7276 6572 2074  e a DNS.server t
+00011e10: 6f20 7265 736f 6c76 6520 7468 6520 646f  o resolve the do
+00011e20: 6d61 696e 206e 616d 6520 746f 2061 206c  main name to a l
+00011e30: 6973 7420 6f66 2061 6464 7265 7373 6573  ist of addresses
+00011e40: 206f 6620 4576 656e 7453 746f 7265 4442   of EventStoreDB
+00011e50: 2073 6572 7665 7273 2c0a 6279 2071 7565   servers,.by que
+00011e60: 7279 696e 6720 666f 7220 2741 2720 7265  rying for 'A' re
+00011e70: 636f 7264 732e 2049 6e20 7468 6973 2063  cords. In this c
+00011e80: 6173 652c 2074 6865 2070 6f72 7420 6e75  ase, the port nu
+00011e90: 6d62 6572 2022 3231 3133 2220 7769 6c6c  mber "2113" will
+00011ea0: 2062 6520 7573 6564 2074 6f0a 636f 6e73   be used to.cons
+00011eb0: 7472 7563 7420 6752 5043 2074 6172 6765  truct gRPC targe
+00011ec0: 7473 2066 726f 6d20 7468 6520 6164 6472  ts from the addr
+00011ed0: 6573 7365 7320 6f62 7461 696e 6564 2066  esses obtained f
+00011ee0: 726f 6d20 2741 2720 7265 636f 7264 7320  rom 'A' records 
+00011ef0: 7072 6f76 6964 6564 2062 7920 7468 650a  provided by the.
+00011f00: 444e 5320 7365 7276 6572 2e20 5468 6572  DNS server. Ther
+00011f10: 6566 6f72 652c 2069 6620 796f 7520 7761  efore, if you wa
+00011f20: 6e74 2074 6f20 7573 6520 7468 6520 2265  nt to use the "e
+00011f30: 7364 622b 6469 7363 6f76 6572 2220 5552  sdb+discover" UR
+00011f40: 4920 7363 6865 6d65 2c20 796f 7520 7769  I scheme, you wi
+00011f50: 6c6c 0a6e 6565 6420 746f 2063 6f6e 6669  ll.need to confi
+00011f60: 6775 7265 2044 4e53 2077 6865 6e20 7365  gure DNS when se
+00011f70: 7474 696e 6720 7570 2079 6f75 7220 4576  tting up your Ev
+00011f80: 656e 7453 746f 7265 4442 2063 6c75 7374  entStoreDB clust
+00011f90: 6572 2e0a 0a57 6974 6820 626f 7468 2074  er...With both t
+00011fa0: 6865 2022 6573 6462 2220 616e 6420 2265  he "esdb" and "e
+00011fb0: 7364 622b 6469 736f 6376 6572 2220 5552  sdb+disocver" UR
+00011fc0: 4920 7363 6865 6d65 732c 2074 6865 2063  I schemes, the c
+00011fd0: 6c69 656e 7420 6669 7273 746c 7920 6f62  lient firstly ob
+00011fe0: 7461 696e 730a 6120 6c69 7374 206f 6620  tains.a list of 
+00011ff0: 6752 5043 2074 6172 6765 7473 3a20 6569  gRPC targets: ei
+00012000: 7468 6572 2064 6972 6563 746c 7920 6672  ther directly fr
+00012010: 6f6d 2022 6573 6462 2220 636f 6e6e 6563  om "esdb" connec
+00012020: 7469 6f6e 2073 7472 696e 6773 3b20 6f72  tion strings; or
+00012030: 2069 6e64 6972 6563 746c 790a 6672 6f6d   indirectly.from
+00012040: 2022 6573 6462 2b64 6973 636f 7665 7222   "esdb+discover"
+00012050: 2063 6f6e 6e65 6374 696f 6e20 7374 7269   connection stri
+00012060: 6e67 7320 7669 6120 444e 532e 2054 6869  ngs via DNS. Thi
+00012070: 7320 6c69 7374 206f 6620 7461 7267 6574  s list of target
+00012080: 7320 6973 206b 6e6f 776e 2061 7320 7468  s is known as th
+00012090: 650a 2267 6f73 7369 7020 7365 6564 222e  e."gossip seed".
+000120a0: 2054 6865 2063 6c69 656e 7420 7769 6c6c   The client will
+000120b0: 2074 6865 6e20 6174 7465 6d70 7420 746f   then attempt to
+000120c0: 2063 6f6e 6e65 6374 2074 6f20 6561 6368   connect to each
+000120d0: 2067 5250 4320 7461 7267 6574 2069 6e20   gRPC target in 
+000120e0: 7475 726e 2c0a 6174 7465 6d70 7469 6e67  turn,.attempting
+000120f0: 2074 6f20 6361 6c6c 2074 6865 2045 7665   to call the Eve
+00012100: 6e74 5374 6f72 6544 4220 476f 7373 6970  ntStoreDB Gossip
+00012110: 2041 5049 2074 6f20 6f62 7461 696e 2069   API to obtain i
+00012120: 6e66 6f72 6d61 7469 6f6e 2061 626f 7574  nformation about
+00012130: 2074 6865 0a45 7665 6e74 5374 6f72 6544   the.EventStoreD
+00012140: 4220 636c 7573 7465 722e 2041 206d 656d  B cluster. A mem
+00012150: 6265 7220 6f66 2074 6865 2063 6c75 7374  ber of the clust
+00012160: 6572 2069 7320 7365 6c65 6374 6564 2062  er is selected b
+00012170: 7920 7468 6520 636c 6965 6e74 2c20 6163  y the client, ac
+00012180: 636f 7264 696e 670a 746f 2074 6865 2022  cording.to the "
+00012190: 6e6f 6465 2070 7265 6665 7265 6e63 6522  node preference"
+000121a0: 206f 7074 696f 6e20 2873 6565 2062 656c   option (see bel
+000121b0: 6f77 292e 2054 6865 2063 6c69 656e 7420  ow). The client 
+000121c0: 6d61 7920 7468 656e 206e 6565 6420 746f  may then need to
+000121d0: 2063 6c6f 7365 2069 7473 0a63 6f6e 6e65   close its.conne
+000121e0: 6374 696f 6e20 616e 6420 7265 636f 6e6e  ction and reconn
+000121f0: 6563 7420 746f 2074 6865 2073 656c 6563  ect to the selec
+00012200: 7465 6420 7365 7276 6572 2e0a 0a49 6e20  ted server...In 
+00012210: 626f 7468 2074 6865 2022 6573 6462 2220  both the "esdb" 
+00012220: 616e 6420 2265 7364 622b 6469 7363 6f76  and "esdb+discov
+00012230: 6572 2220 7363 6865 6d65 732c 2074 6865  er" schemes, the
+00012240: 2055 5249 206d 6179 2069 6e63 6c75 6465   URI may include
+00012250: 2061 2075 7365 7220 696e 666f 2073 7472   a user info str
+00012260: 696e 672e 0a49 6620 6974 2065 7869 7374  ing..If it exist
+00012270: 7320 696e 2074 6865 2055 5249 2c20 7468  s in the URI, th
+00012280: 6520 7573 6572 2069 6e66 6f20 7374 7269  e user info stri
+00012290: 6e67 206d 7573 7420 6265 2073 6570 6172  ng must be separ
+000122a0: 6174 6564 2066 726f 6d20 7468 6520 7265  ated from the re
+000122b0: 7374 206f 6620 7468 6520 5552 490a 7769  st of the URI.wi
+000122c0: 7468 2074 6865 2022 4022 2063 6861 7261  th the "@" chara
+000122d0: 6374 6572 2e20 5468 6520 7573 6572 2069  cter. The user i
+000122e0: 6e66 6f20 7374 7269 6e67 206d 7573 7420  nfo string must 
+000122f0: 696e 636c 7564 6520 6120 7573 6572 6e61  include a userna
+00012300: 6d65 2061 6e64 2061 2070 6173 7377 6f72  me and a passwor
+00012310: 642c 0a73 6570 6172 6174 6564 2077 6974  d,.separated wit
+00012320: 6820 7468 6520 223a 2220 6368 6172 6163  h the ":" charac
+00012330: 7465 722e 0a0a 2020 2020 7573 6572 2d69  ter...    user-i
+00012340: 6e66 6f20 3d20 7573 6572 6e61 6d65 202c  nfo = username ,
+00012350: 2022 3a22 202c 2070 6173 7377 6f72 6420   ":" , password 
+00012360: 3b0a 0a54 6865 2075 7365 7220 696e 666f  ;..The user info
+00012370: 2069 7320 7365 6e74 2062 7920 7468 6520   is sent by the 
+00012380: 636c 6965 6e74 2061 7320 2263 616c 6c20  client as "call 
+00012390: 6372 6564 656e 7469 616c 7322 2069 6e20  credentials" in 
+000123a0: 6561 6368 2063 616c 6c20 746f 2061 2022  each call to a "
+000123b0: 7365 6375 7265 220a 7365 7276 6572 2c20  secure".server, 
+000123c0: 696e 2061 2022 6261 7369 6320 6175 7468  in a "basic auth
+000123d0: 2220 6175 7468 6f72 697a 6174 696f 6e20  " authorization 
+000123e0: 6865 6164 6572 2e20 5468 6973 2061 7574  header. This aut
+000123f0: 686f 7269 7a61 7469 6f6e 2068 6561 6465  horization heade
+00012400: 7220 6973 2075 7365 6420 6279 0a74 6865  r is used by.the
+00012410: 2073 6572 7665 7220 746f 2061 7574 6865   server to authe
+00012420: 6e74 6963 6174 6520 7468 6520 636c 6965  nticate the clie
+00012430: 6e74 2e20 5468 6520 6175 7468 6f72 697a  nt. The authoriz
+00012440: 6174 696f 6e20 6865 6164 6572 2069 7320  ation header is 
+00012450: 6e6f 7420 7365 6e74 2074 6f0a 2269 6e73  not sent to."ins
+00012460: 6563 7572 6522 2073 6572 7665 7273 2e0a  ecure" servers..
+00012470: 0a49 6e20 626f 7468 2074 6865 2022 6573  .In both the "es
+00012480: 6462 2220 616e 6420 2265 7364 622b 6469  db" and "esdb+di
+00012490: 7363 6f76 6572 2220 7363 6865 6d65 732c  scover" schemes,
+000124a0: 2074 6865 206f 7074 696f 6e61 6c20 7175   the optional qu
+000124b0: 6572 7920 7374 7269 6e67 206d 7573 7420  ery string must 
+000124c0: 6265 206f 6e65 0a6f 7220 6d61 6e79 2066  be one.or many f
+000124d0: 6965 6c64 2d76 616c 7565 2061 7267 756d  ield-value argum
+000124e0: 656e 7473 2c20 7365 7061 7261 7465 6420  ents, separated 
+000124f0: 6672 6f6d 2065 6163 6820 6f74 6865 7220  from each other 
+00012500: 7769 7468 2074 6865 2022 2622 2063 6861  with the "&" cha
+00012510: 7261 6374 6572 2e0a 0a20 2020 2071 7565  racter...    que
+00012520: 7279 2d73 7472 696e 6720 3d20 6669 656c  ry-string = fiel
+00012530: 642d 7661 6c75 652c 207b 2022 2622 2c20  d-value, { "&", 
+00012540: 6669 656c 642d 7661 6c75 6520 7d20 3b0a  field-value } ;.
+00012550: 0a45 6163 6820 6669 656c 642d 7661 6c75  .Each field-valu
+00012560: 6520 6172 6775 6d65 6e74 206d 7573 7420  e argument must 
+00012570: 6265 206f 6e65 206f 6620 7468 6520 7375  be one of the su
+00012580: 7070 6f72 7465 6420 6669 656c 6473 2c20  pported fields, 
+00012590: 616e 6420 616e 0a61 7070 726f 7072 6961  and an.appropria
+000125a0: 7465 2076 616c 7565 2c20 7365 7061 7261  te value, separa
+000125b0: 7465 6420 7769 7468 2074 6865 2022 3d22  ted with the "="
+000125c0: 2063 6861 7261 6374 6572 2e0a 0a20 2020   character...   
+000125d0: 2066 6965 6c64 2d76 616c 7565 203d 2028   field-value = (
+000125e0: 2022 546c 7322 2c20 223d 2220 2c20 2274   "Tls", "=" , "t
+000125f0: 7275 6522 207c 2022 6661 6c73 6522 2029  rue" | "false" )
+00012600: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012610: 207c 2028 2022 546c 7356 6572 6966 7943   | ( "TlsVerifyC
+00012620: 6572 7422 2c20 223d 2220 2c20 2274 7275  ert", "=" , "tru
+00012630: 6522 207c 2022 6661 6c73 6522 2029 0a20  e" | "false" ). 
+00012640: 2020 2020 2020 2020 2020 2020 2020 207c                 |
+00012650: 2028 2022 436f 6e6e 6563 7469 6f6e 4e61   ( "ConnectionNa
+00012660: 6d65 222c 2022 3d22 202c 2073 7472 696e  me", "=" , strin
+00012670: 6720 290a 2020 2020 2020 2020 2020 2020  g ).            
+00012680: 2020 2020 7c20 2820 224e 6f64 6550 7265      | ( "NodePre
+00012690: 6665 7265 6e63 6522 2c20 223d 2220 2c20  ference", "=" , 
+000126a0: 226c 6561 6465 7222 207c 2022 666f 6c6c  "leader" | "foll
+000126b0: 6f77 6572 2220 7c20 2272 6561 646f 6e6c  ower" | "readonl
+000126c0: 7972 6570 6c69 6361 2220 7c20 2272 616e  yreplica" | "ran
+000126d0: 646f 6d22 2029 0a20 2020 2020 2020 2020  dom" ).         
+000126e0: 2020 2020 2020 207c 2028 2022 4465 6661         | ( "Defa
+000126f0: 756c 7444 6561 646c 696e 6522 2c20 223d  ultDeadline", "=
+00012700: 2220 2c20 696e 7465 6765 7220 290a 2020  " , integer ).  
+00012710: 2020 2020 2020 2020 2020 2020 2020 7c20                | 
+00012720: 2820 2247 6f73 7369 7054 696d 656f 7574  ( "GossipTimeout
+00012730: 222c 2022 3d22 202c 2069 6e74 6567 6572  ", "=" , integer
+00012740: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
+00012750: 2020 207c 2028 2022 4d61 7844 6973 636f     | ( "MaxDisco
+00012760: 7665 7241 7474 656d 7074 7322 2c20 223d  verAttempts", "=
+00012770: 2220 2c20 696e 7465 6765 7220 290a 2020  " , integer ).  
+00012780: 2020 2020 2020 2020 2020 2020 2020 7c20                | 
+00012790: 2820 2244 6973 636f 7665 7279 496e 7465  ( "DiscoveryInte
+000127a0: 7276 616c 222c 2022 3d22 202c 2069 6e74  rval", "=" , int
+000127b0: 6567 6572 2029 0a20 2020 2020 2020 2020  eger ).         
+000127c0: 2020 2020 2020 207c 2028 2022 4d61 7844         | ( "MaxD
+000127d0: 6973 636f 7665 7241 7474 656d 7074 7322  iscoverAttempts"
+000127e0: 2c20 223d 2220 2c20 696e 7465 6765 7220  , "=" , integer 
+000127f0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00012800: 2020 7c20 2820 224b 6565 7041 6c69 7665    | ( "KeepAlive
+00012810: 496e 7465 7276 616c 222c 2022 3d22 202c  Interval", "=" ,
+00012820: 2069 6e74 6567 6572 2029 0a20 2020 2020   integer ).     
+00012830: 2020 2020 2020 2020 2020 207c 2028 2022             | ( "
+00012840: 4b65 6570 416c 6976 6549 6e74 6572 7661  KeepAliveInterva
+00012850: 6c22 2c20 223d 2220 2c20 696e 7465 6765  l", "=" , intege
+00012860: 7220 2920 3b0a 0a54 6865 2074 6162 6c65  r ) ;..The table
+00012870: 2062 656c 6f77 2064 6573 6372 6962 6573   below describes
+00012880: 2074 6865 2071 7565 7279 2066 6965 6c64   the query field
+00012890: 2d76 616c 7565 7320 7375 7070 6f72 7465  -values supporte
+000128a0: 6420 6279 2074 6869 7320 636c 6965 6e74  d by this client
+000128b0: 2e0a 0a7c 2046 6965 6c64 2020 2020 2020  ...| Field      
+000128c0: 2020 2020 2020 2020 207c 2056 616c 7565           | Value
+000128d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000128e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000128f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012910: 207c 2044 6573 6372 6970 7469 6f6e 2020   | Description  
+00012920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000129a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000129b0: 2020 2020 207c 0a7c 2d2d 2d2d 2d2d 2d2d       |.|--------
+000129c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d7c 2d2d  -------------|--
+000129d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000129e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000129f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012a00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012a10: 2d2d 2d2d 2d7c 2d2d 2d2d 2d2d 2d2d 2d2d  -----|----------
+00012a20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012a30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012a40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012a50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012a60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012a70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012a80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012a90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012aa0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012ab0: 2d2d 2d2d 2d2d 2d2d 2d7c 0a7c 2054 6c73  ---------|.| Tls
+00012ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012ad0: 207c 2022 7472 7565 222c 2022 6661 6c73   | "true", "fals
+00012ae0: 6522 2028 6465 6661 756c 743a 2022 7472  e" (default: "tr
+00012af0: 7565 2229 2020 2020 2020 2020 2020 2020  ue")            
+00012b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012b10: 2020 2020 2020 2020 207c 2049 6620 2274           | If "t
+00012b20: 7275 6522 2074 6865 2063 6c69 656e 7420  rue" the client 
+00012b30: 7769 6c6c 2063 7265 6174 6520 6120 2273  will create a "s
+00012b40: 6563 7572 6522 2067 5250 4320 6368 616e  ecure" gRPC chan
+00012b50: 6e65 6c2e 2049 6620 2266 616c 7365 2220  nel. If "false" 
+00012b60: 7468 6520 636c 6965 6e74 2077 696c 6c20  the client will 
+00012b70: 6372 6561 7465 2061 6e20 2269 6e73 6563  create an "insec
+00012b80: 7572 6522 2067 5250 4320 6368 616e 6e65  ure" gRPC channe
+00012b90: 6c2e 2054 6869 7320 6d75 7374 206d 6174  l. This must mat
+00012ba0: 6368 2074 6865 2073 6572 7665 7220 636f  ch the server co
+00012bb0: 6e66 6967 7572 6174 696f 6e2e 207c 0a7c  nfiguration. |.|
+00012bc0: 2054 6c73 5665 7269 6679 4365 7274 2020   TlsVerifyCert  
+00012bd0: 2020 2020 207c 2022 7472 7565 222c 2022       | "true", "
+00012be0: 6661 6c73 6522 2028 6465 6661 756c 743a  false" (default:
+00012bf0: 2022 7472 7565 2229 2020 2020 2020 2020   "true")        
+00012c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012c10: 2020 2020 2020 2020 2020 2020 207c 2054               | T
+00012c20: 6869 7320 7661 6c75 6520 6973 2063 7572  his value is cur
+00012c30: 7265 6e74 6c79 2069 676e 6f72 6564 2e20  rently ignored. 
+00012c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012cc0: 207c 0a7c 2043 6f6e 6e65 6374 696f 6e4e   |.| ConnectionN
+00012cd0: 616d 6520 2020 2020 207c 2073 7472 696e  ame      | strin
+00012ce0: 6720 2864 6566 6175 6c74 3a20 6175 746f  g (default: auto
+00012cf0: 2d67 656e 6572 6174 6564 2076 6572 7369  -generated versi
+00012d00: 6f6e 2d34 2055 5549 4429 2020 2020 2020  on-4 UUID)      
+00012d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012d20: 207c 2053 656e 7420 696e 2063 616c 6c20   | Sent in call 
+00012d30: 6d65 7461 6461 7461 2066 6f72 2065 7665  metadata for eve
+00012d40: 7279 2063 616c 6c2c 2074 6f20 6964 656e  ry call, to iden
+00012d50: 7469 6679 2074 6865 2063 6c69 656e 7420  tify the client 
+00012d60: 746f 2074 6865 2063 6c75 7374 6572 2e20  to the cluster. 
+00012d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012dc0: 2020 2020 207c 0a7c 204e 6f64 6550 7265       |.| NodePre
+00012dd0: 6665 7265 6e63 6520 2020 2020 207c 2022  ference      | "
+00012de0: 6c65 6164 6572 222c 2022 666f 6c6c 6f77  leader", "follow
+00012df0: 6572 222c 2022 7265 6164 6f6e 6c79 7265  er", "readonlyre
+00012e00: 706c 6963 6122 2c20 2272 616e 646f 6d22  plica", "random"
+00012e10: 2028 6465 6661 756c 743a 2022 6c65 6164   (default: "lead
+00012e20: 6572 2229 207c 2054 6865 206e 6f64 6520  er") | The node 
+00012e30: 7374 6174 6520 7072 6566 6572 7265 6420  state preferred 
+00012e40: 6279 2074 6865 2063 6c69 656e 742e 2054  by the client. T
+00012e50: 6865 2063 6c69 656e 7420 7769 6c6c 2073  he client will s
+00012e60: 656c 6563 7420 6120 6e6f 6465 2066 726f  elect a node fro
+00012e70: 6d20 7468 6520 636c 7573 7465 7220 696e  m the cluster in
+00012e80: 666f 2072 6563 6569 7665 6420 6672 6f6d  fo received from
+00012e90: 2074 6865 2047 6f73 7369 7020 4150 4920   the Gossip API 
+00012ea0: 6163 636f 7264 696e 6720 746f 2074 6869  according to thi
+00012eb0: 7320 7072 6566 6572 656e 6365 2e20 2020  s preference.   
+00012ec0: 2020 2020 2020 2020 207c 0a7c 2044 6566           |.| Def
+00012ed0: 6175 6c74 4465 6164 6c69 6e65 2020 2020  aultDeadline    
+00012ee0: 207c 2069 6e74 6567 6572 2028 6465 6661   | integer (defa
+00012ef0: 756c 743a 2060 4e6f 6e65 6029 2020 2020  ult: `None`)    
+00012f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012f20: 2020 2020 2020 2020 207c 2054 6865 2064           | The d
+00012f30: 6566 6175 6c74 2076 616c 7565 2028 696e  efault value (in
+00012f40: 2073 6563 6f6e 6473 2920 6f66 2074 6865   seconds) of the
+00012f50: 2060 7469 6d65 6f75 7460 2061 7267 756d   `timeout` argum
+00012f60: 656e 7420 6f66 2063 6c69 656e 7420 2277  ent of client "w
+00012f70: 7269 7465 2220 6d65 7468 6f64 7320 7375  rite" methods su
+00012f80: 6368 2061 7320 6061 7070 656e 645f 6576  ch as `append_ev
+00012f90: 656e 7473 2829 602e 2020 2020 2020 2020  ents()`.        
+00012fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012fc0: 2020 2020 2020 2020 2020 2020 207c 0a7c               |.|
+00012fd0: 2047 6f73 7369 7054 696d 656f 7574 2020   GossipTimeout  
+00012fe0: 2020 2020 207c 2069 6e74 6567 6572 2028       | integer (
+00012ff0: 6465 6661 756c 743a 2035 2920 2020 2020  default: 5)     
+00013000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013020: 2020 2020 2020 2020 2020 2020 207c 2054               | T
+00013030: 6865 2064 6566 6175 6c74 2076 616c 7565  he default value
+00013040: 2028 696e 2073 6563 6f6e 6473 2920 6f66   (in seconds) of
+00013050: 2074 6865 2060 7469 6d65 6f75 7460 2061   the `timeout` a
+00013060: 7267 756d 656e 7420 6f66 2067 6f73 7369  rgument of gossi
+00013070: 7020 7265 6164 206d 6574 686f 6473 2c20  p read methods, 
+00013080: 7375 6368 2061 7320 6072 6561 645f 676f  such as `read_go
+00013090: 7373 6970 2829 602e 2020 2020 2020 2020  ssip()`.        
+000130a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000130b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000130c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000130d0: 207c 0a7c 204d 6178 4469 7363 6f76 6572   |.| MaxDiscover
+000130e0: 4174 7465 6d70 7473 207c 2069 6e74 6567  Attempts | integ
+000130f0: 6572 2028 6465 6661 756c 743a 2031 3029  er (default: 10)
+00013100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013130: 207c 2054 6865 206e 756d 6265 7220 6f66   | The number of
+00013140: 2061 7474 656d 7074 7320 746f 2072 6561   attempts to rea
+00013150: 6420 676f 7373 6970 2077 6865 6e20 636f  d gossip when co
+00013160: 6e6e 6563 7469 6e67 206f 7220 7265 636f  nnecting or reco
+00013170: 6e6e 6563 7469 6e67 2074 6f20 6120 636c  nnecting to a cl
+00013180: 7573 7465 7220 6d65 6d62 6572 2e20 2020  uster member.   
+00013190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000131a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000131b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000131c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000131d0: 2020 2020 207c 0a7c 2044 6973 636f 7665       |.| Discove
+000131e0: 7279 496e 7465 7276 616c 2020 207c 2069  ryInterval   | i
+000131f0: 6e74 6567 6572 2028 6465 6661 756c 743a  nteger (default:
+00013200: 2031 3030 2920 2020 2020 2020 2020 2020   100)           
+00013210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013230: 2020 2020 207c 2048 6f77 206c 6f6e 6720       | How long 
+00013240: 746f 2077 6169 7420 2869 6e20 6d69 6c6c  to wait (in mill
+00013250: 6973 6563 6f6e 6473 2920 6265 7477 6565  iseconds) betwee
+00013260: 6e20 676f 7373 6970 2072 6574 7269 6573  n gossip retries
+00013270: 2e20 2020 2020 2020 2020 2020 2020 2020  .               
+00013280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000132a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000132b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000132c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000132d0: 2020 2020 2020 2020 207c 0a7c 204b 6565           |.| Kee
+000132e0: 7041 6c69 7665 496e 7465 7276 616c 2020  pAliveInterval  
+000132f0: 207c 2069 6e74 6567 6572 2028 6465 6661   | integer (defa
+00013300: 756c 743a 2060 4e6f 6e65 6029 2020 2020  ult: `None`)    
+00013310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013330: 2020 2020 2020 2020 207c 2054 6865 2076           | The v
+00013340: 616c 7565 206f 6620 7468 6520 2267 7270  alue of the "grp
+00013350: 632e 6b65 6570 616c 6976 655f 6d73 2220  c.keepalive_ms" 
+00013360: 6752 5043 2063 6861 6e6e 656c 206f 7074  gRPC channel opt
+00013370: 696f 6e2e 2020 2020 2020 2020 2020 2020  ion.            
+00013380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000133a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000133b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000133c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000133d0: 2020 2020 2020 2020 2020 2020 207c 0a7c               |.|
+000133e0: 204b 6565 7041 6c69 7665 5469 6d65 6f75   KeepAliveTimeou
+000133f0: 7420 2020 207c 2069 6e74 6567 6572 2028  t    | integer (
+00013400: 6465 6661 756c 743a 2060 4e6f 6e65 6029  default: `None`)
+00013410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013430: 2020 2020 2020 2020 2020 2020 207c 2054               | T
+00013440: 6865 2076 616c 7565 206f 6620 7468 6520  he value of the 
+00013450: 2267 7270 632e 6b65 6570 616c 6976 655f  "grpc.keepalive_
+00013460: 7469 6d65 6f75 745f 6d73 2220 6752 5043  timeout_ms" gRPC
+00013470: 2063 6861 6e6e 656c 206f 7074 696f 6e2e   channel option.
+00013480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013490: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000134a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000134b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000134c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000134d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000134e0: 207c 0a0a 0a48 6572 6520 6172 6520 736f   |...Here are so
+000134f0: 6d65 2065 7861 6d70 6c65 7320 6f66 2045  me examples of E
+00013500: 7665 6e74 5374 6f72 6544 4220 636f 6e6e  ventStoreDB conn
+00013510: 6563 7469 6f6e 2073 7472 696e 6720 5552  ection string UR
+00013520: 4973 2e0a 0a20 2020 2023 2047 6574 2063  Is...    # Get c
+00013530: 6c75 7374 6572 2069 6e66 6f20 6672 6f6d  luster info from
+00013540: 2073 6563 7572 6520 7365 7276 6572 2073   secure server s
+00013550: 6f63 6b65 7420 6c6f 6361 6c68 6f73 743a  ocket localhost:
+00013560: 3231 3133 2c0a 2020 2020 2320 616e 6420  2113,.    # and 
+00013570: 7573 6520 2261 646d 696e 2220 616e 6420  use "admin" and 
+00013580: 2263 6861 6e67 6569 7422 2061 7320 7573  "changeit" as us
+00013590: 6572 6e61 6d65 2061 6e64 2070 6173 7377  ername and passw
+000135a0: 6f72 640a 2020 2020 2320 7768 656e 206d  ord.    # when m
+000135b0: 616b 696e 6720 6361 6c6c 7320 746f 2045  aking calls to E
+000135c0: 7665 6e74 5374 6f72 6544 4220 4150 4920  ventStoreDB API 
+000135d0: 6d65 7468 6f64 732e 0a0a 2020 2020 6573  methods...    es
+000135e0: 6462 3a2f 2f61 646d 696e 3a63 6861 6e67  db://admin:chang
+000135f0: 6569 7440 6c6f 6361 6c68 6f73 743a 3231  eit@localhost:21
+00013600: 3133 0a0a 0a20 2020 2023 2047 6574 2063  13...    # Get c
+00013610: 6c75 7374 6572 2069 6e66 6f20 6672 6f6d  luster info from
+00013620: 2069 6e73 6563 7572 6520 7365 7276 6572   insecure server
+00013630: 2073 6f63 6b65 7420 3132 372e 302e 302e   socket 127.0.0.
+00013640: 313a 3231 3134 0a0a 2020 2020 6573 6462  1:2114..    esdb
+00013650: 3a2f 2f31 3237 2e30 2e30 2e31 3a32 3131  ://127.0.0.1:211
+00013660: 343f 546c 733d 6661 6c73 650a 0a0a 2020  4?Tls=false...  
+00013670: 2020 2320 4765 7420 636c 7573 7465 7220    # Get cluster 
+00013680: 696e 666f 2066 726f 6d20 6164 6472 6573  info from addres
+00013690: 7365 7320 696e 2027 4127 2072 6563 6f72  ses in 'A' recor
+000136a0: 6473 2066 6f72 2063 6c75 7374 6572 312e  ds for cluster1.
+000136b0: 6578 616d 706c 652e 636f 6d2c 0a20 2020  example.com,.   
+000136c0: 2023 2061 6e64 2075 7365 2061 2064 6566   # and use a def
+000136d0: 6175 6c74 2064 6561 646c 696e 6520 666f  ault deadline fo
+000136e0: 7220 6d61 6b69 6e67 2063 616c 6c73 2074  r making calls t
+000136f0: 6f20 4576 656e 7453 746f 7265 2041 5049  o EventStore API
+00013700: 206d 6574 686f 642e 0a0a 2020 2020 6573   method...    es
+00013710: 6462 2b64 6973 636f 7665 723a 2f2f 6164  db+discover://ad
+00013720: 6d69 6e3a 6368 616e 6765 6974 4063 6c75  min:changeit@clu
+00013730: 7374 6572 312e 6578 616d 706c 652e 636f  ster1.example.co
+00013740: 6d3f 4465 6661 756c 7444 6561 646c 696e  m?DefaultDeadlin
+00013750: 653d 350a 0a0a 2020 2020 2320 4765 7420  e=5...    # Get 
+00013760: 636c 7573 7465 7220 696e 666f 2066 726f  cluster info fro
+00013770: 6d20 6569 7468 6572 206c 6f63 616c 686f  m either localho
+00013780: 7374 3a32 3131 3120 6f72 206c 6f63 616c  st:2111 or local
+00013790: 686f 7374 3a32 3131 3220 6f72 0a20 2020  host:2112 or.   
+000137a0: 2023 206c 6f63 616c 686f 7374 3a32 3131   # localhost:211
+000137b0: 332c 2061 6e64 2074 6865 6e20 636f 6e6e  3, and then conn
+000137c0: 6563 7420 746f 2061 2066 6f6c 6c6f 7765  ect to a followe
+000137d0: 7220 6e6f 6465 2069 6e20 7468 6520 636c  r node in the cl
+000137e0: 7573 7465 722e 0a0a 2020 2020 6573 6462  uster...    esdb
+000137f0: 3a2f 2f61 646d 696e 3a63 6861 6e67 6569  ://admin:changei
+00013800: 7440 6c6f 6361 6c68 6f73 743a 3231 3131  t@localhost:2111
+00013810: 2c6c 6f63 616c 686f 7374 3a32 3131 322c  ,localhost:2112,
+00013820: 6c6f 6361 6c68 6f73 743a 3231 3133 3f4e  localhost:2113?N
+00013830: 6f64 6550 7265 6665 7265 6e63 653d 666f  odePreference=fo
+00013840: 6c6c 6f77 6572 0a0a 0a20 2020 2023 2047  llower...    # G
+00013850: 6574 2063 6c75 7374 6572 2069 6e66 6f20  et cluster info 
+00013860: 6672 6f6d 2061 6464 7265 7373 6573 2069  from addresses i
+00013870: 6e20 2741 2720 7265 636f 7264 7320 666f  n 'A' records fo
+00013880: 7220 636c 7573 7465 7231 2e65 7861 6d70  r cluster1.examp
+00013890: 6c65 2e63 6f6d 2c0a 2020 2020 2320 616e  le.com,.    # an
+000138a0: 6420 636f 6e66 6967 7572 6520 226b 6565  d configure "kee
+000138b0: 7020 616c 6976 6522 2074 696d 656f 7574  p alive" timeout
+000138c0: 2061 6e64 2069 6e74 6572 7661 6c20 696e   and interval in
+000138d0: 2074 6865 2067 5250 4320 6368 616e 6e65   the gRPC channe
+000138e0: 6c2e 0a0a 2020 2020 6573 6462 2b64 6973  l...    esdb+dis
+000138f0: 636f 7665 723a 2f2f 6164 6d69 6e3a 6368  cover://admin:ch
+00013900: 616e 6765 6974 4063 6c75 7374 6572 312e  angeit@cluster1.
+00013910: 6578 616d 706c 652e 636f 6d3f 4b65 6570  example.com?Keep
+00013920: 416c 6976 6549 6e74 6572 7661 6c3d 3130  AliveInterval=10
+00013930: 3030 3026 4b65 6570 416c 6976 6554 696d  000&KeepAliveTim
+00013940: 656f 7574 3d31 3030 3030 0a0a 0a50 6c65  eout=10000...Ple
+00013950: 6173 6520 6e6f 7465 2c20 7468 6520 636c  ase note, the cl
+00013960: 6965 6e74 2069 7320 696e 7365 6e73 6974  ient is insensit
+00013970: 6976 6520 746f 2074 6865 2063 6173 6520  ive to the case 
+00013980: 6f66 2066 6965 6c64 7320 616e 6420 7661  of fields and va
+00013990: 6c75 6573 2e20 4966 2066 6965 6c64 7320  lues. If fields 
+000139a0: 6172 650a 7265 7065 6174 6564 2069 6e20  are.repeated in 
+000139b0: 7468 6520 7175 6572 7920 7374 7269 6e67  the query string
+000139c0: 2c20 7468 6520 7175 6572 7920 7374 7269  , the query stri
+000139d0: 6e67 2077 696c 6c20 6265 2070 6172 7365  ng will be parse
+000139e0: 6420 7769 7468 6f75 7420 6572 726f 722e  d without error.
+000139f0: 2048 6f77 6576 6572 2c0a 7468 6520 636f   However,.the co
+00013a00: 6e6e 6563 7469 6f6e 206f 7074 696f 6e73  nnection options
+00013a10: 2075 7365 6420 6279 2074 6865 2063 6c69   used by the cli
+00013a20: 656e 7420 7769 6c6c 2075 7365 2074 6865  ent will use the
+00013a30: 2076 616c 7565 206f 6620 7468 6520 6669   value of the fi
+00013a40: 7273 7420 6669 656c 642e 2041 6c6c 0a74  rst field. All.t
+00013a50: 6865 206f 7468 6572 2066 6965 6c64 2d76  he other field-v
+00013a60: 616c 7565 7320 696e 2074 6865 2071 7565  alues in the que
+00013a70: 7279 2073 7472 696e 6720 7769 7468 2074  ry string with t
+00013a80: 6865 2073 616d 6520 6669 656c 6420 6e61  he same field na
+00013a90: 6d65 2077 696c 6c20 6265 2069 676e 6f72  me will be ignor
+00013aa0: 6564 2e0a 4669 656c 6473 2077 6974 686f  ed..Fields witho
+00013ab0: 7574 2076 616c 7565 7320 7769 6c6c 2061  ut values will a
+00013ac0: 6c73 6f20 6265 2069 676e 6f72 6564 2e0a  lso be ignored..
+00013ad0: 0a49 6620 7468 6520 636c 6965 6e74 2773  .If the client's
+00013ae0: 206e 6f64 6520 7072 6566 6572 656e 6365   node preference
+00013af0: 2069 7320 226c 6561 6465 7222 2061 6e64   is "leader" and
+00013b00: 2074 6865 206e 6f64 6520 6265 636f 6d65   the node become
+00013b10: 7320 610a 2266 6f6c 6c6f 7765 7222 2c20  s a."follower", 
+00013b20: 7468 6520 636c 6965 6e74 2077 696c 6c20  the client will 
+00013b30: 6174 7465 6d70 7420 746f 2072 6563 6f6e  attempt to recon
+00013b40: 6e65 6374 2074 6f20 7468 6520 6375 7272  nect to the curr
+00013b50: 656e 7420 6c65 6164 6572 2077 6865 6e20  ent leader when 
+00013b60: 6120 6d65 7468 6f64 0a69 7320 6361 6c6c  a method.is call
+00013b70: 6564 2074 6861 7420 6578 7065 6374 7320  ed that expects 
+00013b80: 746f 2063 616c 6c20 6120 6c65 6164 6572  to call a leader
+00013b90: 2e20 4d65 7468 6f64 7320 7768 6963 6820  . Methods which 
+00013ba0: 6d75 7461 7465 2074 6865 2073 7461 7465  mutate the state
+00013bb0: 206f 6620 7468 6520 6461 7461 6261 7365   of the database
+00013bc0: 0a65 7870 6563 7420 746f 2063 616c 6c20  .expect to call 
+00013bd0: 6120 6c65 6164 6572 2e20 466f 7220 7375  a leader. For su
+00013be0: 6368 206d 6574 686f 6473 2c20 7468 6520  ch methods, the 
+00013bf0: 4854 5450 2068 6561 6465 7222 7265 7175  HTTP header"requ
+00013c00: 6972 6573 2d6c 6561 6465 7222 2069 7320  ires-leader" is 
+00013c10: 7365 7420 746f 0a22 7472 7565 222c 2061  set to."true", a
+00013c20: 6e64 2074 6869 7320 6865 6164 6572 2069  nd this header i
+00013c30: 7320 6f62 7365 7276 6564 2062 7920 7468  s observed by th
+00013c40: 6520 7365 7276 6572 2c20 616e 6420 736f  e server, and so
+00013c50: 2061 206e 6f64 6520 7768 6963 6820 6973   a node which is
+00013c60: 206e 6f74 2061 206c 6561 6465 720a 7468   not a leader.th
+00013c70: 6174 2072 6563 6569 7665 7320 7375 6368  at receives such
+00013c80: 2061 2072 6571 7565 7374 2077 696c 6c20   a request will 
+00013c90: 7265 7475 726e 2061 6e20 6572 726f 722e  return an error.
+00013ca0: 2054 6869 7320 6572 726f 7220 6973 2064   This error is d
+00013cb0: 6574 6563 7465 6420 6279 2074 6865 2063  etected by the c
+00013cc0: 6c69 656e 742c 0a77 6869 6368 2077 696c  lient,.which wil
+00013cd0: 6c20 7468 656e 2063 6c6f 7365 2074 6865  l then close the
+00013ce0: 2063 7572 7265 6e74 2067 5250 4320 636f   current gRPC co
+00013cf0: 6e6e 6563 7469 6f6e 2061 6e64 2063 7265  nnection and cre
+00013d00: 6174 6520 6120 6e65 7720 636f 6e6e 6563  ate a new connec
+00013d10: 7469 6f6e 2074 6f20 7468 650a 6c65 6164  tion to the.lead
+00013d20: 6572 2e20 5468 6520 7265 7175 6573 7420  er. The request 
+00013d30: 7769 6c6c 2074 6865 6e20 6265 2072 6574  will then be ret
+00013d40: 7269 6564 2077 6974 6820 7468 6520 6c65  ried with the le
+00013d50: 6164 6572 2e0a 0a49 6620 7468 6520 636c  ader...If the cl
+00013d60: 6965 6e74 2773 206e 6f64 6520 7072 6566  ient's node pref
+00013d70: 6572 656e 6365 2069 7320 2266 6f6c 6c6f  erence is "follo
+00013d80: 7765 7222 2061 6e64 2074 6865 7265 2061  wer" and there a
+00013d90: 7265 206e 6f20 666f 6c6c 6f77 6572 0a6e  re no follower.n
+00013da0: 6f64 6573 2069 6e20 7468 6520 636c 7573  odes in the clus
+00013db0: 7465 722c 2074 6865 6e20 7468 6520 636c  ter, then the cl
+00013dc0: 6965 6e74 2077 696c 6c20 7261 6973 6520  ient will raise 
+00013dd0: 616e 2065 7863 6570 7469 6f6e 2e20 5369  an exception. Si
+00013de0: 6d69 6c61 726c 792c 2069 6620 7468 650a  milarly, if the.
+00013df0: 636c 6965 6e74 2773 206e 6f64 6520 7072  client's node pr
+00013e00: 6566 6572 656e 6365 2069 7320 2272 6561  eference is "rea
+00013e10: 646f 6e6c 7972 6570 6c69 6361 2220 616e  donlyreplica" an
+00013e20: 6420 7468 6572 6520 6172 6520 6e6f 2072  d there are no r
+00013e30: 6561 642d 6f6e 6c79 2072 6570 6c69 6361  ead-only replica
+00013e40: 0a6e 6f64 6573 2069 6e20 7468 6520 636c  .nodes in the cl
+00013e50: 7573 7465 722c 2074 6865 6e20 7468 6520  uster, then the 
+00013e60: 636c 6965 6e74 2077 696c 6c20 616c 736f  client will also
+00013e70: 2072 6169 7365 2061 6e20 6578 6365 7074   raise an except
+00013e80: 696f 6e2e 0a0a 5468 6520 6752 5043 2063  ion...The gRPC c
+00013e90: 6861 6e6e 656c 206f 7074 696f 6e20 2267  hannel option "g
+00013ea0: 7270 632e 6d61 785f 7265 6365 6976 655f  rpc.max_receive_
+00013eb0: 6d65 7373 6167 655f 6c65 6e67 7468 2220  message_length" 
+00013ec0: 6973 2061 7574 6f6d 6174 6963 616c 6c79  is automatically
+00013ed0: 0a63 6f6e 6669 6775 7265 6420 746f 2074  .configured to t
+00013ee0: 6865 2076 616c 7565 2060 3137 202a 2031  he value `17 * 1
+00013ef0: 3032 3420 2a20 3130 3234 602e 2054 6869  024 * 1024`. Thi
+00013f00: 7320 7661 6c75 6520 6361 6e6e 6f74 2062  s value cannot b
+00013f10: 6520 6368 616e 6765 642e 0a0a 0a23 2323  e changed....###
+00013f20: 2052 6567 756c 6172 2065 7870 7265 7373   Regular express
+00013f30: 696f 6e20 6669 6c74 6572 730a 0a54 6865  ion filters..The
+00013f40: 2066 696c 7465 7220 6172 6775 6d65 6e74   filter argument
+00013f50: 7320 696e 2060 7265 6164 5f61 6c6c 5f65  s in `read_all_e
+00013f60: 7665 6e74 7328 2960 2c20 6073 7562 7363  vents()`, `subsc
+00013f70: 7269 6265 5f61 6c6c 5f65 7665 6e74 7328  ribe_all_events(
+00013f80: 2960 2c0a 6063 7265 6174 655f 7375 6273  )`,.`create_subs
+00013f90: 6372 6970 7469 6f6e 2829 6020 616e 6420  cription()` and 
+00013fa0: 6067 6574 5f63 6f6d 6d69 745f 706f 7369  `get_commit_posi
+00013fb0: 7469 6f6e 2829 6020 6172 6520 6170 706c  tion()` are appl
+00013fc0: 6965 6420 746f 2074 6865 2060 7479 7065  ied to the `type
+00013fd0: 600a 6174 7472 6962 7574 6520 6f66 2072  `.attribute of r
+00013fe0: 6563 6f72 6465 6420 6576 656e 7473 2e0a  ecorded events..
+00013ff0: 0a54 6865 2064 6566 6175 6c74 2076 616c  .The default val
+00014000: 7565 206f 6620 7468 6520 6066 696c 7465  ue of the `filte
+00014010: 725f 6578 636c 7564 6560 2061 7267 756d  r_exclude` argum
+00014020: 656e 7473 2069 7320 6465 7369 676e 6564  ents is designed
+00014030: 2074 6f20 6578 636c 7564 650a 4576 656e   to exclude.Even
+00014040: 7453 746f 7265 4442 2022 7379 7374 656d  tStoreDB "system
+00014050: 2220 616e 6420 2270 6572 7369 7374 656e  " and "persisten
+00014060: 6365 2073 7562 7363 7269 7074 696f 6e20  ce subscription 
+00014070: 636f 6e66 6967 2220 6576 656e 7473 2c20  config" events, 
+00014080: 7768 6963 680a 6f74 6865 7277 6973 6520  which.otherwise 
+00014090: 776f 756c 6420 6265 2069 6e63 6c75 6465  would be include
+000140a0: 642e 2053 7973 7465 6d20 6576 656e 7473  d. System events
+000140b0: 2067 656e 6572 6174 6564 2062 7920 4576   generated by Ev
+000140c0: 656e 7453 746f 7265 4442 2061 6c6c 0a68  entStoreDB all.h
+000140d0: 6176 6520 6074 7970 6560 2073 7472 696e  ave `type` strin
+000140e0: 6773 2074 6861 7420 7374 6172 7420 7769  gs that start wi
+000140f0: 7468 2074 6865 2060 2460 2073 6967 6e2e  th the `$` sign.
+00014100: 2050 6572 7369 7374 656e 6365 2073 7562   Persistence sub
+00014110: 7363 7269 7074 696f 6e0a 6576 656e 7473  scription.events
+00014120: 2067 656e 6572 6174 6564 2077 6865 6e20   generated when 
+00014130: 6d61 6e69 7075 6c61 7469 6e67 2070 6572  manipulating per
+00014140: 7369 7374 656e 6365 2073 7562 7363 7269  sistence subscri
+00014150: 7074 696f 6e73 2061 6c6c 2068 6176 6520  ptions all have 
+00014160: 6074 7970 6560 0a73 7472 696e 6773 2074  `type`.strings t
+00014170: 6861 7420 7374 6172 7420 7769 7468 2060  hat start with `
+00014180: 5065 7273 6973 7465 6e74 436f 6e66 6967  PersistentConfig
+00014190: 602e 0a0a 466f 7220 6578 616d 706c 652c  `...For example,
+000141a0: 2074 6f20 6d61 7463 6820 7468 6520 7479   to match the ty
+000141b0: 7065 206f 6620 4576 656e 7453 746f 7265  pe of EventStore
+000141c0: 4442 2073 7973 7465 6d20 6576 656e 7473  DB system events
+000141d0: 2c20 7573 6520 7468 6520 7265 6775 6c61  , use the regula
+000141e0: 720a 6578 7072 6573 7369 6f6e 2060 7227  r.expression `r'
+000141f0: 5c24 2e2b 2760 2e20 506c 6561 7365 206e  \$.+'`. Please n
+00014200: 6f74 652c 2074 6865 2063 6f6e 7374 616e  ote, the constan
+00014210: 7420 6045 5344 425f 5359 5354 454d 5f45  t `ESDB_SYSTEM_E
+00014220: 5645 4e54 535f 5245 4745 5860 2069 730a  VENTS_REGEX` is.
+00014230: 7365 7420 746f 2060 7227 5c24 2e2b 2760  set to `r'\$.+'`
+00014240: 2e20 596f 7520 6361 6e20 696d 706f 7274  . You can import
+00014250: 2074 6869 7320 7661 6c75 650a 2860 6672   this value.(`fr
+00014260: 6f6d 2065 7364 6263 6c69 656e 7420 696d  om esdbclient im
+00014270: 706f 7274 2045 5344 425f 5359 5354 454d  port ESDB_SYSTEM
+00014280: 5f45 5645 4e54 535f 5245 4745 5860 2920  _EVENTS_REGEX`) 
+00014290: 616e 6420 7573 650a 6974 2077 6865 6e20  and use.it when 
+000142a0: 6275 696c 6469 6e67 206c 6f6e 6765 7220  building longer 
+000142b0: 7365 7175 656e 6365 7320 6f66 2072 6567  sequences of reg
+000142c0: 756c 6172 2065 7870 7265 7373 696f 6e73  ular expressions
+000142d0: 2e0a 0a53 696d 696c 6172 6c79 2c20 746f  ...Similarly, to
+000142e0: 206d 6174 6368 2074 6865 2074 7970 6520   match the type 
+000142f0: 6f66 2045 7665 6e74 5374 6f72 6544 4220  of EventStoreDB 
+00014300: 7065 7273 6973 7465 6e63 6520 7375 6273  persistence subs
+00014310: 6372 6970 7469 6f6e 2065 7665 6e74 732c  cription events,
+00014320: 2075 7365 2074 6865 0a72 6567 756c 6172   use the.regular
+00014330: 2065 7870 7265 7373 696f 6e20 6072 2750   expression `r'P
+00014340: 6572 7369 7374 656e 7443 6f6e 6669 675c  ersistentConfig\
+00014350: 642b 2760 2e20 5468 6520 636f 6e73 7461  d+'`. The consta
+00014360: 6e74 2060 4553 4442 5f50 4552 5349 5354  nt `ESDB_PERSIST
+00014370: 454e 545f 434f 4e46 4947 5f45 5645 4e54  ENT_CONFIG_EVENT
+00014380: 535f 5245 4745 5860 0a69 7320 7365 7420  S_REGEX`.is set 
+00014390: 746f 2060 7227 5065 7273 6973 7465 6e74  to `r'Persistent
+000143a0: 436f 6e66 6967 5c64 2b27 602e 2059 6f75  Config\d+'`. You
+000143b0: 2063 616e 2061 6c73 6f20 696d 706f 7274   can also import
+000143c0: 2074 6869 7320 7661 6c75 650a 2860 6672   this value.(`fr
+000143d0: 6f6d 2065 7364 6263 6c69 656e 7420 696d  om esdbclient im
+000143e0: 706f 7274 2045 5344 425f 5045 5253 4953  port ESDB_PERSIS
+000143f0: 5445 4e54 5f43 4f4e 4649 475f 4556 454e  TENT_CONFIG_EVEN
+00014400: 5453 5f52 4547 4558 6029 2061 6e64 2075  TS_REGEX`) and u
+00014410: 7365 2069 7420 7768 656e 2062 7569 6c64  se it when build
+00014420: 696e 670a 6c6f 6e67 6572 2073 6571 7565  ing.longer seque
+00014430: 6e63 6573 206f 6620 7265 6775 6c61 7220  nces of regular 
+00014440: 6578 7072 6573 7369 6f6e 732e 0a0a 5468  expressions...Th
+00014450: 6520 636f 6e73 7461 6e74 2060 4445 4641  e constant `DEFA
+00014460: 554c 545f 4558 434c 5544 455f 4649 4c54  ULT_EXCLUDE_FILT
+00014470: 4552 6020 6973 2061 2073 6571 7565 6e63  ER` is a sequenc
+00014480: 6520 6f66 2072 6567 756c 6172 2065 7870  e of regular exp
+00014490: 7265 7373 696f 6e73 2074 6861 7420 6d61  ressions that ma
+000144a0: 7463 680a 7468 6520 6576 656e 7473 2074  tch.the events t
+000144b0: 6861 7420 4576 656e 7453 746f 7265 4442  hat EventStoreDB
+000144c0: 2067 656e 6572 6174 6573 2069 6e74 6572   generates inter
+000144d0: 6e61 6c6c 792c 2065 7665 6e74 7320 7468  nally, events th
+000144e0: 6174 2061 7265 2065 7874 7261 6e65 6f75  at are extraneou
+000144f0: 7320 746f 2074 686f 7365 0a77 6869 6368  s to those.which
+00014500: 2079 6f75 2061 7070 656e 6420 7573 696e   you append usin
+00014510: 6720 7468 6520 6061 7070 656e 645f 6576  g the `append_ev
+00014520: 656e 7473 2829 6020 6d65 7468 6f64 2e0a  ents()` method..
+00014530: 0a46 6f72 2065 7861 6d70 6c65 2c20 746f  .For example, to
+00014540: 2065 7863 6c75 6465 2073 7973 7465 6d20   exclude system 
+00014550: 6576 656e 7473 2061 6e64 2070 6572 7369  events and persi
+00014560: 7374 656e 6365 2073 7562 7363 7269 7074  stence subscript
+00014570: 696f 6e20 636f 6e66 6967 7572 6174 696f  ion configuratio
+00014580: 6e20 6576 656e 7473 2c0a 616e 6420 736e  n events,.and sn
+00014590: 6170 7368 6f74 732c 2079 6f75 206d 6967  apshots, you mig
+000145a0: 6874 2075 7365 2074 6865 2073 6571 7565  ht use the seque
+000145b0: 6e63 6520 6044 4546 4155 4c54 5f45 5843  nce `DEFAULT_EXC
+000145c0: 4c55 4445 5f46 494c 5445 5220 2b20 5b27  LUDE_FILTER + ['
+000145d0: 2e2a 536e 6170 7368 6f74 275d 6020 6173  .*Snapshot']` as
+000145e0: 0a74 6865 2076 616c 7565 206f 6620 7468  .the value of th
+000145f0: 6520 6066 696c 7465 725f 6578 636c 7564  e `filter_exclud
+00014600: 6560 2061 7267 756d 656e 7420 7768 656e  e` argument when
+00014610: 2063 616c 6c69 6e67 2060 7265 6164 5f61   calling `read_a
+00014620: 6c6c 5f65 7665 6e74 7328 2960 2c0a 6073  ll_events()`,.`s
+00014630: 7562 7363 7269 6265 5f61 6c6c 5f65 7665  ubscribe_all_eve
+00014640: 6e74 7328 2960 2c20 6063 7265 6174 655f  nts()`, `create_
+00014650: 7375 6273 6372 6970 7469 6f6e 2829 6020  subscription()` 
+00014660: 6f72 2060 6765 745f 636f 6d6d 6974 5f70  or `get_commit_p
+00014670: 6f73 6974 696f 6e28 2960 2e0a 0a23 2323  osition()`...###
+00014680: 204e 6577 2065 7665 6e74 206f 626a 6563   New event objec
+00014690: 7473 0a0a 5468 6520 604e 6577 4576 656e  ts..The `NewEven
+000146a0: 7460 2063 6c61 7373 2069 7320 7573 6564  t` class is used
+000146b0: 2077 6865 6e20 6170 7065 6e64 696e 6720   when appending 
+000146c0: 6576 656e 7473 2e0a 0a54 6865 2072 6571  events...The req
+000146d0: 7569 7265 6420 6172 6775 6d65 6e74 2060  uired argument `
+000146e0: 7479 7065 6020 6973 2061 2050 7974 686f  type` is a Pytho
+000146f0: 6e20 6073 7472 602c 2075 7365 6420 746f  n `str`, used to
+00014700: 2069 6e64 6963 6174 6520 7468 6520 7479   indicate the ty
+00014710: 7065 206f 660a 7468 6520 6576 656e 7420  pe of.the event 
+00014720: 7468 6174 2077 696c 6c20 6265 2072 6563  that will be rec
+00014730: 6f72 6465 642e 0a0a 5468 6520 7265 7175  orded...The requ
+00014740: 6972 6564 2061 7267 756d 656e 7420 6064  ired argument `d
+00014750: 6174 6160 2069 7320 6120 5079 7468 6f6e  ata` is a Python
+00014760: 2060 6279 7465 7360 206f 626a 6563 742c   `bytes` object,
+00014770: 2075 7365 6420 746f 2069 6e64 6963 6174   used to indicat
+00014780: 6520 7468 6520 6461 7461 206f 660a 7468  e the data of.th
+00014790: 6520 6576 656e 7420 7468 6174 2077 696c  e event that wil
+000147a0: 6c20 6265 2072 6563 6f72 6465 642e 0a0a  l be recorded...
+000147b0: 5468 6520 6f70 7469 6f6e 616c 2061 7267  The optional arg
+000147c0: 756d 656e 7420 606d 6574 6164 6174 6160  ument `metadata`
+000147d0: 2069 7320 6120 5079 7468 6f6e 2060 6279   is a Python `by
+000147e0: 7465 7360 206f 626a 6563 742c 2075 7365  tes` object, use
+000147f0: 6420 746f 2069 6e64 6963 6174 6520 616e  d to indicate an
+00014800: 790a 6d65 7461 6461 7461 206f 6620 7468  y.metadata of th
+00014810: 6520 6576 656e 7420 7468 6174 2077 696c  e event that wil
+00014820: 6c20 6265 2072 6563 6f72 6465 642e 2054  l be recorded. T
+00014830: 6865 2064 6566 6175 6c74 2076 616c 7565  he default value
+00014840: 2069 7320 616e 2065 6d70 7479 2060 6279   is an empty `by
+00014850: 7465 7360 0a6f 626a 6563 742e 0a0a 5468  tes`.object...Th
+00014860: 6520 6f70 7469 6f6e 616c 2061 7267 756d  e optional argum
+00014870: 656e 7420 6063 6f6e 7465 6e74 5f74 7970  ent `content_typ
+00014880: 6560 2069 7320 6120 5079 7468 6f6e 2060  e` is a Python `
+00014890: 7374 7260 2c20 7573 6564 2074 6f20 696e  str`, used to in
+000148a0: 6469 6361 7465 2074 6865 0a74 7970 6520  dicate the.type 
+000148b0: 6f66 2074 6865 2064 6174 6120 7468 6174  of the data that
+000148c0: 2077 696c 6c20 6265 2072 6563 6f72 6465   will be recorde
+000148d0: 6420 666f 7220 7468 6973 2065 7665 6e74  d for this event
+000148e0: 2e20 5468 6520 6465 6661 756c 7420 7661  . The default va
+000148f0: 6c75 6520 6973 0a60 6170 706c 6963 6174  lue is.`applicat
+00014900: 696f 6e2f 6a73 6f6e 602c 2077 6869 6368  ion/json`, which
+00014910: 2069 6e64 6963 6174 6573 2074 6861 7420   indicates that 
+00014920: 7468 6520 6064 6174 6160 2077 6173 2073  the `data` was s
+00014930: 6572 6961 6c69 7365 6420 7573 696e 6720  erialised using 
+00014940: 4a53 4f4e 2e0a 416e 2061 6c74 6572 6e61  JSON..An alterna
+00014950: 7469 7665 2076 616c 7565 2066 6f72 2074  tive value for t
+00014960: 6869 7320 6172 6775 6d65 6e74 2069 7320  his argument is 
+00014970: 6061 7070 6c69 6361 7469 6f6e 2f6f 6374  `application/oct
+00014980: 6574 2d73 7472 6561 6d60 2e0a 0a54 6865  et-stream`...The
+00014990: 206f 7074 696f 6e61 6c20 6172 6775 6d65   optional argume
+000149a0: 6e74 2060 6964 6020 6973 2061 2050 7974  nt `id` is a Pyt
+000149b0: 686f 6e20 6055 5549 4460 206f 626a 6563  hon `UUID` objec
+000149c0: 742c 2075 7365 6420 746f 2073 7065 6369  t, used to speci
+000149d0: 6679 2074 6865 2075 6e69 7175 6520 4944  fy the unique ID
+000149e0: 0a6f 6620 7468 6520 6576 656e 7420 7468  .of the event th
+000149f0: 6174 2077 696c 6c20 6265 2072 6563 6f72  at will be recor
+00014a00: 6465 642e 2054 6869 7320 7661 6c75 6520  ded. This value 
+00014a10: 7769 6c6c 2064 6566 6175 6c74 2074 6f20  will default to 
+00014a20: 6120 6e65 7720 7665 7273 696f 6e2d 3420  a new version-4 
+00014a30: 5555 4944 2e0a 0a60 6060 7079 7468 6f6e  UUID...```python
+00014a40: 0a6e 6577 5f65 7665 6e74 3120 3d20 4e65  .new_event1 = Ne
+00014a50: 7745 7665 6e74 280a 2020 2020 7479 7065  wEvent(.    type
+00014a60: 3d27 4f72 6465 7243 7265 6174 6564 272c  ='OrderCreated',
+00014a70: 0a20 2020 2064 6174 613d 6227 7b22 6e61  .    data=b'{"na
+00014a80: 6d65 223a 2022 4772 6567 227d 272c 0a29  me": "Greg"}',.)
+00014a90: 0a61 7373 6572 7420 6e65 775f 6576 656e  .assert new_even
+00014aa0: 7431 2e74 7970 6520 3d3d 2027 4f72 6465  t1.type == 'Orde
+00014ab0: 7243 7265 6174 6564 270a 6173 7365 7274  rCreated'.assert
+00014ac0: 206e 6577 5f65 7665 6e74 312e 6461 7461   new_event1.data
+00014ad0: 203d 3d20 6227 7b22 6e61 6d65 223a 2022   == b'{"name": "
+00014ae0: 4772 6567 227d 270a 6173 7365 7274 206e  Greg"}'.assert n
+00014af0: 6577 5f65 7665 6e74 312e 6d65 7461 6461  ew_event1.metada
+00014b00: 7461 203d 3d20 6227 270a 6173 7365 7274  ta == b''.assert
+00014b10: 206e 6577 5f65 7665 6e74 312e 636f 6e74   new_event1.cont
+00014b20: 656e 745f 7479 7065 203d 3d20 2761 7070  ent_type == 'app
+00014b30: 6c69 6361 7469 6f6e 2f6a 736f 6e27 0a61  lication/json'.a
+00014b40: 7373 6572 7420 6973 696e 7374 616e 6365  ssert isinstance
+00014b50: 286e 6577 5f65 7665 6e74 312e 6964 2c20  (new_event1.id, 
+00014b60: 5555 4944 290a 0a65 7665 6e74 5f69 6420  UUID)..event_id 
+00014b70: 3d20 7575 6964 3428 290a 6e65 775f 6576  = uuid4().new_ev
+00014b80: 656e 7432 203d 204e 6577 4576 656e 7428  ent2 = NewEvent(
+00014b90: 0a20 2020 2074 7970 653d 2749 6d61 6765  .    type='Image
+00014ba0: 4372 6561 7465 6427 2c0a 2020 2020 6461  Created',.    da
+00014bb0: 7461 3d62 2730 3130 3130 3130 3130 3130  ta=b'01010101010
+00014bc0: 3130 3127 2c0a 2020 2020 6d65 7461 6461  101',.    metada
+00014bd0: 7461 3d62 277b 2261 223a 2031 7d27 2c0a  ta=b'{"a": 1}',.
+00014be0: 2020 2020 636f 6e74 656e 745f 7479 7065      content_type
+00014bf0: 3d27 6170 706c 6963 6174 696f 6e2f 6f63  ='application/oc
+00014c00: 7465 742d 7374 7265 616d 272c 0a20 2020  tet-stream',.   
+00014c10: 2069 643d 6576 656e 745f 6964 2c0a 290a   id=event_id,.).
+00014c20: 6173 7365 7274 206e 6577 5f65 7665 6e74  assert new_event
+00014c30: 322e 7479 7065 203d 3d20 2749 6d61 6765  2.type == 'Image
+00014c40: 4372 6561 7465 6427 0a61 7373 6572 7420  Created'.assert 
+00014c50: 6e65 775f 6576 656e 7432 2e64 6174 6120  new_event2.data 
+00014c60: 3d3d 2062 2730 3130 3130 3130 3130 3130  == b'01010101010
+00014c70: 3130 3127 0a61 7373 6572 7420 6e65 775f  101'.assert new_
+00014c80: 6576 656e 7432 2e6d 6574 6164 6174 6120  event2.metadata 
+00014c90: 3d3d 2062 277b 2261 223a 2031 7d27 0a61  == b'{"a": 1}'.a
+00014ca0: 7373 6572 7420 6e65 775f 6576 656e 7432  ssert new_event2
+00014cb0: 2e63 6f6e 7465 6e74 5f74 7970 6520 3d3d  .content_type ==
+00014cc0: 2027 6170 706c 6963 6174 696f 6e2f 6f63   'application/oc
+00014cd0: 7465 742d 7374 7265 616d 270a 6173 7365  tet-stream'.asse
+00014ce0: 7274 206e 6577 5f65 7665 6e74 322e 6964  rt new_event2.id
+00014cf0: 203d 3d20 6576 656e 745f 6964 0a60 6060   == event_id.```
+00014d00: 0a0a 2323 2320 5265 636f 7264 6564 2065  ..### Recorded e
+00014d10: 7665 6e74 206f 626a 6563 7473 0a0a 5468  vent objects..Th
+00014d20: 6520 6052 6563 6f72 6465 6445 7665 6e74  e `RecordedEvent
+00014d30: 6020 636c 6173 7320 6973 2075 7365 6420  ` class is used 
+00014d40: 7768 656e 2072 6561 6469 6e67 2065 7665  when reading eve
+00014d50: 6e74 732e 0a0a 5468 6520 6174 7472 6962  nts...The attrib
+00014d60: 7574 6520 6074 7970 6560 2069 7320 6120  ute `type` is a 
+00014d70: 5079 7468 6f6e 2060 7374 7260 2c20 7573  Python `str`, us
+00014d80: 6564 2074 6f20 696e 6469 6361 7465 2074  ed to indicate t
+00014d90: 6865 2074 7970 6520 6f66 2065 7665 6e74  he type of event
+00014da0: 0a74 6861 7420 7761 7320 7265 636f 7264  .that was record
+00014db0: 6564 2e0a 0a54 6865 2061 7474 7269 6275  ed...The attribu
+00014dc0: 7465 2060 6461 7461 6020 6973 2061 2050  te `data` is a P
+00014dd0: 7974 686f 6e20 6062 7974 6573 6020 6f62  ython `bytes` ob
+00014de0: 6a65 6374 2c20 7573 6564 2074 6f20 696e  ject, used to in
+00014df0: 6469 6361 7465 2074 6865 2064 6174 6120  dicate the data 
+00014e00: 6f66 2074 6865 0a65 7665 6e74 2074 6861  of the.event tha
+00014e10: 7420 7761 7320 7265 636f 7264 6564 2e0a  t was recorded..
+00014e20: 0a54 6865 2061 7474 7269 6275 7465 2060  .The attribute `
+00014e30: 6d65 7461 6461 7461 6020 6973 2061 2050  metadata` is a P
+00014e40: 7974 686f 6e20 6062 7974 6573 6020 6f62  ython `bytes` ob
+00014e50: 6a65 6374 2c20 7573 6564 2074 6f20 696e  ject, used to in
+00014e60: 6469 6361 7465 2074 6865 206d 6574 6164  dicate the metad
+00014e70: 6174 6120 6f66 0a74 6865 2065 7665 6e74  ata of.the event
+00014e80: 2074 6861 7420 7761 7320 7265 636f 7264   that was record
+00014e90: 6564 2e0a 0a54 6865 2061 7474 7269 6275  ed...The attribu
+00014ea0: 7465 2060 636f 6e74 656e 745f 7479 7065  te `content_type
+00014eb0: 6020 6973 2061 2050 7974 686f 6e20 6073  ` is a Python `s
+00014ec0: 7472 602c 2075 7365 6420 746f 2069 6e64  tr`, used to ind
+00014ed0: 6963 6174 6520 7468 6520 7479 7065 206f  icate the type o
+00014ee0: 660a 6461 7461 2074 6861 7420 7761 7320  f.data that was 
+00014ef0: 7265 636f 7264 6564 2066 6f72 2074 6869  recorded for thi
+00014f00: 7320 6576 656e 7420 2875 7375 616c 6c79  s event (usually
+00014f10: 2060 6170 706c 6963 6174 696f 6e2f 6a73   `application/js
+00014f20: 6f6e 6020 746f 2069 6e64 6963 6174 6520  on` to indicate 
+00014f30: 7468 6174 0a74 6869 7320 6461 7461 2063  that.this data c
+00014f40: 616e 2062 6520 7061 7273 6564 2061 7320  an be parsed as 
+00014f50: 4a53 4f4e 2c20 6275 7420 616c 7465 726e  JSON, but altern
+00014f60: 6174 6976 656c 7920 6061 7070 6c69 6361  atively `applica
+00014f70: 7469 6f6e 2f6f 6374 6574 2d73 7472 6561  tion/octet-strea
+00014f80: 6d60 2074 6f0a 696e 6469 6361 7465 2074  m` to.indicate t
+00014f90: 6861 7420 6974 2069 7320 736f 6d65 7468  hat it is someth
+00014fa0: 696e 6720 656c 7365 292e 0a0a 5468 6520  ing else)...The 
+00014fb0: 6174 7472 6962 7574 6520 6069 6460 2069  attribute `id` i
+00014fc0: 7320 6120 5079 7468 6f6e 2060 5555 4944  s a Python `UUID
+00014fd0: 6020 6f62 6a65 6374 2c20 7573 6564 2074  ` object, used t
+00014fe0: 6f20 696e 6469 6361 7465 2074 6865 2075  o indicate the u
+00014ff0: 6e69 7175 6520 4944 206f 6620 7468 650a  nique ID of the.
+00015000: 6576 656e 7420 7468 6174 2077 6173 2072  event that was r
+00015010: 6563 6f72 6465 642e 2050 6c65 6173 6520  ecorded. Please 
+00015020: 6e6f 7465 2c20 7768 656e 2072 6563 6f72  note, when recor
+00015030: 6465 6420 6576 656e 7473 2061 7265 2072  ded events are r
+00015040: 6574 7572 6e65 6420 6672 6f6d 2061 2063  eturned from a c
+00015050: 616c 6c0a 746f 2060 7265 6164 5f73 7472  all.to `read_str
+00015060: 6561 6d5f 6576 656e 7473 2829 6020 696e  eam_events()` in
+00015070: 2045 7665 6e74 5374 6f72 6544 4220 7632   EventStoreDB v2
+00015080: 312e 3130 2c20 7468 6520 636f 6d6d 6974  1.10, the commit
+00015090: 2070 6f73 6974 696f 6e20 6973 206e 6f74   position is not
+000150a0: 2061 6374 7561 6c6c 790a 7365 7420 696e   actually.set in
+000150b0: 2074 6865 2072 6573 706f 6e73 652e 2054   the response. T
+000150c0: 6869 7320 6174 7472 6962 7574 6520 6973  his attribute is
+000150d0: 2074 7970 6564 2061 7320 616e 206f 7074   typed as an opt
+000150e0: 696f 6e61 6c20 7661 6c75 6520 2860 4f70  ional value (`Op
+000150f0: 7469 6f6e 616c 5b55 5549 445d 6029 2c0a  tional[UUID]`),.
+00015100: 616e 6420 696e 2074 6865 2063 6173 6520  and in the case 
+00015110: 6f66 2075 7369 6e67 2045 7665 6e74 5374  of using EventSt
+00015120: 6f72 6544 4220 7632 312e 3130 2074 6865  oreDB v21.10 the
+00015130: 2076 616c 7565 206f 6620 7468 6973 2061   value of this a
+00015140: 7474 7269 6275 7465 2077 696c 6c20 6265  ttribute will be
+00015150: 2060 4e6f 6e65 600a 7768 656e 2072 6561   `None`.when rea
+00015160: 6469 6e67 2072 6563 6f72 6465 6420 6576  ding recorded ev
+00015170: 656e 7473 2066 726f 6d20 6120 7374 7265  ents from a stre
+00015180: 616d 2e20 5265 636f 7264 6564 2065 7665  am. Recorded eve
+00015190: 6e74 7320 7769 6c6c 2068 6f77 6576 6572  nts will however
+000151a0: 2068 6176 6520 7468 6973 0a76 616c 7565   have this.value
+000151b0: 7320 7365 7420 7768 656e 2072 6561 6469  s set when readi
+000151c0: 6e67 2072 6563 6f72 6465 6420 6576 656e  ng recorded even
+000151d0: 7473 2066 726f 6d20 6072 6561 645f 616c  ts from `read_al
+000151e0: 6c5f 6576 656e 7473 2829 6020 616e 6420  l_events()` and 
+000151f0: 6672 6f6d 2062 6f74 680a 6361 7463 682d  from both.catch-
+00015200: 7570 2061 6e64 2070 6572 7369 7374 656e  up and persisten
+00015210: 7420 7375 6273 6372 6970 7469 6f6e 732e  t subscriptions.
+00015220: 0a0a 5468 6520 6174 7472 6962 7574 6520  ..The attribute 
+00015230: 6073 7472 6561 6d5f 6e61 6d65 6020 6973  `stream_name` is
+00015240: 2061 2050 7974 686f 6e20 6073 7472 602c   a Python `str`,
+00015250: 2075 7365 6420 746f 2069 6e64 6963 6174   used to indicat
+00015260: 6520 7468 6520 6e61 6d65 206f 6620 7468  e the name of th
+00015270: 650a 7374 7265 616d 2069 6e20 7768 6963  e.stream in whic
+00015280: 6820 7468 6520 6576 656e 7420 7761 7320  h the event was 
+00015290: 7265 636f 7264 6564 2e0a 0a54 6865 2061  recorded...The a
+000152a0: 7474 7269 6275 7465 2060 7374 7265 616d  ttribute `stream
+000152b0: 5f70 6f73 6974 696f 6e60 2069 7320 6120  _position` is a 
+000152c0: 5079 7468 6f6e 2060 696e 7460 2c20 7573  Python `int`, us
+000152d0: 6564 2074 6f20 696e 6469 6361 7465 2074  ed to indicate t
+000152e0: 6865 2070 6f73 6974 696f 6e20 696e 2074  he position in t
+000152f0: 6865 0a73 7472 6561 6d20 6174 2077 6869  he.stream at whi
+00015300: 6368 2074 6865 2065 7665 6e74 2077 6173  ch the event was
+00015310: 2072 6563 6f72 6465 642e 0a0a 5468 6520   recorded...The 
+00015320: 6174 7472 6962 7574 6520 6063 6f6d 6d69  attribute `commi
+00015330: 745f 706f 7369 7469 6f6e 6020 6973 2061  t_position` is a
+00015340: 2050 7974 686f 6e20 6069 6e74 602c 2075   Python `int`, u
+00015350: 7365 6420 746f 2069 6e64 6963 6174 6520  sed to indicate 
+00015360: 7468 6520 636f 6d6d 6974 2070 6f73 6974  the commit posit
+00015370: 696f 6e0a 6174 2077 6869 6368 2074 6865  ion.at which the
+00015380: 2065 7665 6e74 2077 6173 2072 6563 6f72   event was recor
+00015390: 6465 642e 0a0a 6060 6070 7974 686f 6e0a  ded...```python.
+000153a0: 6672 6f6d 2065 7364 6263 6c69 656e 742e  from esdbclient.
+000153b0: 6576 656e 7473 2069 6d70 6f72 7420 5265  events import Re
+000153c0: 636f 7264 6564 4576 656e 740a 0a72 6563  cordedEvent..rec
+000153d0: 6f72 6465 645f 6576 656e 7420 3d20 5265  orded_event = Re
+000153e0: 636f 7264 6564 4576 656e 7428 0a20 2020  cordedEvent(.   
+000153f0: 2074 7970 653d 274f 7264 6572 4372 6561   type='OrderCrea
+00015400: 7465 6427 2c0a 2020 2020 6461 7461 3d62  ted',.    data=b
+00015410: 277b 7d27 2c0a 2020 2020 6d65 7461 6461  '{}',.    metada
+00015420: 7461 3d62 2727 2c0a 2020 2020 636f 6e74  ta=b'',.    cont
+00015430: 656e 745f 7479 7065 3d27 6170 706c 6963  ent_type='applic
+00015440: 6174 696f 6e2f 6a73 6f6e 272c 0a20 2020  ation/json',.   
+00015450: 2069 643d 7575 6964 3428 292c 0a20 2020   id=uuid4(),.   
+00015460: 2073 7472 6561 6d5f 6e61 6d65 3d27 7374   stream_name='st
+00015470: 7265 616d 3127 2c0a 2020 2020 7374 7265  ream1',.    stre
+00015480: 616d 5f70 6f73 6974 696f 6e3d 302c 0a20  am_position=0,. 
+00015490: 2020 2063 6f6d 6d69 745f 706f 7369 7469     commit_positi
+000154a0: 6f6e 3d35 3132 2c0a 290a 6060 600a 0a23  on=512,.).```..#
+000154b0: 2323 2041 7379 6e63 696f 2063 6c69 656e  ## Asyncio clien
+000154c0: 740a 0a54 6865 2060 6573 6462 636c 6965  t..The `esdbclie
+000154d0: 6e74 6020 7061 636b 6167 6520 616c 736f  nt` package also
+000154e0: 2069 6e63 6c75 6465 7320 616e 2065 6172   includes an ear
+000154f0: 6c79 2076 6572 7369 6f6e 206f 6620 616e  ly version of an
+00015500: 2061 7379 6e63 6872 6f6e 6f75 7320 492f   asynchronous I/
+00015510: 4f0a 6752 5043 2050 7974 686f 6e20 636c  O.gRPC Python cl
+00015520: 6965 6e74 2e20 4974 2066 6f6c 6c6f 7773  ient. It follows
+00015530: 2065 7861 6374 6c79 2074 6865 2073 616d   exactly the sam
+00015540: 6520 6265 6861 7669 6f72 7320 6173 2074  e behaviors as t
+00015550: 6865 206d 756c 7469 7468 7265 6164 6564  he multithreaded
+00015560: 0a60 4553 4442 436c 6965 6e74 602c 2062  .`ESDBClient`, b
+00015570: 7574 2075 7365 7320 6067 7270 632e 6169  ut uses `grpc.ai
+00015580: 6f60 2070 6163 6b61 6765 2061 6e64 2074  o` package and t
+00015590: 6865 2060 6173 796e 6369 6f60 206d 6f64  he `asyncio` mod
+000155a0: 756c 652c 2069 6e73 7465 6164 206f 660a  ule, instead of.
+000155b0: 6067 7270 6360 2061 6e64 2060 7468 7265  `grpc` and `thre
+000155c0: 6164 696e 6760 2e0a 0a54 6865 2060 6173  ading`...The `as
+000155d0: 796e 6360 2066 756e 6374 696f 6e20 6041  ync` function `A
+000155e0: 7379 6e63 696f 4553 4442 436c 6965 6e74  syncioESDBClient
+000155f0: 6020 636f 6e73 7472 7563 7473 2074 6865  ` constructs the
+00015600: 2063 6c69 656e 742c 2061 6e64 2063 6f6e   client, and con
+00015610: 6e65 6374 7320 746f 0a61 2073 6572 7665  nects to.a serve
+00015620: 722e 2049 7420 6361 6e20 6265 2069 6d70  r. It can be imp
+00015630: 6f72 7465 6420 6672 6f6d 2060 6573 6462  orted from `esdb
+00015640: 636c 6965 6e74 602c 2061 6e64 2063 616e  client`, and can
+00015650: 2062 6520 6361 6c6c 6564 2077 6974 6820   be called with 
+00015660: 7468 6520 7361 6d65 0a61 7267 756d 656e  the same.argumen
+00015670: 7473 2061 7320 6045 5344 4243 6c69 656e  ts as `ESDBClien
+00015680: 7460 2e0a 0a60 6060 7079 7468 6f6e 0a66  t`...```python.f
+00015690: 726f 6d20 6573 6462 636c 6965 6e74 2069  rom esdbclient i
+000156a0: 6d70 6f72 7420 4173 796e 6369 6f45 5344  mport AsyncioESD
+000156b0: 4243 6c69 656e 740a 6060 600a 0a54 6865  BClient.```..The
+000156c0: 2061 7379 6e63 6872 6f6e 6f75 7320 492f   asynchronous I/
+000156d0: 4f20 636c 6965 6e74 2068 6173 2060 6173  O client has `as
+000156e0: 796e 6360 206d 6574 686f 6473 2060 6170  ync` methods `ap
+000156f0: 7065 6e64 5f65 7665 6e74 7328 2960 2c0a  pend_events()`,.
+00015700: 6072 6561 645f 7374 7265 616d 5f65 7665  `read_stream_eve
+00015710: 6e74 7328 2960 2c20 6072 6561 645f 616c  nts()`, `read_al
+00015720: 6c5f 6576 656e 7473 2829 602c 2060 7375  l_events()`, `su
+00015730: 6273 6372 6962 655f 616c 6c5f 6576 656e  bscribe_all_even
+00015740: 7473 2829 602c 0a60 6465 6c65 7465 5f73  ts()`,.`delete_s
+00015750: 7472 6561 6d28 2960 2c20 6074 6f6d 6273  tream()`, `tombs
+00015760: 746f 6e65 5f73 7472 6561 6d28 2960 2c20  tone_stream()`, 
+00015770: 616e 6420 6072 6563 6f6e 6e65 6374 2829  and `reconnect()
+00015780: 602e 0a0a 5468 6573 6520 6d65 7468 6f64  `...These method
+00015790: 7320 6172 6520 6571 7569 7661 6c65 6e74  s are equivalent
+000157a0: 2074 6f20 7468 6520 6d65 7468 6f64 7320   to the methods 
+000157b0: 6f6e 2060 4553 4442 436c 6965 6e74 602e  on `ESDBClient`.
+000157c0: 2054 6865 7920 6861 7665 2074 6865 2073   They have the s
+000157d0: 616d 650a 6d65 7468 6f64 2073 6967 6e61  ame.method signa
+000157e0: 7475 7265 732c 2061 6e64 2063 616e 2062  tures, and can b
+000157f0: 6520 6361 6c6c 6564 2077 6974 6820 7468  e called with th
+00015800: 6520 7361 6d65 2061 7267 756d 656e 7473  e same arguments
+00015810: 2c20 746f 2074 6865 2073 616d 6520 6566  , to the same ef
+00015820: 6665 6374 2e0a 5468 6520 6d65 7468 6f64  fect..The method
+00015830: 7320 7768 6963 6820 6170 7065 6172 206f  s which appear o
+00015840: 6e20 6045 5344 4243 6c69 656e 7460 2062  n `ESDBClient` b
+00015850: 7574 206e 6f74 206f 6e20 6041 7379 6e63  ut not on `Async
+00015860: 696f 4553 4442 436c 6965 6e74 6020 7769  ioESDBClient` wi
+00015870: 6c6c 2062 650a 6164 6465 6420 736f 6f6e  ll be.added soon
+00015880: 2e0a 0a54 6865 2065 7861 6d70 6c65 2062  ...The example b
+00015890: 656c 6f77 2064 656d 6f6e 7374 7261 7465  elow demonstrate
+000158a0: 7320 6061 7070 656e 645f 6576 656e 7473  s `append_events
+000158b0: 2829 602c 2060 7265 6164 5f73 7472 6561  ()`, `read_strea
+000158c0: 6d5f 6576 656e 7473 2829 6020 616e 640a  m_events()` and.
+000158d0: 6073 7562 7363 7269 6265 5f61 6c6c 5f65  `subscribe_all_e
+000158e0: 7665 6e74 7328 2960 206d 6574 686f 6473  vents()` methods
+000158f0: 2e20 5468 6573 6520 6172 6520 7468 6520  . These are the 
+00015900: 6d6f 7374 2075 7365 6675 6c20 6d65 7468  most useful meth
+00015910: 6f64 7320 666f 7220 7772 6974 696e 670a  ods for writing.
+00015920: 616e 2065 7665 6e74 2d73 6f75 7263 6564  an event-sourced
+00015930: 2061 7070 6c69 6361 7469 6f6e 2c20 616c   application, al
+00015940: 6c6f 7769 6e67 206e 6577 2061 6767 7265  lowing new aggre
+00015950: 6761 7465 2065 7665 6e74 7320 746f 2062  gate events to b
+00015960: 6520 7265 636f 7264 6564 2c20 7468 650a  e recorded, the.
+00015970: 7265 636f 7264 6564 2065 7665 6e74 7320  recorded events 
+00015980: 6f66 2061 6e20 6167 6772 6567 6174 6520  of an aggregate 
+00015990: 746f 2062 6520 6f62 7461 696e 6564 2073  to be obtained s
+000159a0: 6f20 6167 6772 6567 6174 6573 2063 616e  o aggregates can
+000159b0: 2062 6520 7265 636f 6e73 7472 7563 7465   be reconstructe
+000159c0: 642c 0a61 6e64 2074 6865 2073 7461 7465  d,.and the state
+000159d0: 206f 6620 616e 2061 7070 6c69 6361 7469   of an applicati
+000159e0: 6f6e 2074 6f20 7072 6f70 6167 6174 6564  on to propagated
+000159f0: 2061 6e64 2070 726f 6365 7373 6564 2077   and processed w
+00015a00: 6974 6820 2265 7861 6374 6c79 2d6f 6e63  ith "exactly-onc
+00015a10: 6522 0a73 656d 616e 7469 6373 2e0a 0a60  e".semantics...`
+00015a20: 6060 7079 7468 6f6e 0a69 6d70 6f72 7420  ``python.import 
+00015a30: 6173 796e 6369 6f0a 0a61 7379 6e63 2064  asyncio..async d
+00015a40: 6566 2064 656d 6f6e 7374 7261 7465 5f61  ef demonstrate_a
+00015a50: 7379 6e63 696f 5f63 6c69 656e 7428 293a  syncio_client():
+00015a60: 0a0a 2020 2020 2320 436f 6e73 7472 7563  ..    # Construc
+00015a70: 7420 636c 6965 6e74 2e0a 2020 2020 636c  t client..    cl
+00015a80: 6965 6e74 203d 2061 7761 6974 2041 7379  ient = await Asy
+00015a90: 6e63 696f 4553 4442 436c 6965 6e74 280a  ncioESDBClient(.
+00015aa0: 2020 2020 2020 2020 7572 693d 6f73 2e67          uri=os.g
+00015ab0: 6574 656e 7628 2245 5344 425f 5552 4922  etenv("ESDB_URI"
+00015ac0: 292c 0a20 2020 2020 2020 2072 6f6f 745f  ),.        root_
+00015ad0: 6365 7274 6966 6963 6174 6573 3d6f 732e  certificates=os.
+00015ae0: 6765 7465 6e76 2822 4553 4442 5f52 4f4f  getenv("ESDB_ROO
+00015af0: 545f 4345 5254 4946 4943 4154 4553 2229  T_CERTIFICATES")
+00015b00: 2c0a 2020 2020 290a 0a20 2020 2023 2041  ,.    )..    # A
+00015b10: 7070 656e 6420 6576 656e 7473 2e0a 2020  ppend events..  
+00015b20: 2020 7374 7265 616d 5f6e 616d 6520 3d20    stream_name = 
+00015b30: 7374 7228 7575 6964 3428 2929 0a20 2020  str(uuid4()).   
+00015b40: 2065 7665 6e74 3120 3d20 4e65 7745 7665   event1 = NewEve
+00015b50: 6e74 2822 4f72 6465 7243 7265 6174 6564  nt("OrderCreated
+00015b60: 222c 2064 6174 613d 6227 7b7d 2729 0a20  ", data=b'{}'). 
+00015b70: 2020 2065 7665 6e74 3220 3d20 4e65 7745     event2 = NewE
+00015b80: 7665 6e74 2822 4f72 6465 7255 7064 6174  vent("OrderUpdat
+00015b90: 6564 222c 2064 6174 613d 6227 7b7d 2729  ed", data=b'{}')
+00015ba0: 0a20 2020 2065 7665 6e74 3320 3d20 4e65  .    event3 = Ne
+00015bb0: 7745 7665 6e74 2822 4f72 6465 7244 656c  wEvent("OrderDel
+00015bc0: 6574 6564 222c 2064 6174 613d 6227 7b7d  eted", data=b'{}
+00015bd0: 2729 0a0a 2020 2020 6177 6169 7420 636c  ')..    await cl
+00015be0: 6965 6e74 2e61 7070 656e 645f 6576 656e  ient.append_even
+00015bf0: 7473 280a 2020 2020 2020 2020 7374 7265  ts(.        stre
+00015c00: 616d 5f6e 616d 653d 7374 7265 616d 5f6e  am_name=stream_n
+00015c10: 616d 652c 0a20 2020 2020 2020 2065 7870  ame,.        exp
+00015c20: 6563 7465 645f 706f 7369 7469 6f6e 3d4e  ected_position=N
+00015c30: 6f6e 652c 0a20 2020 2020 2020 2065 7665  one,.        eve
+00015c40: 6e74 733d 5b65 7665 6e74 312c 2065 7665  nts=[event1, eve
+00015c50: 6e74 322c 2065 7665 6e74 335d 0a20 2020  nt2, event3].   
+00015c60: 2029 0a0a 2020 2020 2320 5265 6164 2073   )..    # Read s
+00015c70: 7472 6561 6d20 6576 656e 7473 2e0a 2020  tream events..  
+00015c80: 2020 7265 636f 7264 6564 203d 2061 7761    recorded = awa
+00015c90: 6974 2063 6c69 656e 742e 7265 6164 5f73  it client.read_s
+00015ca0: 7472 6561 6d5f 6576 656e 7473 2873 7472  tream_events(str
+00015cb0: 6561 6d5f 6e61 6d65 290a 2020 2020 6173  eam_name).    as
+00015cc0: 7365 7274 206c 656e 2872 6563 6f72 6465  sert len(recorde
+00015cd0: 6429 203d 3d20 330a 2020 2020 6173 7365  d) == 3.    asse
+00015ce0: 7274 2072 6563 6f72 6465 645b 305d 2e69  rt recorded[0].i
+00015cf0: 6420 3d3d 2065 7665 6e74 312e 6964 0a20  d == event1.id. 
+00015d00: 2020 2061 7373 6572 7420 7265 636f 7264     assert record
+00015d10: 6564 5b31 5d2e 6964 203d 3d20 6576 656e  ed[1].id == even
+00015d20: 7432 2e69 640a 2020 2020 6173 7365 7274  t2.id.    assert
+00015d30: 2072 6563 6f72 6465 645b 325d 2e69 6420   recorded[2].id 
+00015d40: 3d3d 2065 7665 6e74 332e 6964 0a0a 0a20  == event3.id... 
+00015d50: 2020 2023 2053 7562 7363 7269 6265 2061     # Subscribe a
+00015d60: 6c6c 2065 7665 6e74 732e 0a20 2020 2072  ll events..    r
+00015d70: 6563 6569 7665 6420 3d20 5b5d 0a20 2020  eceived = [].   
+00015d80: 2061 7379 6e63 2066 6f72 2065 7665 6e74   async for event
+00015d90: 2069 6e20 6177 6169 7420 636c 6965 6e74   in await client
+00015da0: 2e73 7562 7363 7269 6265 5f61 6c6c 5f65  .subscribe_all_e
+00015db0: 7665 6e74 7328 293a 0a20 2020 2020 2020  vents():.       
+00015dc0: 2072 6563 6569 7665 642e 6170 7065 6e64   received.append
+00015dd0: 2865 7665 6e74 290a 2020 2020 2020 2020  (event).        
+00015de0: 6966 2065 7665 6e74 2e69 6420 3d3d 2065  if event.id == e
+00015df0: 7665 6e74 332e 6964 3a0a 2020 2020 2020  vent3.id:.      
+00015e00: 2020 2020 2020 6272 6561 6b0a 2020 2020        break.    
+00015e10: 6173 7365 7274 2072 6563 6f72 6465 645b  assert recorded[
+00015e20: 2d33 5d2e 6964 203d 3d20 6576 656e 7431  -3].id == event1
+00015e30: 2e69 640a 2020 2020 6173 7365 7274 2072  .id.    assert r
+00015e40: 6563 6f72 6465 645b 2d32 5d2e 6964 203d  ecorded[-2].id =
+00015e50: 3d20 6576 656e 7432 2e69 640a 2020 2020  = event2.id.    
+00015e60: 6173 7365 7274 2072 6563 6f72 6465 645b  assert recorded[
+00015e70: 2d31 5d2e 6964 203d 3d20 6576 656e 7433  -1].id == event3
+00015e80: 2e69 640a 0a0a 2020 2020 2320 436c 6f73  .id...    # Clos
+00015e90: 6520 7468 6520 636c 6965 6e74 2e0a 2020  e the client..  
+00015ea0: 2020 6177 6169 7420 636c 6965 6e74 2e63    await client.c
+00015eb0: 6c6f 7365 2829 0a0a 0a23 2052 756e 2074  lose()...# Run t
+00015ec0: 6865 2064 656d 6f2e 0a61 7379 6e63 696f  he demo..asyncio
+00015ed0: 2e67 6574 5f65 7665 6e74 5f6c 6f6f 7028  .get_event_loop(
+00015ee0: 292e 7275 6e5f 756e 7469 6c5f 636f 6d70  ).run_until_comp
+00015ef0: 6c65 7465 280a 2020 2020 6465 6d6f 6e73  lete(.    demons
+00015f00: 7472 6174 655f 6173 796e 6369 6f5f 636c  trate_asyncio_cl
+00015f10: 6965 6e74 2829 0a29 0a60 6060 0a0a 2323  ient().).```..##
+00015f20: 2043 6f6e 7472 6962 7574 6f72 730a 0a23   Contributors..#
+00015f30: 2323 2049 6e73 7461 6c6c 2050 6f65 7472  ## Install Poetr
+00015f40: 790a 0a54 6865 2066 6972 7374 2074 6869  y..The first thi
+00015f50: 6e67 2069 7320 746f 2063 6865 636b 2079  ng is to check y
+00015f60: 6f75 2068 6176 6520 506f 6574 7279 2069  ou have Poetry i
+00015f70: 6e73 7461 6c6c 6564 2e0a 0a20 2020 2024  nstalled...    $
+00015f80: 2070 6f65 7472 7920 2d2d 7665 7273 696f   poetry --versio
+00015f90: 6e0a 0a49 6620 796f 7520 646f 6e27 742c  n..If you don't,
+00015fa0: 2074 6865 6e20 706c 6561 7365 205b 696e   then please [in
+00015fb0: 7374 616c 6c20 506f 6574 7279 5d28 6874  stall Poetry](ht
+00015fc0: 7470 733a 2f2f 7079 7468 6f6e 2d70 6f65  tps://python-poe
+00015fd0: 7472 792e 6f72 672f 646f 6373 2f23 696e  try.org/docs/#in
+00015fe0: 7374 616c 6c69 6e67 2d77 6974 682d 7468  stalling-with-th
+00015ff0: 652d 6f66 6669 6369 616c 2d69 6e73 7461  e-official-insta
+00016000: 6c6c 6572 292e 0a0a 2020 2020 2420 6375  ller)...    $ cu
+00016010: 726c 202d 7353 4c20 6874 7470 733a 2f2f  rl -sSL https://
+00016020: 696e 7374 616c 6c2e 7079 7468 6f6e 2d70  install.python-p
+00016030: 6f65 7472 792e 6f72 6720 7c20 7079 7468  oetry.org | pyth
+00016040: 6f6e 3320 2d0a 0a49 7420 7769 6c6c 2068  on3 -..It will h
+00016050: 656c 7020 746f 206d 616b 6520 7375 7265  elp to make sure
+00016060: 2050 6f65 7472 7927 7320 6269 6e20 6469   Poetry's bin di
+00016070: 7265 6374 6f72 7920 6973 2069 6e20 796f  rectory is in yo
+00016080: 7572 2060 5041 5448 6020 656e 7669 726f  ur `PATH` enviro
+00016090: 6e6d 656e 7420 7661 7269 6162 6c65 2e0a  nment variable..
+000160a0: 0a42 7574 2069 6e20 616e 7920 6361 7365  .But in any case
+000160b0: 2c20 6d61 6b65 2073 7572 6520 796f 7520  , make sure you 
+000160c0: 6b6e 6f77 2074 6865 2070 6174 6820 746f  know the path to
+000160d0: 2074 6865 2060 706f 6574 7279 6020 6578   the `poetry` ex
+000160e0: 6563 7574 6162 6c65 2e20 5468 6520 506f  ecutable. The Po
+000160f0: 6574 7279 0a69 6e73 7461 6c6c 6572 2074  etry.installer t
+00016100: 656c 6c73 2079 6f75 2077 6865 7265 2069  ells you where i
+00016110: 7420 6861 7320 6265 656e 2069 6e73 7461  t has been insta
+00016120: 6c6c 6564 2c20 616e 6420 686f 7720 746f  lled, and how to
+00016130: 2063 6f6e 6669 6775 7265 2079 6f75 7220   configure your 
+00016140: 7368 656c 6c2e 0a0a 506c 6561 7365 2072  shell...Please r
+00016150: 6566 6572 2074 6f20 7468 6520 5b50 6f65  efer to the [Poe
+00016160: 7472 7920 646f 6373 5d28 6874 7470 733a  try docs](https:
+00016170: 2f2f 7079 7468 6f6e 2d70 6f65 7472 792e  //python-poetry.
+00016180: 6f72 672f 646f 6373 2f29 2066 6f72 2067  org/docs/) for g
+00016190: 7569 6461 6e63 6520 6f6e 0a75 7369 6e67  uidance on.using
+000161a0: 2050 6f65 7472 792e 0a0a 2323 2320 5365   Poetry...### Se
+000161b0: 7475 7020 666f 7220 5079 4368 6172 6d20  tup for PyCharm 
+000161c0: 7573 6572 730a 0a59 6f75 2063 616e 2065  users..You can e
+000161d0: 6173 696c 7920 6f62 7461 696e 2074 6865  asily obtain the
+000161e0: 2070 726f 6a65 6374 2066 696c 6573 2075   project files u
+000161f0: 7369 6e67 2050 7943 6861 726d 2028 6d65  sing PyCharm (me
+00016200: 6e75 2022 4769 7420 3e20 436c 6f6e 652e  nu "Git > Clone.
+00016210: 2e2e 2229 2e0a 5079 4368 6172 6d20 7769  ..")..PyCharm wi
+00016220: 6c6c 2074 6865 6e20 7573 7561 6c6c 7920  ll then usually 
+00016230: 7072 6f6d 7074 2079 6f75 2074 6f20 6f70  prompt you to op
+00016240: 656e 2074 6865 2070 726f 6a65 6374 2e0a  en the project..
+00016250: 0a4f 7065 6e20 7468 6520 7072 6f6a 6563  .Open the projec
+00016260: 7420 696e 2061 206e 6577 2077 696e 646f  t in a new windo
+00016270: 772e 2050 7943 6861 726d 2077 696c 6c20  w. PyCharm will 
+00016280: 7468 656e 2075 7375 616c 6c79 2070 726f  then usually pro
+00016290: 6d70 7420 796f 7520 746f 2063 7265 6174  mpt you to creat
+000162a0: 650a 6120 6e65 7720 7669 7274 7561 6c20  e.a new virtual 
+000162b0: 656e 7669 726f 6e6d 656e 742e 0a0a 4372  environment...Cr
+000162c0: 6561 7465 2061 206e 6577 2050 6f65 7472  eate a new Poetr
+000162d0: 7920 7669 7274 7561 6c20 656e 7669 726f  y virtual enviro
+000162e0: 6e6d 656e 7420 666f 7220 7468 6520 7072  nment for the pr
+000162f0: 6f6a 6563 742e 2049 6620 5079 4368 6172  oject. If PyChar
+00016300: 6d20 646f 6573 6e27 7420 616c 7265 6164  m doesn't alread
+00016310: 790a 6b6e 6f77 2077 6865 7265 2079 6f75  y.know where you
+00016320: 7220 6070 6f65 7472 7960 2065 7865 6375  r `poetry` execu
+00016330: 7461 626c 6520 6973 2c20 7468 656e 2073  table is, then s
+00016340: 6574 2074 6865 2070 6174 6820 746f 2079  et the path to y
+00016350: 6f75 7220 6070 6f65 7472 7960 2065 7865  our `poetry` exe
+00016360: 6375 7461 626c 650a 696e 2074 6865 2022  cutable.in the "
+00016370: 4e65 7720 506f 6574 7279 2045 6e76 6972  New Poetry Envir
+00016380: 6f6e 6d65 6e74 2220 666f 726d 2069 6e70  onment" form inp
+00016390: 7574 2066 6965 6c64 206c 6162 656c 6c65  ut field labelle
+000163a0: 6420 2250 6f65 7472 7920 6578 6563 7574  d "Poetry execut
+000163b0: 6162 6c65 222e 2049 6e20 7468 650a 224e  able". In the."N
+000163c0: 6577 2050 6f65 7472 7920 456e 7669 726f  ew Poetry Enviro
+000163d0: 6e6d 656e 7422 2066 6f72 6d2c 2079 6f75  nment" form, you
+000163e0: 2077 696c 6c20 616c 736f 2068 6176 6520   will also have 
+000163f0: 7468 6520 6f70 706f 7274 756e 6974 7920  the opportunity 
+00016400: 746f 2073 656c 6563 7420 7768 6963 680a  to select which.
+00016410: 5079 7468 6f6e 2065 7865 6375 7461 626c  Python executabl
+00016420: 6520 7769 6c6c 2062 6520 7573 6564 2062  e will be used b
+00016430: 7920 7468 6520 7669 7274 7561 6c20 656e  y the virtual en
+00016440: 7669 726f 6e6d 656e 742e 0a0a 5079 4368  vironment...PyCh
+00016450: 6172 6d20 7769 6c6c 2074 6865 6e20 6372  arm will then cr
+00016460: 6561 7465 2061 206e 6577 2050 6f65 7472  eate a new Poetr
+00016470: 7920 7669 7274 7561 6c20 656e 7669 726f  y virtual enviro
+00016480: 6e6d 656e 7420 666f 7220 796f 7572 2070  nment for your p
+00016490: 726f 6a65 6374 2c20 7573 696e 670a 6120  roject, using.a 
+000164a0: 7061 7274 6963 756c 6172 2076 6572 7369  particular versi
+000164b0: 6f6e 206f 6620 5079 7468 6f6e 2c20 616e  on of Python, an
+000164c0: 6420 616c 736f 2069 6e73 7461 6c6c 2069  d also install i
+000164d0: 6e74 6f20 7468 6973 2076 6972 7475 616c  nto this virtual
+000164e0: 2065 6e76 6972 6f6e 6d65 6e74 2074 6865   environment the
+000164f0: 0a70 726f 6a65 6374 2773 2070 6163 6b61  .project's packa
+00016500: 6765 2064 6570 656e 6465 6e63 6965 7320  ge dependencies 
+00016510: 6163 636f 7264 696e 6720 746f 2074 6865  according to the
+00016520: 2070 726f 6a65 6374 2773 2060 706f 6574   project's `poet
+00016530: 7279 2e6c 6f63 6b60 2066 696c 652e 0a0a  ry.lock` file...
+00016540: 596f 7520 6361 6e20 6164 6420 6469 6666  You can add diff
+00016550: 6572 656e 7420 506f 6574 7279 2065 6e76  erent Poetry env
+00016560: 6972 6f6e 6d65 6e74 7320 666f 7220 6469  ironments for di
+00016570: 6666 6572 656e 7420 5079 7468 6f6e 2076  fferent Python v
+00016580: 6572 7369 6f6e 732c 2061 6e64 2073 7769  ersions, and swi
+00016590: 7463 680a 6265 7477 6565 6e20 7468 656d  tch.between them
+000165a0: 2075 7369 6e67 2074 6865 2022 5079 7468   using the "Pyth
+000165b0: 6f6e 2049 6e74 6572 7072 6574 6572 2220  on Interpreter" 
+000165c0: 7365 7474 696e 6773 206f 6620 5079 4368  settings of PyCh
+000165d0: 6172 6d2e 2049 6620 796f 7520 7761 6e74  arm. If you want
+000165e0: 2074 6f20 7573 650a 6120 7665 7273 696f   to use.a versio
+000165f0: 6e20 6f66 2050 7974 686f 6e20 7468 6174  n of Python that
+00016600: 2069 736e 2774 2069 6e73 7461 6c6c 6564   isn't installed
+00016610: 2c20 6569 7468 6572 2075 7365 2079 6f75  , either use you
+00016620: 7220 6661 766f 7572 6974 6520 7061 636b  r favourite pack
+00016630: 6167 6520 6d61 6e61 6765 722c 0a6f 7220  age manager,.or 
+00016640: 696e 7374 616c 6c20 5079 7468 6f6e 2062  install Python b
+00016650: 7920 646f 776e 6c6f 6164 696e 6720 616e  y downloading an
+00016660: 2069 6e73 7461 6c6c 6572 2066 6f72 2072   installer for r
+00016670: 6563 656e 7420 7665 7273 696f 6e73 206f  ecent versions o
+00016680: 6620 5079 7468 6f6e 2064 6972 6563 746c  f Python directl
+00016690: 790a 6672 6f6d 2074 6865 205b 5079 7468  y.from the [Pyth
+000166a0: 6f6e 2077 6562 7369 7465 5d28 6874 7470  on website](http
+000166b0: 733a 2f2f 7777 772e 7079 7468 6f6e 2e6f  s://www.python.o
+000166c0: 7267 2f64 6f77 6e6c 6f61 6473 2f29 2e0a  rg/downloads/)..
+000166d0: 0a4f 6e63 6520 7072 6f6a 6563 7420 6465  .Once project de
+000166e0: 7065 6e64 656e 6369 6573 2068 6176 6520  pendencies have 
+000166f0: 6265 656e 2069 6e73 7461 6c6c 6564 2c20  been installed, 
+00016700: 796f 7520 7368 6f75 6c64 2062 6520 6162  you should be ab
+00016710: 6c65 2074 6f20 7275 6e20 7465 7374 730a  le to run tests.
+00016720: 6672 6f6d 2077 6974 6869 6e20 5079 4368  from within PyCh
+00016730: 6172 6d20 2872 6967 6874 2d63 6c69 636b  arm (right-click
+00016740: 206f 6e20 7468 6520 6074 6573 7473 6020   on the `tests` 
+00016750: 666f 6c64 6572 2061 6e64 2073 656c 6563  folder and selec
+00016760: 7420 7468 6520 2752 756e 2720 6f70 7469  t the 'Run' opti
+00016770: 6f6e 292e 0a0a 4265 6361 7573 6520 6f66  on)...Because of
+00016780: 2061 2063 6f6e 666c 6963 7420 6265 7477   a conflict betw
+00016790: 6565 6e20 7079 7465 7374 2061 6e64 2050  een pytest and P
+000167a0: 7943 6861 726d 2773 2064 6562 7567 6765  yCharm's debugge
+000167b0: 7220 616e 6420 7468 6520 636f 7665 7261  r and the covera
+000167c0: 6765 2074 6f6f 6c2c 0a79 6f75 206d 6179  ge tool,.you may
+000167d0: 206e 6565 6420 746f 2061 6464 2060 602d   need to add ``-
+000167e0: 2d6e 6f2d 636f 7660 6020 6173 2061 6e20  -no-cov`` as an 
+000167f0: 6f70 7469 6f6e 2074 6f20 7468 6520 7465  option to the te
+00016800: 7374 2072 756e 6e65 7220 7465 6d70 6c61  st runner templa
+00016810: 7465 2e20 416c 7465 726e 6174 6976 656c  te. Alternativel
+00016820: 792c 0a6a 7573 7420 7573 6520 7468 6520  y,.just use the 
+00016830: 5079 7468 6f6e 2053 7461 6e64 6172 6420  Python Standard 
+00016840: 4c69 6272 6172 7927 7320 6060 756e 6974  Library's ``unit
+00016850: 7465 7374 6060 206d 6f64 756c 652e 0a0a  test`` module...
+00016860: 596f 7520 7368 6f75 6c64 2061 6c73 6f20  You should also 
+00016870: 6265 2061 626c 6520 746f 206f 7065 6e20  be able to open 
+00016880: 6120 7465 726d 696e 616c 2077 696e 646f  a terminal windo
+00016890: 7720 696e 2050 7943 6861 726d 2c20 616e  w in PyCharm, an
+000168a0: 6420 7275 6e20 7468 6520 7072 6f6a 6563  d run the projec
+000168b0: 7427 730a 4d61 6b65 6669 6c65 2063 6f6d  t's.Makefile com
+000168c0: 6d61 6e64 7320 6672 6f6d 2074 6865 2063  mands from the c
+000168d0: 6f6d 6d61 6e64 206c 696e 6520 2873 6565  ommand line (see
+000168e0: 2062 656c 6f77 292e 0a0a 2323 2320 5365   below)...### Se
+000168f0: 7475 7020 6672 6f6d 2063 6f6d 6d61 6e64  tup from command
+00016900: 206c 696e 650a 0a4f 6274 6169 6e20 7468   line..Obtain th
+00016910: 6520 7072 6f6a 6563 7420 6669 6c65 732c  e project files,
+00016920: 2075 7369 6e67 2047 6974 206f 7220 7375   using Git or su
+00016930: 6974 6162 6c65 2061 6c74 6572 6e61 7469  itable alternati
+00016940: 7665 2e0a 0a49 6e20 6120 7465 726d 696e  ve...In a termin
+00016950: 616c 2061 7070 6c69 6361 7469 6f6e 2c20  al application, 
+00016960: 6368 616e 6765 2079 6f75 7220 6375 7272  change your curr
+00016970: 656e 7420 776f 726b 696e 6720 6469 7265  ent working dire
+00016980: 6374 6f72 790a 746f 2074 6865 2072 6f6f  ctory.to the roo
+00016990: 7420 666f 6c64 6572 206f 6620 7468 6520  t folder of the 
+000169a0: 7072 6f6a 6563 7420 6669 6c65 732e 2054  project files. T
+000169b0: 6865 7265 2073 686f 756c 6420 6265 2061  here should be a
+000169c0: 204d 616b 6566 696c 650a 696e 2074 6869   Makefile.in thi
+000169d0: 7320 666f 6c64 6572 2e0a 0a55 7365 2074  s folder...Use t
+000169e0: 6865 204d 616b 6566 696c 6520 746f 2063  he Makefile to c
+000169f0: 7265 6174 6520 6120 6e65 7720 506f 6574  reate a new Poet
+00016a00: 7279 2076 6972 7475 616c 2065 6e76 6972  ry virtual envir
+00016a10: 6f6e 6d65 6e74 2066 6f72 2074 6865 0a70  onment for the.p
+00016a20: 726f 6a65 6374 2061 6e64 2069 6e73 7461  roject and insta
+00016a30: 6c6c 2074 6865 2070 726f 6a65 6374 2773  ll the project's
+00016a40: 2070 6163 6b61 6765 2064 6570 656e 6465   package depende
+00016a50: 6e63 6965 7320 696e 746f 2069 742c 0a75  ncies into it,.u
+00016a60: 7369 6e67 2074 6865 2066 6f6c 6c6f 7769  sing the followi
+00016a70: 6e67 2063 6f6d 6d61 6e64 2e0a 0a20 2020  ng command...   
+00016a80: 2024 206d 616b 6520 696e 7374 616c 6c2d   $ make install-
+00016a90: 7061 636b 6167 6573 0a0a 4974 2773 2061  packages..It's a
+00016aa0: 6c73 6f20 706f 7373 6962 6c65 2074 6f20  lso possible to 
+00016ab0: 616c 736f 2069 6e73 7461 6c6c 2074 6865  also install the
+00016ac0: 2070 726f 6a65 6374 2069 6e20 2765 6469   project in 'edi
+00016ad0: 7461 626c 6520 6d6f 6465 272e 0a0a 2020  table mode'...  
+00016ae0: 2020 2420 6d61 6b65 2069 6e73 7461 6c6c    $ make install
+00016af0: 0a0a 506c 6561 7365 206e 6f74 652c 2069  ..Please note, i
+00016b00: 6620 796f 7520 6372 6561 7465 2074 6865  f you create the
+00016b10: 2076 6972 7475 616c 2065 6e76 6972 6f6e   virtual environ
+00016b20: 6d65 6e74 2069 6e20 7468 6973 2077 6179  ment in this way
+00016b30: 2c20 616e 6420 7468 656e 2074 7279 2074  , and then try t
+00016b40: 6f0a 6f70 656e 2074 6865 2070 726f 6a65  o.open the proje
+00016b50: 6374 2069 6e20 5079 4368 6172 6d20 616e  ct in PyCharm an
+00016b60: 6420 636f 6e66 6967 7572 6520 7468 6520  d configure the 
+00016b70: 7072 6f6a 6563 7420 746f 2075 7365 2074  project to use t
+00016b80: 6869 7320 7669 7274 7561 6c0a 656e 7669  his virtual.envi
+00016b90: 726f 6e6d 656e 7420 6173 2061 6e20 2245  ronment as an "E
+00016ba0: 7869 7374 696e 6720 506f 6574 7279 2045  xisting Poetry E
+00016bb0: 6e76 6972 6f6e 6d65 6e74 222c 2050 7943  nvironment", PyC
+00016bc0: 6861 726d 2073 6f6d 6574 696d 6573 2068  harm sometimes h
+00016bd0: 6173 2073 6f6d 650a 6973 7375 6573 2028  as some.issues (
+00016be0: 646f 6e27 7420 6b6e 6f77 2077 6879 2920  don't know why) 
+00016bf0: 7768 6963 6820 6d69 6768 7420 6265 2070  which might be p
+00016c00: 726f 626c 656d 6174 6963 2e20 4966 2079  roblematic. If y
+00016c10: 6f75 2065 6e63 6f75 6e74 6572 2073 7563  ou encounter suc
+00016c20: 680a 6973 7375 6573 2c20 796f 7520 6361  h.issues, you ca
+00016c30: 6e20 7265 736f 6c76 6520 7468 6573 6520  n resolve these 
+00016c40: 6973 7375 6573 2062 7920 6465 6c65 7469  issues by deleti
+00016c50: 6e67 2074 6865 2076 6972 7475 616c 2065  ng the virtual e
+00016c60: 6e76 6972 6f6e 6d65 6e74 0a61 6e64 2063  nvironment.and c
+00016c70: 7265 6174 696e 6720 7468 6520 506f 6574  reating the Poet
+00016c80: 7279 2076 6972 7475 616c 2065 6e76 6972  ry virtual envir
+00016c90: 6f6e 6d65 6e74 2075 7369 6e67 2050 7943  onment using PyC
+00016ca0: 6861 726d 2028 7365 6520 6162 6f76 6529  harm (see above)
+00016cb0: 2e0a 0a23 2323 2050 726f 6a65 6374 204d  ...### Project M
+00016cc0: 616b 6566 696c 6520 636f 6d6d 616e 6473  akefile commands
+00016cd0: 0a0a 596f 7520 6361 6e20 7374 6172 7420  ..You can start 
+00016ce0: 4576 656e 7453 746f 7265 4442 2075 7369  EventStoreDB usi
+00016cf0: 6e67 2074 6865 2066 6f6c 6c6f 7769 6e67  ng the following
+00016d00: 2063 6f6d 6d61 6e64 2e0a 0a20 2020 2024   command...    $
+00016d10: 206d 616b 6520 7374 6172 742d 6576 656e   make start-even
+00016d20: 7473 746f 7265 6462 0a0a 596f 7520 6361  tstoredb..You ca
+00016d30: 6e20 7275 6e20 7465 7374 7320 7573 696e  n run tests usin
+00016d40: 6720 7468 6520 666f 6c6c 6f77 696e 6720  g the following 
+00016d50: 636f 6d6d 616e 6420 286e 6565 6473 2045  command (needs E
+00016d60: 7665 6e74 5374 6f72 6544 4220 746f 2062  ventStoreDB to b
+00016d70: 6520 7275 6e6e 696e 6729 2e0a 0a20 2020  e running)...   
+00016d80: 2024 206d 616b 6520 7465 7374 0a0a 596f   $ make test..Yo
+00016d90: 7520 6361 6e20 7374 6f70 2045 7665 6e74  u can stop Event
+00016da0: 5374 6f72 6544 4220 7573 696e 6720 7468  StoreDB using th
+00016db0: 6520 666f 6c6c 6f77 696e 6720 636f 6d6d  e following comm
+00016dc0: 616e 642e 0a0a 2020 2020 2420 6d61 6b65  and...    $ make
+00016dd0: 2073 746f 702d 6576 656e 7473 746f 7265   stop-eventstore
+00016de0: 6462 0a0a 596f 7520 6361 6e20 6368 6563  db..You can chec
+00016df0: 6b20 7468 6520 666f 726d 6174 7469 6e67  k the formatting
+00016e00: 206f 6620 7468 6520 636f 6465 2075 7369   of the code usi
+00016e10: 6e67 2074 6865 2066 6f6c 6c6f 7769 6e67  ng the following
+00016e20: 2063 6f6d 6d61 6e64 2e0a 0a20 2020 2024   command...    $
+00016e30: 206d 616b 6520 6c69 6e74 0a0a 596f 7520   make lint..You 
+00016e40: 6361 6e20 7265 666f 726d 6174 2074 6865  can reformat the
+00016e50: 2063 6f64 6520 7573 696e 6720 7468 6520   code using the 
+00016e60: 666f 6c6c 6f77 696e 6720 636f 6d6d 616e  following comman
+00016e70: 642e 0a0a 2020 2020 2420 6d61 6b65 2066  d...    $ make f
+00016e80: 6d74 0a0a 5465 7374 7320 6265 6c6f 6e67  mt..Tests belong
+00016e90: 2069 6e20 602e 2f74 6573 7473 602e 2043   in `./tests`. C
+00016ea0: 6f64 652d 756e 6465 722d 7465 7374 2062  ode-under-test b
+00016eb0: 656c 6f6e 6773 2069 6e20 602e 2f65 7364  elongs in `./esd
+00016ec0: 6263 6c69 656e 7460 2e0a 0a45 6469 7420  bclient`...Edit 
+00016ed0: 7061 636b 6167 6520 6465 7065 6e64 656e  package dependen
+00016ee0: 6369 6573 2069 6e20 6070 7970 726f 6a65  cies in `pyproje
+00016ef0: 6374 2e74 6f6d 6c60 2e20 5570 6461 7465  ct.toml`. Update
+00016f00: 2069 6e73 7461 6c6c 6564 2070 6163 6b61   installed packa
+00016f10: 6765 7320 2861 6e64 2074 6865 0a60 706f  ges (and the.`po
+00016f20: 6574 7279 2e6c 6f63 6b60 2066 696c 6529  etry.lock` file)
+00016f30: 2075 7369 6e67 2074 6865 2066 6f6c 6c6f   using the follo
+00016f40: 7769 6e67 2063 6f6d 6d61 6e64 2e0a 0a20  wing command... 
+00016f50: 2020 2024 206d 616b 6520 7570 6461 7465     $ make update
+00016f60: 2d70 6163 6b61 6765 730a 0a              -packages..
```

